(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"./client/scripts/main.js":[function(require,module,exports){
'use strict';

var namespace = 'main';

var angular = require('angular');

var app = angular.module(namespace, [
    // inject:modules start

    require('./common')(namespace).name

    // inject:modules end
]);

module.exports = app;
},{"./common":"/home/codio/workspace/client/scripts/common/index.js","angular":"/home/codio/workspace/bower_components/angular/angular.min.js"}],"/home/codio/workspace/bower_components/angular-animate/angular-animate.min.js":[function(require,module,exports){
/*
 AngularJS v1.2.26
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(F,e,O){'use strict';e.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){return function(G,s,g){g=g.ngAnimateChildren;e.isString(g)&&0===g.length?s.data("$$ngAnimateChildren",!0):G.$watch(g,function(e){s.data("$$ngAnimateChildren",!!e)})}}).factory("$$animateReflow",["$$rAF","$document",function(e,s){return function(g){return e(function(){g()})}}]).config(["$provide","$animateProvider",function(G,s){function g(e){for(var g=0;g<e.length;g++){var l=e[g];if(l.nodeType==aa)return l}}
function B(l){return e.element(g(l))}var m=e.noop,u=e.forEach,P=s.$$selectors,aa=1,l="$$ngAnimateState",V="$$ngAnimateChildren",J="ng-animate",n={running:!0};G.decorator("$animate",["$delegate","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document",function(z,F,$,R,E,H,O){function K(a){var b=a.data(l)||{};b.running=!0;a.data(l,b)}function L(a){if(a){var b=[],c={};a=a.substr(1).split(".");($.transitions||$.animations)&&b.push(F.get(P[""]));for(var d=0;d<a.length;d++){var f=
a[d],e=P[f];e&&!c[f]&&(b.push(F.get(e)),c[f]=!0)}return b}}function G(a,b,c){function d(a,b){var c=a[b],d=a["before"+b.charAt(0).toUpperCase()+b.substr(1)];if(c||d)return"leave"==b&&(d=c,c=null),n.push({event:b,fn:c}),h.push({event:b,fn:d}),!0}function f(b,d,e){var f=[];u(b,function(a){a.fn&&f.push(a)});var g=0;u(f,function(b,l){var C=function(){a:{if(d){(d[l]||m)();if(++g<f.length)break a;d=null}e()}};switch(b.event){case "setClass":d.push(b.fn(a,A,k,C));break;case "addClass":d.push(b.fn(a,A||c,
C));break;case "removeClass":d.push(b.fn(a,k||c,C));break;default:d.push(b.fn(a,C))}});d&&0===d.length&&e()}var g=a[0];if(g){var l="setClass"==b,p=l||"addClass"==b||"removeClass"==b,A,k;e.isArray(c)&&(A=c[0],k=c[1],c=A+" "+k);var x=a.attr("class")+" "+c;if(M(x)){var t=m,w=[],h=[],q=m,y=[],n=[],x=(" "+x).replace(/\s+/g,".");u(L(x),function(a){!d(a,b)&&l&&(d(a,"addClass"),d(a,"removeClass"))});return{node:g,event:b,className:c,isClassBased:p,isSetClassOperation:l,before:function(a){t=a;f(h,w,function(){t=
m;a()})},after:function(a){q=a;f(n,y,function(){q=m;a()})},cancel:function(){w&&(u(w,function(a){(a||m)(!0)}),t(!0));y&&(u(y,function(a){(a||m)(!0)}),q(!0))}}}}}function r(a,b,c,d,f,g,n){function p(d){var e="$animate:"+d;q&&(q[e]&&0<q[e].length)&&E(function(){c.triggerHandler(e,{event:a,className:b})})}function A(){p("before")}function m(){p("after")}function x(){p("close");n&&E(function(){n()})}function t(){t.hasBeenRun||(t.hasBeenRun=!0,g())}function w(){if(!w.hasBeenRun){w.hasBeenRun=!0;var d=
c.data(l);d&&(h&&h.isClassBased?k(c,b):(E(function(){var d=c.data(l)||{};r==d.index&&k(c,b,a)}),c.data(l,d)));x()}}var h=G(c,a,b);if(h){b=h.className;var q=e.element._data(h.node),q=q&&q.events;d||(d=f?f.parent():c.parent());var y=c.data(l)||{};f=y.active||{};var z=y.totalActive||0,C=y.last,D;h.isClassBased&&(D=y.running||y.disabled||C&&!C.isClassBased);if(D||N(c,d))t(),A(),m(),w();else{d=!1;if(0<z){D=[];if(h.isClassBased)"setClass"==C.event?(D.push(C),k(c,b)):f[b]&&(v=f[b],v.event==a?d=!0:(D.push(v),
k(c,b)));else if("leave"==a&&f["ng-leave"])d=!0;else{for(var v in f)D.push(f[v]),k(c,v);f={};z=0}0<D.length&&u(D,function(a){a.cancel()})}!h.isClassBased||(h.isSetClassOperation||d)||(d="addClass"==a==c.hasClass(b));if(d)t(),A(),m(),x();else{if("leave"==a)c.one("$destroy",function(a){a=e.element(this);var b=a.data(l);b&&(b=b.active["ng-leave"])&&(b.cancel(),k(a,"ng-leave"))});c.addClass(J);var r=Y++;z++;f[b]=h;c.data(l,{last:h,active:f,index:r,totalActive:z});A();h.before(function(d){var e=c.data(l);
d=d||!e||!e.active[b]||h.isClassBased&&e.active[b].event!=a;t();!0===d?w():(m(),h.after(w))})}}}else t(),A(),m(),w()}function T(a){if(a=g(a))a=e.isFunction(a.getElementsByClassName)?a.getElementsByClassName(J):a.querySelectorAll("."+J),u(a,function(a){a=e.element(a);(a=a.data(l))&&a.active&&u(a.active,function(a){a.cancel()})})}function k(a,b){if(g(a)==g(R))n.disabled||(n.running=!1,n.structural=!1);else if(b){var c=a.data(l)||{},d=!0===b;!d&&(c.active&&c.active[b])&&(c.totalActive--,delete c.active[b]);
if(d||!c.totalActive)a.removeClass(J),a.removeData(l)}}function N(a,b){if(n.disabled)return!0;if(g(a)==g(R))return n.running;var c,d,f;do{if(0===b.length)break;var m=g(b)==g(R),k=m?n:b.data(l)||{};if(k.disabled)return!0;m&&(f=!0);!1!==c&&(m=b.data(V),e.isDefined(m)&&(c=m));d=d||k.running||k.last&&!k.last.isClassBased}while(b=b.parent());return!f||!c&&d}var Y=0;R.data(l,n);H.$$postDigest(function(){H.$$postDigest(function(){n.running=!1})});var Q=s.classNameFilter(),M=Q?function(a){return Q.test(a)}:
function(){return!0};return{enter:function(a,b,c,d){a=e.element(a);b=b&&e.element(b);c=c&&e.element(c);K(a);z.enter(a,b,c);H.$$postDigest(function(){a=B(a);r("enter","ng-enter",a,b,c,m,d)})},leave:function(a,b){a=e.element(a);T(a);K(a);H.$$postDigest(function(){r("leave","ng-leave",B(a),null,null,function(){z.leave(a)},b)})},move:function(a,b,c,d){a=e.element(a);b=b&&e.element(b);c=c&&e.element(c);T(a);K(a);z.move(a,b,c);H.$$postDigest(function(){a=B(a);r("move","ng-move",a,b,c,m,d)})},addClass:function(a,
b,c){a=e.element(a);a=B(a);r("addClass",b,a,null,null,function(){z.addClass(a,b)},c)},removeClass:function(a,b,c){a=e.element(a);a=B(a);r("removeClass",b,a,null,null,function(){z.removeClass(a,b)},c)},setClass:function(a,b,c,d){a=e.element(a);a=B(a);r("setClass",[b,c],a,null,null,function(){z.setClass(a,b,c)},d)},enabled:function(a,b){switch(arguments.length){case 2:if(a)k(b);else{var c=b.data(l)||{};c.disabled=!0;b.data(l,c)}break;case 1:n.disabled=!a;break;default:a=!n.disabled}return!!a}}}]);s.register("",
["$window","$sniffer","$timeout","$$animateReflow",function(l,n,s,B){function E(a,U){S&&S();W.push(U);S=B(function(){u(W,function(a){a()});W=[];S=null;v={}})}function H(a,U){var b=g(a);a=e.element(b);Z.push(a);b=Date.now()+U;b<=da||(s.cancel(ca),da=b,ca=s(function(){G(Z);Z=[]},U,!1))}function G(a){u(a,function(a){(a=a.data(q))&&(a.closeAnimationFn||m)()})}function K(a,b){var c=b?v[b]:null;if(!c){var d=0,e=0,f=0,g=0,m,k,h,q;u(a,function(a){if(a.nodeType==aa){a=l.getComputedStyle(a)||{};h=a[I+P];d=
Math.max(L(h),d);q=a[I+x];m=a[I+t];e=Math.max(L(m),e);k=a[p+t];g=Math.max(L(k),g);var b=L(a[p+P]);0<b&&(b*=parseInt(a[p+w],10)||1);f=Math.max(b,f)}});c={total:0,transitionPropertyStyle:q,transitionDurationStyle:h,transitionDelayStyle:m,transitionDelay:e,transitionDuration:d,animationDelayStyle:k,animationDelay:g,animationDuration:f};b&&(v[b]=c)}return c}function L(a){var b=0;a=e.isString(a)?a.split(/\s*,\s*/):[];u(a,function(a){b=Math.max(parseFloat(a)||0,b)});return b}function J(a){var b=a.parent(),
c=b.data(h);c||(b.data(h,++ba),c=ba);return c+"-"+g(a).getAttribute("class")}function r(a,b,c,d){var e=J(b),f=e+" "+c,l=v[f]?++v[f].total:0,k={};if(0<l){var h=c+"-stagger",k=e+" "+h;(e=!v[k])&&b.addClass(h);k=K(b,k);e&&b.removeClass(h)}d=d||function(a){return a()};b.addClass(c);var h=b.data(q)||{},n=d(function(){return K(b,f)});d=n.transitionDuration;e=n.animationDuration;if(0===d&&0===e)return b.removeClass(c),!1;b.data(q,{running:h.running||0,itemIndex:l,stagger:k,timings:n,closeAnimationFn:m});
a=0<h.running||"setClass"==a;0<d&&T(b,c,a);0<e&&(0<k.animationDelay&&0===k.animationDuration)&&(g(b).style[p]="none 0s");return!0}function T(a,b,c){"ng-enter"!=b&&("ng-move"!=b&&"ng-leave"!=b)&&c?a.addClass(y):g(a).style[I+x]="none"}function k(a,b){var c=I+x,d=g(a);d.style[c]&&0<d.style[c].length&&(d.style[c]="");a.removeClass(y)}function N(a){var b=p;a=g(a);a.style[b]&&0<a.style[b].length&&(a.style[b]="")}function Y(a,b,d,e){function k(a){b.off(x,l);b.removeClass(m);c(b,d);a=g(b);for(var e in s)a.style.removeProperty(s[e])}
function l(a){a.stopPropagation();var b=a.originalEvent||a;a=b.$manualTimeStamp||b.timeStamp||Date.now();b=parseFloat(b.elapsedTime.toFixed(V));Math.max(a-z,0)>=y&&b>=v&&e()}var h=g(b);a=b.data(q);if(-1!=h.getAttribute("class").indexOf(d)&&a){var m="";u(d.split(" "),function(a,b){m+=(0<b?" ":"")+a+"-active"});var n=a.stagger,p=a.timings,t=a.itemIndex,v=Math.max(p.transitionDuration,p.animationDuration),w=Math.max(p.transitionDelay,p.animationDelay),y=w*D,z=Date.now(),x=A+" "+X,r="",s=[];if(0<p.transitionDuration){var B=
p.transitionPropertyStyle;-1==B.indexOf("all")&&(r+=f+"transition-property: "+B+";",r+=f+"transition-duration: "+p.transitionDurationStyle+";",s.push(f+"transition-property"),s.push(f+"transition-duration"))}0<t&&(0<n.transitionDelay&&0===n.transitionDuration&&(r+=f+"transition-delay: "+Q(p.transitionDelayStyle,n.transitionDelay,t)+"; ",s.push(f+"transition-delay")),0<n.animationDelay&&0===n.animationDuration&&(r+=f+"animation-delay: "+Q(p.animationDelayStyle,n.animationDelay,t)+"; ",s.push(f+"animation-delay")));
0<s.length&&(p=h.getAttribute("style")||"",h.setAttribute("style",p+"; "+r));b.on(x,l);b.addClass(m);a.closeAnimationFn=function(){k();e()};h=(t*(Math.max(n.animationDelay,n.transitionDelay)||0)+(w+v)*C)*D;a.running++;H(b,h);return k}e()}function Q(a,b,c){var d="";u(a.split(","),function(a,e){d+=(0<e?",":"")+(c*b+parseInt(a,10))+"s"});return d}function M(a,b,d,e){if(r(a,b,d,e))return function(a){a&&c(b,d)}}function a(a,b,d,e){if(b.data(q))return Y(a,b,d,e);c(b,d);e()}function b(b,c,d,e){var f=M(b,
c,d);if(f){var g=f;E(c,function(){k(c,d);N(c);g=a(b,c,d,e)});return function(a){(g||m)(a)}}e()}function c(a,b){a.removeClass(b);var c=a.data(q);c&&(c.running&&c.running--,c.running&&0!==c.running||a.removeData(q))}function d(a,b){var c="";a=e.isArray(a)?a:a.split(/\s+/);u(a,function(a,d){a&&0<a.length&&(c+=(0<d?" ":"")+a+b)});return c}var f="",I,X,p,A;F.ontransitionend===O&&F.onwebkittransitionend!==O?(f="-webkit-",I="WebkitTransition",X="webkitTransitionEnd transitionend"):(I="transition",X="transitionend");
F.onanimationend===O&&F.onwebkitanimationend!==O?(f="-webkit-",p="WebkitAnimation",A="webkitAnimationEnd animationend"):(p="animation",A="animationend");var P="Duration",x="Property",t="Delay",w="IterationCount",h="$$ngAnimateKey",q="$$ngAnimateCSS3Data",y="ng-animate-block-transitions",V=3,C=1.5,D=1E3,v={},ba=0,W=[],S,ca=null,da=0,Z=[];return{enter:function(a,c){return b("enter",a,"ng-enter",c)},leave:function(a,c){return b("leave",a,"ng-leave",c)},move:function(a,c){return b("move",a,"ng-move",
c)},beforeSetClass:function(a,b,c,e){var f=d(c,"-remove")+" "+d(b,"-add"),g=M("setClass",a,f,function(d){var e=a.attr("class");a.removeClass(c);a.addClass(b);d=d();a.attr("class",e);return d});if(g)return E(a,function(){k(a,f);N(a);e()}),g;e()},beforeAddClass:function(a,b,c){var e=M("addClass",a,d(b,"-add"),function(c){a.addClass(b);c=c();a.removeClass(b);return c});if(e)return E(a,function(){k(a,b);N(a);c()}),e;c()},setClass:function(b,c,e,f){e=d(e,"-remove");c=d(c,"-add");return a("setClass",b,
e+" "+c,f)},addClass:function(b,c,e){return a("addClass",b,d(c,"-add"),e)},beforeRemoveClass:function(a,b,c){var e=M("removeClass",a,d(b,"-remove"),function(c){var d=a.attr("class");a.removeClass(b);c=c();a.attr("class",d);return c});if(e)return E(a,function(){k(a,b);N(a);c()}),e;c()},removeClass:function(b,c,e){return a("removeClass",b,d(c,"-remove"),e)}}}])}])})(window,window.angular);
//# sourceMappingURL=angular-animate.min.js.map

},{}],"/home/codio/workspace/bower_components/angular-sanitize/angular-sanitize.min.js":[function(require,module,exports){
/*
 AngularJS v1.2.26
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(q,g,r){'use strict';function F(a){var d=[];t(d,g.noop).chars(a);return d.join("")}function m(a){var d={};a=a.split(",");var c;for(c=0;c<a.length;c++)d[a[c]]=!0;return d}function G(a,d){function c(a,b,c,h){b=g.lowercase(b);if(u[b])for(;f.last()&&v[f.last()];)e("",f.last());w[b]&&f.last()==b&&e("",b);(h=x[b]||!!h)||f.push(b);var n={};c.replace(H,function(a,b,d,c,e){n[b]=s(d||c||e||"")});d.start&&d.start(b,n,h)}function e(a,b){var c=0,e;if(b=g.lowercase(b))for(c=f.length-1;0<=c&&f[c]!=b;c--);
if(0<=c){for(e=f.length-1;e>=c;e--)d.end&&d.end(f[e]);f.length=c}}"string"!==typeof a&&(a=null===a||"undefined"===typeof a?"":""+a);var b,l,f=[],n=a,h;for(f.last=function(){return f[f.length-1]};a;){h="";l=!0;if(f.last()&&y[f.last()])a=a.replace(RegExp("(.*)<\\s*\\/\\s*"+f.last()+"[^>]*>","i"),function(a,b){b=b.replace(I,"$1").replace(J,"$1");d.chars&&d.chars(s(b));return""}),e("",f.last());else{if(0===a.indexOf("\x3c!--"))b=a.indexOf("--",4),0<=b&&a.lastIndexOf("--\x3e",b)===b&&(d.comment&&d.comment(a.substring(4,
b)),a=a.substring(b+3),l=!1);else if(z.test(a)){if(b=a.match(z))a=a.replace(b[0],""),l=!1}else if(K.test(a)){if(b=a.match(A))a=a.substring(b[0].length),b[0].replace(A,e),l=!1}else L.test(a)&&((b=a.match(B))?(b[4]&&(a=a.substring(b[0].length),b[0].replace(B,c)),l=!1):(h+="<",a=a.substring(1)));l&&(b=a.indexOf("<"),h+=0>b?a:a.substring(0,b),a=0>b?"":a.substring(b),d.chars&&d.chars(s(h)))}if(a==n)throw M("badparse",a);n=a}e()}function s(a){if(!a)return"";var d=N.exec(a);a=d[1];var c=d[3];if(d=d[2])p.innerHTML=
d.replace(/</g,"&lt;"),d="textContent"in p?p.textContent:p.innerText;return a+d+c}function C(a){return a.replace(/&/g,"&amp;").replace(O,function(a){var c=a.charCodeAt(0);a=a.charCodeAt(1);return"&#"+(1024*(c-55296)+(a-56320)+65536)+";"}).replace(P,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function t(a,d){var c=!1,e=g.bind(a,a.push);return{start:function(a,l,f){a=g.lowercase(a);!c&&y[a]&&(c=a);c||!0!==D[a]||(e("<"),e(a),g.forEach(l,function(c,f){var k=
g.lowercase(f),l="img"===a&&"src"===k||"background"===k;!0!==Q[k]||!0===E[k]&&!d(c,l)||(e(" "),e(f),e('="'),e(C(c)),e('"'))}),e(f?"/>":">"))},end:function(a){a=g.lowercase(a);c||!0!==D[a]||(e("</"),e(a),e(">"));a==c&&(c=!1)},chars:function(a){c||e(C(a))}}}var M=g.$$minErr("$sanitize"),B=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,A=/^<\/\s*([\w:-]+)[^>]*>/,H=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,L=/^</,
K=/^<\//,I=/\x3c!--(.*?)--\x3e/g,z=/<!DOCTYPE([^>]*?)>/i,J=/<!\[CDATA\[(.*?)]]\x3e/g,O=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,P=/([^\#-~| |!])/g,x=m("area,br,col,hr,img,wbr");q=m("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr");r=m("rp,rt");var w=g.extend({},r,q),u=g.extend({},q,m("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),v=g.extend({},r,m("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),
y=m("script,style"),D=g.extend({},x,u,v,w),E=m("background,cite,href,longdesc,src,usemap"),Q=g.extend({},E,m("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width")),p=document.createElement("pre"),N=/^(\s*)([\s\S]*?)(\s*)$/;g.module("ngSanitize",[]).provider("$sanitize",
function(){this.$get=["$$sanitizeUri",function(a){return function(d){var c=[];G(d,t(c,function(c,b){return!/^unsafe/.test(a(c,b))}));return c.join("")}}]});g.module("ngSanitize").filter("linky",["$sanitize",function(a){var d=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"]/,c=/^mailto:/;return function(e,b){function l(a){a&&k.push(F(a))}function f(a,c){k.push("<a ");g.isDefined(b)&&(k.push('target="'),k.push(b),k.push('" '));k.push('href="');k.push(a);k.push('">');l(c);k.push("</a>")}
if(!e)return e;for(var n,h=e,k=[],m,p;n=h.match(d);)m=n[0],n[2]==n[3]&&(m="mailto:"+m),p=n.index,l(h.substr(0,p)),f(m,n[0].replace(c,"")),h=h.substring(p+n[0].length);l(h);return a(k.join(""))}}])})(window,window.angular);
//# sourceMappingURL=angular-sanitize.min.js.map

},{}],"/home/codio/workspace/bower_components/angular-ui-router/release/angular-ui-router.min.js":[function(require,module,exports){
(function (global){

; require("/home/codio/workspace/bower_components/angular/angular.min.js");
;__browserify_shim_require__=require;(function browserifyShim(module, define, require) {
/**
 * State-based routing for AngularJS
 * @version v0.2.10
 * @link http://angular-ui.github.com/
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(a,b,c){"use strict";function d(a,b){return I(new(I(function(){},{prototype:a})),b)}function e(a){return H(arguments,function(b){b!==a&&H(b,function(b,c){a.hasOwnProperty(c)||(a[c]=b)})}),a}function f(a,b){var c=[];for(var d in a.path){if(a.path[d]!==b.path[d])break;c.push(a.path[d])}return c}function g(a,b){if(Array.prototype.indexOf)return a.indexOf(b,Number(arguments[2])||0);var c=a.length>>>0,d=Number(arguments[2])||0;for(d=0>d?Math.ceil(d):Math.floor(d),0>d&&(d+=c);c>d;d++)if(d in a&&a[d]===b)return d;return-1}function h(a,b,c,d){var e,h=f(c,d),i={},j=[];for(var k in h)if(h[k].params&&h[k].params.length){e=h[k].params;for(var l in e)g(j,e[l])>=0||(j.push(e[l]),i[e[l]]=a[e[l]])}return I({},i,b)}function i(a,b){var c={};return H(a,function(a){var d=b[a];c[a]=null!=d?String(d):null}),c}function j(a,b,c){if(!c){c=[];for(var d in a)c.push(d)}for(var e=0;e<c.length;e++){var f=c[e];if(a[f]!=b[f])return!1}return!0}function k(a,b){var c={};return H(a,function(a){c[a]=b[a]}),c}function l(a,b){var d=1,f=2,g={},h=[],i=g,j=I(a.when(g),{$$promises:g,$$values:g});this.study=function(g){function k(a,c){if(o[c]!==f){if(n.push(c),o[c]===d)throw n.splice(0,n.indexOf(c)),new Error("Cyclic dependency: "+n.join(" -> "));if(o[c]=d,E(a))m.push(c,[function(){return b.get(a)}],h);else{var e=b.annotate(a);H(e,function(a){a!==c&&g.hasOwnProperty(a)&&k(g[a],a)}),m.push(c,a,e)}n.pop(),o[c]=f}}function l(a){return F(a)&&a.then&&a.$$promises}if(!F(g))throw new Error("'invocables' must be an object");var m=[],n=[],o={};return H(g,k),g=n=o=null,function(d,f,g){function h(){--s||(t||e(r,f.$$values),p.$$values=r,p.$$promises=!0,o.resolve(r))}function k(a){p.$$failure=a,o.reject(a)}function n(c,e,f){function i(a){l.reject(a),k(a)}function j(){if(!C(p.$$failure))try{l.resolve(b.invoke(e,g,r)),l.promise.then(function(a){r[c]=a,h()},i)}catch(a){i(a)}}var l=a.defer(),m=0;H(f,function(a){q.hasOwnProperty(a)&&!d.hasOwnProperty(a)&&(m++,q[a].then(function(b){r[a]=b,--m||j()},i))}),m||j(),q[c]=l.promise}if(l(d)&&g===c&&(g=f,f=d,d=null),d){if(!F(d))throw new Error("'locals' must be an object")}else d=i;if(f){if(!l(f))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else f=j;var o=a.defer(),p=o.promise,q=p.$$promises={},r=I({},d),s=1+m.length/3,t=!1;if(C(f.$$failure))return k(f.$$failure),p;f.$$values?(t=e(r,f.$$values),h()):(I(q,f.$$promises),f.then(h,k));for(var u=0,v=m.length;v>u;u+=3)d.hasOwnProperty(m[u])?h():n(m[u],m[u+1],m[u+2]);return p}},this.resolve=function(a,b,c,d){return this.study(a)(b,c,d)}}function m(a,b,c){this.fromConfig=function(a,b,c){return C(a.template)?this.fromString(a.template,b):C(a.templateUrl)?this.fromUrl(a.templateUrl,b):C(a.templateProvider)?this.fromProvider(a.templateProvider,b,c):null},this.fromString=function(a,b){return D(a)?a(b):a},this.fromUrl=function(c,d){return D(c)&&(c=c(d)),null==c?null:a.get(c,{cache:b}).then(function(a){return a.data})},this.fromProvider=function(a,b,d){return c.invoke(a,null,d||{params:b})}}function n(a){function b(b){if(!/^\w+(-+\w+)*$/.test(b))throw new Error("Invalid parameter name '"+b+"' in pattern '"+a+"'");if(f[b])throw new Error("Duplicate parameter name '"+b+"' in pattern '"+a+"'");f[b]=!0,j.push(b)}function c(a){return a.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&")}var d,e=/([:*])(\w+)|\{(\w+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,f={},g="^",h=0,i=this.segments=[],j=this.params=[];this.source=a;for(var k,l,m;(d=e.exec(a))&&(k=d[2]||d[3],l=d[4]||("*"==d[1]?".*":"[^/]*"),m=a.substring(h,d.index),!(m.indexOf("?")>=0));)g+=c(m)+"("+l+")",b(k),i.push(m),h=e.lastIndex;m=a.substring(h);var n=m.indexOf("?");if(n>=0){var o=this.sourceSearch=m.substring(n);m=m.substring(0,n),this.sourcePath=a.substring(0,h+n),H(o.substring(1).split(/[&?]/),b)}else this.sourcePath=a,this.sourceSearch="";g+=c(m)+"$",i.push(m),this.regexp=new RegExp(g),this.prefix=i[0]}function o(){this.compile=function(a){return new n(a)},this.isMatcher=function(a){return F(a)&&D(a.exec)&&D(a.format)&&D(a.concat)},this.$get=function(){return this}}function p(a){function b(a){var b=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(a.source);return null!=b?b[1].replace(/\\(.)/g,"$1"):""}function c(a,b){return a.replace(/\$(\$|\d{1,2})/,function(a,c){return b["$"===c?0:Number(c)]})}function d(a,b,c){if(!c)return!1;var d=a.invoke(b,b,{$match:c});return C(d)?d:!0}var e=[],f=null;this.rule=function(a){if(!D(a))throw new Error("'rule' must be a function");return e.push(a),this},this.otherwise=function(a){if(E(a)){var b=a;a=function(){return b}}else if(!D(a))throw new Error("'rule' must be a function");return f=a,this},this.when=function(e,f){var g,h=E(f);if(E(e)&&(e=a.compile(e)),!h&&!D(f)&&!G(f))throw new Error("invalid 'handler' in when()");var i={matcher:function(b,c){return h&&(g=a.compile(c),c=["$match",function(a){return g.format(a)}]),I(function(a,e){return d(a,c,b.exec(e.path(),e.search()))},{prefix:E(b.prefix)?b.prefix:""})},regex:function(a,e){if(a.global||a.sticky)throw new Error("when() RegExp must not be global or sticky");return h&&(g=e,e=["$match",function(a){return c(g,a)}]),I(function(b,c){return d(b,e,a.exec(c.path()))},{prefix:b(a)})}},j={matcher:a.isMatcher(e),regex:e instanceof RegExp};for(var k in j)if(j[k])return this.rule(i[k](e,f));throw new Error("invalid 'what' in when()")},this.$get=["$location","$rootScope","$injector",function(a,b,c){function d(b){function d(b){var d=b(c,a);return d?(E(d)&&a.replace().url(d),!0):!1}if(!b||!b.defaultPrevented){var g,h=e.length;for(g=0;h>g;g++)if(d(e[g]))return;f&&d(f)}}return b.$on("$locationChangeSuccess",d),{sync:function(){d()}}}]}function q(a,e,f){function g(a){return 0===a.indexOf(".")||0===a.indexOf("^")}function l(a,b){var d=E(a),e=d?a:a.name,f=g(e);if(f){if(!b)throw new Error("No reference point given for path '"+e+"'");for(var h=e.split("."),i=0,j=h.length,k=b;j>i;i++)if(""!==h[i]||0!==i){if("^"!==h[i])break;if(!k.parent)throw new Error("Path '"+e+"' not valid for state '"+b.name+"'");k=k.parent}else k=b;h=h.slice(i).join("."),e=k.name+(k.name&&h?".":"")+h}var l=w[e];return!l||!d&&(d||l!==a&&l.self!==a)?c:l}function m(a,b){x[a]||(x[a]=[]),x[a].push(b)}function n(b){b=d(b,{self:b,resolve:b.resolve||{},toString:function(){return this.name}});var c=b.name;if(!E(c)||c.indexOf("@")>=0)throw new Error("State must have a valid name");if(w.hasOwnProperty(c))throw new Error("State '"+c+"'' is already defined");var e=-1!==c.indexOf(".")?c.substring(0,c.lastIndexOf(".")):E(b.parent)?b.parent:"";if(e&&!w[e])return m(e,b.self);for(var f in z)D(z[f])&&(b[f]=z[f](b,z.$delegates[f]));if(w[c]=b,!b[y]&&b.url&&a.when(b.url,["$match","$stateParams",function(a,c){v.$current.navigable==b&&j(a,c)||v.transitionTo(b,a,{location:!1})}]),x[c])for(var g=0;g<x[c].length;g++)n(x[c][g]);return b}function o(a){return a.indexOf("*")>-1}function p(a){var b=a.split("."),c=v.$current.name.split(".");if("**"===b[0]&&(c=c.slice(c.indexOf(b[1])),c.unshift("**")),"**"===b[b.length-1]&&(c.splice(c.indexOf(b[b.length-2])+1,Number.MAX_VALUE),c.push("**")),b.length!=c.length)return!1;for(var d=0,e=b.length;e>d;d++)"*"===b[d]&&(c[d]="*");return c.join("")===b.join("")}function q(a,b){return E(a)&&!C(b)?z[a]:D(b)&&E(a)?(z[a]&&!z.$delegates[a]&&(z.$delegates[a]=z[a]),z[a]=b,this):this}function r(a,b){return F(a)?b=a:b.name=a,n(b),this}function s(a,e,g,m,n,q,r,s,x){function z(){r.url()!==M&&(r.url(M),r.replace())}function A(a,c,d,f,h){var i=d?c:k(a.params,c),j={$stateParams:i};h.resolve=n.resolve(a.resolve,j,h.resolve,a);var l=[h.resolve.then(function(a){h.globals=a})];return f&&l.push(f),H(a.views,function(c,d){var e=c.resolve&&c.resolve!==a.resolve?c.resolve:{};e.$template=[function(){return g.load(d,{view:c,locals:j,params:i,notify:!1})||""}],l.push(n.resolve(e,j,h.resolve,a).then(function(f){if(D(c.controllerProvider)||G(c.controllerProvider)){var g=b.extend({},e,j);f.$$controller=m.invoke(c.controllerProvider,null,g)}else f.$$controller=c.controller;f.$$state=a,f.$$controllerAs=c.controllerAs,h[d]=f}))}),e.all(l).then(function(){return h})}var B=e.reject(new Error("transition superseded")),F=e.reject(new Error("transition prevented")),K=e.reject(new Error("transition aborted")),L=e.reject(new Error("transition failed")),M=r.url(),N=x.baseHref();return u.locals={resolve:null,globals:{$stateParams:{}}},v={params:{},current:u.self,$current:u,transition:null},v.reload=function(){v.transitionTo(v.current,q,{reload:!0,inherit:!1,notify:!1})},v.go=function(a,b,c){return this.transitionTo(a,b,I({inherit:!0,relative:v.$current},c))},v.transitionTo=function(b,c,f){c=c||{},f=I({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},f||{});var g,k=v.$current,n=v.params,o=k.path,p=l(b,f.relative);if(!C(p)){var s={to:b,toParams:c,options:f};if(g=a.$broadcast("$stateNotFound",s,k.self,n),g.defaultPrevented)return z(),K;if(g.retry){if(f.$retry)return z(),L;var w=v.transition=e.when(g.retry);return w.then(function(){return w!==v.transition?B:(s.options.$retry=!0,v.transitionTo(s.to,s.toParams,s.options))},function(){return K}),z(),w}if(b=s.to,c=s.toParams,f=s.options,p=l(b,f.relative),!C(p)){if(f.relative)throw new Error("Could not resolve '"+b+"' from state '"+f.relative+"'");throw new Error("No such state '"+b+"'")}}if(p[y])throw new Error("Cannot transition to abstract state '"+b+"'");f.inherit&&(c=h(q,c||{},v.$current,p)),b=p;var x,D,E=b.path,G=u.locals,H=[];for(x=0,D=E[x];D&&D===o[x]&&j(c,n,D.ownParams)&&!f.reload;x++,D=E[x])G=H[x]=D.locals;if(t(b,k,G,f))return b.self.reloadOnSearch!==!1&&z(),v.transition=null,e.when(v.current);if(c=i(b.params,c||{}),f.notify&&(g=a.$broadcast("$stateChangeStart",b.self,c,k.self,n),g.defaultPrevented))return z(),F;for(var N=e.when(G),O=x;O<E.length;O++,D=E[O])G=H[O]=d(G),N=A(D,c,D===b,N,G);var P=v.transition=N.then(function(){var d,e,g;if(v.transition!==P)return B;for(d=o.length-1;d>=x;d--)g=o[d],g.self.onExit&&m.invoke(g.self.onExit,g.self,g.locals.globals),g.locals=null;for(d=x;d<E.length;d++)e=E[d],e.locals=H[d],e.self.onEnter&&m.invoke(e.self.onEnter,e.self,e.locals.globals);if(v.transition!==P)return B;v.$current=b,v.current=b.self,v.params=c,J(v.params,q),v.transition=null;var h=b.navigable;return f.location&&h&&(r.url(h.url.format(h.locals.globals.$stateParams)),"replace"===f.location&&r.replace()),f.notify&&a.$broadcast("$stateChangeSuccess",b.self,c,k.self,n),M=r.url(),v.current},function(d){return v.transition!==P?B:(v.transition=null,a.$broadcast("$stateChangeError",b.self,c,k.self,n,d),z(),e.reject(d))});return P},v.is=function(a,d){var e=l(a);return C(e)?v.$current!==e?!1:C(d)&&null!==d?b.equals(q,d):!0:c},v.includes=function(a,d){if(E(a)&&o(a)){if(!p(a))return!1;a=v.$current.name}var e=l(a);if(!C(e))return c;if(!C(v.$current.includes[e.name]))return!1;var f=!0;return b.forEach(d,function(a,b){C(q[b])&&q[b]===a||(f=!1)}),f},v.href=function(a,b,c){c=I({lossy:!0,inherit:!1,absolute:!1,relative:v.$current},c||{});var d=l(a,c.relative);if(!C(d))return null;b=h(q,b||{},v.$current,d);var e=d&&c.lossy?d.navigable:d,g=e&&e.url?e.url.format(i(d.params,b||{})):null;return!f.html5Mode()&&g&&(g="#"+f.hashPrefix()+g),"/"!==N&&(f.html5Mode()?g=N.slice(0,-1)+g:c.absolute&&(g=N.slice(1)+g)),c.absolute&&g&&(g=r.protocol()+"://"+r.host()+(80==r.port()||443==r.port()?"":":"+r.port())+(!f.html5Mode()&&g?"/":"")+g),g},v.get=function(a,b){if(!C(a)){var c=[];return H(w,function(a){c.push(a.self)}),c}var d=l(a,b);return d&&d.self?d.self:null},v}function t(a,b,c,d){return a!==b||(c!==b.locals||d.reload)&&a.self.reloadOnSearch!==!1?void 0:!0}var u,v,w={},x={},y="abstract",z={parent:function(a){if(C(a.parent)&&a.parent)return l(a.parent);var b=/^(.+)\.[^.]+$/.exec(a.name);return b?l(b[1]):u},data:function(a){return a.parent&&a.parent.data&&(a.data=a.self.data=I({},a.parent.data,a.data)),a.data},url:function(a){var b=a.url;if(E(b))return"^"==b.charAt(0)?e.compile(b.substring(1)):(a.parent.navigable||u).url.concat(b);if(e.isMatcher(b)||null==b)return b;throw new Error("Invalid url '"+b+"' in state '"+a+"'")},navigable:function(a){return a.url?a:a.parent?a.parent.navigable:null},params:function(a){if(!a.params)return a.url?a.url.parameters():a.parent.params;if(!G(a.params))throw new Error("Invalid params in state '"+a+"'");if(a.url)throw new Error("Both params and url specicified in state '"+a+"'");return a.params},views:function(a){var b={};return H(C(a.views)?a.views:{"":a},function(c,d){d.indexOf("@")<0&&(d+="@"+a.parent.name),b[d]=c}),b},ownParams:function(a){if(!a.parent)return a.params;var b={};H(a.params,function(a){b[a]=!0}),H(a.parent.params,function(c){if(!b[c])throw new Error("Missing required parameter '"+c+"' in state '"+a.name+"'");b[c]=!1});var c=[];return H(b,function(a,b){a&&c.push(b)}),c},path:function(a){return a.parent?a.parent.path.concat(a):[]},includes:function(a){var b=a.parent?I({},a.parent.includes):{};return b[a.name]=!0,b},$delegates:{}};u=n({name:"",url:"^",views:null,"abstract":!0}),u.navigable=null,this.decorator=q,this.state=r,this.$get=s,s.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$location","$urlRouter","$browser"]}function r(){function a(a,b){return{load:function(c,d){var e,f={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return d=I(f,d),d.view&&(e=b.fromConfig(d.view,d.params,d.locals)),e&&d.notify&&a.$broadcast("$viewContentLoading",d),e}}}this.$get=a,a.$inject=["$rootScope","$templateFactory"]}function s(){var a=!1;this.useAnchorScroll=function(){a=!0},this.$get=["$anchorScroll","$timeout",function(b,c){return a?b:function(a){c(function(){a[0].scrollIntoView()},0,!1)}}]}function t(a,c,d){function e(){return c.has?function(a){return c.has(a)?c.get(a):null}:function(a){try{return c.get(a)}catch(b){return null}}}function f(a,b){var c=function(){return{enter:function(a,b,c){b.after(a),c()},leave:function(a,b){a.remove(),b()}}};if(i)return{enter:function(a,b,c){i.enter(a,null,b,c)},leave:function(a,b){i.leave(a,b)}};if(h){var d=h&&h(b,a);return{enter:function(a,b,c){d.enter(a,null,b),c()},leave:function(a,b){d.leave(a),b()}}}return c()}var g=e(),h=g("$animator"),i=g("$animate"),j={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(c,e,g){return function(c,e,h){function i(){k&&(k.remove(),k=null),m&&(m.$destroy(),m=null),l&&(q.leave(l,function(){k=null}),k=l,l=null)}function j(f){var h=c.$new(),j=l&&l.data("$uiViewName"),k=j&&a.$current&&a.$current.locals[j];if(f||k!==n){var r=g(h,function(a){q.enter(a,e,function(){(b.isDefined(p)&&!p||c.$eval(p))&&d(a)}),i()});n=a.$current.locals[r.data("$uiViewName")],l=r,m=h,m.$emit("$viewContentLoaded"),m.$eval(o)}}var k,l,m,n,o=h.onload||"",p=h.autoscroll,q=f(h,c);c.$on("$stateChangeSuccess",function(){j(!1)}),c.$on("$viewContentLoading",function(){j(!1)}),j(!0)}}};return j}function u(a,b,c){return{restrict:"ECA",priority:-400,compile:function(d){var e=d.html();return function(d,f,g){var h=g.uiView||g.name||"",i=f.inheritedData("$uiView");h.indexOf("@")<0&&(h=h+"@"+(i?i.state.name:"")),f.data("$uiViewName",h);var j=c.$current,k=j&&j.locals[h];if(k){f.data("$uiView",{name:h,state:k.$$state}),f.html(k.$template?k.$template:e);var l=a(f.contents());if(k.$$controller){k.$scope=d;var m=b(k.$$controller,k);k.$$controllerAs&&(d[k.$$controllerAs]=m),f.data("$ngControllerController",m),f.children().data("$ngControllerController",m)}l(d)}}}}}function v(a){var b=a.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/);if(!b||4!==b.length)throw new Error("Invalid state ref '"+a+"'");return{state:b[1],paramExpr:b[3]||null}}function w(a){var b=a.parent().inheritedData("$uiView");return b&&b.state&&b.state.name?b.state:void 0}function x(a,c){var d=["location","inherit","reload"];return{restrict:"A",require:"?^uiSrefActive",link:function(e,f,g,h){var i=v(g.uiSref),j=null,k=w(f)||a.$current,l="FORM"===f[0].nodeName,m=l?"action":"href",n=!0,o={relative:k},p=e.$eval(g.uiSrefOpts)||{};b.forEach(d,function(a){a in p&&(o[a]=p[a])});var q=function(b){if(b&&(j=b),n){var c=a.href(i.state,j,o);return h&&h.$$setStateInfo(i.state,j),c?void(f[0][m]=c):(n=!1,!1)}};i.paramExpr&&(e.$watch(i.paramExpr,function(a){a!==j&&q(a)},!0),j=e.$eval(i.paramExpr)),q(),l||f.bind("click",function(b){var d=b.which||b.button;d>1||b.ctrlKey||b.metaKey||b.shiftKey||f.attr("target")||(c(function(){a.go(i.state,j,o)}),b.preventDefault())})}}}function y(a,b,c){return{restrict:"A",controller:["$scope","$element","$attrs",function(d,e,f){function g(){a.$current.self===i&&h()?e.addClass(l):e.removeClass(l)}function h(){return!k||j(k,b)}var i,k,l;l=c(f.uiSrefActive||"",!1)(d),this.$$setStateInfo=function(b,c){i=a.get(b,w(e)),k=c,g()},d.$on("$stateChangeSuccess",g)}]}}function z(a){return function(b){return a.is(b)}}function A(a){return function(b){return a.includes(b)}}function B(a,b){function e(a){this.locals=a.locals.globals,this.params=this.locals.$stateParams}function f(){this.locals=null,this.params=null}function g(c,g){if(null!=g.redirectTo){var h,j=g.redirectTo;if(E(j))h=j;else{if(!D(j))throw new Error("Invalid 'redirectTo' in when()");h=function(a,b){return j(a,b.path(),b.search())}}b.when(c,h)}else a.state(d(g,{parent:null,name:"route:"+encodeURIComponent(c),url:c,onEnter:e,onExit:f}));return i.push(g),this}function h(a,b,d){function e(a){return""!==a.name?a:c}var f={routes:i,params:d,current:c};return b.$on("$stateChangeStart",function(a,c,d,f){b.$broadcast("$routeChangeStart",e(c),e(f))}),b.$on("$stateChangeSuccess",function(a,c,d,g){f.current=e(c),b.$broadcast("$routeChangeSuccess",e(c),e(g)),J(d,f.params)}),b.$on("$stateChangeError",function(a,c,d,f,g,h){b.$broadcast("$routeChangeError",e(c),e(f),h)}),f}var i=[];e.$inject=["$$state"],this.when=g,this.$get=h,h.$inject=["$state","$rootScope","$routeParams"]}var C=b.isDefined,D=b.isFunction,E=b.isString,F=b.isObject,G=b.isArray,H=b.forEach,I=b.extend,J=b.copy;b.module("ui.router.util",["ng"]),b.module("ui.router.router",["ui.router.util"]),b.module("ui.router.state",["ui.router.router","ui.router.util"]),b.module("ui.router",["ui.router.state"]),b.module("ui.router.compat",["ui.router"]),l.$inject=["$q","$injector"],b.module("ui.router.util").service("$resolve",l),m.$inject=["$http","$templateCache","$injector"],b.module("ui.router.util").service("$templateFactory",m),n.prototype.concat=function(a){return new n(this.sourcePath+a+this.sourceSearch)},n.prototype.toString=function(){return this.source},n.prototype.exec=function(a,b){var c=this.regexp.exec(a);if(!c)return null;var d,e=this.params,f=e.length,g=this.segments.length-1,h={};if(g!==c.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(d=0;g>d;d++)h[e[d]]=c[d+1];for(;f>d;d++)h[e[d]]=b[e[d]];return h},n.prototype.parameters=function(){return this.params},n.prototype.format=function(a){var b=this.segments,c=this.params;if(!a)return b.join("");var d,e,f,g=b.length-1,h=c.length,i=b[0];for(d=0;g>d;d++)f=a[c[d]],null!=f&&(i+=encodeURIComponent(f)),i+=b[d+1];for(;h>d;d++)f=a[c[d]],null!=f&&(i+=(e?"&":"?")+c[d]+"="+encodeURIComponent(f),e=!0);return i},b.module("ui.router.util").provider("$urlMatcherFactory",o),p.$inject=["$urlMatcherFactoryProvider"],b.module("ui.router.router").provider("$urlRouter",p),q.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider","$locationProvider"],b.module("ui.router.state").value("$stateParams",{}).provider("$state",q),r.$inject=[],b.module("ui.router.state").provider("$view",r),b.module("ui.router.state").provider("$uiViewScroll",s),t.$inject=["$state","$injector","$uiViewScroll"],u.$inject=["$compile","$controller","$state"],b.module("ui.router.state").directive("uiView",t),b.module("ui.router.state").directive("uiView",u),x.$inject=["$state","$timeout"],y.$inject=["$state","$stateParams","$interpolate"],b.module("ui.router.state").directive("uiSref",x).directive("uiSrefActive",y),z.$inject=["$state"],A.$inject=["$state"],b.module("ui.router.state").filter("isState",z).filter("includedByState",A),B.$inject=["$stateProvider","$urlRouterProvider"],b.module("ui.router.compat").provider("$route",B).directive("ngView",t)}(window,window.angular);
}).call(global, module, undefined, undefined);

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"/home/codio/workspace/bower_components/angular/angular.min.js":"/home/codio/workspace/bower_components/angular/angular.min.js"}],"/home/codio/workspace/bower_components/angular/angular.min.js":[function(require,module,exports){
(function (global){
;__browserify_shim_require__=require;(function browserifyShim(module, exports, require, define, browserify_shim__define__module__export__) {
/*
 AngularJS v1.2.26
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(W,X,t){'use strict';function C(b){return function(){var a=arguments[0],c,a="["+(b?b+":":"")+a+"] http://errors.angularjs.org/1.2.26/"+(b?b+"/":"")+a;for(c=1;c<arguments.length;c++)a=a+(1==c?"?":"&")+"p"+(c-1)+"="+encodeURIComponent("function"==typeof arguments[c]?arguments[c].toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof arguments[c]?"undefined":"string"!=typeof arguments[c]?JSON.stringify(arguments[c]):arguments[c]);return Error(a)}}function Pa(b){if(null==b||Ga(b))return!1;
var a=b.length;return 1===b.nodeType&&a?!0:v(b)||J(b)||0===a||"number"===typeof a&&0<a&&a-1 in b}function r(b,a,c){var d;if(b)if(P(b))for(d in b)"prototype"==d||("length"==d||"name"==d||b.hasOwnProperty&&!b.hasOwnProperty(d))||a.call(c,b[d],d);else if(J(b)||Pa(b))for(d=0;d<b.length;d++)a.call(c,b[d],d);else if(b.forEach&&b.forEach!==r)b.forEach(a,c);else for(d in b)b.hasOwnProperty(d)&&a.call(c,b[d],d);return b}function Zb(b){var a=[],c;for(c in b)b.hasOwnProperty(c)&&a.push(c);return a.sort()}function Tc(b,
a,c){for(var d=Zb(b),e=0;e<d.length;e++)a.call(c,b[d[e]],d[e]);return d}function $b(b){return function(a,c){b(c,a)}}function hb(){for(var b=ma.length,a;b;){b--;a=ma[b].charCodeAt(0);if(57==a)return ma[b]="A",ma.join("");if(90==a)ma[b]="0";else return ma[b]=String.fromCharCode(a+1),ma.join("")}ma.unshift("0");return ma.join("")}function ac(b,a){a?b.$$hashKey=a:delete b.$$hashKey}function D(b){var a=b.$$hashKey;r(arguments,function(a){a!==b&&r(a,function(a,c){b[c]=a})});ac(b,a);return b}function U(b){return parseInt(b,
10)}function bc(b,a){return D(new (D(function(){},{prototype:b})),a)}function E(){}function Qa(b){return b}function ba(b){return function(){return b}}function x(b){return"undefined"===typeof b}function y(b){return"undefined"!==typeof b}function T(b){return null!=b&&"object"===typeof b}function v(b){return"string"===typeof b}function ib(b){return"number"===typeof b}function ta(b){return"[object Date]"===za.call(b)}function P(b){return"function"===typeof b}function jb(b){return"[object RegExp]"===za.call(b)}
function Ga(b){return b&&b.document&&b.location&&b.alert&&b.setInterval}function Uc(b){return!(!b||!(b.nodeName||b.prop&&b.attr&&b.find))}function Vc(b,a,c){var d=[];r(b,function(b,f,g){d.push(a.call(c,b,f,g))});return d}function Ra(b,a){if(b.indexOf)return b.indexOf(a);for(var c=0;c<b.length;c++)if(a===b[c])return c;return-1}function Sa(b,a){var c=Ra(b,a);0<=c&&b.splice(c,1);return a}function Ha(b,a,c,d){if(Ga(b)||b&&b.$evalAsync&&b.$watch)throw Ta("cpws");if(a){if(b===a)throw Ta("cpi");c=c||[];
d=d||[];if(T(b)){var e=Ra(c,b);if(-1!==e)return d[e];c.push(b);d.push(a)}if(J(b))for(var f=a.length=0;f<b.length;f++)e=Ha(b[f],null,c,d),T(b[f])&&(c.push(b[f]),d.push(e)),a.push(e);else{var g=a.$$hashKey;J(a)?a.length=0:r(a,function(b,c){delete a[c]});for(f in b)e=Ha(b[f],null,c,d),T(b[f])&&(c.push(b[f]),d.push(e)),a[f]=e;ac(a,g)}}else if(a=b)J(b)?a=Ha(b,[],c,d):ta(b)?a=new Date(b.getTime()):jb(b)?(a=RegExp(b.source,b.toString().match(/[^\/]*$/)[0]),a.lastIndex=b.lastIndex):T(b)&&(a=Ha(b,{},c,d));
return a}function ha(b,a){if(J(b)){a=a||[];for(var c=0;c<b.length;c++)a[c]=b[c]}else if(T(b))for(c in a=a||{},b)!kb.call(b,c)||"$"===c.charAt(0)&&"$"===c.charAt(1)||(a[c]=b[c]);return a||b}function Aa(b,a){if(b===a)return!0;if(null===b||null===a)return!1;if(b!==b&&a!==a)return!0;var c=typeof b,d;if(c==typeof a&&"object"==c)if(J(b)){if(!J(a))return!1;if((c=b.length)==a.length){for(d=0;d<c;d++)if(!Aa(b[d],a[d]))return!1;return!0}}else{if(ta(b))return ta(a)?isNaN(b.getTime())&&isNaN(a.getTime())||b.getTime()===
a.getTime():!1;if(jb(b)&&jb(a))return b.toString()==a.toString();if(b&&b.$evalAsync&&b.$watch||a&&a.$evalAsync&&a.$watch||Ga(b)||Ga(a)||J(a))return!1;c={};for(d in b)if("$"!==d.charAt(0)&&!P(b[d])){if(!Aa(b[d],a[d]))return!1;c[d]=!0}for(d in a)if(!c.hasOwnProperty(d)&&"$"!==d.charAt(0)&&a[d]!==t&&!P(a[d]))return!1;return!0}return!1}function Bb(b,a){var c=2<arguments.length?Ba.call(arguments,2):[];return!P(a)||a instanceof RegExp?a:c.length?function(){return arguments.length?a.apply(b,c.concat(Ba.call(arguments,
0))):a.apply(b,c)}:function(){return arguments.length?a.apply(b,arguments):a.call(b)}}function Wc(b,a){var c=a;"string"===typeof b&&"$"===b.charAt(0)?c=t:Ga(a)?c="$WINDOW":a&&X===a?c="$DOCUMENT":a&&(a.$evalAsync&&a.$watch)&&(c="$SCOPE");return c}function na(b,a){return"undefined"===typeof b?t:JSON.stringify(b,Wc,a?"  ":null)}function cc(b){return v(b)?JSON.parse(b):b}function Ua(b){"function"===typeof b?b=!0:b&&0!==b.length?(b=K(""+b),b=!("f"==b||"0"==b||"false"==b||"no"==b||"n"==b||"[]"==b)):b=!1;
return b}function ia(b){b=w(b).clone();try{b.empty()}catch(a){}var c=w("<div>").append(b).html();try{return 3===b[0].nodeType?K(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+K(b)})}catch(d){return K(c)}}function dc(b){try{return decodeURIComponent(b)}catch(a){}}function ec(b){var a={},c,d;r((b||"").split("&"),function(b){b&&(c=b.replace(/\+/g,"%20").split("="),d=dc(c[0]),y(d)&&(b=y(c[1])?dc(c[1]):!0,kb.call(a,d)?J(a[d])?a[d].push(b):a[d]=[a[d],b]:a[d]=b))});return a}function Cb(b){var a=
[];r(b,function(b,d){J(b)?r(b,function(b){a.push(Ca(d,!0)+(!0===b?"":"="+Ca(b,!0)))}):a.push(Ca(d,!0)+(!0===b?"":"="+Ca(b,!0)))});return a.length?a.join("&"):""}function lb(b){return Ca(b,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Ca(b,a){return encodeURIComponent(b).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,a?"%20":"+")}function Xc(b,a){function c(a){a&&d.push(a)}var d=[b],e,f,g=["ng:app","ng-app","x-ng-app",
"data-ng-app"],k=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;r(g,function(a){g[a]=!0;c(X.getElementById(a));a=a.replace(":","\\:");b.querySelectorAll&&(r(b.querySelectorAll("."+a),c),r(b.querySelectorAll("."+a+"\\:"),c),r(b.querySelectorAll("["+a+"]"),c))});r(d,function(a){if(!e){var b=k.exec(" "+a.className+" ");b?(e=a,f=(b[2]||"").replace(/\s+/g,",")):r(a.attributes,function(b){!e&&g[b.name]&&(e=a,f=b.value)})}});e&&a(e,f?[f]:[])}function fc(b,a){var c=function(){b=w(b);if(b.injector()){var c=b[0]===X?
"document":ia(b);throw Ta("btstrpd",c.replace(/</,"&lt;").replace(/>/,"&gt;"));}a=a||[];a.unshift(["$provide",function(a){a.value("$rootElement",b)}]);a.unshift("ng");c=gc(a);c.invoke(["$rootScope","$rootElement","$compile","$injector","$animate",function(a,b,c,d,e){a.$apply(function(){b.data("$injector",d);c(b)(a)})}]);return c},d=/^NG_DEFER_BOOTSTRAP!/;if(W&&!d.test(W.name))return c();W.name=W.name.replace(d,"");Va.resumeBootstrap=function(b){r(b,function(b){a.push(b)});c()}}function mb(b,a){a=
a||"_";return b.replace(Yc,function(b,d){return(d?a:"")+b.toLowerCase()})}function Db(b,a,c){if(!b)throw Ta("areq",a||"?",c||"required");return b}function Wa(b,a,c){c&&J(b)&&(b=b[b.length-1]);Db(P(b),a,"not a function, got "+(b&&"object"===typeof b?b.constructor.name||"Object":typeof b));return b}function Da(b,a){if("hasOwnProperty"===b)throw Ta("badname",a);}function hc(b,a,c){if(!a)return b;a=a.split(".");for(var d,e=b,f=a.length,g=0;g<f;g++)d=a[g],b&&(b=(e=b)[d]);return!c&&P(b)?Bb(e,b):b}function Eb(b){var a=
b[0];b=b[b.length-1];if(a===b)return w(a);var c=[a];do{a=a.nextSibling;if(!a)break;c.push(a)}while(a!==b);return w(c)}function Zc(b){var a=C("$injector"),c=C("ng");b=b.angular||(b.angular={});b.$$minErr=b.$$minErr||C;return b.module||(b.module=function(){var b={};return function(e,f,g){if("hasOwnProperty"===e)throw c("badname","module");f&&b.hasOwnProperty(e)&&(b[e]=null);return b[e]||(b[e]=function(){function b(a,d,e){return function(){c[e||"push"]([a,d,arguments]);return n}}if(!f)throw a("nomod",
e);var c=[],d=[],l=b("$injector","invoke"),n={_invokeQueue:c,_runBlocks:d,requires:f,name:e,provider:b("$provide","provider"),factory:b("$provide","factory"),service:b("$provide","service"),value:b("$provide","value"),constant:b("$provide","constant","unshift"),animation:b("$animateProvider","register"),filter:b("$filterProvider","register"),controller:b("$controllerProvider","register"),directive:b("$compileProvider","directive"),config:l,run:function(a){d.push(a);return this}};g&&l(g);return n}())}}())}
function $c(b){D(b,{bootstrap:fc,copy:Ha,extend:D,equals:Aa,element:w,forEach:r,injector:gc,noop:E,bind:Bb,toJson:na,fromJson:cc,identity:Qa,isUndefined:x,isDefined:y,isString:v,isFunction:P,isObject:T,isNumber:ib,isElement:Uc,isArray:J,version:ad,isDate:ta,lowercase:K,uppercase:Ia,callbacks:{counter:0},$$minErr:C,$$csp:Xa});Ya=Zc(W);try{Ya("ngLocale")}catch(a){Ya("ngLocale",[]).provider("$locale",bd)}Ya("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:cd});a.provider("$compile",
ic).directive({a:dd,input:jc,textarea:jc,form:ed,script:fd,select:gd,style:hd,option:id,ngBind:jd,ngBindHtml:kd,ngBindTemplate:ld,ngClass:md,ngClassEven:nd,ngClassOdd:od,ngCloak:pd,ngController:qd,ngForm:rd,ngHide:sd,ngIf:td,ngInclude:ud,ngInit:vd,ngNonBindable:wd,ngPluralize:xd,ngRepeat:yd,ngShow:zd,ngStyle:Ad,ngSwitch:Bd,ngSwitchWhen:Cd,ngSwitchDefault:Dd,ngOptions:Ed,ngTransclude:Fd,ngModel:Gd,ngList:Hd,ngChange:Id,required:kc,ngRequired:kc,ngValue:Jd}).directive({ngInclude:Kd}).directive(Fb).directive(lc);
a.provider({$anchorScroll:Ld,$animate:Md,$browser:Nd,$cacheFactory:Od,$controller:Pd,$document:Qd,$exceptionHandler:Rd,$filter:mc,$interpolate:Sd,$interval:Td,$http:Ud,$httpBackend:Vd,$location:Wd,$log:Xd,$parse:Yd,$rootScope:Zd,$q:$d,$sce:ae,$sceDelegate:be,$sniffer:ce,$templateCache:de,$timeout:ee,$window:fe,$$rAF:ge,$$asyncCallback:he})}])}function Za(b){return b.replace(ie,function(a,b,d,e){return e?d.toUpperCase():d}).replace(je,"Moz$1")}function Gb(b,a,c,d){function e(b){var e=c&&b?[this.filter(b)]:
[this],m=a,h,l,n,p,q,s;if(!d||null!=b)for(;e.length;)for(h=e.shift(),l=0,n=h.length;l<n;l++)for(p=w(h[l]),m?p.triggerHandler("$destroy"):m=!m,q=0,p=(s=p.children()).length;q<p;q++)e.push(Ea(s[q]));return f.apply(this,arguments)}var f=Ea.fn[b],f=f.$original||f;e.$original=f;Ea.fn[b]=e}function S(b){if(b instanceof S)return b;v(b)&&(b=aa(b));if(!(this instanceof S)){if(v(b)&&"<"!=b.charAt(0))throw Hb("nosel");return new S(b)}if(v(b)){var a=b;b=X;var c;if(c=ke.exec(a))b=[b.createElement(c[1])];else{var d=
b,e;b=d.createDocumentFragment();c=[];if(Ib.test(a)){d=b.appendChild(d.createElement("div"));e=(le.exec(a)||["",""])[1].toLowerCase();e=ea[e]||ea._default;d.innerHTML="<div>&#160;</div>"+e[1]+a.replace(me,"<$1></$2>")+e[2];d.removeChild(d.firstChild);for(a=e[0];a--;)d=d.lastChild;a=0;for(e=d.childNodes.length;a<e;++a)c.push(d.childNodes[a]);d=b.firstChild;d.textContent=""}else c.push(d.createTextNode(a));b.textContent="";b.innerHTML="";b=c}Jb(this,b);w(X.createDocumentFragment()).append(this)}else Jb(this,
b)}function Kb(b){return b.cloneNode(!0)}function Ja(b){Lb(b);var a=0;for(b=b.childNodes||[];a<b.length;a++)Ja(b[a])}function nc(b,a,c,d){if(y(d))throw Hb("offargs");var e=oa(b,"events");oa(b,"handle")&&(x(a)?r(e,function(a,c){$a(b,c,a);delete e[c]}):r(a.split(" "),function(a){x(c)?($a(b,a,e[a]),delete e[a]):Sa(e[a]||[],c)}))}function Lb(b,a){var c=b.ng339,d=ab[c];d&&(a?delete ab[c].data[a]:(d.handle&&(d.events.$destroy&&d.handle({},"$destroy"),nc(b)),delete ab[c],b.ng339=t))}function oa(b,a,c){var d=
b.ng339,d=ab[d||-1];if(y(c))d||(b.ng339=d=++ne,d=ab[d]={}),d[a]=c;else return d&&d[a]}function Mb(b,a,c){var d=oa(b,"data"),e=y(c),f=!e&&y(a),g=f&&!T(a);d||g||oa(b,"data",d={});if(e)d[a]=c;else if(f){if(g)return d&&d[a];D(d,a)}else return d}function Nb(b,a){return b.getAttribute?-1<(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+a+" "):!1}function nb(b,a){a&&b.setAttribute&&r(a.split(" "),function(a){b.setAttribute("class",aa((" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g,
" ").replace(" "+aa(a)+" "," ")))})}function ob(b,a){if(a&&b.setAttribute){var c=(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");r(a.split(" "),function(a){a=aa(a);-1===c.indexOf(" "+a+" ")&&(c+=a+" ")});b.setAttribute("class",aa(c))}}function Jb(b,a){if(a){a=a.nodeName||!y(a.length)||Ga(a)?[a]:a;for(var c=0;c<a.length;c++)b.push(a[c])}}function oc(b,a){return pb(b,"$"+(a||"ngController")+"Controller")}function pb(b,a,c){9==b.nodeType&&(b=b.documentElement);for(a=J(a)?a:[a];b;){for(var d=
0,e=a.length;d<e;d++)if((c=w.data(b,a[d]))!==t)return c;b=b.parentNode||11===b.nodeType&&b.host}}function pc(b){for(var a=0,c=b.childNodes;a<c.length;a++)Ja(c[a]);for(;b.firstChild;)b.removeChild(b.firstChild)}function qc(b,a){var c=qb[a.toLowerCase()];return c&&rc[b.nodeName]&&c}function oe(b,a){var c=function(c,e){c.preventDefault||(c.preventDefault=function(){c.returnValue=!1});c.stopPropagation||(c.stopPropagation=function(){c.cancelBubble=!0});c.target||(c.target=c.srcElement||X);if(x(c.defaultPrevented)){var f=
c.preventDefault;c.preventDefault=function(){c.defaultPrevented=!0;f.call(c)};c.defaultPrevented=!1}c.isDefaultPrevented=function(){return c.defaultPrevented||!1===c.returnValue};var g=ha(a[e||c.type]||[]);r(g,function(a){a.call(b,c)});8>=Q?(c.preventDefault=null,c.stopPropagation=null,c.isDefaultPrevented=null):(delete c.preventDefault,delete c.stopPropagation,delete c.isDefaultPrevented)};c.elem=b;return c}function Ka(b,a){var c=typeof b,d;"function"==c||"object"==c&&null!==b?"function"==typeof(d=
b.$$hashKey)?d=b.$$hashKey():d===t&&(d=b.$$hashKey=(a||hb)()):d=b;return c+":"+d}function bb(b,a){if(a){var c=0;this.nextUid=function(){return++c}}r(b,this.put,this)}function sc(b){var a,c;"function"===typeof b?(a=b.$inject)||(a=[],b.length&&(c=b.toString().replace(pe,""),c=c.match(qe),r(c[1].split(re),function(b){b.replace(se,function(b,c,d){a.push(d)})})),b.$inject=a):J(b)?(c=b.length-1,Wa(b[c],"fn"),a=b.slice(0,c)):Wa(b,"fn",!0);return a}function gc(b){function a(a){return function(b,c){if(T(b))r(b,
$b(a));else return a(b,c)}}function c(a,b){Da(a,"service");if(P(b)||J(b))b=n.instantiate(b);if(!b.$get)throw cb("pget",a);return l[a+k]=b}function d(a,b){return c(a,{$get:b})}function e(a){var b=[],c,d,f,k;r(a,function(a){if(!h.get(a)){h.put(a,!0);try{if(v(a))for(c=Ya(a),b=b.concat(e(c.requires)).concat(c._runBlocks),d=c._invokeQueue,f=0,k=d.length;f<k;f++){var g=d[f],m=n.get(g[0]);m[g[1]].apply(m,g[2])}else P(a)?b.push(n.invoke(a)):J(a)?b.push(n.invoke(a)):Wa(a,"module")}catch(l){throw J(a)&&(a=
a[a.length-1]),l.message&&(l.stack&&-1==l.stack.indexOf(l.message))&&(l=l.message+"\n"+l.stack),cb("modulerr",a,l.stack||l.message||l);}}});return b}function f(a,b){function c(d){if(a.hasOwnProperty(d)){if(a[d]===g)throw cb("cdep",d+" <- "+m.join(" <- "));return a[d]}try{return m.unshift(d),a[d]=g,a[d]=b(d)}catch(e){throw a[d]===g&&delete a[d],e;}finally{m.shift()}}function d(a,b,e){var f=[],k=sc(a),g,m,h;m=0;for(g=k.length;m<g;m++){h=k[m];if("string"!==typeof h)throw cb("itkn",h);f.push(e&&e.hasOwnProperty(h)?
e[h]:c(h))}J(a)&&(a=a[g]);return a.apply(b,f)}return{invoke:d,instantiate:function(a,b){var c=function(){},e;c.prototype=(J(a)?a[a.length-1]:a).prototype;c=new c;e=d(a,c,b);return T(e)||P(e)?e:c},get:c,annotate:sc,has:function(b){return l.hasOwnProperty(b+k)||a.hasOwnProperty(b)}}}var g={},k="Provider",m=[],h=new bb([],!0),l={$provide:{provider:a(c),factory:a(d),service:a(function(a,b){return d(a,["$injector",function(a){return a.instantiate(b)}])}),value:a(function(a,b){return d(a,ba(b))}),constant:a(function(a,
b){Da(a,"constant");l[a]=b;p[a]=b}),decorator:function(a,b){var c=n.get(a+k),d=c.$get;c.$get=function(){var a=q.invoke(d,c);return q.invoke(b,null,{$delegate:a})}}}},n=l.$injector=f(l,function(){throw cb("unpr",m.join(" <- "));}),p={},q=p.$injector=f(p,function(a){a=n.get(a+k);return q.invoke(a.$get,a)});r(e(b),function(a){q.invoke(a||E)});return q}function Ld(){var b=!0;this.disableAutoScrolling=function(){b=!1};this.$get=["$window","$location","$rootScope",function(a,c,d){function e(a){var b=null;
r(a,function(a){b||"a"!==K(a.nodeName)||(b=a)});return b}function f(){var b=c.hash(),d;b?(d=g.getElementById(b))?d.scrollIntoView():(d=e(g.getElementsByName(b)))?d.scrollIntoView():"top"===b&&a.scrollTo(0,0):a.scrollTo(0,0)}var g=a.document;b&&d.$watch(function(){return c.hash()},function(){d.$evalAsync(f)});return f}]}function he(){this.$get=["$$rAF","$timeout",function(b,a){return b.supported?function(a){return b(a)}:function(b){return a(b,0,!1)}}]}function te(b,a,c,d){function e(a){try{a.apply(null,
Ba.call(arguments,1))}finally{if(s--,0===s)for(;F.length;)try{F.pop()()}catch(b){c.error(b)}}}function f(a,b){(function fa(){r(u,function(a){a()});A=b(fa,a)})()}function g(){z=null;N!=k.url()&&(N=k.url(),r(ca,function(a){a(k.url())}))}var k=this,m=a[0],h=b.location,l=b.history,n=b.setTimeout,p=b.clearTimeout,q={};k.isMock=!1;var s=0,F=[];k.$$completeOutstandingRequest=e;k.$$incOutstandingRequestCount=function(){s++};k.notifyWhenNoOutstandingRequests=function(a){r(u,function(a){a()});0===s?a():F.push(a)};
var u=[],A;k.addPollFn=function(a){x(A)&&f(100,n);u.push(a);return a};var N=h.href,R=a.find("base"),z=null;k.url=function(a,c){h!==b.location&&(h=b.location);l!==b.history&&(l=b.history);if(a){if(N!=a)return N=a,d.history?c?l.replaceState(null,"",a):(l.pushState(null,"",a),R.attr("href",R.attr("href"))):(z=a,c?h.replace(a):h.href=a),k}else return z||h.href.replace(/%27/g,"'")};var ca=[],L=!1;k.onUrlChange=function(a){if(!L){if(d.history)w(b).on("popstate",g);if(d.hashchange)w(b).on("hashchange",g);
else k.addPollFn(g);L=!0}ca.push(a);return a};k.$$checkUrlChange=g;k.baseHref=function(){var a=R.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var O={},da="",B=k.baseHref();k.cookies=function(a,b){var d,e,f,k;if(a)b===t?m.cookie=escape(a)+"=;path="+B+";expires=Thu, 01 Jan 1970 00:00:00 GMT":v(b)&&(d=(m.cookie=escape(a)+"="+escape(b)+";path="+B).length+1,4096<d&&c.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+d+" > 4096 bytes)!"));else{if(m.cookie!==
da)for(da=m.cookie,d=da.split("; "),O={},f=0;f<d.length;f++)e=d[f],k=e.indexOf("="),0<k&&(a=unescape(e.substring(0,k)),O[a]===t&&(O[a]=unescape(e.substring(k+1))));return O}};k.defer=function(a,b){var c;s++;c=n(function(){delete q[c];e(a)},b||0);q[c]=!0;return c};k.defer.cancel=function(a){return q[a]?(delete q[a],p(a),e(E),!0):!1}}function Nd(){this.$get=["$window","$log","$sniffer","$document",function(b,a,c,d){return new te(b,d,a,c)}]}function Od(){this.$get=function(){function b(b,d){function e(a){a!=
n&&(p?p==a&&(p=a.n):p=a,f(a.n,a.p),f(a,n),n=a,n.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(b in a)throw C("$cacheFactory")("iid",b);var g=0,k=D({},d,{id:b}),m={},h=d&&d.capacity||Number.MAX_VALUE,l={},n=null,p=null;return a[b]={put:function(a,b){if(h<Number.MAX_VALUE){var c=l[a]||(l[a]={key:a});e(c)}if(!x(b))return a in m||g++,m[a]=b,g>h&&this.remove(p.key),b},get:function(a){if(h<Number.MAX_VALUE){var b=l[a];if(!b)return;e(b)}return m[a]},remove:function(a){if(h<Number.MAX_VALUE){var b=
l[a];if(!b)return;b==n&&(n=b.p);b==p&&(p=b.n);f(b.n,b.p);delete l[a]}delete m[a];g--},removeAll:function(){m={};g=0;l={};n=p=null},destroy:function(){l=k=m=null;delete a[b]},info:function(){return D({},k,{size:g})}}}var a={};b.info=function(){var b={};r(a,function(a,e){b[e]=a.info()});return b};b.get=function(b){return a[b]};return b}}function de(){this.$get=["$cacheFactory",function(b){return b("templates")}]}function ic(b,a){var c={},d="Directive",e=/^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,f=/(([\d\w_\-]+)(?:\:([^;]+))?;?)/,
g=/^(on[a-z]+|formaction)$/;this.directive=function m(a,e){Da(a,"directive");v(a)?(Db(e,"directiveFactory"),c.hasOwnProperty(a)||(c[a]=[],b.factory(a+d,["$injector","$exceptionHandler",function(b,d){var e=[];r(c[a],function(c,f){try{var g=b.invoke(c);P(g)?g={compile:ba(g)}:!g.compile&&g.link&&(g.compile=ba(g.link));g.priority=g.priority||0;g.index=f;g.name=g.name||a;g.require=g.require||g.controller&&g.name;g.restrict=g.restrict||"A";e.push(g)}catch(m){d(m)}});return e}])),c[a].push(e)):r(a,$b(m));
return this};this.aHrefSanitizationWhitelist=function(b){return y(b)?(a.aHrefSanitizationWhitelist(b),this):a.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(b){return y(b)?(a.imgSrcSanitizationWhitelist(b),this):a.imgSrcSanitizationWhitelist()};this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,b,l,n,p,q,s,F,u,A,N,R){function z(a,b,c,d,e){a instanceof
w||(a=w(a));r(a,function(b,c){3==b.nodeType&&b.nodeValue.match(/\S+/)&&(a[c]=w(b).wrap("<span></span>").parent()[0])});var f=L(a,b,a,c,d,e);ca(a,"ng-scope");return function(b,c,d,e){Db(b,"scope");var g=c?La.clone.call(a):a;r(d,function(a,b){g.data("$"+b+"Controller",a)});d=0;for(var m=g.length;d<m;d++){var h=g[d].nodeType;1!==h&&9!==h||g.eq(d).data("$scope",b)}c&&c(g,b);f&&f(b,g,g,e);return g}}function ca(a,b){try{a.addClass(b)}catch(c){}}function L(a,b,c,d,e,f){function g(a,c,d,e){var f,h,l,q,n,
p,s;f=c.length;var M=Array(f);for(q=0;q<f;q++)M[q]=c[q];p=q=0;for(n=m.length;q<n;p++)h=M[p],c=m[q++],f=m[q++],c?(c.scope?(l=a.$new(),w.data(h,"$scope",l)):l=a,s=c.transcludeOnThisElement?O(a,c.transclude,e):!c.templateOnThisElement&&e?e:!e&&b?O(a,b):null,c(f,l,h,d,s)):f&&f(a,h.childNodes,t,e)}for(var m=[],h,l,q,n,p=0;p<a.length;p++)h=new Ob,l=da(a[p],[],h,0===p?d:t,e),(f=l.length?H(l,a[p],h,b,c,null,[],[],f):null)&&f.scope&&ca(h.$$element,"ng-scope"),h=f&&f.terminal||!(q=a[p].childNodes)||!q.length?
null:L(q,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b),m.push(f,h),n=n||f||h,f=null;return n?g:null}function O(a,b,c){return function(d,e,f){var g=!1;d||(d=a.$new(),g=d.$$transcluded=!0);e=b(d,e,f,c);if(g)e.on("$destroy",function(){d.$destroy()});return e}}function da(a,b,c,d,g){var m=c.$attr,h;switch(a.nodeType){case 1:fa(b,pa(Ma(a).toLowerCase()),"E",d,g);for(var l,q,n,p=a.attributes,s=0,F=p&&p.length;s<F;s++){var A=!1,N=!1;l=p[s];if(!Q||8<=Q||l.specified){h=l.name;q=
aa(l.value);l=pa(h);if(n=U.test(l))h=mb(l.substr(6),"-");var u=l.replace(/(Start|End)$/,"");l===u+"Start"&&(A=h,N=h.substr(0,h.length-5)+"end",h=h.substr(0,h.length-6));l=pa(h.toLowerCase());m[l]=h;if(n||!c.hasOwnProperty(l))c[l]=q,qc(a,l)&&(c[l]=!0);S(a,b,q,l);fa(b,l,"A",d,g,A,N)}}a=a.className;if(v(a)&&""!==a)for(;h=f.exec(a);)l=pa(h[2]),fa(b,l,"C",d,g)&&(c[l]=aa(h[3])),a=a.substr(h.index+h[0].length);break;case 3:K(b,a.nodeValue);break;case 8:try{if(h=e.exec(a.nodeValue))l=pa(h[1]),fa(b,l,"M",
d,g)&&(c[l]=aa(h[2]))}catch(z){}}b.sort(x);return b}function B(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw ja("uterdir",b,c);1==a.nodeType&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--);d.push(a);a=a.nextSibling}while(0<e)}else d.push(a);return w(d)}function I(a,b,c){return function(d,e,f,g,h){e=B(e[0],b,c);return a(d,e,f,g,h)}}function H(a,c,d,e,f,g,m,n,p){function F(a,b,c,d){if(a){c&&(a=I(a,c,d));a.require=G.require;a.directiveName=C;if(L===G||G.$$isolateScope)a=
tc(a,{isolateScope:!0});m.push(a)}if(b){c&&(b=I(b,c,d));b.require=G.require;b.directiveName=C;if(L===G||G.$$isolateScope)b=tc(b,{isolateScope:!0});n.push(b)}}function A(a,b,c,d){var e,f="data",g=!1;if(v(b)){for(;"^"==(e=b.charAt(0))||"?"==e;)b=b.substr(1),"^"==e&&(f="inheritedData"),g=g||"?"==e;e=null;d&&"data"===f&&(e=d[b]);e=e||c[f]("$"+b+"Controller");if(!e&&!g)throw ja("ctreq",b,a);}else J(b)&&(e=[],r(b,function(b){e.push(A(a,b,c,d))}));return e}function N(a,e,f,g,p){function F(a,b){var c;2>arguments.length&&
(b=a,a=t);K&&(c=da);return p(a,b,c)}var u,M,z,O,I,B,da={},rb;u=c===f?d:ha(d,new Ob(w(f),d.$attr));M=u.$$element;if(L){var Na=/^\s*([@=&])(\??)\s*(\w*)\s*$/;B=e.$new(!0);!H||H!==L&&H!==L.$$originalDirective?M.data("$isolateScopeNoTemplate",B):M.data("$isolateScope",B);ca(M,"ng-isolate-scope");r(L.scope,function(a,c){var d=a.match(Na)||[],f=d[3]||c,g="?"==d[2],d=d[1],m,l,n,p;B.$$isolateBindings[c]=d+f;switch(d){case "@":u.$observe(f,function(a){B[c]=a});u.$$observers[f].$$scope=e;u[f]&&(B[c]=b(u[f])(e));
break;case "=":if(g&&!u[f])break;l=q(u[f]);p=l.literal?Aa:function(a,b){return a===b||a!==a&&b!==b};n=l.assign||function(){m=B[c]=l(e);throw ja("nonassign",u[f],L.name);};m=B[c]=l(e);B.$watch(function(){var a=l(e);p(a,B[c])||(p(a,m)?n(e,a=B[c]):B[c]=a);return m=a},null,l.literal);break;case "&":l=q(u[f]);B[c]=function(a){return l(e,a)};break;default:throw ja("iscp",L.name,c,a);}})}rb=p&&F;R&&r(R,function(a){var b={$scope:a===L||a.$$isolateScope?B:e,$element:M,$attrs:u,$transclude:rb},c;I=a.controller;
"@"==I&&(I=u[a.name]);c=s(I,b);da[a.name]=c;K||M.data("$"+a.name+"Controller",c);a.controllerAs&&(b.$scope[a.controllerAs]=c)});g=0;for(z=m.length;g<z;g++)try{O=m[g],O(O.isolateScope?B:e,M,u,O.require&&A(O.directiveName,O.require,M,da),rb)}catch(G){l(G,ia(M))}g=e;L&&(L.template||null===L.templateUrl)&&(g=B);a&&a(g,f.childNodes,t,p);for(g=n.length-1;0<=g;g--)try{O=n[g],O(O.isolateScope?B:e,M,u,O.require&&A(O.directiveName,O.require,M,da),rb)}catch(y){l(y,ia(M))}}p=p||{};for(var u=-Number.MAX_VALUE,
O,R=p.controllerDirectives,L=p.newIsolateScopeDirective,H=p.templateDirective,fa=p.nonTlbTranscludeDirective,x=!1,D=!1,K=p.hasElementTranscludeDirective,Z=d.$$element=w(c),G,C,V,S=e,Q,Fa=0,qa=a.length;Fa<qa;Fa++){G=a[Fa];var U=G.$$start,Y=G.$$end;U&&(Z=B(c,U,Y));V=t;if(u>G.priority)break;if(V=G.scope)O=O||G,G.templateUrl||(db("new/isolated scope",L,G,Z),T(V)&&(L=G));C=G.name;!G.templateUrl&&G.controller&&(V=G.controller,R=R||{},db("'"+C+"' controller",R[C],G,Z),R[C]=G);if(V=G.transclude)x=!0,G.$$tlb||
(db("transclusion",fa,G,Z),fa=G),"element"==V?(K=!0,u=G.priority,V=Z,Z=d.$$element=w(X.createComment(" "+C+": "+d[C]+" ")),c=Z[0],Na(f,Ba.call(V,0),c),S=z(V,e,u,g&&g.name,{nonTlbTranscludeDirective:fa})):(V=w(Kb(c)).contents(),Z.empty(),S=z(V,e));if(G.template)if(D=!0,db("template",H,G,Z),H=G,V=P(G.template)?G.template(Z,d):G.template,V=W(V),G.replace){g=G;V=Ib.test(V)?w(aa(V)):[];c=V[0];if(1!=V.length||1!==c.nodeType)throw ja("tplrt",C,"");Na(f,Z,c);qa={$attr:{}};V=da(c,[],qa);var $=a.splice(Fa+
1,a.length-(Fa+1));L&&y(V);a=a.concat(V).concat($);E(d,qa);qa=a.length}else Z.html(V);if(G.templateUrl)D=!0,db("template",H,G,Z),H=G,G.replace&&(g=G),N=ue(a.splice(Fa,a.length-Fa),Z,d,f,x&&S,m,n,{controllerDirectives:R,newIsolateScopeDirective:L,templateDirective:H,nonTlbTranscludeDirective:fa}),qa=a.length;else if(G.compile)try{Q=G.compile(Z,d,S),P(Q)?F(null,Q,U,Y):Q&&F(Q.pre,Q.post,U,Y)}catch(ve){l(ve,ia(Z))}G.terminal&&(N.terminal=!0,u=Math.max(u,G.priority))}N.scope=O&&!0===O.scope;N.transcludeOnThisElement=
x;N.templateOnThisElement=D;N.transclude=S;p.hasElementTranscludeDirective=K;return N}function y(a){for(var b=0,c=a.length;b<c;b++)a[b]=bc(a[b],{$$isolateScope:!0})}function fa(b,e,f,g,h,q,n){if(e===h)return null;h=null;if(c.hasOwnProperty(e)){var p;e=a.get(e+d);for(var s=0,u=e.length;s<u;s++)try{p=e[s],(g===t||g>p.priority)&&-1!=p.restrict.indexOf(f)&&(q&&(p=bc(p,{$$start:q,$$end:n})),b.push(p),h=p)}catch(F){l(F)}}return h}function E(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;r(a,function(d,e){"$"!=
e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))});r(b,function(b,f){"class"==f?(ca(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function ue(a,b,c,d,e,f,g,h){var m=[],l,q,s=b[0],u=a.shift(),F=D({},u,{templateUrl:null,transclude:null,replace:null,$$originalDirective:u}),N=P(u.templateUrl)?u.templateUrl(b,c):u.templateUrl;
b.empty();n.get(A.getTrustedResourceUrl(N),{cache:p}).success(function(n){var p,A;n=W(n);if(u.replace){n=Ib.test(n)?w(aa(n)):[];p=n[0];if(1!=n.length||1!==p.nodeType)throw ja("tplrt",u.name,N);n={$attr:{}};Na(d,b,p);var z=da(p,[],n);T(u.scope)&&y(z);a=z.concat(a);E(c,n)}else p=s,b.html(n);a.unshift(F);l=H(a,p,c,e,b,u,f,g,h);r(d,function(a,c){a==p&&(d[c]=b[0])});for(q=L(b[0].childNodes,e);m.length;){n=m.shift();A=m.shift();var R=m.shift(),I=m.shift(),z=b[0];if(A!==s){var B=A.className;h.hasElementTranscludeDirective&&
u.replace||(z=Kb(p));Na(R,w(A),z);ca(w(z),B)}A=l.transcludeOnThisElement?O(n,l.transclude,I):I;l(q,n,z,d,A)}m=null}).error(function(a,b,c,d){throw ja("tpload",d.url);});return function(a,b,c,d,e){a=e;m?(m.push(b),m.push(c),m.push(d),m.push(a)):(l.transcludeOnThisElement&&(a=O(b,l.transclude,e)),l(q,b,c,d,a))}}function x(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function db(a,b,c,d){if(b)throw ja("multidir",b.name,c.name,a,ia(d));}function K(a,
c){var d=b(c,!0);d&&a.push({priority:0,compile:function(a){var b=a.parent().length;b&&ca(a.parent(),"ng-binding");return function(a,c){var e=c.parent(),f=e.data("$binding")||[];f.push(d);e.data("$binding",f);b||ca(e,"ng-binding");a.$watch(d,function(a){c[0].nodeValue=a})}}})}function C(a,b){if("srcdoc"==b)return A.HTML;var c=Ma(a);if("xlinkHref"==b||"FORM"==c&&"action"==b||"IMG"!=c&&("src"==b||"ngSrc"==b))return A.RESOURCE_URL}function S(a,c,d,e){var f=b(d,!0);if(f){if("multiple"===e&&"SELECT"===
Ma(a))throw ja("selmulti",ia(a));c.push({priority:100,compile:function(){return{pre:function(c,d,m){d=m.$$observers||(m.$$observers={});if(g.test(e))throw ja("nodomevents");if(f=b(m[e],!0,C(a,e)))m[e]=f(c),(d[e]||(d[e]=[])).$$inter=!0,(m.$$observers&&m.$$observers[e].$$scope||c).$watch(f,function(a,b){"class"===e&&a!=b?m.$updateClass(a,b):m.$set(e,a)})}}}})}}function Na(a,b,c){var d=b[0],e=b.length,f=d.parentNode,g,m;if(a)for(g=0,m=a.length;g<m;g++)if(a[g]==d){a[g++]=c;m=g+e-1;for(var h=a.length;g<
h;g++,m++)m<h?a[g]=a[m]:delete a[g];a.length-=e-1;break}f&&f.replaceChild(c,d);a=X.createDocumentFragment();a.appendChild(d);c[w.expando]=d[w.expando];d=1;for(e=b.length;d<e;d++)f=b[d],w(f).remove(),a.appendChild(f),delete b[d];b[0]=c;b.length=1}function tc(a,b){return D(function(){return a.apply(null,arguments)},a,b)}var Ob=function(a,b){this.$$element=a;this.$attr=b||{}};Ob.prototype={$normalize:pa,$addClass:function(a){a&&0<a.length&&N.addClass(this.$$element,a)},$removeClass:function(a){a&&0<
a.length&&N.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=uc(a,b),d=uc(b,a);0===c.length?N.removeClass(this.$$element,d):0===d.length?N.addClass(this.$$element,c):N.setClass(this.$$element,c,d)},$set:function(a,b,c,d){var e=qc(this.$$element[0],a);e&&(this.$$element.prop(a,b),d=e);this[a]=b;d?this.$attr[a]=d:(d=this.$attr[a])||(this.$attr[a]=d=mb(a,"-"));e=Ma(this.$$element);if("A"===e&&"href"===a||"IMG"===e&&"src"===a)this[a]=b=R(b,"src"===a);!1!==c&&(null===b||b===t?this.$$element.removeAttr(d):
this.$$element.attr(d,b));(c=this.$$observers)&&r(c[a],function(a){try{a(b)}catch(c){l(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers={}),e=d[a]||(d[a]=[]);e.push(b);F.$evalAsync(function(){e.$$inter||b(c[a])});return b}};var qa=b.startSymbol(),Z=b.endSymbol(),W="{{"==qa||"}}"==Z?Qa:function(a){return a.replace(/\{\{/g,qa).replace(/}}/g,Z)},U=/^ngAttr[A-Z]/;return z}]}function pa(b){return Za(b.replace(we,""))}function uc(b,a){var c="",d=b.split(/\s+/),e=a.split(/\s+/),f=
0;a:for(;f<d.length;f++){for(var g=d[f],k=0;k<e.length;k++)if(g==e[k])continue a;c+=(0<c.length?" ":"")+g}return c}function Pd(){var b={},a=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(a,d){Da(a,"controller");T(a)?D(b,a):b[a]=d};this.$get=["$injector","$window",function(c,d){return function(e,f){var g,k,m;v(e)&&(g=e.match(a),k=g[1],m=g[3],e=b.hasOwnProperty(k)?b[k]:hc(f.$scope,k,!0)||hc(d,k,!0),Wa(e,k,!0));g=c.instantiate(e,f);if(m){if(!f||"object"!==typeof f.$scope)throw C("$controller")("noscp",
k||e.name,m);f.$scope[m]=g}return g}}]}function Qd(){this.$get=["$window",function(b){return w(b.document)}]}function Rd(){this.$get=["$log",function(b){return function(a,c){b.error.apply(b,arguments)}}]}function vc(b){var a={},c,d,e;if(!b)return a;r(b.split("\n"),function(b){e=b.indexOf(":");c=K(aa(b.substr(0,e)));d=aa(b.substr(e+1));c&&(a[c]=a[c]?a[c]+", "+d:d)});return a}function wc(b){var a=T(b)?b:t;return function(c){a||(a=vc(b));return c?a[K(c)]||null:a}}function xc(b,a,c){if(P(c))return c(b,
a);r(c,function(c){b=c(b,a)});return b}function Ud(){var b=/^\s*(\[|\{[^\{])/,a=/[\}\]]\s*$/,c=/^\)\]\}',?\n/,d={"Content-Type":"application/json;charset=utf-8"},e=this.defaults={transformResponse:[function(d){v(d)&&(d=d.replace(c,""),b.test(d)&&a.test(d)&&(d=cc(d)));return d}],transformRequest:[function(a){return T(a)&&"[object File]"!==za.call(a)&&"[object Blob]"!==za.call(a)?na(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ha(d),put:ha(d),patch:ha(d)},xsrfCookieName:"XSRF-TOKEN",
xsrfHeaderName:"X-XSRF-TOKEN"},f=this.interceptors=[],g=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(a,b,c,d,n,p){function q(a){function b(a){var d=D({},a,{data:xc(a.data,a.headers,c.transformResponse)});return 200<=a.status&&300>a.status?d:n.reject(d)}var c={method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse},d=function(a){var b=e.headers,c=D({},a.headers),d,f,b=D({},b.common,b[K(a.method)]);
a:for(d in b){a=K(d);for(f in c)if(K(f)===a)continue a;c[d]=b[d]}(function(a){var b;r(a,function(c,d){P(c)&&(b=c(),null!=b?a[d]=b:delete a[d])})})(c);return c}(a);D(c,a);c.headers=d;c.method=Ia(c.method);var f=[function(a){d=a.headers;var c=xc(a.data,wc(d),a.transformRequest);x(c)&&r(d,function(a,b){"content-type"===K(b)&&delete d[b]});x(a.withCredentials)&&!x(e.withCredentials)&&(a.withCredentials=e.withCredentials);return s(a,c,d).then(b,b)},t],g=n.when(c);for(r(A,function(a){(a.request||a.requestError)&&
f.unshift(a.request,a.requestError);(a.response||a.responseError)&&f.push(a.response,a.responseError)});f.length;){a=f.shift();var m=f.shift(),g=g.then(a,m)}g.success=function(a){g.then(function(b){a(b.data,b.status,b.headers,c)});return g};g.error=function(a){g.then(null,function(b){a(b.data,b.status,b.headers,c)});return g};return g}function s(c,f,g){function h(a,b,c,e){I&&(200<=a&&300>a?I.put(w,[a,b,vc(c),e]):I.remove(w));p(b,a,c,e);d.$$phase||d.$apply()}function p(a,b,d,e){b=Math.max(b,0);(200<=
b&&300>b?A.resolve:A.reject)({data:a,status:b,headers:wc(d),config:c,statusText:e})}function s(){var a=Ra(q.pendingRequests,c);-1!==a&&q.pendingRequests.splice(a,1)}var A=n.defer(),r=A.promise,I,H,w=F(c.url,c.params);q.pendingRequests.push(c);r.then(s,s);!c.cache&&!e.cache||(!1===c.cache||"GET"!==c.method&&"JSONP"!==c.method)||(I=T(c.cache)?c.cache:T(e.cache)?e.cache:u);if(I)if(H=I.get(w),y(H)){if(H&&P(H.then))return H.then(s,s),H;J(H)?p(H[1],H[0],ha(H[2]),H[3]):p(H,200,{},"OK")}else I.put(w,r);x(H)&&
((H=Pb(c.url)?b.cookies()[c.xsrfCookieName||e.xsrfCookieName]:t)&&(g[c.xsrfHeaderName||e.xsrfHeaderName]=H),a(c.method,w,f,h,g,c.timeout,c.withCredentials,c.responseType));return r}function F(a,b){if(!b)return a;var c=[];Tc(b,function(a,b){null===a||x(a)||(J(a)||(a=[a]),r(a,function(a){T(a)&&(a=ta(a)?a.toISOString():na(a));c.push(Ca(b)+"="+Ca(a))}))});0<c.length&&(a+=(-1==a.indexOf("?")?"?":"&")+c.join("&"));return a}var u=c("$http"),A=[];r(f,function(a){A.unshift(v(a)?p.get(a):p.invoke(a))});r(g,
function(a,b){var c=v(a)?p.get(a):p.invoke(a);A.splice(b,0,{response:function(a){return c(n.when(a))},responseError:function(a){return c(n.reject(a))}})});q.pendingRequests=[];(function(a){r(arguments,function(a){q[a]=function(b,c){return q(D(c||{},{method:a,url:b}))}})})("get","delete","head","jsonp");(function(a){r(arguments,function(a){q[a]=function(b,c,d){return q(D(d||{},{method:a,url:b,data:c}))}})})("post","put");q.defaults=e;return q}]}function xe(b){if(8>=Q&&(!b.match(/^(get|post|head|put|delete|options)$/i)||
!W.XMLHttpRequest))return new W.ActiveXObject("Microsoft.XMLHTTP");if(W.XMLHttpRequest)return new W.XMLHttpRequest;throw C("$httpBackend")("noxhr");}function Vd(){this.$get=["$browser","$window","$document",function(b,a,c){return ye(b,xe,b.defer,a.angular.callbacks,c[0])}]}function ye(b,a,c,d,e){function f(a,b,c){var f=e.createElement("script"),g=null;f.type="text/javascript";f.src=a;f.async=!0;g=function(a){$a(f,"load",g);$a(f,"error",g);e.body.removeChild(f);f=null;var k=-1,s="unknown";a&&("load"!==
a.type||d[b].called||(a={type:"error"}),s=a.type,k="error"===a.type?404:200);c&&c(k,s)};sb(f,"load",g);sb(f,"error",g);8>=Q&&(f.onreadystatechange=function(){v(f.readyState)&&/loaded|complete/.test(f.readyState)&&(f.onreadystatechange=null,g({type:"load"}))});e.body.appendChild(f);return g}var g=-1;return function(e,m,h,l,n,p,q,s){function F(){A=g;R&&R();z&&z.abort()}function u(a,d,e,f,g){L&&c.cancel(L);R=z=null;0===d&&(d=e?200:"file"==ua(m).protocol?404:0);a(1223===d?204:d,e,f,g||"");b.$$completeOutstandingRequest(E)}
var A;b.$$incOutstandingRequestCount();m=m||b.url();if("jsonp"==K(e)){var N="_"+(d.counter++).toString(36);d[N]=function(a){d[N].data=a;d[N].called=!0};var R=f(m.replace("JSON_CALLBACK","angular.callbacks."+N),N,function(a,b){u(l,a,d[N].data,"",b);d[N]=E})}else{var z=a(e);z.open(e,m,!0);r(n,function(a,b){y(a)&&z.setRequestHeader(b,a)});z.onreadystatechange=function(){if(z&&4==z.readyState){var a=null,b=null,c="";A!==g&&(a=z.getAllResponseHeaders(),b="response"in z?z.response:z.responseText);A===g&&
10>Q||(c=z.statusText);u(l,A||z.status,b,a,c)}};q&&(z.withCredentials=!0);if(s)try{z.responseType=s}catch(ca){if("json"!==s)throw ca;}z.send(h||null)}if(0<p)var L=c(F,p);else p&&P(p.then)&&p.then(F)}}function Sd(){var b="{{",a="}}";this.startSymbol=function(a){return a?(b=a,this):b};this.endSymbol=function(b){return b?(a=b,this):a};this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(f,h,l){for(var n,p,q=0,s=[],F=f.length,u=!1,A=[];q<F;)-1!=(n=f.indexOf(b,q))&&-1!=(p=f.indexOf(a,
n+g))?(q!=n&&s.push(f.substring(q,n)),s.push(q=c(u=f.substring(n+g,p))),q.exp=u,q=p+k,u=!0):(q!=F&&s.push(f.substring(q)),q=F);(F=s.length)||(s.push(""),F=1);if(l&&1<s.length)throw yc("noconcat",f);if(!h||u)return A.length=F,q=function(a){try{for(var b=0,c=F,g;b<c;b++){if("function"==typeof(g=s[b]))if(g=g(a),g=l?e.getTrusted(l,g):e.valueOf(g),null==g)g="";else switch(typeof g){case "string":break;case "number":g=""+g;break;default:g=na(g)}A[b]=g}return A.join("")}catch(k){a=yc("interr",f,k.toString()),
d(a)}},q.exp=f,q.parts=s,q}var g=b.length,k=a.length;f.startSymbol=function(){return b};f.endSymbol=function(){return a};return f}]}function Td(){this.$get=["$rootScope","$window","$q",function(b,a,c){function d(d,g,k,m){var h=a.setInterval,l=a.clearInterval,n=c.defer(),p=n.promise,q=0,s=y(m)&&!m;k=y(k)?k:0;p.then(null,null,d);p.$$intervalId=h(function(){n.notify(q++);0<k&&q>=k&&(n.resolve(q),l(p.$$intervalId),delete e[p.$$intervalId]);s||b.$apply()},g);e[p.$$intervalId]=n;return p}var e={};d.cancel=
function(b){return b&&b.$$intervalId in e?(e[b.$$intervalId].reject("canceled"),a.clearInterval(b.$$intervalId),delete e[b.$$intervalId],!0):!1};return d}]}function bd(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"\u00a4",posSuf:"",negPre:"(\u00a4",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January February March April May June July August September October November December".split(" "),
SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(b){return 1===b?"one":"other"}}}}function Qb(b){b=b.split("/");for(var a=b.length;a--;)b[a]=
lb(b[a]);return b.join("/")}function zc(b,a,c){b=ua(b,c);a.$$protocol=b.protocol;a.$$host=b.hostname;a.$$port=U(b.port)||ze[b.protocol]||null}function Ac(b,a,c){var d="/"!==b.charAt(0);d&&(b="/"+b);b=ua(b,c);a.$$path=decodeURIComponent(d&&"/"===b.pathname.charAt(0)?b.pathname.substring(1):b.pathname);a.$$search=ec(b.search);a.$$hash=decodeURIComponent(b.hash);a.$$path&&"/"!=a.$$path.charAt(0)&&(a.$$path="/"+a.$$path)}function ra(b,a){if(0===a.indexOf(b))return a.substr(b.length)}function eb(b){var a=
b.indexOf("#");return-1==a?b:b.substr(0,a)}function Rb(b){return b.substr(0,eb(b).lastIndexOf("/")+1)}function Bc(b,a){this.$$html5=!0;a=a||"";var c=Rb(b);zc(b,this,b);this.$$parse=function(a){var e=ra(c,a);if(!v(e))throw Sb("ipthprfx",a,c);Ac(e,this,b);this.$$path||(this.$$path="/");this.$$compose()};this.$$compose=function(){var a=Cb(this.$$search),b=this.$$hash?"#"+lb(this.$$hash):"";this.$$url=Qb(this.$$path)+(a?"?"+a:"")+b;this.$$absUrl=c+this.$$url.substr(1)};this.$$rewrite=function(d){var e;
if((e=ra(b,d))!==t)return d=e,(e=ra(a,e))!==t?c+(ra("/",e)||e):b+d;if((e=ra(c,d))!==t)return c+e;if(c==d+"/")return c}}function Tb(b,a){var c=Rb(b);zc(b,this,b);this.$$parse=function(d){var e=ra(b,d)||ra(c,d),e="#"==e.charAt(0)?ra(a,e):this.$$html5?e:"";if(!v(e))throw Sb("ihshprfx",d,a);Ac(e,this,b);d=this.$$path;var f=/^\/[A-Z]:(\/.*)/;0===e.indexOf(b)&&(e=e.replace(b,""));f.exec(e)||(d=(e=f.exec(d))?e[1]:d);this.$$path=d;this.$$compose()};this.$$compose=function(){var c=Cb(this.$$search),e=this.$$hash?
"#"+lb(this.$$hash):"";this.$$url=Qb(this.$$path)+(c?"?"+c:"")+e;this.$$absUrl=b+(this.$$url?a+this.$$url:"")};this.$$rewrite=function(a){if(eb(b)==eb(a))return a}}function Ub(b,a){this.$$html5=!0;Tb.apply(this,arguments);var c=Rb(b);this.$$rewrite=function(d){var e;if(b==eb(d))return d;if(e=ra(c,d))return b+a+e;if(c===d+"/")return c};this.$$compose=function(){var c=Cb(this.$$search),e=this.$$hash?"#"+lb(this.$$hash):"";this.$$url=Qb(this.$$path)+(c?"?"+c:"")+e;this.$$absUrl=b+a+this.$$url}}function tb(b){return function(){return this[b]}}
function Cc(b,a){return function(c){if(x(c))return this[b];this[b]=a(c);this.$$compose();return this}}function Wd(){var b="",a=!1;this.hashPrefix=function(a){return y(a)?(b=a,this):b};this.html5Mode=function(b){return y(b)?(a=b,this):a};this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(c,d,e,f){function g(a){c.$broadcast("$locationChangeSuccess",k.absUrl(),a)}var k,m,h=d.baseHref(),l=d.url(),n;a?(n=l.substring(0,l.indexOf("/",l.indexOf("//")+2))+(h||"/"),m=e.history?Bc:Ub):(n=
eb(l),m=Tb);k=new m(n,"#"+b);k.$$parse(k.$$rewrite(l));var p=/^\s*(javascript|mailto):/i;f.on("click",function(a){if(!a.ctrlKey&&!a.metaKey&&2!=a.which){for(var e=w(a.target);"a"!==K(e[0].nodeName);)if(e[0]===f[0]||!(e=e.parent())[0])return;var g=e.prop("href");T(g)&&"[object SVGAnimatedString]"===g.toString()&&(g=ua(g.animVal).href);if(!p.test(g)){if(m===Ub){var h=e.attr("href")||e.attr("xlink:href");if(h&&0>h.indexOf("://"))if(g="#"+b,"/"==h[0])g=n+g+h;else if("#"==h[0])g=n+g+(k.path()||"/")+h;
else{var l=k.path().split("/"),h=h.split("/");2!==l.length||l[1]||(l.length=1);for(var q=0;q<h.length;q++)"."!=h[q]&&(".."==h[q]?l.pop():h[q].length&&l.push(h[q]));g=n+g+l.join("/")}}l=k.$$rewrite(g);g&&(!e.attr("target")&&l&&!a.isDefaultPrevented())&&(a.preventDefault(),l!=d.url()&&(k.$$parse(l),c.$apply(),W.angular["ff-684208-preventDefault"]=!0))}}});k.absUrl()!=l&&d.url(k.absUrl(),!0);d.onUrlChange(function(a){k.absUrl()!=a&&(c.$evalAsync(function(){var b=k.absUrl();k.$$parse(a);c.$broadcast("$locationChangeStart",
a,b).defaultPrevented?(k.$$parse(b),d.url(b)):g(b)}),c.$$phase||c.$digest())});var q=0;c.$watch(function(){var a=d.url(),b=k.$$replace;q&&a==k.absUrl()||(q++,c.$evalAsync(function(){c.$broadcast("$locationChangeStart",k.absUrl(),a).defaultPrevented?k.$$parse(a):(d.url(k.absUrl(),b),g(a))}));k.$$replace=!1;return q});return k}]}function Xd(){var b=!0,a=this;this.debugEnabled=function(a){return y(a)?(b=a,this):b};this.$get=["$window",function(c){function d(a){a instanceof Error&&(a.stack?a=a.message&&
-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line));return a}function e(a){var b=c.console||{},e=b[a]||b.log||E;a=!1;try{a=!!e.apply}catch(m){}return a?function(){var a=[];r(arguments,function(b){a.push(d(b))});return e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){b&&c.apply(a,arguments)}}()}}]}function ka(b,
a){if("__defineGetter__"===b||"__defineSetter__"===b||"__lookupGetter__"===b||"__lookupSetter__"===b||"__proto__"===b)throw la("isecfld",a);return b}function va(b,a){if(b){if(b.constructor===b)throw la("isecfn",a);if(b.document&&b.location&&b.alert&&b.setInterval)throw la("isecwindow",a);if(b.children&&(b.nodeName||b.prop&&b.attr&&b.find))throw la("isecdom",a);if(b===Object)throw la("isecobj",a);}return b}function ub(b,a,c,d,e){va(b,d);e=e||{};a=a.split(".");for(var f,g=0;1<a.length;g++){f=ka(a.shift(),
d);var k=va(b[f],d);k||(k={},b[f]=k);b=k;b.then&&e.unwrapPromises&&(wa(d),"$$v"in b||function(a){a.then(function(b){a.$$v=b})}(b),b.$$v===t&&(b.$$v={}),b=b.$$v)}f=ka(a.shift(),d);va(b[f],d);return b[f]=c}function Dc(b,a,c,d,e,f,g){ka(b,f);ka(a,f);ka(c,f);ka(d,f);ka(e,f);return g.unwrapPromises?function(g,m){var h=m&&m.hasOwnProperty(b)?m:g,l;if(null==h)return h;(h=h[b])&&h.then&&(wa(f),"$$v"in h||(l=h,l.$$v=t,l.then(function(a){l.$$v=a})),h=h.$$v);if(!a)return h;if(null==h)return t;(h=h[a])&&h.then&&
(wa(f),"$$v"in h||(l=h,l.$$v=t,l.then(function(a){l.$$v=a})),h=h.$$v);if(!c)return h;if(null==h)return t;(h=h[c])&&h.then&&(wa(f),"$$v"in h||(l=h,l.$$v=t,l.then(function(a){l.$$v=a})),h=h.$$v);if(!d)return h;if(null==h)return t;(h=h[d])&&h.then&&(wa(f),"$$v"in h||(l=h,l.$$v=t,l.then(function(a){l.$$v=a})),h=h.$$v);if(!e)return h;if(null==h)return t;(h=h[e])&&h.then&&(wa(f),"$$v"in h||(l=h,l.$$v=t,l.then(function(a){l.$$v=a})),h=h.$$v);return h}:function(f,g){var h=g&&g.hasOwnProperty(b)?g:f;if(null==
h)return h;h=h[b];if(!a)return h;if(null==h)return t;h=h[a];if(!c)return h;if(null==h)return t;h=h[c];if(!d)return h;if(null==h)return t;h=h[d];return e?null==h?t:h=h[e]:h}}function Ec(b,a,c){if(Vb.hasOwnProperty(b))return Vb[b];var d=b.split("."),e=d.length,f;if(a.csp)f=6>e?Dc(d[0],d[1],d[2],d[3],d[4],c,a):function(b,f){var g=0,k;do k=Dc(d[g++],d[g++],d[g++],d[g++],d[g++],c,a)(b,f),f=t,b=k;while(g<e);return k};else{var g="var p;\n";r(d,function(b,d){ka(b,c);g+="if(s == null) return undefined;\ns="+
(d?"s":'((k&&k.hasOwnProperty("'+b+'"))?k:s)')+'["'+b+'"];\n'+(a.unwrapPromises?'if (s && s.then) {\n pw("'+c.replace(/(["\r\n])/g,"\\$1")+'");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v=v;});\n}\n s=s.$$v\n}\n':"")});var g=g+"return s;",k=new Function("s","k","pw",g);k.toString=ba(g);f=a.unwrapPromises?function(a,b){return k(a,b,wa)}:k}"hasOwnProperty"!==b&&(Vb[b]=f);return f}function Yd(){var b={},a={csp:!1,unwrapPromises:!1,logPromiseWarnings:!0};this.unwrapPromises=
function(b){return y(b)?(a.unwrapPromises=!!b,this):a.unwrapPromises};this.logPromiseWarnings=function(b){return y(b)?(a.logPromiseWarnings=b,this):a.logPromiseWarnings};this.$get=["$filter","$sniffer","$log",function(c,d,e){a.csp=d.csp;wa=function(b){a.logPromiseWarnings&&!Fc.hasOwnProperty(b)&&(Fc[b]=!0,e.warn("[$parse] Promise found in the expression `"+b+"`. Automatic unwrapping of promises in Angular expressions is deprecated."))};return function(d){var e;switch(typeof d){case "string":if(b.hasOwnProperty(d))return b[d];
e=new Wb(a);e=(new fb(e,c,a)).parse(d);"hasOwnProperty"!==d&&(b[d]=e);return e;case "function":return d;default:return E}}}]}function $d(){this.$get=["$rootScope","$exceptionHandler",function(b,a){return Ae(function(a){b.$evalAsync(a)},a)}]}function Ae(b,a){function c(a){return a}function d(a){return g(a)}var e=function(){var g=[],h,l;return l={resolve:function(a){if(g){var c=g;g=t;h=f(a);c.length&&b(function(){for(var a,b=0,d=c.length;b<d;b++)a=c[b],h.then(a[0],a[1],a[2])})}},reject:function(a){l.resolve(k(a))},
notify:function(a){if(g){var c=g;g.length&&b(function(){for(var b,d=0,e=c.length;d<e;d++)b=c[d],b[2](a)})}},promise:{then:function(b,f,k){var l=e(),F=function(d){try{l.resolve((P(b)?b:c)(d))}catch(e){l.reject(e),a(e)}},u=function(b){try{l.resolve((P(f)?f:d)(b))}catch(c){l.reject(c),a(c)}},A=function(b){try{l.notify((P(k)?k:c)(b))}catch(d){a(d)}};g?g.push([F,u,A]):h.then(F,u,A);return l.promise},"catch":function(a){return this.then(null,a)},"finally":function(a){function b(a,c){var d=e();c?d.resolve(a):
d.reject(a);return d.promise}function d(e,f){var g=null;try{g=(a||c)()}catch(k){return b(k,!1)}return g&&P(g.then)?g.then(function(){return b(e,f)},function(a){return b(a,!1)}):b(e,f)}return this.then(function(a){return d(a,!0)},function(a){return d(a,!1)})}}}},f=function(a){return a&&P(a.then)?a:{then:function(c){var d=e();b(function(){d.resolve(c(a))});return d.promise}}},g=function(a){var b=e();b.reject(a);return b.promise},k=function(c){return{then:function(f,g){var k=e();b(function(){try{k.resolve((P(g)?
g:d)(c))}catch(b){k.reject(b),a(b)}});return k.promise}}};return{defer:e,reject:g,when:function(k,h,l,n){var p=e(),q,s=function(b){try{return(P(h)?h:c)(b)}catch(d){return a(d),g(d)}},F=function(b){try{return(P(l)?l:d)(b)}catch(c){return a(c),g(c)}},u=function(b){try{return(P(n)?n:c)(b)}catch(d){a(d)}};b(function(){f(k).then(function(a){q||(q=!0,p.resolve(f(a).then(s,F,u)))},function(a){q||(q=!0,p.resolve(F(a)))},function(a){q||p.notify(u(a))})});return p.promise},all:function(a){var b=e(),c=0,d=J(a)?
[]:{};r(a,function(a,e){c++;f(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})});0===c&&b.resolve(d);return b.promise}}}function ge(){this.$get=["$window","$timeout",function(b,a){var c=b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame,d=b.cancelAnimationFrame||b.webkitCancelAnimationFrame||b.mozCancelAnimationFrame||b.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:
function(b){var c=a(b,16.66,!1);return function(){a.cancel(c)}};f.supported=e;return f}]}function Zd(){var b=10,a=C("$rootScope"),c=null;this.digestTtl=function(a){arguments.length&&(b=a);return b};this.$get=["$injector","$exceptionHandler","$parse","$browser",function(d,e,f,g){function k(){this.$id=hb();this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this["this"]=this.$root=this;this.$$destroyed=!1;this.$$asyncQueue=[];this.$$postDigestQueue=
[];this.$$listeners={};this.$$listenerCount={};this.$$isolateBindings={}}function m(b){if(p.$$phase)throw a("inprog",p.$$phase);p.$$phase=b}function h(a,b){var c=f(a);Wa(c,b);return c}function l(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function n(){}k.prototype={constructor:k,$new:function(a){a?(a=new k,a.$root=this.$root,a.$$asyncQueue=this.$$asyncQueue,a.$$postDigestQueue=this.$$postDigestQueue):(this.$$childScopeClass||(this.$$childScopeClass=
function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$id=hb();this.$$childScopeClass=null},this.$$childScopeClass.prototype=this),a=new this.$$childScopeClass);a["this"]=a;a.$parent=this;a.$$prevSibling=this.$$childTail;this.$$childHead?this.$$childTail=this.$$childTail.$$nextSibling=a:this.$$childHead=this.$$childTail=a;return a},$watch:function(a,b,d){var e=h(a,"watch"),f=this.$$watchers,g={fn:b,last:n,get:e,exp:a,
eq:!!d};c=null;if(!P(b)){var k=h(b||E,"listener");g.fn=function(a,b,c){k(c)}}if("string"==typeof a&&e.constant){var l=g.fn;g.fn=function(a,b,c){l.call(this,a,b,c);Sa(f,g)}}f||(f=this.$$watchers=[]);f.unshift(g);return function(){Sa(f,g);c=null}},$watchCollection:function(a,b){var c=this,d,e,g,k=1<b.length,h=0,l=f(a),m=[],p={},n=!0,r=0;return this.$watch(function(){d=l(c);var a,b,f;if(T(d))if(Pa(d))for(e!==m&&(e=m,r=e.length=0,h++),a=d.length,r!==a&&(h++,e.length=r=a),b=0;b<a;b++)f=e[b]!==e[b]&&d[b]!==
d[b],f||e[b]===d[b]||(h++,e[b]=d[b]);else{e!==p&&(e=p={},r=0,h++);a=0;for(b in d)d.hasOwnProperty(b)&&(a++,e.hasOwnProperty(b)?(f=e[b]!==e[b]&&d[b]!==d[b],f||e[b]===d[b]||(h++,e[b]=d[b])):(r++,e[b]=d[b],h++));if(r>a)for(b in h++,e)e.hasOwnProperty(b)&&!d.hasOwnProperty(b)&&(r--,delete e[b])}else e!==d&&(e=d,h++);return h},function(){n?(n=!1,b(d,d,c)):b(d,g,c);if(k)if(T(d))if(Pa(d)){g=Array(d.length);for(var a=0;a<d.length;a++)g[a]=d[a]}else for(a in g={},d)kb.call(d,a)&&(g[a]=d[a]);else g=d})},$digest:function(){var d,
f,k,h,l=this.$$asyncQueue,r=this.$$postDigestQueue,R,z,t=b,L,O=[],w,B,I;m("$digest");g.$$checkUrlChange();c=null;do{z=!1;for(L=this;l.length;){try{I=l.shift(),I.scope.$eval(I.expression)}catch(H){p.$$phase=null,e(H)}c=null}a:do{if(h=L.$$watchers)for(R=h.length;R--;)try{if(d=h[R])if((f=d.get(L))!==(k=d.last)&&!(d.eq?Aa(f,k):"number"===typeof f&&"number"===typeof k&&isNaN(f)&&isNaN(k)))z=!0,c=d,d.last=d.eq?Ha(f,null):f,d.fn(f,k===n?f:k,L),5>t&&(w=4-t,O[w]||(O[w]=[]),B=P(d.exp)?"fn: "+(d.exp.name||d.exp.toString()):
d.exp,B+="; newVal: "+na(f)+"; oldVal: "+na(k),O[w].push(B));else if(d===c){z=!1;break a}}catch(y){p.$$phase=null,e(y)}if(!(h=L.$$childHead||L!==this&&L.$$nextSibling))for(;L!==this&&!(h=L.$$nextSibling);)L=L.$parent}while(L=h);if((z||l.length)&&!t--)throw p.$$phase=null,a("infdig",b,na(O));}while(z||l.length);for(p.$$phase=null;r.length;)try{r.shift()()}catch(v){e(v)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;this!==p&&(r(this.$$listenerCount,
Bb(null,l,this)),a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=null,this.$$listeners={},this.$$watchers=this.$$asyncQueue=this.$$postDigestQueue=[],this.$destroy=this.$digest=this.$apply=E,this.$on=
this.$watch=function(){return E})}},$eval:function(a,b){return f(a)(this,b)},$evalAsync:function(a){p.$$phase||p.$$asyncQueue.length||g.defer(function(){p.$$asyncQueue.length&&p.$digest()});this.$$asyncQueue.push({scope:this,expression:a})},$$postDigest:function(a){this.$$postDigestQueue.push(a)},$apply:function(a){try{return m("$apply"),this.$eval(a)}catch(b){e(b)}finally{p.$$phase=null;try{p.$digest()}catch(c){throw e(c),c;}}},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=
c=[]);c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){c[Ra(c,b)]=null;l(e,1,a)}},$emit:function(a,b){var c=[],d,f=this,g=!1,k={name:a,targetScope:f,stopPropagation:function(){g=!0},preventDefault:function(){k.defaultPrevented=!0},defaultPrevented:!1},h=[k].concat(Ba.call(arguments,1)),l,m;do{d=f.$$listeners[a]||c;k.currentScope=f;l=0;for(m=d.length;l<m;l++)if(d[l])try{d[l].apply(null,h)}catch(p){e(p)}else d.splice(l,
1),l--,m--;if(g)break;f=f.$parent}while(f);return k},$broadcast:function(a,b){for(var c=this,d=this,f={name:a,targetScope:this,preventDefault:function(){f.defaultPrevented=!0},defaultPrevented:!1},g=[f].concat(Ba.call(arguments,1)),k,h;c=d;){f.currentScope=c;d=c.$$listeners[a]||[];k=0;for(h=d.length;k<h;k++)if(d[k])try{d[k].apply(null,g)}catch(l){e(l)}else d.splice(k,1),k--,h--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}return f}};
var p=new k;return p}]}function cd(){var b=/^\s*(https?|ftp|mailto|tel|file):/,a=/^\s*((https?|ftp|file):|data:image\/)/;this.aHrefSanitizationWhitelist=function(a){return y(a)?(b=a,this):b};this.imgSrcSanitizationWhitelist=function(b){return y(b)?(a=b,this):a};this.$get=function(){return function(c,d){var e=d?a:b,f;if(!Q||8<=Q)if(f=ua(c).href,""!==f&&!f.match(e))return"unsafe:"+f;return c}}}function Be(b){if("self"===b)return b;if(v(b)){if(-1<b.indexOf("***"))throw xa("iwcard",b);b=b.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,
"\\$1").replace(/\x08/g,"\\x08").replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*");return RegExp("^"+b+"$")}if(jb(b))return RegExp("^"+b.source+"$");throw xa("imatcher");}function Gc(b){var a=[];y(b)&&r(b,function(b){a.push(Be(b))});return a}function be(){this.SCE_CONTEXTS=ga;var b=["self"],a=[];this.resourceUrlWhitelist=function(a){arguments.length&&(b=Gc(a));return b};this.resourceUrlBlacklist=function(b){arguments.length&&(a=Gc(b));return a};this.$get=["$injector",function(c){function d(a){var b=
function(a){this.$$unwrapTrustedValue=function(){return a}};a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return b}var e=function(a){throw xa("unsafe");};c.has("$sanitize")&&(e=c.get("$sanitize"));var f=d(),g={};g[ga.HTML]=d(f);g[ga.CSS]=d(f);g[ga.URL]=d(f);g[ga.JS]=d(f);g[ga.RESOURCE_URL]=d(g[ga.URL]);return{trustAs:function(a,b){var c=g.hasOwnProperty(a)?g[a]:null;if(!c)throw xa("icontext",
a,b);if(null===b||b===t||""===b)return b;if("string"!==typeof b)throw xa("itype",a);return new c(b)},getTrusted:function(c,d){if(null===d||d===t||""===d)return d;var f=g.hasOwnProperty(c)?g[c]:null;if(f&&d instanceof f)return d.$$unwrapTrustedValue();if(c===ga.RESOURCE_URL){var f=ua(d.toString()),l,n,p=!1;l=0;for(n=b.length;l<n;l++)if("self"===b[l]?Pb(f):b[l].exec(f.href)){p=!0;break}if(p)for(l=0,n=a.length;l<n;l++)if("self"===a[l]?Pb(f):a[l].exec(f.href)){p=!1;break}if(p)return d;throw xa("insecurl",
d.toString());}if(c===ga.HTML)return e(d);throw xa("unsafe");},valueOf:function(a){return a instanceof f?a.$$unwrapTrustedValue():a}}}]}function ae(){var b=!0;this.enabled=function(a){arguments.length&&(b=!!a);return b};this.$get=["$parse","$sniffer","$sceDelegate",function(a,c,d){if(b&&c.msie&&8>c.msieDocumentMode)throw xa("iequirks");var e=ha(ga);e.isEnabled=function(){return b};e.trustAs=d.trustAs;e.getTrusted=d.getTrusted;e.valueOf=d.valueOf;b||(e.trustAs=e.getTrusted=function(a,b){return b},
e.valueOf=Qa);e.parseAs=function(b,c){var d=a(c);return d.literal&&d.constant?d:function(a,c){return e.getTrusted(b,d(a,c))}};var f=e.parseAs,g=e.getTrusted,k=e.trustAs;r(ga,function(a,b){var c=K(b);e[Za("parse_as_"+c)]=function(b){return f(a,b)};e[Za("get_trusted_"+c)]=function(b){return g(a,b)};e[Za("trust_as_"+c)]=function(b){return k(a,b)}});return e}]}function ce(){this.$get=["$window","$document",function(b,a){var c={},d=U((/android (\d+)/.exec(K((b.navigator||{}).userAgent))||[])[1]),e=/Boxee/i.test((b.navigator||
{}).userAgent),f=a[0]||{},g=f.documentMode,k,m=/^(Moz|webkit|O|ms)(?=[A-Z])/,h=f.body&&f.body.style,l=!1,n=!1;if(h){for(var p in h)if(l=m.exec(p)){k=l[0];k=k.substr(0,1).toUpperCase()+k.substr(1);break}k||(k="WebkitOpacity"in h&&"webkit");l=!!("transition"in h||k+"Transition"in h);n=!!("animation"in h||k+"Animation"in h);!d||l&&n||(l=v(f.body.style.webkitTransition),n=v(f.body.style.webkitAnimation))}return{history:!(!b.history||!b.history.pushState||4>d||e),hashchange:"onhashchange"in b&&(!g||7<
g),hasEvent:function(a){if("input"==a&&9==Q)return!1;if(x(c[a])){var b=f.createElement("div");c[a]="on"+a in b}return c[a]},csp:Xa(),vendorPrefix:k,transitions:l,animations:n,android:d,msie:Q,msieDocumentMode:g}}]}function ee(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function(b,a,c,d){function e(e,k,m){var h=c.defer(),l=h.promise,n=y(m)&&!m;k=a.defer(function(){try{h.resolve(e())}catch(a){h.reject(a),d(a)}finally{delete f[l.$$timeoutId]}n||b.$apply()},k);l.$$timeoutId=k;f[k]=h;
return l}var f={};e.cancel=function(b){return b&&b.$$timeoutId in f?(f[b.$$timeoutId].reject("canceled"),delete f[b.$$timeoutId],a.defer.cancel(b.$$timeoutId)):!1};return e}]}function ua(b,a){var c=b;Q&&(Y.setAttribute("href",c),c=Y.href);Y.setAttribute("href",c);return{href:Y.href,protocol:Y.protocol?Y.protocol.replace(/:$/,""):"",host:Y.host,search:Y.search?Y.search.replace(/^\?/,""):"",hash:Y.hash?Y.hash.replace(/^#/,""):"",hostname:Y.hostname,port:Y.port,pathname:"/"===Y.pathname.charAt(0)?Y.pathname:
"/"+Y.pathname}}function Pb(b){b=v(b)?ua(b):b;return b.protocol===Hc.protocol&&b.host===Hc.host}function fe(){this.$get=ba(W)}function mc(b){function a(d,e){if(T(d)){var f={};r(d,function(b,c){f[c]=a(c,b)});return f}return b.factory(d+c,e)}var c="Filter";this.register=a;this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}];a("currency",Ic);a("date",Jc);a("filter",Ce);a("json",De);a("limitTo",Ee);a("lowercase",Fe);a("number",Kc);a("orderBy",Lc);a("uppercase",Ge)}function Ce(){return function(b,
a,c){if(!J(b))return b;var d=typeof c,e=[];e.check=function(a){for(var b=0;b<e.length;b++)if(!e[b](a))return!1;return!0};"function"!==d&&(c="boolean"===d&&c?function(a,b){return Va.equals(a,b)}:function(a,b){if(a&&b&&"object"===typeof a&&"object"===typeof b){for(var d in a)if("$"!==d.charAt(0)&&kb.call(a,d)&&c(a[d],b[d]))return!0;return!1}b=(""+b).toLowerCase();return-1<(""+a).toLowerCase().indexOf(b)});var f=function(a,b){if("string"==typeof b&&"!"===b.charAt(0))return!f(a,b.substr(1));switch(typeof a){case "boolean":case "number":case "string":return c(a,
b);case "object":switch(typeof b){case "object":return c(a,b);default:for(var d in a)if("$"!==d.charAt(0)&&f(a[d],b))return!0}return!1;case "array":for(d=0;d<a.length;d++)if(f(a[d],b))return!0;return!1;default:return!1}};switch(typeof a){case "boolean":case "number":case "string":a={$:a};case "object":for(var g in a)(function(b){"undefined"!==typeof a[b]&&e.push(function(c){return f("$"==b?c:c&&c[b],a[b])})})(g);break;case "function":e.push(a);break;default:return b}d=[];for(g=0;g<b.length;g++){var k=
b[g];e.check(k)&&d.push(k)}return d}}function Ic(b){var a=b.NUMBER_FORMATS;return function(b,d){x(d)&&(d=a.CURRENCY_SYM);return Mc(b,a.PATTERNS[1],a.GROUP_SEP,a.DECIMAL_SEP,2).replace(/\u00A4/g,d)}}function Kc(b){var a=b.NUMBER_FORMATS;return function(b,d){return Mc(b,a.PATTERNS[0],a.GROUP_SEP,a.DECIMAL_SEP,d)}}function Mc(b,a,c,d,e){if(null==b||!isFinite(b)||T(b))return"";var f=0>b;b=Math.abs(b);var g=b+"",k="",m=[],h=!1;if(-1!==g.indexOf("e")){var l=g.match(/([\d\.]+)e(-?)(\d+)/);l&&"-"==l[2]&&
l[3]>e+1?(g="0",b=0):(k=g,h=!0)}if(h)0<e&&(-1<b&&1>b)&&(k=b.toFixed(e));else{g=(g.split(Nc)[1]||"").length;x(e)&&(e=Math.min(Math.max(a.minFrac,g),a.maxFrac));b=+(Math.round(+(b.toString()+"e"+e)).toString()+"e"+-e);0===b&&(f=!1);b=(""+b).split(Nc);g=b[0];b=b[1]||"";var l=0,n=a.lgSize,p=a.gSize;if(g.length>=n+p)for(l=g.length-n,h=0;h<l;h++)0===(l-h)%p&&0!==h&&(k+=c),k+=g.charAt(h);for(h=l;h<g.length;h++)0===(g.length-h)%n&&0!==h&&(k+=c),k+=g.charAt(h);for(;b.length<e;)b+="0";e&&"0"!==e&&(k+=d+b.substr(0,
e))}m.push(f?a.negPre:a.posPre);m.push(k);m.push(f?a.negSuf:a.posSuf);return m.join("")}function Xb(b,a,c){var d="";0>b&&(d="-",b=-b);for(b=""+b;b.length<a;)b="0"+b;c&&(b=b.substr(b.length-a));return d+b}function $(b,a,c,d){c=c||0;return function(e){e=e["get"+b]();if(0<c||e>-c)e+=c;0===e&&-12==c&&(e=12);return Xb(e,a,d)}}function vb(b,a){return function(c,d){var e=c["get"+b](),f=Ia(a?"SHORT"+b:b);return d[f][e]}}function Jc(b){function a(a){var b;if(b=a.match(c)){a=new Date(0);var f=0,g=0,k=b[8]?
a.setUTCFullYear:a.setFullYear,m=b[8]?a.setUTCHours:a.setHours;b[9]&&(f=U(b[9]+b[10]),g=U(b[9]+b[11]));k.call(a,U(b[1]),U(b[2])-1,U(b[3]));f=U(b[4]||0)-f;g=U(b[5]||0)-g;k=U(b[6]||0);b=Math.round(1E3*parseFloat("0."+(b[7]||0)));m.call(a,f,g,k,b)}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,e){var f="",g=[],k,m;e=e||"mediumDate";e=b.DATETIME_FORMATS[e]||e;v(c)&&(c=He.test(c)?U(c):a(c));ib(c)&&(c=new Date(c));
if(!ta(c))return c;for(;e;)(m=Ie.exec(e))?(g=g.concat(Ba.call(m,1)),e=g.pop()):(g.push(e),e=null);r(g,function(a){k=Je[a];f+=k?k(c,b.DATETIME_FORMATS):a.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return f}}function De(){return function(b){return na(b,!0)}}function Ee(){return function(b,a){if(!J(b)&&!v(b))return b;a=Infinity===Math.abs(Number(a))?Number(a):U(a);if(v(b))return a?0<=a?b.slice(0,a):b.slice(a,b.length):"";var c=[],d,e;a>b.length?a=b.length:a<-b.length&&(a=-b.length);0<a?(d=0,e=a):(d=
b.length+a,e=b.length);for(;d<e;d++)c.push(b[d]);return c}}function Lc(b){return function(a,c,d){function e(a,b){return Ua(b)?function(b,c){return a(c,b)}:a}function f(a,b){var c=typeof a,d=typeof b;return c==d?(ta(a)&&ta(b)&&(a=a.valueOf(),b=b.valueOf()),"string"==c&&(a=a.toLowerCase(),b=b.toLowerCase()),a===b?0:a<b?-1:1):c<d?-1:1}if(!Pa(a)||!c)return a;c=J(c)?c:[c];c=Vc(c,function(a){var c=!1,d=a||Qa;if(v(a)){if("+"==a.charAt(0)||"-"==a.charAt(0))c="-"==a.charAt(0),a=a.substring(1);d=b(a);if(d.constant){var g=
d();return e(function(a,b){return f(a[g],b[g])},c)}}return e(function(a,b){return f(d(a),d(b))},c)});for(var g=[],k=0;k<a.length;k++)g.push(a[k]);return g.sort(e(function(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(0!==e)return e}return 0},d))}}function ya(b){P(b)&&(b={link:b});b.restrict=b.restrict||"AC";return ba(b)}function Oc(b,a,c,d){function e(a,c){c=c?"-"+mb(c,"-"):"";d.setClass(b,(a?wb:xb)+c,(a?xb:wb)+c)}var f=this,g=b.parent().controller("form")||yb,k=0,m=f.$error={},h=[];f.$name=
a.name||a.ngForm;f.$dirty=!1;f.$pristine=!0;f.$valid=!0;f.$invalid=!1;g.$addControl(f);b.addClass(Oa);e(!0);f.$addControl=function(a){Da(a.$name,"input");h.push(a);a.$name&&(f[a.$name]=a)};f.$removeControl=function(a){a.$name&&f[a.$name]===a&&delete f[a.$name];r(m,function(b,c){f.$setValidity(c,!0,a)});Sa(h,a)};f.$setValidity=function(a,b,c){var d=m[a];if(b)d&&(Sa(d,c),d.length||(k--,k||(e(b),f.$valid=!0,f.$invalid=!1),m[a]=!1,e(!0,a),g.$setValidity(a,!0,f)));else{k||e(b);if(d){if(-1!=Ra(d,c))return}else m[a]=
d=[],k++,e(!1,a),g.$setValidity(a,!1,f);d.push(c);f.$valid=!1;f.$invalid=!0}};f.$setDirty=function(){d.removeClass(b,Oa);d.addClass(b,zb);f.$dirty=!0;f.$pristine=!1;g.$setDirty()};f.$setPristine=function(){d.removeClass(b,zb);d.addClass(b,Oa);f.$dirty=!1;f.$pristine=!0;r(h,function(a){a.$setPristine()})}}function sa(b,a,c,d){b.$setValidity(a,c);return c?d:t}function Pc(b,a){var c,d;if(a)for(c=0;c<a.length;++c)if(d=a[c],b[d])return!0;return!1}function Ke(b,a,c,d,e){T(e)&&(b.$$hasNativeValidators=!0,
b.$parsers.push(function(f){if(b.$error[a]||Pc(e,d)||!Pc(e,c))return f;b.$setValidity(a,!1)}))}function Ab(b,a,c,d,e,f){var g=a.prop(Le),k=a[0].placeholder,m={},h=K(a[0].type);d.$$validityState=g;if(!e.android){var l=!1;a.on("compositionstart",function(a){l=!0});a.on("compositionend",function(){l=!1;n()})}var n=function(e){if(!l){var f=a.val();if(Q&&"input"===(e||m).type&&a[0].placeholder!==k)k=a[0].placeholder;else if("password"!==h&&Ua(c.ngTrim||"T")&&(f=aa(f)),e=g&&d.$$hasNativeValidators,d.$viewValue!==
f||""===f&&e)b.$root.$$phase?d.$setViewValue(f):b.$apply(function(){d.$setViewValue(f)})}};if(e.hasEvent("input"))a.on("input",n);else{var p,q=function(){p||(p=f.defer(function(){n();p=null}))};a.on("keydown",function(a){a=a.keyCode;91===a||(15<a&&19>a||37<=a&&40>=a)||q()});if(e.hasEvent("paste"))a.on("paste cut",q)}a.on("change",n);d.$render=function(){a.val(d.$isEmpty(d.$viewValue)?"":d.$viewValue)};var s=c.ngPattern;s&&((e=s.match(/^\/(.*)\/([gim]*)$/))?(s=RegExp(e[1],e[2]),e=function(a){return sa(d,
"pattern",d.$isEmpty(a)||s.test(a),a)}):e=function(c){var e=b.$eval(s);if(!e||!e.test)throw C("ngPattern")("noregexp",s,e,ia(a));return sa(d,"pattern",d.$isEmpty(c)||e.test(c),c)},d.$formatters.push(e),d.$parsers.push(e));if(c.ngMinlength){var r=U(c.ngMinlength);e=function(a){return sa(d,"minlength",d.$isEmpty(a)||a.length>=r,a)};d.$parsers.push(e);d.$formatters.push(e)}if(c.ngMaxlength){var u=U(c.ngMaxlength);e=function(a){return sa(d,"maxlength",d.$isEmpty(a)||a.length<=u,a)};d.$parsers.push(e);
d.$formatters.push(e)}}function Yb(b,a){b="ngClass"+b;return["$animate",function(c){function d(a,b){var c=[],d=0;a:for(;d<a.length;d++){for(var e=a[d],l=0;l<b.length;l++)if(e==b[l])continue a;c.push(e)}return c}function e(a){if(!J(a)){if(v(a))return a.split(" ");if(T(a)){var b=[];r(a,function(a,c){a&&(b=b.concat(c.split(" ")))});return b}}return a}return{restrict:"AC",link:function(f,g,k){function m(a,b){var c=g.data("$classCounts")||{},d=[];r(a,function(a){if(0<b||c[a])c[a]=(c[a]||0)+b,c[a]===+(0<
b)&&d.push(a)});g.data("$classCounts",c);return d.join(" ")}function h(b){if(!0===a||f.$index%2===a){var h=e(b||[]);if(!l){var q=m(h,1);k.$addClass(q)}else if(!Aa(b,l)){var s=e(l),q=d(h,s),h=d(s,h),h=m(h,-1),q=m(q,1);0===q.length?c.removeClass(g,h):0===h.length?c.addClass(g,q):c.setClass(g,q,h)}}l=ha(b)}var l;f.$watch(k[b],h,!0);k.$observe("class",function(a){h(f.$eval(k[b]))});"ngClass"!==b&&f.$watch("$index",function(c,d){var g=c&1;if(g!==(d&1)){var h=e(f.$eval(k[b]));g===a?(g=m(h,1),k.$addClass(g)):
(g=m(h,-1),k.$removeClass(g))}})}}}]}var Le="validity",K=function(b){return v(b)?b.toLowerCase():b},kb=Object.prototype.hasOwnProperty,Ia=function(b){return v(b)?b.toUpperCase():b},Q,w,Ea,Ba=[].slice,Me=[].push,za=Object.prototype.toString,Ta=C("ng"),Va=W.angular||(W.angular={}),Ya,Ma,ma=["0","0","0"];Q=U((/msie (\d+)/.exec(K(navigator.userAgent))||[])[1]);isNaN(Q)&&(Q=U((/trident\/.*; rv:(\d+)/.exec(K(navigator.userAgent))||[])[1]));E.$inject=[];Qa.$inject=[];var J=function(){return P(Array.isArray)?
Array.isArray:function(b){return"[object Array]"===za.call(b)}}(),aa=function(){return String.prototype.trim?function(b){return v(b)?b.trim():b}:function(b){return v(b)?b.replace(/^\s\s*/,"").replace(/\s\s*$/,""):b}}();Ma=9>Q?function(b){b=b.nodeName?b:b[0];return b.scopeName&&"HTML"!=b.scopeName?Ia(b.scopeName+":"+b.nodeName):b.nodeName}:function(b){return b.nodeName?b.nodeName:b[0].nodeName};var Xa=function(){if(y(Xa.isActive_))return Xa.isActive_;var b=!(!X.querySelector("[ng-csp]")&&!X.querySelector("[data-ng-csp]"));
if(!b)try{new Function("")}catch(a){b=!0}return Xa.isActive_=b},Yc=/[A-Z]/g,ad={full:"1.2.26",major:1,minor:2,dot:26,codeName:"captivating-disinterest"};S.expando="ng339";var ab=S.cache={},ne=1,sb=W.document.addEventListener?function(b,a,c){b.addEventListener(a,c,!1)}:function(b,a,c){b.attachEvent("on"+a,c)},$a=W.document.removeEventListener?function(b,a,c){b.removeEventListener(a,c,!1)}:function(b,a,c){b.detachEvent("on"+a,c)};S._data=function(b){return this.cache[b[this.expando]]||{}};var ie=/([\:\-\_]+(.))/g,
je=/^moz([A-Z])/,Hb=C("jqLite"),ke=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Ib=/<|&#?\w+;/,le=/<([\w:]+)/,me=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ea={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ea.optgroup=ea.option;ea.tbody=ea.tfoot=ea.colgroup=ea.caption=ea.thead;ea.th=
ea.td;var La=S.prototype={ready:function(b){function a(){c||(c=!0,b())}var c=!1;"complete"===X.readyState?setTimeout(a):(this.on("DOMContentLoaded",a),S(W).on("load",a))},toString:function(){var b=[];r(this,function(a){b.push(""+a)});return"["+b.join(", ")+"]"},eq:function(b){return 0<=b?w(this[b]):w(this[this.length+b])},length:0,push:Me,sort:[].sort,splice:[].splice},qb={};r("multiple selected checked disabled readOnly required open".split(" "),function(b){qb[K(b)]=b});var rc={};r("input select option textarea button form details".split(" "),
function(b){rc[Ia(b)]=!0});r({data:Mb,removeData:Lb},function(b,a){S[a]=b});r({data:Mb,inheritedData:pb,scope:function(b){return w.data(b,"$scope")||pb(b.parentNode||b,["$isolateScope","$scope"])},isolateScope:function(b){return w.data(b,"$isolateScope")||w.data(b,"$isolateScopeNoTemplate")},controller:oc,injector:function(b){return pb(b,"$injector")},removeAttr:function(b,a){b.removeAttribute(a)},hasClass:Nb,css:function(b,a,c){a=Za(a);if(y(c))b.style[a]=c;else{var d;8>=Q&&(d=b.currentStyle&&b.currentStyle[a],
""===d&&(d="auto"));d=d||b.style[a];8>=Q&&(d=""===d?t:d);return d}},attr:function(b,a,c){var d=K(a);if(qb[d])if(y(c))c?(b[a]=!0,b.setAttribute(a,d)):(b[a]=!1,b.removeAttribute(d));else return b[a]||(b.attributes.getNamedItem(a)||E).specified?d:t;else if(y(c))b.setAttribute(a,c);else if(b.getAttribute)return b=b.getAttribute(a,2),null===b?t:b},prop:function(b,a,c){if(y(c))b[a]=c;else return b[a]},text:function(){function b(b,d){var e=a[b.nodeType];if(x(d))return e?b[e]:"";b[e]=d}var a=[];9>Q?(a[1]=
"innerText",a[3]="nodeValue"):a[1]=a[3]="textContent";b.$dv="";return b}(),val:function(b,a){if(x(a)){if("SELECT"===Ma(b)&&b.multiple){var c=[];r(b.options,function(a){a.selected&&c.push(a.value||a.text)});return 0===c.length?null:c}return b.value}b.value=a},html:function(b,a){if(x(a))return b.innerHTML;for(var c=0,d=b.childNodes;c<d.length;c++)Ja(d[c]);b.innerHTML=a},empty:pc},function(b,a){S.prototype[a]=function(a,d){var e,f,g=this.length;if(b!==pc&&(2==b.length&&b!==Nb&&b!==oc?a:d)===t){if(T(a)){for(e=
0;e<g;e++)if(b===Mb)b(this[e],a);else for(f in a)b(this[e],f,a[f]);return this}e=b.$dv;g=e===t?Math.min(g,1):g;for(f=0;f<g;f++){var k=b(this[f],a,d);e=e?e+k:k}return e}for(e=0;e<g;e++)b(this[e],a,d);return this}});r({removeData:Lb,dealoc:Ja,on:function a(c,d,e,f){if(y(f))throw Hb("onargs");var g=oa(c,"events"),k=oa(c,"handle");g||oa(c,"events",g={});k||oa(c,"handle",k=oe(c,g));r(d.split(" "),function(d){var f=g[d];if(!f){if("mouseenter"==d||"mouseleave"==d){var l=X.body.contains||X.body.compareDocumentPosition?
function(a,c){var d=9===a.nodeType?a.documentElement:a,e=c&&c.parentNode;return a===e||!!(e&&1===e.nodeType&&(d.contains?d.contains(e):a.compareDocumentPosition&&a.compareDocumentPosition(e)&16))}:function(a,c){if(c)for(;c=c.parentNode;)if(c===a)return!0;return!1};g[d]=[];a(c,{mouseleave:"mouseout",mouseenter:"mouseover"}[d],function(a){var c=a.relatedTarget;c&&(c===this||l(this,c))||k(a,d)})}else sb(c,d,k),g[d]=[];f=g[d]}f.push(e)})},off:nc,one:function(a,c,d){a=w(a);a.on(c,function f(){a.off(c,
d);a.off(c,f)});a.on(c,d)},replaceWith:function(a,c){var d,e=a.parentNode;Ja(a);r(new S(c),function(c){d?e.insertBefore(c,d.nextSibling):e.replaceChild(c,a);d=c})},children:function(a){var c=[];r(a.childNodes,function(a){1===a.nodeType&&c.push(a)});return c},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,c){r(new S(c),function(c){1!==a.nodeType&&11!==a.nodeType||a.appendChild(c)})},prepend:function(a,c){if(1===a.nodeType){var d=a.firstChild;r(new S(c),function(c){a.insertBefore(c,
d)})}},wrap:function(a,c){c=w(c)[0];var d=a.parentNode;d&&d.replaceChild(c,a);c.appendChild(a)},remove:function(a){Ja(a);var c=a.parentNode;c&&c.removeChild(a)},after:function(a,c){var d=a,e=a.parentNode;r(new S(c),function(a){e.insertBefore(a,d.nextSibling);d=a})},addClass:ob,removeClass:nb,toggleClass:function(a,c,d){c&&r(c.split(" "),function(c){var f=d;x(f)&&(f=!Nb(a,c));(f?ob:nb)(a,c)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){if(a.nextElementSibling)return a.nextElementSibling;
for(a=a.nextSibling;null!=a&&1!==a.nodeType;)a=a.nextSibling;return a},find:function(a,c){return a.getElementsByTagName?a.getElementsByTagName(c):[]},clone:Kb,triggerHandler:function(a,c,d){var e,f;e=c.type||c;var g=(oa(a,"events")||{})[e];g&&(e={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopPropagation:E,type:e,target:a},c.type&&(e=D(e,c)),c=ha(g),f=d?[e].concat(d):[e],r(c,function(c){c.apply(a,f)}))}},function(a,c){S.prototype[c]=
function(c,e,f){for(var g,k=0;k<this.length;k++)x(g)?(g=a(this[k],c,e,f),y(g)&&(g=w(g))):Jb(g,a(this[k],c,e,f));return y(g)?g:this};S.prototype.bind=S.prototype.on;S.prototype.unbind=S.prototype.off});bb.prototype={put:function(a,c){this[Ka(a,this.nextUid)]=c},get:function(a){return this[Ka(a,this.nextUid)]},remove:function(a){var c=this[a=Ka(a,this.nextUid)];delete this[a];return c}};var qe=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,re=/,/,se=/^\s*(_?)(\S+?)\1\s*$/,pe=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,
cb=C("$injector"),Ne=C("$animate"),Md=["$provide",function(a){this.$$selectors={};this.register=function(c,d){var e=c+"-animation";if(c&&"."!=c.charAt(0))throw Ne("notcsel",c);this.$$selectors[c.substr(1)]=e;a.factory(e,d)};this.classNameFilter=function(a){1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null);return this.$$classNameFilter};this.$get=["$timeout","$$asyncCallback",function(a,d){return{enter:function(a,c,g,k){g?g.after(a):(c&&c[0]||(c=g.parent()),c.append(a));k&&
d(k)},leave:function(a,c){a.remove();c&&d(c)},move:function(a,c,d,k){this.enter(a,c,d,k)},addClass:function(a,c,g){c=v(c)?c:J(c)?c.join(" "):"";r(a,function(a){ob(a,c)});g&&d(g)},removeClass:function(a,c,g){c=v(c)?c:J(c)?c.join(" "):"";r(a,function(a){nb(a,c)});g&&d(g)},setClass:function(a,c,g,k){r(a,function(a){ob(a,c);nb(a,g)});k&&d(k)},enabled:E}}]}],ja=C("$compile");ic.$inject=["$provide","$$sanitizeUriProvider"];var we=/^(x[\:\-_]|data[\:\-_])/i,yc=C("$interpolate"),Oe=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,
ze={http:80,https:443,ftp:21},Sb=C("$location");Ub.prototype=Tb.prototype=Bc.prototype={$$html5:!1,$$replace:!1,absUrl:tb("$$absUrl"),url:function(a){if(x(a))return this.$$url;a=Oe.exec(a);a[1]&&this.path(decodeURIComponent(a[1]));(a[2]||a[1])&&this.search(a[3]||"");this.hash(a[5]||"");return this},protocol:tb("$$protocol"),host:tb("$$host"),port:tb("$$port"),path:Cc("$$path",function(a){a=a?a.toString():"";return"/"==a.charAt(0)?a:"/"+a}),search:function(a,c){switch(arguments.length){case 0:return this.$$search;
case 1:if(v(a)||ib(a))a=a.toString(),this.$$search=ec(a);else if(T(a))r(a,function(c,e){null==c&&delete a[e]}),this.$$search=a;else throw Sb("isrcharg");break;default:x(c)||null===c?delete this.$$search[a]:this.$$search[a]=c}this.$$compose();return this},hash:Cc("$$hash",function(a){return a?a.toString():""}),replace:function(){this.$$replace=!0;return this}};var la=C("$parse"),Fc={},wa,Pe=Function.prototype.call,Qe=Function.prototype.apply,Qc=Function.prototype.bind,gb={"null":function(){return null},
"true":function(){return!0},"false":function(){return!1},undefined:E,"+":function(a,c,d,e){d=d(a,c);e=e(a,c);return y(d)?y(e)?d+e:d:y(e)?e:t},"-":function(a,c,d,e){d=d(a,c);e=e(a,c);return(y(d)?d:0)-(y(e)?e:0)},"*":function(a,c,d,e){return d(a,c)*e(a,c)},"/":function(a,c,d,e){return d(a,c)/e(a,c)},"%":function(a,c,d,e){return d(a,c)%e(a,c)},"^":function(a,c,d,e){return d(a,c)^e(a,c)},"=":E,"===":function(a,c,d,e){return d(a,c)===e(a,c)},"!==":function(a,c,d,e){return d(a,c)!==e(a,c)},"==":function(a,
c,d,e){return d(a,c)==e(a,c)},"!=":function(a,c,d,e){return d(a,c)!=e(a,c)},"<":function(a,c,d,e){return d(a,c)<e(a,c)},">":function(a,c,d,e){return d(a,c)>e(a,c)},"<=":function(a,c,d,e){return d(a,c)<=e(a,c)},">=":function(a,c,d,e){return d(a,c)>=e(a,c)},"&&":function(a,c,d,e){return d(a,c)&&e(a,c)},"||":function(a,c,d,e){return d(a,c)||e(a,c)},"&":function(a,c,d,e){return d(a,c)&e(a,c)},"|":function(a,c,d,e){return e(a,c)(a,c,d(a,c))},"!":function(a,c,d){return!d(a,c)}},Re={n:"\n",f:"\f",r:"\r",
t:"\t",v:"\v","'":"'",'"':'"'},Wb=function(a){this.options=a};Wb.prototype={constructor:Wb,lex:function(a){this.text=a;this.index=0;this.ch=t;this.lastCh=":";for(this.tokens=[];this.index<this.text.length;){this.ch=this.text.charAt(this.index);if(this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent();else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch}),
this.index++;else if(this.isWhitespace(this.ch)){this.index++;continue}else{a=this.ch+this.peek();var c=a+this.peek(2),d=gb[this.ch],e=gb[a],f=gb[c];f?(this.tokens.push({index:this.index,text:c,fn:f}),this.index+=3):e?(this.tokens.push({index:this.index,text:a,fn:e}),this.index+=2):d?(this.tokens.push({index:this.index,text:this.ch,fn:d}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},is:function(a){return-1!==a.indexOf(this.ch)},
was:function(a){return-1!==a.indexOf(this.lastCh)},peek:function(a){a=a||1;return this.index+a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return"0"<=a&&"9">=a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||"\u00a0"===a},isIdent:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,c,d){d=d||this.index;c=y(c)?"s "+c+"-"+this.index+" ["+
this.text.substring(c,d)+"]":" "+d;throw la("lexerr",a,c,this.text);},readNumber:function(){for(var a="",c=this.index;this.index<this.text.length;){var d=K(this.text.charAt(this.index));if("."==d||this.isNumber(d))a+=d;else{var e=this.peek();if("e"==d&&this.isExpOperator(e))a+=d;else if(this.isExpOperator(d)&&e&&this.isNumber(e)&&"e"==a.charAt(a.length-1))a+=d;else if(!this.isExpOperator(d)||e&&this.isNumber(e)||"e"!=a.charAt(a.length-1))break;else this.throwError("Invalid exponent")}this.index++}a*=
1;this.tokens.push({index:c,text:a,literal:!0,constant:!0,fn:function(){return a}})},readIdent:function(){for(var a=this,c="",d=this.index,e,f,g,k;this.index<this.text.length;){k=this.text.charAt(this.index);if("."===k||this.isIdent(k)||this.isNumber(k))"."===k&&(e=this.index),c+=k;else break;this.index++}if(e)for(f=this.index;f<this.text.length;){k=this.text.charAt(f);if("("===k){g=c.substr(e-d+1);c=c.substr(0,e-d);this.index=f;break}if(this.isWhitespace(k))f++;else break}d={index:d,text:c};if(gb.hasOwnProperty(c))d.fn=
gb[c],d.literal=!0,d.constant=!0;else{var m=Ec(c,this.options,this.text);d.fn=D(function(a,c){return m(a,c)},{assign:function(d,e){return ub(d,c,e,a.text,a.options)}})}this.tokens.push(d);g&&(this.tokens.push({index:e,text:"."}),this.tokens.push({index:e+1,text:g}))},readString:function(a){var c=this.index;this.index++;for(var d="",e=a,f=!1;this.index<this.text.length;){var g=this.text.charAt(this.index),e=e+g;if(f)"u"===g?(f=this.text.substring(this.index+1,this.index+5),f.match(/[\da-f]{4}/i)||
this.throwError("Invalid unicode escape [\\u"+f+"]"),this.index+=4,d+=String.fromCharCode(parseInt(f,16))):d+=Re[g]||g,f=!1;else if("\\"===g)f=!0;else{if(g===a){this.index++;this.tokens.push({index:c,text:e,string:d,literal:!0,constant:!0,fn:function(){return d}});return}d+=g}this.index++}this.throwError("Unterminated quote",c)}};var fb=function(a,c,d){this.lexer=a;this.$filter=c;this.options=d};fb.ZERO=D(function(){return 0},{constant:!0});fb.prototype={constructor:fb,parse:function(a){this.text=
a;this.tokens=this.lexer.lex(a);a=this.statements();0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]);a.literal=!!a.literal;a.constant=!!a.constant;return a},primary:function(){var a;if(this.expect("("))a=this.filterChain(),this.consume(")");else if(this.expect("["))a=this.arrayDeclaration();else if(this.expect("{"))a=this.object();else{var c=this.expect();(a=c.fn)||this.throwError("not a primary expression",c);a.literal=!!c.literal;a.constant=!!c.constant}for(var d;c=
this.expect("(","[",".");)"("===c.text?(a=this.functionCall(a,d),d=null):"["===c.text?(d=a,a=this.objectIndex(a)):"."===c.text?(d=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");return a},throwError:function(a,c){throw la("syntax",c.text,a,c.index+1,this.text,this.text.substring(c.index));},peekToken:function(){if(0===this.tokens.length)throw la("ueoe",this.text);return this.tokens[0]},peek:function(a,c,d,e){if(0<this.tokens.length){var f=this.tokens[0],g=f.text;if(g===a||g===c||g===d||g===
e||!(a||c||d||e))return f}return!1},expect:function(a,c,d,e){return(a=this.peek(a,c,d,e))?(this.tokens.shift(),a):!1},consume:function(a){this.expect(a)||this.throwError("is unexpected, expecting ["+a+"]",this.peek())},unaryFn:function(a,c){return D(function(d,e){return a(d,e,c)},{constant:c.constant})},ternaryFn:function(a,c,d){return D(function(e,f){return a(e,f)?c(e,f):d(e,f)},{constant:a.constant&&c.constant&&d.constant})},binaryFn:function(a,c,d){return D(function(e,f){return c(e,f,a,d)},{constant:a.constant&&
d.constant})},statements:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";"))return 1===a.length?a[0]:function(c,d){for(var e,f=0;f<a.length;f++){var g=a[f];g&&(e=g(c,d))}return e}},filterChain:function(){for(var a=this.expression(),c;;)if(c=this.expect("|"))a=this.binaryFn(a,c.fn,this.filter());else return a},filter:function(){for(var a=this.expect(),c=this.$filter(a.text),d=[];;)if(a=this.expect(":"))d.push(this.expression());
else{var e=function(a,e,k){k=[k];for(var m=0;m<d.length;m++)k.push(d[m](a,e));return c.apply(a,k)};return function(){return e}}},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary(),c,d;return(d=this.expect("="))?(a.assign||this.throwError("implies assignment but ["+this.text.substring(0,d.index)+"] can not be assigned to",d),c=this.ternary(),function(d,f){return a.assign(d,c(d,f),f)}):a},ternary:function(){var a=this.logicalOR(),c,d;if(this.expect("?")){c=this.assignment();
if(d=this.expect(":"))return this.ternaryFn(a,c,this.assignment());this.throwError("expected :",d)}else return a},logicalOR:function(){for(var a=this.logicalAND(),c;;)if(c=this.expect("||"))a=this.binaryFn(a,c.fn,this.logicalAND());else return a},logicalAND:function(){var a=this.equality(),c;if(c=this.expect("&&"))a=this.binaryFn(a,c.fn,this.logicalAND());return a},equality:function(){var a=this.relational(),c;if(c=this.expect("==","!=","===","!=="))a=this.binaryFn(a,c.fn,this.equality());return a},
relational:function(){var a=this.additive(),c;if(c=this.expect("<",">","<=",">="))a=this.binaryFn(a,c.fn,this.relational());return a},additive:function(){for(var a=this.multiplicative(),c;c=this.expect("+","-");)a=this.binaryFn(a,c.fn,this.multiplicative());return a},multiplicative:function(){for(var a=this.unary(),c;c=this.expect("*","/","%");)a=this.binaryFn(a,c.fn,this.unary());return a},unary:function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn(fb.ZERO,a.fn,
this.unary()):(a=this.expect("!"))?this.unaryFn(a.fn,this.unary()):this.primary()},fieldAccess:function(a){var c=this,d=this.expect().text,e=Ec(d,this.options,this.text);return D(function(c,d,k){return e(k||a(c,d))},{assign:function(e,g,k){(k=a(e,k))||a.assign(e,k={});return ub(k,d,g,c.text,c.options)}})},objectIndex:function(a){var c=this,d=this.expression();this.consume("]");return D(function(e,f){var g=a(e,f),k=d(e,f),m;ka(k,c.text);if(!g)return t;(g=va(g[k],c.text))&&(g.then&&c.options.unwrapPromises)&&
(m=g,"$$v"in g||(m.$$v=t,m.then(function(a){m.$$v=a})),g=g.$$v);return g},{assign:function(e,f,g){var k=ka(d(e,g),c.text);(g=va(a(e,g),c.text))||a.assign(e,g={});return g[k]=f}})},functionCall:function(a,c){var d=[];if(")"!==this.peekToken().text){do d.push(this.expression());while(this.expect(","))}this.consume(")");var e=this;return function(f,g){for(var k=[],m=c?c(f,g):f,h=0;h<d.length;h++)k.push(va(d[h](f,g),e.text));h=a(f,g,m)||E;va(m,e.text);var l=e.text;if(h){if(h.constructor===h)throw la("isecfn",
l);if(h===Pe||h===Qe||Qc&&h===Qc)throw la("isecff",l);}k=h.apply?h.apply(m,k):h(k[0],k[1],k[2],k[3],k[4]);return va(k,e.text)}},arrayDeclaration:function(){var a=[],c=!0;if("]"!==this.peekToken().text){do{if(this.peek("]"))break;var d=this.expression();a.push(d);d.constant||(c=!1)}while(this.expect(","))}this.consume("]");return D(function(c,d){for(var g=[],k=0;k<a.length;k++)g.push(a[k](c,d));return g},{literal:!0,constant:c})},object:function(){var a=[],c=!0;if("}"!==this.peekToken().text){do{if(this.peek("}"))break;
var d=this.expect(),d=d.string||d.text;this.consume(":");var e=this.expression();a.push({key:d,value:e});e.constant||(c=!1)}while(this.expect(","))}this.consume("}");return D(function(c,d){for(var e={},m=0;m<a.length;m++){var h=a[m];e[h.key]=h.value(c,d)}return e},{literal:!0,constant:c})}};var Vb={},xa=C("$sce"),ga={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Y=X.createElement("a"),Hc=ua(W.location.href,!0);mc.$inject=["$provide"];Ic.$inject=["$locale"];Kc.$inject=["$locale"];
var Nc=".",Je={yyyy:$("FullYear",4),yy:$("FullYear",2,0,!0),y:$("FullYear",1),MMMM:vb("Month"),MMM:vb("Month",!0),MM:$("Month",2,1),M:$("Month",1,1),dd:$("Date",2),d:$("Date",1),HH:$("Hours",2),H:$("Hours",1),hh:$("Hours",2,-12),h:$("Hours",1,-12),mm:$("Minutes",2),m:$("Minutes",1),ss:$("Seconds",2),s:$("Seconds",1),sss:$("Milliseconds",3),EEEE:vb("Day"),EEE:vb("Day",!0),a:function(a,c){return 12>a.getHours()?c.AMPMS[0]:c.AMPMS[1]},Z:function(a){a=-1*a.getTimezoneOffset();return a=(0<=a?"+":"")+(Xb(Math[0<
a?"floor":"ceil"](a/60),2)+Xb(Math.abs(a%60),2))}},Ie=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,He=/^\-?\d+$/;Jc.$inject=["$locale"];var Fe=ba(K),Ge=ba(Ia);Lc.$inject=["$parse"];var dd=ba({restrict:"E",compile:function(a,c){8>=Q&&(c.href||c.name||c.$set("href",""),a.append(X.createComment("IE fix")));if(!c.href&&!c.xlinkHref&&!c.name)return function(a,c){var f="[object SVGAnimatedString]"===za.call(c.prop("href"))?"xlink:href":"href";c.on("click",function(a){c.attr(f)||
a.preventDefault()})}}}),Fb={};r(qb,function(a,c){if("multiple"!=a){var d=pa("ng-"+c);Fb[d]=function(){return{priority:100,link:function(a,f,g){a.$watch(g[d],function(a){g.$set(c,!!a)})}}}}});r(["src","srcset","href"],function(a){var c=pa("ng-"+a);Fb[c]=function(){return{priority:99,link:function(d,e,f){var g=a,k=a;"href"===a&&"[object SVGAnimatedString]"===za.call(e.prop("href"))&&(k="xlinkHref",f.$attr[k]="xlink:href",g=null);f.$observe(c,function(c){c?(f.$set(k,c),Q&&g&&e.prop(g,f[k])):"href"===
a&&f.$set(k,null)})}}}});var yb={$addControl:E,$removeControl:E,$setValidity:E,$setDirty:E,$setPristine:E};Oc.$inject=["$element","$attrs","$scope","$animate"];var Rc=function(a){return["$timeout",function(c){return{name:"form",restrict:a?"EAC":"E",controller:Oc,compile:function(){return{pre:function(a,e,f,g){if(!f.action){var k=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1};sb(e[0],"submit",k);e.on("$destroy",function(){c(function(){$a(e[0],"submit",k)},0,!1)})}var m=e.parent().controller("form"),
h=f.name||f.ngForm;h&&ub(a,h,g,h);if(m)e.on("$destroy",function(){m.$removeControl(g);h&&ub(a,h,t,h);D(g,yb)})}}}}}]},ed=Rc(),rd=Rc(!0),Se=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Te=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Ue=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Sc={text:Ab,number:function(a,c,d,e,f,g){Ab(a,c,d,e,f,g);e.$parsers.push(function(a){var c=e.$isEmpty(a);if(c||Ue.test(a))return e.$setValidity("number",
!0),""===a?null:c?a:parseFloat(a);e.$setValidity("number",!1);return t});Ke(e,"number",Ve,null,e.$$validityState);e.$formatters.push(function(a){return e.$isEmpty(a)?"":""+a});d.min&&(a=function(a){var c=parseFloat(d.min);return sa(e,"min",e.$isEmpty(a)||a>=c,a)},e.$parsers.push(a),e.$formatters.push(a));d.max&&(a=function(a){var c=parseFloat(d.max);return sa(e,"max",e.$isEmpty(a)||a<=c,a)},e.$parsers.push(a),e.$formatters.push(a));e.$formatters.push(function(a){return sa(e,"number",e.$isEmpty(a)||
ib(a),a)})},url:function(a,c,d,e,f,g){Ab(a,c,d,e,f,g);a=function(a){return sa(e,"url",e.$isEmpty(a)||Se.test(a),a)};e.$formatters.push(a);e.$parsers.push(a)},email:function(a,c,d,e,f,g){Ab(a,c,d,e,f,g);a=function(a){return sa(e,"email",e.$isEmpty(a)||Te.test(a),a)};e.$formatters.push(a);e.$parsers.push(a)},radio:function(a,c,d,e){x(d.name)&&c.attr("name",hb());c.on("click",function(){c[0].checked&&a.$apply(function(){e.$setViewValue(d.value)})});e.$render=function(){c[0].checked=d.value==e.$viewValue};
d.$observe("value",e.$render)},checkbox:function(a,c,d,e){var f=d.ngTrueValue,g=d.ngFalseValue;v(f)||(f=!0);v(g)||(g=!1);c.on("click",function(){a.$apply(function(){e.$setViewValue(c[0].checked)})});e.$render=function(){c[0].checked=e.$viewValue};e.$isEmpty=function(a){return a!==f};e.$formatters.push(function(a){return a===f});e.$parsers.push(function(a){return a?f:g})},hidden:E,button:E,submit:E,reset:E,file:E},Ve=["badInput"],jc=["$browser","$sniffer",function(a,c){return{restrict:"E",require:"?ngModel",
link:function(d,e,f,g){g&&(Sc[K(f.type)]||Sc.text)(d,e,f,g,c,a)}}}],wb="ng-valid",xb="ng-invalid",Oa="ng-pristine",zb="ng-dirty",We=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate",function(a,c,d,e,f,g){function k(a,c){c=c?"-"+mb(c,"-"):"";g.removeClass(e,(a?xb:wb)+c);g.addClass(e,(a?wb:xb)+c)}this.$modelValue=this.$viewValue=Number.NaN;this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$name=
d.name;var m=f(d.ngModel),h=m.assign;if(!h)throw C("ngModel")("nonassign",d.ngModel,ia(e));this.$render=E;this.$isEmpty=function(a){return x(a)||""===a||null===a||a!==a};var l=e.inheritedData("$formController")||yb,n=0,p=this.$error={};e.addClass(Oa);k(!0);this.$setValidity=function(a,c){p[a]!==!c&&(c?(p[a]&&n--,n||(k(!0),this.$valid=!0,this.$invalid=!1)):(k(!1),this.$invalid=!0,this.$valid=!1,n++),p[a]=!c,k(c,a),l.$setValidity(a,c,this))};this.$setPristine=function(){this.$dirty=!1;this.$pristine=
!0;g.removeClass(e,zb);g.addClass(e,Oa)};this.$setViewValue=function(d){this.$viewValue=d;this.$pristine&&(this.$dirty=!0,this.$pristine=!1,g.removeClass(e,Oa),g.addClass(e,zb),l.$setDirty());r(this.$parsers,function(a){d=a(d)});this.$modelValue!==d&&(this.$modelValue=d,h(a,d),r(this.$viewChangeListeners,function(a){try{a()}catch(d){c(d)}}))};var q=this;a.$watch(function(){var c=m(a);if(q.$modelValue!==c){var d=q.$formatters,e=d.length;for(q.$modelValue=c;e--;)c=d[e](c);q.$viewValue!==c&&(q.$viewValue=
c,q.$render())}return c})}],Gd=function(){return{require:["ngModel","^?form"],controller:We,link:function(a,c,d,e){var f=e[0],g=e[1]||yb;g.$addControl(f);a.$on("$destroy",function(){g.$removeControl(f)})}}},Id=ba({require:"ngModel",link:function(a,c,d,e){e.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),kc=function(){return{require:"?ngModel",link:function(a,c,d,e){if(e){d.required=!0;var f=function(a){if(d.required&&e.$isEmpty(a))e.$setValidity("required",!1);else return e.$setValidity("required",
!0),a};e.$formatters.push(f);e.$parsers.unshift(f);d.$observe("required",function(){f(e.$viewValue)})}}}},Hd=function(){return{require:"ngModel",link:function(a,c,d,e){var f=(a=/\/(.*)\//.exec(d.ngList))&&RegExp(a[1])||d.ngList||",";e.$parsers.push(function(a){if(!x(a)){var c=[];a&&r(a.split(f),function(a){a&&c.push(aa(a))});return c}});e.$formatters.push(function(a){return J(a)?a.join(", "):t});e.$isEmpty=function(a){return!a||!a.length}}}},Xe=/^(true|false|\d+)$/,Jd=function(){return{priority:100,
compile:function(a,c){return Xe.test(c.ngValue)?function(a,c,f){f.$set("value",a.$eval(f.ngValue))}:function(a,c,f){a.$watch(f.ngValue,function(a){f.$set("value",a)})}}}},jd=ya({compile:function(a){a.addClass("ng-binding");return function(a,d,e){d.data("$binding",e.ngBind);a.$watch(e.ngBind,function(a){d.text(a==t?"":a)})}}}),ld=["$interpolate",function(a){return function(c,d,e){c=a(d.attr(e.$attr.ngBindTemplate));d.addClass("ng-binding").data("$binding",c);e.$observe("ngBindTemplate",function(a){d.text(a)})}}],
kd=["$sce","$parse",function(a,c){return{compile:function(d){d.addClass("ng-binding");return function(d,f,g){f.data("$binding",g.ngBindHtml);var k=c(g.ngBindHtml);d.$watch(function(){return(k(d)||"").toString()},function(c){f.html(a.getTrustedHtml(k(d))||"")})}}}}],md=Yb("",!0),od=Yb("Odd",0),nd=Yb("Even",1),pd=ya({compile:function(a,c){c.$set("ngCloak",t);a.removeClass("ng-cloak")}}),qd=[function(){return{scope:!0,controller:"@",priority:500}}],lc={},Ye={blur:!0,focus:!0};r("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),
function(a){var c=pa("ng-"+a);lc[c]=["$parse","$rootScope",function(d,e){return{compile:function(f,g){var k=d(g[c]);return function(c,d){d.on(a,function(d){var f=function(){k(c,{$event:d})};Ye[a]&&e.$$phase?c.$evalAsync(f):c.$apply(f)})}}}}]});var td=["$animate",function(a){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var k,m,h;c.$watch(e.ngIf,function(f){Ua(f)?m||(m=c.$new(),g(m,function(c){c[c.length++]=X.createComment(" end ngIf: "+e.ngIf+
" ");k={clone:c};a.enter(c,d.parent(),d)})):(h&&(h.remove(),h=null),m&&(m.$destroy(),m=null),k&&(h=Eb(k.clone),a.leave(h,function(){h=null}),k=null))})}}}],ud=["$http","$templateCache","$anchorScroll","$animate","$sce",function(a,c,d,e,f){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Va.noop,compile:function(g,k){var m=k.ngInclude||k.src,h=k.onload||"",l=k.autoscroll;return function(g,k,q,r,F){var u=0,t,w,R,z=function(){w&&(w.remove(),w=null);t&&(t.$destroy(),t=null);
R&&(e.leave(R,function(){w=null}),w=R,R=null)};g.$watch(f.parseAsResourceUrl(m),function(f){var m=function(){!y(l)||l&&!g.$eval(l)||d()},q=++u;f?(a.get(f,{cache:c}).success(function(a){if(q===u){var c=g.$new();r.template=a;a=F(c,function(a){z();e.enter(a,null,k,m)});t=c;R=a;t.$emit("$includeContentLoaded");g.$eval(h)}}).error(function(){q===u&&z()}),g.$emit("$includeContentRequested")):(z(),r.template=null)})}}}}],Kd=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",
link:function(c,d,e,f){d.html(f.template);a(d.contents())(c)}}}],vd=ya({priority:450,compile:function(){return{pre:function(a,c,d){a.$eval(d.ngInit)}}}}),wd=ya({terminal:!0,priority:1E3}),xd=["$locale","$interpolate",function(a,c){var d=/{}/g;return{restrict:"EA",link:function(e,f,g){var k=g.count,m=g.$attr.when&&f.attr(g.$attr.when),h=g.offset||0,l=e.$eval(m)||{},n={},p=c.startSymbol(),q=c.endSymbol(),s=/^when(Minus)?(.+)$/;r(g,function(a,c){s.test(c)&&(l[K(c.replace("when","").replace("Minus","-"))]=
f.attr(g.$attr[c]))});r(l,function(a,e){n[e]=c(a.replace(d,p+k+"-"+h+q))});e.$watch(function(){var c=parseFloat(e.$eval(k));if(isNaN(c))return"";c in l||(c=a.pluralCat(c-h));return n[c](e,f,!0)},function(a){f.text(a)})}}}],yd=["$parse","$animate",function(a,c){var d=C("ngRepeat");return{transclude:"element",priority:1E3,terminal:!0,$$tlb:!0,link:function(e,f,g,k,m){var h=g.ngRepeat,l=h.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),n,p,q,s,t,u,A={$id:Ka};if(!l)throw d("iexp",
h);g=l[1];k=l[2];(l=l[3])?(n=a(l),p=function(a,c,d){u&&(A[u]=a);A[t]=c;A.$index=d;return n(e,A)}):(q=function(a,c){return Ka(c)},s=function(a){return a});l=g.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/);if(!l)throw d("iidexp",g);t=l[3]||l[1];u=l[2];var y={};e.$watchCollection(k,function(a){var g,k,l=f[0],n,A={},B,I,H,v,E,C,x,J=[];if(Pa(a))C=a,E=p||q;else{E=p||s;C=[];for(H in a)a.hasOwnProperty(H)&&"$"!=H.charAt(0)&&C.push(H);C.sort()}B=C.length;k=J.length=C.length;for(g=0;g<k;g++)if(H=a===
C?g:C[g],v=a[H],n=E(H,v,g),Da(n,"`track by` id"),y.hasOwnProperty(n))x=y[n],delete y[n],A[n]=x,J[g]=x;else{if(A.hasOwnProperty(n))throw r(J,function(a){a&&a.scope&&(y[a.id]=a)}),d("dupes",h,n,na(v));J[g]={id:n};A[n]=!1}for(H in y)y.hasOwnProperty(H)&&(x=y[H],g=Eb(x.clone),c.leave(g),r(g,function(a){a.$$NG_REMOVED=!0}),x.scope.$destroy());g=0;for(k=C.length;g<k;g++){H=a===C?g:C[g];v=a[H];x=J[g];J[g-1]&&(l=J[g-1].clone[J[g-1].clone.length-1]);if(x.scope){I=x.scope;n=l;do n=n.nextSibling;while(n&&n.$$NG_REMOVED);
x.clone[0]!=n&&c.move(Eb(x.clone),null,w(l));l=x.clone[x.clone.length-1]}else I=e.$new();I[t]=v;u&&(I[u]=H);I.$index=g;I.$first=0===g;I.$last=g===B-1;I.$middle=!(I.$first||I.$last);I.$odd=!(I.$even=0===(g&1));x.scope||m(I,function(a){a[a.length++]=X.createComment(" end ngRepeat: "+h+" ");c.enter(a,null,w(l));l=a;x.scope=I;x.clone=a;A[x.id]=x})}y=A})}}}],zd=["$animate",function(a){return function(c,d,e){c.$watch(e.ngShow,function(c){a[Ua(c)?"removeClass":"addClass"](d,"ng-hide")})}}],sd=["$animate",
function(a){return function(c,d,e){c.$watch(e.ngHide,function(c){a[Ua(c)?"addClass":"removeClass"](d,"ng-hide")})}}],Ad=ya(function(a,c,d){a.$watch(d.ngStyle,function(a,d){d&&a!==d&&r(d,function(a,d){c.css(d,"")});a&&c.css(a)},!0)}),Bd=["$animate",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,d,e,f){var g=[],k=[],m=[],h=[];c.$watch(e.ngSwitch||e.on,function(d){var n,p;n=0;for(p=m.length;n<p;++n)m[n].remove();n=m.length=0;for(p=
h.length;n<p;++n){var q=k[n];h[n].$destroy();m[n]=q;a.leave(q,function(){m.splice(n,1)})}k.length=0;h.length=0;if(g=f.cases["!"+d]||f.cases["?"])c.$eval(e.change),r(g,function(d){var e=c.$new();h.push(e);d.transclude(e,function(c){var e=d.element;k.push(c);a.enter(c,e.parent(),e)})})})}}}],Cd=ya({transclude:"element",priority:800,require:"^ngSwitch",link:function(a,c,d,e,f){e.cases["!"+d.ngSwitchWhen]=e.cases["!"+d.ngSwitchWhen]||[];e.cases["!"+d.ngSwitchWhen].push({transclude:f,element:c})}}),Dd=
ya({transclude:"element",priority:800,require:"^ngSwitch",link:function(a,c,d,e,f){e.cases["?"]=e.cases["?"]||[];e.cases["?"].push({transclude:f,element:c})}}),Fd=ya({link:function(a,c,d,e,f){if(!f)throw C("ngTransclude")("orphan",ia(c));f(function(a){c.empty();c.append(a)})}}),fd=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(c,d){"text/ng-template"==d.type&&a.put(d.id,c[0].text)}}}],Ze=C("ngOptions"),Ed=ba({terminal:!0}),gd=["$compile","$parse",function(a,c){var d=
/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,e={$setViewValue:E};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,c,d){var m=this,h={},l=e,n;m.databound=d.ngModel;m.init=function(a,c,d){l=a;n=d};m.addOption=function(c){Da(c,'"option value"');h[c]=!0;l.$viewValue==c&&(a.val(c),n.parent()&&n.remove())};
m.removeOption=function(a){this.hasOption(a)&&(delete h[a],l.$viewValue==a&&this.renderUnknownOption(a))};m.renderUnknownOption=function(c){c="? "+Ka(c)+" ?";n.val(c);a.prepend(n);a.val(c);n.prop("selected",!0)};m.hasOption=function(a){return h.hasOwnProperty(a)};c.$on("$destroy",function(){m.renderUnknownOption=E})}],link:function(e,g,k,m){function h(a,c,d,e){d.$render=function(){var a=d.$viewValue;e.hasOption(a)?(v.parent()&&v.remove(),c.val(a),""===a&&u.prop("selected",!0)):x(a)&&u?c.val(""):e.renderUnknownOption(a)};
c.on("change",function(){a.$apply(function(){v.parent()&&v.remove();d.$setViewValue(c.val())})})}function l(a,c,d){var e;d.$render=function(){var a=new bb(d.$viewValue);r(c.find("option"),function(c){c.selected=y(a.get(c.value))})};a.$watch(function(){Aa(e,d.$viewValue)||(e=ha(d.$viewValue),d.$render())});c.on("change",function(){a.$apply(function(){var a=[];r(c.find("option"),function(c){c.selected&&a.push(c.value)});d.$setViewValue(a)})})}function n(e,f,g){function k(){var a={"":[]},c=[""],d,h,
s,t,v;s=g.$modelValue;t=w(e)||[];var E=n?Zb(t):t,I,M,B;M={};B=!1;if(q)if(h=g.$modelValue,x&&J(h))for(B=new bb([]),d={},v=0;v<h.length;v++)d[m]=h[v],B.put(x(e,d),h[v]);else B=new bb(h);v=B;var D,K;for(B=0;I=E.length,B<I;B++){h=B;if(n){h=E[B];if("$"===h.charAt(0))continue;M[n]=h}M[m]=t[h];d=r(e,M)||"";(h=a[d])||(h=a[d]=[],c.push(d));q?d=y(v.remove(x?x(e,M):u(e,M))):(x?(d={},d[m]=s,d=x(e,d)===x(e,M)):d=s===u(e,M),v=v||d);D=l(e,M);D=y(D)?D:"";h.push({id:x?x(e,M):n?E[B]:B,label:D,selected:d})}q||(F||null===
s?a[""].unshift({id:"",label:"",selected:!v}):v||a[""].unshift({id:"?",label:"",selected:!0}));M=0;for(E=c.length;M<E;M++){d=c[M];h=a[d];z.length<=M?(s={element:C.clone().attr("label",d),label:h.label},t=[s],z.push(t),f.append(s.element)):(t=z[M],s=t[0],s.label!=d&&s.element.attr("label",s.label=d));D=null;B=0;for(I=h.length;B<I;B++)d=h[B],(v=t[B+1])?(D=v.element,v.label!==d.label&&D.text(v.label=d.label),v.id!==d.id&&D.val(v.id=d.id),D[0].selected!==d.selected&&(D.prop("selected",v.selected=d.selected),
Q&&D.prop("selected",v.selected))):(""===d.id&&F?K=F:(K=A.clone()).val(d.id).prop("selected",d.selected).attr("selected",d.selected).text(d.label),t.push({element:K,label:d.label,id:d.id,selected:d.selected}),p.addOption(d.label,K),D?D.after(K):s.element.append(K),D=K);for(B++;t.length>B;)d=t.pop(),p.removeOption(d.label),d.element.remove()}for(;z.length>M;)z.pop()[0].element.remove()}var h;if(!(h=s.match(d)))throw Ze("iexp",s,ia(f));var l=c(h[2]||h[1]),m=h[4]||h[6],n=h[5],r=c(h[3]||""),u=c(h[2]?
h[1]:m),w=c(h[7]),x=h[8]?c(h[8]):null,z=[[{element:f,label:""}]];F&&(a(F)(e),F.removeClass("ng-scope"),F.remove());f.empty();f.on("change",function(){e.$apply(function(){var a,c=w(e)||[],d={},h,l,p,r,s,v,y;if(q)for(l=[],r=0,v=z.length;r<v;r++)for(a=z[r],p=1,s=a.length;p<s;p++){if((h=a[p].element)[0].selected){h=h.val();n&&(d[n]=h);if(x)for(y=0;y<c.length&&(d[m]=c[y],x(e,d)!=h);y++);else d[m]=c[h];l.push(u(e,d))}}else if(h=f.val(),"?"==h)l=t;else if(""===h)l=null;else if(x)for(y=0;y<c.length;y++){if(d[m]=
c[y],x(e,d)==h){l=u(e,d);break}}else d[m]=c[h],n&&(d[n]=h),l=u(e,d);g.$setViewValue(l);k()})});g.$render=k;e.$watchCollection(w,k);e.$watchCollection(function(){var a={},c=w(e);if(c){for(var d=Array(c.length),f=0,g=c.length;f<g;f++)a[m]=c[f],d[f]=l(e,a);return d}},k);q&&e.$watchCollection(function(){return g.$modelValue},k)}if(m[1]){var p=m[0];m=m[1];var q=k.multiple,s=k.ngOptions,F=!1,u,A=w(X.createElement("option")),C=w(X.createElement("optgroup")),v=A.clone();k=0;for(var z=g.children(),E=z.length;k<
E;k++)if(""===z[k].value){u=F=z.eq(k);break}p.init(m,F,v);q&&(m.$isEmpty=function(a){return!a||0===a.length});s?n(e,g,m):q?l(e,g,m):h(e,g,m,p)}}}}],id=["$interpolate",function(a){var c={addOption:E,removeOption:E};return{restrict:"E",priority:100,compile:function(d,e){if(x(e.value)){var f=a(d.text(),!0);f||e.$set("value",d.text())}return function(a,d,e){var h=d.parent(),l=h.data("$selectController")||h.parent().data("$selectController");l&&l.databound?d.prop("selected",!1):l=c;f?a.$watch(f,function(a,
c){e.$set("value",a);a!==c&&l.removeOption(c);l.addOption(a)}):l.addOption(e.value);d.on("$destroy",function(){l.removeOption(e.value)})}}}}],hd=ba({restrict:"E",terminal:!0});W.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):((Ea=W.jQuery)&&Ea.fn.on?(w=Ea,D(Ea.fn,{scope:La.scope,isolateScope:La.isolateScope,controller:La.controller,injector:La.injector,inheritedData:La.inheritedData}),Gb("remove",!0,!0,!1),Gb("empty",!1,!1,!1),Gb("html",!1,!1,!0)):w=S,Va.element=w,
$c(Va),w(X).ready(function(){Xc(X,fc)}))})(window,document);!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}.ng-hide-add-active,.ng-hide-remove{display:block!important;}</style>');
//# sourceMappingURL=angular.min.js.map

; browserify_shim__define__module__export__(typeof angular != "undefined" ? angular : window.angular);

}).call(global, undefined, undefined, undefined, undefined, function defineExport(ex) { module.exports = ex; });

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],"/home/codio/workspace/bower_components/famous-angular/dist/famous-angular.min.js":[function(require,module,exports){
(function (global){

; require("famous-polyfills");
require("/home/codio/workspace/bower_components/famous/dist/famous-global.min.js");
require("/home/codio/workspace/bower_components/angular/angular.min.js");
require("/home/codio/workspace/bower_components/angular-animate/angular-animate.min.js");
require("/home/codio/workspace/bower_components/angular-sanitize/angular-sanitize.min.js");
require("/home/codio/workspace/bower_components/angular-ui-router/release/angular-ui-router.min.js");
;__browserify_shim_require__=require;(function browserifyShim(module, define, require) {
/**
 * famous-angular - Bring structure to your Famo.us apps with the power of AngularJS. Famo.us/Angular integrates seamlessly with existing Angular and Famo.us apps.
 * @version v0.5.0
 * @link https://github.com/Famous/famous-angular
 * @license MPL v2.0
 */
"use strict";var ngFameApp=angular.module("famous.angular",[]);ngFameApp.provider("$famous",function(){var e={"famous/core/Context":famous.core.Context,"famous/core/ElementAllocator":famous.core.ElementAllocator,"famous/core/Engine":famous.core.Engine,"famous/core/Entity":famous.core.Entity,"famous/core/EventEmitter":famous.core.EventEmitter,"famous/core/EventHandler":famous.core.EventHandler,"famous/core/Group":famous.core.Group,"famous/core/Modifier":famous.core.Modifier,"famous/core/OptionsManager":famous.core.OptionsManager,"famous/core/RenderNode":famous.core.RenderNode,"famous/core/Scene":famous.core.Scene,"famous/core/SpecParser":famous.core.SpecParser,"famous/core/Surface":famous.core.Surface,"famous/core/Transform":famous.core.Transform,"famous/core/View":famous.core.View,"famous/core/ViewSequence":famous.core.ViewSequence,"famous/events/EventArbiter":famous.events.EventArbiter,"famous/events/EventFilter":famous.events.EventFilter,"famous/events/EventMapper":famous.events.EventMapper,"famous/inputs/FastClick":famous.inputs.FastClick,"famous/inputs/GenericSync":famous.inputs.GenericSync,"famous/inputs/MouseSync":famous.inputs.MouseSync,"famous/inputs/PinchSync":famous.inputs.PinchSync,"famous/inputs/RotateSync":famous.inputs.RotateSync,"famous/inputs/ScaleSync":famous.inputs.ScaleSync,"famous/inputs/ScrollSync":famous.inputs.ScrollSync,"famous/inputs/TouchSync":famous.inputs.TouchSync,"famous/inputs/TouchTracker":famous.inputs.TouchTracker,"famous/inputs/TwoFingerSync":famous.inputs.TwoFingerSync,"famous/math/Matrix":famous.math.Matrix,"famous/math/Quaternion":famous.math.Quaternion,"famous/math/Random":famous.math.Random,"famous/math/Utilities":famous.math.Utilities,"famous/math/Vector":famous.math.Vector,"famous/modifiers/Draggable":famous.modifiers.Draggable,"famous/modifiers/Fader":famous.modifiers.Fader,"famous/modifiers/ModifierChain":famous.modifiers.ModifierChain,"famous/modifiers/StateModifier":famous.modifiers.StateModifier,"famous/surfaces/CanvasSurface":famous.surfaces.CanvasSurface,"famous/surfaces/ContainerSurface":famous.surfaces.ContainerSurface,"famous/surfaces/FormContainerSurface":famous.surfaces.FormContainerSurface,"famous/surfaces/ImageSurface":famous.surfaces.ImageSurface,"famous/surfaces/InputSurface":famous.surfaces.InputSurface,"famous/surfaces/SubmitInputSurface":famous.surfaces.SubmitInputSurface,"famous/surfaces/TextareaSurface":famous.surfaces.TextareaSurface,"famous/surfaces/VideoSurface":famous.surfaces.VideoSurface,"famous/transitions/CachedMap":famous.transitions.CachedMap,"famous/transitions/Easing":famous.transitions.Easing,"famous/transitions/MultipleTransition":famous.transitions.MultipleTransition,"famous/transitions/SnapTransition":famous.transitions.SnapTransition,"famous/transitions/SpringTransition":famous.transitions.SpringTransition,"famous/transitions/Transitionable":famous.transitions.Transitionable,"famous/transitions/TransitionableTransform":famous.transitions.TransitionableTransform,"famous/transitions/TweenTransition":famous.transitions.TweenTransition,"famous/transitions/WallTransition":famous.transitions.WallTransition,"famous/utilities/KeyCodes":famous.utilities.KeyCodes,"famous/utilities/Timer":famous.utilities.Timer,"famous/utilities/Utility":famous.utilities.Utility,"famous/views/Deck":famous.views.Deck,"famous/views/EdgeSwapper":famous.views.EdgeSwapper,"famous/views/FlexibleLayout":famous.views.FlexibleLayout,"famous/views/Flipper":famous.views.Flipper,"famous/views/GridLayout":famous.views.GridLayout,"famous/views/HeaderFooterLayout":famous.views.HeaderFooterLayout,"famous/views/Lightbox":famous.views.Lightbox,"famous/views/RenderController":famous.views.RenderController,"famous/views/ScrollContainer":famous.views.ScrollContainer,"famous/views/Scroller":famous.views.Scroller,"famous/views/Scrollview":famous.views.Scrollview,"famous/views/SequentialLayout":famous.views.SequentialLayout,"famous/widgets/NavigationBar":famous.widgets.NavigationBar,"famous/widgets/Slider":famous.widgets.Slider,"famous/widgets/TabBar":famous.widgets.TabBar,"famous/widgets/ToggleButton":famous.widgets.ToggleButton,"famous/physics/PhysicsEngine":famous.physics.PhysicsEngine,"famous/physics/bodies/Body":famous.physics.bodies.Body,"famous/physics/bodies/Circle":famous.physics.bodies.Circle,"famous/physics/bodies/Particle":famous.physics.bodies.Particle,"famous/physics/bodies/Rectangle":famous.physics.bodies.Rectangle,"famous/physics/constraints/Collision":famous.physics.constraints.Collision,"famous/physics/constraints/Constraint":famous.physics.constraints.Constraint,"famous/physics/constraints/Curve":famous.physics.constraints.Curve,"famous/physics/constraints/Distance":famous.physics.constraints.Distance,"famous/physics/constraints/Snap":famous.physics.constraints.Snap,"famous/physics/constraints/Surface":famous.physics.constraints.Surface,"famous/physics/constraints/Wall":famous.physics.constraints.Wall,"famous/physics/constraints/Walls":famous.physics.constraints.Walls,"famous/physics/forces/Drag":famous.physics.forces.Drag,"famous/physics/forces/Force":famous.physics.forces.Force,"famous/physics/forces/Repulsion":famous.physics.forces.Repulsion,"famous/physics/forces/RotationalDrag":famous.physics.forces.RotationalDrag,"famous/physics/forces/RotationalSpring":famous.physics.forces.RotationalSpring,"famous/physics/forces/Spring":famous.physics.forces.Spring,"famous/physics/forces/VectorField":famous.physics.forces.VectorField,"famous/physics/integrators/SymplecticEuler":famous.physics.integrators.SymplecticEuler};this.registerModule=function(n,r){e[n]=r},e.getIsolate=function(e){return e&&"isolate"in e?e.isolate[e.$id]:{}},e.find=function(n){var r=angular.element(window.document.querySelectorAll(n)),a=function(e){var n=[];return angular.forEach(e,function(e,r){n[r]=angular.element(e).scope()}),n}(r),o=function(n){var r=[];return angular.forEach(n,function(n,a){r[a]=e.getIsolate(n)}),r}(a);return o};var n=/([\:\-\_]+(.))/g,r=/^moz([A-Z])/,a=/^(x[\:\-_]|data[\:\-_])/i,o=/^FA\-.*SURFACE/,t=/^FA\-.*/;window.$famousUtil=e.util={isASurface:function(e){return o.test(e[0].tagName)},isFaElement:function(e){if(t.test(e[0].tagName))return!0;var n=!1;return angular.forEach(e[0].attributes,function(e){n=n||t.test(e)}),n},camelCase:function(e){return e.replace(n,function(e,n,r,a){return a?r.toUpperCase():r}).replace(r,"Moz$1")},directiveNormalize:function(n){return e.util.camelCase(n.replace(a,""))}},this.$get=function(){return e}}),angular.module("famous.angular").config(["$provide",function(e){e.decorator("$animate",["$delegate","$rootScope","$famous","$parse","$famousDecorator",function(e,n,r,a,o){var t=r["famous/utilities/Timer"],i="$$faAnimationActive",s={},u=function(e){var n=r.getIsolate(e);return!n&&e&&(n=o.$$getIsolateById(s[e.$id])),n},c={enabled:e.enabled};return angular.forEach(["addClass","removeClass"],function(n){var a=angular.element.prototype[n];angular.element.prototype[n]=function(e){return a.apply(this,arguments),r.util.isASurface(this)&&"string"==typeof e&&""!==e.trim()&&u(this.scope()).renderNode[n](e),this},c[n]=function(a,o,t){if(e[n](a,o,t),r.util.isFaElement(a)){var i=u(a.scope());if(r.util.isASurface(a)){var s=i.renderNode;angular.forEach(o.split(" "),function(e){"ng-hide"===e?"addClass"===n?i.hide():"removeClass"===n&&i.show():s[n](e)})}else angular.forEach(o.split(" "),function(e){"ng-hide"===e&&("addClass"===n?i.hide():"removeClass"===n&&i.show())})}}}),c.setClass=function(n,a,o,t){if(e.setClass(n,a,o,t),r.util.isASurface(n)){var i=u(n.scope()).renderNode;angular.forEach(a.split(" "),function(e){i.addClass(e)}),angular.forEach(o.split(" "),function(e){i.removeClass(e)})}},angular.forEach(["enter","leave","move"],function(a){var o=a[0].toUpperCase()+a.slice(1);c[a]=function(c){var f=this,l=arguments,d="enter"===a,m=c.scope();m&&m.$parent&&(s[m.$id]=m.$parent.$id);var p=u(m);d===!0&&e[a].apply(this,arguments),c.data(i)===!0&&p&&p.$$animateHaltHandler&&p.$$animateHaltHandler(c.scope()),c.data(i,!0);var v=function(){m&&m.$id;if("leave"===a&&r.util.isFaElement(c)){var n=u(m);n&&n.id&&n.hide()}c.data(i)!==!1&&(c.data(i,!1),d===!1&&e[a].apply(f,l))};n.$$postDigest(function(){var e,n=c.scope(),r=u(n);if(r&&(e=r["$$animate"+o+"Handler"]),void 0===e)return void v();var a=e(n,{$done:v});"number"==typeof a&&t.setTimeout(v,a)})}}),c}])}]),angular.module("famous.angular").factory("$famousDecorator",["$famous",function(e){var n={child:{},parent:{},renderable:function(n){var r=e["famous/core/RenderNode"];n.renderGate=new r,n.emptyNode=new r,n.show=function(){n.renderGate&&n.renderGate.set(n.renderNode)},n.hide=function(){n.renderGate.set(n.emptyNode)}}},r={};return{addRole:function(e,r){n[e](r)},ensureIsolate:function(e,n){if(n){var a=["fa-edge-swapper","fa-render-controller","fa-deck","fa-light-box"],o=!1;angular.forEach(a,function(e){return e.toUpperCase()===n[0].tagName?void(o=!0):void 0!==n[0].attributes[e]?void(o=!0):void 0}),o&&(e=e.$parent)}e.isolate=e.isolate||{},e.isolate[e.$id]=e.isolate[e.$id]||{};var t=e.isolate[e.$id];t.id=e.$id;var i=e.$eval("$index");return i&&"$index"!==i&&!t.index&&(t.index=i),r[t.id]=t,t},$$getIsolateById:function(e){return r[e]},registerChild:function(e,n,r,a){e.$emit("registerChild",r),n.one("$destroy",function(){"removeMethod"in r&&r.removeMethod(r.id),r&&r.hide&&r.hide(),a&&a()})},sequenceWith:function(n,r,a,o){n.$on("registerChild",function(t,i){if(t.targetScope.$id!==n.$id){var s=e.getIsolate(n);i.$parent=s,s.$children=s.$children||[],s.$children.push(i),r(i),t.stopPropagation(),a&&(i.removeMethod=a),o&&(i.updateMethod=o)}})}}}]),angular.module("famous.angular").service("$famousPipe",function(){function e(e,n,r){e instanceof Array||(e=[e]),n instanceof Array||(n=[n]);for(var a=0;a<e.length;a++)for(var o=0;o<n.length;o++)void 0!==n[o]&&void 0!==e[a]&&n[o][r](e[a])}this.unpipesFromTargets=function(n,r){e(n,r,"unpipe")},this.pipesToTargets=function(n,r){e(n,r,"pipe")}}),angular.module("famous.angular").factory("$timeline",function(){var e=function(e,n){return"number"==typeof e?e+n:e.map(function(e,r){return e+n[r]})},n=function(e,n){return"number"==typeof e?e-n:e.map(function(e,r){return e-n[r]})},r=function(e,n){return"number"==typeof e?e*n:e.map(function(e){return e*n})},a=function(a,o,t,i,s){return function(u){var c=i,f=-o,l=1/(t-o),d=n(s,i);return e(r(d,a(l*(u+f))),c)}};return function(e){var n=function(e){return e};return function(r){if(r<e[0][0])return e[0][1];for(var o=0;o<e.length-1;o++)if(e[o][0]<=r&&r<e[o+1][0]){var t=a(e[o][2]||n,e[o][0],e[o+1][0],e[o][1],e[o+1][1]);return t(r)}return e[e.length-1][1]}}}),angular.module("famous.angular").directive("faAnimateEnter",["$parse","$famousDecorator",function(e,n){return{restrict:"A",scope:!1,priority:16,compile:function(){return{post:function(r,a,o){var t=n.ensureIsolate(r);t.$$animateEnterHandler=e(o.faAnimateEnter),o.$observe("faAnimateEnter",function(){t.$$animateEnterHandler=e(o.faAnimateEnter)})}}}}}]),angular.module("famous.angular").directive("faAnimateHalt",["$parse","$famousDecorator",function(e,n){return{restrict:"A",scope:!1,priority:16,compile:function(){return{post:function(r,a,o){var t=n.ensureIsolate(r);t.$$animateHaltHandler=e(o.faAnimateHalt),o.$observe("faAnimateHalt",function(){t.$$animateHaltHandler=e(o.faAnimateHalt)})}}}}}]),angular.module("famous.angular").directive("faAnimateLeave",["$parse","$famousDecorator",function(e,n){return{restrict:"A",scope:!1,priority:16,compile:function(){return{post:function(r,a,o){var t=n.ensureIsolate(r);t.$$animateLeaveHandler=e(o.faAnimateLeave),o.$observe("faAnimateLeave",function(){t.$$animateLeaveHandler=e(o.faAnimateLeave)})}}}}}]),angular.module("famous.angular").directive("faAnimateMove",["$parse","$famousDecorator",function(e,n){return{restrict:"A",scope:!1,priority:16,compile:function(){return{post:function(r,a,o){var t=n.ensureIsolate(r);t.$$animateMoveHandler=e(o.faAnimateMove),o.$observe("faAnimateMove",function(){t.$$animateMoveHandler=e(o.faAnimateMove)})}}}}}]),angular.module("famous.angular").directive("faAnimation",["$famous","$famousDecorator",function(e,n){return{restrict:"EA",scope:!0,compile:function(){var r=e["famous/core/Transform"],a=e["famous/transitions/Transitionable"],o=e["famous/transitions/Easing"];return{pre:function(e){n.ensureIsolate(e)},post:function(e,t,i){var s=n.ensureIsolate(e);setTimeout(function(){s.timeline=e.$eval(i.timeline),s._trans=new a(0),s.play=function(n){var r={duration:e.$eval(i.duration),curve:e.$eval(i.curve)||"linear"};s._trans.set(1,r,function(){n&&n(),i.loop&&setTimeout(function(){s.replay(n)},0)})},s.reset=function(){s._trans.set(0)},s.replay=function(e){s.reset(),s.play(e)};var n=null;i.event&&(n&&n(),n=e.$on(i.event,function(e,n){var r=n&&n.callback?n.callback:void 0;s.replay(r)}));i.id;if(void 0===s.timeline&&(s.timeline=s._trans.get.bind(s._trans),i.autoplay&&s.play()),!s.timeline instanceof Function)throw new Error("timeline must be a reference to a function or duration must be provided");for(var u=t[0].querySelectorAll("animate"),c={},f=0;f<u.length;f++)!function(){var n=u[f];if(n.attributes.targetmodselector){var a=angular.element(t[0].parentNode)[0].querySelectorAll(n.attributes.targetmodselector.value);angular.forEach(a,function(a){var t=angular.element(a).scope(),i=t.isolate[t.$id].modifier,u=t.isolate[t.$id].getTransform,f=n.attributes.curve&&"linear"!==n.attributes.curve.value?o[n.attributes.curve.value]:function(e){return e};if(n.attributes.field){var l=n.attributes.field.value,d=n.attributes.timelinelowerbound?parseFloat(n.attributes.timelinelowerbound.value):0,m=n.attributes.timelineupperbound?parseFloat(n.attributes.timelineupperbound.value):1;if(!n.attributes.startvalue)throw new Error("you must provide a start value for the animation");var p=e.$eval(n.attributes.startvalue.value);if(!n.attributes.endvalue)throw new Error("you must provide an end value for the animation");var v=e.$eval(n.attributes.endValue.value),g=c[t.$id]=c[t.$id]||{},h=g[l]=g[l]||[];h.push({field:l,lowerBound:d,upperBound:m,startValue:p,endValue:v,curve:f}),h.sort(function(e,n){return e.lowerBound-n.lowerBound});for(var $=1;$<h.length;$++)for(var y=h[$].lowerBound,w=0;$>w;w++)if(y<h[w].upperBound)throw new Error("Animate segments have overlappingdomains for the same field ("+l+").At any point in the timeline, only one <animate>can affect a given field on the same modifier.");var S=function(){for(var e=s.timeline()||0,n=0,r=h[n],a=0;a<h.length;a++){if(e>=h[a].lowerBound&&e<=h[a].upperBound){r=h[a];break}if(a===h.length-1){r=h[a];break}if(e>=h[a].upperBound&&e<h[a+1].lowerBound){r=h[a];break}}if(e<=r.lowerBound)return r.startValue;if(e>=r.upperBound)return r.endValue;var o=r.upperBound-r.lowerBound,t=(e-r.lowerBound)/o;if(Array.isArray(r.startValue)){for(var i=[],u=0;u<r.startValue.length;u++)i.push(r.startValue[u]+r.curve(t)*(r.endValue[u]-r.startValue[u]));return i}return r.startValue+r.curve(t)*(r.endValue-r.startValue)},b=g.transformComponents=g.transformComponents||[];"opacity"===l?i.opacityFrom(function(){return S()}):"origin"===l?i.originFrom(function(){return S()}):"size"===l?i.sizeFrom(function(){return S()}):(b.push({field:l,fn:S}),i.transformFrom(function(){for(var e={},n=u&&u()?[u()]:[],a=0;a<b.length;a++)!function(){var o=b[a].field;if(!e[o]){var t=b[a].fn();n.push(Array.isArray(t)?r[o].apply(this,t):r[o](t)),e[o]=!0}}();return 1===n.length?n[0]:r.multiply.apply(this,n)}))}})}}()},1)}}}}}]),angular.module("famous.angular").directive("faApp",["$famous","$famousDecorator",function(e,n){return{template:'<div style="display: none;"><div></div></div>',transclude:!0,scope:!0,restrict:"EA",compile:function(r,a,o){return{pre:function(r,a,o){function t(){s.apply(this,arguments)}{var i=n.ensureIsolate(r),s=e["famous/core/View"],u=e["famous/core/Engine"];e["famous/core/Transform"]}a.append('<div class="famous-angular-clipping-container"><div class="famous-angular-container"></div></div>'),i.context=u.createContext(a[0].querySelector(".famous-angular-container")),window.context=i.context;var c=function(){var e=parseInt(o.faPerspective);e&&i.context.setPerspective(e)};o.$observe("faPerspective",c),c(),t.prototype=Object.create(s.prototype),t.prototype.constructor=t;i.view=new t,i.context.add(i.view),r.$on("$destroy",function(){i.context.update=angular.noop}),r.$on("registerChild",function(e,n){i.view.add(n.renderNode),e.stopPropagation()})},post:function(e,r){var a=n.ensureIsolate(e);o(e,function(e){angular.element(r[0].querySelectorAll("div div")[0]).append(e)}),a.readyToRender=!0}}}}}]),angular.module("famous.angular").directive("faCanvasSurface",["$famous","$famousDecorator","$interpolate","$controller","$compile",function(e,n){return{scope:!0,transclude:!0,template:'<canvas class="fa-canvas-surface"></canvas>',restrict:"EA",compile:function(r,a,o){return{pre:function(r,a,o){{var t=n.ensureIsolate(r),i=e["famous/surfaces/CanvasSurface"];e["famous/core/Transform"],e["famous/core/EventHandler"]}t.renderNode=new i({size:r.$eval(o.faSize)}),n.addRole("renderable",t),t.show(),o.class&&t.renderNode.setClasses(o["class"].split(" ")),n.sequenceWith(r,function(){throw new Error("Surfaces are leaf nodes of the Famo.us render tree and cannot accept rendernode children.  To include additional Famo.us content inside of a fa-surface, that content must be enclosed in an additional fa-app.")})},post:function(e,r){var a=n.ensureIsolate(e),t=function(){a.renderNode.setContent(r[0].querySelector("canvas.fa-canvas-surface"))};t(),o(e,function(e){angular.element(r[0].querySelectorAll("canvas.fa-canvas-surface")).append(e)}),n.registerChild(e,r,a,function(){})}}}}}]),angular.module("famous.angular").directive("faClick",["$parse","$famousDecorator",function(e,n){return{restrict:"A",compile:function(){return{post:function(r,a,o){var t=n.ensureIsolate(r);if(o.faClick){var i=t.renderNode._eventInput||t.renderNode;i.on("click",function(n){var a=e(o.faClick);a(r,{$event:n}),r.$$phase||r.$apply()})}}}}}}]),angular.module("famous.angular").directive("faContainerSurface",["$famous","$famousDecorator",function(e,n){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(r,a,o){return{pre:function(r,a,o){var t=n.ensureIsolate(r),i=e["famous/surfaces/ContainerSurface"],s=r.$eval(o.faOptions)||{};t.renderNode=new i(s),n.addRole("renderable",t),t.show(),n.sequenceWith(r,function(e){t.renderNode.add(e.renderGate)})},post:function(e,r){var a=n.ensureIsolate(e);o(e,function(e){r.find("div").append(e)}),n.registerChild(e,r,a)}}}}}]),angular.module("famous.angular").directive("faDraggable",["$famous","$famousDecorator","$parse","$rootScope",function(e,n,r,a){return{template:"<div></div>",transclude:!0,restrict:"EA",priority:2,scope:!0,compile:function(r,o,t){return{post:function(r,o,i){var s=n.ensureIsolate(r),u=e["famous/core/RenderNode"],c=e["famous/modifiers/Draggable"],f=r.$eval(i.faOptions)||{};r.$watch(function(){return r.$eval(i.faOptions)},function(e){e=e||{},s.modifier.setOptions(e)},!0),s.modifier=new c(f),s.renderNode=(new u).add(s.modifier),n.addRole("renderable",s),s.show(),n.sequenceWith(r,function(e){s.renderNode.add(e.renderGate)}),t(r,function(e){o.find("div").append(e)}),n.registerChild(r,o,s,function(){s.modifier.deactivate()}),r.$$phase||a.$$phase||r.$apply()}}}}}]),angular.module("famous.angular").directive("faEdgeSwapper",["$famous","$famousDecorator",function(e,n){return{scope:!0,restrict:"A",priority:512,compile:function(){var r=e["famous/views/EdgeSwapper"];return{pre:function(e,a,o){var t,i=n.ensureIsolate(e);i.$$animateEnterHandler=function(e,n){i.renderNode.show(t,function(){i.$$leaveDoneCallback&&i.$$leaveDoneCallback(),n.$done()})},i.$$animateLeaveHandler=function(e,n){i.$$leaveDoneCallback=n.$done};var s=e.$eval(o.faOptions);i.renderNode=new r(s),n.addRole("renderable",i),i.show(),n.sequenceWith(e,function(e){t=e.renderGate})},post:function(e,r){var a=n.ensureIsolate(e);n.registerChild(e,r,a)}}}}}]),angular.module("famous.angular").directive("faFlexibleLayout",["$famous","$famousDecorator",function(e,n){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(r,a,o){return{pre:function(r,a,o){var t=n.ensureIsolate(r),i=e["famous/views/FlexibleLayout"],s=(e["famous/core/ViewSequence"],e["famous/core/RenderNode"],[]),u=r.$eval(o.faOptions)||{};t.renderNode=new i(u),n.addRole("renderable",t),t.show();var c=function(){s.sort(function(e,n){return e.index-n.index}),t.renderNode.sequenceFrom(function(e){var n=[];return angular.forEach(e,function(e,r){n[r]=e.renderGate}),n}(s))};n.sequenceWith(r,function(e){s.push(e),c()},function(e){s=function(n){var r=[];return angular.forEach(n,function(n){n.id!==e&&r.push(n)}),r}(s),c()})},post:function(e,r){var a=n.ensureIsolate(e);o(e,function(e){r.find("div").append(e)}),e.$emit("registerChild",a)}}}}}]),angular.module("famous.angular").directive("faFlipper",["$famous","$famousDecorator",function(e,n){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(r,a,o){return{pre:function(r,a,o){var t=n.ensureIsolate(r),i=e["famous/views/Flipper"],s=r.$eval(o.faOptions)||{};t.renderNode=new i(s),n.addRole("renderable",t),t.show(),t.children=[],t.flip=function(e){t.renderNode.flip(e||r.$eval(o.faOptions))},n.sequenceWith(r,function(e){var n=t.children.length;if(0===n)t.renderNode.setFront(e.renderGate);else{if(1!==n)throw new Error("fa-flipper accepts only two child elements; more than two have been provided");t.renderNode.setBack(e.renderGate)}t.children.push(e.renderGate)},function(){t.children.splice(t.children.length-1,1)})},post:function(e,r){var a=n.ensureIsolate(e);o(e,function(e){r.find("div").append(e)}),n.registerChild(e,r,a)}}}}}]),angular.module("famous.angular").directive("faGridLayout",["$famous","$famousDecorator",function(e,n){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(r,a,o){return{pre:function(r,a,o){var t=n.ensureIsolate(r),i=e["famous/views/GridLayout"],s=(e["famous/core/ViewSequence"],[]),u=r.$eval(o.faOptions)||{};t.renderNode=new i(u),n.addRole("renderable",t),t.show();var c=function(){r.$$postDigest(function(){s.sort(function(e,n){return e.index-n.index}),t.renderNode.sequenceFrom(function(e){var n=[];return angular.forEach(e,function(e,r){n[r]=e.renderGate}),n}(s))})};n.sequenceWith(r,function(e){s.push(e),c()},function(e){s=function(n){var r=[];return angular.forEach(n,function(n){n.id!==e&&r.push(n)}),r}(s),c()},c)},post:function(e,r){var a=n.ensureIsolate(e);o(e,function(e){r.find("div").append(e)}),n.registerChild(e,r,a)}}}}}]),angular.module("famous.angular").directive("faHeaderFooterLayout",["$famous","$famousDecorator",function(e,n){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(r,a,o){var t=e["famous/views/HeaderFooterLayout"],i=e["famous/core/RenderNode"];return{pre:function(e,r,a){var o=n.ensureIsolate(e),s=(new i,new i,new i,e.$eval(a.faOptions)||{});o.renderNode=new t(s),n.addRole("renderable",o),o.show();var u=0;n.sequenceWith(e,function(e){if(u++,1===u)o.renderNode.header.add(e.renderGate);else if(2===u)o.renderNode.content.add(e.renderGate);else{if(3!==u)throw new Error("fa-header-footer-layout can accept no more than 3 children");o.renderNode.footer.add(e.renderGate)}},function(){1===u?o.renderNode.header.set({}):2===u?o.renderNode.content.set({}):3===u&&o.renderNode.footer.set({}),u--})},post:function(e,r){var a=n.ensureIsolate(e);o(e,function(e){r.find("div").append(e)}),n.registerChild(e,r,a)}}}}}]),angular.module("famous.angular").directive("faImageSurface",["$famous","$famousDecorator",function(e,n){return{scope:!0,template:'<div class="fa-image-surface"></div>',restrict:"EA",compile:function(){return{pre:function(r,a,o){{var t=n.ensureIsolate(r),i=e["famous/surfaces/ImageSurface"];e["famous/core/Transform"],e["famous/core/EventHandler"]}r.$watch(function(){return t.getProperties()},function(){t.renderNode&&t.renderNode.setProperties(t.getProperties())},!0);var s=function(e){return"fa"+e.charAt(0).toUpperCase()+e.slice(1)};t.getProperties=function(){for(var e=r.$eval(o.faProperties)||{},n=["backgroundColor","color"],a=0;a<n.length;a++){var t=n[a],i=s(t);o[i]&&(e[t]=r.$eval(o[i]))}return e},t.renderNode=new i({size:r.$eval(o.faSize),"class":r.$eval(o.class),properties:t.getProperties()}),n.addRole("renderable",t),t.show(),o.class&&t.renderNode.setClasses(o["class"].split(" "))},post:function(e,r,a){var o=n.ensureIsolate(e),t=function(){o.renderNode.setContent(a.faImageUrl)};t(),a.$observe("faImageUrl",t),n.registerChild(e,r,o)}}}}}]),angular.module("famous.angular").directive("faIndex",["$parse","$famousDecorator",function(e,n){return{restrict:"A",scope:!1,priority:16,compile:function(){return{post:function(e,r,a){var o=n.ensureIsolate(e,r);o.index=e.$eval(a.faIndex),e.$watch(function(){return e.$eval(a.faIndex)},function(){o.index=e.$eval(a.faIndex),o.updateMethod&&o.updateMethod()})}}}}}]),angular.module("famous.angular").config(["$provide",function(e){e.decorator("ngClickDirective",["$delegate","$famousDecorator","$parse","$rootElement","$famous","$timeout",function(e,n,r,a,o,t){function i(e,n,r,a){return Math.abs(e-r)<$&&Math.abs(n-a)<$}function s(e,n,r){for(var a=0;a<e.length;a+=2)if(i(e[a],e[a+1],n,r))return e.splice(a,a+2),!0;return!1}function u(e){if(!(Date.now()-l>h)){var n=e.touches&&e.touches.length?e.touches:[e],r=n[0].clientX,a=n[0].clientY;s(d,r,a)||(e.stopPropagation(),e.preventDefault(),e.target&&e.target.blur())}}function c(e){var n=e.touches&&e.touches.length?e.touches:[e],r=n[0].clientX,a=n[0].clientY;d.push(r,a),t(function(){for(var e=0;e<d.length;e+=2)if(d[e]===r&&d[e+1]===a)return void d.splice(e,e+2)},h,!1)}function f(e,n){d||(a[0].addEventListener("click",u,!0),a[0].addEventListener("touchstart",c,!0),d=[]),l=Date.now(),s(d,e,n)}{var l,d,m=e[0],p=m.compile,v=750,g=12,h=2500,$=25,y="ng-click-active";o["famous/core/Engine"]}return m.compile=function(e,n,a){return o.util.isFaElement(e)?o.util.isASurface(e)?{post:function(e,n,a){function t(){d=!1,p.removeClass(y)}var i,s,u,c,l=r(a.ngClick),d=!1,m=o.getIsolate(e),p=m.renderNode;p.on("touchstart",function(e){d=!0,i=e.target?e.target:e.srcElement,3===i.nodeType&&(i=i.parentNode),p.addClass(y),s=Date.now();var n=e.touches&&e.touches.length?e.touches:[e],r=n[0].originalEvent||n[0];u=r.clientX,c=r.clientY}),p.on("touchmove",function(){t()}),p.on("touchcancel",function(){t()}),p.on("touchend",function(e){var n=Date.now()-s,r=e.changedTouches&&e.changedTouches.length?e.changedTouches:e.touches&&e.touches.length?e.touches:[e],o=r[0].originalEvent||r[0],i=o.clientX,l=o.clientY,m=Math.sqrt(Math.pow(i-u,2)+Math.pow(l-c,2));d&&v>n&&g>m&&(f(i,l),angular.isDefined(a.disabled)&&"false"!==a.disabled||p.emit("click",[e])),t()}),p.on("click",function(n,r){e.$apply(function(){l(e,{$event:r||n})})}),p.on("mousedown",function(){p.addClass(y)}),p.on("mousemove mouseup",function(){p.removeClass(y)})}}:void 0:p(e,n,a)},e}]),angular.forEach("dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(n){var r=window.$famousUtil.directiveNormalize("ng-"+n);e.decorator(r+"Directive",["$delegate","$famousDecorator","$parse","$famous",function(e,a,o,t){var i=e[0],s=i.compile;return i.compile=function(e,i,u){return t.util.isFaElement(e)?{post:function(e,t,i){var s=a.ensureIsolate(e);if(i[r]){var u=s.renderNode._eventInput||s.renderNode;u.on(n,function(n){var a=o(i[r]);a(e,{$event:n}),e.$$phase||e.$apply()})}}}:s(e,i,u)},e}])})}]),angular.module("famous.angular").directive("faModifier",["$famous","$famousDecorator","$parse","$rootScope",function(e,n,r,a){return{template:"<div></div>",transclude:!0,restrict:"EA",priority:2,scope:!0,compile:function(o,t,i){return{post:function(o,t,s){var u=n.ensureIsolate(o),c=e["famous/core/RenderNode"],f=e["famous/core/Modifier"],l=e["famous/core/Transform"],d=e["famous/physics/bodies/Particle"],m=function(e){return e.getPosition()},p=["aboutOrigin","perspective","rotate","rotateAxis","rotateX","rotateY","rotateZ","scale","skew","translate"];s.$observe("faTransformOrder",function(){var e=o.$eval(s.faTransformOrder);void 0!==e&&(p=e)});var v={};angular.forEach(p,function(n){var a=e.util.directiveNormalize("fa-"+n);s.$observe(a,function(){v[n]=r(s[a])})});var g=angular.noop;s.$observe("faTransform",function(){g=r(s.faTransform)}),u.getTransform=function(){var e=g(o);if(void 0!==e)return e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e;var n=[];return angular.forEach(p,function(e){var r=v[e]?v[e](o):void 0;void 0!==r&&(r instanceof Function&&(r=r()),n.push(r instanceof Array?l[e].apply(this,r):r instanceof d?l[e].apply(this,m(r)):l[e].call(this,r)))}),n.length?1===n.length?n[0]:l.multiply.apply(this,n):void 0};var h=angular.noop;s.$observe("faAlign",function(){h=r(s.faAlign)}),u.getAlign=function(){var e=h(o);return e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e instanceof d?m(e):e};var $=angular.noop;s.$observe("faOpacity",function(){$=r(s.faOpacity)}),u.getOpacity=function(){var e=$(o);return void 0===e?1:e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e instanceof d?m(e):e};var y=angular.noop;s.$observe("faSize",function(){y=r(s.faSize)}),u.getSize=function(){var e=y(o);return e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e instanceof d?m(e):e};var w=angular.noop;s.$observe("faOrigin",function(){w=r(s.faOrigin)}),u.getOrigin=function(){var e=w(o);return e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e instanceof d?m(e):e},u.modifier=new f({transform:u.getTransform,size:u.getSize,opacity:u.getOpacity,origin:u.getOrigin,align:u.getAlign}),u.renderNode=(new c).add(u.modifier),n.addRole("renderable",u),u.show(),n.sequenceWith(o,function(e){u.renderNode.add(e.renderGate)}),i(o,function(e){t.find("div").append(e)}),n.registerChild(o,t,u,function(){u.modifier.setOpacity(0)}),o.$$phase||a.$$phase||o.$apply()}}}}}]),angular.module("famous.angular").directive("faMouseover",["$parse","$famousDecorator",function(e,n){return{restrict:"A",scope:!1,compile:function(){return{post:function(r,a,o){var t=n.ensureIsolate(r);if(o.faMouseover){var i=t.renderNode._eventInput||t.renderNode;i.on("mouseover",function(n){var a=e(o.faMouseover);a(r,{$event:n}),r.$$phase||r.$apply()})}}}}}}]),angular.module("famous.angular").directive("faOptions",["$parse","$famousDecorator",function(e,n){return{restrict:"A",scope:!1,priority:-16,compile:function(){return{post:function(e,r,a){var o=n.ensureIsolate(e,r);e.$watch(function(){return e.$eval(a.faOptions)},function(){o.renderNode.setOptions(e.$eval(a.faOptions))},!0)}}}}}]),angular.module("famous.angular").directive("faPipeFrom",["$famous","$famousDecorator","$famousPipe",function(e,n,r){return{restrict:"A",scope:!1,priority:16,compile:function(){var a=e["famous/core/Engine"];return{post:function(e,o,t){var i=n.ensureIsolate(e);e.$watch(function(){return e.$eval(t.faPipeFrom)},function(e,n){var o;o=i.renderNode&&i.renderNode._isModifier?i.renderNode._object:i.renderNode?i.renderNode._eventInput||i.renderNode:a,r.unpipesFromTargets(o,n),r.pipesToTargets(o,e)}),e.$on("$destroy",function(){r.unpipesFromTargets(i.renderNode||a,e.$eval(t.faPipeFrom))})}}}}}]),angular.module("famous.angular").directive("faPipeTo",["$famous","$famousDecorator","$famousPipe",function(e,n,r){return{restrict:"A",scope:!1,priority:16,compile:function(){var a=e["famous/core/Engine"];return{post:function(e,o,t){var i=n.ensureIsolate(e);e.$watch(function(){return e.$eval(t.faPipeTo)},function(e,n){var o;o=i.renderNode&&i.renderNode._isModifier?i.renderNode._object:i.renderNode?i.renderNode._eventOutput||i.renderNode:a,r.unpipesFromTargets(n,o),r.pipesToTargets(e,o)}),e.$on("$destroy",function(){r.unpipesFromTargets(e.$eval(t.faPipeTo),i.renderNode||a)})}}}}}]),angular.module("famous.angular").directive("faRenderNode",["$famous","$famousDecorator",function(e,n){return{template:"<div></div>",transclude:!0,scope:!0,restrict:"EA",compile:function(r,a,o){return{pre:function(r,a,o){{var t=n.ensureIsolate(r),i=e["famous/core/Engine"];
e["famous/core/RenderNode"]}t.children=[],o.$observe("faPipeTo",function(e){var n=r.$eval(e);n&&i.pipe(n)}),t.renderNode=r.$eval(o.faNode),n.addRole("renderable",t),t.show(),n.sequenceWith(r,function(e){t.renderNode.add(e.renderGate),t.children.push(e)})},post:function(e,r){var a=n.ensureIsolate(e);o(e,function(e){r.find("div").append(e)}),n.registerChild(e,r,a)}}}}}]),angular.module("famous.angular").directive("faScrollView",["$famous","$famousDecorator",function(e,n){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(r,a,o){return{pre:function(r,a,o){var t=n.ensureIsolate(r),i=e["famous/views/Scrollview"],s=e["famous/core/ViewSequence"],u=(e["famous/core/Surface"],[]),c=r.$eval(o.faOptions)||{};t.renderNode=new i(c),n.addRole("renderable",t),t.show();var f=function(e){r.$$postDigest(function(){u.sort(function(e,n){return e.index-n.index});var n={array:function(e){var n=[];return angular.forEach(e,function(e,r){n[r]=e.renderGate}),n}(u)};e&&(n.index=r.$eval(o.faStartIndex));var a=new s(n);t.renderNode.sequenceFrom(a)})};n.sequenceWith(r,function(e){u.push(e),f(!0)},function(e){u=function(n){var r=[];return angular.forEach(n,function(n){n.id!==e&&r.push(n)}),r}(u),f()},f)},post:function(e,r){var a=n.ensureIsolate(e);o(e,function(e){r.find("div").append(e)}),n.registerChild(e,r,a)}}}}}]),angular.module("famous.angular").directive("faSequentialLayout",["$famous","$famousDecorator",function(e,n){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(r,a,o){return window.$f=e,{pre:function(r,a,o){var t=n.ensureIsolate(r),i=e["famous/views/SequentialLayout"],s=[],u=r.$eval(o.faOptions)||{};t.renderNode=new i(u),n.addRole("renderable",t),t.show();var c=function(){s.sort(function(e,n){return e.index-n.index}),t.renderNode.sequenceFrom(function(e){var n=[];return angular.forEach(e,function(e,r){n[r]=e.renderGate}),n}(s))};n.sequenceWith(r,function(e){s.push(e),c()},function(e){s=function(n){var r=[];return angular.forEach(n,function(n){n.id!==e&&r.push(n)}),r}(s),c()})},post:function(e,r){var a=n.ensureIsolate(e);o(e,function(e){r.find("div").append(e)}),n.registerChild(e,r,a)}}}}}]),angular.module("famous.angular").directive("faSurface",["$famous","$famousDecorator","$interpolate","$controller","$compile",function(e,n){return{scope:!0,transclude:!0,template:'<div class="fa-surface"></div>',restrict:"EA",compile:function(r,a,o){return{pre:function(r,a,o){{var t=n.ensureIsolate(r),i=e["famous/core/Surface"];e["famous/core/Transform"],e["famous/core/EventHandler"]}r.$watch(function(){return t.getProperties()},function(){t.renderNode&&t.renderNode.setProperties(t.getProperties())},!0);var s=function(e){return"fa"+e.charAt(0).toUpperCase()+e.slice(1)};t.getProperties=function(){for(var e=r.$eval(o.faProperties)||{},n=["backgroundColor","margin","padding","color","pointerEvents","zIndex"],a=0;a<n.length;a++){var t=n[a],i=s(t);o[i]&&(e[t]=r.$eval(o[i]))}return e};var u=[];o.$observe("faSize",function(){t.renderNode.setSize(r.$eval(o.faSize)),u.push(new Date),u.length>5&&(u[4]-u[0]<=1e3&&console.warn("Using fa-size on fa-surface to animate is significantly non-performant, prefer to use fa-size on an fa-modifier surrounding a fa-surface"),u.shift())}),t.renderNode=new i({size:r.$eval(o.faSize),properties:t.getProperties()}),n.addRole("renderable",t),t.show(),o.class&&t.renderNode.setClasses(o["class"].split(" ")),n.sequenceWith(r,function(){throw new Error("Surfaces are leaf nodes of the Famo.us render tree and cannot accept rendernode children.  To include additional Famo.us content inside of a fa-surface, that content must be enclosed in an additional fa-app.")})},post:function(e,r){var a=n.ensureIsolate(e),t=function(){a.renderNode.setContent(r[0].querySelector("div.fa-surface"))};t(),o(e,function(e){angular.element(r[0].querySelectorAll("div.fa-surface")).append(e)}),n.registerChild(e,r,a,function(){})}}}}}]),angular.module("famous.angular").directive("faTap",["$parse","$famousDecorator",function(e,n){return{restrict:"A",compile:function(){return{post:function(r,a,o){var t=n.ensureIsolate(r);if(o.faTap){var i=t.renderNode._eventInput||t.renderNode,s=!1;i.on("touchmove",function(e){return s=!0,e}),i.on("tap",function(n){if(!s){var a=e(o.faTap);a(r,{$event:n}),r.$$phase||r.$apply()}s=!1})}}}}}}]),angular.module("famous.angular").directive("faTouchend",["$parse","$famousDecorator",function(e,n){return{restrict:"A",scope:!1,compile:function(){return{post:function(r,a,o){var t=n.ensureIsolate(r);if(o.faTouchend){var i=t.renderNode._eventInput||t.renderNode;i.on("touchend",function(n){var a=e(o.faTouchend);a(r,{$event:n}),r.$$phase||r.$apply()})}}}}}}]),angular.module("famous.angular").directive("faTouchmove",["$parse","$famousDecorator",function(e,n){return{restrict:"A",scope:!1,compile:function(){return{post:function(r,a,o){var t=n.ensureIsolate(r);if(o.faTouchmove){var i=t.renderNode._eventInput||t.renderNode;i.on("touchmove",function(n){var a=e(o.faTouchmove);a(r,{$event:n}),r.$$phase||r.$apply()})}}}}}}]),angular.module("famous.angular").directive("faTouchstart",["$parse","$famousDecorator",function(e,n){return{restrict:"A",scope:!1,compile:function(){return{post:function(r,a,o){var t=n.ensureIsolate(r);if(o.faTouchstart){var i=t.renderNode._eventInput||t.renderNode;i.on("touchstart",function(n){var a=e(o.faTouchstart);a(r,{$event:n}),r.$$phase||r.$apply()})}}}}}}]),angular.module("famous.angular").directive("faVideoSurface",["$famous","$famousDecorator",function(e,n){return{scope:!0,transclude:!0,template:'<div class="fa-video-surface"></div>',restrict:"EA",compile:function(){return{pre:function(r,a,o){var t=n.ensureIsolate(r),i=e["famous/surfaces/VideoSurface"];r.$watch(function(){return r.$eval(o.faOptions)},function(e,n){t.renderNode.setOptions(n)},!0),t.renderNode=new i({"class":r.$eval(o.class)}),n.addRole("renderable",t),t.show(),o.class&&t.renderNode.setClasses(o["class"].split(" ")),n.sequenceWith(r,function(){throw new Error("Surfaces are leaf nodes of the Famo.us render tree and cannot accept rendernode children.  To include additional Famo.us content inside of a fa-surface, that content must be enclosed in an additional fa-app.")})},post:function(e,r,a){var o=n.ensureIsolate(e),t=function(){o.renderNode.setContent(a.faVideoUrl)};t(),a.$observe("faVideoUrl",t),n.registerChild(e,r,o)}}}}}]),angular.module("famous.angular").directive("faView",["$famous","$famousDecorator",function(e,n){return{template:"<div></div>",transclude:!0,scope:!0,restrict:"EA",compile:function(r,a,o){var t=e["famous/core/View"];return{pre:function(e,r,a){var o=n.ensureIsolate(e);o.children=[],o.renderNode=new t({size:e.$eval(a.faSize)||[void 0,void 0]}),n.addRole("renderable",o),o.show(),n.sequenceWith(e,function(e){o.renderNode.add(e.renderGate),o.children.push(e)})},post:function(e,r){var a=n.ensureIsolate(e);o(e,function(e){r.find("div").append(e)}),n.registerChild(e,r,a)}}}}}]);
}).call(global, module, undefined, undefined);

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"/home/codio/workspace/bower_components/angular-animate/angular-animate.min.js":"/home/codio/workspace/bower_components/angular-animate/angular-animate.min.js","/home/codio/workspace/bower_components/angular-sanitize/angular-sanitize.min.js":"/home/codio/workspace/bower_components/angular-sanitize/angular-sanitize.min.js","/home/codio/workspace/bower_components/angular-ui-router/release/angular-ui-router.min.js":"/home/codio/workspace/bower_components/angular-ui-router/release/angular-ui-router.min.js","/home/codio/workspace/bower_components/angular/angular.min.js":"/home/codio/workspace/bower_components/angular/angular.min.js","/home/codio/workspace/bower_components/famous/dist/famous-global.min.js":"/home/codio/workspace/bower_components/famous/dist/famous-global.min.js","famous-polyfills":"/home/codio/workspace/node_modules/famous-polyfills/index.js"}],"/home/codio/workspace/bower_components/famous/dist/famous-global.min.js":[function(require,module,exports){
(function (global){
;__browserify_shim_require__=require;(function browserifyShim(module, exports, require, define, browserify_shim__define__module__export__) {
/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * @copyright Famous Industries, Inc. 2014
 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i;"undefined"!=typeof window?i=window:"undefined"!=typeof global?i=global:"undefined"!=typeof self&&(i=self),i.famous=t()}}(function(){return function t(i,e,n){function o(r,a){if(!e[r]){if(!i[r]){var h="function"==typeof require&&require;if(!a&&h)return h(r,!0);if(s)return s(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var p=e[r]={exports:{}};i[r][0].call(p.exports,function(t){var e=i[r][1][t];return o(e?e:t)},p,p.exports,t,i,e,n)}return e[r].exports}for(var s="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(t,i){function e(t){return[t.clientWidth,t.clientHeight]}function n(t){this.container=t,this._allocator=new r(t),this._node=new o,this._eventOutput=new s,this._size=e(this.container),this._perspectiveState=new h(0),this._perspective=void 0,this._nodeContext={allocator:this._allocator,transform:a.identity,opacity:1,origin:c,align:c,size:this._size},this._eventOutput.on("resize",function(){this.setSize(e(this.container))}.bind(this))}var o=t("./RenderNode"),s=t("./EventHandler"),r=t("./ElementAllocator"),a=t("./Transform"),h=t("../transitions/Transitionable"),c=[0,0],p=!("perspective"in document.documentElement.style),u=p?function(t,i){t.style.webkitPerspective=i?i.toFixed()+"px":""}:function(t,i){t.style.perspective=i?i.toFixed()+"px":""};n.prototype.getAllocator=function(){return this._allocator},n.prototype.add=function(t){return this._node.add(t)},n.prototype.migrate=function(t){t!==this.container&&(this.container=t,this._allocator.migrate(t))},n.prototype.getSize=function(){return this._size},n.prototype.setSize=function(t){t||(t=e(this.container)),this._size[0]=t[0],this._size[1]=t[1]},n.prototype.update=function(t){t&&(t.transform&&(this._nodeContext.transform=t.transform),t.opacity&&(this._nodeContext.opacity=t.opacity),t.origin&&(this._nodeContext.origin=t.origin),t.align&&(this._nodeContext.align=t.align),t.size&&(this._nodeContext.size=t.size));var i=this._perspectiveState.get();i!==this._perspective&&(u(this.container,i),this._perspective=i),this._node.commit(this._nodeContext)},n.prototype.getPerspective=function(){return this._perspectiveState.get()},n.prototype.setPerspective=function(t,i,e){return this._perspectiveState.set(t,i,e)},n.prototype.emit=function(t,i){return this._eventOutput.emit(t,i)},n.prototype.on=function(t,i){return this._eventOutput.on(t,i)},n.prototype.removeListener=function(t,i){return this._eventOutput.removeListener(t,i)},n.prototype.pipe=function(t){return this._eventOutput.pipe(t)},n.prototype.unpipe=function(t){return this._eventOutput.unpipe(t)},i.exports=n},{"../transitions/Transitionable":88,"./ElementAllocator":2,"./EventHandler":7,"./RenderNode":11,"./Transform":15}],2:[function(t,i){function e(t){t||(t=document.createDocumentFragment()),this.container=t,this.detachedNodes={},this.nodeCount=0}e.prototype.migrate=function(t){var i=this.container;if(t!==i){if(i instanceof DocumentFragment)t.appendChild(i);else for(;i.hasChildNodes();)t.appendChild(i.removeChild(i.firstChild));this.container=t}},e.prototype.allocate=function(t){t=t.toLowerCase(),t in this.detachedNodes||(this.detachedNodes[t]=[]);var i,e=this.detachedNodes[t];return e.length>0?i=e.pop():(i=document.createElement(t),this.container.appendChild(i)),this.nodeCount++,i},e.prototype.deallocate=function(t){var i=t.nodeName.toLowerCase(),e=this.detachedNodes[i];e.push(t),this.nodeCount--},e.prototype.getNodeCount=function(){return this.nodeCount},i.exports=e},{}],3:[function(t,i){function e(t){this._matrix=null,this._opacity=1,this._origin=null,this._size=null,this._eventOutput=new c,this._eventOutput.bindThis(this),this.eventForwarder=function(t){this._eventOutput.emit(t.type,t)}.bind(this),this.id=h.register(this),this._element=null,this._sizeDirty=!1,this._originDirty=!1,this._transformDirty=!1,this._invisible=!1,t&&this.attach(t)}function n(t){for(var i in this._eventOutput.listeners)t.addEventListener(i,this.eventForwarder)}function o(t){for(var i in this._eventOutput.listeners)t.removeEventListener(i,this.eventForwarder)}function s(t){t[12]=Math.round(t[12]*l)/l,t[13]=Math.round(t[13]*l)/l;for(var i="matrix3d(",e=0;15>e;e++)i+=t[e]<1e-6&&t[e]>-1e-6?"0,":t[e]+",";return i+=t[15]+")"}function r(t){return 100*t[0]+"% "+100*t[1]+"%"}function a(t,i){return t&&i?t[0]!==i[0]||t[1]!==i[1]:t!==i}var h=t("./Entity"),c=t("./EventHandler"),p=t("./Transform"),u=!("transform"in document.documentElement.style),l=window.devicePixelRatio||1;e.prototype.on=function(t,i){this._element&&this._element.addEventListener(t,this.eventForwarder),this._eventOutput.on(t,i)},e.prototype.removeListener=function(t,i){this._eventOutput.removeListener(t,i)},e.prototype.emit=function(t,i){i&&!i.origin&&(i.origin=this);var e=this._eventOutput.emit(t,i);return e&&i&&i.stopPropagation&&i.stopPropagation(),e},e.prototype.pipe=function(t){return this._eventOutput.pipe(t)},e.prototype.unpipe=function(t){return this._eventOutput.unpipe(t)},e.prototype.render=function(){return this.id};var f;f=navigator.userAgent.toLowerCase().indexOf("firefox")>-1?function(t,i){t.style.zIndex=1e6*i[14]|0,t.style.transform=s(i)}:u?function(t,i){t.style.webkitTransform=s(i)}:function(t,i){t.style.transform=s(i)};var d=u?function(t,i){t.style.webkitTransformOrigin=r(i)}:function(t,i){t.style.transformOrigin=r(i)},_=u?function(t){t.style.webkitTransform="scale3d(0.0001,0.0001,0.0001)",t.style.opacity=0}:function(t){t.style.transform="scale3d(0.0001,0.0001,0.0001)",t.style.opacity=0};e.prototype.commit=function(t){var i=this._element;if(i){{var e=t.transform,n=t.opacity,o=t.origin;t.size}if(!e&&this._matrix)return this._matrix=null,this._opacity=0,void _(i);if(a(this._origin,o)&&(this._originDirty=!0),p.notEquals(this._matrix,e)&&(this._transformDirty=!0),this._invisible&&(this._invisible=!1,this._element.style.display=""),this._opacity!==n&&(this._opacity=n,i.style.opacity=n>=1?"0.999999":n),this._transformDirty||this._originDirty||this._sizeDirty){this._sizeDirty&&(this._sizeDirty=!1),this._originDirty&&(o?(this._origin||(this._origin=[0,0]),this._origin[0]=o[0],this._origin[1]=o[1]):this._origin=null,d(i,this._origin),this._originDirty=!1),e||(e=p.identity),this._matrix=e;var s=this._size?p.thenMove(e,[-this._size[0]*o[0],-this._size[1]*o[1],0]):e;f(i,s),this._transformDirty=!1}}},e.prototype.cleanup=function(){this._element&&(this._invisible=!0,this._element.style.display="none")},e.prototype.attach=function(t){this._element=t,n.call(this,t)},e.prototype.detach=function(){var t=this._element;return t&&(o.call(this,t),this._invisible&&(this._invisible=!1,this._element.style.display="")),this._element=null,t},i.exports=e},{"./Entity":5,"./EventHandler":7,"./Transform":15}],4:[function(t,i){function e(){v.runLoop?(p.step(),window.requestAnimationFrame(e)):_=!1}function n(){for(var t=0;t<u.length;t++)u[t].emit("resize");g.emit("resize")}function o(){window.addEventListener("touchmove",function(t){t.preventDefault()},!0),document.body.classList.add("famous-root"),document.documentElement.classList.add("famous-root")}var s,r,a=t("./Context"),h=t("./EventHandler"),c=t("./OptionsManager"),p={},u=[],l=[],f=[],d=Date.now(),_=!0,y={},g=new h,v={containerType:"div",containerClass:"famous-container",fpsCap:void 0,runLoop:!0,appMode:!0},m=new c(v),O=10;p.step=function(){var t=Date.now();if(!(r&&r>t-d)){var i=0;for(s=t-d,d=t,g.emit("prerender"),i=0;i<l.length;i++)l[i].call(this);for(l.splice(0);f.length&&Date.now()-t<O;)f.shift().call(this);for(i=0;i<u.length;i++)u[i].update();g.emit("postrender")}},window.requestAnimationFrame(e),window.addEventListener("resize",n,!1),n();var S=!1;p.pipe=function(t){return t.subscribe instanceof Function?t.subscribe(p):g.pipe(t)},p.unpipe=function(t){return t.unsubscribe instanceof Function?t.unsubscribe(p):g.unpipe(t)},p.on=function(t,i){return t in y||(y[t]=g.emit.bind(g,t),document.body?document.body.addEventListener(t,y[t]):p.nextTick(function(t,i){document.body.addEventListener(t,i)}.bind(this,t,y[t]))),g.on(t,i)},p.emit=function(t,i){return g.emit(t,i)},p.removeListener=function(t,i){return g.removeListener(t,i)},p.getFPS=function(){return 1e3/s},p.setFPSCap=function(t){r=Math.floor(1e3/t)},p.getOptions=function(t){return m.getOptions(t)},p.setOptions=function(){return m.setOptions.apply(m,arguments)},p.createContext=function(t){!S&&v.appMode&&p.nextTick(o);var i=!1;t||(t=document.createElement(v.containerType),t.classList.add(v.containerClass),i=!0);var e=new a(t);return p.registerContext(e),i&&p.nextTick(function(t,i){document.body.appendChild(i),t.emit("resize")}.bind(this,e,t)),e},p.registerContext=function(t){return u.push(t),t},p.getContexts=function(){return u},p.deregisterContext=function(t){var i=u.indexOf(t);i>=0&&u.splice(i,1)},p.nextTick=function(t){l.push(t)},p.defer=function(t){f.push(t)},m.on("change",function(t){"fpsCap"===t.id?p.setFPSCap(t.value):"runLoop"===t.id&&!_&&t.value&&(_=!0,window.requestAnimationFrame(e))}),i.exports=p},{"./Context":1,"./EventHandler":7,"./OptionsManager":10}],5:[function(t,i){function e(t){return r[t]}function n(t,i){r[t]=i}function o(t){var i=r.length;return n(i,t),i}function s(t){n(t,null)}var r=[];i.exports={register:o,unregister:s,get:e,set:n}},{}],6:[function(t,i){function e(){this.listeners={},this._owner=this}e.prototype.emit=function(t,i){var e=this.listeners[t];if(e)for(var n=0;n<e.length;n++)e[n].call(this._owner,i);return this},e.prototype.on=function(t,i){t in this.listeners||(this.listeners[t]=[]);var e=this.listeners[t].indexOf(i);return 0>e&&this.listeners[t].push(i),this},e.prototype.addListener=e.prototype.on,e.prototype.removeListener=function(t,i){var e=this.listeners[t];if(void 0!==e){var n=e.indexOf(i);n>=0&&e.splice(n,1)}return this},e.prototype.bindThis=function(t){this._owner=t},i.exports=e},{}],7:[function(t,i){function e(){n.apply(this,arguments),this.downstream=[],this.downstreamFn=[],this.upstream=[],this.upstreamListeners={}}var n=t("./EventEmitter");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.setInputHandler=function(t,i){t.trigger=i.trigger.bind(i),i.subscribe&&i.unsubscribe&&(t.subscribe=i.subscribe.bind(i),t.unsubscribe=i.unsubscribe.bind(i))},e.setOutputHandler=function(t,i){i instanceof e&&i.bindThis(t),t.pipe=i.pipe.bind(i),t.unpipe=i.unpipe.bind(i),t.on=i.on.bind(i),t.addListener=t.on,t.removeListener=i.removeListener.bind(i)},e.prototype.emit=function(t,i){n.prototype.emit.apply(this,arguments);var e=0;for(e=0;e<this.downstream.length;e++)this.downstream[e].trigger&&this.downstream[e].trigger(t,i);for(e=0;e<this.downstreamFn.length;e++)this.downstreamFn[e](t,i);return this},e.prototype.trigger=e.prototype.emit,e.prototype.pipe=function(t){if(t.subscribe instanceof Function)return t.subscribe(this);var i=t instanceof Function?this.downstreamFn:this.downstream,e=i.indexOf(t);return 0>e&&i.push(t),t instanceof Function?t("pipe",null):t.trigger&&t.trigger("pipe",null),t},e.prototype.unpipe=function(t){if(t.unsubscribe instanceof Function)return t.unsubscribe(this);var i=t instanceof Function?this.downstreamFn:this.downstream,e=i.indexOf(t);return e>=0?(i.splice(e,1),t instanceof Function?t("unpipe",null):t.trigger&&t.trigger("unpipe",null),t):!1},e.prototype.on=function(t){if(n.prototype.on.apply(this,arguments),!(t in this.upstreamListeners)){var i=this.trigger.bind(this,t);this.upstreamListeners[t]=i;for(var e=0;e<this.upstream.length;e++)this.upstream[e].on(t,i)}return this},e.prototype.addListener=e.prototype.on,e.prototype.subscribe=function(t){var i=this.upstream.indexOf(t);if(0>i){this.upstream.push(t);for(var e in this.upstreamListeners)t.on(e,this.upstreamListeners[e])}return this},e.prototype.unsubscribe=function(t){var i=this.upstream.indexOf(t);if(i>=0){this.upstream.splice(i,1);for(var e in this.upstreamListeners)t.removeListener(e,this.upstreamListeners[e])}return this},i.exports=e},{"./EventEmitter":6}],8:[function(t,i){function e(t){s.call(this,t),this._shouldRecalculateSize=!1,this._container=document.createDocumentFragment(),this.context=new n(this._container),this.setContent(this._container),this._groupSize=[void 0,void 0]}var n=t("./Context"),o=t("./Transform"),s=t("./Surface");e.SIZE_ZERO=[0,0],e.prototype=Object.create(s.prototype),e.prototype.elementType="div",e.prototype.elementClass="famous-group",e.prototype.add=function(){return this.context.add.apply(this.context,arguments)},e.prototype.render=function(){return s.prototype.render.call(this)},e.prototype.deploy=function(t){this.context.migrate(t)},e.prototype.recall=function(){this._container=document.createDocumentFragment(),this.context.migrate(this._container)},e.prototype.commit=function(t){var i=t.transform,n=t.origin,r=t.opacity,a=t.size,h=s.prototype.commit.call(this,{allocator:t.allocator,transform:o.thenMove(i,[-n[0]*a[0],-n[1]*a[1],0]),opacity:r,origin:n,size:e.SIZE_ZERO});return(a[0]!==this._groupSize[0]||a[1]!==this._groupSize[1])&&(this._groupSize[0]=a[0],this._groupSize[1]=a[1],this.context.setSize(a)),this.context.update({transform:o.translate(-n[0]*a[0],-n[1]*a[1],0),origin:n,size:a}),h},i.exports=e},{"./Context":1,"./Surface":14,"./Transform":15}],9:[function(t,i){function e(t){this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null,this._proportionGetter=null,this._legacyStates={},this._output={transform:o.identity,opacity:1,origin:null,align:null,size:null,proportions:null,target:null},t&&(t.transform&&this.transformFrom(t.transform),void 0!==t.opacity&&this.opacityFrom(t.opacity),t.origin&&this.originFrom(t.origin),t.align&&this.alignFrom(t.align),t.size&&this.sizeFrom(t.size),t.proportions&&this.proportionsFrom(t.proportions))}function n(){this._transformGetter&&(this._output.transform=this._transformGetter()),this._opacityGetter&&(this._output.opacity=this._opacityGetter()),this._originGetter&&(this._output.origin=this._originGetter()),this._alignGetter&&(this._output.align=this._alignGetter()),this._sizeGetter&&(this._output.size=this._sizeGetter()),this._proportionGetter&&(this._output.proportions=this._proportionGetter())}var o=t("./Transform"),s=t("../transitions/Transitionable"),r=t("../transitions/TransitionableTransform");e.prototype.transformFrom=function(t){return t instanceof Function?this._transformGetter=t:t instanceof Object&&t.get?this._transformGetter=t.get.bind(t):(this._transformGetter=null,this._output.transform=t),this},e.prototype.opacityFrom=function(t){return t instanceof Function?this._opacityGetter=t:t instanceof Object&&t.get?this._opacityGetter=t.get.bind(t):(this._opacityGetter=null,this._output.opacity=t),this},e.prototype.originFrom=function(t){return t instanceof Function?this._originGetter=t:t instanceof Object&&t.get?this._originGetter=t.get.bind(t):(this._originGetter=null,this._output.origin=t),this},e.prototype.alignFrom=function(t){return t instanceof Function?this._alignGetter=t:t instanceof Object&&t.get?this._alignGetter=t.get.bind(t):(this._alignGetter=null,this._output.align=t),this},e.prototype.sizeFrom=function(t){return t instanceof Function?this._sizeGetter=t:t instanceof Object&&t.get?this._sizeGetter=t.get.bind(t):(this._sizeGetter=null,this._output.size=t),this},e.prototype.proportionsFrom=function(t){return t instanceof Function?this._proportionGetter=t:t instanceof Object&&t.get?this._proportionGetter=t.get.bind(t):(this._proportionGetter=null,this._output.proportions=t),this},e.prototype.setTransform=function(t,i,e){return i||this._legacyStates.transform?(this._legacyStates.transform||(this._legacyStates.transform=new r(this._output.transform)),this._transformGetter||this.transformFrom(this._legacyStates.transform),this._legacyStates.transform.set(t,i,e),this):this.transformFrom(t)},e.prototype.setOpacity=function(t,i,e){return i||this._legacyStates.opacity?(this._legacyStates.opacity||(this._legacyStates.opacity=new s(this._output.opacity)),this._opacityGetter||this.opacityFrom(this._legacyStates.opacity),this._legacyStates.opacity.set(t,i,e)):this.opacityFrom(t)},e.prototype.setOrigin=function(t,i,e){return i||this._legacyStates.origin?(this._legacyStates.origin||(this._legacyStates.origin=new s(this._output.origin||[0,0])),this._originGetter||this.originFrom(this._legacyStates.origin),this._legacyStates.origin.set(t,i,e),this):this.originFrom(t)},e.prototype.setAlign=function(t,i,e){return i||this._legacyStates.align?(this._legacyStates.align||(this._legacyStates.align=new s(this._output.align||[0,0])),this._alignGetter||this.alignFrom(this._legacyStates.align),this._legacyStates.align.set(t,i,e),this):this.alignFrom(t)},e.prototype.setSize=function(t,i,e){return t&&(i||this._legacyStates.size)?(this._legacyStates.size||(this._legacyStates.size=new s(this._output.size||[0,0])),this._sizeGetter||this.sizeFrom(this._legacyStates.size),this._legacyStates.size.set(t,i,e),this):this.sizeFrom(t)},e.prototype.setProportions=function(t,i,e){return t&&(i||this._legacyStates.proportions)?(this._legacyStates.proportions||(this._legacyStates.proportions=new s(this._output.proportions||[0,0])),this._proportionGetter||this.proportionsFrom(this._legacyStates.proportions),this._legacyStates.proportions.set(t,i,e),this):this.proportionsFrom(t)},e.prototype.halt=function(){this._legacyStates.transform&&this._legacyStates.transform.halt(),this._legacyStates.opacity&&this._legacyStates.opacity.halt(),this._legacyStates.origin&&this._legacyStates.origin.halt(),this._legacyStates.align&&this._legacyStates.align.halt(),this._legacyStates.size&&this._legacyStates.size.halt(),this._legacyStates.proportions&&this._legacyStates.proportions.halt(),this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null,this._proportionGetter=null},e.prototype.getTransform=function(){return this._transformGetter()},e.prototype.getFinalTransform=function(){return this._legacyStates.transform?this._legacyStates.transform.getFinal():this._output.transform},e.prototype.getOpacity=function(){return this._opacityGetter()},e.prototype.getOrigin=function(){return this._originGetter()},e.prototype.getAlign=function(){return this._alignGetter()},e.prototype.getSize=function(){return this._sizeGetter?this._sizeGetter():this._output.size},e.prototype.getProportions=function(){return this._proportionGetter?this._proportionGetter():this._output.proportions},e.prototype.modify=function(t){return n.call(this),this._output.target=t,this._output},i.exports=e},{"../transitions/Transitionable":88,"../transitions/TransitionableTransform":89,"./Transform":15}],10:[function(t,i){function e(t){this._value=t,this.eventOutput=null}function n(){this.eventOutput=new o,this.eventOutput.bindThis(this),o.setOutputHandler(this,this.eventOutput)}var o=t("./EventHandler");e.patch=function(t){for(var i=new e(t),n=1;n<arguments.length;n++)i.patch(arguments[n]);return t},e.prototype.patch=function(){for(var t=this._value,i=0;i<arguments.length;i++){var e=arguments[i];for(var n in e)n in t&&e[n]&&e[n].constructor===Object&&t[n]&&t[n].constructor===Object?(t.hasOwnProperty(n)||(t[n]=Object.create(t[n])),this.key(n).patch(e[n]),this.eventOutput&&this.eventOutput.emit("change",{id:n,value:this.key(n).value()})):this.set(n,e[n])}return this},e.prototype.setOptions=e.prototype.patch,e.prototype.key=function(t){var i=new e(this._value[t]);return(!(i._value instanceof Object)||i._value instanceof Array)&&(i._value={}),i},e.prototype.get=function(t){return t?this._value[t]:this._value},e.prototype.getOptions=e.prototype.get,e.prototype.set=function(t,i){var e=this.get(t);return this._value[t]=i,this.eventOutput&&i!==e&&this.eventOutput.emit("change",{id:t,value:i}),this},e.prototype.on=function(){return n.call(this),this.on.apply(this,arguments)},e.prototype.removeListener=function(){return n.call(this),this.removeListener.apply(this,arguments)},e.prototype.pipe=function(){return n.call(this),this.pipe.apply(this,arguments)},e.prototype.unpipe=function(){return n.call(this),this.unpipe.apply(this,arguments)},i.exports=e},{"./EventHandler":7}],11:[function(t,i){function e(t){this._object=null,this._child=null,this._hasMultipleChildren=!1,this._isRenderable=!1,this._isModifier=!1,this._resultCache={},this._prevResults={},this._childResult=null,t&&this.set(t)}function n(t,i,e){for(var r=s.parse(t,i),a=Object.keys(r),h=0;h<a.length;h++){var c=a[h],p=o.get(c),u=r[c];u.allocator=i.allocator;var l=p.commit(u);l?n(l,i,e):e[c]=u}}var o=t("./Entity"),s=t("./SpecParser");e.prototype.add=function(t){var i=t instanceof e?t:new e(t);return this._child instanceof Array?this._child.push(i):this._child?(this._child=[this._child,i],this._hasMultipleChildren=!0,this._childResult=[]):this._child=i,i},e.prototype.get=function(){return this._object||(this._hasMultipleChildren?null:this._child?this._child.get():null)},e.prototype.set=function(t){return this._childResult=null,this._hasMultipleChildren=!1,this._isRenderable=t.render?!0:!1,this._isModifier=t.modify?!0:!1,this._object=t,this._child=null,t instanceof e?t:this},e.prototype.getSize=function(){var t=null,i=this.get();return i&&i.getSize&&(t=i.getSize()),!t&&this._child&&this._child.getSize&&(t=this._child.getSize()),t},e.prototype.commit=function(t){for(var i=Object.keys(this._prevResults),e=0;e<i.length;e++){var s=i[e];if(void 0===this._resultCache[s]){var r=o.get(s);r.cleanup&&r.cleanup(t.allocator)}}this._prevResults=this._resultCache,this._resultCache={},n(this.render(),t,this._resultCache)},e.prototype.render=function(){if(this._isRenderable)return this._object.render();var t=null;if(this._hasMultipleChildren){t=this._childResult;for(var i=this._child,e=0;e<i.length;e++)t[e]=i[e].render()}else this._child&&(t=this._child.render());return this._isModifier?this._object.modify(t):t},i.exports=e},{"./Entity":5,"./SpecParser":13}],12:[function(t,i){function e(t){this.id=null,this._objects=null,this.node=new c,this._definition=null,t&&this.load(t)}function n(t){for(var i in p)if(i in t){var e=t[i];return e instanceof Array||(e=[e]),p[i].apply(this,e)}}function o(t){var i=t.transform,e=t.opacity,o=t.origin,s=t.align,r=t.size,c=a.identity;if(i instanceof Array)if(16===i.length&&"number"==typeof i[0])c=i;else for(var p=0;p<i.length;p++)c=a.multiply(c,n(i[p]));else i instanceof Function?c=i:i instanceof Object&&(c=n(i));var u=new h({transform:c,opacity:e,origin:o,align:s,size:r});return u}function s(t){for(var i=new c,e=0;e<t.length;e++){var n=r.call(this,t[e]);n&&i.add(n)}return i}function r(t){var i,e;if(t instanceof Array)i=s.call(this,t);else if(e=this._objects.length,t.render&&t.render instanceof Function)i=t;else if(t.target){var n=r.call(this,t.target),a=o.call(this,t);i=new c(a),i.add(n),t.id&&(this.id[t.id]=a)}else t.id&&(i=new c,this.id[t.id]=i);return this._objects[e]=i,i}var a=t("./Transform"),h=t("./Modifier"),c=t("./RenderNode"),p={translate:a.translate,rotate:a.rotate,rotateX:a.rotateX,rotateY:a.rotateY,rotateZ:a.rotateZ,rotateAxis:a.rotateAxis,scale:a.scale,skew:a.skew,matrix3d:function(){return arguments}};e.prototype.create=function(){return new e(this._definition)},e.prototype.load=function(t){this._definition=t,this.id={},this._objects=[],this.node.set(r.call(this,t))},e.prototype.add=function(){return this.node.add.apply(this.node,arguments)},e.prototype.render=function(){return this.node.render.apply(this.node,arguments)},i.exports=e},{"./Modifier":9,"./RenderNode":11,"./Transform":15}],13:[function(t,i){function e(){this.result={}}function n(t,i){return[t[0]*i[0]+t[1]*i[4]+t[2]*i[8],t[0]*i[1]+t[1]*i[5]+t[2]*i[9],t[0]*i[2]+t[1]*i[6]+t[2]*i[10]]}var o=t("./Transform");e._instance=new e,e.parse=function(t,i){return e._instance.parse(t,i)},e.prototype.parse=function(t,i){return this.reset(),this._parseSpec(t,i,o.identity),this.result},e.prototype.reset=function(){this.result={}};var s=[0,0];e.prototype._parseSpec=function(t,i,e){var r,a,h,c,p,u,l;if("number"==typeof t){if(r=t,h=i.transform,u=i.align||s,i.size&&u&&(u[0]||u[1])){var f=[u[0]*i.size[0],u[1]*i.size[1],0];h=o.thenMove(h,n(f,e))}this.result[r]={transform:h,opacity:i.opacity,origin:i.origin||s,align:i.align||s,size:i.size}}else{if(!t)return;if(t instanceof Array)for(var d=0;d<t.length;d++)this._parseSpec(t[d],i,e);else{a=t.target,h=i.transform,c=i.opacity,p=i.origin,u=i.align,l=i.size;var _=e;if(void 0!==t.opacity&&(c=i.opacity*t.opacity),t.transform&&(h=o.multiply(i.transform,t.transform)),t.origin&&(p=t.origin,_=i.transform),t.align&&(u=t.align),t.size||t.proportions){var y=l;l=[l[0],l[1]],t.size&&(void 0!==t.size[0]&&(l[0]=t.size[0]),void 0!==t.size[1]&&(l[1]=t.size[1])),t.proportions&&(void 0!==t.proportions[0]&&(l[0]=l[0]*t.proportions[0]),void 0!==t.proportions[1]&&(l[1]=l[1]*t.proportions[1])),y&&(u&&(u[0]||u[1])&&(h=o.thenMove(h,n([u[0]*y[0],u[1]*y[1],0],e))),p&&(p[0]||p[1])&&(h=o.moveThen([-p[0]*l[0],-p[1]*l[1],0],h))),_=i.transform,p=null,u=null}this._parseSpec(a,{transform:h,opacity:c,origin:p,align:u,size:l},_)}}},i.exports=e},{"./Transform":15}],14:[function(t,i){function e(t){c.call(this),this.options={},this.properties={},this.attributes={},this.content="",this.classList=[],this.size=null,this._classesDirty=!0,this._stylesDirty=!0,this._attributesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._trueSizeCheck=!0,this._dirtyClasses=[],t&&this.setOptions(t),this._currentTarget=null}function n(t){for(var i=0;i<this._dirtyClasses.length;i++)t.classList.remove(this._dirtyClasses[i]);this._dirtyClasses=[]}function o(t){for(var i in this.properties)t.style[i]=this.properties[i]}function s(t){for(var i in this.properties)t.style[i]=""}function r(t){for(var i in this.attributes)t.setAttribute(i,this.attributes[i])}function a(t){for(var i in this.attributes)t.removeAttribute(i)}function h(t,i){return t&&i?t[0]!==i[0]||t[1]!==i[1]:t!==i}var c=t("./ElementOutput");e.prototype=Object.create(c.prototype),e.prototype.constructor=e,e.prototype.elementType="div",e.prototype.elementClass="famous-surface",e.prototype.setAttributes=function(t){for(var i in t){if("style"===i)throw new Error('Cannot set styles via "setAttributes" as it will break Famo.us.  Use "setProperties" instead.');this.attributes[i]=t[i]}this._attributesDirty=!0},e.prototype.getAttributes=function(){return this.attributes},e.prototype.setProperties=function(t){for(var i in t)this.properties[i]=t[i];return this._stylesDirty=!0,this},e.prototype.getProperties=function(){return this.properties},e.prototype.addClass=function(t){return this.classList.indexOf(t)<0&&(this.classList.push(t),this._classesDirty=!0),this},e.prototype.removeClass=function(t){var i=this.classList.indexOf(t);return i>=0&&(this._dirtyClasses.push(this.classList.splice(i,1)[0]),this._classesDirty=!0),this},e.prototype.toggleClass=function(t){var i=this.classList.indexOf(t);return i>=0?this.removeClass(t):this.addClass(t),this},e.prototype.setClasses=function(t){var i=0,e=[];for(i=0;i<this.classList.length;i++)t.indexOf(this.classList[i])<0&&e.push(this.classList[i]);for(i=0;i<e.length;i++)this.removeClass(e[i]);for(i=0;i<t.length;i++)this.addClass(t[i]);return this},e.prototype.getClassList=function(){return this.classList},e.prototype.setContent=function(t){return this.content!==t&&(this.content=t,this._contentDirty=!0),this},e.prototype.getContent=function(){return this.content},e.prototype.setOptions=function(t){return t.size&&this.setSize(t.size),t.classes&&this.setClasses(t.classes),t.properties&&this.setProperties(t.properties),t.attributes&&this.setAttributes(t.attributes),t.content&&this.setContent(t.content),this},e.prototype.setup=function(t){var i=t.allocate(this.elementType);if(this.elementClass)if(this.elementClass instanceof Array)for(var e=0;e<this.elementClass.length;e++)i.classList.add(this.elementClass[e]);else i.classList.add(this.elementClass);i.style.display="",this.attach(i),this._opacity=null,this._currentTarget=i,this._stylesDirty=!0,this._classesDirty=!0,this._attributesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._originDirty=!0,this._transformDirty=!0},e.prototype.commit=function(t){this._currentTarget||this.setup(t.allocator);var i=this._currentTarget,e=t.size;if(this._classesDirty){n.call(this,i);for(var s=this.getClassList(),a=0;a<s.length;a++)i.classList.add(s[a]);this._classesDirty=!1,this._trueSizeCheck=!0}if(this._stylesDirty&&(o.call(this,i),this._stylesDirty=!1,this._trueSizeCheck=!0),this._attributesDirty&&(r.call(this,i),this._attributesDirty=!1,this._trueSizeCheck=!0),this.size){var p=t.size;if(e=[this.size[0],this.size[1]],void 0===e[0]&&(e[0]=p[0]),void 0===e[1]&&(e[1]=p[1]),e[0]===!0||e[1]===!0){if(e[0]!==!0||!this._trueSizeCheck&&0!==this._size[0])this._size&&(e[0]=this._size[0]);else{var u=i.offsetWidth;this._size&&this._size[0]!==u&&(this._size[0]=u,this._sizeDirty=!0),e[0]=u}if(e[1]!==!0||!this._trueSizeCheck&&0!==this._size[1])this._size&&(e[1]=this._size[1]);else{var l=i.offsetHeight;this._size&&this._size[1]!==l&&(this._size[1]=l,this._sizeDirty=!0),e[1]=l}this._trueSizeCheck=!1}}h(this._size,e)&&(this._size||(this._size=[0,0]),this._size[0]=e[0],this._size[1]=e[1],this._sizeDirty=!0),this._sizeDirty&&(this._size&&(i.style.width=this.size&&this.size[0]===!0?"":this._size[0]+"px",i.style.height=this.size&&this.size[1]===!0?"":this._size[1]+"px"),this._eventOutput.emit("resize")),this._contentDirty&&(this.deploy(i),this._eventOutput.emit("deploy"),this._contentDirty=!1,this._trueSizeCheck=!0),c.prototype.commit.call(this,t)},e.prototype.cleanup=function(t){var i=0,e=this._currentTarget;this._eventOutput.emit("recall"),this.recall(e),e.style.display="none",e.style.opacity="",e.style.width="",e.style.height="",s.call(this,e),a.call(this,e);var o=this.getClassList();for(n.call(this,e),i=0;i<o.length;i++)e.classList.remove(o[i]);if(this.elementClass)if(this.elementClass instanceof Array)for(i=0;i<this.elementClass.length;i++)e.classList.remove(this.elementClass[i]);else e.classList.remove(this.elementClass);this.detach(e),this._currentTarget=null,t.deallocate(e)},e.prototype.deploy=function(t){var i=this.getContent();if(i instanceof Node){for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(i)}else t.innerHTML=i},e.prototype.recall=function(t){for(var i=document.createDocumentFragment();t.hasChildNodes();)i.appendChild(t.firstChild);this.setContent(i)},e.prototype.getSize=function(){return this._size?this._size:this.size},e.prototype.setSize=function(t){return this.size=t?[t[0],t[1]]:null,this._sizeDirty=!0,this},i.exports=e},{"./ElementOutput":3}],15:[function(t,i){function e(t){return 2===t.length?t[0]*t[0]+t[1]*t[1]:t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function n(t){return Math.sqrt(e(t))}function o(t){return 0>t?-1:1}var s={};s.precision=1e-6,s.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],s.multiply4x4=function(t,i){return[t[0]*i[0]+t[4]*i[1]+t[8]*i[2]+t[12]*i[3],t[1]*i[0]+t[5]*i[1]+t[9]*i[2]+t[13]*i[3],t[2]*i[0]+t[6]*i[1]+t[10]*i[2]+t[14]*i[3],t[3]*i[0]+t[7]*i[1]+t[11]*i[2]+t[15]*i[3],t[0]*i[4]+t[4]*i[5]+t[8]*i[6]+t[12]*i[7],t[1]*i[4]+t[5]*i[5]+t[9]*i[6]+t[13]*i[7],t[2]*i[4]+t[6]*i[5]+t[10]*i[6]+t[14]*i[7],t[3]*i[4]+t[7]*i[5]+t[11]*i[6]+t[15]*i[7],t[0]*i[8]+t[4]*i[9]+t[8]*i[10]+t[12]*i[11],t[1]*i[8]+t[5]*i[9]+t[9]*i[10]+t[13]*i[11],t[2]*i[8]+t[6]*i[9]+t[10]*i[10]+t[14]*i[11],t[3]*i[8]+t[7]*i[9]+t[11]*i[10]+t[15]*i[11],t[0]*i[12]+t[4]*i[13]+t[8]*i[14]+t[12]*i[15],t[1]*i[12]+t[5]*i[13]+t[9]*i[14]+t[13]*i[15],t[2]*i[12]+t[6]*i[13]+t[10]*i[14]+t[14]*i[15],t[3]*i[12]+t[7]*i[13]+t[11]*i[14]+t[15]*i[15]]},s.multiply=function(t,i){return[t[0]*i[0]+t[4]*i[1]+t[8]*i[2],t[1]*i[0]+t[5]*i[1]+t[9]*i[2],t[2]*i[0]+t[6]*i[1]+t[10]*i[2],0,t[0]*i[4]+t[4]*i[5]+t[8]*i[6],t[1]*i[4]+t[5]*i[5]+t[9]*i[6],t[2]*i[4]+t[6]*i[5]+t[10]*i[6],0,t[0]*i[8]+t[4]*i[9]+t[8]*i[10],t[1]*i[8]+t[5]*i[9]+t[9]*i[10],t[2]*i[8]+t[6]*i[9]+t[10]*i[10],0,t[0]*i[12]+t[4]*i[13]+t[8]*i[14]+t[12],t[1]*i[12]+t[5]*i[13]+t[9]*i[14]+t[13],t[2]*i[12]+t[6]*i[13]+t[10]*i[14]+t[14],1]
},s.thenMove=function(t,i){return i[2]||(i[2]=0),[t[0],t[1],t[2],0,t[4],t[5],t[6],0,t[8],t[9],t[10],0,t[12]+i[0],t[13]+i[1],t[14]+i[2],1]},s.moveThen=function(t,i){t[2]||(t[2]=0);var e=t[0]*i[0]+t[1]*i[4]+t[2]*i[8],n=t[0]*i[1]+t[1]*i[5]+t[2]*i[9],o=t[0]*i[2]+t[1]*i[6]+t[2]*i[10];return s.thenMove(i,[e,n,o])},s.translate=function(t,i,e){return void 0===e&&(e=0),[1,0,0,0,0,1,0,0,0,0,1,0,t,i,e,1]},s.thenScale=function(t,i){return[i[0]*t[0],i[1]*t[1],i[2]*t[2],0,i[0]*t[4],i[1]*t[5],i[2]*t[6],0,i[0]*t[8],i[1]*t[9],i[2]*t[10],0,i[0]*t[12],i[1]*t[13],i[2]*t[14],1]},s.scale=function(t,i,e){return void 0===e&&(e=1),void 0===i&&(i=t),[t,0,0,0,0,i,0,0,0,0,e,0,0,0,0,1]},s.rotateX=function(t){var i=Math.cos(t),e=Math.sin(t);return[1,0,0,0,0,i,e,0,0,-e,i,0,0,0,0,1]},s.rotateY=function(t){var i=Math.cos(t),e=Math.sin(t);return[i,0,-e,0,0,1,0,0,e,0,i,0,0,0,0,1]},s.rotateZ=function(t){var i=Math.cos(t),e=Math.sin(t);return[i,e,0,0,-e,i,0,0,0,0,1,0,0,0,0,1]},s.rotate=function(t,i,e){var n=Math.cos(t),o=Math.sin(t),s=Math.cos(i),r=Math.sin(i),a=Math.cos(e),h=Math.sin(e),c=[s*a,n*h+o*r*a,o*h-n*r*a,0,-s*h,n*a-o*r*h,o*a+n*r*h,0,r,-o*s,n*s,0,0,0,0,1];return c},s.rotateAxis=function(t,i){var e=Math.sin(i),n=Math.cos(i),o=1-n,s=t[0]*t[0]*o,r=t[0]*t[1]*o,a=t[0]*t[2]*o,h=t[1]*t[1]*o,c=t[1]*t[2]*o,p=t[2]*t[2]*o,u=t[0]*e,l=t[1]*e,f=t[2]*e,d=[s+n,r+f,a-l,0,r-f,h+n,c+u,0,a+l,c-u,p+n,0,0,0,0,1];return d},s.aboutOrigin=function(t,i){var e=t[0]-(t[0]*i[0]+t[1]*i[4]+t[2]*i[8]),n=t[1]-(t[0]*i[1]+t[1]*i[5]+t[2]*i[9]),o=t[2]-(t[0]*i[2]+t[1]*i[6]+t[2]*i[10]);return s.thenMove(i,[e,n,o])},s.skew=function(t,i,e){return[1,Math.tan(i),0,0,Math.tan(e),1,0,0,0,Math.tan(t),1,0,0,0,0,1]},s.skewX=function(t){return[1,0,0,0,Math.tan(t),1,0,0,0,0,1,0,0,0,0,1]},s.skewY=function(t){return[1,Math.tan(t),0,0,0,1,0,0,0,0,1,0,0,0,0,1]},s.perspective=function(t){return[1,0,0,0,0,1,0,0,0,0,1,-1/t,0,0,0,1]},s.getTranslate=function(t){return[t[12],t[13],t[14]]},s.inverse=function(t){var i=t[5]*t[10]-t[6]*t[9],e=t[4]*t[10]-t[6]*t[8],n=t[4]*t[9]-t[5]*t[8],o=t[1]*t[10]-t[2]*t[9],s=t[0]*t[10]-t[2]*t[8],r=t[0]*t[9]-t[1]*t[8],a=t[1]*t[6]-t[2]*t[5],h=t[0]*t[6]-t[2]*t[4],c=t[0]*t[5]-t[1]*t[4],p=t[0]*i-t[1]*e+t[2]*n,u=1/p,l=[u*i,-u*o,u*a,0,-u*e,u*s,-u*h,0,u*n,-u*r,u*c,0,0,0,0,1];return l[12]=-t[12]*l[0]-t[13]*l[4]-t[14]*l[8],l[13]=-t[12]*l[1]-t[13]*l[5]-t[14]*l[9],l[14]=-t[12]*l[2]-t[13]*l[6]-t[14]*l[10],l},s.transpose=function(t){return[t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]},s.interpret=function(t){var i=[t[0],t[1],t[2]],r=o(i[0]),a=n(i),h=[i[0]+r*a,i[1],i[2]],c=2/e(h);if(c>=1/0)return{translate:s.getTranslate(t),rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]};var p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];p[0]=1-c*h[0]*h[0],p[5]=1-c*h[1]*h[1],p[10]=1-c*h[2]*h[2],p[1]=-c*h[0]*h[1],p[2]=-c*h[0]*h[2],p[6]=-c*h[1]*h[2],p[4]=p[1],p[8]=p[2],p[9]=p[6];var u=s.multiply(p,t),l=[u[5],u[6]],f=o(l[0]),d=n(l),_=[l[0]+f*d,l[1]],y=2/e(_),g=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];g[5]=1-y*_[0]*_[0],g[10]=1-y*_[1]*_[1],g[6]=-y*_[0]*_[1],g[9]=g[6];var v=s.multiply(g,p),m=s.multiply(v,t),O=s.scale(m[0]<0?-1:1,m[5]<0?-1:1,m[10]<0?-1:1);m=s.multiply(m,O),v=s.multiply(O,v);var S={};return S.translate=s.getTranslate(t),S.rotate=[Math.atan2(-v[6],v[10]),Math.asin(v[2]),Math.atan2(-v[1],v[0])],S.rotate[0]||(S.rotate[0]=0,S.rotate[2]=Math.atan2(v[4],v[5])),S.scale=[m[0],m[5],m[10]],S.skew=[Math.atan2(m[9],S.scale[2]),Math.atan2(m[8],S.scale[2]),Math.atan2(m[4],S.scale[0])],Math.abs(S.rotate[0])+Math.abs(S.rotate[2])>1.5*Math.PI&&(S.rotate[1]=Math.PI-S.rotate[1],S.rotate[1]>Math.PI&&(S.rotate[1]-=2*Math.PI),S.rotate[1]<-Math.PI&&(S.rotate[1]+=2*Math.PI),S.rotate[0]<0?S.rotate[0]+=Math.PI:S.rotate[0]-=Math.PI,S.rotate[2]<0?S.rotate[2]+=Math.PI:S.rotate[2]-=Math.PI),S},s.average=function(t,i,e){e=void 0===e?.5:e;for(var n=s.interpret(t),o=s.interpret(i),r={translate:[0,0,0],rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]},a=0;3>a;a++)r.translate[a]=(1-e)*n.translate[a]+e*o.translate[a],r.rotate[a]=(1-e)*n.rotate[a]+e*o.rotate[a],r.scale[a]=(1-e)*n.scale[a]+e*o.scale[a],r.skew[a]=(1-e)*n.skew[a]+e*o.skew[a];return s.build(r)},s.build=function(t){var i=s.scale(t.scale[0],t.scale[1],t.scale[2]),e=s.skew(t.skew[0],t.skew[1],t.skew[2]),n=s.rotate(t.rotate[0],t.rotate[1],t.rotate[2]);return s.thenMove(s.multiply(s.multiply(n,e),i),t.translate)},s.equals=function(t,i){return!s.notEquals(t,i)},s.notEquals=function(t,i){return t===i?!1:!(t&&i)||t[12]!==i[12]||t[13]!==i[13]||t[14]!==i[14]||t[0]!==i[0]||t[1]!==i[1]||t[2]!==i[2]||t[4]!==i[4]||t[5]!==i[5]||t[6]!==i[6]||t[8]!==i[8]||t[9]!==i[9]||t[10]!==i[10]},s.normalizeRotation=function(t){var i=t.slice(0);for((i[0]===.5*Math.PI||i[0]===.5*-Math.PI)&&(i[0]=-i[0],i[1]=Math.PI-i[1],i[2]-=Math.PI),i[0]>.5*Math.PI&&(i[0]=i[0]-Math.PI,i[1]=Math.PI-i[1],i[2]-=Math.PI),i[0]<.5*-Math.PI&&(i[0]=i[0]+Math.PI,i[1]=-Math.PI-i[1],i[2]-=Math.PI);i[1]<-Math.PI;)i[1]+=2*Math.PI;for(;i[1]>=Math.PI;)i[1]-=2*Math.PI;for(;i[2]<-Math.PI;)i[2]+=2*Math.PI;for(;i[2]>=Math.PI;)i[2]-=2*Math.PI;return i},s.inFront=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,.001,1],s.behind=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-.001,1],i.exports=s},{}],16:[function(t,i){function e(t){this._node=new s,this._eventInput=new n,this._eventOutput=new n,n.setInputHandler(this,this._eventInput),n.setOutputHandler(this,this._eventOutput),this.options=r.clone(this.constructor.DEFAULT_OPTIONS||e.DEFAULT_OPTIONS),this._optionsManager=new o(this.options),t&&this.setOptions(t)}var n=t("./EventHandler"),o=t("./OptionsManager"),s=t("./RenderNode"),r=t("../utilities/Utility");e.DEFAULT_OPTIONS={},e.prototype.getOptions=function(t){return this._optionsManager.getOptions(t)},e.prototype.setOptions=function(t){this._optionsManager.patch(t)},e.prototype.add=function(){return this._node.add.apply(this._node,arguments)},e.prototype._add=e.prototype.add,e.prototype.render=function(){return this._node.render()},e.prototype.getSize=function(){return this._node&&this._node.getSize?this._node.getSize.apply(this._node,arguments)||this.options.size:this.options.size},i.exports=e},{"../utilities/Utility":95,"./EventHandler":7,"./OptionsManager":10,"./RenderNode":11}],17:[function(t,i){function e(t){t||(t=[]),t instanceof Array&&(t={array:t}),this._=null,this.index=t.index||0,t.array?this._=new this.constructor.Backing(t.array):t._&&(this._=t._),this.index===this._.firstIndex&&(this._.firstNode=this),this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),void 0!==t.loop&&(this._.loop=t.loop),void 0!==t.trackSize&&(this._.trackSize=t.trackSize),this._previousNode=null,this._nextNode=null}e.Backing=function(t){this.array=t,this.firstIndex=0,this.loop=!1,this.firstNode=null,this.lastNode=null,this.cumulativeSizes=[[0,0]],this.sizeDirty=!0,this.trackSize=!1},e.Backing.prototype.getValue=function(t){var i=t-this.firstIndex;return 0>i||i>=this.array.length?null:this.array[i]},e.Backing.prototype.setValue=function(t,i){this.array[t-this.firstIndex]=i},e.Backing.prototype.getSize=function(t){return this.cumulativeSizes[t]},e.Backing.prototype.calculateSize=function(t){t=t||this.array.length;for(var i=[0,0],e=0;t>e;e++){var n=this.array[e].getSize();if(!n)return void 0;void 0!==i[0]&&(void 0===n[0]?i[0]=void 0:i[0]+=n[0]),void 0!==i[1]&&(void 0===n[1]?i[1]=void 0:i[1]+=n[1]),this.cumulativeSizes[e+1]=i.slice()}return this.sizeDirty=!1,i},e.Backing.prototype.reindex=function(t,i,e){if(this.array[0]){for(var n=0,o=this.firstIndex,s=e-i,r=this.firstNode;t-1>o;)r=r.getNext(),o++;var a=r;for(n=0;i>n;n++)r=r.getNext(),r&&(r._previousNode=a);var h=r?r.getNext():null;for(a._nextNode=null,r=a,n=0;e>n;n++)r=r.getNext();if(o+=e,r!==h&&(r._nextNode=h,h&&(h._previousNode=r)),h)for(r=h,o++;r&&o<this.array.length+this.firstIndex;)r._nextNode?r.index+=s:r.index=o,r=r.getNext(),o++;this.trackSize&&(this.sizeDirty=!0)}},e.prototype.getPrevious=function(){var t=this._.array.length;return t?this.index===this._.firstIndex?this._.loop?(this._previousNode=this._.lastNode||new this.constructor({_:this._,index:this._.firstIndex+t-1}),this._previousNode._nextNode=this):this._previousNode=null:this._previousNode||(this._previousNode=new this.constructor({_:this._,index:this.index-1}),this._previousNode._nextNode=this):this._previousNode=null,this._previousNode},e.prototype.getNext=function(){var t=this._.array.length;return t?this.index===this._.firstIndex+t-1?this._.loop?(this._nextNode=this._.firstNode||new this.constructor({_:this._,index:this._.firstIndex}),this._nextNode._previousNode=this):this._nextNode=null:this._nextNode||(this._nextNode=new this.constructor({_:this._,index:this.index+1}),this._nextNode._previousNode=this):this._nextNode=null,this._nextNode},e.prototype.indexOf=function(t){return this._.array.indexOf(t)},e.prototype.getIndex=function(){return this.index},e.prototype.toString=function(){return""+this.index},e.prototype.unshift=function(){this._.array.unshift.apply(this._.array,arguments),this._.firstIndex-=arguments.length,this._.trackSize&&(this._.sizeDirty=!0)},e.prototype.push=function(){this._.array.push.apply(this._.array,arguments),this._.trackSize&&(this._.sizeDirty=!0)},e.prototype.splice=function(t,i){var e=Array.prototype.slice.call(arguments,2);this._.array.splice.apply(this._.array,[t-this._.firstIndex,i].concat(e)),this._.reindex(t,i,e.length)},e.prototype.swap=function(t){var i=t.get(),e=this.get();this._.setValue(this.index,i),this._.setValue(t.index,e);var n=this._previousNode,o=this._nextNode,s=this.index,r=t._previousNode,a=t._nextNode,h=t.index;this.index=h,this._previousNode=r===this?t:r,this._previousNode&&(this._previousNode._nextNode=this),this._nextNode=a===this?t:a,this._nextNode&&(this._nextNode._previousNode=this),t.index=s,t._previousNode=n===t?this:n,t._previousNode&&(t._previousNode._nextNode=t),t._nextNode=o===t?this:o,t._nextNode&&(t._nextNode._previousNode=t),this.index===this._.firstIndex?this._.firstNode=this:this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),t.index===this._.firstIndex?this._.firstNode=t:t.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=t),this._.trackSize&&(this._.sizeDirty=!0)},e.prototype.get=function(){return this._.getValue(this.index)},e.prototype.getSize=function(){var t=this.get();return t?t.getSize():null},e.prototype.render=function(){this._.trackSize&&this._.sizeDirty&&this._.calculateSize();var t=this.get();return t?t.render.apply(t,arguments):null},i.exports=e},{}],18:[function(t,i){i.exports={Context:t("./Context"),ElementAllocator:t("./ElementAllocator"),ElementOutput:t("./ElementOutput"),Engine:t("./Engine"),Entity:t("./Entity"),EventEmitter:t("./EventEmitter"),EventHandler:t("./EventHandler"),Group:t("./Group"),Modifier:t("./Modifier"),OptionsManager:t("./OptionsManager"),RenderNode:t("./RenderNode"),Scene:t("./Scene"),SpecParser:t("./SpecParser"),Surface:t("./Surface"),Transform:t("./Transform"),View:t("./View"),ViewSequence:t("./ViewSequence")}},{"./Context":1,"./ElementAllocator":2,"./ElementOutput":3,"./Engine":4,"./Entity":5,"./EventEmitter":6,"./EventHandler":7,"./Group":8,"./Modifier":9,"./OptionsManager":10,"./RenderNode":11,"./Scene":12,"./SpecParser":13,"./Surface":14,"./Transform":15,"./View":16,"./ViewSequence":17}],19:[function(t,i){function e(t){this.dispatchers={},this.currMode=void 0,this.setMode(t)}var n=t("../core/EventHandler");e.prototype.setMode=function(t){if(t!==this.currMode){var i=this.currMode;this.dispatchers[this.currMode]&&this.dispatchers[this.currMode].trigger("unpipe"),this.currMode=t,this.dispatchers[t]&&this.dispatchers[t].emit("pipe"),this.emit("change",{from:i,to:t})}},e.prototype.forMode=function(t){return this.dispatchers[t]||(this.dispatchers[t]=new n),this.dispatchers[t]},e.prototype.emit=function(t,i){if(void 0===this.currMode)return!1;i||(i={});var e=this.dispatchers[this.currMode];return e?e.trigger(t,i):void 0},i.exports=e},{"../core/EventHandler":7}],20:[function(t,i){function e(t){n.call(this),this._condition=t}var n=t("../core/EventHandler");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.emit=function(t,i){return this._condition(t,i)?n.prototype.emit.apply(this,arguments):void 0},e.prototype.trigger=e.prototype.emit,i.exports=e},{"../core/EventHandler":7}],21:[function(t,i){function e(t){n.call(this),this._mappingFunction=t}var n=t("../core/EventHandler");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.subscribe=null,e.prototype.unsubscribe=null,e.prototype.emit=function(t,i){var e=this._mappingFunction.apply(this,arguments);e&&e.emit instanceof Function&&e.emit(t,i)},e.prototype.trigger=e.prototype.emit,i.exports=e},{"../core/EventHandler":7}],22:[function(t,i){i.exports={EventArbiter:t("./EventArbiter"),EventFilter:t("./EventFilter"),EventMapper:t("./EventMapper")}},{"./EventArbiter":19,"./EventFilter":20,"./EventMapper":21}],23:[function(t,i){i.exports={events:t("./events"),core:t("./core"),math:t("./math"),inputs:t("./inputs"),physics:t("./physics"),modifiers:t("./modifiers"),surfaces:t("./surfaces"),transitions:t("./transitions"),utilities:t("./utilities"),views:t("./views"),widgets:t("./widgets")}},{"./core":18,"./events":22,"./inputs":36,"./math":42,"./modifiers":47,"./physics":71,"./surfaces":82,"./transitions":92,"./utilities":96,"./views":111,"./widgets":116}],24:[function(t,i){function e(t,i){void 0===i&&(i="update"),this._state=t&&t.get&&t.set?t:new s(t||0),this._eventInput=new o,o.setInputHandler(this,this._eventInput),this._eventInput.on(i,n.bind(this))}function n(t){var i=t.delta,e=this.get();if(i.constructor===e.constructor){var n=i instanceof Array?[e[0]+i[0],e[1]+i[1]]:e+i;this.set(n)}}var o=t("../core/EventHandler"),s=t("../transitions/Transitionable");e.prototype.get=function(){return this._state.get()},e.prototype.set=function(t){this._state.set(t)},i.exports=e},{"../core/EventHandler":7,"../transitions/Transitionable":88}],25:[function(){function t(t){window.addEventListener(t,function(t){return t.stopPropagation(),!1},!0)}var i="ontouchstart"in window;i&&(t("mousedown"),t("mousemove"),t("mouseup"),t("mouseleave"))},{}],26:[function(){!function(){if(window.CustomEvent){var t=300,i=500,e={},n={},o=Date.now;window.addEventListener("touchstart",function(t){for(var i=o(),n=0;n<t.changedTouches.length;n++){var s=t.changedTouches[n];e[s.identifier]=i}}),window.addEventListener("touchmove",function(t){for(var i=0;i<t.changedTouches.length;i++){var n=t.changedTouches[i];delete e[n.identifier]}}),window.addEventListener("touchend",function(i){for(var s=o(),r=0;r<i.changedTouches.length;r++){var a=i.changedTouches[r],h=e[a.identifier];if(h&&t>s-h){var c=new window.CustomEvent("click",{bubbles:!0,detail:a});n[s]=i,i.target.dispatchEvent(c)}delete e[a.identifier]}}),window.addEventListener("click",function(t){var e=o();for(var s in n){var r=n[s];i>e-s?t instanceof window.MouseEvent&&t.target===r.target&&t.stopPropagation():delete n[s]}},!0)}}()},{}],27:[function(t,i){function e(t,i){this._eventInput=new o,this._eventOutput=new o,o.setInputHandler(this,this._eventInput),o.setOutputHandler(this,this._eventOutput),this._syncs={},t&&this.addSync(t),i&&this.setOptions(i)}function n(t,i){s[t]&&(this._syncs[t]=new s[t](i),this.pipeSync(t))}var o=t("../core/EventHandler");e.DIRECTION_X=0,e.DIRECTION_Y=1,e.DIRECTION_Z=2;var s={};e.register=function(t){for(var i in t){if(s[i]){if(s[i]===t[i])return;throw new Error("this key is registered to a different sync class")}s[i]=t[i]}},e.prototype.setOptions=function(t){for(var i in this._syncs)this._syncs[i].setOptions(t)},e.prototype.pipeSync=function(t){var i=this._syncs[t];this._eventInput.pipe(i),i.pipe(this._eventOutput)},e.prototype.unpipeSync=function(t){var i=this._syncs[t];this._eventInput.unpipe(i),i.unpipe(this._eventOutput)},e.prototype.addSync=function(t){if(t instanceof Array)for(var i=0;i<t.length;i++)n.call(this,t[i]);else if(t instanceof Object)for(var e in t)n.call(this,e,t[e])},i.exports=e},{"../core/EventHandler":7}],28:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),this._optionsManager=new h(this.options),t&&this.setOptions(t),this._eventInput=new a,this._eventOutput=new a,a.setInputHandler(this,this._eventInput),a.setOutputHandler(this,this._eventOutput),this._eventInput.on("mousedown",n.bind(this)),this._eventInput.on("mousemove",o.bind(this)),this._eventInput.on("mouseup",s.bind(this)),this.options.propogate?this._eventInput.on("mouseleave",r.bind(this)):this._eventInput.on("mouseleave",s.bind(this)),this._payload={delta:null,position:null,velocity:null,clientX:0,clientY:0,offsetX:0,offsetY:0},this._positionHistory=[],this._position=null,this._prevCoord=void 0,this._prevTime=void 0,this._down=!1,this._moved=!1,this._documentActive=!1}function n(t){var i,e;this.options.preventDefault&&t.preventDefault();var n=t.clientX,o=t.clientY;this._prevCoord=[n,o],this._prevTime=Date.now(),this._down=!0,this._move=!1,void 0!==this.options.direction?(this._position=0,i=0,e=0):(this._position=[0,0],i=[0,0],e=[0,0]);var s=this._payload;s.delta=i,s.position=this._position,s.velocity=e,s.clientX=n,s.clientY=o,s.offsetX=t.offsetX,s.offsetY=t.offsetY,this._positionHistory.push({position:s.position.slice?s.position.slice(0):s.position,time:this._prevTime}),this._eventOutput.emit("start",s),this._documentActive=!1}function o(t){if(this._prevCoord){var i=this._prevCoord,n=(this._prevTime,t.clientX),o=t.clientY,s=Date.now(),r=n-i[0],a=o-i[1];this.options.rails&&(Math.abs(r)>Math.abs(a)?a=0:r=0);var h,p,u=Math.max(s-this._positionHistory[0].time,c),l=this.options.scale;this.options.direction===e.DIRECTION_X?(p=l*r,this._position+=p,h=l*(this._position-this._positionHistory[0].position)/u):this.options.direction===e.DIRECTION_Y?(p=l*a,this._position+=p,h=l*(this._position-this._positionHistory[0].position)/u):(p=[l*r,l*a],h=[l*(this._position[0]-this._positionHistory[0].position[0])/u,l*(this._position[1]-this._positionHistory[0].position[1])/u],this._position[0]+=p[0],this._position[1]+=p[1]);var f=this._payload;f.delta=p,f.position=this._position,f.velocity=h,f.clientX=n,f.clientY=o,f.offsetX=t.offsetX,f.offsetY=t.offsetY,this._positionHistory.length===this.options.velocitySampleLength&&this._positionHistory.shift(),this._positionHistory.push({position:f.position.slice?f.position.slice(0):f.position,time:s}),this._eventOutput.emit("update",f),this._prevCoord=[n,o],this._prevTime=s,this._move=!0}}function s(){this._down&&(this._eventOutput.emit("end",this._payload),this._prevCoord=void 0,this._prevTime=void 0,this._down=!1,this._move=!1,this._positionHistory=[])}function r(t){if(this._down&&this._move&&!this._documentActive){var i=o.bind(this),e=function(t){s.call(this,t),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",e)}.bind(this,t);document.addEventListener("mousemove",i),document.addEventListener("mouseup",e),this._documentActive=!0}}var a=t("../core/EventHandler"),h=t("../core/OptionsManager");e.DEFAULT_OPTIONS={direction:void 0,rails:!1,scale:1,propogate:!0,velocitySampleLength:10,preventDefault:!0},e.DIRECTION_X=0,e.DIRECTION_Y=1;var c=8;e.prototype.getOptions=function(){return this.options},e.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},i.exports=e},{"../core/EventHandler":7,"../core/OptionsManager":10}],29:[function(t,i){function e(t){n.call(this),this.options=Object.create(e.DEFAULT_OPTIONS),this._optionsManager=new o(this.options),t&&this.setOptions(t),this._displacement=0,this._previousDistance=0}var n=t("./TwoFingerSync"),o=t("../core/OptionsManager");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.DEFAULT_OPTIONS={scale:1},e.prototype._startUpdate=function(t){this._previousDistance=n.calculateDistance(this.posA,this.posB),this._displacement=0,this._eventOutput.emit("start",{count:t.touches.length,touches:[this.touchAId,this.touchBId],distance:this._dist,center:n.calculateCenter(this.posA,this.posB)})},e.prototype._moveUpdate=function(t){var i=n.calculateDistance(this.posA,this.posB),e=n.calculateCenter(this.posA,this.posB),o=this.options.scale,s=o*(i-this._previousDistance),r=s/t;this._previousDistance=i,this._displacement+=s,this._eventOutput.emit("update",{delta:s,velocity:r,distance:i,displacement:this._displacement,center:e,touches:[this.touchAId,this.touchBId]})},e.prototype.getOptions=function(){return this.options},e.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},i.exports=e},{"../core/OptionsManager":10,"./TwoFingerSync":35}],30:[function(t,i){function e(t){n.call(this),this.options=Object.create(e.DEFAULT_OPTIONS),this._optionsManager=new o(this.options),t&&this.setOptions(t),this._angle=0,this._previousAngle=0}var n=t("./TwoFingerSync"),o=t("../core/OptionsManager");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.DEFAULT_OPTIONS={scale:1},e.prototype._startUpdate=function(t){this._angle=0,this._previousAngle=n.calculateAngle(this.posA,this.posB);var i=n.calculateCenter(this.posA,this.posB);this._eventOutput.emit("start",{count:t.touches.length,angle:this._angle,center:i,touches:[this.touchAId,this.touchBId]})},e.prototype._moveUpdate=function(t){var i=this.options.scale,e=n.calculateAngle(this.posA,this.posB),o=n.calculateCenter(this.posA,this.posB),s=i*(e-this._previousAngle),r=s/t;this._angle+=s,this._eventOutput.emit("update",{delta:s,velocity:r,angle:this._angle,center:o,touches:[this.touchAId,this.touchBId]}),this._previousAngle=e},e.prototype.getOptions=function(){return this.options},e.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},i.exports=e},{"../core/OptionsManager":10,"./TwoFingerSync":35}],31:[function(t,i){function e(t){o.call(this),this.options=Object.create(e.DEFAULT_OPTIONS),this._optionsManager=new s(this.options),t&&this.setOptions(t),this._scaleFactor=1,this._startDist=0,this._eventInput.on("pipe",n.bind(this))}function n(){this.touchAId=void 0,this.touchBId=void 0}var o=t("./TwoFingerSync"),s=t("../core/OptionsManager");e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.DEFAULT_OPTIONS={scale:1},e.prototype._startUpdate=function(t){this._scaleFactor=1,this._startDist=o.calculateDistance(this.posA,this.posB),this._eventOutput.emit("start",{count:t.touches.length,touches:[this.touchAId,this.touchBId],distance:this._startDist,center:o.calculateCenter(this.posA,this.posB)})},e.prototype._moveUpdate=function(t){var i=this.options.scale,e=o.calculateDistance(this.posA,this.posB),n=o.calculateCenter(this.posA,this.posB),s=(e-this._startDist)/this._startDist,r=Math.max(1+i*s,0),a=(r-this._scaleFactor)/t;this._eventOutput.emit("update",{delta:s,scale:r,velocity:a,distance:e,center:n,touches:[this.touchAId,this.touchBId]}),this._scaleFactor=r},e.prototype.getOptions=function(){return this.options},e.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},i.exports=e},{"../core/OptionsManager":10,"./TwoFingerSync":35}],32:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),this._optionsManager=new a(this.options),t&&this.setOptions(t),this._payload={delta:null,position:null,velocity:null,slip:!0},this._eventInput=new s,this._eventOutput=new s,s.setInputHandler(this,this._eventInput),s.setOutputHandler(this,this._eventOutput),this._position=void 0===this.options.direction?[0,0]:0,this._prevTime=void 0,this._prevVel=void 0,this._eventInput.on("mousewheel",o.bind(this)),this._eventInput.on("wheel",o.bind(this)),this._inProgress=!1,this._loopBound=!1}function n(){if(this._inProgress&&c()-this._prevTime>this.options.stallTime){this._inProgress=!1;var t=Math.abs(this._prevVel)>=this.options.minimumEndSpeed?this._prevVel:0,i=this._payload;i.position=this._position,i.velocity=t,i.slip=!0,this._eventOutput.emit("end",i)}}function o(t){this.options.preventDefault&&t.preventDefault(),this._inProgress||(this._inProgress=!0,this._position=void 0===this.options.direction?[0,0]:0,y=this._payload,y.slip=!0,y.position=this._position,y.clientX=t.clientX,y.clientY=t.clientY,y.offsetX=t.offsetX,y.offsetY=t.offsetY,this._eventOutput.emit("start",y),this._loopBound||(r.on("prerender",n.bind(this)),this._loopBound=!0));var i=c(),o=this._prevTime||i,s=void 0!==t.wheelDeltaX?t.wheelDeltaX:-t.deltaX,a=void 0!==t.wheelDeltaY?t.wheelDeltaY:-t.deltaY;1===t.deltaMode&&(s*=this.options.lineHeight,a*=this.options.lineHeight),this.options.rails&&(Math.abs(s)>Math.abs(a)?a=0:s=0);var p,u,l=Math.max(i-o,h),f=s/l,d=a/l,_=this.options.scale;this.options.direction===e.DIRECTION_X?(u=_*s,p=_*f,this._position+=u):this.options.direction===e.DIRECTION_Y?(u=_*a,p=_*d,this._position+=u):(u=[_*s,_*a],p=[_*f,_*d],this._position[0]+=u[0],this._position[1]+=u[1]);var y=this._payload;y.delta=u,y.velocity=p,y.position=this._position,y.slip=!0,this._eventOutput.emit("update",y),this._prevTime=i,this._prevVel=p}var s=t("../core/EventHandler"),r=t("../core/Engine"),a=t("../core/OptionsManager");e.DEFAULT_OPTIONS={direction:void 0,minimumEndSpeed:1/0,rails:!1,scale:1,stallTime:50,lineHeight:40,preventDefault:!0},e.DIRECTION_X=0,e.DIRECTION_Y=1;var h=8,c=Date.now;e.prototype.getOptions=function(){return this.options},e.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},i.exports=e},{"../core/Engine":4,"../core/EventHandler":7,"../core/OptionsManager":10}],33:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),this._optionsManager=new h(this.options),t&&this.setOptions(t),this._eventOutput=new a,this._touchTracker=new r({touchLimit:this.options.touchLimit}),a.setOutputHandler(this,this._eventOutput),a.setInputHandler(this,this._touchTracker),this._touchTracker.on("trackstart",n.bind(this)),this._touchTracker.on("trackmove",o.bind(this)),this._touchTracker.on("trackend",s.bind(this)),this._payload={delta:null,position:null,velocity:null,clientX:void 0,clientY:void 0,count:0,touch:void 0},this._position=null}function n(t){var i,e;void 0!==this.options.direction?(this._position=0,i=0,e=0):(this._position=[0,0],i=[0,0],e=[0,0]);var n=this._payload;n.delta=e,n.position=this._position,n.velocity=i,n.clientX=t.x,n.clientY=t.y,n.count=t.count,n.touch=t.identifier,this._eventOutput.emit("start",n)}function o(t){var i=t.history,n=i[i.length-1],o=i[i.length-2],s=i[i.length-this.options.velocitySampleLength]?i[i.length-this.options.velocitySampleLength]:i[i.length-2],r=s.timestamp,a=n.timestamp,h=n.x-o.x,p=n.y-o.y,u=n.x-s.x,l=n.y-s.y;this.options.rails&&(Math.abs(h)>Math.abs(p)?p=0:h=0,Math.abs(u)>Math.abs(l)?l=0:u=0);var f,d,_=Math.max(a-r,c),y=u/_,g=l/_,v=this.options.scale;this.options.direction===e.DIRECTION_X?(d=v*h,f=v*y,this._position+=d):this.options.direction===e.DIRECTION_Y?(d=v*p,f=v*g,this._position+=d):(d=[v*h,v*p],f=[v*y,v*g],this._position[0]+=d[0],this._position[1]+=d[1]);var m=this._payload;m.delta=d,m.velocity=f,m.position=this._position,m.clientX=t.x,m.clientY=t.y,m.count=t.count,m.touch=t.identifier,this._eventOutput.emit("update",m)}function s(t){this._payload.count=t.count,this._eventOutput.emit("end",this._payload)}var r=t("./TouchTracker"),a=t("../core/EventHandler"),h=t("../core/OptionsManager");e.DEFAULT_OPTIONS={direction:void 0,rails:!1,touchLimit:1,velocitySampleLength:10,scale:1},e.DIRECTION_X=0,e.DIRECTION_Y=1;var c=8;e.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},e.prototype.getOptions=function(){return this.options},i.exports=e},{"../core/EventHandler":7,"../core/OptionsManager":10,"./TouchTracker":34}],34:[function(t,i){function e(t,i,e){return{x:t.clientX,y:t.clientY,identifier:t.identifier,origin:i.origin,timestamp:c(),count:i.touches.length,history:e}}function n(t){if(!(t.touches.length>this.touchLimit)){this.isTouched=!0;for(var i=0;i<t.changedTouches.length;i++){var n=t.changedTouches[i],o=e(n,t,null);this.eventOutput.emit("trackstart",o),this.selective||this.touchHistory[n.identifier]||this.track(o)}}}function o(t){if(!(t.touches.length>this.touchLimit))for(var i=0;i<t.changedTouches.length;i++){var n=t.changedTouches[i],o=this.touchHistory[n.identifier];if(o){var s=e(n,t,o);this.touchHistory[n.identifier].push(s),this.eventOutput.emit("trackmove",s)}}}function s(t){if(this.isTouched){for(var i=0;i<t.changedTouches.length;i++){var n=t.changedTouches[i],o=this.touchHistory[n.identifier];if(o){var s=e(n,t,o);this.eventOutput.emit("trackend",s),delete this.touchHistory[n.identifier]}}this.isTouched=!1}}function r(){for(var t in this.touchHistory){var i=this.touchHistory[t];this.eventOutput.emit("trackend",{touch:i[i.length-1].touch,timestamp:Date.now(),count:0,history:i}),delete this.touchHistory[t]}}function a(t){this.selective=t.selective,this.touchLimit=t.touchLimit||1,this.touchHistory={},this.eventInput=new h,this.eventOutput=new h,h.setInputHandler(this,this.eventInput),h.setOutputHandler(this,this.eventOutput),this.eventInput.on("touchstart",n.bind(this)),this.eventInput.on("touchmove",o.bind(this)),this.eventInput.on("touchend",s.bind(this)),this.eventInput.on("touchcancel",s.bind(this)),this.eventInput.on("unpipe",r.bind(this)),this.isTouched=!1}var h=t("../core/EventHandler"),c=Date.now;a.prototype.track=function(t){this.touchHistory[t.identifier]=[t]},i.exports=a},{"../core/EventHandler":7}],35:[function(t,i){function e(){this._eventInput=new n,this._eventOutput=new n,n.setInputHandler(this,this._eventInput),n.setOutputHandler(this,this._eventOutput),this.touchAEnabled=!1,this.touchAId=0,this.posA=null,this.timestampA=0,this.touchBEnabled=!1,this.touchBId=0,this.posB=null,this.timestampB=0,this._eventInput.on("touchstart",this.handleStart.bind(this)),this._eventInput.on("touchmove",this.handleMove.bind(this)),this._eventInput.on("touchend",this.handleEnd.bind(this)),this._eventInput.on("touchcancel",this.handleEnd.bind(this))}var n=t("../core/EventHandler");e.calculateAngle=function(t,i){var e=i[0]-t[0],n=i[1]-t[1];return Math.atan2(n,e)},e.calculateDistance=function(t,i){var e=i[0]-t[0],n=i[1]-t[1];return Math.sqrt(e*e+n*n)},e.calculateCenter=function(t,i){return[(t[0]+i[0])/2,(t[1]+i[1])/2]};var o=Date.now;e.prototype.handleStart=function(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i];this.touchAEnabled?this.touchBEnabled||(this.touchBId=e.identifier,this.touchBEnabled=!0,this.posB=[e.pageX,e.pageY],this.timestampB=o(),this._startUpdate(t)):(this.touchAId=e.identifier,this.touchAEnabled=!0,this.posA=[e.pageX,e.pageY],this.timestampA=o())}},e.prototype.handleMove=function(t){if(this.touchAEnabled&&this.touchBEnabled){for(var i,e=this.timestampA,n=this.timestampB,s=0;s<t.changedTouches.length;s++){var r=t.changedTouches[s];r.identifier===this.touchAId?(this.posA=[r.pageX,r.pageY],this.timestampA=o(),i=this.timestampA-e):r.identifier===this.touchBId&&(this.posB=[r.pageX,r.pageY],this.timestampB=o(),i=this.timestampB-n)}i&&this._moveUpdate(i)}},e.prototype.handleEnd=function(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i];(e.identifier===this.touchAId||e.identifier===this.touchBId)&&(this.touchAEnabled&&this.touchBEnabled&&this._eventOutput.emit("end",{touches:[this.touchAId,this.touchBId],angle:this._angle}),this.touchAEnabled=!1,this.touchAId=0,this.touchBEnabled=!1,this.touchBId=0)}},i.exports=e},{"../core/EventHandler":7}],36:[function(t,i){i.exports={Accumulator:t("./Accumulator"),DesktopEmulationMode:t("./DesktopEmulationMode"),FastClick:t("./FastClick"),GenericSync:t("./GenericSync"),MouseSync:t("./MouseSync"),PinchSync:t("./PinchSync"),RotateSync:t("./RotateSync"),ScaleSync:t("./ScaleSync"),ScrollSync:t("./ScrollSync"),TouchSync:t("./TouchSync"),TouchTracker:t("./TouchTracker"),TwoFingerSync:t("./TwoFingerSync")}},{"./Accumulator":24,"./DesktopEmulationMode":25,"./FastClick":26,"./GenericSync":27,"./MouseSync":28,"./PinchSync":29,"./RotateSync":30,"./ScaleSync":31,"./ScrollSync":32,"./TouchSync":33,"./TouchTracker":34,"./TwoFingerSync":35}],37:[function(t,i){function e(t){return this.values=t||[[1,0,0],[0,1,0],[0,0,1]],this}var n=t("./Vector"),o=new e,s=new n;
e.prototype.get=function(){return this.values},e.prototype.set=function(t){this.values=t},e.prototype.vectorMultiply=function(t){var i=this.get(),e=t.x,n=t.y,o=t.z,r=i[0],a=i[1],h=i[2],c=r[0],p=r[1],u=r[2],l=a[0],f=a[1],d=a[2],_=h[0],y=h[1],g=h[2];return s.setXYZ(c*e+p*n+u*o,l*e+f*n+d*o,_*e+y*n+g*o)},e.prototype.multiply=function(t){for(var i=this.get(),e=[[]],n=0;3>n;n++){e[n]=[];for(var s=0;3>s;s++){for(var r=0,a=0;3>a;a++)r+=i[n][a]*t[a][s];e[n][s]=r}}return o.set(e)},e.prototype.transpose=function(){for(var t=[],i=this.get(),e=0;3>e;e++)for(var n=0;3>n;n++)t[e][n]=i[n][e];return o.set(t)},e.prototype.clone=function(){for(var t=this.get(),i=[],n=0;3>n;n++)i[n]=t[n].slice();return new e(i)},i.exports=e},{"./Vector":41}],38:[function(t,i){function e(t,i,e,n){return 1===arguments.length?this.set(t):(this.w=void 0!==t?t:1,this.x=void 0!==i?i:0,this.y=void 0!==e?e:0,this.z=void 0!==n?n:0),this}var n=t("./Matrix"),o=new e(1,0,0,0);e.prototype.add=function(t){return o.setWXYZ(this.w+t.w,this.x+t.x,this.y+t.y,this.z+t.z)},e.prototype.sub=function(t){return o.setWXYZ(this.w-t.w,this.x-t.x,this.y-t.y,this.z-t.z)},e.prototype.scalarDivide=function(t){return this.scalarMultiply(1/t)},e.prototype.scalarMultiply=function(t){return o.setWXYZ(this.w*t,this.x*t,this.y*t,this.z*t)},e.prototype.multiply=function(t){var i=this.x,e=this.y,n=this.z,s=this.w,r=t.x,a=t.y,h=t.z,c=t.w||0;return o.setWXYZ(s*c-i*r-e*a-n*h,i*c+r*s+a*n-e*h,e*c+a*s+i*h-r*n,n*c+h*s+r*e-i*a)};var s=new e(1,0,0,0);e.prototype.rotateVector=function(t){return s.set(this.conj()),o.set(this.multiply(t).multiply(s))},e.prototype.inverse=function(){return o.set(this.conj().scalarDivide(this.normSquared()))},e.prototype.negate=function(){return this.scalarMultiply(-1)},e.prototype.conj=function(){return o.setWXYZ(this.w,-this.x,-this.y,-this.z)},e.prototype.normalize=function(t){return t=void 0===t?1:t,this.scalarDivide(t*this.norm())},e.prototype.makeFromAngleAndAxis=function(t,i){var e=i.normalize(),n=.5*t,o=-Math.sin(n);return this.x=o*e.x,this.y=o*e.y,this.z=o*e.z,this.w=Math.cos(n),this},e.prototype.setWXYZ=function(t,i,e,n){return o.clear(),this.w=t,this.x=i,this.y=e,this.z=n,this},e.prototype.set=function(t){return t instanceof Array?(this.w=0,this.x=t[0],this.y=t[1],this.z=t[2]):(this.w=t.w,this.x=t.x,this.y=t.y,this.z=t.z),this!==o&&o.clear(),this},e.prototype.put=function(t){t.set(o)},e.prototype.clone=function(){return new e(this)},e.prototype.clear=function(){return this.w=1,this.x=0,this.y=0,this.z=0,this},e.prototype.isEqual=function(t){return t.w===this.w&&t.x===this.x&&t.y===this.y&&t.z===this.z},e.prototype.dot=function(t){return this.w*t.w+this.x*t.x+this.y*t.y+this.z*t.z},e.prototype.normSquared=function(){return this.dot(this)},e.prototype.norm=function(){return Math.sqrt(this.normSquared())},e.prototype.isZero=function(){return!(this.x||this.y||this.z)},e.prototype.getTransform=function(){var t=this.normalize(1),i=t.x,e=t.y,n=t.z,o=t.w;return[1-2*e*e-2*n*n,2*i*e-2*n*o,2*i*n+2*e*o,0,2*i*e+2*n*o,1-2*i*i-2*n*n,2*e*n-2*i*o,0,2*i*n-2*e*o,2*e*n+2*i*o,1-2*i*i-2*e*e,0,0,0,0,1]};var r=new n;e.prototype.getMatrix=function(){var t=this.normalize(1),i=t.x,e=t.y,n=t.z,o=t.w;return r.set([[1-2*e*e-2*n*n,2*i*e+2*n*o,2*i*n-2*e*o],[2*i*e-2*n*o,1-2*i*i-2*n*n,2*e*n+2*i*o],[2*i*n+2*e*o,2*e*n-2*i*o,1-2*i*i-2*e*e]])};var a=1e-5;e.prototype.slerp=function(t,i){var e,n,s,r,h;return n=this.dot(t),1-n>a?(e=Math.acos(n),s=Math.sin(e),r=Math.sin((1-i)*e)/s,h=Math.sin(i*e)/s):(r=1-i,h=i),o.set(this.scalarMultiply(r/h).add(t).multiply(h))},i.exports=e},{"./Matrix":37}],39:[function(t,i){function e(t,i){return t+o()*(i-t)}function n(t,i){return t+o()*(i-t+1)>>0}var o=Math.random,s={};s.integer=function(t,i,e){if(t=void 0!==t?t:0,i=void 0!==i?i:1,void 0!==e){for(var o=[],s=0;e>s;s++)o.push(n(t,i));return o}return n(t,i)},s.range=function(t,i,n){if(t=void 0!==t?t:0,i=void 0!==i?i:1,void 0!==n){for(var o=[],s=0;n>s;s++)o.push(e(t,i));return o}return e(t,i)},s.sign=function(t){return t=void 0!==t?t:.5,o()<t?1:-1},s.bool=function(t){return t=void 0!==t?t:.5,o()<t},i.exports=s},{}],40:[function(t,i){var e={};e.clamp=function(t,i){return Math.max(Math.min(t,i[1]),i[0])},e.length=function(t){for(var i=0,e=0;e<t.length;e++)i+=t[e]*t[e];return Math.sqrt(i)},i.exports=e},{}],41:[function(t,i){function e(t,i,e){return 1===arguments.length&&void 0!==t?this.set(t):(this.x=t||0,this.y=i||0,this.z=e||0),this}function n(t,i,e){return this.x=t,this.y=i,this.z=e,this}function o(t){return n.call(this,t[0],t[1],t[2]||0)}function s(t){return n.call(this,t.x,t.y,t.z)}function r(t){return n.call(this,t,0,0)}var a=new e(0,0,0);e.prototype.add=function(t){return n.call(a,this.x+t.x,this.y+t.y,this.z+t.z)},e.prototype.sub=function(t){return n.call(a,this.x-t.x,this.y-t.y,this.z-t.z)},e.prototype.mult=function(t){return n.call(a,t*this.x,t*this.y,t*this.z)},e.prototype.div=function(t){return this.mult(1/t)},e.prototype.cross=function(t){var i=this.x,e=this.y,o=this.z,s=t.x,r=t.y,h=t.z;return n.call(a,o*r-e*h,i*h-o*s,e*s-i*r)},e.prototype.equals=function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},e.prototype.rotateX=function(t){var i=this.x,e=this.y,o=this.z,s=Math.cos(t),r=Math.sin(t);return n.call(a,i,e*s-o*r,e*r+o*s)},e.prototype.rotateY=function(t){var i=this.x,e=this.y,o=this.z,s=Math.cos(t),r=Math.sin(t);return n.call(a,o*r+i*s,e,o*s-i*r)},e.prototype.rotateZ=function(t){var i=this.x,e=this.y,o=this.z,s=Math.cos(t),r=Math.sin(t);return n.call(a,i*s-e*r,i*r+e*s,o)},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},e.prototype.normSquared=function(){return this.dot(this)},e.prototype.norm=function(){return Math.sqrt(this.normSquared())},e.prototype.normalize=function(t){0===arguments.length&&(t=1);var i=this.norm();return i>1e-7?s.call(a,this.mult(t/i)):n.call(a,t,0,0)},e.prototype.clone=function(){return new e(this)},e.prototype.isZero=function(){return!(this.x||this.y||this.z)},e.prototype.set=function(t){return t instanceof Array?o.call(this,t):"number"==typeof t?r.call(this,t):s.call(this,t)},e.prototype.setXYZ=function(){return n.apply(this,arguments)},e.prototype.set1D=function(t){return r.call(this,t)},e.prototype.put=function(t){this===a?s.call(t,a):s.call(t,this)},e.prototype.clear=function(){return n.call(this,0,0,0)},e.prototype.cap=function h(h){if(1/0===h)return s.call(a,this);var t=this.norm();return t>h?s.call(a,this.mult(h/t)):s.call(a,this)},e.prototype.project=function(t){return t.mult(this.dot(t))},e.prototype.reflectAcross=function(t){return t.normalize().put(t),s(a,this.sub(this.project(t).mult(2)))},e.prototype.get=function(){return[this.x,this.y,this.z]},e.prototype.get1D=function(){return this.x},i.exports=e},{}],42:[function(t,i){i.exports={Matrix:t("./Matrix"),Quaternion:t("./Quaternion"),Random:t("./Random"),Utilities:t("./Utilities"),Vector:t("./Vector")}},{"./Matrix":37,"./Quaternion":38,"./Random":39,"./Utilities":40,"./Vector":41}],43:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),t&&this.setOptions(t),this._positionState=new c([0,0]),this._differential=[0,0],this._active=!0,this.sync=new l(["mouse","touch"],{scale:this.options.scale}),this.eventOutput=new p,p.setInputHandler(this,this.sync),p.setOutputHandler(this,this.eventOutput),a.call(this)}function n(t){var i=this.options,e=i.projection,n=i.snapX,o=i.snapY,s=e&_.x?t[0]:0,r=e&_.y?t[1]:0;return n>0&&(s-=s%n),o>0&&(r-=r%o),[s,r]}function o(){this._active&&(this._positionState.isActive()&&this._positionState.halt(),this.eventOutput.emit("start",{position:this.getPosition()}))}function s(t){if(this._active){var i=this.options;this._differential=t.position;var e=n.call(this,this._differential);this._differential[0]-=e[0],this._differential[1]-=e[1];var o=this.getPosition();if(o[0]+=e[0],o[1]+=e[1],i.xRange){var s=[i.xRange[0]+.5*i.snapX,i.xRange[1]-.5*i.snapX];o[0]=y(o[0],s)}if(i.yRange){var r=[i.yRange[0]+.5*i.snapY,i.yRange[1]-.5*i.snapY];o[1]=y(o[1],r)}this.eventOutput.emit("update",{position:o})}}function r(){this._active&&this.eventOutput.emit("end",{position:this.getPosition()})}function a(){this.sync.on("start",o.bind(this)),this.sync.on("update",s.bind(this)),this.sync.on("end",r.bind(this))}var h=t("../core/Transform"),c=t("../transitions/Transitionable"),p=t("../core/EventHandler"),u=t("../math/Utilities"),l=t("../inputs/GenericSync"),f=t("../inputs/MouseSync"),d=t("../inputs/TouchSync");l.register({mouse:f,touch:d});var _={x:1,y:2};e.DIRECTION_X=_.x,e.DIRECTION_Y=_.y;var y=u.clamp;e.DEFAULT_OPTIONS={projection:_.x|_.y,scale:1,xRange:null,yRange:null,snapX:0,snapY:0,transition:{duration:0}},e.prototype.setOptions=function(t){var i=this.options;if(void 0!==t.projection){var e=t.projection;this.options.projection=0,["x","y"].forEach(function(t){-1!==e.indexOf(t)&&(i.projection|=_[t])})}void 0!==t.scale&&(i.scale=t.scale,this.sync.setOptions({scale:t.scale})),void 0!==t.xRange&&(i.xRange=t.xRange),void 0!==t.yRange&&(i.yRange=t.yRange),void 0!==t.snapX&&(i.snapX=t.snapX),void 0!==t.snapY&&(i.snapY=t.snapY)},e.prototype.getPosition=function(){return this._positionState.get()},e.prototype.setRelativePosition=function(t,i,e){var n=this.getPosition(),o=[n[0]+t[0],n[1]+t[1]];this.setPosition(o,i,e)},e.prototype.setPosition=function(t,i,e){this._positionState.isActive()&&this._positionState.halt(),this._positionState.set(t,i,e)},e.prototype.activate=function(){this._active=!0},e.prototype.deactivate=function(){this._active=!1},e.prototype.toggle=function(){this._active=!this._active},e.prototype.modify=function(t){var i=this.getPosition();return{transform:h.translate(i[0],i[1]),target:t}},i.exports=e},{"../core/EventHandler":7,"../core/Transform":15,"../inputs/GenericSync":27,"../inputs/MouseSync":28,"../inputs/TouchSync":33,"../math/Utilities":40,"../transitions/Transitionable":88}],44:[function(t,i){function e(t,i){this.options=Object.create(e.DEFAULT_OPTIONS),this._optionsManager=new o(this.options),t&&this.setOptions(t),i||(i=0),this.transitionHelper=new n(i)}var n=t("../transitions/Transitionable"),o=t("../core/OptionsManager");e.DEFAULT_OPTIONS={cull:!1,transition:!0,pulseInTransition:!0,pulseOutTransition:!0},e.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},e.prototype.show=function(t,i){t=t||this.options.transition,this.set(1,t,i)},e.prototype.hide=function(t,i){t=t||this.options.transition,this.set(0,t,i)},e.prototype.set=function(t,i,e){this.halt(),this.transitionHelper.set(t,i,e)},e.prototype.halt=function(){this.transitionHelper.halt()},e.prototype.isVisible=function(){return this.transitionHelper.get()>0},e.prototype.modify=function(t){var i=this.transitionHelper.get();return this.options.cull&&!i?void 0:{opacity:i,target:t}},i.exports=e},{"../core/OptionsManager":10,"../transitions/Transitionable":88}],45:[function(t,i){function e(){this._chain=[],arguments.length&&this.addModifier.apply(this,arguments)}e.prototype.addModifier=function(){Array.prototype.push.apply(this._chain,arguments)},e.prototype.removeModifier=function(t){var i=this._chain.indexOf(t);0>i||this._chain.splice(i,1)},e.prototype.modify=function(t){for(var i=this._chain,e=t,n=0;n<i.length;n++)e=i[n].modify(e);return e},i.exports=e},{}],46:[function(t,i){function e(t){this._transformState=new r(o.identity),this._opacityState=new s(1),this._originState=new s([0,0]),this._alignState=new s([0,0]),this._sizeState=new s([0,0]),this._proportionsState=new s([0,0]),this._modifier=new n({transform:this._transformState,opacity:this._opacityState,origin:null,align:null,size:null,proportions:null}),this._hasOrigin=!1,this._hasAlign=!1,this._hasSize=!1,this._hasProportions=!1,t&&(t.transform&&this.setTransform(t.transform),void 0!==t.opacity&&this.setOpacity(t.opacity),t.origin&&this.setOrigin(t.origin),t.align&&this.setAlign(t.align),t.size&&this.setSize(t.size),t.proportions&&this.setProportions(t.proportions))}var n=t("../core/Modifier"),o=t("../core/Transform"),s=t("../transitions/Transitionable"),r=t("../transitions/TransitionableTransform");e.prototype.setTransform=function(t,i,e){return this._transformState.set(t,i,e),this},e.prototype.setOpacity=function(t,i,e){return this._opacityState.set(t,i,e),this},e.prototype.setOrigin=function(t,i,e){return null===t?(this._hasOrigin&&(this._modifier.originFrom(null),this._hasOrigin=!1),this):(this._hasOrigin||(this._hasOrigin=!0,this._modifier.originFrom(this._originState)),this._originState.set(t,i,e),this)},e.prototype.setAlign=function(t,i,e){return null===t?(this._hasAlign&&(this._modifier.alignFrom(null),this._hasAlign=!1),this):(this._hasAlign||(this._hasAlign=!0,this._modifier.alignFrom(this._alignState)),this._alignState.set(t,i,e),this)},e.prototype.setSize=function(t,i,e){return null===t?(this._hasSize&&(this._modifier.sizeFrom(null),this._hasSize=!1),this):(this._hasSize||(this._hasSize=!0,this._modifier.sizeFrom(this._sizeState)),this._sizeState.set(t,i,e),this)},e.prototype.setProportions=function(t,i,e){return null===t?(this._hasProportions&&(this._modifier.proportionsFrom(null),this._hasProportions=!1),this):(this._hasProportions||(this._hasProportions=!0,this._modifier.proportionsFrom(this._proportionsState)),this._proportionsState.set(t,i,e),this)},e.prototype.halt=function(){this._transformState.halt(),this._opacityState.halt(),this._originState.halt(),this._alignState.halt(),this._sizeState.halt(),this._proportionsState.halt()},e.prototype.getTransform=function(){return this._transformState.get()},e.prototype.getFinalTransform=function(){return this._transformState.getFinal()},e.prototype.getOpacity=function(){return this._opacityState.get()},e.prototype.getOrigin=function(){return this._hasOrigin?this._originState.get():null},e.prototype.getAlign=function(){return this._hasAlign?this._alignState.get():null},e.prototype.getSize=function(){return this._hasSize?this._sizeState.get():null},e.prototype.getProportions=function(){return this._hasProportions?this._proportionsState.get():null},e.prototype.modify=function(t){return this._modifier.modify(t)},i.exports=e},{"../core/Modifier":9,"../core/Transform":15,"../transitions/Transitionable":88,"../transitions/TransitionableTransform":89}],47:[function(t,i){i.exports={Draggable:t("./Draggable"),Fader:t("./Fader"),ModifierChain:t("./ModifierChain"),StateModifier:t("./StateModifier")}},{"./Draggable":43,"./Fader":44,"./ModifierChain":45,"./StateModifier":46}],48:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),t&&this.setOptions(t),this._particles=[],this._bodies=[],this._agentData={},this._forces=[],this._constraints=[],this._buffer=0,this._prevTime=S(),this._isSleeping=!1,this._eventHandler=null,this._currAgentId=0,this._hasBodies=!1,this._eventHandler=null}function n(t){return t.applyForce?this._forces:t.applyConstraint?this._constraints:void 0}function o(t,i,e){return void 0===i&&(i=this.getParticlesAndBodies()),i instanceof Array||(i=[i]),t.on("change",this.wake.bind(this)),this._agentData[this._currAgentId]={agent:t,id:this._currAgentId,targets:i,source:e},n.call(this,t).push(this._currAgentId),this._currAgentId++}function s(t){return this._agentData[t]}function r(t){var i=s.call(this,this._forces[t]);i.agent.applyForce(i.targets,i.source)}function a(){for(var t=this._forces.length-1;t>-1;t--)r.call(this,t)}function h(t,i){var e=this._agentData[this._constraints[t]];return e.agent.applyConstraint(e.targets,e.source,i)}function c(t){for(var i=0;i<this.options.constraintSteps;){for(var e=this._constraints.length-1;e>-1;e--)h.call(this,e,t);i++}}function p(t,i){t.integrateVelocity(i),this.options.velocityCap&&t.velocity.cap(this.options.velocityCap).put(t.velocity)}function u(t,i){t.integrateAngularMomentum(i),t.updateAngularVelocity(),this.options.angularVelocityCap&&t.angularVelocity.cap(this.options.angularVelocityCap).put(t.angularVelocity)}function l(t,i){t.integrateOrientation(i)}function f(t,i){t.integratePosition(i),t.emit(T.update,t)}function d(t){a.call(this,t),this.forEach(p,t),this.forEachBody(u,t),c.call(this,t),this.forEachBody(l,t),this.forEach(f,t)}function _(){var t=0,i=0;return this.forEach(function(e){i=e.getEnergy(),t+=i}),t}function y(){var t=0;for(var i in this._agentData)t+=this.getAgentEnergy(i);return t}var g=t("../core/EventHandler"),v=17,m=1e3/120,O=17,S=Date.now,T={start:"start",update:"update",end:"end"};e.DEFAULT_OPTIONS={constraintSteps:1,sleepTolerance:1e-7,velocityCap:void 0,angularVelocityCap:void 0},e.prototype.setOptions=function(t){for(var i in t)this.options[i]&&(this.options[i]=t[i])},e.prototype.addBody=function(t){return t._engine=this,t.isBody?(this._bodies.push(t),this._hasBodies=!0):this._particles.push(t),t.on("start",this.wake.bind(this)),t},e.prototype.removeBody=function(t){var i=t.isBody?this._bodies:this._particles,e=i.indexOf(t);if(e>-1){for(var n in this._agentData)this.detachFrom(n.id,t);i.splice(e,1)}0===this.getBodies().length&&(this._hasBodies=!1)},e.prototype.attach=function(t,i,e){if(this.wake(),t instanceof Array){for(var n=[],s=0;s<t.length;s++)n[s]=o.call(this,t[s],i,e);return n}return o.call(this,t,i,e)},e.prototype.attachTo=function(t,i){s.call(this,t).targets.push(i)},e.prototype.detach=function(t){var i=this.getAgent(t),e=n.call(this,i),o=e.indexOf(t);e.splice(o,1),delete this._agentData[t]},e.prototype.detachFrom=function(t,i){var e=s.call(this,t);if(e.source===i)this.detach(t);else{var n=e.targets,o=n.indexOf(i);o>-1&&n.splice(o,1)}},e.prototype.detachAll=function(){this._agentData={},this._forces=[],this._constraints=[],this._currAgentId=0},e.prototype.getAgent=function(t){return s.call(this,t).agent},e.prototype.getParticles=function(){return this._particles},e.prototype.getBodies=function(){return this._bodies},e.prototype.getParticlesAndBodies=function(){return this.getParticles().concat(this.getBodies())},e.prototype.forEachParticle=function(t,i){for(var e=this.getParticles(),n=0,o=e.length;o>n;n++)t.call(this,e[n],i)},e.prototype.forEachBody=function(t,i){if(this._hasBodies)for(var e=this.getBodies(),n=0,o=e.length;o>n;n++)t.call(this,e[n],i)},e.prototype.forEach=function(t,i){this.forEachParticle(t,i),this.forEachBody(t,i)},e.prototype.getAgentEnergy=function(t){var i=s.call(this,t);return i.agent.getEnergy(i.targets,i.source)},e.prototype.getEnergy=function(){return _.call(this)+y.call(this)},e.prototype.step=function(){if(!this.isSleeping()){var t=S(),i=t-this._prevTime;this._prevTime=t,m>i||(i>O&&(i=O),d.call(this,v),this.emit(T.update,this),this.getEnergy()<this.options.sleepTolerance&&this.sleep())}},e.prototype.isSleeping=function(){return this._isSleeping},e.prototype.isActive=function(){return!this._isSleeping},e.prototype.sleep=function(){this._isSleeping||(this.forEach(function(t){t.sleep()}),this.emit(T.end,this),this._isSleeping=!0)},e.prototype.wake=function(){this._isSleeping&&(this._prevTime=S(),this.emit(T.start,this),this._isSleeping=!1)},e.prototype.emit=function(t,i){null!==this._eventHandler&&this._eventHandler.emit(t,i)},e.prototype.on=function(t,i){null===this._eventHandler&&(this._eventHandler=new g),this._eventHandler.on(t,i)},i.exports=e},{"../core/EventHandler":7}],49:[function(t,i){function e(t){n.call(this,t),t=t||{},this.orientation=new r,this.angularVelocity=new s,this.angularMomentum=new s,this.torque=new s,t.orientation&&this.orientation.set(t.orientation),t.angularVelocity&&this.angularVelocity.set(t.angularVelocity),t.angularMomentum&&this.angularMomentum.set(t.angularMomentum),t.torque&&this.torque.set(t.torque),this.angularVelocity.w=0,this.setMomentsOfInertia(),this.pWorld=new s}var n=t("./Particle"),o=t("../../core/Transform"),s=t("../../math/Vector"),r=t("../../math/Quaternion"),a=t("../../math/Matrix"),h=t("../integrators/SymplecticEuler");e.DEFAULT_OPTIONS=n.DEFAULT_OPTIONS,e.DEFAULT_OPTIONS.orientation=[0,0,0,1],e.DEFAULT_OPTIONS.angularVelocity=[0,0,0],e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.isBody=!0,e.prototype.setMass=function(){n.prototype.setMass.apply(this,arguments),this.setMomentsOfInertia()},e.prototype.setMomentsOfInertia=function(){this.inertia=new a,this.inverseInertia=new a},e.prototype.updateAngularVelocity=function(){this.angularVelocity.set(this.inverseInertia.vectorMultiply(this.angularMomentum))},e.prototype.toWorldCoordinates=function(t){return this.pWorld.set(this.orientation.rotateVector(t))},e.prototype.getEnergy=function(){return n.prototype.getEnergy.call(this)+.5*this.inertia.vectorMultiply(this.angularVelocity).dot(this.angularVelocity)},e.prototype.reset=function(t,i,e,o){n.prototype.reset.call(this,t,i),this.angularVelocity.clear(),this.setOrientation(e||[1,0,0,0]),this.setAngularMomentum(o||[0,0,0])},e.prototype.setOrientation=function(t){this.orientation.set(t)},e.prototype.setAngularVelocity=function(t){this.wake(),this.angularVelocity.set(t)},e.prototype.setAngularMomentum=function(t){this.wake(),this.angularMomentum.set(t)},e.prototype.applyForce=function(t,i){n.prototype.applyForce.call(this,t),void 0!==i&&this.applyTorque(i.cross(t))},e.prototype.applyTorque=function(t){this.wake(),this.torque.set(this.torque.add(t))},e.prototype.getTransform=function(){return o.thenMove(this.orientation.getTransform(),o.getTranslate(n.prototype.getTransform.call(this)))},e.prototype._integrate=function(t){n.prototype._integrate.call(this,t),this.integrateAngularMomentum(t),this.updateAngularVelocity(t),this.integrateOrientation(t)},e.prototype.integrateAngularMomentum=function(t){h.integrateAngularMomentum(this,t)},e.prototype.integrateOrientation=function(t){h.integrateOrientation(this,t)},i.exports=e},{"../../core/Transform":15,"../../math/Matrix":37,"../../math/Quaternion":38,"../../math/Vector":41,"../integrators/SymplecticEuler":72,"./Particle":51}],50:[function(t,i){function e(t){t=t||{},this.setRadius(t.radius||0),n.call(this,t)}var n=t("./Body"),o=t("../../math/Matrix");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.setRadius=function(t){this.radius=t,this.size=[2*this.radius,2*this.radius],this.setMomentsOfInertia()},e.prototype.setMomentsOfInertia=function(){var t=this.mass,i=this.radius;this.inertia=new o([[.25*t*i*i,0,0],[0,.25*t*i*i,0],[0,0,.5*t*i*i]]),this.inverseInertia=new o([[4/(t*i*i),0,0],[0,4/(t*i*i),0],[0,0,2/(t*i*i)]])},i.exports=e},{"../../math/Matrix":37,"./Body":49}],51:[function(t,i){function e(t){t=t||{};var i=e.DEFAULT_OPTIONS;this.position=new o,this.velocity=new o,this.force=new o,this._engine=null,this._isSleeping=!0,this._eventOutput=null,this.mass=void 0!==t.mass?t.mass:i.mass,this.inverseMass=1/this.mass,this.setPosition(t.position||i.position),this.setVelocity(t.velocity||i.velocity),this.force.set(t.force||[0,0,0]),this.transform=s.identity.slice(),this._spec={size:[!0,!0],target:{transform:this.transform,origin:[.5,.5],target:null}}}function n(){this._eventOutput=new r,this._eventOutput.bindThis(this),r.setOutputHandler(this,this._eventOutput)}var o=t("../../math/Vector"),s=t("../../core/Transform"),r=t("../../core/EventHandler"),a=t("../integrators/SymplecticEuler");e.DEFAULT_OPTIONS={position:[0,0,0],velocity:[0,0,0],mass:1};var h={start:"start",update:"update",end:"end"},c=Date.now;e.prototype.isBody=!1,e.prototype.isActive=function(){return!this._isSleeping},e.prototype.sleep=function(){this._isSleeping||(this.emit(h.end,this),this._isSleeping=!0)},e.prototype.wake=function(){this._isSleeping&&(this.emit(h.start,this),this._isSleeping=!1,this._prevTime=c(),this._engine&&this._engine.wake())},e.prototype.setPosition=function(t){this.position.set(t)},e.prototype.setPosition1D=function(t){this.position.x=t},e.prototype.getPosition=function(){return this._engine.step(),this.position.get()},e.prototype.getPosition1D=function(){return this._engine.step(),this.position.x},e.prototype.setVelocity=function(t){this.velocity.set(t),(0!==t[0]||0!==t[1]||0!==t[2])&&this.wake()},e.prototype.setVelocity1D=function(t){this.velocity.x=t,0!==t&&this.wake()},e.prototype.getVelocity=function(){return this.velocity.get()},e.prototype.setForce=function(t){this.force.set(t),this.wake()},e.prototype.getVelocity1D=function(){return this.velocity.x},e.prototype.setMass=function(t){this.mass=t,this.inverseMass=1/t},e.prototype.getMass=function(){return this.mass},e.prototype.reset=function(t,i){this.setPosition(t||[0,0,0]),this.setVelocity(i||[0,0,0])},e.prototype.applyForce=function(t){t.isZero()||(this.force.add(t).put(this.force),this.wake())},e.prototype.applyImpulse=function(t){if(!t.isZero()){var i=this.velocity;i.add(t.mult(this.inverseMass)).put(i)}},e.prototype.integrateVelocity=function(t){a.integrateVelocity(this,t)},e.prototype.integratePosition=function(t){a.integratePosition(this,t)},e.prototype._integrate=function(t){this.integrateVelocity(t),this.integratePosition(t)},e.prototype.getEnergy=function(){return.5*this.mass*this.velocity.normSquared()},e.prototype.getTransform=function(){this._engine.step();var t=this.position,i=this.transform;return i[12]=t.x,i[13]=t.y,i[14]=t.z,i},e.prototype.modify=function(t){var i=this._spec.target;return i.transform=this.getTransform(),i.target=t,this._spec},e.prototype.emit=function(t,i){this._eventOutput&&this._eventOutput.emit(t,i)},e.prototype.on=function(){return n.call(this),this.on.apply(this,arguments)},e.prototype.removeListener=function(){return n.call(this),this.removeListener.apply(this,arguments)},e.prototype.pipe=function(){return n.call(this),this.pipe.apply(this,arguments)},e.prototype.unpipe=function(){return n.call(this),this.unpipe.apply(this,arguments)},i.exports=e},{"../../core/EventHandler":7,"../../core/Transform":15,"../../math/Vector":41,"../integrators/SymplecticEuler":72}],52:[function(t,i){function e(t){t=t||{},this.size=t.size||[0,0],n.call(this,t)}var n=t("./Body"),o=t("../../math/Matrix");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.setSize=function(t){this.size=t,this.setMomentsOfInertia()},e.prototype.setMomentsOfInertia=function(){var t=this.mass,i=this.size[0],e=this.size[1];this.inertia=new o([[t*e*e/12,0,0],[0,t*i*i/12,0],[0,0,t*(i*i+e*e)/12]]),this.inverseInertia=new o([[12/(t*e*e),0,0],[0,12/(t*i*i),0],[0,0,12/(t*(i*i+e*e))]])},i.exports=e},{"../../math/Matrix":37,"./Body":49}],53:[function(t,i){i.exports={Body:t("./Body"),Circle:t("./Circle"),Particle:t("./Particle"),Rectangle:t("./Rectangle")}},{"./Body":49,"./Circle":50,"./Particle":51,"./Rectangle":52}],54:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),t&&this.setOptions(t),this.normal=new o,this.pDiff=new o,this.vDiff=new o,this.impulse1=new o,this.impulse2=new o,n.call(this)}var n=t("./Constraint"),o=t("../../math/Vector");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.DEFAULT_OPTIONS={restitution:.5,drift:.5,slop:0},e.prototype.setOptions=function(t){for(var i in t)this.options[i]=t[i]},e.prototype.applyConstraint=function(t,i,e){if(void 0!==i)for(var n=i.velocity,o=i.position,s=i.inverseMass,r=i.radius,a=this.options,h=a.drift,c=-a.slop,p=a.restitution,u=this.normal,l=this.pDiff,f=this.vDiff,d=this.impulse1,_=this.impulse2,y=0;y<t.length;y++){var g=t[y];if(g!==i){var v=g.velocity,m=g.position,O=g.inverseMass,S=g.radius;l.set(m.sub(o)),f.set(v.sub(n));var T=l.norm(),w=T-(r+S),b=1/(s+O),E=0;if(0>w){if(u.set(l.normalize()),this._eventOutput){var I={target:g,source:i,overlap:w,normal:u};this._eventOutput.emit("preCollision",I),this._eventOutput.emit("collision",I)}var x=c>=w?((1+p)*u.dot(f)+h/e*(w-c))/(E+e/b):(1+p)*u.dot(f)/(E+e/b);u.mult(e*x).put(d),d.mult(-1).put(_),i.applyImpulse(d),g.applyImpulse(_),this._eventOutput&&this._eventOutput.emit("postCollision",I)}}}},i.exports=e},{"../../math/Vector":41,"./Constraint":55}],55:[function(t,i){function e(){this.options=this.options||{},this._eventOutput=new n,n.setOutputHandler(this,this._eventOutput)}var n=t("../../core/EventHandler");e.prototype.setOptions=function(t){this._eventOutput.emit("change",t)},e.prototype.applyConstraint=function(){},e.prototype.getEnergy=function(){return 0},i.exports=e},{"../../core/EventHandler":7}],56:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),t&&this.setOptions(t),this.J=new o,this.impulse=new o,n.call(this)}var n=t("./Constraint"),o=t("../../math/Vector");e.prototype=Object.create(n.prototype),e.prototype.constructor=e;var s=1e-7,r=Math.PI;e.DEFAULT_OPTIONS={equation:function(){return 0},plane:function(t,i,e){return e},period:0,dampingRatio:0},e.prototype.setOptions=function(t){for(var i in t)this.options[i]=t[i]},e.prototype.applyConstraint=function(t,i,e){for(var n=this.options,o=this.impulse,a=this.J,h=n.equation,c=n.plane,p=n.dampingRatio,u=n.period,l=0;l<t.length;l++){var f,d,_=t[l],y=_.velocity,g=_.position,v=_.mass;if(0===u)f=0,d=1;else{var m=4*v*r*p/u,O=4*v*r*r/(u*u);f=1/(m+e*O),d=e*O/(m+e*O)}var S=g.x,T=g.y,w=g.z,b=h(S,T,w),E=(h(S+s,g,g)-b)/s,I=(h(S,T+s,g)-b)/s,x=(h(S,T,g+s)-b)/s,M=c(S,T,w),z=(c(S+s,T,w)-M)/s,C=(c(S,T+s,w)-M)/s,P=(c(S,T,w+s)-M)/s;a.setXYZ(E+z,I+C,x+P);var F=d/e*(b+M),D=-(a.dot(y)+F)/(f+e*a.normSquared()/v);o.set(a.mult(e*D)),_.applyImpulse(o)}},i.exports=e},{"../../math/Vector":41,"./Constraint":55}],57:[function(t,i){function e(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),this.impulse=new o,this.normal=new o,this.diffP=new o,this.diffV=new o,n.call(this)}var n=t("./Constraint"),o=t("../../math/Vector");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.DEFAULT_OPTIONS={anchor:null,length:0,minLength:0,period:0,dampingRatio:0};var s=Math.PI;e.prototype.setOptions=function(t){t.anchor&&(t.anchor.position instanceof o&&(this.options.anchor=t.anchor.position),t.anchor instanceof o&&(this.options.anchor=t.anchor),t.anchor instanceof Array&&(this.options.anchor=new o(t.anchor))),void 0!==t.length&&(this.options.length=t.length),void 0!==t.dampingRatio&&(this.options.dampingRatio=t.dampingRatio),void 0!==t.period&&(this.options.period=t.period),void 0!==t.minLength&&(this.options.minLength=t.minLength)},e.prototype.setAnchor=function(t){this.options.anchor||(this.options.anchor=new o),this.options.anchor.set(t)},e.prototype.applyConstraint=function(t,i,e){var n,o,r=this.normal,a=this.diffP,h=this.diffV,c=this.impulse,p=this.options,u=p.dampingRatio,l=p.period,f=p.minLength;if(i){var d=i.velocity;n=i.position,o=i.inverseMass}else n=this.options.anchor,o=0;for(var _=this.options.length,y=0;y<t.length;y++){var g=t[y],v=g.velocity,m=g.position,O=g.inverseMass;a.set(m.sub(n)),r.set(a.normalize());var S=a.norm()-_;if(Math.abs(S)<f)return;h.set(i?v.sub(d):v);var T,w,b=1/(O+o);if(0===l)T=0,w=1;else{var E=4*b*s*u/l,I=4*b*s*s/(l*l);T=1/(E+e*I),w=e*I/(E+e*I)}var x=w/e*S,M=-(r.dot(h)+x)/(T+e/b);c.set(r.mult(e*M)),g.applyImpulse(c),i&&i.applyImpulse(c.mult(-1))}},i.exports=e},{"../../math/Vector":41,"./Constraint":55}],58:[function(t,i){function e(t){n.call(this),this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),this.pDiff=new o,this.vDiff=new o,this.impulse1=new o,this.impulse2=new o}var n=t("./Constraint"),o=t("../../math/Vector");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.DEFAULT_OPTIONS={period:300,dampingRatio:.1,length:0,anchor:void 0};var s=Math.PI;e.prototype.setOptions=function(t){void 0!==t.anchor&&(t.anchor instanceof o&&(this.options.anchor=t.anchor),t.anchor.position instanceof o&&(this.options.anchor=t.anchor.position),t.anchor instanceof Array&&(this.options.anchor=new o(t.anchor))),void 0!==t.length&&(this.options.length=t.length),void 0!==t.dampingRatio&&(this.options.dampingRatio=t.dampingRatio),void 0!==t.period&&(this.options.period=t.period),n.prototype.setOptions.call(this,t)},e.prototype.getEnergy=function(t,i){for(var e=this.options,n=e.length,o=e.anchor||i.position,r=Math.pow(2*s/e.period,2),a=0,h=0;h<t.length;h++){var c=t[h],p=o.sub(c.position).norm()-n;a+=.5*r*p*p}return a},e.prototype.applyConstraint=function(t,i,e){for(var n=this.options,o=this.pDiff,r=this.vDiff,a=this.impulse1,h=this.impulse2,c=n.length,p=n.anchor||i.position,u=n.period,l=n.dampingRatio,f=0;f<t.length;f++){var d=t[f],_=d.position,y=d.velocity,g=d.mass,v=d.inverseMass;
o.set(_.sub(p));var m,O=o.norm()-c;if(i){var S=i.inverseMass,T=i.velocity;r.set(y.sub(T)),m=1/(v+S)}else r.set(y),m=g;var w,b;if(0===this.options.period)w=0,b=1;else{var E=4*m*s*s/(u*u),I=4*m*s*l/u;b=e*E/(I+e*E),w=1/(I+e*E)}var x=b/e*O;o.normalize(-x).sub(r).mult(e/(w+e/m)).put(a),d.applyImpulse(a),i&&(a.mult(-1).put(h),i.applyImpulse(h))}},i.exports=e},{"../../math/Vector":41,"./Constraint":55}],59:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),t&&this.setOptions(t),this.J=new o,this.impulse=new o,n.call(this)}var n=t("./Constraint"),o=t("../../math/Vector");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.DEFAULT_OPTIONS={equation:void 0,period:0,dampingRatio:0};var s=1e-7,r=Math.PI;e.prototype.setOptions=function(t){for(var i in t)this.options[i]=t[i]},e.prototype.applyConstraint=function(t,i,e){for(var n=this.impulse,o=this.J,a=this.options,h=a.equation,c=a.dampingRatio,p=a.period,u=0;u<t.length;u++){var l,f,d=t[u],_=d.velocity,y=d.position,g=d.mass;if(0===p)l=0,f=1;else{var v=4*g*r*c/p,m=4*g*r*r/(p*p);l=1/(v+e*m),f=e*m/(v+e*m)}var O=y.x,S=y.y,T=y.z,w=h(O,S,T),b=(h(O+s,y,y)-w)/s,E=(h(O,S+s,y)-w)/s,I=(h(O,S,y+s)-w)/s;o.setXYZ(b,E,I);var x=f/e*w,M=-(o.dot(_)+x)/(l+e*o.normSquared()/g);n.set(o.mult(e*M)),d.applyImpulse(n)}},i.exports=e},{"../../math/Vector":41,"./Constraint":55}],60:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),t&&this.setOptions(t),this.diff=new h,this.impulse=new h,a.call(this)}function n(t,i){return i.dot(t)}function o(t){var i=this.options.normal,e=this.options.distance;return t.dot(i)+e}function s(t,i,n){var o=t.position,s=t.velocity,r=t.mass,a=this.options.normal,h=this.options.onContact,c=this.options.restitution,p=this.impulse,u=this.options.drift,l=-this.options.slop,f=0;if(this._eventOutput){var d={particle:t,wall:this,overlap:i,normal:a};this._eventOutput.emit("preCollision",d),this._eventOutput.emit("collision",d)}switch(h){case e.ON_CONTACT.REFLECT:var _=l>i?-((1+c)*a.dot(s)+u/n*(i-l))/(r*n+f):-((1+c)*a.dot(s))/(r*n+f);p.set(a.mult(n*_)),t.applyImpulse(p),t.setPosition(o.add(a.mult(-i)))}this._eventOutput&&this._eventOutput.emit("postCollision",d)}function r(t,i){var n=this.options.onContact,o=t.position,s=this.options.normal;n===e.ON_CONTACT.REFLECT&&t.setPosition(o.add(s.mult(-i)))}var a=t("./Constraint"),h=t("../../math/Vector");e.prototype=Object.create(a.prototype),e.prototype.constructor=e,e.ON_CONTACT={REFLECT:0,SILENT:1},e.DEFAULT_OPTIONS={restitution:.5,drift:.5,slop:0,normal:[1,0,0],distance:0,onContact:e.ON_CONTACT.REFLECT},e.prototype.setOptions=function(t){void 0!==t.normal&&(t.normal instanceof h&&(this.options.normal=t.normal.clone()),t.normal instanceof Array&&(this.options.normal=new h(t.normal))),void 0!==t.restitution&&(this.options.restitution=t.restitution),void 0!==t.drift&&(this.options.drift=t.drift),void 0!==t.slop&&(this.options.slop=t.slop),void 0!==t.distance&&(this.options.distance=t.distance),void 0!==t.onContact&&(this.options.onContact=t.onContact)},e.prototype.applyConstraint=function(t,i,e){for(var a=this.options.normal,h=0;h<t.length;h++){var c=t[h],p=c.position,u=c.velocity,l=c.radius||0,f=o.call(this,p.add(a.mult(-l))),d=n.call(this,a,u);0>=f&&(0>d?s.call(this,c,f,e):r.call(this,c,f,e))}},i.exports=e},{"../../math/Vector":41,"./Constraint":55}],61:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),t&&this.setOptions(t),o.call(this,t.sides||this.options.sides),r.call(this)}function n(t,i,n){var o,s=e.SIDES;switch(parseInt(t)){case s.LEFT:o=i[0]*n[0];break;case s.TOP:o=i[1]*n[1];break;case s.FRONT:o=i[2]*n[2];break;case s.RIGHT:o=i[0]*(1-n[0]);break;case s.BOTTOM:o=i[1]*(1-n[1]);break;case s.BACK:o=i[2]*(1-n[2])}return o}function o(t){this.components={};for(var i=this.components,e=0;e<t.length;e++){var o=t[e];i[e]=new a({normal:c[o].clone(),distance:n(o,this.options.size,this.options.origin)})}}function s(t){this.forEach(function(i){i.setOptions(t)});for(var i in t)this.options[i]=t[i]}var r=t("./Constraint"),a=t("./Wall"),h=t("../../math/Vector");e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.ON_CONTACT=a.ON_CONTACT,e.SIDES={LEFT:0,RIGHT:1,TOP:2,BOTTOM:3,FRONT:4,BACK:5,TWO_DIMENSIONAL:[0,1,2,3],THREE_DIMENSIONAL:[0,1,2,3,4,5]},e.DEFAULT_OPTIONS={sides:e.SIDES.TWO_DIMENSIONAL,size:[window.innerWidth,window.innerHeight,0],origin:[.5,.5,.5],drift:.5,slop:0,restitution:.5,onContact:e.ON_CONTACT.REFLECT};var c={0:new h(1,0,0),1:new h(-1,0,0),2:new h(0,1,0),3:new h(0,-1,0),4:new h(0,0,1),5:new h(0,0,-1)};e.prototype.setOptions=function(t){var i=!1;void 0!==t.restitution&&s.call(this,{restitution:t.restitution}),void 0!==t.drift&&s.call(this,{drift:t.drift}),void 0!==t.slop&&s.call(this,{slop:t.slop}),void 0!==t.onContact&&s.call(this,{onContact:t.onContact}),void 0!==t.size&&(i=!0),void 0!==t.sides&&(this.options.sides=t.sides),void 0!==t.origin&&(i=!0),i&&this.setSize(t.size,t.origin)},e.prototype.setSize=function(t,i){i=i||this.options.origin,i.length<3&&(i[2]=.5),this.forEach(function(e,o){var s=n(o,t,i);e.setOptions({distance:s})}),this.options.size=t,this.options.origin=i},e.prototype.applyConstraint=function(t,i,e){this.forEach(function(n){n.applyConstraint(t,i,e)})},e.prototype.forEach=function(t){var i=this.options.sides;for(var e in this.sides)t(i[e],e)},e.prototype.rotateZ=function(t){this.forEach(function(i){var e=i.options.normal;e.rotateZ(t).put(e)})},e.prototype.rotateX=function(t){this.forEach(function(i){var e=i.options.normal;e.rotateX(t).put(e)})},e.prototype.rotateY=function(t){this.forEach(function(i){var e=i.options.normal;e.rotateY(t).put(e)})},i.exports=e},{"../../math/Vector":41,"./Constraint":55,"./Wall":60}],62:[function(t,i){i.exports={Collision:t("./Collision"),Constraint:t("./Constraint"),Curve:t("./Curve"),Distance:t("./Distance"),Snap:t("./Snap"),Surface:t("./Surface"),Wall:t("./Wall"),Walls:t("./Walls")}},{"./Collision":54,"./Constraint":55,"./Curve":56,"./Distance":57,"./Snap":58,"./Surface":59,"./Wall":60,"./Walls":61}],63:[function(t,i){function e(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),n.call(this)}var n=t("./Force");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.FORCE_FUNCTIONS={LINEAR:function(t){return t},QUADRATIC:function(t){return t.mult(t.norm())}},e.DEFAULT_OPTIONS={strength:.01,forceFunction:e.FORCE_FUNCTIONS.LINEAR},e.prototype.applyForce=function(t){var i,e,n=this.options.strength,o=this.options.forceFunction,s=this.force;for(i=0;i<t.length;i++)e=t[i],o(e.velocity).mult(-n).put(s),e.applyForce(s)},e.prototype.setOptions=function(t){for(var i in t)this.options[i]=t[i]},i.exports=e},{"./Force":64}],64:[function(t,i){function e(t){this.force=new n(t),this._eventOutput=new o,o.setOutputHandler(this,this._eventOutput)}var n=t("../../math/Vector"),o=t("../../core/EventHandler");e.prototype.setOptions=function(t){this._eventOutput.emit("change",t)},e.prototype.applyForce=function(t){for(var i=t.length;i--;)t[i].applyForce(this.force)},e.prototype.getEnergy=function(){return 0},i.exports=e},{"../../core/EventHandler":7,"../../math/Vector":41}],65:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),t&&this.setOptions(t),this.disp=new o,n.call(this)}var n=t("./Force"),o=t("../../math/Vector");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.DECAY_FUNCTIONS={LINEAR:function(t,i){return Math.max(1-1/i*t,0)},MORSE:function(t,i){var e=0===i?100:i,n=t+e*(1-Math.log(2));return Math.max(1-Math.pow(1-Math.exp(n/e-1),2),0)},INVERSE:function(t,i){return 1/(1-i+t)},GRAVITY:function(t,i){return 1/(1-i+t*t)}},e.DEFAULT_OPTIONS={strength:1,anchor:void 0,range:[0,1/0],cutoff:0,cap:1/0,decayFunction:e.DECAY_FUNCTIONS.GRAVITY},e.prototype.setOptions=function(t){void 0!==t.anchor&&(t.anchor.position instanceof o&&(this.options.anchor=t.anchor.position),t.anchor instanceof Array&&(this.options.anchor=new o(t.anchor)),delete t.anchor);for(var i in t)this.options[i]=t[i]},e.prototype.applyForce=function(t,i){var e=this.options,n=this.force,o=this.disp,s=e.strength,r=e.anchor||i.position,a=e.cap,h=e.cutoff,c=e.range[0],p=e.range[1],u=e.decayFunction;if(0!==s)for(var l,f,d,_,y=t.length;y--;)l=t[y],l!==i&&(f=l.mass,d=l.position,o.set(d.sub(r)),_=o.norm(),p>_&&_>c&&(n.set(o.normalize(s*f*u(_,h)).cap(a)),l.applyForce(n)))},i.exports=e},{"../../math/Vector":41,"./Force":64}],66:[function(t,i){function e(t){n.call(this,t)}var n=t("./Drag");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.DEFAULT_OPTIONS=n.DEFAULT_OPTIONS,e.FORCE_FUNCTIONS=n.FORCE_FUNCTIONS,e.FORCE_FUNCTIONS={LINEAR:function(t){return t},QUADRATIC:function(t){return t.mult(t.norm())}},e.prototype.applyForce=function(t){var i,e,n=this.options.strength,o=this.options.forceFunction,s=this.force;for(i=0;i<t.length;i++)e=t[i],o(e.angularVelocity).mult(-100*n).put(s),e.applyTorque(s)},e.prototype.setOptions=function(t){for(var i in t)this.options[i]=t[i]},i.exports=e},{"./Drag":63}],67:[function(t,i){function e(t){a.call(this,t)}function n(){var t=this.options;t.stiffness=Math.pow(2*c/t.period,2)}function o(){var t=this.options;t.damping=4*c*t.dampingRatio/t.period}function s(){n.call(this),o.call(this)}var r=t("./Force"),a=t("./Spring"),h=t("../../math/Quaternion");e.prototype=Object.create(a.prototype),e.prototype.constructor=e,e.DEFAULT_OPTIONS=a.DEFAULT_OPTIONS,e.FORCE_FUNCTIONS=a.FORCE_FUNCTIONS;var c=Math.PI;e.prototype.setOptions=function(t){void 0!==t.anchor&&(t.anchor instanceof h&&(this.options.anchor=t.anchor),t.anchor instanceof Array&&(this.options.anchor=new h(t.anchor))),void 0!==t.period&&(this.options.period=t.period),void 0!==t.dampingRatio&&(this.options.dampingRatio=t.dampingRatio),void 0!==t.length&&(this.options.length=t.length),void 0!==t.forceFunction&&(this.options.forceFunction=t.forceFunction),void 0!==t.maxLength&&(this.options.maxLength=t.maxLength),s.call(this),r.prototype.setOptions.call(this,t)},e.prototype.applyForce=function(t){var i,e,n,o,s=this.force,r=this.options,a=this.disp,h=r.stiffness,c=r.damping,p=r.length,u=r.anchor,l=r.forceFunction,f=r.maxLength;for(i=0;i<t.length;i++){if(e=t[i],a.set(u.sub(e.orientation)),n=a.norm()-p,0===n)return;o=e.mass,h*=o,c*=o,s.set(a.normalize(h*l(n,f))),c&&s.add(e.angularVelocity.mult(-c)).put(s),e.applyTorque(s)}},e.prototype.getEnergy=function(t){for(var i=this.options,e=i.length,n=i.anchor,o=i.stiffness,s=0,r=0;r<t.length;r++){var a=t[r],h=n.sub(a.orientation).norm()-e;s+=.5*o*h*h}return s},i.exports=e},{"../../math/Quaternion":38,"./Force":64,"./Spring":68}],68:[function(t,i){function e(t){r.call(this),this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),this.disp=new a(0,0,0),s.call(this)}function n(){var t=this.options;t.stiffness=Math.pow(2*h/t.period,2)}function o(){var t=this.options;t.damping=4*h*t.dampingRatio/t.period}function s(){n.call(this),o.call(this)}var r=t("./Force"),a=t("../../math/Vector");e.prototype=Object.create(r.prototype),e.prototype.constructor=e;var h=Math.PI,c=150;e.FORCE_FUNCTIONS={FENE:function(t,i){var e=.99*i,n=Math.max(Math.min(t,e),-e);return n/(1-n*n/(i*i))},HOOK:function(t){return t}},e.DEFAULT_OPTIONS={period:300,dampingRatio:.1,length:0,maxLength:1/0,anchor:void 0,forceFunction:e.FORCE_FUNCTIONS.HOOK},e.prototype.setOptions=function(t){void 0!==t.anchor&&(t.anchor.position instanceof a&&(this.options.anchor=t.anchor.position),t.anchor instanceof a&&(this.options.anchor=t.anchor),t.anchor instanceof Array&&(this.options.anchor=new a(t.anchor))),void 0!==t.period&&(t.period<c&&(t.period=c,console.warn("The period of a SpringTransition is capped at "+c+" ms. Use a SnapTransition for faster transitions")),this.options.period=t.period),void 0!==t.dampingRatio&&(this.options.dampingRatio=t.dampingRatio),void 0!==t.length&&(this.options.length=t.length),void 0!==t.forceFunction&&(this.options.forceFunction=t.forceFunction),void 0!==t.maxLength&&(this.options.maxLength=t.maxLength),s.call(this),r.prototype.setOptions.call(this,t)},e.prototype.applyForce=function(t,i){var e,n,o,s,r,a,h=this.force,c=this.disp,p=this.options,u=p.stiffness,l=p.damping,f=p.length,d=p.maxLength,_=p.anchor||i.position,y=p.forceFunction;for(e=0;e<t.length;e++){if(n=t[e],o=n.position,s=n.velocity,_.sub(o).put(c),r=c.norm()-f,0===r)return;a=n.mass,u*=a,l*=a,c.normalize(u*y(r,d)).put(h),l&&(i?h.add(s.sub(i.velocity).mult(-l)).put(h):h.add(s.mult(-l)).put(h)),n.applyForce(h),i&&i.applyForce(h.mult(-1))}},e.prototype.getEnergy=function(t,i){for(var e=this.options,n=e.length,o=i?i.position:e.anchor,s=e.stiffness,r=0,a=0;a<t.length;a++){var h=t[a],c=o.sub(h.position).norm()-n;r+=.5*s*c*c}return r},i.exports=e},{"../../math/Vector":41,"./Force":64}],69:[function(t,i){function e(t){o.call(this),this.options=Object.create(e.DEFAULT_OPTIONS),t&&this.setOptions(t),this.evaluation=new s}function n(t){var i=e.FIELDS;switch(t){case i.CONSTANT:this.options.direction?this.options.direction instanceof Array&&(this.options.direction=new s(this.options.direction)):this.options.direction=new s(0,1,0);break;case i.POINT_ATTRACTOR:this.options.position?this.options.position instanceof Array&&(this.options.position=new s(this.options.position)):this.options.position=new s(0,0,0)}}var o=t("./Force"),s=t("../../math/Vector");e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.FIELDS={CONSTANT:function(t,i){i.direction.put(this.evaluation)},LINEAR:function(t){t.put(this.evaluation)},RADIAL:function(t){t.mult(-1).put(this.evaluation)},POINT_ATTRACTOR:function(t,i){i.position.sub(t).put(this.evaluation)}},e.DEFAULT_OPTIONS={strength:.01,field:e.FIELDS.CONSTANT},e.prototype.setOptions=function(t){void 0!==t.strength&&(this.options.strength=t.strength),void 0!==t.field&&(this.options.field=t.field,n.call(this,this.options.field))},e.prototype.applyForce=function(t){var i,e,n=this.force,o=this.options.strength,s=this.options.field;for(i=0;i<t.length;i++)e=t[i],s.call(this,e.position,this.options),this.evaluation.mult(e.mass*o).put(n),e.applyForce(n)},e.prototype.getEnergy=function(t){var i,n,o=this.options.field,s=e.FIELDS,r=0;switch(o){case s.CONSTANT:r=t.length*this.options.direction.norm();break;case s.RADIAL:for(i=0;i<t.length;i++)n=t[i],r+=n.position.norm();break;case s.POINT_ATTRACTOR:for(i=0;i<t.length;i++)n=t[i],r+=n.position.sub(this.options.position).norm()}return r*=this.options.strength},i.exports=e},{"../../math/Vector":41,"./Force":64}],70:[function(t,i){i.exports={Drag:t("./Drag"),Force:t("./Force"),Repulsion:t("./Repulsion"),RotationalDrag:t("./RotationalDrag"),RotationalSpring:t("./RotationalSpring"),Spring:t("./Spring"),VectorField:t("./VectorField")}},{"./Drag":63,"./Force":64,"./Repulsion":65,"./RotationalDrag":66,"./RotationalSpring":67,"./Spring":68,"./VectorField":69}],71:[function(t,i){i.exports={PhysicsEngine:t("./PhysicsEngine"),bodies:t("./bodies"),constraints:t("./constraints"),forces:t("./forces"),integrators:t("./integrators")}},{"./PhysicsEngine":48,"./bodies":53,"./constraints":62,"./forces":70,"./integrators":73}],72:[function(t,i){var e={};e.integrateVelocity=function(t,i){var e=t.velocity,n=t.inverseMass,o=t.force;o.isZero()||(e.add(o.mult(i*n)).put(e),o.clear())},e.integratePosition=function(t,i){var e=t.position,n=t.velocity;e.add(n.mult(i)).put(e)},e.integrateAngularMomentum=function(t,i){var e=t.angularMomentum,n=t.torque;n.isZero()||(e.add(n.mult(i)).put(e),n.clear())},e.integrateOrientation=function(t,i){var e=t.orientation,n=t.angularVelocity;n.isZero()||e.add(e.multiply(n).scalarMultiply(.5*i)).put(e)},i.exports=e},{}],73:[function(t,i){i.exports={SymplecticEuler:t("./SymplecticEuler")}},{"./SymplecticEuler":72}],74:[function(t,i){function e(t){t&&t.canvasSize&&(this._canvasSize=t.canvasSize),n.apply(this,arguments),this._canvasSize||(this._canvasSize=this.getSize()),this._backBuffer=document.createElement("canvas"),this._canvasSize&&(this._backBuffer.width=this._canvasSize[0],this._backBuffer.height=this._canvasSize[1]),this._contextId=void 0}var n=t("../core/Surface");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.elementType="canvas",e.prototype.elementClass="famous-surface",e.prototype.setContent=function(){},e.prototype.deploy=function(t){this._canvasSize&&(t.width=this._canvasSize[0],t.height=this._canvasSize[1]),"2d"===this._contextId&&(t.getContext(this._contextId).drawImage(this._backBuffer,0,0),this._backBuffer.width=0,this._backBuffer.height=0)},e.prototype.recall=function(t){this.getSize();this._backBuffer.width=t.width,this._backBuffer.height=t.height,"2d"===this._contextId&&(this._backBuffer.getContext(this._contextId).drawImage(t,0,0),t.width=0,t.height=0)},e.prototype.getContext=function(t){return this._contextId=t,this._currentTarget?this._currentTarget.getContext(t):this._backBuffer.getContext(t)},e.prototype.setSize=function(t,i){n.prototype.setSize.apply(this,arguments),i&&(this._canvasSize=[i[0],i[1]]),this._currentTarget&&(this._currentTarget.width=this._canvasSize[0],this._currentTarget.height=this._canvasSize[1])},i.exports=e},{"../core/Surface":14}],75:[function(t,i){function e(t){n.call(this,t),this._container=document.createElement("div"),this._container.classList.add("famous-group"),this._container.classList.add("famous-container-group"),this._shouldRecalculateSize=!1,this.context=new o(this._container),this.setContent(this._container)}var n=t("../core/Surface"),o=t("../core/Context");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.elementType="div",e.prototype.elementClass="famous-surface",e.prototype.add=function(){return this.context.add.apply(this.context,arguments)},e.prototype.render=function(){return this._sizeDirty&&(this._shouldRecalculateSize=!0),n.prototype.render.apply(this,arguments)},e.prototype.deploy=function(){return this._shouldRecalculateSize=!0,n.prototype.deploy.apply(this,arguments)},e.prototype.commit=function(){var t=this._size?[this._size[0],this._size[1]]:null,i=n.prototype.commit.apply(this,arguments);return(this._shouldRecalculateSize||t&&(this._size[0]!==t[0]||this._size[1]!==t[1]))&&(this.context.setSize(),this._shouldRecalculateSize=!1),this.context.update(),i},i.exports=e},{"../core/Context":1,"../core/Surface":14}],76:[function(t,i){function e(t){t&&(this._method=t.method||""),n.apply(this,arguments)}var n=t("./ContainerSurface");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.elementType="form",e.prototype.deploy=function(t){return this._method&&(t.method=this._method),n.prototype.deploy.apply(this,arguments)},i.exports=e},{"./ContainerSurface":75}],77:[function(t,i){function e(){this._imageUrl=void 0,n.apply(this,arguments)}var n=t("../core/Surface"),o=[],s=[],r=[],a=!0;e.enableCache=function(){a=!0},e.disableCache=function(){a=!1},e.clearCache=function(){o=[],s=[],r=[]},e.getCache=function(){return{urlCache:o,countCache:s,nodeCache:s}},e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.elementType="img",e.prototype.elementClass="famous-surface",e.prototype.setContent=function(t){var i=o.indexOf(this._imageUrl);-1!==i&&(1===s[i]?(o.splice(i,1),s.splice(i,1),r.splice(i,1)):s[i]--),i=o.indexOf(t),-1===i?(o.push(t),s.push(1)):s[i]++,this._imageUrl=t,this._contentDirty=!0},e.prototype.deploy=function(t){var i=o.indexOf(this._imageUrl);if(void 0===r[i]&&a){var e=new Image;e.src=this._imageUrl||"",r[i]=e}t.src=this._imageUrl||""},e.prototype.recall=function(t){t.src=""},i.exports=e},{"../core/Surface":14}],78:[function(t,i){function e(t){this._placeholder=t.placeholder||"",this._value=t.value||"",this._type=t.type||"text",this._name=t.name||"",n.apply(this,arguments),this.on("click",this.focus.bind(this)),window.addEventListener("click",function(t){t.target!==this._currentTarget&&this.blur()}.bind(this))}var n=t("../core/Surface");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.elementType="input",e.prototype.elementClass="famous-surface",e.prototype.setPlaceholder=function(t){return this._placeholder=t,this._contentDirty=!0,this},e.prototype.focus=function(){return this._currentTarget&&this._currentTarget.focus(),this},e.prototype.blur=function(){return this._currentTarget&&this._currentTarget.blur(),this},e.prototype.setValue=function(t){return this._value=t,this._contentDirty=!0,this},e.prototype.setType=function(t){return this._type=t,this._contentDirty=!0,this},e.prototype.getValue=function(){return this._currentTarget?this._currentTarget.value:this._value},e.prototype.setName=function(t){return this._name=t,this._contentDirty=!0,this},e.prototype.getName=function(){return this._name},e.prototype.deploy=function(t){""!==this._placeholder&&(t.placeholder=this._placeholder),t.value=this._value,t.type=this._type,t.name=this._name},i.exports=e},{"../core/Surface":14}],79:[function(t,i){function e(t){n.apply(this,arguments),this._type="submit",t&&t.onClick&&this.setOnClick(t.onClick)}var n=t("./InputSurface");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.setOnClick=function(t){this.onClick=t},e.prototype.deploy=function(t){this.onclick&&(t.onClick=this.onClick),n.prototype.deploy.apply(this,arguments)},i.exports=e},{"./InputSurface":78}],80:[function(t,i){function e(t){this._placeholder=t.placeholder||"",this._value=t.value||"",this._name=t.name||"",this._wrap=t.wrap||"",this._cols=t.cols||"",this._rows=t.rows||"",n.apply(this,arguments),this.on("click",this.focus.bind(this))}var n=t("../core/Surface");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.elementType="textarea",e.prototype.elementClass="famous-surface",e.prototype.setPlaceholder=function(t){return this._placeholder=t,this._contentDirty=!0,this},e.prototype.focus=function(){return this._currentTarget&&this._currentTarget.focus(),this},e.prototype.blur=function(){return this._currentTarget&&this._currentTarget.blur(),this},e.prototype.setValue=function(t){return this._value=t,this._contentDirty=!0,this},e.prototype.getValue=function(){return this._currentTarget?this._currentTarget.value:this._value},e.prototype.setName=function(t){return this._name=t,this._contentDirty=!0,this},e.prototype.getName=function(){return this._name},e.prototype.setWrap=function(t){return this._wrap=t,this._contentDirty=!0,this},e.prototype.setColumns=function(t){return this._cols=t,this._contentDirty=!0,this},e.prototype.setRows=function(t){return this._rows=t,this._contentDirty=!0,this},e.prototype.deploy=function(t){""!==this._placeholder&&(t.placeholder=this._placeholder),""!==this._value&&(t.value=this._value),""!==this._name&&(t.name=this._name),""!==this._wrap&&(t.wrap=this._wrap),""!==this._cols&&(t.cols=this._cols),""!==this._rows&&(t.rows=this._rows)},i.exports=e},{"../core/Surface":14}],81:[function(t,i){function e(t){n.apply(this,arguments),this._videoUrl=void 0,this.options=Object.create(e.DEFAULT_OPTIONS),t&&this.setOptions(t)}var n=t("../core/Surface");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.DEFAULT_OPTIONS={autoplay:!1},e.prototype.elementType="video",e.prototype.elementClass="famous-surface",e.prototype.setOptions=function(t){t.size&&this.setSize(t.size),t.classes&&this.setClasses(t.classes),t.properties&&this.setProperties(t.properties),t.autoplay&&(this.options.autoplay=t.autoplay),t.src&&(this._videoUrl=t.src,this._contentDirty=!0)},e.prototype.setContent=function(t){this._videoUrl=t,this._contentDirty=!0},e.prototype.deploy=function(t){t.src=this._videoUrl,t.autoplay=this.options.autoplay},e.prototype.recall=function(t){t.src=""},i.exports=e},{"../core/Surface":14}],82:[function(t,i){i.exports={CanvasSurface:t("./CanvasSurface"),ContainerSurface:t("./ContainerSurface"),FormContainerSurface:t("./FormContainerSurface"),ImageSurface:t("./ImageSurface"),InputSurface:t("./InputSurface"),SubmitInputSurface:t("./SubmitInputSurface"),TextareaSurface:t("./TextareaSurface"),VideoSurface:t("./VideoSurface")}},{"./CanvasSurface":74,"./ContainerSurface":75,"./FormContainerSurface":76,"./ImageSurface":77,"./InputSurface":78,"./SubmitInputSurface":79,"./TextareaSurface":80,"./VideoSurface":81}],83:[function(t,i){function e(t){this._map=t||null,this._cachedOutput=null,this._cachedInput=Number.NaN}e.create=function(t){var i=new e(t);return i.get.bind(i)},e.prototype.get=function(t){return t!==this._cachedInput&&(this._cachedInput=t,this._cachedOutput=this._map(t)),this._cachedOutput},i.exports=e},{}],84:[function(t,i){var e={inQuad:function(t){return t*t},outQuad:function(t){return-(t-=1)*t+1},inOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},inCubic:function(t){return t*t*t},outCubic:function(t){return--t*t*t+1},inOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},inQuart:function(t){return t*t*t*t},outQuart:function(t){return-(--t*t*t*t-1)},inOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},inQuint:function(t){return t*t*t*t*t},outQuint:function(t){return--t*t*t*t*t+1},inOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},inSine:function(t){return-1*Math.cos(t*(Math.PI/2))+1},outSine:function(t){return Math.sin(t*(Math.PI/2))},inOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},inExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},outExpo:function(t){return 1===t?1:-Math.pow(2,-10*t)+1},inOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},inCirc:function(t){return-(Math.sqrt(1-t*t)-1)},outCirc:function(t){return Math.sqrt(1- --t*t)},inOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},inElastic:function(t){var i=1.70158,e=0,n=1;return 0===t?0:1===t?1:(e||(e=.3),i=e/(2*Math.PI)*Math.asin(1/n),-(n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-i)*Math.PI/e)))},outElastic:function(t){var i=1.70158,e=0,n=1;return 0===t?0:1===t?1:(e||(e=.3),i=e/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*t)*Math.sin(2*(t-i)*Math.PI/e)+1)},inOutElastic:function(t){var i=1.70158,e=0,n=1;return 0===t?0:2===(t/=.5)?1:(e||(e=.3*1.5),i=e/(2*Math.PI)*Math.asin(1/n),1>t?-.5*n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-i)*Math.PI/e):n*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-i)*Math.PI/e)*.5+1)},inBack:function(t,i){return void 0===i&&(i=1.70158),t*t*((i+1)*t-i)},outBack:function(t,i){return void 0===i&&(i=1.70158),--t*t*((i+1)*t+i)+1},inOutBack:function(t,i){return void 0===i&&(i=1.70158),(t/=.5)<1?.5*t*t*(((i*=1.525)+1)*t-i):.5*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)},inBounce:function(t){return 1-e.outBounce(1-t)},outBounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},inOutBounce:function(t){return.5>t?.5*e.inBounce(2*t):.5*e.outBounce(2*t-1)+.5}};i.exports=e},{}],85:[function(t,i){function e(t){this.method=t,this._instances=[],this.state=[]}var n=t("../utilities/Utility");e.SUPPORTS_MULTIPLE=!0,e.prototype.get=function(){for(var t=0;t<this._instances.length;t++)this.state[t]=this._instances[t].get();return this.state},e.prototype.set=function(t,i,e){for(var o=n.after(t.length,e),s=0;s<t.length;s++)this._instances[s]||(this._instances[s]=new this.method),this._instances[s].set(t[s],i,o)},e.prototype.reset=function(t){for(var i=0;i<t.length;i++)this._instances[i]||(this._instances[i]=new this.method),this._instances[i].reset(t[i])},i.exports=e},{"../utilities/Utility":95}],86:[function(t,i){function e(t){t=t||0,this.endState=new v(t),this.initState=new v,this._dimensions=1,this._restTolerance=1e-10,this._absRestTolerance=this._restTolerance,this._callback=void 0,this.PE=new _,this.particle=new y,this.spring=new g({anchor:this.endState}),this.PE.addBody(this.particle),this.PE.attach(this.spring,this.particle)}function n(){return this.particle.getEnergy()+this.spring.getEnergy([this.particle])}function o(){var t=this.endState.sub(this.initState).normSquared();this._absRestTolerance=0===t?this._restTolerance:this._restTolerance*t}function s(t){this.endState.set(t),o.call(this)}function r(){this.PE.wake()}function a(){this.PE.sleep()}function h(t){this.particle.position.set(t)}function c(t){this.particle.velocity.set(t)}function p(){return 0===this._dimensions?this.particle.getPosition1D():this.particle.getPosition()}function u(){return 0===this._dimensions?this.particle.getVelocity1D():this.particle.getVelocity()}function l(t){this._callback=t}function f(t){var i=e.DEFAULT_OPTIONS;void 0===t.period&&(t.period=i.period),void 0===t.dampingRatio&&(t.dampingRatio=i.dampingRatio),void 0===t.velocity&&(t.velocity=i.velocity),this.spring.setOptions({period:t.period,dampingRatio:t.dampingRatio}),c.call(this,t.velocity)}function d(){if(this.PE.isSleeping()){if(this._callback){var t=this._callback;this._callback=void 0,t()}}else n.call(this)<this._absRestTolerance&&(h.call(this,this.endState),c.call(this,[0,0,0]),a.call(this))}var _=t("../physics/PhysicsEngine"),y=t("../physics/bodies/Particle"),g=t("../physics/constraints/Snap"),v=t("../math/Vector");e.SUPPORTS_MULTIPLE=3,e.DEFAULT_OPTIONS={period:100,dampingRatio:.2,velocity:0},e.prototype.reset=function(t,i){this._dimensions=t instanceof Array?t.length:0,this.initState.set(t),h.call(this,t),s.call(this,t),i&&c.call(this,i),l.call(this,void 0)},e.prototype.getVelocity=function(){return u.call(this)},e.prototype.setVelocity=function(t){this.call(this,c(t))},e.prototype.isActive=function(){return!this.PE.isSleeping()},e.prototype.halt=function(){this.set(this.get())},e.prototype.get=function(){return d.call(this),p.call(this)},e.prototype.set=function(t,i,e){return i?(this._dimensions=t instanceof Array?t.length:0,r.call(this),f.call(this,i),s.call(this,t),void l.call(this,e)):(this.reset(t),void(e&&e()))},i.exports=e},{"../math/Vector":41,"../physics/PhysicsEngine":48,"../physics/bodies/Particle":51,"../physics/constraints/Snap":58}],87:[function(t,i){function e(t){t=t||0,this.endState=new v(t),this.initState=new v,this._dimensions=void 0,this._restTolerance=1e-10,this._absRestTolerance=this._restTolerance,this._callback=void 0,this.PE=new _,this.spring=new g({anchor:this.endState}),this.particle=new y,this.PE.addBody(this.particle),this.PE.attach(this.spring,this.particle)}function n(){return this.particle.getEnergy()+this.spring.getEnergy([this.particle])}function o(t){this.particle.setPosition(t)}function s(t){this.particle.setVelocity(t)}function r(){return 0===this._dimensions?this.particle.getPosition1D():this.particle.getPosition()}function a(){return 0===this._dimensions?this.particle.getVelocity1D():this.particle.getVelocity()}function h(t){this._callback=t}function c(){this.PE.wake()}function p(){this.PE.sleep()}function u(){if(this.PE.isSleeping()){if(this._callback){var t=this._callback;this._callback=void 0,t()}}else n.call(this)<this._absRestTolerance&&(o.call(this,this.endState),s.call(this,[0,0,0]),p.call(this))}function l(t){var i=e.DEFAULT_OPTIONS;void 0===t.period&&(t.period=i.period),void 0===t.dampingRatio&&(t.dampingRatio=i.dampingRatio),void 0===t.velocity&&(t.velocity=i.velocity),t.period<150&&(t.period=150,console.warn("The period of a SpringTransition is capped at 150 ms. Use a SnapTransition for faster transitions")),this.spring.setOptions({period:t.period,dampingRatio:t.dampingRatio}),s.call(this,t.velocity)}function f(){var t=this.endState.sub(this.initState).normSquared();this._absRestTolerance=0===t?this._restTolerance:this._restTolerance*t}function d(t){this.endState.set(t),f.call(this)}var _=t("../physics/PhysicsEngine"),y=t("../physics/bodies/Particle"),g=t("../physics/forces/Spring"),v=t("../math/Vector");e.SUPPORTS_MULTIPLE=3,e.DEFAULT_OPTIONS={period:300,dampingRatio:.5,velocity:0},e.prototype.reset=function(t,i){this._dimensions=t instanceof Array?t.length:0,this.initState.set(t),o.call(this,t),d.call(this,t),i&&s.call(this,i),h.call(this,void 0)},e.prototype.getVelocity=function(){return a.call(this)},e.prototype.setVelocity=function(t){this.call(this,s(t))},e.prototype.isActive=function(){return!this.PE.isSleeping()
},e.prototype.halt=function(){this.set(this.get())},e.prototype.get=function(){return u.call(this),r.call(this)},e.prototype.set=function(t,i,e){return i?(this._dimensions=t instanceof Array?t.length:0,c.call(this),l.call(this,i),d.call(this,t),void h.call(this,e)):(this.reset(t),void(e&&e()))},i.exports=e},{"../math/Vector":41,"../physics/PhysicsEngine":48,"../physics/bodies/Particle":51,"../physics/forces/Spring":68}],88:[function(t,i){function e(t){this.currentAction=null,this.actionQueue=[],this.callbackQueue=[],this.state=0,this.velocity=void 0,this._callback=void 0,this._engineInstance=null,this._currentMethod=null,this.set(t)}function n(){if(this._callback){var t=this._callback;this._callback=void 0,t()}if(this.actionQueue.length<=0)return void this.set(this.get());this.currentAction=this.actionQueue.shift(),this._callback=this.callbackQueue.shift();var i=null,e=this.currentAction[0],a=this.currentAction[1];a instanceof Object&&a.method?(i=a.method,"string"==typeof i&&(i=r[i])):i=s,this._currentMethod!==i&&(this._engineInstance=!(e instanceof Object)||i.SUPPORTS_MULTIPLE===!0||e.length<=i.SUPPORTS_MULTIPLE?new i:new o(i),this._currentMethod=i),this._engineInstance.reset(this.state,this.velocity),void 0!==this.velocity&&(a.velocity=this.velocity),this._engineInstance.set(e,a,n.bind(this))}var o=t("./MultipleTransition"),s=t("./TweenTransition"),r={};e.register=function(t){var i=!0;for(var n in t)e.registerMethod(n,t[n])||(i=!1);return i},e.registerMethod=function(t,i){return t in r?!1:(r[t]=i,!0)},e.unregisterMethod=function(t){return t in r?(delete r[t],!0):!1},e.prototype.set=function(t,i,e){if(!i)return this.reset(t),e&&e(),this;var o=[t,i];return this.actionQueue.push(o),this.callbackQueue.push(e),this.currentAction||n.call(this),this},e.prototype.reset=function(t,i){this._currentMethod=null,this._engineInstance=null,this._callback=void 0,this.state=t,this.velocity=i,this.currentAction=null,this.actionQueue=[],this.callbackQueue=[]},e.prototype.delay=function(t,i){this.set(this.get(),{duration:t,curve:function(){return 0}},i)},e.prototype.get=function(t){return this._engineInstance&&(this._engineInstance.getVelocity&&(this.velocity=this._engineInstance.getVelocity()),this.state=this._engineInstance.get(t)),this.state},e.prototype.isActive=function(){return!!this.currentAction},e.prototype.halt=function(){return this.set(this.get())},i.exports=e},{"./MultipleTransition":85,"./TweenTransition":90}],89:[function(t,i){function e(t){this._final=r.identity.slice(),this._finalTranslate=[0,0,0],this._finalRotate=[0,0,0],this._finalSkew=[0,0,0],this._finalScale=[1,1,1],this.translate=new s(this._finalTranslate),this.rotate=new s(this._finalRotate),this.skew=new s(this._finalSkew),this.scale=new s(this._finalScale),t&&this.set(t)}function n(){return r.build({translate:this.translate.get(),rotate:this.rotate.get(),skew:this.skew.get(),scale:this.scale.get()})}function o(){return r.build({translate:this._finalTranslate,rotate:this._finalRotate,skew:this._finalSkew,scale:this._finalScale})}var s=t("./Transitionable"),r=t("../core/Transform"),a=t("../utilities/Utility");e.prototype.setTranslate=function(t,i,e){return this._finalTranslate=t,this._final=o.call(this),this.translate.set(t,i,e),this},e.prototype.setScale=function(t,i,e){return this._finalScale=t,this._final=o.call(this),this.scale.set(t,i,e),this},e.prototype.setRotate=function(t,i,e){return this._finalRotate=t,this._final=o.call(this),this.rotate.set(t,i,e),this},e.prototype.setSkew=function(t,i,e){return this._finalSkew=t,this._final=o.call(this),this.skew.set(t,i,e),this},e.prototype.set=function(t,i,e){var n=r.interpret(t);this._finalTranslate=n.translate,this._finalRotate=n.rotate,this._finalSkew=n.skew,this._finalScale=n.scale,this._final=t;var o=e?a.after(4,e):null;return this.translate.set(n.translate,i,o),this.rotate.set(n.rotate,i,o),this.skew.set(n.skew,i,o),this.scale.set(n.scale,i,o),this},e.prototype.setDefaultTransition=function(t){this.translate.setDefault(t),this.rotate.setDefault(t),this.skew.setDefault(t),this.scale.setDefault(t)},e.prototype.get=function(){return this.isActive()?n.call(this):this._final},e.prototype.getFinal=function(){return this._final},e.prototype.isActive=function(){return this.translate.isActive()||this.rotate.isActive()||this.scale.isActive()||this.skew.isActive()},e.prototype.halt=function(){return this.translate.halt(),this.rotate.halt(),this.skew.halt(),this.scale.halt(),this._final=this.get(),this._finalTranslate=this.translate.get(),this._finalRotate=this.rotate.get(),this._finalSkew=this.skew.get(),this._finalScale=this.scale.get(),this},i.exports=e},{"../core/Transform":15,"../utilities/Utility":95,"./Transitionable":88}],90:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),t&&this.setOptions(t),this._startTime=0,this._startValue=0,this._updateTime=0,this._endValue=0,this._curve=void 0,this._duration=0,this._active=!1,this._callback=void 0,this.state=0,this.velocity=void 0}function n(t,i,e){return(1-e)*t+e*i}function o(t){return t instanceof Object?t instanceof Array?t.slice(0):Object.create(t):t}function s(t,i){var n={curve:i.curve};return i.duration&&(n.duration=i.duration),i.speed&&(n.speed=i.speed),t instanceof Object&&(void 0!==t.duration&&(n.duration=t.duration),t.curve&&(n.curve=t.curve),t.speed&&(n.speed=t.speed)),"string"==typeof n.curve&&(n.curve=e.getCurve(n.curve)),n}function r(t,i,e,n,o){var s,r=1e-7,a=(e(o)-e(o-r))/r;if(t instanceof Array){s=[];for(var h=0;h<t.length;h++)s[h]="number"==typeof t[h]?a*(t[h]-i[h])/n:0}else s=a*(t-i)/n;return s}function a(t,i,e){var o;if(t instanceof Array){o=[];for(var s=0;s<t.length;s++)o[s]="number"==typeof t[s]?n(t[s],i[s],e):t[s]}else o=n(t,i,e);return o}e.Curves={linear:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return t*(2-t)},easeInOut:function(t){return.5>=t?2*t*t:-2*t*t+4*t-1},easeOutBounce:function(t){return t*(3-2*t)},spring:function(t){return(1-t)*Math.sin(6*Math.PI*t)+t}},e.SUPPORTS_MULTIPLE=!0,e.DEFAULT_OPTIONS={curve:e.Curves.linear,duration:500,speed:0};var h={};e.registerCurve=function(t,i){return h[t]?!1:(h[t]=i,!0)},e.unregisterCurve=function(t){return h[t]?(delete h[t],!0):!1},e.getCurve=function(t){var i=h[t];if(void 0!==i)return i;throw new Error("curve not registered")},e.getCurves=function(){return h},e.prototype.setOptions=function(t){void 0!==t.curve&&(this.options.curve=t.curve),void 0!==t.duration&&(this.options.duration=t.duration),void 0!==t.speed&&(this.options.speed=t.speed)},e.prototype.set=function(t,i,e){if(!i)return this.reset(t),void(e&&e());if(this._startValue=o(this.get()),i=s(i,this.options),i.speed){var n=this._startValue;if(n instanceof Object){var r=0;for(var a in n)r+=(t[a]-n[a])*(t[a]-n[a]);i.duration=Math.sqrt(r)/i.speed}else i.duration=Math.abs(t-n)/i.speed}this._startTime=Date.now(),this._endValue=o(t),this._startVelocity=o(i.velocity),this._duration=i.duration,this._curve=i.curve,this._active=!0,this._callback=e},e.prototype.reset=function(t,i){if(this._callback){var e=this._callback;this._callback=void 0,e()}this.state=o(t),this.velocity=o(i),this._startTime=0,this._duration=0,this._updateTime=0,this._startValue=this.state,this._startVelocity=this.velocity,this._endValue=this.state,this._active=!1},e.prototype.getVelocity=function(){return this.velocity},e.prototype.get=function(t){return this.update(t),this.state},e.prototype.update=function(t){if(this._active){if(t||(t=Date.now()),!(this._updateTime>=t)){this._updateTime=t;var i=t-this._startTime;if(i>=this._duration)this.state=this._endValue,this.velocity=r(this.state,this._startValue,this._curve,this._duration,1),this._active=!1;else if(0>i)this.state=this._startValue,this.velocity=this._startVelocity;else{var e=i/this._duration;this.state=a(this._startValue,this._endValue,this._curve(e)),this.velocity=r(this.state,this._startValue,this._curve,this._duration,e)}}}else if(this._callback){var n=this._callback;this._callback=void 0,n()}},e.prototype.isActive=function(){return this._active},e.prototype.halt=function(){this.reset(this.get())},e.registerCurve("linear",e.Curves.linear),e.registerCurve("easeIn",e.Curves.easeIn),e.registerCurve("easeOut",e.Curves.easeOut),e.registerCurve("easeInOut",e.Curves.easeInOut),e.registerCurve("easeOutBounce",e.Curves.easeOutBounce),e.registerCurve("spring",e.Curves.spring),e.customCurve=function(t,i){return t=t||0,i=i||0,function(e){return t*e+(-2*t-i+3)*e*e+(t+i-2)*e*e*e}},i.exports=e},{}],91:[function(t,i){function e(t){t=t||0,this.endState=new m(t),this.initState=new m,this.spring=new g({anchor:this.endState}),this.wall=new v,this._restTolerance=1e-10,this._dimensions=1,this._absRestTolerance=this._restTolerance,this._callback=void 0,this.PE=new _,this.particle=new y,this.PE.addBody(this.particle),this.PE.attach([this.wall,this.spring],this.particle)}function n(){return this.particle.getEnergy()+this.spring.getEnergy([this.particle])}function o(){var t=this.endState.sub(this.initState).normSquared();this._absRestTolerance=0===t?this._restTolerance:this._restTolerance*t}function s(){this.PE.wake()}function r(){this.PE.sleep()}function a(t){this.endState.set(t);var i=this.endState.sub(this.initState).norm();this.wall.setOptions({distance:this.endState.norm(),normal:0===i?this.particle.velocity.normalize(-1):this.endState.sub(this.initState).normalize(-1)}),o.call(this)}function h(t){this.particle.position.set(t)}function c(t){this.particle.velocity.set(t)}function p(){return 0===this._dimensions?this.particle.getPosition1D():this.particle.getPosition()}function u(){return 0===this._dimensions?this.particle.getVelocity1D():this.particle.getVelocity()}function l(t){this._callback=t}function f(){if(this.PE.isSleeping()){if(this._callback){var t=this._callback;this._callback=void 0,t()}}else{var i=n.call(this);i<this._absRestTolerance&&(r.call(this),h.call(this,this.endState),c.call(this,[0,0,0]))}}function d(t){var i=e.DEFAULT_OPTIONS;void 0===t.period&&(t.period=i.period),void 0===t.dampingRatio&&(t.dampingRatio=i.dampingRatio),void 0===t.velocity&&(t.velocity=i.velocity),void 0===t.restitution&&(t.restitution=i.restitution),this.spring.setOptions({period:t.period,dampingRatio:t.dampingRatio}),this.wall.setOptions({restitution:t.restitution}),c.call(this,t.velocity)}var _=t("../physics/PhysicsEngine"),y=t("../physics/bodies/Particle"),g=t("../physics/forces/Spring"),v=t("../physics/constraints/Wall"),m=t("../math/Vector");e.SUPPORTS_MULTIPLE=3,e.DEFAULT_OPTIONS={period:300,dampingRatio:.5,velocity:0,restitution:.5},e.prototype.reset=function(t,i){this._dimensions=t instanceof Array?t.length:0,this.initState.set(t),h.call(this,t),i&&c.call(this,i),a.call(this,t),l.call(this,void 0)},e.prototype.getVelocity=function(){return u.call(this)},e.prototype.setVelocity=function(t){this.call(this,c(t))},e.prototype.isActive=function(){return!this.PE.isSleeping()},e.prototype.halt=function(){this.set(this.get())},e.prototype.get=function(){return f.call(this),p.call(this)},e.prototype.set=function(t,i,e){return i?(this._dimensions=t instanceof Array?t.length:0,s.call(this),d.call(this,i),a.call(this,t),void l.call(this,e)):(this.reset(t),void(e&&e()))},i.exports=e},{"../math/Vector":41,"../physics/PhysicsEngine":48,"../physics/bodies/Particle":51,"../physics/constraints/Wall":60,"../physics/forces/Spring":68}],92:[function(t,i){i.exports={CachedMap:t("./CachedMap"),Easing:t("./Easing"),MultipleTransition:t("./MultipleTransition"),SnapTransition:t("./SnapTransition"),SpringTransition:t("./SpringTransition"),Transitionable:t("./Transitionable"),TransitionableTransform:t("./TransitionableTransform"),TweenTransition:t("./TweenTransition"),WallTransition:t("./WallTransition")}},{"./CachedMap":83,"./Easing":84,"./MultipleTransition":85,"./SnapTransition":86,"./SpringTransition":87,"./Transitionable":88,"./TransitionableTransform":89,"./TweenTransition":90,"./WallTransition":91}],93:[function(t,i){var e={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:97,b:98,c:99,d:100,e:101,f:102,g:103,h:104,i:105,j:106,k:107,l:108,m:109,n:110,o:111,p:112,q:113,r:114,s:115,t:116,u:117,v:118,w:119,x:120,y:121,z:122,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,ENTER:13,LEFT_ARROW:37,RIGHT_ARROW:39,UP_ARROW:38,DOWN_ARROW:40,SPACE:32,SHIFT:16,TAB:9};i.exports=e},{}],94:[function(t,i){function e(t){return c.on(p,t),t}function n(t,i){var n=u(),o=function(){var e=u();e-n>=i&&(t.apply(this,arguments),c.removeListener(p,o))};return e(o)}function o(t,i){var n=u(),o=function(){var e=u();e-n>=i&&(t.apply(this,arguments),n=u())};return e(o)}function s(t,i){if(void 0===i)return void 0;var n=function(){i--,0>=i&&(t.apply(this,arguments),a(n))};return e(n)}function r(t,i){i=i||1;var n=i,o=function(){i--,0>=i&&(t.apply(this,arguments),i=n)};return e(o)}function a(t){c.removeListener(p,t)}function h(t,i){var e,o,s,r,h;return function(){o=this,h=arguments,s=u();var c=function(){var a=u-s;i>a?e=n(c,i-a):(e=null,r=t.apply(o,h))};return a(e),e=n(c,i),r}}var c=t("../core/Engine"),p="prerender",u=window.performance&&window.performance.now?function(){return window.performance.now()}:function(){return Date.now()};i.exports={setTimeout:n,setInterval:o,debounce:h,after:s,every:r,clear:a}},{"../core/Engine":4}],95:[function(t,i){var e={};e.Direction={X:0,Y:1,Z:2},e.after=function(t,i){var e=t;return function(){e--,0===e&&i.apply(this,arguments)}},e.loadURL=function(t,i){var e=new XMLHttpRequest;e.onreadystatechange=function(){4===this.readyState&&i&&i(this.responseText)},e.open("GET",t),e.send()},e.createDocumentFragmentFromHTML=function(t){var i=document.createElement("div");i.innerHTML=t;for(var e=document.createDocumentFragment();i.hasChildNodes();)e.appendChild(i.firstChild);return e},e.clone=function(t){var i;if("object"==typeof t){i=t instanceof Array?[]:{};for(var n in t)if("object"==typeof t[n]&&null!==t[n])if(t[n]instanceof Array){i[n]=new Array(t[n].length);for(var o=0;o<t[n].length;o++)i[n][o]=e.clone(t[n][o])}else i[n]=e.clone(t[n]);else i[n]=t[n]}else i=t;return i},i.exports=e},{}],96:[function(t,i){i.exports={KeyCodes:t("./KeyCodes"),Timer:t("./Timer"),Utility:t("./Utility")}},{"./KeyCodes":93,"./Timer":94,"./Utility":95}],97:[function(t,i){function e(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS||e.DEFAULT_OPTIONS),this._optionsManager=new s(this.options),t&&this.setOptions(t),this._eventInput=new o,this._eventOutput=new o,o.setInputHandler(this,this._eventInput),o.setOutputHandler(this,this._eventOutput),this._id=n.register(this)}var n=t("../core/Entity"),o=(t("../core/Transform"),t("../core/EventHandler")),s=t("../core/OptionsManager");e.DEFAULT_OPTIONS={},e.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},e.prototype.getOptions=function(t){return this._optionsManager.getOptions(t)},e.prototype.render=function(){return this._id},e.prototype.commit=function(){},i.exports=e},{"../core/Entity":5,"../core/EventHandler":7,"../core/OptionsManager":10,"../core/Transform":15}],98:[function(t,i){function e(){c.apply(this,arguments),this.state=new a(0),this._isOpen=!1,this.setOutputFunction(function(t,i,e){var o=n.call(this),r=this.options.direction===h.Direction.X?s.translate(o*i,0,.001*(o-1)*i):s.translate(0,o*i,.001*(o-1)*i),a=t.render();if(this.options.stackRotation){var c=this.options.stackRotation*e*(1-o);a={transform:s.rotateZ(c),origin:[.5,.5],target:a}}return{transform:r,size:t.getSize(),target:a}})}function n(t){return t?this._isOpen?1:0:this.state.get()}function o(t,i,e){this.state.halt(),this.state.set(t,i,e)}var s=t("../core/Transform"),r=t("../core/OptionsManager"),a=t("../transitions/Transitionable"),h=t("../utilities/Utility"),c=t("./SequentialLayout");e.prototype=Object.create(c.prototype),e.prototype.constructor=e,e.DEFAULT_OPTIONS=r.patch(c.DEFAULT_OPTIONS,{transition:{curve:"easeOutBounce",duration:500},stackRotation:0}),e.prototype.getSize=function(){var t=c.prototype.getSize.apply(this,arguments),i=this._items?this._items.get().getSize():[0,0];i||(i=[0,0]);var e=n.call(this),o=1-e;return[i[0]*o+t[0]*e,i[1]*o+t[1]*e]},e.prototype.isOpen=function(){return this._isOpen},e.prototype.open=function(t){this._isOpen=!0,o.call(this,1,this.options.transition,t)},e.prototype.close=function(t){this._isOpen=!1,o.call(this,0,this.options.transition,t)},e.prototype.toggle=function(t){this._isOpen?this.close(t):this.open(t)},i.exports=e},{"../core/OptionsManager":10,"../core/Transform":15,"../transitions/Transitionable":88,"../utilities/Utility":95,"./SequentialLayout":110}],99:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),this._optionsManager=new p(this.options),t&&this.setOptions(t),this._position=new u(0),this._direction=n(this.options.side),this._orientation=o(this.options.side),this._isOpen=!1,this._cachedLength=0,this.drawer=new h,this.content=new h,this._eventInput=new l,this._eventOutput=new l,l.setInputHandler(this,this._eventInput),l.setOutputHandler(this,this._eventOutput),this._eventInput.on("update",r.bind(this)),this._eventInput.on("end",a.bind(this))}function n(t){var i=e.SIDES;return t===i.LEFT||t===i.RIGHT?f:d}function o(t){var i=e.SIDES;return t===i.LEFT||t===i.TOP?1:-1}function s(t){var i,e=this.options;if(e.drawerLength)i=e.drawerLength;else{var n=t.getSize();i=n?n[this._direction]:e.drawerLength}return this._orientation*i}function r(t){var i,e,n=this.getPosition()+t.delta;this._cachedLength=s.call(this,this.drawer),1===this._orientation?(i=0,e=this._cachedLength):(i=this._cachedLength,e=0),n>e?n=e:i>n&&(n=i),this.setPosition(n)}function a(t){var i=t.velocity,e=this._orientation*this.getPosition(),n=this.options,o=this._orientation*this._cachedLength,s=n.positionThreshold||o/2,r=n.velocityThreshold;if(n.transition instanceof Object&&(n.transition.velocity=t.velocity),0===e)return void(this._isOpen=!1);if(e===o)return void(this._isOpen=!0);var a=Math.abs(i)>r||!this._isOpen&&e>s||this._isOpen&&s>e;a?this.toggle():this.reset()}var h=t("../core/RenderNode"),c=t("../core/Transform"),p=t("../core/OptionsManager"),u=t("../transitions/Transitionable"),l=t("../core/EventHandler"),f=0,d=1;e.SIDES={LEFT:0,TOP:1,RIGHT:2,BOTTOM:3},e.DEFAULT_OPTIONS={side:e.SIDES.LEFT,drawerLength:0,velocityThreshold:0,positionThreshold:0,transition:!0},e.prototype.setOptions=function(t){this._optionsManager.setOptions(t),void 0!==t.side&&(this._direction=n(t.side),this._orientation=o(t.side))},e.prototype.open=function(t,i){t instanceof Function&&(i=t),void 0===t&&(t=this.options.transition),this._cachedLength=s.call(this,this.drawer),this.setPosition(this._cachedLength,t,i),this._isOpen||(this._isOpen=!0,this._eventOutput.emit("open"))},e.prototype.close=function(t,i){t instanceof Function&&(i=t),void 0===t&&(t=this.options.transition),this.setPosition(0,t,i),this._isOpen&&(this._isOpen=!1,this._eventOutput.emit("close"))},e.prototype.setPosition=function(t,i,e){this._position.isActive()&&this._position.halt(),this._position.set(t,i,e)},e.prototype.getPosition=function(){return this._position.get()},e.prototype.setProgress=function(t,i,e){return this._position.set(t*this._cachedLength,i,e)},e.prototype.getProgress=function(){return this._position.get()/this._cachedLength},e.prototype.toggle=function(t){this._isOpen?this.close(t):this.open(t)},e.prototype.reset=function(t){this._isOpen?this.open(t):this.close(t)},e.prototype.isOpen=function(){return this._isOpen},e.prototype.render=function(){var t=this.getPosition();(!this._isOpen&&0>t&&1===this._orientation||t>0&&-1===this._orientation)&&(t=0,this.setPosition(t));var i=this._direction===f?c.translate(t,0,0):c.translate(0,t,0);return[{transform:c.behind,target:this.drawer.render()},{transform:i,target:this.content.render()}]},i.exports=e},{"../core/EventHandler":7,"../core/OptionsManager":10,"../core/RenderNode":11,"../core/Transform":15,"../transitions/Transitionable":88}],100:[function(t,i){function e(t){this._currentTarget=null,this._size=[void 0,void 0],this._controller=new h(t),this._controller.inTransformFrom(o.create(n.bind(this,1e-4))),this._controller.outTransformFrom(o.create(n.bind(this,-1e-4))),this._eventInput=new r,r.setInputHandler(this,this._eventInput),this._entityId=s.register(this),t&&this.setOptions(t)}function n(t,i){return a.translate(this._size[0]*(1-i),0,t*(1-i))}var o=t("../transitions/CachedMap"),s=t("../core/Entity"),r=t("../core/EventHandler"),a=t("../core/Transform"),h=t("./RenderController");e.prototype.show=function(t){this._currentTarget&&this._eventInput.unpipe(this._currentTarget),this._currentTarget=t,this._currentTarget&&this._currentTarget.trigger&&this._eventInput.pipe(this._currentTarget),this._controller.show.apply(this._controller,arguments)},e.prototype.setOptions=function(t){this._controller.setOptions(t)},e.prototype.render=function(){return this._entityId},e.prototype.commit=function(t){return this._size[0]=t.size[0],this._size[1]=t.size[1],{transform:t.transform,opacity:t.opacity,origin:t.origin,size:t.size,target:this._controller.render()}},i.exports=e},{"../core/Entity":5,"../core/EventHandler":7,"../core/Transform":15,"../transitions/CachedMap":83,"./RenderController":106}],101:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),this.optionsManager=new a(this.options),t&&this.setOptions(t),this.id=s.register(this),this._ratios=new c(this.options.ratios),this._nodes=[],this._size=[0,0],this._cachedDirection=null,this._cachedLengths=[],this._cachedTransforms=null,this._ratiosDirty=!1,this._eventOutput=new h,h.setOutputHandler(this,this._eventOutput)}function n(t,i,n){var o,s,a,h,c=0,p=i,u=0;for(this._cachedLengths=[],this._cachedTransforms=[],h=0;h<t.length;h++)s=t[h],a=this._nodes[h],"number"!=typeof s?p-=a.getSize()[n]||0:u+=s;for(h=0;h<t.length;h++)a=this._nodes[h],s=t[h],i="number"==typeof s?p*s/u:a.getSize()[n],o=n===e.DIRECTION_X?r.translate(c,0,0):r.translate(0,c,0),this._cachedTransforms.push(o),this._cachedLengths.push(i),c+=i}function o(t,i){for(var e=0;e<t.length;e++)if("number"!=typeof t[e]&&this._nodes[e].getSize()[i]!==this._cachedLengths[e])return!0;return!1}var s=t("../core/Entity"),r=t("../core/Transform"),a=t("../core/OptionsManager"),h=t("../core/EventHandler"),c=t("../transitions/Transitionable");e.DIRECTION_X=0,e.DIRECTION_Y=1,e.DEFAULT_OPTIONS={direction:e.DIRECTION_X,transition:!1,ratios:[]},e.prototype.render=function(){return this.id},e.prototype.setOptions=function(t){this.optionsManager.setOptions(t)},e.prototype.sequenceFrom=function(t){if(this._nodes=t,0===this._ratios.get().length){for(var i=[],e=0;e<this._nodes.length;e++)i.push(1);this.setRatios(i)}},e.prototype.setRatios=function(t,i,e){void 0===i&&(i=this.options.transition);var n=this._ratios;0===n.get().length&&(i=void 0),n.isActive()&&n.halt(),n.set(t,i,e),this._ratiosDirty=!0},e.prototype.getSize=function(){return this._size},e.prototype.commit=function(t){var i,e=t.size,s=t.transform,a=t.origin,h=t.opacity,c=this._ratios.get(),p=this.options.direction,u=e[p];(u!==this._size[p]||this._ratiosDirty||this._ratios.isActive()||p!==this._cachedDirection||o.call(this,c,p))&&(n.call(this,c,u,p),u!==this._size[p]&&(this._size[0]=e[0],this._size[1]=e[1]),p!==this._cachedDirection&&(this._cachedDirection=p),this._ratiosDirty&&(this._ratiosDirty=!1));for(var l=[],f=0;f<c.length;f++)i=[void 0,void 0],u=this._cachedLengths[f],i[p]=u,l.push({transform:this._cachedTransforms[f],size:i,target:this._nodes[f].render()});return e&&0!==a[0]&&0!==a[1]&&(s=r.moveThen([-e[0]*a[0],-e[1]*a[1],0],s)),{transform:s,size:e,opacity:h,target:l}},i.exports=e},{"../core/Entity":5,"../core/EventHandler":7,"../core/OptionsManager":10,"../core/Transform":15,"../transitions/Transitionable":88}],102:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),this._optionsManager=new s(this.options),t&&this.setOptions(t),this.angle=new o(0),this.frontNode=void 0,this.backNode=void 0,this.flipped=!1}var n=t("../core/Transform"),o=t("../transitions/Transitionable"),s=(t("../core/RenderNode"),t("../core/OptionsManager"));e.DIRECTION_X=0,e.DIRECTION_Y=1;var r=1;e.DEFAULT_OPTIONS={transition:!0,direction:e.DIRECTION_X},e.prototype.flip=function(t,i){var e=this.flipped?0:Math.PI;this.setAngle(e,t,i),this.flipped=!this.flipped},e.prototype.setAngle=function(t,i,e){void 0===i&&(i=this.options.transition),this.angle.isActive()&&this.angle.halt(),this.angle.set(t,i,e)},e.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},e.prototype.setFront=function(t){this.frontNode=t},e.prototype.setBack=function(t){this.backNode=t},e.prototype.render=function(){var t,i,o=this.angle.get();this.options.direction===e.DIRECTION_X?(t=n.rotateY(o),i=n.rotateY(o+Math.PI)):(t=n.rotateX(o),i=n.rotateX(o+Math.PI));var s=[];return this.frontNode&&s.push({transform:t,target:this.frontNode.render()}),this.backNode&&s.push({transform:n.moveThen([0,0,r],i),target:this.backNode.render()}),s},i.exports=e},{"../core/OptionsManager":10,"../core/RenderNode":11,"../core/Transform":15,"../transitions/Transitionable":88}],103:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),this.optionsManager=new u(this.options),t&&this.setOptions(t),this.id=r.register(this),this._modifiers=[],this._states=[],this._contextSizeCache=[0,0],this._dimensionsCache=[0,0],this._activeCount=0,this._eventOutput=new c,c.setOutputHandler(this,this._eventOutput)}function n(t,i,e){var n=[t[0],t[1]];n[0]-=this.options.gutterSize[0]*(i-1),n[1]-=this.options.gutterSize[1]*(e-1);for(var r,a=Math.round(n[1]/e),h=Math.round(n[0]/i),c=0,p=0,u=0;e>u;u++){r=0;for(var l=0;i>l;l++)void 0===this._modifiers[p]?o.call(this,p,[h,a],[r,c,0],1):s.call(this,p,[h,a],[r,c,0],1),p++,r+=h+this.options.gutterSize[0];c+=a+this.options.gutterSize[1]}for(this._dimensionsCache=[this.options.dimensions[0],this.options.dimensions[1]],this._contextSizeCache=[t[0],t[1]],this._activeCount=e*i,u=this._activeCount;u<this._modifiers.length;u++)s.call(this,u,[Math.round(h),Math.round(a)],[0,0],0);this._eventOutput.emit("reflow")}function o(t,i,e,n){var o={transform:new f(a.translate.apply(null,e)),opacity:new l(n),size:new l(i)},s=new p({transform:o.transform,opacity:o.opacity,size:o.size});this._states[t]=o,this._modifiers[t]=s}function s(t,i,e,n){var o=this._states[t],s=o.size,r=o.opacity,a=o.transform,h=this.options.transition;a.halt(),r.halt(),s.halt(),a.setTranslate(e,h),s.set(i,h),r.set(n,h)}var r=t("../core/Entity"),a=(t("../core/RenderNode"),t("../core/Transform")),h=t("../core/ViewSequence"),c=t("../core/EventHandler"),p=t("../core/Modifier"),u=t("../core/OptionsManager"),l=t("../transitions/Transitionable"),f=t("../transitions/TransitionableTransform");e.DEFAULT_OPTIONS={dimensions:[1,1],transition:!1,gutterSize:[0,0]},e.prototype.render=function(){return this.id},e.prototype.setOptions=function(t){return this.optionsManager.setOptions(t)},e.prototype.sequenceFrom=function(t){t instanceof Array&&(t=new h(t)),this.sequence=t},e.prototype.commit=function(t){var i=t.transform,e=t.opacity,o=t.origin,s=t.size,r=this.options.dimensions[0],h=this.options.dimensions[1];(s[0]!==this._contextSizeCache[0]||s[1]!==this._contextSizeCache[1]||r!==this._dimensionsCache[0]||h!==this._dimensionsCache[1])&&n.call(this,s,r,h);for(var c=this.sequence,p=[],u=0;c&&u<this._modifiers.length;){var l=c.get(),f=this._modifiers[u];u>=this._activeCount&&this._states[u].opacity.isActive()&&(this._modifiers.splice(u,1),this._states.splice(u,1)),l&&p.push(f.modify({origin:o,target:l.render()})),c=c.getNext(),u++}return s&&(i=a.moveThen([-s[0]*o[0],-s[1]*o[1],0],i)),{transform:i,opacity:e,size:s,target:p}},i.exports=e},{"../core/Entity":5,"../core/EventHandler":7,"../core/Modifier":9,"../core/OptionsManager":10,"../core/RenderNode":11,"../core/Transform":15,"../core/ViewSequence":17,"../transitions/Transitionable":88,"../transitions/TransitionableTransform":89}],104:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),this._optionsManager=new c(this.options),t&&this.setOptions(t),this._entityId=r.register(this),this.header=new a,this.footer=new a,this.content=new a}function n(t,i){var e=t.getSize();return e?e[this.options.direction]:i}function o(t){return this.options.direction===e.DIRECTION_X?h.translate(t,0,0):h.translate(0,t,0)}function s(t,i){return this.options.direction===e.DIRECTION_X?[t,i[1]]:[i[0],t]}var r=t("../core/Entity"),a=t("../core/RenderNode"),h=t("../core/Transform"),c=t("../core/OptionsManager");e.DIRECTION_X=0,e.DIRECTION_Y=1,e.DEFAULT_OPTIONS={direction:e.DIRECTION_Y,headerSize:void 0,footerSize:void 0,defaultHeaderSize:0,defaultFooterSize:0},e.prototype.render=function(){return this._entityId},e.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},e.prototype.commit=function(t){var i=t.transform,e=t.origin,r=t.size,a=t.opacity,c=void 0!==this.options.headerSize?this.options.headerSize:n.call(this,this.header,this.options.defaultHeaderSize),p=void 0!==this.options.footerSize?this.options.footerSize:n.call(this,this.footer,this.options.defaultFooterSize),u=r[this.options.direction]-c-p;r&&(i=h.moveThen([-r[0]*e[0],-r[1]*e[1],0],i));var l=[{size:s.call(this,c,r),target:this.header.render()},{transform:o.call(this,c),size:s.call(this,u,r),target:this.content.render()},{transform:o.call(this,c+u),size:s.call(this,p,r),target:this.footer.render()}];return{transform:i,opacity:a,size:r,target:l}},i.exports=e},{"../core/Entity":5,"../core/OptionsManager":10,"../core/RenderNode":11,"../core/Transform":15}],105:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),this._optionsManager=new a(this.options),t&&this.setOptions(t),this._showing=!1,this.nodes=[],this.transforms=[],this.states=[]}var n=t("../core/Transform"),o=t("../core/Modifier"),s=t("../core/RenderNode"),r=t("../utilities/Utility"),a=t("../core/OptionsManager"),h=t("../transitions/Transitionable"),c=t("../transitions/TransitionableTransform");e.DEFAULT_OPTIONS={inTransform:n.scale(.001,.001,.001),inOpacity:0,inOrigin:[.5,.5],inAlign:[.5,.5],outTransform:n.scale(.001,.001,.001),outOpacity:0,outOrigin:[.5,.5],outAlign:[.5,.5],showTransform:n.identity,showOpacity:1,showOrigin:[.5,.5],showAlign:[.5,.5],inTransition:!0,outTransition:!0,overlap:!1},e.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},e.prototype.show=function(t,i,e){if(!t)return this.hide(e);if(i instanceof Function&&(e=i,i=void 0),this._showing){if(!this.options.overlap)return this.hide(this.show.bind(this,t,i,e));this.hide()}this._showing=!0;var n={transform:new c(this.options.inTransform),origin:new h(this.options.inOrigin),align:new h(this.options.inAlign),opacity:new h(this.options.inOpacity)},a=new o({transform:n.transform,opacity:n.opacity,origin:n.origin,align:n.align}),p=new s;p.add(a).add(t),this.nodes.push(p),this.states.push(n),this.transforms.push(a);var u=e?r.after(3,e):void 0;i||(i=this.options.inTransition),n.transform.set(this.options.showTransform,i,u),n.opacity.set(this.options.showOpacity,i,u),n.origin.set(this.options.showOrigin,i,u),n.align.set(this.options.showAlign,i,u)},e.prototype.hide=function(t,i){if(this._showing){this._showing=!1,t instanceof Function&&(i=t,t=void 0);var e=this.nodes[this.nodes.length-1],n=this.transforms[this.transforms.length-1],o=this.states[this.states.length-1],s=r.after(3,function(){this.nodes.splice(this.nodes.indexOf(e),1),this.states.splice(this.states.indexOf(o),1),this.transforms.splice(this.transforms.indexOf(n),1),i&&i.call(this)}.bind(this));t||(t=this.options.outTransition),o.transform.set(this.options.outTransform,t,s),o.opacity.set(this.options.outOpacity,t,s),o.origin.set(this.options.outOrigin,t,s),o.align.set(this.options.outAlign,t,s)}},e.prototype.render=function(){for(var t=[],i=0;i<this.nodes.length;i++)t.push(this.nodes[i].render());return t},i.exports=e},{"../core/Modifier":9,"../core/OptionsManager":10,"../core/RenderNode":11,"../core/Transform":15,"../transitions/Transitionable":88,"../transitions/TransitionableTransform":89,"../utilities/Utility":95}],106:[function(t,i){function e(){h.apply(this,arguments),this._showing=-1,this._outgoingRenderables=[],this._nextRenderable=null,this._renderables=[],this._nodes=[],this._modifiers=[],this._states=[],this.inTransformMap=e.DefaultMap.transform,this.inOpacityMap=e.DefaultMap.opacity,this.inOriginMap=e.DefaultMap.origin,this.outTransformMap=e.DefaultMap.transform,this.outOpacityMap=e.DefaultMap.opacity,this.outOriginMap=e.DefaultMap.origin,this._output=[]
}function n(t,i){return t(i.get())}var o=t("../core/Modifier"),s=t("../core/RenderNode"),r=t("../core/Transform"),a=t("../transitions/Transitionable"),h=t("../core/View");e.prototype=Object.create(h.prototype),e.prototype.constructor=e,e.DEFAULT_OPTIONS={inTransition:!0,outTransition:!0,overlap:!0},e.DefaultMap={transform:function(){return r.identity},opacity:function(t){return t},origin:null},e.prototype.inTransformFrom=function(t){if(t instanceof Function)this.inTransformMap=t;else{if(!t||!t.get)throw new Error("inTransformFrom takes only function or getter object");this.inTransformMap=t.get.bind(t)}return this},e.prototype.inOpacityFrom=function(t){if(t instanceof Function)this.inOpacityMap=t;else{if(!t||!t.get)throw new Error("inOpacityFrom takes only function or getter object");this.inOpacityMap=t.get.bind(t)}return this},e.prototype.inOriginFrom=function(t){if(t instanceof Function)this.inOriginMap=t;else{if(!t||!t.get)throw new Error("inOriginFrom takes only function or getter object");this.inOriginMap=t.get.bind(t)}return this},e.prototype.outTransformFrom=function(t){if(t instanceof Function)this.outTransformMap=t;else{if(!t||!t.get)throw new Error("outTransformFrom takes only function or getter object");this.outTransformMap=t.get.bind(t)}return this},e.prototype.outOpacityFrom=function(t){if(t instanceof Function)this.outOpacityMap=t;else{if(!t||!t.get)throw new Error("outOpacityFrom takes only function or getter object");this.outOpacityMap=t.get.bind(t)}return this},e.prototype.outOriginFrom=function(t){if(t instanceof Function)this.outOriginMap=t;else{if(!t||!t.get)throw new Error("outOriginFrom takes only function or getter object");this.outOriginMap=t.get.bind(t)}return this},e.prototype.show=function(t,i,e){if(!t)return this.hide(e);if(i instanceof Function&&(e=i,i=null),this._showing>=0){if(!this.options.overlap)return void(this._nextRenderable?this._nextRenderable=t:(this._nextRenderable=t,this.hide(function(){this._nextRenderable===t&&this.show(this._nextRenderable,e),this._nextRenderable=null})));this.hide()}var r=null,h=this._renderables.indexOf(t);if(h>=0){this._showing=h,r=this._states[h],r.halt();var c=this._outgoingRenderables.indexOf(t);c>=0&&this._outgoingRenderables.splice(c,1)}else{r=new a(0);var p=new o({transform:this.inTransformMap?n.bind(this,this.inTransformMap,r):null,opacity:this.inOpacityMap?n.bind(this,this.inOpacityMap,r):null,origin:this.inOriginMap?n.bind(this,this.inOriginMap,r):null}),u=new s;u.add(p).add(t),this._showing=this._nodes.length,this._nodes.push(u),this._modifiers.push(p),this._states.push(r),this._renderables.push(t)}i||(i=this.options.inTransition),r.set(1,i,e)},e.prototype.hide=function(t,i){if(!(this._showing<0)){var e=this._showing;this._showing=-1,t instanceof Function&&(i=t,t=void 0);var o=this._nodes[e],s=this._modifiers[e],r=this._states[e],a=this._renderables[e];s.transformFrom(this.outTransformMap?n.bind(this,this.outTransformMap,r):null),s.opacityFrom(this.outOpacityMap?n.bind(this,this.outOpacityMap,r):null),s.originFrom(this.outOriginMap?n.bind(this,this.outOriginMap,r):null),this._outgoingRenderables.indexOf(a)<0&&this._outgoingRenderables.push(a),t||(t=this.options.outTransition),r.halt(),r.set(0,t,function(t,e,n,o){if(this._outgoingRenderables.indexOf(o)>=0){var s=this._nodes.indexOf(t);this._nodes.splice(s,1),this._modifiers.splice(s,1),this._states.splice(s,1),this._renderables.splice(s,1),this._outgoingRenderables.splice(this._outgoingRenderables.indexOf(o),1),this._showing>=s&&this._showing--}i&&i.call(this)}.bind(this,o,s,r,a))}},e.prototype.render=function(){var t=this._output;t.length>this._nodes.length&&t.splice(this._nodes.length);for(var i=0;i<this._nodes.length;i++)t[i]=this._nodes[i].render();return t},i.exports=e},{"../core/Modifier":9,"../core/RenderNode":11,"../core/Transform":15,"../core/View":16,"../transitions/Transitionable":88}],107:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),this._optionsManager=new r(this.options),t&&this.setOptions(t),this.container=new n(this.options.container),this.scrollview=new s(this.options.scrollview),this.container.add(this.scrollview),this._eventInput=new o,o.setInputHandler(this,this._eventInput),this._eventInput.pipe(this.scrollview),this._eventOutput=new o,o.setOutputHandler(this,this._eventOutput),this.container.pipe(this._eventOutput),this.scrollview.pipe(this._eventOutput)}var n=t("../surfaces/ContainerSurface"),o=t("../core/EventHandler"),s=t("./Scrollview"),r=(t("../utilities/Utility"),t("../core/OptionsManager"));e.DEFAULT_OPTIONS={container:{properties:{overflow:"hidden"}},scrollview:{}},e.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},e.prototype.sequenceFrom=function(){return this.scrollview.sequenceFrom.apply(this.scrollview,arguments)},e.prototype.getSize=function(){return this.container.getSize.apply(this.container,arguments)},e.prototype.render=function(){return this.container.render()},i.exports=e},{"../core/EventHandler":7,"../core/OptionsManager":10,"../surfaces/ContainerSurface":75,"../utilities/Utility":95,"./Scrollview":109}],108:[function(t,i){function e(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),this._optionsManager=new c(this.options),t&&this._optionsManager.setOptions(t),this._node=null,this._position=0,this._positionOffset=0,this._positionGetter=null,this._outputFunction=null,this._masterOutputFunction=null,this.outputFrom(),this._onEdge=0,this.group=new h,this.group.add({render:r.bind(this)}),this._entityId=a.register(this),this._size=[void 0,void 0],this._contextSize=[void 0,void 0],this._eventInput=new f,this._eventOutput=new f,f.setInputHandler(this,this._eventInput),f.setOutputHandler(this,this._eventOutput)}function n(t){t||(t=this._contextSize);var i=this.options.direction;return void 0===t[i]?this._contextSize[i]:t[i]}function o(t,i,e){var o=t.getSize?t.getSize():this._contextSize,s=this._outputFunction(i);return e.push({transform:s,target:t.render()}),n.call(this,o)}function s(){return void 0!==this.options.clipSize?this.options.clipSize:this._contextSize[this.options.direction]>this.getCumulativeSize()[this.options.direction]?n.call(this,this.getCumulativeSize()):n.call(this,this._contextSize)}function r(){for(var t=null,i=this._position,e=[],r=-this._positionOffset,a=s.call(this),h=this._node;h&&r-i<a+this.options.margin;)r+=o.call(this,h,r,e),h=h.getNext?h.getNext():null;var c=this._node,p=n.call(this,c.getSize());if(a>r){for(;c&&a>p;)c=c.getPrevious(),c&&(p+=n.call(this,c.getSize()));for(c=this._node;c&&a>p;)c=c.getNext(),c&&(p+=n.call(this,c.getSize()))}for(!h&&a-d>r-i?1!==this._onEdge&&(this._onEdge=1,this._eventOutput.emit("onEdge",{position:r-a})):!this._node.getPrevious()&&-d>i?-1!==this._onEdge&&(this._onEdge=-1,this._eventOutput.emit("onEdge",{position:0})):0!==this._onEdge&&(this._onEdge=0,this._eventOutput.emit("offEdge")),h=this._node&&this._node.getPrevious?this._node.getPrevious():null,r=-this._positionOffset,h&&(t=h.getSize?h.getSize():this._contextSize,r-=n.call(this,t));h&&r-i>-(a+this.options.margin);)o.call(this,h,r,e),h=h.getPrevious?h.getPrevious():null,h&&(t=h.getSize?h.getSize():this._contextSize,r-=n.call(this,t));return e}var a=t("../core/Entity"),h=t("../core/Group"),c=t("../core/OptionsManager"),p=t("../core/Transform"),u=t("../utilities/Utility"),l=t("../core/ViewSequence"),f=t("../core/EventHandler");e.DEFAULT_OPTIONS={direction:u.Direction.Y,margin:0,clipSize:void 0,groupScroll:!1};var d=0;e.prototype.getCumulativeSize=function(t){return void 0===t&&(t=this._node._.cumulativeSizes.length-1),this._node._.getSize(t)},e.prototype.setOptions=function(t){t.groupScroll!==this.options.groupScroll&&(t.groupScroll?this.group.pipe(this._eventOutput):this.group.unpipe(this._eventOutput)),this._optionsManager.setOptions(t)},e.prototype.onEdge=function(){return this._onEdge},e.prototype.outputFrom=function(t,i){t||(t=function(t){return this.options.direction===u.Direction.X?p.translate(t,0):p.translate(0,t)}.bind(this),i||(i=t)),this._outputFunction=t,this._masterOutputFunction=i?i:function(i){return p.inverse(t(-i))}},e.prototype.positionFrom=function(t){t instanceof Function?this._positionGetter=t:t&&t.get?this._positionGetter=t.get.bind(t):(this._positionGetter=null,this._position=t),this._positionGetter&&(this._position=this._positionGetter.call(this))},e.prototype.sequenceFrom=function(t){t instanceof Array&&(t=new l({array:t})),this._node=t,this._positionOffset=0},e.prototype.getSize=function(t){return t?this._contextSize:this._size},e.prototype.render=function(){return this._node?(this._positionGetter&&(this._position=this._positionGetter.call(this)),this._entityId):null},e.prototype.commit=function(t){var i=t.transform,e=t.opacity,n=t.origin,o=t.size;this.options.clipSize||o[0]===this._contextSize[0]&&o[1]===this._contextSize[1]||(this._onEdge=0,this._contextSize[0]=o[0],this._contextSize[1]=o[1],this.options.direction===u.Direction.X?(this._size[0]=s.call(this),this._size[1]=void 0):(this._size[0]=void 0,this._size[1]=s.call(this)));var r=this._masterOutputFunction(-this._position);return{transform:p.multiply(i,r),size:o,opacity:e,origin:n,target:this.group.render()}},i.exports=e},{"../core/Entity":5,"../core/EventHandler":7,"../core/Group":8,"../core/OptionsManager":10,"../core/Transform":15,"../core/ViewSequence":17,"../utilities/Utility":95}],109:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),this._optionsManager=new O(this.options),this._scroller=new T(this.options),this.sync=new b(["scroll","touch"],{direction:this.options.direction,scale:this.options.syncScale,rails:this.options.rails,preventDefault:void 0!==this.options.preventDefault?this.options.preventDefault:this.options.direction!==w.Direction.Y}),this._physicsEngine=new _,this._particle=new y,this._physicsEngine.addBody(this._particle),this.spring=new v({anchor:[0,0,0],period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),this.drag=new g({forceFunction:g.FORCE_FUNCTIONS.QUADRATIC,strength:this.options.drag}),this.friction=new g({forceFunction:g.FORCE_FUNCTIONS.LINEAR,strength:this.options.friction}),this._node=null,this._touchCount=0,this._springState=x.NONE,this._onEdge=M.NONE,this._pageSpringPosition=0,this._edgeSpringPosition=0,this._touchVelocity=0,this._earlyEnd=!1,this._needsPaginationCheck=!1,this._displacement=0,this._totalShift=0,this._cachedIndex=0,this._scroller.positionFrom(this.getPosition.bind(this)),this._eventInput=new m,this._eventOutput=new m,this._eventInput.pipe(this.sync),this.sync.pipe(this._eventInput),m.setInputHandler(this,this._eventInput),m.setOutputHandler(this,this._eventOutput),r.call(this),t&&this.setOptions(t)}function n(t){this._touchCount=t.count,void 0===t.count&&(this._touchCount=1),h.call(this),this.setVelocity(0),this._touchVelocity=0,this._earlyEnd=!1}function o(t){var i=-t.velocity,e=-t.delta;if(this._onEdge!==M.NONE&&t.slip&&(0>i&&this._onEdge===M.TOP||i>0&&this._onEdge===M.BOTTOM?this._earlyEnd||(s.call(this,t),this._earlyEnd=!0):this._earlyEnd&&Math.abs(i)>Math.abs(this.getVelocity())&&n.call(this,t)),!this._earlyEnd){if(this._touchVelocity=i,t.slip){var o=this.options.speedLimit;-o>i?i=-o:i>o&&(i=o),this.setVelocity(i);var r=16*o;e>r?e=r:-r>e&&(e=-r)}this.setPosition(this.getPosition()+e),this._displacement+=e,this._springState===x.NONE&&f.call(this)}}function s(t){if(this._touchCount=t.count||0,!this._touchCount){h.call(this),this._onEdge!==M.NONE&&l.call(this,this._edgeSpringPosition,x.EDGE),a.call(this);var i=-t.velocity,e=this.options.speedLimit;t.slip&&(e*=this.options.edgeGrip),-e>i?i=-e:i>e&&(i=e),this.setVelocity(i),this._touchVelocity=0,this._needsPaginationCheck=!0}}function r(){this._eventInput.bindThis(this),this._eventInput.on("start",n),this._eventInput.on("update",o),this._eventInput.on("end",s),this._eventInput.on("resize",function(){this._node._.calculateSize()}.bind(this)),this._scroller.on("onEdge",function(t){this._edgeSpringPosition=t.position,p.call(this,this._scroller.onEdge()),this._eventOutput.emit("onEdge")}.bind(this)),this._scroller.on("offEdge",function(){this.sync.setOptions({scale:this.options.syncScale}),this._onEdge=this._scroller.onEdge(),this._eventOutput.emit("offEdge")}.bind(this)),this._particle.on("update",function(t){this._springState===x.NONE&&f.call(this),this._displacement=t.position.x-this._totalShift}.bind(this)),this._particle.on("end",function(){(!this.options.paginated||this.options.paginated&&this._springState!==x.NONE)&&this._eventOutput.emit("settle")}.bind(this))}function a(){this._springState?this._physicsEngine.attach([this.spring],this._particle):this._physicsEngine.attach([this.drag,this.friction],this._particle)}function h(){this._springState=x.NONE,this._physicsEngine.detachAll()}function c(t){var i=this.options.direction,e=t.getSize();return e?e[i]:this._scroller.getSize()[i]}function p(t){this.sync.setOptions({scale:this.options.edgeGrip}),this._onEdge=t,this._touchCount||this._springState===x.EDGE||l.call(this,this._edgeSpringPosition,x.EDGE),this._springState&&Math.abs(this.getVelocity())<.001&&(h.call(this),a.call(this))}function u(){if(!this._touchCount&&this._springState!==x.EDGE){var t=this.getVelocity();if(!(Math.abs(t)>=this.options.pageStopSpeed)){var i=this.getPosition(),e=Math.abs(t)>this.options.pageSwitchSpeed,n=c.call(this,this._node),o=i>.5*n,s=t>0,r=0>t;this._needsPaginationCheck=!1,o&&!e||e&&s?this.goToNextPage():e&&r?this.goToPreviousPage():l.call(this,0,x.PAGE)}}}function l(t,i){var e;i===x.EDGE?(this._edgeSpringPosition=t,e={anchor:[this._edgeSpringPosition,0,0],period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}):i===x.PAGE&&(this._pageSpringPosition=t,e={anchor:[this._pageSpringPosition,0,0],period:this.options.pagePeriod,dampingRatio:this.options.pageDamp}),this.spring.setOptions(e),i&&!this._springState&&(h.call(this),this._springState=i,a.call(this)),this._springState=i}function f(){var t=0,i=this.getPosition();i+=(0>i?-.5:.5)>>0;for(var e=c.call(this,this._node),n=this._node.getNext();t+i>=e&&n;)t-=e,this._scroller.sequenceFrom(n),this._node=n,n=this._node.getNext(),e=c.call(this,this._node);for(var o,s=this._node.getPrevious();0>=t+i&&s;)o=c.call(this,s),this._scroller.sequenceFrom(s),this._node=s,t+=o,s=this._node.getPrevious();t&&d.call(this,t),this._node&&(this._node.index!==this._cachedIndex?this.getPosition()<.5*e&&(this._cachedIndex=this._node.index,this._eventOutput.emit("pageChange",{direction:-1,index:this._cachedIndex})):this.getPosition()>.5*e&&(this._cachedIndex=this._node.index+1,this._eventOutput.emit("pageChange",{direction:1,index:this._cachedIndex})))}function d(t){this._edgeSpringPosition+=t,this._pageSpringPosition+=t,this.setPosition(this.getPosition()+t),this._totalShift+=t,this._springState===x.EDGE?this.spring.setOptions({anchor:[this._edgeSpringPosition,0,0]}):this._springState===x.PAGE&&this.spring.setOptions({anchor:[this._pageSpringPosition,0,0]})}var _=t("../physics/PhysicsEngine"),y=t("../physics/bodies/Particle"),g=t("../physics/forces/Drag"),v=t("../physics/forces/Spring"),m=t("../core/EventHandler"),O=t("../core/OptionsManager"),S=t("../core/ViewSequence"),T=t("../views/Scroller"),w=t("../utilities/Utility"),b=t("../inputs/GenericSync"),E=t("../inputs/ScrollSync"),I=t("../inputs/TouchSync");b.register({scroll:E,touch:I});var x={NONE:0,EDGE:1,PAGE:2},M={TOP:-1,NONE:0,BOTTOM:1};e.DEFAULT_OPTIONS={direction:w.Direction.Y,rails:!0,friction:.005,drag:1e-4,edgeGrip:.2,edgePeriod:300,edgeDamp:1,margin:1e3,paginated:!1,pagePeriod:500,pageDamp:.8,pageStopSpeed:10,pageSwitchSpeed:.5,speedLimit:5,groupScroll:!1,syncScale:1},e.prototype.getCurrentIndex=function(){return this._node.index},e.prototype.goToPreviousPage=function(){if(!this._node||this._onEdge===M.TOP)return null;if(this.getPosition()>1&&this._springState===x.NONE)return l.call(this,0,x.PAGE),this._node;var t=this._node.getPrevious();if(t){var i=c.call(this,t);this._scroller.sequenceFrom(t),this._node=t,d.call(this,i),l.call(this,0,x.PAGE)}return t},e.prototype.goToNextPage=function(){if(!this._node||this._onEdge===M.BOTTOM)return null;var t=this._node.getNext();if(t){var i=c.call(this,this._node);this._scroller.sequenceFrom(t),this._node=t,d.call(this,-i),l.call(this,0,x.PAGE)}return t},e.prototype.goToPage=function(t){var i,e=this.getCurrentIndex();if(e>t)for(i=0;e-t>i;i++)this.goToPreviousPage();if(t>e)for(i=0;t-e>i;i++)this.goToNextPage()},e.prototype.outputFrom=function(){return this._scroller.outputFrom.apply(this._scroller,arguments)},e.prototype.getPosition=function(){return this._particle.getPosition1D()},e.prototype.getAbsolutePosition=function(){return this._scroller.getCumulativeSize(this.getCurrentIndex())[this.options.direction]+this.getPosition()},e.prototype.getOffset=e.prototype.getPosition,e.prototype.setPosition=function(t){this._particle.setPosition1D(t)},e.prototype.setOffset=e.prototype.setPosition,e.prototype.getVelocity=function(){return this._touchCount?this._touchVelocity:this._particle.getVelocity1D()},e.prototype.setVelocity=function(t){this._particle.setVelocity1D(t)},e.prototype.setOptions=function(t){void 0!==t.direction&&("x"===t.direction?t.direction=w.Direction.X:"y"===t.direction&&(t.direction=w.Direction.Y)),t.groupScroll!==this.options.groupScroll&&(t.groupScroll?this.subscribe(this._scroller):this.unsubscribe(this._scroller)),this._optionsManager.setOptions(t),this._scroller.setOptions(t),void 0!==t.drag&&this.drag.setOptions({strength:this.options.drag}),void 0!==t.friction&&this.friction.setOptions({strength:this.options.friction}),(void 0!==t.edgePeriod||void 0!==t.edgeDamp)&&this.spring.setOptions({period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),(t.rails||void 0!==t.direction||void 0!==t.syncScale||t.preventDefault)&&this.sync.setOptions({rails:this.options.rails,direction:this.options.direction===w.Direction.X?b.DIRECTION_X:b.DIRECTION_Y,scale:this.options.syncScale,preventDefault:this.options.preventDefault})},e.prototype.sequenceFrom=function(t){return t instanceof Array&&(t=new S({array:t,trackSize:!0})),this._node=t,this._scroller.sequenceFrom(t)},e.prototype.getSize=function(){return this._scroller.getSize.apply(this._scroller,arguments)},e.prototype.render=function(){return this.options.paginated&&this._needsPaginationCheck&&u.call(this),this._scroller.render()},i.exports=e},{"../core/EventHandler":7,"../core/OptionsManager":10,"../core/ViewSequence":17,"../inputs/GenericSync":27,"../inputs/ScrollSync":32,"../inputs/TouchSync":33,"../physics/PhysicsEngine":48,"../physics/bodies/Particle":51,"../physics/forces/Drag":63,"../physics/forces/Spring":68,"../utilities/Utility":95,"../views/Scroller":108}],110:[function(t,i){function e(t){this._items=null,this._size=null,this._outputFunction=e.DEFAULT_OUTPUT_FUNCTION,this.options=r.clone(this.constructor.DEFAULT_OPTIONS||e.DEFAULT_OPTIONS),this.optionsManager=new n(this.options),t&&this.setOptions(t)}var n=t("../core/OptionsManager"),o=t("../core/Transform"),s=t("../core/ViewSequence"),r=t("../utilities/Utility");e.DEFAULT_OPTIONS={direction:r.Direction.Y,itemSpacing:0},e.DEFAULT_OUTPUT_FUNCTION=function(t,i){var e=this.options.direction===r.Direction.X?o.translate(i,0):o.translate(0,i);return{transform:e,target:t.render()}},e.prototype.getSize=function(){return this._size||this.render(),this._size},e.prototype.sequenceFrom=function(t){return t instanceof Array&&(t=new s(t)),this._items=t,this},e.prototype.setOptions=function(){return this.optionsManager.setOptions.apply(this.optionsManager,arguments),this},e.prototype.setOutputFunction=function(t){return this._outputFunction=t,this},e.prototype.render=function(){var t=0,i=1^this.options.direction,e=this._items,n=null,o=[],s={},r=[],a=0;for(this._size=[0,0];e&&(n=e.get());)n.getSize&&(o=n.getSize()),s=this._outputFunction.call(this,n,t,a++),r.push(s),o&&(o[this.options.direction]&&(t+=o[this.options.direction]),o[i]>this._size[i]&&(this._size[i]=o[i])),e=e.getNext(),this.options.itemSpacing&&e&&(t+=this.options.itemSpacing);return this._size[this.options.direction]=t,r},i.exports=e},{"../core/OptionsManager":10,"../core/Transform":15,"../core/ViewSequence":17,"../utilities/Utility":95}],111:[function(t,i){i.exports={ContextualView:t("./ContextualView"),Deck:t("./Deck"),EdgeSwapper:t("./EdgeSwapper"),DrawerLayout:t("./DrawerLayout"),FlexibleLayout:t("./FlexibleLayout"),Flipper:t("./Flipper"),GridLayout:t("./GridLayout"),HeaderFooterLayout:t("./HeaderFooterLayout"),Lightbox:t("./Lightbox"),RenderController:t("./RenderController"),ScrollContainer:t("./ScrollContainer"),Scroller:t("./Scroller"),Scrollview:t("./Scrollview"),SequentialLayout:t("./SequentialLayout")}},{"./ContextualView":97,"./Deck":98,"./DrawerLayout":99,"./EdgeSwapper":100,"./FlexibleLayout":101,"./Flipper":102,"./GridLayout":103,"./HeaderFooterLayout":104,"./Lightbox":105,"./RenderController":106,"./ScrollContainer":107,"./Scroller":108,"./Scrollview":109,"./SequentialLayout":110}],112:[function(t,i){function e(){r.apply(this,arguments),this.title=new o({classes:this.options.classes,content:this.options.content}),this.back=new o({size:[this.options.size[1],this.options.size[1]],classes:this.options.classes,content:this.options.backContent}),this.back.on("click",function(){this._eventOutput.emit("back",{})}.bind(this)),this.more=new o({size:[this.options.size[1],this.options.size[1]],classes:this.options.classes,content:this.options.moreContent}),this.more.on("click",function(){this._eventOutput.emit("more",{})}.bind(this)),this.layout=new n({id:"master",size:this.options.size,target:[{transform:s.inFront,origin:[0,.5],target:this.back},{origin:[.5,.5],target:this.title},{transform:s.inFront,origin:[1,.5],target:this.more}]}),this._add(this.layout),this._optionsManager.on("change",function(t){var i=t.id,e=t.value;"size"===i?(this.layout.id.master.setSize(e),this.title.setSize(e),this.back.setSize([e[1],e[1]]),this.more.setSize([e[1],e[1]])):"backClasses"===i?this.back.setOptions({classes:this.options.classes.concat(this.options.backClasses)}):"backContent"===i?this.back.setContent(this.options.backContent):"classes"===i?(this.title.setOptions({classes:this.options.classes}),this.back.setOptions({classes:this.options.classes.concat(this.options.backClasses)}),this.more.setOptions({classes:this.options.classes.concat(this.options.moreClasses)})):"content"===i?this.setContent(this.options.content):"moreClasses"===i?this.more.setOptions({classes:this.options.classes.concat(this.options.moreClasses)}):"moreContent"===i&&this.more.setContent(this.options.content)}.bind(this))}var n=t("../core/Scene"),o=t("../core/Surface"),s=t("../core/Transform"),r=t("../core/View");e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.DEFAULT_OPTIONS={size:[void 0,50],backClasses:["back"],backContent:"&#x25c0;",classes:["navigation"],content:"",moreClasses:["more"],moreContent:"&#x271a;"},e.prototype.setContent=function(t){return this.title.setContent(t)},i.exports=e},{"../core/Scene":12,"../core/Surface":14,"../core/Transform":15,"../core/View":16}],113:[function(t,i){function e(t){this.options=Object.create(e.DEFAULT_OPTIONS),this.optionsManager=new c(this.options),t&&this.setOptions(t),this.indicator=new s({size:this.options.indicatorSize,classes:["slider-back"]}),this.label=new o({size:this.options.labelSize,content:this.options.label,properties:{pointerEvents:"none"},classes:["slider-label"]}),this.eventOutput=new a,this.eventInput=new a,a.setInputHandler(this,this.eventInput),a.setOutputHandler(this,this.eventOutput);var i=(this.options.range[1]-this.options.range[0])/this.options.indicatorSize[0];this.sync=new l(["mouse","touch"],{scale:i,direction:l.DIRECTION_X}),this.indicator.pipe(this.sync),this.sync.pipe(this),this.eventInput.on("update",function(t){this.set(t.position)}.bind(this)),this._drawPos=0,n.call(this)}function n(){this.label.setContent(this.options.label+'<span style="float: right">'+this.get().toFixed(this.options.precision)+"</span>")}var o=t("../core/Surface"),s=t("../surfaces/CanvasSurface"),r=t("../core/Transform"),a=t("../core/EventHandler"),h=t("../math/Utilities"),c=t("../core/OptionsManager"),p=t("../inputs/MouseSync"),u=t("../inputs/TouchSync"),l=t("../inputs/GenericSync");l.register({mouse:p,touch:u}),e.DEFAULT_OPTIONS={size:[200,60],indicatorSize:[200,30],labelSize:[200,30],range:[0,1],precision:2,value:0,label:"",fillColor:"rgba(170, 170, 170, 1)"},e.prototype.setOptions=function(t){return this.optionsManager.setOptions(t)},e.prototype.get=function(){return this.options.value},e.prototype.set=function(t){t!==this.options.value&&(this.options.value=h.clamp(t,this.options.range),n.call(this),this.eventOutput.emit("change",{value:t}))},e.prototype.getSize=function(){return this.options.size},e.prototype.render=function(){var t=this.options.range,i=Math.floor((this.get()-t[0])/(t[1]-t[0])*this.options.indicatorSize[0]);if(i<this._drawPos)this.indicator.getContext("2d").clearRect(i,0,this._drawPos-i+1,this.options.indicatorSize[1]);else if(i>this._drawPos){var e=this.indicator.getContext("2d");e.fillStyle=this.options.fillColor,e.fillRect(this._drawPos-1,0,i-this._drawPos+1,this.options.indicatorSize[1])}return this._drawPos=i,{size:this.options.size,target:[{origin:[0,0],target:this.indicator.render()},{transform:r.translate(0,0,1),origin:[0,0],target:this.label.render()}]}},i.exports=e},{"../core/EventHandler":7,"../core/OptionsManager":10,"../core/Surface":14,"../core/Transform":15,"../inputs/GenericSync":27,"../inputs/MouseSync":28,"../inputs/TouchSync":33,"../math/Utilities":40,"../surfaces/CanvasSurface":74}],114:[function(t,i){function e(){r.apply(this,arguments),this.layout=new a,this.buttons=[],this._buttonIds={},this._buttonCallbacks={},this.layout.sequenceFrom(this.buttons),this._add(this.layout),this._optionsManager.on("change",n.bind(this))}function n(t){var i=t.id,e=t.value;if("direction"===i)this.layout.setOptions({dimensions:o.call(this.buttons.length,this.options.direction)});else if("buttons"===i)for(var n in this.buttons)this.buttons[n].setOptions(e);else if("sections"===i)for(var s in this.options.sections)this.defineSection(s,this.options.sections[s])}function o(t,i){return i===s.Direction.X?[t,1]:[1,t]}var s=t("../utilities/Utility"),r=t("../core/View"),a=t("../views/GridLayout"),h=t("./ToggleButton");e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.DEFAULT_OPTIONS={sections:[],widget:h,size:[void 0,50],direction:s.Direction.X,buttons:{toggleMode:h.ON}},e.prototype.defineSection=function(t,i){var e,n=this._buttonIds[t];if(void 0===n){n=this.buttons.length,this._buttonIds[t]=n;var s=this.options.widget;e=new s,this.buttons[n]=e,this.layout.setOptions({dimensions:o(this.buttons.length,this.options.direction)})}else e=this.buttons[n],e.unbind("select",this._buttonCallbacks[t]);this.options.buttons&&e.setOptions(this.options.buttons),e.setOptions(i),this._buttonCallbacks[t]=this.select.bind(this,t),e.on("select",this._buttonCallbacks[t])},e.prototype.select=function(t){var i=this._buttonIds[t];this.buttons[i]&&this.buttons[i].isSelected()?this._eventOutput.emit("select",{id:t}):this.buttons[i]&&this.buttons[i].select();for(var e=0;e<this.buttons.length;e++)e!==i&&this.buttons[e].deselect()},i.exports=e},{"../core/View":16,"../utilities/Utility":95,"../views/GridLayout":103,"./ToggleButton":115}],115:[function(t,i){function e(t){this.options={content:"",offClasses:["off"],onClasses:["on"],size:void 0,outTransition:{curve:"easeInOut",duration:300},inTransition:{curve:"easeInOut",duration:300},toggleMode:e.TOGGLE,crossfade:!0},this._eventOutput=new o,o.setOutputHandler(this,this._eventOutput),this.offSurface=new n,this.offSurface.on("click",function(){this.options.toggleMode!==e.OFF&&this.select()}.bind(this)),this.offSurface.pipe(this._eventOutput),this.onSurface=new n,this.onSurface.on("click",function(){this.options.toggleMode!==e.ON&&this.deselect()}.bind(this)),this.onSurface.pipe(this._eventOutput),this.arbiter=new s({overlap:this.options.crossfade}),this.deselect(),t&&this.setOptions(t)}var n=t("../core/Surface"),o=t("../core/EventHandler"),s=t("../views/RenderController");e.OFF=0,e.ON=1,e.TOGGLE=2,e.prototype.select=function(){this.selected=!0,this.arbiter.show(this.onSurface,this.options.inTransition),this._eventOutput.emit("select")},e.prototype.deselect=function(){this.selected=!1,this.arbiter.show(this.offSurface,this.options.outTransition),this._eventOutput.emit("deselect")},e.prototype.isSelected=function(){return this.selected},e.prototype.setOptions=function(t){void 0!==t.content&&(this.options.content=t.content,this.offSurface.setContent(this.options.content),this.onSurface.setContent(this.options.content)),t.offClasses&&(this.options.offClasses=t.offClasses,this.offSurface.setClasses(this.options.offClasses)),t.onClasses&&(this.options.onClasses=t.onClasses,this.onSurface.setClasses(this.options.onClasses)),void 0!==t.size&&(this.options.size=t.size,this.onSurface.setSize(this.options.size),this.offSurface.setSize(this.options.size)),void 0!==t.toggleMode&&(this.options.toggleMode=t.toggleMode),void 0!==t.outTransition&&(this.options.outTransition=t.outTransition),void 0!==t.inTransition&&(this.options.inTransition=t.inTransition),void 0!==t.crossfade&&(this.options.crossfade=t.crossfade,this.arbiter.setOptions({overlap:this.options.crossfade}))},e.prototype.getSize=function(){return this.options.size},e.prototype.render=function(){return this.arbiter.render()},i.exports=e},{"../core/EventHandler":7,"../core/Surface":14,"../views/RenderController":106}],116:[function(t,i){i.exports={NavigationBar:t("./NavigationBar"),Slider:t("./Slider"),TabBar:t("./TabBar"),ToggleButton:t("./ToggleButton")}},{"./NavigationBar":112,"./Slider":113,"./TabBar":114,"./ToggleButton":115}]},{},[23])(23)});
; browserify_shim__define__module__export__(typeof famous != "undefined" ? famous : window.famous);

}).call(global, undefined, undefined, undefined, undefined, function defineExport(ex) { module.exports = ex; });

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],"/home/codio/workspace/client/scripts/common/controllers/home.js":[function(require,module,exports){
'use strict';
var controllername = 'home';
var ProgressBar = require('progressbar.js');

module.exports = function(app) {
    /*jshint validthis: true */

    var deps = ['$window', '$famous', app.name + '.photos', app.name + '.famousHelper'];

    function controller($window, $famous, photos, famousHelper) {
        var vm = this;
        vm.viewSize = {
            width: $window.innerWidth,
            height: $window.innerHeight
        };
        vm.headerHeight = 200;
        vm.userName = 'John Doe';

        vm.photos = photos.generate(2 * vm.viewSize.width / 3, 2 * vm.viewSize.width / 3, 30, 3);
        vm.photoMain = photos.generate(vm.viewSize.width * 2, vm.headerHeight * 2)[0][0];
        vm.photoProfile = photos.generate(100, 100)[0][0];

        vm.getPhotoStyle = photos.getStyle;

        var EventHandler = $famous['famous/core/EventHandler'];
        vm.eventHandler = new EventHandler();

        var getScrollView = function() {
            vm.scrollview = famousHelper.getRenderNode(vm.scrollview, '#scrollView');
            return vm.scrollview;
        };

        var getMainPhoto = function() {
            vm.mainPhoto = famousHelper.getRenderNode(vm.mainPhoto, '#mainPhoto');
            return vm.mainPhoto;
        };

        vm.getOverpull = function() {
            return -Math.min(0, getScrollView().getAbsolutePosition());
        };

        vm.getToolbarTranslate = function() {
            var pos = getScrollView().getAbsolutePosition();
            return pos > (vm.headerHeight - 60) ? pos - (vm.headerHeight - 60) : 0;
        };

        var Timer = $famous['famous/utilities/Timer'];
        Timer.every(function() {
            var pos = vm.getOverpull();
            if(getMainPhoto()) {
                vm.mainPhoto.setProperties({
                    webkitFilter: getBlur(pos)
                });
                fillCircle(Math.min(1, pos / 250));
            }

        }, 1);

        function getBlur(pos) {
            var blur = pos > 100 ? Math.min(Math.round((pos - 100) / 15), 10) : 0;
            return 'blur(' + blur + 'px)';
        }

        var fillCircle = function(value) {
            if(vm.circle) {
                vm.circle.set(value);
                return;
            }
            vm.circle = new ProgressBar.Circle($window.document.getElementById('circleSvgContainer'), {
                color: '#3498DB',
                strokeWidth: 6,
                fill: '#FFFFFF'
            });
        };
    }

    controller.$inject = deps;
    app.controller(app.name + '.' + controllername, controller);
};
},{"progressbar.js":"/home/codio/workspace/node_modules/progressbar.js/progressbar.js"}],"/home/codio/workspace/client/scripts/common/controllers/index.js":[function(require,module,exports){
'use strict';

module.exports = function(app) {
    // inject:start
    require('./home')(app);
    // inject:end
};
},{"./home":"/home/codio/workspace/client/scripts/common/controllers/home.js"}],"/home/codio/workspace/client/scripts/common/index.js":[function(require,module,exports){
'use strict';
require('angular-ui-router');

require('famous-angular');

var modulename = 'common';

module.exports = function(namespace) {

    var fullname = namespace + '.' + modulename;

    var angular = require('angular');
    var app = angular.module(fullname, ['ui.router', 'famous.angular']);
    // inject:folders start
    require('./controllers')(app);
    require('./services')(app);

    // inject:folders end
    app.config(['$stateProvider', '$urlRouterProvider',
        function($stateProvider, $urlRouterProvider) {
            $urlRouterProvider.otherwise('/');
            $stateProvider.state('home', {
                url: '/',
                template: require('./views/home.html'),
                controller: fullname + '.home',
                controllerAs: 'vm'
            });
        }
    ]);
    return app;
};
},{"./controllers":"/home/codio/workspace/client/scripts/common/controllers/index.js","./services":"/home/codio/workspace/client/scripts/common/services/index.js","./views/home.html":"/home/codio/workspace/client/scripts/common/views/home.html","angular":"/home/codio/workspace/bower_components/angular/angular.min.js","angular-ui-router":"/home/codio/workspace/bower_components/angular-ui-router/release/angular-ui-router.min.js","famous-angular":"/home/codio/workspace/bower_components/famous-angular/dist/famous-angular.min.js"}],"/home/codio/workspace/client/scripts/common/services/famousHelper.js":[function(require,module,exports){
'use strict';
var servicename = 'famousHelper';

module.exports = function(app) {

    var dependencies = ['$famous'];

    function service($famous) {
        var getRenderNode = function(cacheEl, findSelector) {
            if(!cacheEl) {
                var el = $famous.find(findSelector)[0];
                if(el) {
                    cacheEl = el.renderNode;
                }
            }
            return cacheEl;
        };

        return {
            getRenderNode: getRenderNode
        };

    }
    service.$inject = dependencies;
    app.factory(app.name + '.' + servicename, service);
};
},{}],"/home/codio/workspace/client/scripts/common/services/index.js":[function(require,module,exports){
'use strict';

module.exports = function(app) {
    // inject:start
    require('./famousHelper')(app);
    require('./photos')(app);
    // inject:end
};
},{"./famousHelper":"/home/codio/workspace/client/scripts/common/services/famousHelper.js","./photos":"/home/codio/workspace/client/scripts/common/services/photos.js"}],"/home/codio/workspace/client/scripts/common/services/photos.js":[function(require,module,exports){
'use strict';
var servicename = 'photos';
var _ = require('lodash');
var randomstring = require('randomstring');
module.exports = function(app) {

    var dependencies = [];

    function service() {
        var generate = function(width, height, number, groupOf) {
            number = number || 1;
            groupOf = groupOf || 1;
            var photos = _.chain(_.range(number))
                .map(function(index) {
                    return 'http://lorempixel.com/' + Math.round(width) + '/' + Math.round(height) + '/?i=' + randomstring.generate(7);
                })
                .groupBy(function(value, i) {
                    return Math.floor(i / groupOf);
                })
                .value();

            return photos;
        };

        var getStyle = function(photoUrl) {
            return {
                'background-image': 'url(\'' + photoUrl + '\')',
                'background-size': 'cover',
                'background-repeat': 'no-repeat',
                'background-position': 'center',
                'width': '100%',
                'height': '100%'
            };
        };

        return {
            generate: generate,
            getStyle: getStyle
        };
    }
    service.$inject = dependencies;
    app.factory(app.name + '.' + servicename, service);
};
},{"lodash":"/home/codio/workspace/node_modules/lodash/dist/lodash.js","randomstring":"/home/codio/workspace/node_modules/randomstring/index.js"}],"/home/codio/workspace/client/scripts/common/views/home.html":[function(require,module,exports){
module.exports = '<fa-view>\n' +
    '    <!-- SCROLL VIEW-->\n' +
    '    <fa-scroll-view id="scrollView" fa-options="{direction: 1, edgeGrip:1}" fa-pipe-from="vm.eventHandler">\n' +
    '        <!-- HEADER -->\n' +
    '        <fa-view>\n' +
    '            <fa-modifier fa-size="[undefined, vm.headerHeight]" fa-translate="[0, vm.getToolbarTranslate()]">\n' +
    '                <fa-surface></fa-surface>\n' +
    '                <!-- MAIN PHOTO -->\n' +
    '                <fa-modifier fa-align="[0.5,0]" fa-origin="[0.5,0]" fa-size="[vm.viewSize.width+vm.getOverpull(), vm.headerHeight+15+vm.getOverpull()]" fa-translate="[0, -15-vm.getOverpull()]" fa-opacity="1">\n' +
    '                    <fa-surface class="full-height" fa-z-index="2" fa-pipe-to="vm.eventHandler">\n' +
    '                        <div id="mainPhoto" class="full-height" ng-style="vm.getPhotoStyle(vm.photoMain)"></div>\n' +
    '                    </fa-surface>\n' +
    '                </fa-modifier>\n' +
    '                <!-- PROFILE PICTURE AND TEXT  -->\n' +
    '                <fa-modifier fa-align="[0.5,0.5]" fa-origin="[0.5,0.5]" fa-size="[200,110]" fa-translate="[0,-20-vm.getOverpull()/2]">\n' +
    '                    <!-- PROFILE CIRCLE -->\n' +
    '                    <fa-modifier fa-size="[90,90]" fa-align="[0.5,0]" fa-origin="[0.5,0]" fa-translate="[0, -5]">\n' +
    '                        <fa-surface class="circle full-height" fa-z-index="4" fa-pipe-to="vm.eventHandler">\n' +
    '                            <div id="circleSvgContainer"></div>\n' +
    '                        </fa-surface>\n' +
    '                    </fa-modifier>\n' +
    '                    <fa-modifier fa-size="[80,80]" fa-align="[0.5,0]" fa-origin="[0.5,0]">\n' +
    '                        <fa-surface class="full-height" fa-z-index="4" fa-pipe-to="vm.eventHandler">\n' +
    '                            <div class="circle full-height" ng-style="vm.getPhotoStyle(vm.photoProfile)">\n' +
    '                            </div>\n' +
    '                        </fa-surface>\n' +
    '                    </fa-modifier>\n' +
    '                    <fa-modifier fa-size="[undefined,20]" fa-align="[0.5,1]" fa-origin="[0.5,1]">\n' +
    '                        <fa-surface class="white text-center text-small full-height" fa-z-index="4" fa-pipe-to="vm.eventHandler">\n' +
    '                            <div>{{vm.userName}}</div>\n' +
    '                        </fa-surface>\n' +
    '                    </fa-modifier>\n' +
    '                </fa-modifier>\n' +
    '                <!-- HEADER TOOLBAR -->\n' +
    '                <fa-modifier fa-size="[undefined, 40]" fa-align="[0,1]" fa-origin="[0,1]" fa-translate=[0,0,10]>\n' +
    '                    <fa-modifier fa-opacity="0.6">\n' +
    '                        <fa-surface fa-background-color="\'black\'"></fa-surface>\n' +
    '                    </fa-modifier>\n' +
    '                    <fa-grid-layout fa-options="{dimensions: [3,1]}">\n' +
    '                        <fa-surface>\n' +
    '                            <div class="text-center-40">Photo</div>\n' +
    '                        </fa-surface>\n' +
    '                        <fa-surface>\n' +
    '                            <div class="text-center-40 border-bottom">Albums</div>\n' +
    '                        </fa-surface>\n' +
    '                        <fa-surface>\n' +
    '                            <div class="text-center-40">Groups</div>\n' +
    '                        </fa-surface>\n' +
    '                    </fa-grid-layout>\n' +
    '                </fa-modifier>\n' +
    '            </fa-modifier>\n' +
    '        </fa-view>\n' +
    '        <!-- IMAGES GRID-->\n' +
    '        <fa-view ng-repeat="row in vm.photos track by $index" fa-size="[undefined, vm.viewSize.width/3]" fa-index="$index">\n' +
    '            <fa-modifier>\n' +
    '                <fa-grid-layout fa-options="{dimensions :[3,1]}">\n' +
    '                    <fa-modifier ng-repeat="photo in row" fa-size="[vm.viewSize.width/3, vm.viewSize.width/3]">\n' +
    '                        <fa-surface fa-pipe-to="vm.eventHandler" fa-background-color="\'black\'" class="full-height">\n' +
    '                            <div class="full-height photo{{$index}}">\n' +
    '                                <div class="full-height" ng-style="vm.getPhotoStyle(photo)"></div>\n' +
    '                            </div>\n' +
    '                        </fa-surface>\n' +
    '                    </fa-modifier>\n' +
    '                </fa-grid-layout>\n' +
    '            </fa-modifier>\n' +
    '        </fa-view>\n' +
    '    </fa-scroll-view>\n' +
    '    <!-- FOOTER BAR-->\n' +
    '    <fa-modifier fa-size="[undefined, 40]" fa-align="[0,1]" fa-origin="[0,1]">\n' +
    '        <fa-modifier fa-opacity="0.6">\n' +
    '            <fa-surface fa-background-color="\'black\'"></fa-surface>\n' +
    '        </fa-modifier>\n' +
    '        <!-- FOOTER BAR BUTTONS -->\n' +
    '        <fa-grid-layout fa-options="{dimensions: [3,1]}">\n' +
    '            <fa-surface>\n' +
    '                <div class="text-center-40">\n' +
    '                    <i class="fa fa-photo"></i>\n' +
    '                </div>\n' +
    '            </fa-surface>\n' +
    '            <fa-surface>\n' +
    '                <div class="text-center-50">\n' +
    '                    <i class="fa fa-camera fa-2x"></i>\n' +
    '                </div>\n' +
    '            </fa-surface>\n' +
    '            <fa-surface>\n' +
    '                <div class="text-center-40">\n' +
    '                    <i class="fa fa-user"></i>\n' +
    '                </div>\n' +
    '            </fa-surface>\n' +
    '        </fa-grid-layout>\n' +
    '\n' +
    '    </fa-modifier>\n' +
    '</fa-view>';
},{}],"/home/codio/workspace/node_modules/famous-polyfills/classList.js":[function(require,module,exports){

/*
 * classList.js: Cross-browser full element.classList implementation.
 * 2011-06-15
 *
 * By Eli Grey, http://eligrey.com
 * Public Domain.
 * NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.
 */

/*global self, document, DOMException */

/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js*/

if (typeof document !== "undefined" && !("classList" in document.createElement("a"))) {

(function (view) {

"use strict";

var
      classListProp = "classList"
    , protoProp = "prototype"
    , elemCtrProto = (view.HTMLElement || view.Element)[protoProp]
    , objCtr = Object
    , strTrim = String[protoProp].trim || function () {
        return this.replace(/^\s+|\s+$/g, "");
    }
    , arrIndexOf = Array[protoProp].indexOf || function (item) {
        var
              i = 0
            , len = this.length
        ;
        for (; i < len; i++) {
            if (i in this && this[i] === item) {
                return i;
            }
        }
        return -1;
    }
    // Vendors: please allow content code to instantiate DOMExceptions
    , DOMEx = function (type, message) {
        this.name = type;
        this.code = DOMException[type];
        this.message = message;
    }
    , checkTokenAndGetIndex = function (classList, token) {
        if (token === "") {
            throw new DOMEx(
                  "SYNTAX_ERR"
                , "An invalid or illegal string was specified"
            );
        }
        if (/\s/.test(token)) {
            throw new DOMEx(
                  "INVALID_CHARACTER_ERR"
                , "String contains an invalid character"
            );
        }
        return arrIndexOf.call(classList, token);
    }
    , ClassList = function (elem) {
        var
              trimmedClasses = strTrim.call(elem.className)
            , classes = trimmedClasses ? trimmedClasses.split(/\s+/) : []
            , i = 0
            , len = classes.length
        ;
        for (; i < len; i++) {
            this.push(classes[i]);
        }
        this._updateClassName = function () {
            elem.className = this.toString();
        };
    }
    , classListProto = ClassList[protoProp] = []
    , classListGetter = function () {
        return new ClassList(this);
    }
;
// Most DOMException implementations don't allow calling DOMException's toString()
// on non-DOMExceptions. Error's toString() is sufficient here.
DOMEx[protoProp] = Error[protoProp];
classListProto.item = function (i) {
    return this[i] || null;
};
classListProto.contains = function (token) {
    token += "";
    return checkTokenAndGetIndex(this, token) !== -1;
};
classListProto.add = function (token) {
    token += "";
    if (checkTokenAndGetIndex(this, token) === -1) {
        this.push(token);
        this._updateClassName();
    }
};
classListProto.remove = function (token) {
    token += "";
    var index = checkTokenAndGetIndex(this, token);
    if (index !== -1) {
        this.splice(index, 1);
        this._updateClassName();
    }
};
classListProto.toggle = function (token) {
    token += "";
    if (checkTokenAndGetIndex(this, token) === -1) {
        this.add(token);
    } else {
        this.remove(token);
    }
};
classListProto.toString = function () {
    return this.join(" ");
};

if (objCtr.defineProperty) {
    var classListPropDesc = {
          get: classListGetter
        , enumerable: true
        , configurable: true
    };
    try {
        objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);
    } catch (ex) { // IE 8 doesn't support enumerable:true
        if (ex.number === -0x7FF5EC54) {
            classListPropDesc.enumerable = false;
            objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);
        }
    }
} else if (objCtr[protoProp].__defineGetter__) {
    elemCtrProto.__defineGetter__(classListProp, classListGetter);
}

}(self));

}

},{}],"/home/codio/workspace/node_modules/famous-polyfills/functionPrototypeBind.js":[function(require,module,exports){
if (!Function.prototype.bind) {
    Function.prototype.bind = function (oThis) {
        if (typeof this !== "function") {
            // closest thing possible to the ECMAScript 5 internal IsCallable function
            throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");
        }

        var aArgs = Array.prototype.slice.call(arguments, 1),
        fToBind = this,
        fNOP = function () {},
        fBound = function () {
            return fToBind.apply(this instanceof fNOP && oThis
                ? this
                : oThis,
                aArgs.concat(Array.prototype.slice.call(arguments)));
        };

        fNOP.prototype = this.prototype;
        fBound.prototype = new fNOP();

        return fBound;
    };
}

},{}],"/home/codio/workspace/node_modules/famous-polyfills/index.js":[function(require,module,exports){
require('./classList.js');
require('./functionPrototypeBind.js');
require('./requestAnimationFrame.js');
},{"./classList.js":"/home/codio/workspace/node_modules/famous-polyfills/classList.js","./functionPrototypeBind.js":"/home/codio/workspace/node_modules/famous-polyfills/functionPrototypeBind.js","./requestAnimationFrame.js":"/home/codio/workspace/node_modules/famous-polyfills/requestAnimationFrame.js"}],"/home/codio/workspace/node_modules/famous-polyfills/requestAnimationFrame.js":[function(require,module,exports){
// adds requestAnimationFrame functionality
// Source: http://strd6.com/2011/05/better-window-requestanimationframe-shim/

window.requestAnimationFrame || (window.requestAnimationFrame =
  window.webkitRequestAnimationFrame ||
  window.mozRequestAnimationFrame    ||
  window.oRequestAnimationFrame      ||
  window.msRequestAnimationFrame     ||
  function(callback, element) {
    return window.setTimeout(function() {
      callback(+new Date());
  }, 1000 / 60);
});

},{}],"/home/codio/workspace/node_modules/lodash/dist/lodash.js":[function(require,module,exports){
(function (global){
/**
 * @license
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modern -o ./dist/lodash.js`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
;(function() {

  /** Used as a safe reference for `undefined` in pre ES5 environments */
  var undefined;

  /** Used to pool arrays and objects used internally */
  var arrayPool = [],
      objectPool = [];

  /** Used to generate unique IDs */
  var idCounter = 0;

  /** Used to prefix keys to avoid issues with `__proto__` and properties on `Object.prototype` */
  var keyPrefix = +new Date + '';

  /** Used as the size when optimizations are enabled for large arrays */
  var largeArraySize = 75;

  /** Used as the max size of the `arrayPool` and `objectPool` */
  var maxPoolSize = 40;

  /** Used to detect and test whitespace */
  var whitespace = (
    // whitespace
    ' \t\x0B\f\xA0\ufeff' +

    // line terminators
    '\n\r\u2028\u2029' +

    // unicode category "Zs" space separators
    '\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000'
  );

  /** Used to match empty string literals in compiled template source */
  var reEmptyStringLeading = /\b__p \+= '';/g,
      reEmptyStringMiddle = /\b(__p \+=) '' \+/g,
      reEmptyStringTrailing = /(__e\(.*?\)|\b__t\)) \+\n'';/g;

  /**
   * Used to match ES6 template delimiters
   * http://people.mozilla.org/~jorendorff/es6-draft.html#sec-literals-string-literals
   */
  var reEsTemplate = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;

  /** Used to match regexp flags from their coerced string values */
  var reFlags = /\w*$/;

  /** Used to detected named functions */
  var reFuncName = /^\s*function[ \n\r\t]+\w/;

  /** Used to match "interpolate" template delimiters */
  var reInterpolate = /<%=([\s\S]+?)%>/g;

  /** Used to match leading whitespace and zeros to be removed */
  var reLeadingSpacesAndZeros = RegExp('^[' + whitespace + ']*0+(?=.$)');

  /** Used to ensure capturing order of template delimiters */
  var reNoMatch = /($^)/;

  /** Used to detect functions containing a `this` reference */
  var reThis = /\bthis\b/;

  /** Used to match unescaped characters in compiled string literals */
  var reUnescapedString = /['\n\r\t\u2028\u2029\\]/g;

  /** Used to assign default `context` object properties */
  var contextProps = [
    'Array', 'Boolean', 'Date', 'Function', 'Math', 'Number', 'Object',
    'RegExp', 'String', '_', 'attachEvent', 'clearTimeout', 'isFinite', 'isNaN',
    'parseInt', 'setTimeout'
  ];

  /** Used to make template sourceURLs easier to identify */
  var templateCounter = 0;

  /** `Object#toString` result shortcuts */
  var argsClass = '[object Arguments]',
      arrayClass = '[object Array]',
      boolClass = '[object Boolean]',
      dateClass = '[object Date]',
      funcClass = '[object Function]',
      numberClass = '[object Number]',
      objectClass = '[object Object]',
      regexpClass = '[object RegExp]',
      stringClass = '[object String]';

  /** Used to identify object classifications that `_.clone` supports */
  var cloneableClasses = {};
  cloneableClasses[funcClass] = false;
  cloneableClasses[argsClass] = cloneableClasses[arrayClass] =
  cloneableClasses[boolClass] = cloneableClasses[dateClass] =
  cloneableClasses[numberClass] = cloneableClasses[objectClass] =
  cloneableClasses[regexpClass] = cloneableClasses[stringClass] = true;

  /** Used as an internal `_.debounce` options object */
  var debounceOptions = {
    'leading': false,
    'maxWait': 0,
    'trailing': false
  };

  /** Used as the property descriptor for `__bindData__` */
  var descriptor = {
    'configurable': false,
    'enumerable': false,
    'value': null,
    'writable': false
  };

  /** Used to determine if values are of the language type Object */
  var objectTypes = {
    'boolean': false,
    'function': true,
    'object': true,
    'number': false,
    'string': false,
    'undefined': false
  };

  /** Used to escape characters for inclusion in compiled string literals */
  var stringEscapes = {
    '\\': '\\',
    "'": "'",
    '\n': 'n',
    '\r': 'r',
    '\t': 't',
    '\u2028': 'u2028',
    '\u2029': 'u2029'
  };

  /** Used as a reference to the global object */
  var root = (objectTypes[typeof window] && window) || this;

  /** Detect free variable `exports` */
  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;

  /** Detect free variable `module` */
  var freeModule = objectTypes[typeof module] && module && !module.nodeType && module;

  /** Detect the popular CommonJS extension `module.exports` */
  var moduleExports = freeModule && freeModule.exports === freeExports && freeExports;

  /** Detect free variable `global` from Node.js or Browserified code and use it as `root` */
  var freeGlobal = objectTypes[typeof global] && global;
  if (freeGlobal && (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal)) {
    root = freeGlobal;
  }

  /*--------------------------------------------------------------------------*/

  /**
   * The base implementation of `_.indexOf` without support for binary searches
   * or `fromIndex` constraints.
   *
   * @private
   * @param {Array} array The array to search.
   * @param {*} value The value to search for.
   * @param {number} [fromIndex=0] The index to search from.
   * @returns {number} Returns the index of the matched value or `-1`.
   */
  function baseIndexOf(array, value, fromIndex) {
    var index = (fromIndex || 0) - 1,
        length = array ? array.length : 0;

    while (++index < length) {
      if (array[index] === value) {
        return index;
      }
    }
    return -1;
  }

  /**
   * An implementation of `_.contains` for cache objects that mimics the return
   * signature of `_.indexOf` by returning `0` if the value is found, else `-1`.
   *
   * @private
   * @param {Object} cache The cache object to inspect.
   * @param {*} value The value to search for.
   * @returns {number} Returns `0` if `value` is found, else `-1`.
   */
  function cacheIndexOf(cache, value) {
    var type = typeof value;
    cache = cache.cache;

    if (type == 'boolean' || value == null) {
      return cache[value] ? 0 : -1;
    }
    if (type != 'number' && type != 'string') {
      type = 'object';
    }
    var key = type == 'number' ? value : keyPrefix + value;
    cache = (cache = cache[type]) && cache[key];

    return type == 'object'
      ? (cache && baseIndexOf(cache, value) > -1 ? 0 : -1)
      : (cache ? 0 : -1);
  }

  /**
   * Adds a given value to the corresponding cache object.
   *
   * @private
   * @param {*} value The value to add to the cache.
   */
  function cachePush(value) {
    var cache = this.cache,
        type = typeof value;

    if (type == 'boolean' || value == null) {
      cache[value] = true;
    } else {
      if (type != 'number' && type != 'string') {
        type = 'object';
      }
      var key = type == 'number' ? value : keyPrefix + value,
          typeCache = cache[type] || (cache[type] = {});

      if (type == 'object') {
        (typeCache[key] || (typeCache[key] = [])).push(value);
      } else {
        typeCache[key] = true;
      }
    }
  }

  /**
   * Used by `_.max` and `_.min` as the default callback when a given
   * collection is a string value.
   *
   * @private
   * @param {string} value The character to inspect.
   * @returns {number} Returns the code unit of given character.
   */
  function charAtCallback(value) {
    return value.charCodeAt(0);
  }

  /**
   * Used by `sortBy` to compare transformed `collection` elements, stable sorting
   * them in ascending order.
   *
   * @private
   * @param {Object} a The object to compare to `b`.
   * @param {Object} b The object to compare to `a`.
   * @returns {number} Returns the sort order indicator of `1` or `-1`.
   */
  function compareAscending(a, b) {
    var ac = a.criteria,
        bc = b.criteria,
        index = -1,
        length = ac.length;

    while (++index < length) {
      var value = ac[index],
          other = bc[index];

      if (value !== other) {
        if (value > other || typeof value == 'undefined') {
          return 1;
        }
        if (value < other || typeof other == 'undefined') {
          return -1;
        }
      }
    }
    // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications
    // that causes it, under certain circumstances, to return the same value for
    // `a` and `b`. See https://github.com/jashkenas/underscore/pull/1247
    //
    // This also ensures a stable sort in V8 and other engines.
    // See http://code.google.com/p/v8/issues/detail?id=90
    return a.index - b.index;
  }

  /**
   * Creates a cache object to optimize linear searches of large arrays.
   *
   * @private
   * @param {Array} [array=[]] The array to search.
   * @returns {null|Object} Returns the cache object or `null` if caching should not be used.
   */
  function createCache(array) {
    var index = -1,
        length = array.length,
        first = array[0],
        mid = array[(length / 2) | 0],
        last = array[length - 1];

    if (first && typeof first == 'object' &&
        mid && typeof mid == 'object' && last && typeof last == 'object') {
      return false;
    }
    var cache = getObject();
    cache['false'] = cache['null'] = cache['true'] = cache['undefined'] = false;

    var result = getObject();
    result.array = array;
    result.cache = cache;
    result.push = cachePush;

    while (++index < length) {
      result.push(array[index]);
    }
    return result;
  }

  /**
   * Used by `template` to escape characters for inclusion in compiled
   * string literals.
   *
   * @private
   * @param {string} match The matched character to escape.
   * @returns {string} Returns the escaped character.
   */
  function escapeStringChar(match) {
    return '\\' + stringEscapes[match];
  }

  /**
   * Gets an array from the array pool or creates a new one if the pool is empty.
   *
   * @private
   * @returns {Array} The array from the pool.
   */
  function getArray() {
    return arrayPool.pop() || [];
  }

  /**
   * Gets an object from the object pool or creates a new one if the pool is empty.
   *
   * @private
   * @returns {Object} The object from the pool.
   */
  function getObject() {
    return objectPool.pop() || {
      'array': null,
      'cache': null,
      'criteria': null,
      'false': false,
      'index': 0,
      'null': false,
      'number': null,
      'object': null,
      'push': null,
      'string': null,
      'true': false,
      'undefined': false,
      'value': null
    };
  }

  /**
   * Releases the given array back to the array pool.
   *
   * @private
   * @param {Array} [array] The array to release.
   */
  function releaseArray(array) {
    array.length = 0;
    if (arrayPool.length < maxPoolSize) {
      arrayPool.push(array);
    }
  }

  /**
   * Releases the given object back to the object pool.
   *
   * @private
   * @param {Object} [object] The object to release.
   */
  function releaseObject(object) {
    var cache = object.cache;
    if (cache) {
      releaseObject(cache);
    }
    object.array = object.cache = object.criteria = object.object = object.number = object.string = object.value = null;
    if (objectPool.length < maxPoolSize) {
      objectPool.push(object);
    }
  }

  /**
   * Slices the `collection` from the `start` index up to, but not including,
   * the `end` index.
   *
   * Note: This function is used instead of `Array#slice` to support node lists
   * in IE < 9 and to ensure dense arrays are returned.
   *
   * @private
   * @param {Array|Object|string} collection The collection to slice.
   * @param {number} start The start index.
   * @param {number} end The end index.
   * @returns {Array} Returns the new array.
   */
  function slice(array, start, end) {
    start || (start = 0);
    if (typeof end == 'undefined') {
      end = array ? array.length : 0;
    }
    var index = -1,
        length = end - start || 0,
        result = Array(length < 0 ? 0 : length);

    while (++index < length) {
      result[index] = array[start + index];
    }
    return result;
  }

  /*--------------------------------------------------------------------------*/

  /**
   * Create a new `lodash` function using the given context object.
   *
   * @static
   * @memberOf _
   * @category Utilities
   * @param {Object} [context=root] The context object.
   * @returns {Function} Returns the `lodash` function.
   */
  function runInContext(context) {
    // Avoid issues with some ES3 environments that attempt to use values, named
    // after built-in constructors like `Object`, for the creation of literals.
    // ES5 clears this up by stating that literals must use built-in constructors.
    // See http://es5.github.io/#x11.1.5.
    context = context ? _.defaults(root.Object(), context, _.pick(root, contextProps)) : root;

    /** Native constructor references */
    var Array = context.Array,
        Boolean = context.Boolean,
        Date = context.Date,
        Function = context.Function,
        Math = context.Math,
        Number = context.Number,
        Object = context.Object,
        RegExp = context.RegExp,
        String = context.String,
        TypeError = context.TypeError;

    /**
     * Used for `Array` method references.
     *
     * Normally `Array.prototype` would suffice, however, using an array literal
     * avoids issues in Narwhal.
     */
    var arrayRef = [];

    /** Used for native method references */
    var objectProto = Object.prototype;

    /** Used to restore the original `_` reference in `noConflict` */
    var oldDash = context._;

    /** Used to resolve the internal [[Class]] of values */
    var toString = objectProto.toString;

    /** Used to detect if a method is native */
    var reNative = RegExp('^' +
      String(toString)
        .replace(/[.*+?^${}()|[\]\\]/g, '\\$&')
        .replace(/toString| for [^\]]+/g, '.*?') + '$'
    );

    /** Native method shortcuts */
    var ceil = Math.ceil,
        clearTimeout = context.clearTimeout,
        floor = Math.floor,
        fnToString = Function.prototype.toString,
        getPrototypeOf = isNative(getPrototypeOf = Object.getPrototypeOf) && getPrototypeOf,
        hasOwnProperty = objectProto.hasOwnProperty,
        push = arrayRef.push,
        setTimeout = context.setTimeout,
        splice = arrayRef.splice,
        unshift = arrayRef.unshift;

    /** Used to set meta data on functions */
    var defineProperty = (function() {
      // IE 8 only accepts DOM elements
      try {
        var o = {},
            func = isNative(func = Object.defineProperty) && func,
            result = func(o, o, o) && func;
      } catch(e) { }
      return result;
    }());

    /* Native method shortcuts for methods with the same name as other `lodash` methods */
    var nativeCreate = isNative(nativeCreate = Object.create) && nativeCreate,
        nativeIsArray = isNative(nativeIsArray = Array.isArray) && nativeIsArray,
        nativeIsFinite = context.isFinite,
        nativeIsNaN = context.isNaN,
        nativeKeys = isNative(nativeKeys = Object.keys) && nativeKeys,
        nativeMax = Math.max,
        nativeMin = Math.min,
        nativeParseInt = context.parseInt,
        nativeRandom = Math.random;

    /** Used to lookup a built-in constructor by [[Class]] */
    var ctorByClass = {};
    ctorByClass[arrayClass] = Array;
    ctorByClass[boolClass] = Boolean;
    ctorByClass[dateClass] = Date;
    ctorByClass[funcClass] = Function;
    ctorByClass[objectClass] = Object;
    ctorByClass[numberClass] = Number;
    ctorByClass[regexpClass] = RegExp;
    ctorByClass[stringClass] = String;

    /*--------------------------------------------------------------------------*/

    /**
     * Creates a `lodash` object which wraps the given value to enable intuitive
     * method chaining.
     *
     * In addition to Lo-Dash methods, wrappers also have the following `Array` methods:
     * `concat`, `join`, `pop`, `push`, `reverse`, `shift`, `slice`, `sort`, `splice`,
     * and `unshift`
     *
     * Chaining is supported in custom builds as long as the `value` method is
     * implicitly or explicitly included in the build.
     *
     * The chainable wrapper functions are:
     * `after`, `assign`, `bind`, `bindAll`, `bindKey`, `chain`, `compact`,
     * `compose`, `concat`, `countBy`, `create`, `createCallback`, `curry`,
     * `debounce`, `defaults`, `defer`, `delay`, `difference`, `filter`, `flatten`,
     * `forEach`, `forEachRight`, `forIn`, `forInRight`, `forOwn`, `forOwnRight`,
     * `functions`, `groupBy`, `indexBy`, `initial`, `intersection`, `invert`,
     * `invoke`, `keys`, `map`, `max`, `memoize`, `merge`, `min`, `object`, `omit`,
     * `once`, `pairs`, `partial`, `partialRight`, `pick`, `pluck`, `pull`, `push`,
     * `range`, `reject`, `remove`, `rest`, `reverse`, `shuffle`, `slice`, `sort`,
     * `sortBy`, `splice`, `tap`, `throttle`, `times`, `toArray`, `transform`,
     * `union`, `uniq`, `unshift`, `unzip`, `values`, `where`, `without`, `wrap`,
     * and `zip`
     *
     * The non-chainable wrapper functions are:
     * `clone`, `cloneDeep`, `contains`, `escape`, `every`, `find`, `findIndex`,
     * `findKey`, `findLast`, `findLastIndex`, `findLastKey`, `has`, `identity`,
     * `indexOf`, `isArguments`, `isArray`, `isBoolean`, `isDate`, `isElement`,
     * `isEmpty`, `isEqual`, `isFinite`, `isFunction`, `isNaN`, `isNull`, `isNumber`,
     * `isObject`, `isPlainObject`, `isRegExp`, `isString`, `isUndefined`, `join`,
     * `lastIndexOf`, `mixin`, `noConflict`, `parseInt`, `pop`, `random`, `reduce`,
     * `reduceRight`, `result`, `shift`, `size`, `some`, `sortedIndex`, `runInContext`,
     * `template`, `unescape`, `uniqueId`, and `value`
     *
     * The wrapper functions `first` and `last` return wrapped values when `n` is
     * provided, otherwise they return unwrapped values.
     *
     * Explicit chaining can be enabled by using the `_.chain` method.
     *
     * @name _
     * @constructor
     * @category Chaining
     * @param {*} value The value to wrap in a `lodash` instance.
     * @returns {Object} Returns a `lodash` instance.
     * @example
     *
     * var wrapped = _([1, 2, 3]);
     *
     * // returns an unwrapped value
     * wrapped.reduce(function(sum, num) {
     *   return sum + num;
     * });
     * // => 6
     *
     * // returns a wrapped value
     * var squares = wrapped.map(function(num) {
     *   return num * num;
     * });
     *
     * _.isArray(squares);
     * // => false
     *
     * _.isArray(squares.value());
     * // => true
     */
    function lodash(value) {
      // don't wrap if already wrapped, even if wrapped by a different `lodash` constructor
      return (value && typeof value == 'object' && !isArray(value) && hasOwnProperty.call(value, '__wrapped__'))
       ? value
       : new lodashWrapper(value);
    }

    /**
     * A fast path for creating `lodash` wrapper objects.
     *
     * @private
     * @param {*} value The value to wrap in a `lodash` instance.
     * @param {boolean} chainAll A flag to enable chaining for all methods
     * @returns {Object} Returns a `lodash` instance.
     */
    function lodashWrapper(value, chainAll) {
      this.__chain__ = !!chainAll;
      this.__wrapped__ = value;
    }
    // ensure `new lodashWrapper` is an instance of `lodash`
    lodashWrapper.prototype = lodash.prototype;

    /**
     * An object used to flag environments features.
     *
     * @static
     * @memberOf _
     * @type Object
     */
    var support = lodash.support = {};

    /**
     * Detect if functions can be decompiled by `Function#toString`
     * (all but PS3 and older Opera mobile browsers & avoided in Windows 8 apps).
     *
     * @memberOf _.support
     * @type boolean
     */
    support.funcDecomp = !isNative(context.WinRTError) && reThis.test(runInContext);

    /**
     * Detect if `Function#name` is supported (all but IE).
     *
     * @memberOf _.support
     * @type boolean
     */
    support.funcNames = typeof Function.name == 'string';

    /**
     * By default, the template delimiters used by Lo-Dash are similar to those in
     * embedded Ruby (ERB). Change the following template settings to use alternative
     * delimiters.
     *
     * @static
     * @memberOf _
     * @type Object
     */
    lodash.templateSettings = {

      /**
       * Used to detect `data` property values to be HTML-escaped.
       *
       * @memberOf _.templateSettings
       * @type RegExp
       */
      'escape': /<%-([\s\S]+?)%>/g,

      /**
       * Used to detect code to be evaluated.
       *
       * @memberOf _.templateSettings
       * @type RegExp
       */
      'evaluate': /<%([\s\S]+?)%>/g,

      /**
       * Used to detect `data` property values to inject.
       *
       * @memberOf _.templateSettings
       * @type RegExp
       */
      'interpolate': reInterpolate,

      /**
       * Used to reference the data object in the template text.
       *
       * @memberOf _.templateSettings
       * @type string
       */
      'variable': '',

      /**
       * Used to import variables into the compiled template.
       *
       * @memberOf _.templateSettings
       * @type Object
       */
      'imports': {

        /**
         * A reference to the `lodash` function.
         *
         * @memberOf _.templateSettings.imports
         * @type Function
         */
        '_': lodash
      }
    };

    /*--------------------------------------------------------------------------*/

    /**
     * The base implementation of `_.bind` that creates the bound function and
     * sets its meta data.
     *
     * @private
     * @param {Array} bindData The bind data array.
     * @returns {Function} Returns the new bound function.
     */
    function baseBind(bindData) {
      var func = bindData[0],
          partialArgs = bindData[2],
          thisArg = bindData[4];

      function bound() {
        // `Function#bind` spec
        // http://es5.github.io/#x15.3.4.5
        if (partialArgs) {
          // avoid `arguments` object deoptimizations by using `slice` instead
          // of `Array.prototype.slice.call` and not assigning `arguments` to a
          // variable as a ternary expression
          var args = slice(partialArgs);
          push.apply(args, arguments);
        }
        // mimic the constructor's `return` behavior
        // http://es5.github.io/#x13.2.2
        if (this instanceof bound) {
          // ensure `new bound` is an instance of `func`
          var thisBinding = baseCreate(func.prototype),
              result = func.apply(thisBinding, args || arguments);
          return isObject(result) ? result : thisBinding;
        }
        return func.apply(thisArg, args || arguments);
      }
      setBindData(bound, bindData);
      return bound;
    }

    /**
     * The base implementation of `_.clone` without argument juggling or support
     * for `thisArg` binding.
     *
     * @private
     * @param {*} value The value to clone.
     * @param {boolean} [isDeep=false] Specify a deep clone.
     * @param {Function} [callback] The function to customize cloning values.
     * @param {Array} [stackA=[]] Tracks traversed source objects.
     * @param {Array} [stackB=[]] Associates clones with source counterparts.
     * @returns {*} Returns the cloned value.
     */
    function baseClone(value, isDeep, callback, stackA, stackB) {
      if (callback) {
        var result = callback(value);
        if (typeof result != 'undefined') {
          return result;
        }
      }
      // inspect [[Class]]
      var isObj = isObject(value);
      if (isObj) {
        var className = toString.call(value);
        if (!cloneableClasses[className]) {
          return value;
        }
        var ctor = ctorByClass[className];
        switch (className) {
          case boolClass:
          case dateClass:
            return new ctor(+value);

          case numberClass:
          case stringClass:
            return new ctor(value);

          case regexpClass:
            result = ctor(value.source, reFlags.exec(value));
            result.lastIndex = value.lastIndex;
            return result;
        }
      } else {
        return value;
      }
      var isArr = isArray(value);
      if (isDeep) {
        // check for circular references and return corresponding clone
        var initedStack = !stackA;
        stackA || (stackA = getArray());
        stackB || (stackB = getArray());

        var length = stackA.length;
        while (length--) {
          if (stackA[length] == value) {
            return stackB[length];
          }
        }
        result = isArr ? ctor(value.length) : {};
      }
      else {
        result = isArr ? slice(value) : assign({}, value);
      }
      // add array properties assigned by `RegExp#exec`
      if (isArr) {
        if (hasOwnProperty.call(value, 'index')) {
          result.index = value.index;
        }
        if (hasOwnProperty.call(value, 'input')) {
          result.input = value.input;
        }
      }
      // exit for shallow clone
      if (!isDeep) {
        return result;
      }
      // add the source value to the stack of traversed objects
      // and associate it with its clone
      stackA.push(value);
      stackB.push(result);

      // recursively populate clone (susceptible to call stack limits)
      (isArr ? forEach : forOwn)(value, function(objValue, key) {
        result[key] = baseClone(objValue, isDeep, callback, stackA, stackB);
      });

      if (initedStack) {
        releaseArray(stackA);
        releaseArray(stackB);
      }
      return result;
    }

    /**
     * The base implementation of `_.create` without support for assigning
     * properties to the created object.
     *
     * @private
     * @param {Object} prototype The object to inherit from.
     * @returns {Object} Returns the new object.
     */
    function baseCreate(prototype, properties) {
      return isObject(prototype) ? nativeCreate(prototype) : {};
    }
    // fallback for browsers without `Object.create`
    if (!nativeCreate) {
      baseCreate = (function() {
        function Object() {}
        return function(prototype) {
          if (isObject(prototype)) {
            Object.prototype = prototype;
            var result = new Object;
            Object.prototype = null;
          }
          return result || context.Object();
        };
      }());
    }

    /**
     * The base implementation of `_.createCallback` without support for creating
     * "_.pluck" or "_.where" style callbacks.
     *
     * @private
     * @param {*} [func=identity] The value to convert to a callback.
     * @param {*} [thisArg] The `this` binding of the created callback.
     * @param {number} [argCount] The number of arguments the callback accepts.
     * @returns {Function} Returns a callback function.
     */
    function baseCreateCallback(func, thisArg, argCount) {
      if (typeof func != 'function') {
        return identity;
      }
      // exit early for no `thisArg` or already bound by `Function#bind`
      if (typeof thisArg == 'undefined' || !('prototype' in func)) {
        return func;
      }
      var bindData = func.__bindData__;
      if (typeof bindData == 'undefined') {
        if (support.funcNames) {
          bindData = !func.name;
        }
        bindData = bindData || !support.funcDecomp;
        if (!bindData) {
          var source = fnToString.call(func);
          if (!support.funcNames) {
            bindData = !reFuncName.test(source);
          }
          if (!bindData) {
            // checks if `func` references the `this` keyword and stores the result
            bindData = reThis.test(source);
            setBindData(func, bindData);
          }
        }
      }
      // exit early if there are no `this` references or `func` is bound
      if (bindData === false || (bindData !== true && bindData[1] & 1)) {
        return func;
      }
      switch (argCount) {
        case 1: return function(value) {
          return func.call(thisArg, value);
        };
        case 2: return function(a, b) {
          return func.call(thisArg, a, b);
        };
        case 3: return function(value, index, collection) {
          return func.call(thisArg, value, index, collection);
        };
        case 4: return function(accumulator, value, index, collection) {
          return func.call(thisArg, accumulator, value, index, collection);
        };
      }
      return bind(func, thisArg);
    }

    /**
     * The base implementation of `createWrapper` that creates the wrapper and
     * sets its meta data.
     *
     * @private
     * @param {Array} bindData The bind data array.
     * @returns {Function} Returns the new function.
     */
    function baseCreateWrapper(bindData) {
      var func = bindData[0],
          bitmask = bindData[1],
          partialArgs = bindData[2],
          partialRightArgs = bindData[3],
          thisArg = bindData[4],
          arity = bindData[5];

      var isBind = bitmask & 1,
          isBindKey = bitmask & 2,
          isCurry = bitmask & 4,
          isCurryBound = bitmask & 8,
          key = func;

      function bound() {
        var thisBinding = isBind ? thisArg : this;
        if (partialArgs) {
          var args = slice(partialArgs);
          push.apply(args, arguments);
        }
        if (partialRightArgs || isCurry) {
          args || (args = slice(arguments));
          if (partialRightArgs) {
            push.apply(args, partialRightArgs);
          }
          if (isCurry && args.length < arity) {
            bitmask |= 16 & ~32;
            return baseCreateWrapper([func, (isCurryBound ? bitmask : bitmask & ~3), args, null, thisArg, arity]);
          }
        }
        args || (args = arguments);
        if (isBindKey) {
          func = thisBinding[key];
        }
        if (this instanceof bound) {
          thisBinding = baseCreate(func.prototype);
          var result = func.apply(thisBinding, args);
          return isObject(result) ? result : thisBinding;
        }
        return func.apply(thisBinding, args);
      }
      setBindData(bound, bindData);
      return bound;
    }

    /**
     * The base implementation of `_.difference` that accepts a single array
     * of values to exclude.
     *
     * @private
     * @param {Array} array The array to process.
     * @param {Array} [values] The array of values to exclude.
     * @returns {Array} Returns a new array of filtered values.
     */
    function baseDifference(array, values) {
      var index = -1,
          indexOf = getIndexOf(),
          length = array ? array.length : 0,
          isLarge = length >= largeArraySize && indexOf === baseIndexOf,
          result = [];

      if (isLarge) {
        var cache = createCache(values);
        if (cache) {
          indexOf = cacheIndexOf;
          values = cache;
        } else {
          isLarge = false;
        }
      }
      while (++index < length) {
        var value = array[index];
        if (indexOf(values, value) < 0) {
          result.push(value);
        }
      }
      if (isLarge) {
        releaseObject(values);
      }
      return result;
    }

    /**
     * The base implementation of `_.flatten` without support for callback
     * shorthands or `thisArg` binding.
     *
     * @private
     * @param {Array} array The array to flatten.
     * @param {boolean} [isShallow=false] A flag to restrict flattening to a single level.
     * @param {boolean} [isStrict=false] A flag to restrict flattening to arrays and `arguments` objects.
     * @param {number} [fromIndex=0] The index to start from.
     * @returns {Array} Returns a new flattened array.
     */
    function baseFlatten(array, isShallow, isStrict, fromIndex) {
      var index = (fromIndex || 0) - 1,
          length = array ? array.length : 0,
          result = [];

      while (++index < length) {
        var value = array[index];

        if (value && typeof value == 'object' && typeof value.length == 'number'
            && (isArray(value) || isArguments(value))) {
          // recursively flatten arrays (susceptible to call stack limits)
          if (!isShallow) {
            value = baseFlatten(value, isShallow, isStrict);
          }
          var valIndex = -1,
              valLength = value.length,
              resIndex = result.length;

          result.length += valLength;
          while (++valIndex < valLength) {
            result[resIndex++] = value[valIndex];
          }
        } else if (!isStrict) {
          result.push(value);
        }
      }
      return result;
    }

    /**
     * The base implementation of `_.isEqual`, without support for `thisArg` binding,
     * that allows partial "_.where" style comparisons.
     *
     * @private
     * @param {*} a The value to compare.
     * @param {*} b The other value to compare.
     * @param {Function} [callback] The function to customize comparing values.
     * @param {Function} [isWhere=false] A flag to indicate performing partial comparisons.
     * @param {Array} [stackA=[]] Tracks traversed `a` objects.
     * @param {Array} [stackB=[]] Tracks traversed `b` objects.
     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
     */
    function baseIsEqual(a, b, callback, isWhere, stackA, stackB) {
      // used to indicate that when comparing objects, `a` has at least the properties of `b`
      if (callback) {
        var result = callback(a, b);
        if (typeof result != 'undefined') {
          return !!result;
        }
      }
      // exit early for identical values
      if (a === b) {
        // treat `+0` vs. `-0` as not equal
        return a !== 0 || (1 / a == 1 / b);
      }
      var type = typeof a,
          otherType = typeof b;

      // exit early for unlike primitive values
      if (a === a &&
          !(a && objectTypes[type]) &&
          !(b && objectTypes[otherType])) {
        return false;
      }
      // exit early for `null` and `undefined` avoiding ES3's Function#call behavior
      // http://es5.github.io/#x15.3.4.4
      if (a == null || b == null) {
        return a === b;
      }
      // compare [[Class]] names
      var className = toString.call(a),
          otherClass = toString.call(b);

      if (className == argsClass) {
        className = objectClass;
      }
      if (otherClass == argsClass) {
        otherClass = objectClass;
      }
      if (className != otherClass) {
        return false;
      }
      switch (className) {
        case boolClass:
        case dateClass:
          // coerce dates and booleans to numbers, dates to milliseconds and booleans
          // to `1` or `0` treating invalid dates coerced to `NaN` as not equal
          return +a == +b;

        case numberClass:
          // treat `NaN` vs. `NaN` as equal
          return (a != +a)
            ? b != +b
            // but treat `+0` vs. `-0` as not equal
            : (a == 0 ? (1 / a == 1 / b) : a == +b);

        case regexpClass:
        case stringClass:
          // coerce regexes to strings (http://es5.github.io/#x15.10.6.4)
          // treat string primitives and their corresponding object instances as equal
          return a == String(b);
      }
      var isArr = className == arrayClass;
      if (!isArr) {
        // unwrap any `lodash` wrapped values
        var aWrapped = hasOwnProperty.call(a, '__wrapped__'),
            bWrapped = hasOwnProperty.call(b, '__wrapped__');

        if (aWrapped || bWrapped) {
          return baseIsEqual(aWrapped ? a.__wrapped__ : a, bWrapped ? b.__wrapped__ : b, callback, isWhere, stackA, stackB);
        }
        // exit for functions and DOM nodes
        if (className != objectClass) {
          return false;
        }
        // in older versions of Opera, `arguments` objects have `Array` constructors
        var ctorA = a.constructor,
            ctorB = b.constructor;

        // non `Object` object instances with different constructors are not equal
        if (ctorA != ctorB &&
              !(isFunction(ctorA) && ctorA instanceof ctorA && isFunction(ctorB) && ctorB instanceof ctorB) &&
              ('constructor' in a && 'constructor' in b)
            ) {
          return false;
        }
      }
      // assume cyclic structures are equal
      // the algorithm for detecting cyclic structures is adapted from ES 5.1
      // section 15.12.3, abstract operation `JO` (http://es5.github.io/#x15.12.3)
      var initedStack = !stackA;
      stackA || (stackA = getArray());
      stackB || (stackB = getArray());

      var length = stackA.length;
      while (length--) {
        if (stackA[length] == a) {
          return stackB[length] == b;
        }
      }
      var size = 0;
      result = true;

      // add `a` and `b` to the stack of traversed objects
      stackA.push(a);
      stackB.push(b);

      // recursively compare objects and arrays (susceptible to call stack limits)
      if (isArr) {
        // compare lengths to determine if a deep comparison is necessary
        length = a.length;
        size = b.length;
        result = size == length;

        if (result || isWhere) {
          // deep compare the contents, ignoring non-numeric properties
          while (size--) {
            var index = length,
                value = b[size];

            if (isWhere) {
              while (index--) {
                if ((result = baseIsEqual(a[index], value, callback, isWhere, stackA, stackB))) {
                  break;
                }
              }
            } else if (!(result = baseIsEqual(a[size], value, callback, isWhere, stackA, stackB))) {
              break;
            }
          }
        }
      }
      else {
        // deep compare objects using `forIn`, instead of `forOwn`, to avoid `Object.keys`
        // which, in this case, is more costly
        forIn(b, function(value, key, b) {
          if (hasOwnProperty.call(b, key)) {
            // count the number of properties.
            size++;
            // deep compare each property value.
            return (result = hasOwnProperty.call(a, key) && baseIsEqual(a[key], value, callback, isWhere, stackA, stackB));
          }
        });

        if (result && !isWhere) {
          // ensure both objects have the same number of properties
          forIn(a, function(value, key, a) {
            if (hasOwnProperty.call(a, key)) {
              // `size` will be `-1` if `a` has more properties than `b`
              return (result = --size > -1);
            }
          });
        }
      }
      stackA.pop();
      stackB.pop();

      if (initedStack) {
        releaseArray(stackA);
        releaseArray(stackB);
      }
      return result;
    }

    /**
     * The base implementation of `_.merge` without argument juggling or support
     * for `thisArg` binding.
     *
     * @private
     * @param {Object} object The destination object.
     * @param {Object} source The source object.
     * @param {Function} [callback] The function to customize merging properties.
     * @param {Array} [stackA=[]] Tracks traversed source objects.
     * @param {Array} [stackB=[]] Associates values with source counterparts.
     */
    function baseMerge(object, source, callback, stackA, stackB) {
      (isArray(source) ? forEach : forOwn)(source, function(source, key) {
        var found,
            isArr,
            result = source,
            value = object[key];

        if (source && ((isArr = isArray(source)) || isPlainObject(source))) {
          // avoid merging previously merged cyclic sources
          var stackLength = stackA.length;
          while (stackLength--) {
            if ((found = stackA[stackLength] == source)) {
              value = stackB[stackLength];
              break;
            }
          }
          if (!found) {
            var isShallow;
            if (callback) {
              result = callback(value, source);
              if ((isShallow = typeof result != 'undefined')) {
                value = result;
              }
            }
            if (!isShallow) {
              value = isArr
                ? (isArray(value) ? value : [])
                : (isPlainObject(value) ? value : {});
            }
            // add `source` and associated `value` to the stack of traversed objects
            stackA.push(source);
            stackB.push(value);

            // recursively merge objects and arrays (susceptible to call stack limits)
            if (!isShallow) {
              baseMerge(value, source, callback, stackA, stackB);
            }
          }
        }
        else {
          if (callback) {
            result = callback(value, source);
            if (typeof result == 'undefined') {
              result = source;
            }
          }
          if (typeof result != 'undefined') {
            value = result;
          }
        }
        object[key] = value;
      });
    }

    /**
     * The base implementation of `_.random` without argument juggling or support
     * for returning floating-point numbers.
     *
     * @private
     * @param {number} min The minimum possible value.
     * @param {number} max The maximum possible value.
     * @returns {number} Returns a random number.
     */
    function baseRandom(min, max) {
      return min + floor(nativeRandom() * (max - min + 1));
    }

    /**
     * The base implementation of `_.uniq` without support for callback shorthands
     * or `thisArg` binding.
     *
     * @private
     * @param {Array} array The array to process.
     * @param {boolean} [isSorted=false] A flag to indicate that `array` is sorted.
     * @param {Function} [callback] The function called per iteration.
     * @returns {Array} Returns a duplicate-value-free array.
     */
    function baseUniq(array, isSorted, callback) {
      var index = -1,
          indexOf = getIndexOf(),
          length = array ? array.length : 0,
          result = [];

      var isLarge = !isSorted && length >= largeArraySize && indexOf === baseIndexOf,
          seen = (callback || isLarge) ? getArray() : result;

      if (isLarge) {
        var cache = createCache(seen);
        indexOf = cacheIndexOf;
        seen = cache;
      }
      while (++index < length) {
        var value = array[index],
            computed = callback ? callback(value, index, array) : value;

        if (isSorted
              ? !index || seen[seen.length - 1] !== computed
              : indexOf(seen, computed) < 0
            ) {
          if (callback || isLarge) {
            seen.push(computed);
          }
          result.push(value);
        }
      }
      if (isLarge) {
        releaseArray(seen.array);
        releaseObject(seen);
      } else if (callback) {
        releaseArray(seen);
      }
      return result;
    }

    /**
     * Creates a function that aggregates a collection, creating an object composed
     * of keys generated from the results of running each element of the collection
     * through a callback. The given `setter` function sets the keys and values
     * of the composed object.
     *
     * @private
     * @param {Function} setter The setter function.
     * @returns {Function} Returns the new aggregator function.
     */
    function createAggregator(setter) {
      return function(collection, callback, thisArg) {
        var result = {};
        callback = lodash.createCallback(callback, thisArg, 3);

        var index = -1,
            length = collection ? collection.length : 0;

        if (typeof length == 'number') {
          while (++index < length) {
            var value = collection[index];
            setter(result, value, callback(value, index, collection), collection);
          }
        } else {
          forOwn(collection, function(value, key, collection) {
            setter(result, value, callback(value, key, collection), collection);
          });
        }
        return result;
      };
    }

    /**
     * Creates a function that, when called, either curries or invokes `func`
     * with an optional `this` binding and partially applied arguments.
     *
     * @private
     * @param {Function|string} func The function or method name to reference.
     * @param {number} bitmask The bitmask of method flags to compose.
     *  The bitmask may be composed of the following flags:
     *  1 - `_.bind`
     *  2 - `_.bindKey`
     *  4 - `_.curry`
     *  8 - `_.curry` (bound)
     *  16 - `_.partial`
     *  32 - `_.partialRight`
     * @param {Array} [partialArgs] An array of arguments to prepend to those
     *  provided to the new function.
     * @param {Array} [partialRightArgs] An array of arguments to append to those
     *  provided to the new function.
     * @param {*} [thisArg] The `this` binding of `func`.
     * @param {number} [arity] The arity of `func`.
     * @returns {Function} Returns the new function.
     */
    function createWrapper(func, bitmask, partialArgs, partialRightArgs, thisArg, arity) {
      var isBind = bitmask & 1,
          isBindKey = bitmask & 2,
          isCurry = bitmask & 4,
          isCurryBound = bitmask & 8,
          isPartial = bitmask & 16,
          isPartialRight = bitmask & 32;

      if (!isBindKey && !isFunction(func)) {
        throw new TypeError;
      }
      if (isPartial && !partialArgs.length) {
        bitmask &= ~16;
        isPartial = partialArgs = false;
      }
      if (isPartialRight && !partialRightArgs.length) {
        bitmask &= ~32;
        isPartialRight = partialRightArgs = false;
      }
      var bindData = func && func.__bindData__;
      if (bindData && bindData !== true) {
        // clone `bindData`
        bindData = slice(bindData);
        if (bindData[2]) {
          bindData[2] = slice(bindData[2]);
        }
        if (bindData[3]) {
          bindData[3] = slice(bindData[3]);
        }
        // set `thisBinding` is not previously bound
        if (isBind && !(bindData[1] & 1)) {
          bindData[4] = thisArg;
        }
        // set if previously bound but not currently (subsequent curried functions)
        if (!isBind && bindData[1] & 1) {
          bitmask |= 8;
        }
        // set curried arity if not yet set
        if (isCurry && !(bindData[1] & 4)) {
          bindData[5] = arity;
        }
        // append partial left arguments
        if (isPartial) {
          push.apply(bindData[2] || (bindData[2] = []), partialArgs);
        }
        // append partial right arguments
        if (isPartialRight) {
          unshift.apply(bindData[3] || (bindData[3] = []), partialRightArgs);
        }
        // merge flags
        bindData[1] |= bitmask;
        return createWrapper.apply(null, bindData);
      }
      // fast path for `_.bind`
      var creater = (bitmask == 1 || bitmask === 17) ? baseBind : baseCreateWrapper;
      return creater([func, bitmask, partialArgs, partialRightArgs, thisArg, arity]);
    }

    /**
     * Used by `escape` to convert characters to HTML entities.
     *
     * @private
     * @param {string} match The matched character to escape.
     * @returns {string} Returns the escaped character.
     */
    function escapeHtmlChar(match) {
      return htmlEscapes[match];
    }

    /**
     * Gets the appropriate "indexOf" function. If the `_.indexOf` method is
     * customized, this method returns the custom method, otherwise it returns
     * the `baseIndexOf` function.
     *
     * @private
     * @returns {Function} Returns the "indexOf" function.
     */
    function getIndexOf() {
      var result = (result = lodash.indexOf) === indexOf ? baseIndexOf : result;
      return result;
    }

    /**
     * Checks if `value` is a native function.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is a native function, else `false`.
     */
    function isNative(value) {
      return typeof value == 'function' && reNative.test(value);
    }

    /**
     * Sets `this` binding data on a given function.
     *
     * @private
     * @param {Function} func The function to set data on.
     * @param {Array} value The data array to set.
     */
    var setBindData = !defineProperty ? noop : function(func, value) {
      descriptor.value = value;
      defineProperty(func, '__bindData__', descriptor);
    };

    /**
     * A fallback implementation of `isPlainObject` which checks if a given value
     * is an object created by the `Object` constructor, assuming objects created
     * by the `Object` constructor have no inherited enumerable properties and that
     * there are no `Object.prototype` extensions.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.
     */
    function shimIsPlainObject(value) {
      var ctor,
          result;

      // avoid non Object objects, `arguments` objects, and DOM elements
      if (!(value && toString.call(value) == objectClass) ||
          (ctor = value.constructor, isFunction(ctor) && !(ctor instanceof ctor))) {
        return false;
      }
      // In most environments an object's own properties are iterated before
      // its inherited properties. If the last iterated property is an object's
      // own property then there are no inherited enumerable properties.
      forIn(value, function(value, key) {
        result = key;
      });
      return typeof result == 'undefined' || hasOwnProperty.call(value, result);
    }

    /**
     * Used by `unescape` to convert HTML entities to characters.
     *
     * @private
     * @param {string} match The matched character to unescape.
     * @returns {string} Returns the unescaped character.
     */
    function unescapeHtmlChar(match) {
      return htmlUnescapes[match];
    }

    /*--------------------------------------------------------------------------*/

    /**
     * Checks if `value` is an `arguments` object.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is an `arguments` object, else `false`.
     * @example
     *
     * (function() { return _.isArguments(arguments); })(1, 2, 3);
     * // => true
     *
     * _.isArguments([1, 2, 3]);
     * // => false
     */
    function isArguments(value) {
      return value && typeof value == 'object' && typeof value.length == 'number' &&
        toString.call(value) == argsClass || false;
    }

    /**
     * Checks if `value` is an array.
     *
     * @static
     * @memberOf _
     * @type Function
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is an array, else `false`.
     * @example
     *
     * (function() { return _.isArray(arguments); })();
     * // => false
     *
     * _.isArray([1, 2, 3]);
     * // => true
     */
    var isArray = nativeIsArray || function(value) {
      return value && typeof value == 'object' && typeof value.length == 'number' &&
        toString.call(value) == arrayClass || false;
    };

    /**
     * A fallback implementation of `Object.keys` which produces an array of the
     * given object's own enumerable property names.
     *
     * @private
     * @type Function
     * @param {Object} object The object to inspect.
     * @returns {Array} Returns an array of property names.
     */
    var shimKeys = function(object) {
      var index, iterable = object, result = [];
      if (!iterable) return result;
      if (!(objectTypes[typeof object])) return result;
        for (index in iterable) {
          if (hasOwnProperty.call(iterable, index)) {
            result.push(index);
          }
        }
      return result
    };

    /**
     * Creates an array composed of the own enumerable property names of an object.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The object to inspect.
     * @returns {Array} Returns an array of property names.
     * @example
     *
     * _.keys({ 'one': 1, 'two': 2, 'three': 3 });
     * // => ['one', 'two', 'three'] (property order is not guaranteed across environments)
     */
    var keys = !nativeKeys ? shimKeys : function(object) {
      if (!isObject(object)) {
        return [];
      }
      return nativeKeys(object);
    };

    /**
     * Used to convert characters to HTML entities:
     *
     * Though the `>` character is escaped for symmetry, characters like `>` and `/`
     * don't require escaping in HTML and have no special meaning unless they're part
     * of a tag or an unquoted attribute value.
     * http://mathiasbynens.be/notes/ambiguous-ampersands (under "semi-related fun fact")
     */
    var htmlEscapes = {
      '&': '&amp;',
      '<': '&lt;',
      '>': '&gt;',
      '"': '&quot;',
      "'": '&#39;'
    };

    /** Used to convert HTML entities to characters */
    var htmlUnescapes = invert(htmlEscapes);

    /** Used to match HTML entities and HTML characters */
    var reEscapedHtml = RegExp('(' + keys(htmlUnescapes).join('|') + ')', 'g'),
        reUnescapedHtml = RegExp('[' + keys(htmlEscapes).join('') + ']', 'g');

    /*--------------------------------------------------------------------------*/

    /**
     * Assigns own enumerable properties of source object(s) to the destination
     * object. Subsequent sources will overwrite property assignments of previous
     * sources. If a callback is provided it will be executed to produce the
     * assigned values. The callback is bound to `thisArg` and invoked with two
     * arguments; (objectValue, sourceValue).
     *
     * @static
     * @memberOf _
     * @type Function
     * @alias extend
     * @category Objects
     * @param {Object} object The destination object.
     * @param {...Object} [source] The source objects.
     * @param {Function} [callback] The function to customize assigning values.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns the destination object.
     * @example
     *
     * _.assign({ 'name': 'fred' }, { 'employer': 'slate' });
     * // => { 'name': 'fred', 'employer': 'slate' }
     *
     * var defaults = _.partialRight(_.assign, function(a, b) {
     *   return typeof a == 'undefined' ? b : a;
     * });
     *
     * var object = { 'name': 'barney' };
     * defaults(object, { 'name': 'fred', 'employer': 'slate' });
     * // => { 'name': 'barney', 'employer': 'slate' }
     */
    var assign = function(object, source, guard) {
      var index, iterable = object, result = iterable;
      if (!iterable) return result;
      var args = arguments,
          argsIndex = 0,
          argsLength = typeof guard == 'number' ? 2 : args.length;
      if (argsLength > 3 && typeof args[argsLength - 2] == 'function') {
        var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);
      } else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {
        callback = args[--argsLength];
      }
      while (++argsIndex < argsLength) {
        iterable = args[argsIndex];
        if (iterable && objectTypes[typeof iterable]) {
        var ownIndex = -1,
            ownProps = objectTypes[typeof iterable] && keys(iterable),
            length = ownProps ? ownProps.length : 0;

        while (++ownIndex < length) {
          index = ownProps[ownIndex];
          result[index] = callback ? callback(result[index], iterable[index]) : iterable[index];
        }
        }
      }
      return result
    };

    /**
     * Creates a clone of `value`. If `isDeep` is `true` nested objects will also
     * be cloned, otherwise they will be assigned by reference. If a callback
     * is provided it will be executed to produce the cloned values. If the
     * callback returns `undefined` cloning will be handled by the method instead.
     * The callback is bound to `thisArg` and invoked with one argument; (value).
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to clone.
     * @param {boolean} [isDeep=false] Specify a deep clone.
     * @param {Function} [callback] The function to customize cloning values.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the cloned value.
     * @example
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36 },
     *   { 'name': 'fred',   'age': 40 }
     * ];
     *
     * var shallow = _.clone(characters);
     * shallow[0] === characters[0];
     * // => true
     *
     * var deep = _.clone(characters, true);
     * deep[0] === characters[0];
     * // => false
     *
     * _.mixin({
     *   'clone': _.partialRight(_.clone, function(value) {
     *     return _.isElement(value) ? value.cloneNode(false) : undefined;
     *   })
     * });
     *
     * var clone = _.clone(document.body);
     * clone.childNodes.length;
     * // => 0
     */
    function clone(value, isDeep, callback, thisArg) {
      // allows working with "Collections" methods without using their `index`
      // and `collection` arguments for `isDeep` and `callback`
      if (typeof isDeep != 'boolean' && isDeep != null) {
        thisArg = callback;
        callback = isDeep;
        isDeep = false;
      }
      return baseClone(value, isDeep, typeof callback == 'function' && baseCreateCallback(callback, thisArg, 1));
    }

    /**
     * Creates a deep clone of `value`. If a callback is provided it will be
     * executed to produce the cloned values. If the callback returns `undefined`
     * cloning will be handled by the method instead. The callback is bound to
     * `thisArg` and invoked with one argument; (value).
     *
     * Note: This method is loosely based on the structured clone algorithm. Functions
     * and DOM nodes are **not** cloned. The enumerable properties of `arguments` objects and
     * objects created by constructors other than `Object` are cloned to plain `Object` objects.
     * See http://www.w3.org/TR/html5/infrastructure.html#internal-structured-cloning-algorithm.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to deep clone.
     * @param {Function} [callback] The function to customize cloning values.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the deep cloned value.
     * @example
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36 },
     *   { 'name': 'fred',   'age': 40 }
     * ];
     *
     * var deep = _.cloneDeep(characters);
     * deep[0] === characters[0];
     * // => false
     *
     * var view = {
     *   'label': 'docs',
     *   'node': element
     * };
     *
     * var clone = _.cloneDeep(view, function(value) {
     *   return _.isElement(value) ? value.cloneNode(true) : undefined;
     * });
     *
     * clone.node == view.node;
     * // => false
     */
    function cloneDeep(value, callback, thisArg) {
      return baseClone(value, true, typeof callback == 'function' && baseCreateCallback(callback, thisArg, 1));
    }

    /**
     * Creates an object that inherits from the given `prototype` object. If a
     * `properties` object is provided its own enumerable properties are assigned
     * to the created object.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} prototype The object to inherit from.
     * @param {Object} [properties] The properties to assign to the object.
     * @returns {Object} Returns the new object.
     * @example
     *
     * function Shape() {
     *   this.x = 0;
     *   this.y = 0;
     * }
     *
     * function Circle() {
     *   Shape.call(this);
     * }
     *
     * Circle.prototype = _.create(Shape.prototype, { 'constructor': Circle });
     *
     * var circle = new Circle;
     * circle instanceof Circle;
     * // => true
     *
     * circle instanceof Shape;
     * // => true
     */
    function create(prototype, properties) {
      var result = baseCreate(prototype);
      return properties ? assign(result, properties) : result;
    }

    /**
     * Assigns own enumerable properties of source object(s) to the destination
     * object for all destination properties that resolve to `undefined`. Once a
     * property is set, additional defaults of the same property will be ignored.
     *
     * @static
     * @memberOf _
     * @type Function
     * @category Objects
     * @param {Object} object The destination object.
     * @param {...Object} [source] The source objects.
     * @param- {Object} [guard] Allows working with `_.reduce` without using its
     *  `key` and `object` arguments as sources.
     * @returns {Object} Returns the destination object.
     * @example
     *
     * var object = { 'name': 'barney' };
     * _.defaults(object, { 'name': 'fred', 'employer': 'slate' });
     * // => { 'name': 'barney', 'employer': 'slate' }
     */
    var defaults = function(object, source, guard) {
      var index, iterable = object, result = iterable;
      if (!iterable) return result;
      var args = arguments,
          argsIndex = 0,
          argsLength = typeof guard == 'number' ? 2 : args.length;
      while (++argsIndex < argsLength) {
        iterable = args[argsIndex];
        if (iterable && objectTypes[typeof iterable]) {
        var ownIndex = -1,
            ownProps = objectTypes[typeof iterable] && keys(iterable),
            length = ownProps ? ownProps.length : 0;

        while (++ownIndex < length) {
          index = ownProps[ownIndex];
          if (typeof result[index] == 'undefined') result[index] = iterable[index];
        }
        }
      }
      return result
    };

    /**
     * This method is like `_.findIndex` except that it returns the key of the
     * first element that passes the callback check, instead of the element itself.
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The object to search.
     * @param {Function|Object|string} [callback=identity] The function called per
     *  iteration. If a property name or object is provided it will be used to
     *  create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {string|undefined} Returns the key of the found element, else `undefined`.
     * @example
     *
     * var characters = {
     *   'barney': {  'age': 36, 'blocked': false },
     *   'fred': {    'age': 40, 'blocked': true },
     *   'pebbles': { 'age': 1,  'blocked': false }
     * };
     *
     * _.findKey(characters, function(chr) {
     *   return chr.age < 40;
     * });
     * // => 'barney' (property order is not guaranteed across environments)
     *
     * // using "_.where" callback shorthand
     * _.findKey(characters, { 'age': 1 });
     * // => 'pebbles'
     *
     * // using "_.pluck" callback shorthand
     * _.findKey(characters, 'blocked');
     * // => 'fred'
     */
    function findKey(object, callback, thisArg) {
      var result;
      callback = lodash.createCallback(callback, thisArg, 3);
      forOwn(object, function(value, key, object) {
        if (callback(value, key, object)) {
          result = key;
          return false;
        }
      });
      return result;
    }

    /**
     * This method is like `_.findKey` except that it iterates over elements
     * of a `collection` in the opposite order.
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The object to search.
     * @param {Function|Object|string} [callback=identity] The function called per
     *  iteration. If a property name or object is provided it will be used to
     *  create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {string|undefined} Returns the key of the found element, else `undefined`.
     * @example
     *
     * var characters = {
     *   'barney': {  'age': 36, 'blocked': true },
     *   'fred': {    'age': 40, 'blocked': false },
     *   'pebbles': { 'age': 1,  'blocked': true }
     * };
     *
     * _.findLastKey(characters, function(chr) {
     *   return chr.age < 40;
     * });
     * // => returns `pebbles`, assuming `_.findKey` returns `barney`
     *
     * // using "_.where" callback shorthand
     * _.findLastKey(characters, { 'age': 40 });
     * // => 'fred'
     *
     * // using "_.pluck" callback shorthand
     * _.findLastKey(characters, 'blocked');
     * // => 'pebbles'
     */
    function findLastKey(object, callback, thisArg) {
      var result;
      callback = lodash.createCallback(callback, thisArg, 3);
      forOwnRight(object, function(value, key, object) {
        if (callback(value, key, object)) {
          result = key;
          return false;
        }
      });
      return result;
    }

    /**
     * Iterates over own and inherited enumerable properties of an object,
     * executing the callback for each property. The callback is bound to `thisArg`
     * and invoked with three arguments; (value, key, object). Callbacks may exit
     * iteration early by explicitly returning `false`.
     *
     * @static
     * @memberOf _
     * @type Function
     * @category Objects
     * @param {Object} object The object to iterate over.
     * @param {Function} [callback=identity] The function called per iteration.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns `object`.
     * @example
     *
     * function Shape() {
     *   this.x = 0;
     *   this.y = 0;
     * }
     *
     * Shape.prototype.move = function(x, y) {
     *   this.x += x;
     *   this.y += y;
     * };
     *
     * _.forIn(new Shape, function(value, key) {
     *   console.log(key);
     * });
     * // => logs 'x', 'y', and 'move' (property order is not guaranteed across environments)
     */
    var forIn = function(collection, callback, thisArg) {
      var index, iterable = collection, result = iterable;
      if (!iterable) return result;
      if (!objectTypes[typeof iterable]) return result;
      callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);
        for (index in iterable) {
          if (callback(iterable[index], index, collection) === false) return result;
        }
      return result
    };

    /**
     * This method is like `_.forIn` except that it iterates over elements
     * of a `collection` in the opposite order.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The object to iterate over.
     * @param {Function} [callback=identity] The function called per iteration.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns `object`.
     * @example
     *
     * function Shape() {
     *   this.x = 0;
     *   this.y = 0;
     * }
     *
     * Shape.prototype.move = function(x, y) {
     *   this.x += x;
     *   this.y += y;
     * };
     *
     * _.forInRight(new Shape, function(value, key) {
     *   console.log(key);
     * });
     * // => logs 'move', 'y', and 'x' assuming `_.forIn ` logs 'x', 'y', and 'move'
     */
    function forInRight(object, callback, thisArg) {
      var pairs = [];

      forIn(object, function(value, key) {
        pairs.push(key, value);
      });

      var length = pairs.length;
      callback = baseCreateCallback(callback, thisArg, 3);
      while (length--) {
        if (callback(pairs[length--], pairs[length], object) === false) {
          break;
        }
      }
      return object;
    }

    /**
     * Iterates over own enumerable properties of an object, executing the callback
     * for each property. The callback is bound to `thisArg` and invoked with three
     * arguments; (value, key, object). Callbacks may exit iteration early by
     * explicitly returning `false`.
     *
     * @static
     * @memberOf _
     * @type Function
     * @category Objects
     * @param {Object} object The object to iterate over.
     * @param {Function} [callback=identity] The function called per iteration.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns `object`.
     * @example
     *
     * _.forOwn({ '0': 'zero', '1': 'one', 'length': 2 }, function(num, key) {
     *   console.log(key);
     * });
     * // => logs '0', '1', and 'length' (property order is not guaranteed across environments)
     */
    var forOwn = function(collection, callback, thisArg) {
      var index, iterable = collection, result = iterable;
      if (!iterable) return result;
      if (!objectTypes[typeof iterable]) return result;
      callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);
        var ownIndex = -1,
            ownProps = objectTypes[typeof iterable] && keys(iterable),
            length = ownProps ? ownProps.length : 0;

        while (++ownIndex < length) {
          index = ownProps[ownIndex];
          if (callback(iterable[index], index, collection) === false) return result;
        }
      return result
    };

    /**
     * This method is like `_.forOwn` except that it iterates over elements
     * of a `collection` in the opposite order.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The object to iterate over.
     * @param {Function} [callback=identity] The function called per iteration.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns `object`.
     * @example
     *
     * _.forOwnRight({ '0': 'zero', '1': 'one', 'length': 2 }, function(num, key) {
     *   console.log(key);
     * });
     * // => logs 'length', '1', and '0' assuming `_.forOwn` logs '0', '1', and 'length'
     */
    function forOwnRight(object, callback, thisArg) {
      var props = keys(object),
          length = props.length;

      callback = baseCreateCallback(callback, thisArg, 3);
      while (length--) {
        var key = props[length];
        if (callback(object[key], key, object) === false) {
          break;
        }
      }
      return object;
    }

    /**
     * Creates a sorted array of property names of all enumerable properties,
     * own and inherited, of `object` that have function values.
     *
     * @static
     * @memberOf _
     * @alias methods
     * @category Objects
     * @param {Object} object The object to inspect.
     * @returns {Array} Returns an array of property names that have function values.
     * @example
     *
     * _.functions(_);
     * // => ['all', 'any', 'bind', 'bindAll', 'clone', 'compact', 'compose', ...]
     */
    function functions(object) {
      var result = [];
      forIn(object, function(value, key) {
        if (isFunction(value)) {
          result.push(key);
        }
      });
      return result.sort();
    }

    /**
     * Checks if the specified property name exists as a direct property of `object`,
     * instead of an inherited property.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The object to inspect.
     * @param {string} key The name of the property to check.
     * @returns {boolean} Returns `true` if key is a direct property, else `false`.
     * @example
     *
     * _.has({ 'a': 1, 'b': 2, 'c': 3 }, 'b');
     * // => true
     */
    function has(object, key) {
      return object ? hasOwnProperty.call(object, key) : false;
    }

    /**
     * Creates an object composed of the inverted keys and values of the given object.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The object to invert.
     * @returns {Object} Returns the created inverted object.
     * @example
     *
     * _.invert({ 'first': 'fred', 'second': 'barney' });
     * // => { 'fred': 'first', 'barney': 'second' }
     */
    function invert(object) {
      var index = -1,
          props = keys(object),
          length = props.length,
          result = {};

      while (++index < length) {
        var key = props[index];
        result[object[key]] = key;
      }
      return result;
    }

    /**
     * Checks if `value` is a boolean value.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is a boolean value, else `false`.
     * @example
     *
     * _.isBoolean(null);
     * // => false
     */
    function isBoolean(value) {
      return value === true || value === false ||
        value && typeof value == 'object' && toString.call(value) == boolClass || false;
    }

    /**
     * Checks if `value` is a date.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is a date, else `false`.
     * @example
     *
     * _.isDate(new Date);
     * // => true
     */
    function isDate(value) {
      return value && typeof value == 'object' && toString.call(value) == dateClass || false;
    }

    /**
     * Checks if `value` is a DOM element.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is a DOM element, else `false`.
     * @example
     *
     * _.isElement(document.body);
     * // => true
     */
    function isElement(value) {
      return value && value.nodeType === 1 || false;
    }

    /**
     * Checks if `value` is empty. Arrays, strings, or `arguments` objects with a
     * length of `0` and objects with no own enumerable properties are considered
     * "empty".
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Array|Object|string} value The value to inspect.
     * @returns {boolean} Returns `true` if the `value` is empty, else `false`.
     * @example
     *
     * _.isEmpty([1, 2, 3]);
     * // => false
     *
     * _.isEmpty({});
     * // => true
     *
     * _.isEmpty('');
     * // => true
     */
    function isEmpty(value) {
      var result = true;
      if (!value) {
        return result;
      }
      var className = toString.call(value),
          length = value.length;

      if ((className == arrayClass || className == stringClass || className == argsClass ) ||
          (className == objectClass && typeof length == 'number' && isFunction(value.splice))) {
        return !length;
      }
      forOwn(value, function() {
        return (result = false);
      });
      return result;
    }

    /**
     * Performs a deep comparison between two values to determine if they are
     * equivalent to each other. If a callback is provided it will be executed
     * to compare values. If the callback returns `undefined` comparisons will
     * be handled by the method instead. The callback is bound to `thisArg` and
     * invoked with two arguments; (a, b).
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} a The value to compare.
     * @param {*} b The other value to compare.
     * @param {Function} [callback] The function to customize comparing values.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
     * @example
     *
     * var object = { 'name': 'fred' };
     * var copy = { 'name': 'fred' };
     *
     * object == copy;
     * // => false
     *
     * _.isEqual(object, copy);
     * // => true
     *
     * var words = ['hello', 'goodbye'];
     * var otherWords = ['hi', 'goodbye'];
     *
     * _.isEqual(words, otherWords, function(a, b) {
     *   var reGreet = /^(?:hello|hi)$/i,
     *       aGreet = _.isString(a) && reGreet.test(a),
     *       bGreet = _.isString(b) && reGreet.test(b);
     *
     *   return (aGreet || bGreet) ? (aGreet == bGreet) : undefined;
     * });
     * // => true
     */
    function isEqual(a, b, callback, thisArg) {
      return baseIsEqual(a, b, typeof callback == 'function' && baseCreateCallback(callback, thisArg, 2));
    }

    /**
     * Checks if `value` is, or can be coerced to, a finite number.
     *
     * Note: This is not the same as native `isFinite` which will return true for
     * booleans and empty strings. See http://es5.github.io/#x15.1.2.5.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is finite, else `false`.
     * @example
     *
     * _.isFinite(-101);
     * // => true
     *
     * _.isFinite('10');
     * // => true
     *
     * _.isFinite(true);
     * // => false
     *
     * _.isFinite('');
     * // => false
     *
     * _.isFinite(Infinity);
     * // => false
     */
    function isFinite(value) {
      return nativeIsFinite(value) && !nativeIsNaN(parseFloat(value));
    }

    /**
     * Checks if `value` is a function.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is a function, else `false`.
     * @example
     *
     * _.isFunction(_);
     * // => true
     */
    function isFunction(value) {
      return typeof value == 'function';
    }

    /**
     * Checks if `value` is the language type of Object.
     * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is an object, else `false`.
     * @example
     *
     * _.isObject({});
     * // => true
     *
     * _.isObject([1, 2, 3]);
     * // => true
     *
     * _.isObject(1);
     * // => false
     */
    function isObject(value) {
      // check if the value is the ECMAScript language type of Object
      // http://es5.github.io/#x8
      // and avoid a V8 bug
      // http://code.google.com/p/v8/issues/detail?id=2291
      return !!(value && objectTypes[typeof value]);
    }

    /**
     * Checks if `value` is `NaN`.
     *
     * Note: This is not the same as native `isNaN` which will return `true` for
     * `undefined` and other non-numeric values. See http://es5.github.io/#x15.1.2.4.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is `NaN`, else `false`.
     * @example
     *
     * _.isNaN(NaN);
     * // => true
     *
     * _.isNaN(new Number(NaN));
     * // => true
     *
     * isNaN(undefined);
     * // => true
     *
     * _.isNaN(undefined);
     * // => false
     */
    function isNaN(value) {
      // `NaN` as a primitive is the only value that is not equal to itself
      // (perform the [[Class]] check first to avoid errors with some host objects in IE)
      return isNumber(value) && value != +value;
    }

    /**
     * Checks if `value` is `null`.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is `null`, else `false`.
     * @example
     *
     * _.isNull(null);
     * // => true
     *
     * _.isNull(undefined);
     * // => false
     */
    function isNull(value) {
      return value === null;
    }

    /**
     * Checks if `value` is a number.
     *
     * Note: `NaN` is considered a number. See http://es5.github.io/#x8.5.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is a number, else `false`.
     * @example
     *
     * _.isNumber(8.4 * 5);
     * // => true
     */
    function isNumber(value) {
      return typeof value == 'number' ||
        value && typeof value == 'object' && toString.call(value) == numberClass || false;
    }

    /**
     * Checks if `value` is an object created by the `Object` constructor.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.
     * @example
     *
     * function Shape() {
     *   this.x = 0;
     *   this.y = 0;
     * }
     *
     * _.isPlainObject(new Shape);
     * // => false
     *
     * _.isPlainObject([1, 2, 3]);
     * // => false
     *
     * _.isPlainObject({ 'x': 0, 'y': 0 });
     * // => true
     */
    var isPlainObject = !getPrototypeOf ? shimIsPlainObject : function(value) {
      if (!(value && toString.call(value) == objectClass)) {
        return false;
      }
      var valueOf = value.valueOf,
          objProto = isNative(valueOf) && (objProto = getPrototypeOf(valueOf)) && getPrototypeOf(objProto);

      return objProto
        ? (value == objProto || getPrototypeOf(value) == objProto)
        : shimIsPlainObject(value);
    };

    /**
     * Checks if `value` is a regular expression.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is a regular expression, else `false`.
     * @example
     *
     * _.isRegExp(/fred/);
     * // => true
     */
    function isRegExp(value) {
      return value && typeof value == 'object' && toString.call(value) == regexpClass || false;
    }

    /**
     * Checks if `value` is a string.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is a string, else `false`.
     * @example
     *
     * _.isString('fred');
     * // => true
     */
    function isString(value) {
      return typeof value == 'string' ||
        value && typeof value == 'object' && toString.call(value) == stringClass || false;
    }

    /**
     * Checks if `value` is `undefined`.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is `undefined`, else `false`.
     * @example
     *
     * _.isUndefined(void 0);
     * // => true
     */
    function isUndefined(value) {
      return typeof value == 'undefined';
    }

    /**
     * Creates an object with the same keys as `object` and values generated by
     * running each own enumerable property of `object` through the callback.
     * The callback is bound to `thisArg` and invoked with three arguments;
     * (value, key, object).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The object to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns a new object with values of the results of each `callback` execution.
     * @example
     *
     * _.mapValues({ 'a': 1, 'b': 2, 'c': 3} , function(num) { return num * 3; });
     * // => { 'a': 3, 'b': 6, 'c': 9 }
     *
     * var characters = {
     *   'fred': { 'name': 'fred', 'age': 40 },
     *   'pebbles': { 'name': 'pebbles', 'age': 1 }
     * };
     *
     * // using "_.pluck" callback shorthand
     * _.mapValues(characters, 'age');
     * // => { 'fred': 40, 'pebbles': 1 }
     */
    function mapValues(object, callback, thisArg) {
      var result = {};
      callback = lodash.createCallback(callback, thisArg, 3);

      forOwn(object, function(value, key, object) {
        result[key] = callback(value, key, object);
      });
      return result;
    }

    /**
     * Recursively merges own enumerable properties of the source object(s), that
     * don't resolve to `undefined` into the destination object. Subsequent sources
     * will overwrite property assignments of previous sources. If a callback is
     * provided it will be executed to produce the merged values of the destination
     * and source properties. If the callback returns `undefined` merging will
     * be handled by the method instead. The callback is bound to `thisArg` and
     * invoked with two arguments; (objectValue, sourceValue).
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The destination object.
     * @param {...Object} [source] The source objects.
     * @param {Function} [callback] The function to customize merging properties.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns the destination object.
     * @example
     *
     * var names = {
     *   'characters': [
     *     { 'name': 'barney' },
     *     { 'name': 'fred' }
     *   ]
     * };
     *
     * var ages = {
     *   'characters': [
     *     { 'age': 36 },
     *     { 'age': 40 }
     *   ]
     * };
     *
     * _.merge(names, ages);
     * // => { 'characters': [{ 'name': 'barney', 'age': 36 }, { 'name': 'fred', 'age': 40 }] }
     *
     * var food = {
     *   'fruits': ['apple'],
     *   'vegetables': ['beet']
     * };
     *
     * var otherFood = {
     *   'fruits': ['banana'],
     *   'vegetables': ['carrot']
     * };
     *
     * _.merge(food, otherFood, function(a, b) {
     *   return _.isArray(a) ? a.concat(b) : undefined;
     * });
     * // => { 'fruits': ['apple', 'banana'], 'vegetables': ['beet', 'carrot] }
     */
    function merge(object) {
      var args = arguments,
          length = 2;

      if (!isObject(object)) {
        return object;
      }
      // allows working with `_.reduce` and `_.reduceRight` without using
      // their `index` and `collection` arguments
      if (typeof args[2] != 'number') {
        length = args.length;
      }
      if (length > 3 && typeof args[length - 2] == 'function') {
        var callback = baseCreateCallback(args[--length - 1], args[length--], 2);
      } else if (length > 2 && typeof args[length - 1] == 'function') {
        callback = args[--length];
      }
      var sources = slice(arguments, 1, length),
          index = -1,
          stackA = getArray(),
          stackB = getArray();

      while (++index < length) {
        baseMerge(object, sources[index], callback, stackA, stackB);
      }
      releaseArray(stackA);
      releaseArray(stackB);
      return object;
    }

    /**
     * Creates a shallow clone of `object` excluding the specified properties.
     * Property names may be specified as individual arguments or as arrays of
     * property names. If a callback is provided it will be executed for each
     * property of `object` omitting the properties the callback returns truey
     * for. The callback is bound to `thisArg` and invoked with three arguments;
     * (value, key, object).
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The source object.
     * @param {Function|...string|string[]} [callback] The properties to omit or the
     *  function called per iteration.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns an object without the omitted properties.
     * @example
     *
     * _.omit({ 'name': 'fred', 'age': 40 }, 'age');
     * // => { 'name': 'fred' }
     *
     * _.omit({ 'name': 'fred', 'age': 40 }, function(value) {
     *   return typeof value == 'number';
     * });
     * // => { 'name': 'fred' }
     */
    function omit(object, callback, thisArg) {
      var result = {};
      if (typeof callback != 'function') {
        var props = [];
        forIn(object, function(value, key) {
          props.push(key);
        });
        props = baseDifference(props, baseFlatten(arguments, true, false, 1));

        var index = -1,
            length = props.length;

        while (++index < length) {
          var key = props[index];
          result[key] = object[key];
        }
      } else {
        callback = lodash.createCallback(callback, thisArg, 3);
        forIn(object, function(value, key, object) {
          if (!callback(value, key, object)) {
            result[key] = value;
          }
        });
      }
      return result;
    }

    /**
     * Creates a two dimensional array of an object's key-value pairs,
     * i.e. `[[key1, value1], [key2, value2]]`.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The object to inspect.
     * @returns {Array} Returns new array of key-value pairs.
     * @example
     *
     * _.pairs({ 'barney': 36, 'fred': 40 });
     * // => [['barney', 36], ['fred', 40]] (property order is not guaranteed across environments)
     */
    function pairs(object) {
      var index = -1,
          props = keys(object),
          length = props.length,
          result = Array(length);

      while (++index < length) {
        var key = props[index];
        result[index] = [key, object[key]];
      }
      return result;
    }

    /**
     * Creates a shallow clone of `object` composed of the specified properties.
     * Property names may be specified as individual arguments or as arrays of
     * property names. If a callback is provided it will be executed for each
     * property of `object` picking the properties the callback returns truey
     * for. The callback is bound to `thisArg` and invoked with three arguments;
     * (value, key, object).
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The source object.
     * @param {Function|...string|string[]} [callback] The function called per
     *  iteration or property names to pick, specified as individual property
     *  names or arrays of property names.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns an object composed of the picked properties.
     * @example
     *
     * _.pick({ 'name': 'fred', '_userid': 'fred1' }, 'name');
     * // => { 'name': 'fred' }
     *
     * _.pick({ 'name': 'fred', '_userid': 'fred1' }, function(value, key) {
     *   return key.charAt(0) != '_';
     * });
     * // => { 'name': 'fred' }
     */
    function pick(object, callback, thisArg) {
      var result = {};
      if (typeof callback != 'function') {
        var index = -1,
            props = baseFlatten(arguments, true, false, 1),
            length = isObject(object) ? props.length : 0;

        while (++index < length) {
          var key = props[index];
          if (key in object) {
            result[key] = object[key];
          }
        }
      } else {
        callback = lodash.createCallback(callback, thisArg, 3);
        forIn(object, function(value, key, object) {
          if (callback(value, key, object)) {
            result[key] = value;
          }
        });
      }
      return result;
    }

    /**
     * An alternative to `_.reduce` this method transforms `object` to a new
     * `accumulator` object which is the result of running each of its own
     * enumerable properties through a callback, with each callback execution
     * potentially mutating the `accumulator` object. The callback is bound to
     * `thisArg` and invoked with four arguments; (accumulator, value, key, object).
     * Callbacks may exit iteration early by explicitly returning `false`.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Array|Object} object The object to iterate over.
     * @param {Function} [callback=identity] The function called per iteration.
     * @param {*} [accumulator] The custom accumulator value.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the accumulated value.
     * @example
     *
     * var squares = _.transform([1, 2, 3, 4, 5, 6, 7, 8, 9, 10], function(result, num) {
     *   num *= num;
     *   if (num % 2) {
     *     return result.push(num) < 3;
     *   }
     * });
     * // => [1, 9, 25]
     *
     * var mapped = _.transform({ 'a': 1, 'b': 2, 'c': 3 }, function(result, num, key) {
     *   result[key] = num * 3;
     * });
     * // => { 'a': 3, 'b': 6, 'c': 9 }
     */
    function transform(object, callback, accumulator, thisArg) {
      var isArr = isArray(object);
      if (accumulator == null) {
        if (isArr) {
          accumulator = [];
        } else {
          var ctor = object && object.constructor,
              proto = ctor && ctor.prototype;

          accumulator = baseCreate(proto);
        }
      }
      if (callback) {
        callback = lodash.createCallback(callback, thisArg, 4);
        (isArr ? forEach : forOwn)(object, function(value, index, object) {
          return callback(accumulator, value, index, object);
        });
      }
      return accumulator;
    }

    /**
     * Creates an array composed of the own enumerable property values of `object`.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The object to inspect.
     * @returns {Array} Returns an array of property values.
     * @example
     *
     * _.values({ 'one': 1, 'two': 2, 'three': 3 });
     * // => [1, 2, 3] (property order is not guaranteed across environments)
     */
    function values(object) {
      var index = -1,
          props = keys(object),
          length = props.length,
          result = Array(length);

      while (++index < length) {
        result[index] = object[props[index]];
      }
      return result;
    }

    /*--------------------------------------------------------------------------*/

    /**
     * Creates an array of elements from the specified indexes, or keys, of the
     * `collection`. Indexes may be specified as individual arguments or as arrays
     * of indexes.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {...(number|number[]|string|string[])} [index] The indexes of `collection`
     *   to retrieve, specified as individual indexes or arrays of indexes.
     * @returns {Array} Returns a new array of elements corresponding to the
     *  provided indexes.
     * @example
     *
     * _.at(['a', 'b', 'c', 'd', 'e'], [0, 2, 4]);
     * // => ['a', 'c', 'e']
     *
     * _.at(['fred', 'barney', 'pebbles'], 0, 2);
     * // => ['fred', 'pebbles']
     */
    function at(collection) {
      var args = arguments,
          index = -1,
          props = baseFlatten(args, true, false, 1),
          length = (args[2] && args[2][args[1]] === collection) ? 1 : props.length,
          result = Array(length);

      while(++index < length) {
        result[index] = collection[props[index]];
      }
      return result;
    }

    /**
     * Checks if a given value is present in a collection using strict equality
     * for comparisons, i.e. `===`. If `fromIndex` is negative, it is used as the
     * offset from the end of the collection.
     *
     * @static
     * @memberOf _
     * @alias include
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {*} target The value to check for.
     * @param {number} [fromIndex=0] The index to search from.
     * @returns {boolean} Returns `true` if the `target` element is found, else `false`.
     * @example
     *
     * _.contains([1, 2, 3], 1);
     * // => true
     *
     * _.contains([1, 2, 3], 1, 2);
     * // => false
     *
     * _.contains({ 'name': 'fred', 'age': 40 }, 'fred');
     * // => true
     *
     * _.contains('pebbles', 'eb');
     * // => true
     */
    function contains(collection, target, fromIndex) {
      var index = -1,
          indexOf = getIndexOf(),
          length = collection ? collection.length : 0,
          result = false;

      fromIndex = (fromIndex < 0 ? nativeMax(0, length + fromIndex) : fromIndex) || 0;
      if (isArray(collection)) {
        result = indexOf(collection, target, fromIndex) > -1;
      } else if (typeof length == 'number') {
        result = (isString(collection) ? collection.indexOf(target, fromIndex) : indexOf(collection, target, fromIndex)) > -1;
      } else {
        forOwn(collection, function(value) {
          if (++index >= fromIndex) {
            return !(result = value === target);
          }
        });
      }
      return result;
    }

    /**
     * Creates an object composed of keys generated from the results of running
     * each element of `collection` through the callback. The corresponding value
     * of each key is the number of times the key was returned by the callback.
     * The callback is bound to `thisArg` and invoked with three arguments;
     * (value, index|key, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns the composed aggregate object.
     * @example
     *
     * _.countBy([4.3, 6.1, 6.4], function(num) { return Math.floor(num); });
     * // => { '4': 1, '6': 2 }
     *
     * _.countBy([4.3, 6.1, 6.4], function(num) { return this.floor(num); }, Math);
     * // => { '4': 1, '6': 2 }
     *
     * _.countBy(['one', 'two', 'three'], 'length');
     * // => { '3': 2, '5': 1 }
     */
    var countBy = createAggregator(function(result, value, key) {
      (hasOwnProperty.call(result, key) ? result[key]++ : result[key] = 1);
    });

    /**
     * Checks if the given callback returns truey value for **all** elements of
     * a collection. The callback is bound to `thisArg` and invoked with three
     * arguments; (value, index|key, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @alias all
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {boolean} Returns `true` if all elements passed the callback check,
     *  else `false`.
     * @example
     *
     * _.every([true, 1, null, 'yes']);
     * // => false
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36 },
     *   { 'name': 'fred',   'age': 40 }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.every(characters, 'age');
     * // => true
     *
     * // using "_.where" callback shorthand
     * _.every(characters, { 'age': 36 });
     * // => false
     */
    function every(collection, callback, thisArg) {
      var result = true;
      callback = lodash.createCallback(callback, thisArg, 3);

      var index = -1,
          length = collection ? collection.length : 0;

      if (typeof length == 'number') {
        while (++index < length) {
          if (!(result = !!callback(collection[index], index, collection))) {
            break;
          }
        }
      } else {
        forOwn(collection, function(value, index, collection) {
          return (result = !!callback(value, index, collection));
        });
      }
      return result;
    }

    /**
     * Iterates over elements of a collection, returning an array of all elements
     * the callback returns truey for. The callback is bound to `thisArg` and
     * invoked with three arguments; (value, index|key, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @alias select
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns a new array of elements that passed the callback check.
     * @example
     *
     * var evens = _.filter([1, 2, 3, 4, 5, 6], function(num) { return num % 2 == 0; });
     * // => [2, 4, 6]
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36, 'blocked': false },
     *   { 'name': 'fred',   'age': 40, 'blocked': true }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.filter(characters, 'blocked');
     * // => [{ 'name': 'fred', 'age': 40, 'blocked': true }]
     *
     * // using "_.where" callback shorthand
     * _.filter(characters, { 'age': 36 });
     * // => [{ 'name': 'barney', 'age': 36, 'blocked': false }]
     */
    function filter(collection, callback, thisArg) {
      var result = [];
      callback = lodash.createCallback(callback, thisArg, 3);

      var index = -1,
          length = collection ? collection.length : 0;

      if (typeof length == 'number') {
        while (++index < length) {
          var value = collection[index];
          if (callback(value, index, collection)) {
            result.push(value);
          }
        }
      } else {
        forOwn(collection, function(value, index, collection) {
          if (callback(value, index, collection)) {
            result.push(value);
          }
        });
      }
      return result;
    }

    /**
     * Iterates over elements of a collection, returning the first element that
     * the callback returns truey for. The callback is bound to `thisArg` and
     * invoked with three arguments; (value, index|key, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @alias detect, findWhere
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the found element, else `undefined`.
     * @example
     *
     * var characters = [
     *   { 'name': 'barney',  'age': 36, 'blocked': false },
     *   { 'name': 'fred',    'age': 40, 'blocked': true },
     *   { 'name': 'pebbles', 'age': 1,  'blocked': false }
     * ];
     *
     * _.find(characters, function(chr) {
     *   return chr.age < 40;
     * });
     * // => { 'name': 'barney', 'age': 36, 'blocked': false }
     *
     * // using "_.where" callback shorthand
     * _.find(characters, { 'age': 1 });
     * // =>  { 'name': 'pebbles', 'age': 1, 'blocked': false }
     *
     * // using "_.pluck" callback shorthand
     * _.find(characters, 'blocked');
     * // => { 'name': 'fred', 'age': 40, 'blocked': true }
     */
    function find(collection, callback, thisArg) {
      callback = lodash.createCallback(callback, thisArg, 3);

      var index = -1,
          length = collection ? collection.length : 0;

      if (typeof length == 'number') {
        while (++index < length) {
          var value = collection[index];
          if (callback(value, index, collection)) {
            return value;
          }
        }
      } else {
        var result;
        forOwn(collection, function(value, index, collection) {
          if (callback(value, index, collection)) {
            result = value;
            return false;
          }
        });
        return result;
      }
    }

    /**
     * This method is like `_.find` except that it iterates over elements
     * of a `collection` from right to left.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the found element, else `undefined`.
     * @example
     *
     * _.findLast([1, 2, 3, 4], function(num) {
     *   return num % 2 == 1;
     * });
     * // => 3
     */
    function findLast(collection, callback, thisArg) {
      var result;
      callback = lodash.createCallback(callback, thisArg, 3);
      forEachRight(collection, function(value, index, collection) {
        if (callback(value, index, collection)) {
          result = value;
          return false;
        }
      });
      return result;
    }

    /**
     * Iterates over elements of a collection, executing the callback for each
     * element. The callback is bound to `thisArg` and invoked with three arguments;
     * (value, index|key, collection). Callbacks may exit iteration early by
     * explicitly returning `false`.
     *
     * Note: As with other "Collections" methods, objects with a `length` property
     * are iterated like arrays. To avoid this behavior `_.forIn` or `_.forOwn`
     * may be used for object iteration.
     *
     * @static
     * @memberOf _
     * @alias each
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} [callback=identity] The function called per iteration.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array|Object|string} Returns `collection`.
     * @example
     *
     * _([1, 2, 3]).forEach(function(num) { console.log(num); }).join(',');
     * // => logs each number and returns '1,2,3'
     *
     * _.forEach({ 'one': 1, 'two': 2, 'three': 3 }, function(num) { console.log(num); });
     * // => logs each number and returns the object (property order is not guaranteed across environments)
     */
    function forEach(collection, callback, thisArg) {
      var index = -1,
          length = collection ? collection.length : 0;

      callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);
      if (typeof length == 'number') {
        while (++index < length) {
          if (callback(collection[index], index, collection) === false) {
            break;
          }
        }
      } else {
        forOwn(collection, callback);
      }
      return collection;
    }

    /**
     * This method is like `_.forEach` except that it iterates over elements
     * of a `collection` from right to left.
     *
     * @static
     * @memberOf _
     * @alias eachRight
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} [callback=identity] The function called per iteration.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array|Object|string} Returns `collection`.
     * @example
     *
     * _([1, 2, 3]).forEachRight(function(num) { console.log(num); }).join(',');
     * // => logs each number from right to left and returns '3,2,1'
     */
    function forEachRight(collection, callback, thisArg) {
      var length = collection ? collection.length : 0;
      callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);
      if (typeof length == 'number') {
        while (length--) {
          if (callback(collection[length], length, collection) === false) {
            break;
          }
        }
      } else {
        var props = keys(collection);
        length = props.length;
        forOwn(collection, function(value, key, collection) {
          key = props ? props[--length] : --length;
          return callback(collection[key], key, collection);
        });
      }
      return collection;
    }

    /**
     * Creates an object composed of keys generated from the results of running
     * each element of a collection through the callback. The corresponding value
     * of each key is an array of the elements responsible for generating the key.
     * The callback is bound to `thisArg` and invoked with three arguments;
     * (value, index|key, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns the composed aggregate object.
     * @example
     *
     * _.groupBy([4.2, 6.1, 6.4], function(num) { return Math.floor(num); });
     * // => { '4': [4.2], '6': [6.1, 6.4] }
     *
     * _.groupBy([4.2, 6.1, 6.4], function(num) { return this.floor(num); }, Math);
     * // => { '4': [4.2], '6': [6.1, 6.4] }
     *
     * // using "_.pluck" callback shorthand
     * _.groupBy(['one', 'two', 'three'], 'length');
     * // => { '3': ['one', 'two'], '5': ['three'] }
     */
    var groupBy = createAggregator(function(result, value, key) {
      (hasOwnProperty.call(result, key) ? result[key] : result[key] = []).push(value);
    });

    /**
     * Creates an object composed of keys generated from the results of running
     * each element of the collection through the given callback. The corresponding
     * value of each key is the last element responsible for generating the key.
     * The callback is bound to `thisArg` and invoked with three arguments;
     * (value, index|key, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns the composed aggregate object.
     * @example
     *
     * var keys = [
     *   { 'dir': 'left', 'code': 97 },
     *   { 'dir': 'right', 'code': 100 }
     * ];
     *
     * _.indexBy(keys, 'dir');
     * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }
     *
     * _.indexBy(keys, function(key) { return String.fromCharCode(key.code); });
     * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }
     *
     * _.indexBy(characters, function(key) { this.fromCharCode(key.code); }, String);
     * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }
     */
    var indexBy = createAggregator(function(result, value, key) {
      result[key] = value;
    });

    /**
     * Invokes the method named by `methodName` on each element in the `collection`
     * returning an array of the results of each invoked method. Additional arguments
     * will be provided to each invoked method. If `methodName` is a function it
     * will be invoked for, and `this` bound to, each element in the `collection`.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|string} methodName The name of the method to invoke or
     *  the function invoked per iteration.
     * @param {...*} [arg] Arguments to invoke the method with.
     * @returns {Array} Returns a new array of the results of each invoked method.
     * @example
     *
     * _.invoke([[5, 1, 7], [3, 2, 1]], 'sort');
     * // => [[1, 5, 7], [1, 2, 3]]
     *
     * _.invoke([123, 456], String.prototype.split, '');
     * // => [['1', '2', '3'], ['4', '5', '6']]
     */
    function invoke(collection, methodName) {
      var args = slice(arguments, 2),
          index = -1,
          isFunc = typeof methodName == 'function',
          length = collection ? collection.length : 0,
          result = Array(typeof length == 'number' ? length : 0);

      forEach(collection, function(value) {
        result[++index] = (isFunc ? methodName : value[methodName]).apply(value, args);
      });
      return result;
    }

    /**
     * Creates an array of values by running each element in the collection
     * through the callback. The callback is bound to `thisArg` and invoked with
     * three arguments; (value, index|key, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @alias collect
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns a new array of the results of each `callback` execution.
     * @example
     *
     * _.map([1, 2, 3], function(num) { return num * 3; });
     * // => [3, 6, 9]
     *
     * _.map({ 'one': 1, 'two': 2, 'three': 3 }, function(num) { return num * 3; });
     * // => [3, 6, 9] (property order is not guaranteed across environments)
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36 },
     *   { 'name': 'fred',   'age': 40 }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.map(characters, 'name');
     * // => ['barney', 'fred']
     */
    function map(collection, callback, thisArg) {
      var index = -1,
          length = collection ? collection.length : 0;

      callback = lodash.createCallback(callback, thisArg, 3);
      if (typeof length == 'number') {
        var result = Array(length);
        while (++index < length) {
          result[index] = callback(collection[index], index, collection);
        }
      } else {
        result = [];
        forOwn(collection, function(value, key, collection) {
          result[++index] = callback(value, key, collection);
        });
      }
      return result;
    }

    /**
     * Retrieves the maximum value of a collection. If the collection is empty or
     * falsey `-Infinity` is returned. If a callback is provided it will be executed
     * for each value in the collection to generate the criterion by which the value
     * is ranked. The callback is bound to `thisArg` and invoked with three
     * arguments; (value, index, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the maximum value.
     * @example
     *
     * _.max([4, 2, 8, 6]);
     * // => 8
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36 },
     *   { 'name': 'fred',   'age': 40 }
     * ];
     *
     * _.max(characters, function(chr) { return chr.age; });
     * // => { 'name': 'fred', 'age': 40 };
     *
     * // using "_.pluck" callback shorthand
     * _.max(characters, 'age');
     * // => { 'name': 'fred', 'age': 40 };
     */
    function max(collection, callback, thisArg) {
      var computed = -Infinity,
          result = computed;

      // allows working with functions like `_.map` without using
      // their `index` argument as a callback
      if (typeof callback != 'function' && thisArg && thisArg[callback] === collection) {
        callback = null;
      }
      if (callback == null && isArray(collection)) {
        var index = -1,
            length = collection.length;

        while (++index < length) {
          var value = collection[index];
          if (value > result) {
            result = value;
          }
        }
      } else {
        callback = (callback == null && isString(collection))
          ? charAtCallback
          : lodash.createCallback(callback, thisArg, 3);

        forEach(collection, function(value, index, collection) {
          var current = callback(value, index, collection);
          if (current > computed) {
            computed = current;
            result = value;
          }
        });
      }
      return result;
    }

    /**
     * Retrieves the minimum value of a collection. If the collection is empty or
     * falsey `Infinity` is returned. If a callback is provided it will be executed
     * for each value in the collection to generate the criterion by which the value
     * is ranked. The callback is bound to `thisArg` and invoked with three
     * arguments; (value, index, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the minimum value.
     * @example
     *
     * _.min([4, 2, 8, 6]);
     * // => 2
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36 },
     *   { 'name': 'fred',   'age': 40 }
     * ];
     *
     * _.min(characters, function(chr) { return chr.age; });
     * // => { 'name': 'barney', 'age': 36 };
     *
     * // using "_.pluck" callback shorthand
     * _.min(characters, 'age');
     * // => { 'name': 'barney', 'age': 36 };
     */
    function min(collection, callback, thisArg) {
      var computed = Infinity,
          result = computed;

      // allows working with functions like `_.map` without using
      // their `index` argument as a callback
      if (typeof callback != 'function' && thisArg && thisArg[callback] === collection) {
        callback = null;
      }
      if (callback == null && isArray(collection)) {
        var index = -1,
            length = collection.length;

        while (++index < length) {
          var value = collection[index];
          if (value < result) {
            result = value;
          }
        }
      } else {
        callback = (callback == null && isString(collection))
          ? charAtCallback
          : lodash.createCallback(callback, thisArg, 3);

        forEach(collection, function(value, index, collection) {
          var current = callback(value, index, collection);
          if (current < computed) {
            computed = current;
            result = value;
          }
        });
      }
      return result;
    }

    /**
     * Retrieves the value of a specified property from all elements in the collection.
     *
     * @static
     * @memberOf _
     * @type Function
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {string} property The name of the property to pluck.
     * @returns {Array} Returns a new array of property values.
     * @example
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36 },
     *   { 'name': 'fred',   'age': 40 }
     * ];
     *
     * _.pluck(characters, 'name');
     * // => ['barney', 'fred']
     */
    var pluck = map;

    /**
     * Reduces a collection to a value which is the accumulated result of running
     * each element in the collection through the callback, where each successive
     * callback execution consumes the return value of the previous execution. If
     * `accumulator` is not provided the first element of the collection will be
     * used as the initial `accumulator` value. The callback is bound to `thisArg`
     * and invoked with four arguments; (accumulator, value, index|key, collection).
     *
     * @static
     * @memberOf _
     * @alias foldl, inject
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} [callback=identity] The function called per iteration.
     * @param {*} [accumulator] Initial value of the accumulator.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the accumulated value.
     * @example
     *
     * var sum = _.reduce([1, 2, 3], function(sum, num) {
     *   return sum + num;
     * });
     * // => 6
     *
     * var mapped = _.reduce({ 'a': 1, 'b': 2, 'c': 3 }, function(result, num, key) {
     *   result[key] = num * 3;
     *   return result;
     * }, {});
     * // => { 'a': 3, 'b': 6, 'c': 9 }
     */
    function reduce(collection, callback, accumulator, thisArg) {
      if (!collection) return accumulator;
      var noaccum = arguments.length < 3;
      callback = lodash.createCallback(callback, thisArg, 4);

      var index = -1,
          length = collection.length;

      if (typeof length == 'number') {
        if (noaccum) {
          accumulator = collection[++index];
        }
        while (++index < length) {
          accumulator = callback(accumulator, collection[index], index, collection);
        }
      } else {
        forOwn(collection, function(value, index, collection) {
          accumulator = noaccum
            ? (noaccum = false, value)
            : callback(accumulator, value, index, collection)
        });
      }
      return accumulator;
    }

    /**
     * This method is like `_.reduce` except that it iterates over elements
     * of a `collection` from right to left.
     *
     * @static
     * @memberOf _
     * @alias foldr
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} [callback=identity] The function called per iteration.
     * @param {*} [accumulator] Initial value of the accumulator.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the accumulated value.
     * @example
     *
     * var list = [[0, 1], [2, 3], [4, 5]];
     * var flat = _.reduceRight(list, function(a, b) { return a.concat(b); }, []);
     * // => [4, 5, 2, 3, 0, 1]
     */
    function reduceRight(collection, callback, accumulator, thisArg) {
      var noaccum = arguments.length < 3;
      callback = lodash.createCallback(callback, thisArg, 4);
      forEachRight(collection, function(value, index, collection) {
        accumulator = noaccum
          ? (noaccum = false, value)
          : callback(accumulator, value, index, collection);
      });
      return accumulator;
    }

    /**
     * The opposite of `_.filter` this method returns the elements of a
     * collection that the callback does **not** return truey for.
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns a new array of elements that failed the callback check.
     * @example
     *
     * var odds = _.reject([1, 2, 3, 4, 5, 6], function(num) { return num % 2 == 0; });
     * // => [1, 3, 5]
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36, 'blocked': false },
     *   { 'name': 'fred',   'age': 40, 'blocked': true }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.reject(characters, 'blocked');
     * // => [{ 'name': 'barney', 'age': 36, 'blocked': false }]
     *
     * // using "_.where" callback shorthand
     * _.reject(characters, { 'age': 36 });
     * // => [{ 'name': 'fred', 'age': 40, 'blocked': true }]
     */
    function reject(collection, callback, thisArg) {
      callback = lodash.createCallback(callback, thisArg, 3);
      return filter(collection, function(value, index, collection) {
        return !callback(value, index, collection);
      });
    }

    /**
     * Retrieves a random element or `n` random elements from a collection.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to sample.
     * @param {number} [n] The number of elements to sample.
     * @param- {Object} [guard] Allows working with functions like `_.map`
     *  without using their `index` arguments as `n`.
     * @returns {Array} Returns the random sample(s) of `collection`.
     * @example
     *
     * _.sample([1, 2, 3, 4]);
     * // => 2
     *
     * _.sample([1, 2, 3, 4], 2);
     * // => [3, 1]
     */
    function sample(collection, n, guard) {
      if (collection && typeof collection.length != 'number') {
        collection = values(collection);
      }
      if (n == null || guard) {
        return collection ? collection[baseRandom(0, collection.length - 1)] : undefined;
      }
      var result = shuffle(collection);
      result.length = nativeMin(nativeMax(0, n), result.length);
      return result;
    }

    /**
     * Creates an array of shuffled values, using a version of the Fisher-Yates
     * shuffle. See http://en.wikipedia.org/wiki/Fisher-Yates_shuffle.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to shuffle.
     * @returns {Array} Returns a new shuffled collection.
     * @example
     *
     * _.shuffle([1, 2, 3, 4, 5, 6]);
     * // => [4, 1, 6, 3, 5, 2]
     */
    function shuffle(collection) {
      var index = -1,
          length = collection ? collection.length : 0,
          result = Array(typeof length == 'number' ? length : 0);

      forEach(collection, function(value) {
        var rand = baseRandom(0, ++index);
        result[index] = result[rand];
        result[rand] = value;
      });
      return result;
    }

    /**
     * Gets the size of the `collection` by returning `collection.length` for arrays
     * and array-like objects or the number of own enumerable properties for objects.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to inspect.
     * @returns {number} Returns `collection.length` or number of own enumerable properties.
     * @example
     *
     * _.size([1, 2]);
     * // => 2
     *
     * _.size({ 'one': 1, 'two': 2, 'three': 3 });
     * // => 3
     *
     * _.size('pebbles');
     * // => 7
     */
    function size(collection) {
      var length = collection ? collection.length : 0;
      return typeof length == 'number' ? length : keys(collection).length;
    }

    /**
     * Checks if the callback returns a truey value for **any** element of a
     * collection. The function returns as soon as it finds a passing value and
     * does not iterate over the entire collection. The callback is bound to
     * `thisArg` and invoked with three arguments; (value, index|key, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @alias any
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {boolean} Returns `true` if any element passed the callback check,
     *  else `false`.
     * @example
     *
     * _.some([null, 0, 'yes', false], Boolean);
     * // => true
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36, 'blocked': false },
     *   { 'name': 'fred',   'age': 40, 'blocked': true }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.some(characters, 'blocked');
     * // => true
     *
     * // using "_.where" callback shorthand
     * _.some(characters, { 'age': 1 });
     * // => false
     */
    function some(collection, callback, thisArg) {
      var result;
      callback = lodash.createCallback(callback, thisArg, 3);

      var index = -1,
          length = collection ? collection.length : 0;

      if (typeof length == 'number') {
        while (++index < length) {
          if ((result = callback(collection[index], index, collection))) {
            break;
          }
        }
      } else {
        forOwn(collection, function(value, index, collection) {
          return !(result = callback(value, index, collection));
        });
      }
      return !!result;
    }

    /**
     * Creates an array of elements, sorted in ascending order by the results of
     * running each element in a collection through the callback. This method
     * performs a stable sort, that is, it will preserve the original sort order
     * of equal elements. The callback is bound to `thisArg` and invoked with
     * three arguments; (value, index|key, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an array of property names is provided for `callback` the collection
     * will be sorted by each property value.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Array|Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns a new array of sorted elements.
     * @example
     *
     * _.sortBy([1, 2, 3], function(num) { return Math.sin(num); });
     * // => [3, 1, 2]
     *
     * _.sortBy([1, 2, 3], function(num) { return this.sin(num); }, Math);
     * // => [3, 1, 2]
     *
     * var characters = [
     *   { 'name': 'barney',  'age': 36 },
     *   { 'name': 'fred',    'age': 40 },
     *   { 'name': 'barney',  'age': 26 },
     *   { 'name': 'fred',    'age': 30 }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.map(_.sortBy(characters, 'age'), _.values);
     * // => [['barney', 26], ['fred', 30], ['barney', 36], ['fred', 40]]
     *
     * // sorting by multiple properties
     * _.map(_.sortBy(characters, ['name', 'age']), _.values);
     * // = > [['barney', 26], ['barney', 36], ['fred', 30], ['fred', 40]]
     */
    function sortBy(collection, callback, thisArg) {
      var index = -1,
          isArr = isArray(callback),
          length = collection ? collection.length : 0,
          result = Array(typeof length == 'number' ? length : 0);

      if (!isArr) {
        callback = lodash.createCallback(callback, thisArg, 3);
      }
      forEach(collection, function(value, key, collection) {
        var object = result[++index] = getObject();
        if (isArr) {
          object.criteria = map(callback, function(key) { return value[key]; });
        } else {
          (object.criteria = getArray())[0] = callback(value, key, collection);
        }
        object.index = index;
        object.value = value;
      });

      length = result.length;
      result.sort(compareAscending);
      while (length--) {
        var object = result[length];
        result[length] = object.value;
        if (!isArr) {
          releaseArray(object.criteria);
        }
        releaseObject(object);
      }
      return result;
    }

    /**
     * Converts the `collection` to an array.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to convert.
     * @returns {Array} Returns the new converted array.
     * @example
     *
     * (function() { return _.toArray(arguments).slice(1); })(1, 2, 3, 4);
     * // => [2, 3, 4]
     */
    function toArray(collection) {
      if (collection && typeof collection.length == 'number') {
        return slice(collection);
      }
      return values(collection);
    }

    /**
     * Performs a deep comparison of each element in a `collection` to the given
     * `properties` object, returning an array of all elements that have equivalent
     * property values.
     *
     * @static
     * @memberOf _
     * @type Function
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Object} props The object of property values to filter by.
     * @returns {Array} Returns a new array of elements that have the given properties.
     * @example
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36, 'pets': ['hoppy'] },
     *   { 'name': 'fred',   'age': 40, 'pets': ['baby puss', 'dino'] }
     * ];
     *
     * _.where(characters, { 'age': 36 });
     * // => [{ 'name': 'barney', 'age': 36, 'pets': ['hoppy'] }]
     *
     * _.where(characters, { 'pets': ['dino'] });
     * // => [{ 'name': 'fred', 'age': 40, 'pets': ['baby puss', 'dino'] }]
     */
    var where = filter;

    /*--------------------------------------------------------------------------*/

    /**
     * Creates an array with all falsey values removed. The values `false`, `null`,
     * `0`, `""`, `undefined`, and `NaN` are all falsey.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to compact.
     * @returns {Array} Returns a new array of filtered values.
     * @example
     *
     * _.compact([0, 1, false, 2, '', 3]);
     * // => [1, 2, 3]
     */
    function compact(array) {
      var index = -1,
          length = array ? array.length : 0,
          result = [];

      while (++index < length) {
        var value = array[index];
        if (value) {
          result.push(value);
        }
      }
      return result;
    }

    /**
     * Creates an array excluding all values of the provided arrays using strict
     * equality for comparisons, i.e. `===`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to process.
     * @param {...Array} [values] The arrays of values to exclude.
     * @returns {Array} Returns a new array of filtered values.
     * @example
     *
     * _.difference([1, 2, 3, 4, 5], [5, 2, 10]);
     * // => [1, 3, 4]
     */
    function difference(array) {
      return baseDifference(array, baseFlatten(arguments, true, true, 1));
    }

    /**
     * This method is like `_.find` except that it returns the index of the first
     * element that passes the callback check, instead of the element itself.
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to search.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {number} Returns the index of the found element, else `-1`.
     * @example
     *
     * var characters = [
     *   { 'name': 'barney',  'age': 36, 'blocked': false },
     *   { 'name': 'fred',    'age': 40, 'blocked': true },
     *   { 'name': 'pebbles', 'age': 1,  'blocked': false }
     * ];
     *
     * _.findIndex(characters, function(chr) {
     *   return chr.age < 20;
     * });
     * // => 2
     *
     * // using "_.where" callback shorthand
     * _.findIndex(characters, { 'age': 36 });
     * // => 0
     *
     * // using "_.pluck" callback shorthand
     * _.findIndex(characters, 'blocked');
     * // => 1
     */
    function findIndex(array, callback, thisArg) {
      var index = -1,
          length = array ? array.length : 0;

      callback = lodash.createCallback(callback, thisArg, 3);
      while (++index < length) {
        if (callback(array[index], index, array)) {
          return index;
        }
      }
      return -1;
    }

    /**
     * This method is like `_.findIndex` except that it iterates over elements
     * of a `collection` from right to left.
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to search.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {number} Returns the index of the found element, else `-1`.
     * @example
     *
     * var characters = [
     *   { 'name': 'barney',  'age': 36, 'blocked': true },
     *   { 'name': 'fred',    'age': 40, 'blocked': false },
     *   { 'name': 'pebbles', 'age': 1,  'blocked': true }
     * ];
     *
     * _.findLastIndex(characters, function(chr) {
     *   return chr.age > 30;
     * });
     * // => 1
     *
     * // using "_.where" callback shorthand
     * _.findLastIndex(characters, { 'age': 36 });
     * // => 0
     *
     * // using "_.pluck" callback shorthand
     * _.findLastIndex(characters, 'blocked');
     * // => 2
     */
    function findLastIndex(array, callback, thisArg) {
      var length = array ? array.length : 0;
      callback = lodash.createCallback(callback, thisArg, 3);
      while (length--) {
        if (callback(array[length], length, array)) {
          return length;
        }
      }
      return -1;
    }

    /**
     * Gets the first element or first `n` elements of an array. If a callback
     * is provided elements at the beginning of the array are returned as long
     * as the callback returns truey. The callback is bound to `thisArg` and
     * invoked with three arguments; (value, index, array).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @alias head, take
     * @category Arrays
     * @param {Array} array The array to query.
     * @param {Function|Object|number|string} [callback] The function called
     *  per element or the number of elements to return. If a property name or
     *  object is provided it will be used to create a "_.pluck" or "_.where"
     *  style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the first element(s) of `array`.
     * @example
     *
     * _.first([1, 2, 3]);
     * // => 1
     *
     * _.first([1, 2, 3], 2);
     * // => [1, 2]
     *
     * _.first([1, 2, 3], function(num) {
     *   return num < 3;
     * });
     * // => [1, 2]
     *
     * var characters = [
     *   { 'name': 'barney',  'blocked': true,  'employer': 'slate' },
     *   { 'name': 'fred',    'blocked': false, 'employer': 'slate' },
     *   { 'name': 'pebbles', 'blocked': true,  'employer': 'na' }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.first(characters, 'blocked');
     * // => [{ 'name': 'barney', 'blocked': true, 'employer': 'slate' }]
     *
     * // using "_.where" callback shorthand
     * _.pluck(_.first(characters, { 'employer': 'slate' }), 'name');
     * // => ['barney', 'fred']
     */
    function first(array, callback, thisArg) {
      var n = 0,
          length = array ? array.length : 0;

      if (typeof callback != 'number' && callback != null) {
        var index = -1;
        callback = lodash.createCallback(callback, thisArg, 3);
        while (++index < length && callback(array[index], index, array)) {
          n++;
        }
      } else {
        n = callback;
        if (n == null || thisArg) {
          return array ? array[0] : undefined;
        }
      }
      return slice(array, 0, nativeMin(nativeMax(0, n), length));
    }

    /**
     * Flattens a nested array (the nesting can be to any depth). If `isShallow`
     * is truey, the array will only be flattened a single level. If a callback
     * is provided each element of the array is passed through the callback before
     * flattening. The callback is bound to `thisArg` and invoked with three
     * arguments; (value, index, array).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to flatten.
     * @param {boolean} [isShallow=false] A flag to restrict flattening to a single level.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns a new flattened array.
     * @example
     *
     * _.flatten([1, [2], [3, [[4]]]]);
     * // => [1, 2, 3, 4];
     *
     * _.flatten([1, [2], [3, [[4]]]], true);
     * // => [1, 2, 3, [[4]]];
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 30, 'pets': ['hoppy'] },
     *   { 'name': 'fred',   'age': 40, 'pets': ['baby puss', 'dino'] }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.flatten(characters, 'pets');
     * // => ['hoppy', 'baby puss', 'dino']
     */
    function flatten(array, isShallow, callback, thisArg) {
      // juggle arguments
      if (typeof isShallow != 'boolean' && isShallow != null) {
        thisArg = callback;
        callback = (typeof isShallow != 'function' && thisArg && thisArg[isShallow] === array) ? null : isShallow;
        isShallow = false;
      }
      if (callback != null) {
        array = map(array, callback, thisArg);
      }
      return baseFlatten(array, isShallow);
    }

    /**
     * Gets the index at which the first occurrence of `value` is found using
     * strict equality for comparisons, i.e. `===`. If the array is already sorted
     * providing `true` for `fromIndex` will run a faster binary search.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to search.
     * @param {*} value The value to search for.
     * @param {boolean|number} [fromIndex=0] The index to search from or `true`
     *  to perform a binary search on a sorted array.
     * @returns {number} Returns the index of the matched value or `-1`.
     * @example
     *
     * _.indexOf([1, 2, 3, 1, 2, 3], 2);
     * // => 1
     *
     * _.indexOf([1, 2, 3, 1, 2, 3], 2, 3);
     * // => 4
     *
     * _.indexOf([1, 1, 2, 2, 3, 3], 2, true);
     * // => 2
     */
    function indexOf(array, value, fromIndex) {
      if (typeof fromIndex == 'number') {
        var length = array ? array.length : 0;
        fromIndex = (fromIndex < 0 ? nativeMax(0, length + fromIndex) : fromIndex || 0);
      } else if (fromIndex) {
        var index = sortedIndex(array, value);
        return array[index] === value ? index : -1;
      }
      return baseIndexOf(array, value, fromIndex);
    }

    /**
     * Gets all but the last element or last `n` elements of an array. If a
     * callback is provided elements at the end of the array are excluded from
     * the result as long as the callback returns truey. The callback is bound
     * to `thisArg` and invoked with three arguments; (value, index, array).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to query.
     * @param {Function|Object|number|string} [callback=1] The function called
     *  per element or the number of elements to exclude. If a property name or
     *  object is provided it will be used to create a "_.pluck" or "_.where"
     *  style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns a slice of `array`.
     * @example
     *
     * _.initial([1, 2, 3]);
     * // => [1, 2]
     *
     * _.initial([1, 2, 3], 2);
     * // => [1]
     *
     * _.initial([1, 2, 3], function(num) {
     *   return num > 1;
     * });
     * // => [1]
     *
     * var characters = [
     *   { 'name': 'barney',  'blocked': false, 'employer': 'slate' },
     *   { 'name': 'fred',    'blocked': true,  'employer': 'slate' },
     *   { 'name': 'pebbles', 'blocked': true,  'employer': 'na' }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.initial(characters, 'blocked');
     * // => [{ 'name': 'barney',  'blocked': false, 'employer': 'slate' }]
     *
     * // using "_.where" callback shorthand
     * _.pluck(_.initial(characters, { 'employer': 'na' }), 'name');
     * // => ['barney', 'fred']
     */
    function initial(array, callback, thisArg) {
      var n = 0,
          length = array ? array.length : 0;

      if (typeof callback != 'number' && callback != null) {
        var index = length;
        callback = lodash.createCallback(callback, thisArg, 3);
        while (index-- && callback(array[index], index, array)) {
          n++;
        }
      } else {
        n = (callback == null || thisArg) ? 1 : callback || n;
      }
      return slice(array, 0, nativeMin(nativeMax(0, length - n), length));
    }

    /**
     * Creates an array of unique values present in all provided arrays using
     * strict equality for comparisons, i.e. `===`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {...Array} [array] The arrays to inspect.
     * @returns {Array} Returns an array of shared values.
     * @example
     *
     * _.intersection([1, 2, 3], [5, 2, 1, 4], [2, 1]);
     * // => [1, 2]
     */
    function intersection() {
      var args = [],
          argsIndex = -1,
          argsLength = arguments.length,
          caches = getArray(),
          indexOf = getIndexOf(),
          trustIndexOf = indexOf === baseIndexOf,
          seen = getArray();

      while (++argsIndex < argsLength) {
        var value = arguments[argsIndex];
        if (isArray(value) || isArguments(value)) {
          args.push(value);
          caches.push(trustIndexOf && value.length >= largeArraySize &&
            createCache(argsIndex ? args[argsIndex] : seen));
        }
      }
      var array = args[0],
          index = -1,
          length = array ? array.length : 0,
          result = [];

      outer:
      while (++index < length) {
        var cache = caches[0];
        value = array[index];

        if ((cache ? cacheIndexOf(cache, value) : indexOf(seen, value)) < 0) {
          argsIndex = argsLength;
          (cache || seen).push(value);
          while (--argsIndex) {
            cache = caches[argsIndex];
            if ((cache ? cacheIndexOf(cache, value) : indexOf(args[argsIndex], value)) < 0) {
              continue outer;
            }
          }
          result.push(value);
        }
      }
      while (argsLength--) {
        cache = caches[argsLength];
        if (cache) {
          releaseObject(cache);
        }
      }
      releaseArray(caches);
      releaseArray(seen);
      return result;
    }

    /**
     * Gets the last element or last `n` elements of an array. If a callback is
     * provided elements at the end of the array are returned as long as the
     * callback returns truey. The callback is bound to `thisArg` and invoked
     * with three arguments; (value, index, array).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to query.
     * @param {Function|Object|number|string} [callback] The function called
     *  per element or the number of elements to return. If a property name or
     *  object is provided it will be used to create a "_.pluck" or "_.where"
     *  style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the last element(s) of `array`.
     * @example
     *
     * _.last([1, 2, 3]);
     * // => 3
     *
     * _.last([1, 2, 3], 2);
     * // => [2, 3]
     *
     * _.last([1, 2, 3], function(num) {
     *   return num > 1;
     * });
     * // => [2, 3]
     *
     * var characters = [
     *   { 'name': 'barney',  'blocked': false, 'employer': 'slate' },
     *   { 'name': 'fred',    'blocked': true,  'employer': 'slate' },
     *   { 'name': 'pebbles', 'blocked': true,  'employer': 'na' }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.pluck(_.last(characters, 'blocked'), 'name');
     * // => ['fred', 'pebbles']
     *
     * // using "_.where" callback shorthand
     * _.last(characters, { 'employer': 'na' });
     * // => [{ 'name': 'pebbles', 'blocked': true, 'employer': 'na' }]
     */
    function last(array, callback, thisArg) {
      var n = 0,
          length = array ? array.length : 0;

      if (typeof callback != 'number' && callback != null) {
        var index = length;
        callback = lodash.createCallback(callback, thisArg, 3);
        while (index-- && callback(array[index], index, array)) {
          n++;
        }
      } else {
        n = callback;
        if (n == null || thisArg) {
          return array ? array[length - 1] : undefined;
        }
      }
      return slice(array, nativeMax(0, length - n));
    }

    /**
     * Gets the index at which the last occurrence of `value` is found using strict
     * equality for comparisons, i.e. `===`. If `fromIndex` is negative, it is used
     * as the offset from the end of the collection.
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to search.
     * @param {*} value The value to search for.
     * @param {number} [fromIndex=array.length-1] The index to search from.
     * @returns {number} Returns the index of the matched value or `-1`.
     * @example
     *
     * _.lastIndexOf([1, 2, 3, 1, 2, 3], 2);
     * // => 4
     *
     * _.lastIndexOf([1, 2, 3, 1, 2, 3], 2, 3);
     * // => 1
     */
    function lastIndexOf(array, value, fromIndex) {
      var index = array ? array.length : 0;
      if (typeof fromIndex == 'number') {
        index = (fromIndex < 0 ? nativeMax(0, index + fromIndex) : nativeMin(fromIndex, index - 1)) + 1;
      }
      while (index--) {
        if (array[index] === value) {
          return index;
        }
      }
      return -1;
    }

    /**
     * Removes all provided values from the given array using strict equality for
     * comparisons, i.e. `===`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to modify.
     * @param {...*} [value] The values to remove.
     * @returns {Array} Returns `array`.
     * @example
     *
     * var array = [1, 2, 3, 1, 2, 3];
     * _.pull(array, 2, 3);
     * console.log(array);
     * // => [1, 1]
     */
    function pull(array) {
      var args = arguments,
          argsIndex = 0,
          argsLength = args.length,
          length = array ? array.length : 0;

      while (++argsIndex < argsLength) {
        var index = -1,
            value = args[argsIndex];
        while (++index < length) {
          if (array[index] === value) {
            splice.call(array, index--, 1);
            length--;
          }
        }
      }
      return array;
    }

    /**
     * Creates an array of numbers (positive and/or negative) progressing from
     * `start` up to but not including `end`. If `start` is less than `stop` a
     * zero-length range is created unless a negative `step` is specified.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {number} [start=0] The start of the range.
     * @param {number} end The end of the range.
     * @param {number} [step=1] The value to increment or decrement by.
     * @returns {Array} Returns a new range array.
     * @example
     *
     * _.range(4);
     * // => [0, 1, 2, 3]
     *
     * _.range(1, 5);
     * // => [1, 2, 3, 4]
     *
     * _.range(0, 20, 5);
     * // => [0, 5, 10, 15]
     *
     * _.range(0, -4, -1);
     * // => [0, -1, -2, -3]
     *
     * _.range(1, 4, 0);
     * // => [1, 1, 1]
     *
     * _.range(0);
     * // => []
     */
    function range(start, end, step) {
      start = +start || 0;
      step = typeof step == 'number' ? step : (+step || 1);

      if (end == null) {
        end = start;
        start = 0;
      }
      // use `Array(length)` so engines like Chakra and V8 avoid slower modes
      // http://youtu.be/XAqIpGU8ZZk#t=17m25s
      var index = -1,
          length = nativeMax(0, ceil((end - start) / (step || 1))),
          result = Array(length);

      while (++index < length) {
        result[index] = start;
        start += step;
      }
      return result;
    }

    /**
     * Removes all elements from an array that the callback returns truey for
     * and returns an array of removed elements. The callback is bound to `thisArg`
     * and invoked with three arguments; (value, index, array).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to modify.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns a new array of removed elements.
     * @example
     *
     * var array = [1, 2, 3, 4, 5, 6];
     * var evens = _.remove(array, function(num) { return num % 2 == 0; });
     *
     * console.log(array);
     * // => [1, 3, 5]
     *
     * console.log(evens);
     * // => [2, 4, 6]
     */
    function remove(array, callback, thisArg) {
      var index = -1,
          length = array ? array.length : 0,
          result = [];

      callback = lodash.createCallback(callback, thisArg, 3);
      while (++index < length) {
        var value = array[index];
        if (callback(value, index, array)) {
          result.push(value);
          splice.call(array, index--, 1);
          length--;
        }
      }
      return result;
    }

    /**
     * The opposite of `_.initial` this method gets all but the first element or
     * first `n` elements of an array. If a callback function is provided elements
     * at the beginning of the array are excluded from the result as long as the
     * callback returns truey. The callback is bound to `thisArg` and invoked
     * with three arguments; (value, index, array).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @alias drop, tail
     * @category Arrays
     * @param {Array} array The array to query.
     * @param {Function|Object|number|string} [callback=1] The function called
     *  per element or the number of elements to exclude. If a property name or
     *  object is provided it will be used to create a "_.pluck" or "_.where"
     *  style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns a slice of `array`.
     * @example
     *
     * _.rest([1, 2, 3]);
     * // => [2, 3]
     *
     * _.rest([1, 2, 3], 2);
     * // => [3]
     *
     * _.rest([1, 2, 3], function(num) {
     *   return num < 3;
     * });
     * // => [3]
     *
     * var characters = [
     *   { 'name': 'barney',  'blocked': true,  'employer': 'slate' },
     *   { 'name': 'fred',    'blocked': false,  'employer': 'slate' },
     *   { 'name': 'pebbles', 'blocked': true, 'employer': 'na' }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.pluck(_.rest(characters, 'blocked'), 'name');
     * // => ['fred', 'pebbles']
     *
     * // using "_.where" callback shorthand
     * _.rest(characters, { 'employer': 'slate' });
     * // => [{ 'name': 'pebbles', 'blocked': true, 'employer': 'na' }]
     */
    function rest(array, callback, thisArg) {
      if (typeof callback != 'number' && callback != null) {
        var n = 0,
            index = -1,
            length = array ? array.length : 0;

        callback = lodash.createCallback(callback, thisArg, 3);
        while (++index < length && callback(array[index], index, array)) {
          n++;
        }
      } else {
        n = (callback == null || thisArg) ? 1 : nativeMax(0, callback);
      }
      return slice(array, n);
    }

    /**
     * Uses a binary search to determine the smallest index at which a value
     * should be inserted into a given sorted array in order to maintain the sort
     * order of the array. If a callback is provided it will be executed for
     * `value` and each element of `array` to compute their sort ranking. The
     * callback is bound to `thisArg` and invoked with one argument; (value).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to inspect.
     * @param {*} value The value to evaluate.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {number} Returns the index at which `value` should be inserted
     *  into `array`.
     * @example
     *
     * _.sortedIndex([20, 30, 50], 40);
     * // => 2
     *
     * // using "_.pluck" callback shorthand
     * _.sortedIndex([{ 'x': 20 }, { 'x': 30 }, { 'x': 50 }], { 'x': 40 }, 'x');
     * // => 2
     *
     * var dict = {
     *   'wordToNumber': { 'twenty': 20, 'thirty': 30, 'fourty': 40, 'fifty': 50 }
     * };
     *
     * _.sortedIndex(['twenty', 'thirty', 'fifty'], 'fourty', function(word) {
     *   return dict.wordToNumber[word];
     * });
     * // => 2
     *
     * _.sortedIndex(['twenty', 'thirty', 'fifty'], 'fourty', function(word) {
     *   return this.wordToNumber[word];
     * }, dict);
     * // => 2
     */
    function sortedIndex(array, value, callback, thisArg) {
      var low = 0,
          high = array ? array.length : low;

      // explicitly reference `identity` for better inlining in Firefox
      callback = callback ? lodash.createCallback(callback, thisArg, 1) : identity;
      value = callback(value);

      while (low < high) {
        var mid = (low + high) >>> 1;
        (callback(array[mid]) < value)
          ? low = mid + 1
          : high = mid;
      }
      return low;
    }

    /**
     * Creates an array of unique values, in order, of the provided arrays using
     * strict equality for comparisons, i.e. `===`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {...Array} [array] The arrays to inspect.
     * @returns {Array} Returns an array of combined values.
     * @example
     *
     * _.union([1, 2, 3], [5, 2, 1, 4], [2, 1]);
     * // => [1, 2, 3, 5, 4]
     */
    function union() {
      return baseUniq(baseFlatten(arguments, true, true));
    }

    /**
     * Creates a duplicate-value-free version of an array using strict equality
     * for comparisons, i.e. `===`. If the array is sorted, providing
     * `true` for `isSorted` will use a faster algorithm. If a callback is provided
     * each element of `array` is passed through the callback before uniqueness
     * is computed. The callback is bound to `thisArg` and invoked with three
     * arguments; (value, index, array).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @alias unique
     * @category Arrays
     * @param {Array} array The array to process.
     * @param {boolean} [isSorted=false] A flag to indicate that `array` is sorted.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns a duplicate-value-free array.
     * @example
     *
     * _.uniq([1, 2, 1, 3, 1]);
     * // => [1, 2, 3]
     *
     * _.uniq([1, 1, 2, 2, 3], true);
     * // => [1, 2, 3]
     *
     * _.uniq(['A', 'b', 'C', 'a', 'B', 'c'], function(letter) { return letter.toLowerCase(); });
     * // => ['A', 'b', 'C']
     *
     * _.uniq([1, 2.5, 3, 1.5, 2, 3.5], function(num) { return this.floor(num); }, Math);
     * // => [1, 2.5, 3]
     *
     * // using "_.pluck" callback shorthand
     * _.uniq([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');
     * // => [{ 'x': 1 }, { 'x': 2 }]
     */
    function uniq(array, isSorted, callback, thisArg) {
      // juggle arguments
      if (typeof isSorted != 'boolean' && isSorted != null) {
        thisArg = callback;
        callback = (typeof isSorted != 'function' && thisArg && thisArg[isSorted] === array) ? null : isSorted;
        isSorted = false;
      }
      if (callback != null) {
        callback = lodash.createCallback(callback, thisArg, 3);
      }
      return baseUniq(array, isSorted, callback);
    }

    /**
     * Creates an array excluding all provided values using strict equality for
     * comparisons, i.e. `===`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to filter.
     * @param {...*} [value] The values to exclude.
     * @returns {Array} Returns a new array of filtered values.
     * @example
     *
     * _.without([1, 2, 1, 0, 3, 1, 4], 0, 1);
     * // => [2, 3, 4]
     */
    function without(array) {
      return baseDifference(array, slice(arguments, 1));
    }

    /**
     * Creates an array that is the symmetric difference of the provided arrays.
     * See http://en.wikipedia.org/wiki/Symmetric_difference.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {...Array} [array] The arrays to inspect.
     * @returns {Array} Returns an array of values.
     * @example
     *
     * _.xor([1, 2, 3], [5, 2, 1, 4]);
     * // => [3, 5, 4]
     *
     * _.xor([1, 2, 5], [2, 3, 5], [3, 4, 5]);
     * // => [1, 4, 5]
     */
    function xor() {
      var index = -1,
          length = arguments.length;

      while (++index < length) {
        var array = arguments[index];
        if (isArray(array) || isArguments(array)) {
          var result = result
            ? baseUniq(baseDifference(result, array).concat(baseDifference(array, result)))
            : array;
        }
      }
      return result || [];
    }

    /**
     * Creates an array of grouped elements, the first of which contains the first
     * elements of the given arrays, the second of which contains the second
     * elements of the given arrays, and so on.
     *
     * @static
     * @memberOf _
     * @alias unzip
     * @category Arrays
     * @param {...Array} [array] Arrays to process.
     * @returns {Array} Returns a new array of grouped elements.
     * @example
     *
     * _.zip(['fred', 'barney'], [30, 40], [true, false]);
     * // => [['fred', 30, true], ['barney', 40, false]]
     */
    function zip() {
      var array = arguments.length > 1 ? arguments : arguments[0],
          index = -1,
          length = array ? max(pluck(array, 'length')) : 0,
          result = Array(length < 0 ? 0 : length);

      while (++index < length) {
        result[index] = pluck(array, index);
      }
      return result;
    }

    /**
     * Creates an object composed from arrays of `keys` and `values`. Provide
     * either a single two dimensional array, i.e. `[[key1, value1], [key2, value2]]`
     * or two arrays, one of `keys` and one of corresponding `values`.
     *
     * @static
     * @memberOf _
     * @alias object
     * @category Arrays
     * @param {Array} keys The array of keys.
     * @param {Array} [values=[]] The array of values.
     * @returns {Object} Returns an object composed of the given keys and
     *  corresponding values.
     * @example
     *
     * _.zipObject(['fred', 'barney'], [30, 40]);
     * // => { 'fred': 30, 'barney': 40 }
     */
    function zipObject(keys, values) {
      var index = -1,
          length = keys ? keys.length : 0,
          result = {};

      if (!values && length && !isArray(keys[0])) {
        values = [];
      }
      while (++index < length) {
        var key = keys[index];
        if (values) {
          result[key] = values[index];
        } else if (key) {
          result[key[0]] = key[1];
        }
      }
      return result;
    }

    /*--------------------------------------------------------------------------*/

    /**
     * Creates a function that executes `func`, with  the `this` binding and
     * arguments of the created function, only after being called `n` times.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {number} n The number of times the function must be called before
     *  `func` is executed.
     * @param {Function} func The function to restrict.
     * @returns {Function} Returns the new restricted function.
     * @example
     *
     * var saves = ['profile', 'settings'];
     *
     * var done = _.after(saves.length, function() {
     *   console.log('Done saving!');
     * });
     *
     * _.forEach(saves, function(type) {
     *   asyncSave({ 'type': type, 'complete': done });
     * });
     * // => logs 'Done saving!', after all saves have completed
     */
    function after(n, func) {
      if (!isFunction(func)) {
        throw new TypeError;
      }
      return function() {
        if (--n < 1) {
          return func.apply(this, arguments);
        }
      };
    }

    /**
     * Creates a function that, when called, invokes `func` with the `this`
     * binding of `thisArg` and prepends any additional `bind` arguments to those
     * provided to the bound function.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Function} func The function to bind.
     * @param {*} [thisArg] The `this` binding of `func`.
     * @param {...*} [arg] Arguments to be partially applied.
     * @returns {Function} Returns the new bound function.
     * @example
     *
     * var func = function(greeting) {
     *   return greeting + ' ' + this.name;
     * };
     *
     * func = _.bind(func, { 'name': 'fred' }, 'hi');
     * func();
     * // => 'hi fred'
     */
    function bind(func, thisArg) {
      return arguments.length > 2
        ? createWrapper(func, 17, slice(arguments, 2), null, thisArg)
        : createWrapper(func, 1, null, null, thisArg);
    }

    /**
     * Binds methods of an object to the object itself, overwriting the existing
     * method. Method names may be specified as individual arguments or as arrays
     * of method names. If no method names are provided all the function properties
     * of `object` will be bound.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Object} object The object to bind and assign the bound methods to.
     * @param {...string} [methodName] The object method names to
     *  bind, specified as individual method names or arrays of method names.
     * @returns {Object} Returns `object`.
     * @example
     *
     * var view = {
     *   'label': 'docs',
     *   'onClick': function() { console.log('clicked ' + this.label); }
     * };
     *
     * _.bindAll(view);
     * jQuery('#docs').on('click', view.onClick);
     * // => logs 'clicked docs', when the button is clicked
     */
    function bindAll(object) {
      var funcs = arguments.length > 1 ? baseFlatten(arguments, true, false, 1) : functions(object),
          index = -1,
          length = funcs.length;

      while (++index < length) {
        var key = funcs[index];
        object[key] = createWrapper(object[key], 1, null, null, object);
      }
      return object;
    }

    /**
     * Creates a function that, when called, invokes the method at `object[key]`
     * and prepends any additional `bindKey` arguments to those provided to the bound
     * function. This method differs from `_.bind` by allowing bound functions to
     * reference methods that will be redefined or don't yet exist.
     * See http://michaux.ca/articles/lazy-function-definition-pattern.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Object} object The object the method belongs to.
     * @param {string} key The key of the method.
     * @param {...*} [arg] Arguments to be partially applied.
     * @returns {Function} Returns the new bound function.
     * @example
     *
     * var object = {
     *   'name': 'fred',
     *   'greet': function(greeting) {
     *     return greeting + ' ' + this.name;
     *   }
     * };
     *
     * var func = _.bindKey(object, 'greet', 'hi');
     * func();
     * // => 'hi fred'
     *
     * object.greet = function(greeting) {
     *   return greeting + 'ya ' + this.name + '!';
     * };
     *
     * func();
     * // => 'hiya fred!'
     */
    function bindKey(object, key) {
      return arguments.length > 2
        ? createWrapper(key, 19, slice(arguments, 2), null, object)
        : createWrapper(key, 3, null, null, object);
    }

    /**
     * Creates a function that is the composition of the provided functions,
     * where each function consumes the return value of the function that follows.
     * For example, composing the functions `f()`, `g()`, and `h()` produces `f(g(h()))`.
     * Each function is executed with the `this` binding of the composed function.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {...Function} [func] Functions to compose.
     * @returns {Function} Returns the new composed function.
     * @example
     *
     * var realNameMap = {
     *   'pebbles': 'penelope'
     * };
     *
     * var format = function(name) {
     *   name = realNameMap[name.toLowerCase()] || name;
     *   return name.charAt(0).toUpperCase() + name.slice(1).toLowerCase();
     * };
     *
     * var greet = function(formatted) {
     *   return 'Hiya ' + formatted + '!';
     * };
     *
     * var welcome = _.compose(greet, format);
     * welcome('pebbles');
     * // => 'Hiya Penelope!'
     */
    function compose() {
      var funcs = arguments,
          length = funcs.length;

      while (length--) {
        if (!isFunction(funcs[length])) {
          throw new TypeError;
        }
      }
      return function() {
        var args = arguments,
            length = funcs.length;

        while (length--) {
          args = [funcs[length].apply(this, args)];
        }
        return args[0];
      };
    }

    /**
     * Creates a function which accepts one or more arguments of `func` that when
     * invoked either executes `func` returning its result, if all `func` arguments
     * have been provided, or returns a function that accepts one or more of the
     * remaining `func` arguments, and so on. The arity of `func` can be specified
     * if `func.length` is not sufficient.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Function} func The function to curry.
     * @param {number} [arity=func.length] The arity of `func`.
     * @returns {Function} Returns the new curried function.
     * @example
     *
     * var curried = _.curry(function(a, b, c) {
     *   console.log(a + b + c);
     * });
     *
     * curried(1)(2)(3);
     * // => 6
     *
     * curried(1, 2)(3);
     * // => 6
     *
     * curried(1, 2, 3);
     * // => 6
     */
    function curry(func, arity) {
      arity = typeof arity == 'number' ? arity : (+arity || func.length);
      return createWrapper(func, 4, null, null, null, arity);
    }

    /**
     * Creates a function that will delay the execution of `func` until after
     * `wait` milliseconds have elapsed since the last time it was invoked.
     * Provide an options object to indicate that `func` should be invoked on
     * the leading and/or trailing edge of the `wait` timeout. Subsequent calls
     * to the debounced function will return the result of the last `func` call.
     *
     * Note: If `leading` and `trailing` options are `true` `func` will be called
     * on the trailing edge of the timeout only if the the debounced function is
     * invoked more than once during the `wait` timeout.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Function} func The function to debounce.
     * @param {number} wait The number of milliseconds to delay.
     * @param {Object} [options] The options object.
     * @param {boolean} [options.leading=false] Specify execution on the leading edge of the timeout.
     * @param {number} [options.maxWait] The maximum time `func` is allowed to be delayed before it's called.
     * @param {boolean} [options.trailing=true] Specify execution on the trailing edge of the timeout.
     * @returns {Function} Returns the new debounced function.
     * @example
     *
     * // avoid costly calculations while the window size is in flux
     * var lazyLayout = _.debounce(calculateLayout, 150);
     * jQuery(window).on('resize', lazyLayout);
     *
     * // execute `sendMail` when the click event is fired, debouncing subsequent calls
     * jQuery('#postbox').on('click', _.debounce(sendMail, 300, {
     *   'leading': true,
     *   'trailing': false
     * });
     *
     * // ensure `batchLog` is executed once after 1 second of debounced calls
     * var source = new EventSource('/stream');
     * source.addEventListener('message', _.debounce(batchLog, 250, {
     *   'maxWait': 1000
     * }, false);
     */
    function debounce(func, wait, options) {
      var args,
          maxTimeoutId,
          result,
          stamp,
          thisArg,
          timeoutId,
          trailingCall,
          lastCalled = 0,
          maxWait = false,
          trailing = true;

      if (!isFunction(func)) {
        throw new TypeError;
      }
      wait = nativeMax(0, wait) || 0;
      if (options === true) {
        var leading = true;
        trailing = false;
      } else if (isObject(options)) {
        leading = options.leading;
        maxWait = 'maxWait' in options && (nativeMax(wait, options.maxWait) || 0);
        trailing = 'trailing' in options ? options.trailing : trailing;
      }
      var delayed = function() {
        var remaining = wait - (now() - stamp);
        if (remaining <= 0) {
          if (maxTimeoutId) {
            clearTimeout(maxTimeoutId);
          }
          var isCalled = trailingCall;
          maxTimeoutId = timeoutId = trailingCall = undefined;
          if (isCalled) {
            lastCalled = now();
            result = func.apply(thisArg, args);
            if (!timeoutId && !maxTimeoutId) {
              args = thisArg = null;
            }
          }
        } else {
          timeoutId = setTimeout(delayed, remaining);
        }
      };

      var maxDelayed = function() {
        if (timeoutId) {
          clearTimeout(timeoutId);
        }
        maxTimeoutId = timeoutId = trailingCall = undefined;
        if (trailing || (maxWait !== wait)) {
          lastCalled = now();
          result = func.apply(thisArg, args);
          if (!timeoutId && !maxTimeoutId) {
            args = thisArg = null;
          }
        }
      };

      return function() {
        args = arguments;
        stamp = now();
        thisArg = this;
        trailingCall = trailing && (timeoutId || !leading);

        if (maxWait === false) {
          var leadingCall = leading && !timeoutId;
        } else {
          if (!maxTimeoutId && !leading) {
            lastCalled = stamp;
          }
          var remaining = maxWait - (stamp - lastCalled),
              isCalled = remaining <= 0;

          if (isCalled) {
            if (maxTimeoutId) {
              maxTimeoutId = clearTimeout(maxTimeoutId);
            }
            lastCalled = stamp;
            result = func.apply(thisArg, args);
          }
          else if (!maxTimeoutId) {
            maxTimeoutId = setTimeout(maxDelayed, remaining);
          }
        }
        if (isCalled && timeoutId) {
          timeoutId = clearTimeout(timeoutId);
        }
        else if (!timeoutId && wait !== maxWait) {
          timeoutId = setTimeout(delayed, wait);
        }
        if (leadingCall) {
          isCalled = true;
          result = func.apply(thisArg, args);
        }
        if (isCalled && !timeoutId && !maxTimeoutId) {
          args = thisArg = null;
        }
        return result;
      };
    }

    /**
     * Defers executing the `func` function until the current call stack has cleared.
     * Additional arguments will be provided to `func` when it is invoked.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Function} func The function to defer.
     * @param {...*} [arg] Arguments to invoke the function with.
     * @returns {number} Returns the timer id.
     * @example
     *
     * _.defer(function(text) { console.log(text); }, 'deferred');
     * // logs 'deferred' after one or more milliseconds
     */
    function defer(func) {
      if (!isFunction(func)) {
        throw new TypeError;
      }
      var args = slice(arguments, 1);
      return setTimeout(function() { func.apply(undefined, args); }, 1);
    }

    /**
     * Executes the `func` function after `wait` milliseconds. Additional arguments
     * will be provided to `func` when it is invoked.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Function} func The function to delay.
     * @param {number} wait The number of milliseconds to delay execution.
     * @param {...*} [arg] Arguments to invoke the function with.
     * @returns {number} Returns the timer id.
     * @example
     *
     * _.delay(function(text) { console.log(text); }, 1000, 'later');
     * // => logs 'later' after one second
     */
    function delay(func, wait) {
      if (!isFunction(func)) {
        throw new TypeError;
      }
      var args = slice(arguments, 2);
      return setTimeout(function() { func.apply(undefined, args); }, wait);
    }

    /**
     * Creates a function that memoizes the result of `func`. If `resolver` is
     * provided it will be used to determine the cache key for storing the result
     * based on the arguments provided to the memoized function. By default, the
     * first argument provided to the memoized function is used as the cache key.
     * The `func` is executed with the `this` binding of the memoized function.
     * The result cache is exposed as the `cache` property on the memoized function.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Function} func The function to have its output memoized.
     * @param {Function} [resolver] A function used to resolve the cache key.
     * @returns {Function} Returns the new memoizing function.
     * @example
     *
     * var fibonacci = _.memoize(function(n) {
     *   return n < 2 ? n : fibonacci(n - 1) + fibonacci(n - 2);
     * });
     *
     * fibonacci(9)
     * // => 34
     *
     * var data = {
     *   'fred': { 'name': 'fred', 'age': 40 },
     *   'pebbles': { 'name': 'pebbles', 'age': 1 }
     * };
     *
     * // modifying the result cache
     * var get = _.memoize(function(name) { return data[name]; }, _.identity);
     * get('pebbles');
     * // => { 'name': 'pebbles', 'age': 1 }
     *
     * get.cache.pebbles.name = 'penelope';
     * get('pebbles');
     * // => { 'name': 'penelope', 'age': 1 }
     */
    function memoize(func, resolver) {
      if (!isFunction(func)) {
        throw new TypeError;
      }
      var memoized = function() {
        var cache = memoized.cache,
            key = resolver ? resolver.apply(this, arguments) : keyPrefix + arguments[0];

        return hasOwnProperty.call(cache, key)
          ? cache[key]
          : (cache[key] = func.apply(this, arguments));
      }
      memoized.cache = {};
      return memoized;
    }

    /**
     * Creates a function that is restricted to execute `func` once. Repeat calls to
     * the function will return the value of the first call. The `func` is executed
     * with the `this` binding of the created function.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Function} func The function to restrict.
     * @returns {Function} Returns the new restricted function.
     * @example
     *
     * var initialize = _.once(createApplication);
     * initialize();
     * initialize();
     * // `initialize` executes `createApplication` once
     */
    function once(func) {
      var ran,
          result;

      if (!isFunction(func)) {
        throw new TypeError;
      }
      return function() {
        if (ran) {
          return result;
        }
        ran = true;
        result = func.apply(this, arguments);

        // clear the `func` variable so the function may be garbage collected
        func = null;
        return result;
      };
    }

    /**
     * Creates a function that, when called, invokes `func` with any additional
     * `partial` arguments prepended to those provided to the new function. This
     * method is similar to `_.bind` except it does **not** alter the `this` binding.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Function} func The function to partially apply arguments to.
     * @param {...*} [arg] Arguments to be partially applied.
     * @returns {Function} Returns the new partially applied function.
     * @example
     *
     * var greet = function(greeting, name) { return greeting + ' ' + name; };
     * var hi = _.partial(greet, 'hi');
     * hi('fred');
     * // => 'hi fred'
     */
    function partial(func) {
      return createWrapper(func, 16, slice(arguments, 1));
    }

    /**
     * This method is like `_.partial` except that `partial` arguments are
     * appended to those provided to the new function.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Function} func The function to partially apply arguments to.
     * @param {...*} [arg] Arguments to be partially applied.
     * @returns {Function} Returns the new partially applied function.
     * @example
     *
     * var defaultsDeep = _.partialRight(_.merge, _.defaults);
     *
     * var options = {
     *   'variable': 'data',
     *   'imports': { 'jq': $ }
     * };
     *
     * defaultsDeep(options, _.templateSettings);
     *
     * options.variable
     * // => 'data'
     *
     * options.imports
     * // => { '_': _, 'jq': $ }
     */
    function partialRight(func) {
      return createWrapper(func, 32, null, slice(arguments, 1));
    }

    /**
     * Creates a function that, when executed, will only call the `func` function
     * at most once per every `wait` milliseconds. Provide an options object to
     * indicate that `func` should be invoked on the leading and/or trailing edge
     * of the `wait` timeout. Subsequent calls to the throttled function will
     * return the result of the last `func` call.
     *
     * Note: If `leading` and `trailing` options are `true` `func` will be called
     * on the trailing edge of the timeout only if the the throttled function is
     * invoked more than once during the `wait` timeout.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Function} func The function to throttle.
     * @param {number} wait The number of milliseconds to throttle executions to.
     * @param {Object} [options] The options object.
     * @param {boolean} [options.leading=true] Specify execution on the leading edge of the timeout.
     * @param {boolean} [options.trailing=true] Specify execution on the trailing edge of the timeout.
     * @returns {Function} Returns the new throttled function.
     * @example
     *
     * // avoid excessively updating the position while scrolling
     * var throttled = _.throttle(updatePosition, 100);
     * jQuery(window).on('scroll', throttled);
     *
     * // execute `renewToken` when the click event is fired, but not more than once every 5 minutes
     * jQuery('.interactive').on('click', _.throttle(renewToken, 300000, {
     *   'trailing': false
     * }));
     */
    function throttle(func, wait, options) {
      var leading = true,
          trailing = true;

      if (!isFunction(func)) {
        throw new TypeError;
      }
      if (options === false) {
        leading = false;
      } else if (isObject(options)) {
        leading = 'leading' in options ? options.leading : leading;
        trailing = 'trailing' in options ? options.trailing : trailing;
      }
      debounceOptions.leading = leading;
      debounceOptions.maxWait = wait;
      debounceOptions.trailing = trailing;

      return debounce(func, wait, debounceOptions);
    }

    /**
     * Creates a function that provides `value` to the wrapper function as its
     * first argument. Additional arguments provided to the function are appended
     * to those provided to the wrapper function. The wrapper is executed with
     * the `this` binding of the created function.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {*} value The value to wrap.
     * @param {Function} wrapper The wrapper function.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var p = _.wrap(_.escape, function(func, text) {
     *   return '<p>' + func(text) + '</p>';
     * });
     *
     * p('Fred, Wilma, & Pebbles');
     * // => '<p>Fred, Wilma, &amp; Pebbles</p>'
     */
    function wrap(value, wrapper) {
      return createWrapper(wrapper, 16, [value]);
    }

    /*--------------------------------------------------------------------------*/

    /**
     * Creates a function that returns `value`.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {*} value The value to return from the new function.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var object = { 'name': 'fred' };
     * var getter = _.constant(object);
     * getter() === object;
     * // => true
     */
    function constant(value) {
      return function() {
        return value;
      };
    }

    /**
     * Produces a callback bound to an optional `thisArg`. If `func` is a property
     * name the created callback will return the property value for a given element.
     * If `func` is an object the created callback will return `true` for elements
     * that contain the equivalent object properties, otherwise it will return `false`.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {*} [func=identity] The value to convert to a callback.
     * @param {*} [thisArg] The `this` binding of the created callback.
     * @param {number} [argCount] The number of arguments the callback accepts.
     * @returns {Function} Returns a callback function.
     * @example
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36 },
     *   { 'name': 'fred',   'age': 40 }
     * ];
     *
     * // wrap to create custom callback shorthands
     * _.createCallback = _.wrap(_.createCallback, function(func, callback, thisArg) {
     *   var match = /^(.+?)__([gl]t)(.+)$/.exec(callback);
     *   return !match ? func(callback, thisArg) : function(object) {
     *     return match[2] == 'gt' ? object[match[1]] > match[3] : object[match[1]] < match[3];
     *   };
     * });
     *
     * _.filter(characters, 'age__gt38');
     * // => [{ 'name': 'fred', 'age': 40 }]
     */
    function createCallback(func, thisArg, argCount) {
      var type = typeof func;
      if (func == null || type == 'function') {
        return baseCreateCallback(func, thisArg, argCount);
      }
      // handle "_.pluck" style callback shorthands
      if (type != 'object') {
        return property(func);
      }
      var props = keys(func),
          key = props[0],
          a = func[key];

      // handle "_.where" style callback shorthands
      if (props.length == 1 && a === a && !isObject(a)) {
        // fast path the common case of providing an object with a single
        // property containing a primitive value
        return function(object) {
          var b = object[key];
          return a === b && (a !== 0 || (1 / a == 1 / b));
        };
      }
      return function(object) {
        var length = props.length,
            result = false;

        while (length--) {
          if (!(result = baseIsEqual(object[props[length]], func[props[length]], null, true))) {
            break;
          }
        }
        return result;
      };
    }

    /**
     * Converts the characters `&`, `<`, `>`, `"`, and `'` in `string` to their
     * corresponding HTML entities.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {string} string The string to escape.
     * @returns {string} Returns the escaped string.
     * @example
     *
     * _.escape('Fred, Wilma, & Pebbles');
     * // => 'Fred, Wilma, &amp; Pebbles'
     */
    function escape(string) {
      return string == null ? '' : String(string).replace(reUnescapedHtml, escapeHtmlChar);
    }

    /**
     * This method returns the first argument provided to it.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {*} value Any value.
     * @returns {*} Returns `value`.
     * @example
     *
     * var object = { 'name': 'fred' };
     * _.identity(object) === object;
     * // => true
     */
    function identity(value) {
      return value;
    }

    /**
     * Adds function properties of a source object to the destination object.
     * If `object` is a function methods will be added to its prototype as well.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {Function|Object} [object=lodash] object The destination object.
     * @param {Object} source The object of functions to add.
     * @param {Object} [options] The options object.
     * @param {boolean} [options.chain=true] Specify whether the functions added are chainable.
     * @example
     *
     * function capitalize(string) {
     *   return string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();
     * }
     *
     * _.mixin({ 'capitalize': capitalize });
     * _.capitalize('fred');
     * // => 'Fred'
     *
     * _('fred').capitalize().value();
     * // => 'Fred'
     *
     * _.mixin({ 'capitalize': capitalize }, { 'chain': false });
     * _('fred').capitalize();
     * // => 'Fred'
     */
    function mixin(object, source, options) {
      var chain = true,
          methodNames = source && functions(source);

      if (!source || (!options && !methodNames.length)) {
        if (options == null) {
          options = source;
        }
        ctor = lodashWrapper;
        source = object;
        object = lodash;
        methodNames = functions(source);
      }
      if (options === false) {
        chain = false;
      } else if (isObject(options) && 'chain' in options) {
        chain = options.chain;
      }
      var ctor = object,
          isFunc = isFunction(ctor);

      forEach(methodNames, function(methodName) {
        var func = object[methodName] = source[methodName];
        if (isFunc) {
          ctor.prototype[methodName] = function() {
            var chainAll = this.__chain__,
                value = this.__wrapped__,
                args = [value];

            push.apply(args, arguments);
            var result = func.apply(object, args);
            if (chain || chainAll) {
              if (value === result && isObject(result)) {
                return this;
              }
              result = new ctor(result);
              result.__chain__ = chainAll;
            }
            return result;
          };
        }
      });
    }

    /**
     * Reverts the '_' variable to its previous value and returns a reference to
     * the `lodash` function.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @returns {Function} Returns the `lodash` function.
     * @example
     *
     * var lodash = _.noConflict();
     */
    function noConflict() {
      context._ = oldDash;
      return this;
    }

    /**
     * A no-operation function.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @example
     *
     * var object = { 'name': 'fred' };
     * _.noop(object) === undefined;
     * // => true
     */
    function noop() {
      // no operation performed
    }

    /**
     * Gets the number of milliseconds that have elapsed since the Unix epoch
     * (1 January 1970 00:00:00 UTC).
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @example
     *
     * var stamp = _.now();
     * _.defer(function() { console.log(_.now() - stamp); });
     * // => logs the number of milliseconds it took for the deferred function to be called
     */
    var now = isNative(now = Date.now) && now || function() {
      return new Date().getTime();
    };

    /**
     * Converts the given value into an integer of the specified radix.
     * If `radix` is `undefined` or `0` a `radix` of `10` is used unless the
     * `value` is a hexadecimal, in which case a `radix` of `16` is used.
     *
     * Note: This method avoids differences in native ES3 and ES5 `parseInt`
     * implementations. See http://es5.github.io/#E.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {string} value The value to parse.
     * @param {number} [radix] The radix used to interpret the value to parse.
     * @returns {number} Returns the new integer value.
     * @example
     *
     * _.parseInt('08');
     * // => 8
     */
    var parseInt = nativeParseInt(whitespace + '08') == 8 ? nativeParseInt : function(value, radix) {
      // Firefox < 21 and Opera < 15 follow the ES3 specified implementation of `parseInt`
      return nativeParseInt(isString(value) ? value.replace(reLeadingSpacesAndZeros, '') : value, radix || 0);
    };

    /**
     * Creates a "_.pluck" style function, which returns the `key` value of a
     * given object.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {string} key The name of the property to retrieve.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var characters = [
     *   { 'name': 'fred',   'age': 40 },
     *   { 'name': 'barney', 'age': 36 }
     * ];
     *
     * var getName = _.property('name');
     *
     * _.map(characters, getName);
     * // => ['barney', 'fred']
     *
     * _.sortBy(characters, getName);
     * // => [{ 'name': 'barney', 'age': 36 }, { 'name': 'fred',   'age': 40 }]
     */
    function property(key) {
      return function(object) {
        return object[key];
      };
    }

    /**
     * Produces a random number between `min` and `max` (inclusive). If only one
     * argument is provided a number between `0` and the given number will be
     * returned. If `floating` is truey or either `min` or `max` are floats a
     * floating-point number will be returned instead of an integer.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {number} [min=0] The minimum possible value.
     * @param {number} [max=1] The maximum possible value.
     * @param {boolean} [floating=false] Specify returning a floating-point number.
     * @returns {number} Returns a random number.
     * @example
     *
     * _.random(0, 5);
     * // => an integer between 0 and 5
     *
     * _.random(5);
     * // => also an integer between 0 and 5
     *
     * _.random(5, true);
     * // => a floating-point number between 0 and 5
     *
     * _.random(1.2, 5.2);
     * // => a floating-point number between 1.2 and 5.2
     */
    function random(min, max, floating) {
      var noMin = min == null,
          noMax = max == null;

      if (floating == null) {
        if (typeof min == 'boolean' && noMax) {
          floating = min;
          min = 1;
        }
        else if (!noMax && typeof max == 'boolean') {
          floating = max;
          noMax = true;
        }
      }
      if (noMin && noMax) {
        max = 1;
      }
      min = +min || 0;
      if (noMax) {
        max = min;
        min = 0;
      } else {
        max = +max || 0;
      }
      if (floating || min % 1 || max % 1) {
        var rand = nativeRandom();
        return nativeMin(min + (rand * (max - min + parseFloat('1e-' + ((rand +'').length - 1)))), max);
      }
      return baseRandom(min, max);
    }

    /**
     * Resolves the value of property `key` on `object`. If `key` is a function
     * it will be invoked with the `this` binding of `object` and its result returned,
     * else the property value is returned. If `object` is falsey then `undefined`
     * is returned.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {Object} object The object to inspect.
     * @param {string} key The name of the property to resolve.
     * @returns {*} Returns the resolved value.
     * @example
     *
     * var object = {
     *   'cheese': 'crumpets',
     *   'stuff': function() {
     *     return 'nonsense';
     *   }
     * };
     *
     * _.result(object, 'cheese');
     * // => 'crumpets'
     *
     * _.result(object, 'stuff');
     * // => 'nonsense'
     */
    function result(object, key) {
      if (object) {
        var value = object[key];
        return isFunction(value) ? object[key]() : value;
      }
    }

    /**
     * A micro-templating method that handles arbitrary delimiters, preserves
     * whitespace, and correctly escapes quotes within interpolated code.
     *
     * Note: In the development build, `_.template` utilizes sourceURLs for easier
     * debugging. See http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl
     *
     * For more information on precompiling templates see:
     * http://lodash.com/custom-builds
     *
     * For more information on Chrome extension sandboxes see:
     * http://developer.chrome.com/stable/extensions/sandboxingEval.html
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {string} text The template text.
     * @param {Object} data The data object used to populate the text.
     * @param {Object} [options] The options object.
     * @param {RegExp} [options.escape] The "escape" delimiter.
     * @param {RegExp} [options.evaluate] The "evaluate" delimiter.
     * @param {Object} [options.imports] An object to import into the template as local variables.
     * @param {RegExp} [options.interpolate] The "interpolate" delimiter.
     * @param {string} [sourceURL] The sourceURL of the template's compiled source.
     * @param {string} [variable] The data object variable name.
     * @returns {Function|string} Returns a compiled function when no `data` object
     *  is given, else it returns the interpolated text.
     * @example
     *
     * // using the "interpolate" delimiter to create a compiled template
     * var compiled = _.template('hello <%= name %>');
     * compiled({ 'name': 'fred' });
     * // => 'hello fred'
     *
     * // using the "escape" delimiter to escape HTML in data property values
     * _.template('<b><%- value %></b>', { 'value': '<script>' });
     * // => '<b>&lt;script&gt;</b>'
     *
     * // using the "evaluate" delimiter to generate HTML
     * var list = '<% _.forEach(people, function(name) { %><li><%- name %></li><% }); %>';
     * _.template(list, { 'people': ['fred', 'barney'] });
     * // => '<li>fred</li><li>barney</li>'
     *
     * // using the ES6 delimiter as an alternative to the default "interpolate" delimiter
     * _.template('hello ${ name }', { 'name': 'pebbles' });
     * // => 'hello pebbles'
     *
     * // using the internal `print` function in "evaluate" delimiters
     * _.template('<% print("hello " + name); %>!', { 'name': 'barney' });
     * // => 'hello barney!'
     *
     * // using a custom template delimiters
     * _.templateSettings = {
     *   'interpolate': /{{([\s\S]+?)}}/g
     * };
     *
     * _.template('hello {{ name }}!', { 'name': 'mustache' });
     * // => 'hello mustache!'
     *
     * // using the `imports` option to import jQuery
     * var list = '<% jq.each(people, function(name) { %><li><%- name %></li><% }); %>';
     * _.template(list, { 'people': ['fred', 'barney'] }, { 'imports': { 'jq': jQuery } });
     * // => '<li>fred</li><li>barney</li>'
     *
     * // using the `sourceURL` option to specify a custom sourceURL for the template
     * var compiled = _.template('hello <%= name %>', null, { 'sourceURL': '/basic/greeting.jst' });
     * compiled(data);
     * // => find the source of "greeting.jst" under the Sources tab or Resources panel of the web inspector
     *
     * // using the `variable` option to ensure a with-statement isn't used in the compiled template
     * var compiled = _.template('hi <%= data.name %>!', null, { 'variable': 'data' });
     * compiled.source;
     * // => function(data) {
     *   var __t, __p = '', __e = _.escape;
     *   __p += 'hi ' + ((__t = ( data.name )) == null ? '' : __t) + '!';
     *   return __p;
     * }
     *
     * // using the `source` property to inline compiled templates for meaningful
     * // line numbers in error messages and a stack trace
     * fs.writeFileSync(path.join(cwd, 'jst.js'), '\
     *   var JST = {\
     *     "main": ' + _.template(mainText).source + '\
     *   };\
     * ');
     */
    function template(text, data, options) {
      // based on John Resig's `tmpl` implementation
      // http://ejohn.org/blog/javascript-micro-templating/
      // and Laura Doktorova's doT.js
      // https://github.com/olado/doT
      var settings = lodash.templateSettings;
      text = String(text || '');

      // avoid missing dependencies when `iteratorTemplate` is not defined
      options = defaults({}, options, settings);

      var imports = defaults({}, options.imports, settings.imports),
          importsKeys = keys(imports),
          importsValues = values(imports);

      var isEvaluating,
          index = 0,
          interpolate = options.interpolate || reNoMatch,
          source = "__p += '";

      // compile the regexp to match each delimiter
      var reDelimiters = RegExp(
        (options.escape || reNoMatch).source + '|' +
        interpolate.source + '|' +
        (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' +
        (options.evaluate || reNoMatch).source + '|$'
      , 'g');

      text.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {
        interpolateValue || (interpolateValue = esTemplateValue);

        // escape characters that cannot be included in string literals
        source += text.slice(index, offset).replace(reUnescapedString, escapeStringChar);

        // replace delimiters with snippets
        if (escapeValue) {
          source += "' +\n__e(" + escapeValue + ") +\n'";
        }
        if (evaluateValue) {
          isEvaluating = true;
          source += "';\n" + evaluateValue + ";\n__p += '";
        }
        if (interpolateValue) {
          source += "' +\n((__t = (" + interpolateValue + ")) == null ? '' : __t) +\n'";
        }
        index = offset + match.length;

        // the JS engine embedded in Adobe products requires returning the `match`
        // string in order to produce the correct `offset` value
        return match;
      });

      source += "';\n";

      // if `variable` is not specified, wrap a with-statement around the generated
      // code to add the data object to the top of the scope chain
      var variable = options.variable,
          hasVariable = variable;

      if (!hasVariable) {
        variable = 'obj';
        source = 'with (' + variable + ') {\n' + source + '\n}\n';
      }
      // cleanup code by stripping empty strings
      source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)
        .replace(reEmptyStringMiddle, '$1')
        .replace(reEmptyStringTrailing, '$1;');

      // frame code as the function body
      source = 'function(' + variable + ') {\n' +
        (hasVariable ? '' : variable + ' || (' + variable + ' = {});\n') +
        "var __t, __p = '', __e = _.escape" +
        (isEvaluating
          ? ', __j = Array.prototype.join;\n' +
            "function print() { __p += __j.call(arguments, '') }\n"
          : ';\n'
        ) +
        source +
        'return __p\n}';

      // Use a sourceURL for easier debugging.
      // http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl
      var sourceURL = '\n/*\n//# sourceURL=' + (options.sourceURL || '/lodash/template/source[' + (templateCounter++) + ']') + '\n*/';

      try {
        var result = Function(importsKeys, 'return ' + source + sourceURL).apply(undefined, importsValues);
      } catch(e) {
        e.source = source;
        throw e;
      }
      if (data) {
        return result(data);
      }
      // provide the compiled function's source by its `toString` method, in
      // supported environments, or the `source` property as a convenience for
      // inlining compiled templates during the build process
      result.source = source;
      return result;
    }

    /**
     * Executes the callback `n` times, returning an array of the results
     * of each callback execution. The callback is bound to `thisArg` and invoked
     * with one argument; (index).
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {number} n The number of times to execute the callback.
     * @param {Function} callback The function called per iteration.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns an array of the results of each `callback` execution.
     * @example
     *
     * var diceRolls = _.times(3, _.partial(_.random, 1, 6));
     * // => [3, 6, 4]
     *
     * _.times(3, function(n) { mage.castSpell(n); });
     * // => calls `mage.castSpell(n)` three times, passing `n` of `0`, `1`, and `2` respectively
     *
     * _.times(3, function(n) { this.cast(n); }, mage);
     * // => also calls `mage.castSpell(n)` three times
     */
    function times(n, callback, thisArg) {
      n = (n = +n) > -1 ? n : 0;
      var index = -1,
          result = Array(n);

      callback = baseCreateCallback(callback, thisArg, 1);
      while (++index < n) {
        result[index] = callback(index);
      }
      return result;
    }

    /**
     * The inverse of `_.escape` this method converts the HTML entities
     * `&amp;`, `&lt;`, `&gt;`, `&quot;`, and `&#39;` in `string` to their
     * corresponding characters.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {string} string The string to unescape.
     * @returns {string} Returns the unescaped string.
     * @example
     *
     * _.unescape('Fred, Barney &amp; Pebbles');
     * // => 'Fred, Barney & Pebbles'
     */
    function unescape(string) {
      return string == null ? '' : String(string).replace(reEscapedHtml, unescapeHtmlChar);
    }

    /**
     * Generates a unique ID. If `prefix` is provided the ID will be appended to it.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {string} [prefix] The value to prefix the ID with.
     * @returns {string} Returns the unique ID.
     * @example
     *
     * _.uniqueId('contact_');
     * // => 'contact_104'
     *
     * _.uniqueId();
     * // => '105'
     */
    function uniqueId(prefix) {
      var id = ++idCounter;
      return String(prefix == null ? '' : prefix) + id;
    }

    /*--------------------------------------------------------------------------*/

    /**
     * Creates a `lodash` object that wraps the given value with explicit
     * method chaining enabled.
     *
     * @static
     * @memberOf _
     * @category Chaining
     * @param {*} value The value to wrap.
     * @returns {Object} Returns the wrapper object.
     * @example
     *
     * var characters = [
     *   { 'name': 'barney',  'age': 36 },
     *   { 'name': 'fred',    'age': 40 },
     *   { 'name': 'pebbles', 'age': 1 }
     * ];
     *
     * var youngest = _.chain(characters)
     *     .sortBy('age')
     *     .map(function(chr) { return chr.name + ' is ' + chr.age; })
     *     .first()
     *     .value();
     * // => 'pebbles is 1'
     */
    function chain(value) {
      value = new lodashWrapper(value);
      value.__chain__ = true;
      return value;
    }

    /**
     * Invokes `interceptor` with the `value` as the first argument and then
     * returns `value`. The purpose of this method is to "tap into" a method
     * chain in order to perform operations on intermediate results within
     * the chain.
     *
     * @static
     * @memberOf _
     * @category Chaining
     * @param {*} value The value to provide to `interceptor`.
     * @param {Function} interceptor The function to invoke.
     * @returns {*} Returns `value`.
     * @example
     *
     * _([1, 2, 3, 4])
     *  .tap(function(array) { array.pop(); })
     *  .reverse()
     *  .value();
     * // => [3, 2, 1]
     */
    function tap(value, interceptor) {
      interceptor(value);
      return value;
    }

    /**
     * Enables explicit method chaining on the wrapper object.
     *
     * @name chain
     * @memberOf _
     * @category Chaining
     * @returns {*} Returns the wrapper object.
     * @example
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36 },
     *   { 'name': 'fred',   'age': 40 }
     * ];
     *
     * // without explicit chaining
     * _(characters).first();
     * // => { 'name': 'barney', 'age': 36 }
     *
     * // with explicit chaining
     * _(characters).chain()
     *   .first()
     *   .pick('age')
     *   .value();
     * // => { 'age': 36 }
     */
    function wrapperChain() {
      this.__chain__ = true;
      return this;
    }

    /**
     * Produces the `toString` result of the wrapped value.
     *
     * @name toString
     * @memberOf _
     * @category Chaining
     * @returns {string} Returns the string result.
     * @example
     *
     * _([1, 2, 3]).toString();
     * // => '1,2,3'
     */
    function wrapperToString() {
      return String(this.__wrapped__);
    }

    /**
     * Extracts the wrapped value.
     *
     * @name valueOf
     * @memberOf _
     * @alias value
     * @category Chaining
     * @returns {*} Returns the wrapped value.
     * @example
     *
     * _([1, 2, 3]).valueOf();
     * // => [1, 2, 3]
     */
    function wrapperValueOf() {
      return this.__wrapped__;
    }

    /*--------------------------------------------------------------------------*/

    // add functions that return wrapped values when chaining
    lodash.after = after;
    lodash.assign = assign;
    lodash.at = at;
    lodash.bind = bind;
    lodash.bindAll = bindAll;
    lodash.bindKey = bindKey;
    lodash.chain = chain;
    lodash.compact = compact;
    lodash.compose = compose;
    lodash.constant = constant;
    lodash.countBy = countBy;
    lodash.create = create;
    lodash.createCallback = createCallback;
    lodash.curry = curry;
    lodash.debounce = debounce;
    lodash.defaults = defaults;
    lodash.defer = defer;
    lodash.delay = delay;
    lodash.difference = difference;
    lodash.filter = filter;
    lodash.flatten = flatten;
    lodash.forEach = forEach;
    lodash.forEachRight = forEachRight;
    lodash.forIn = forIn;
    lodash.forInRight = forInRight;
    lodash.forOwn = forOwn;
    lodash.forOwnRight = forOwnRight;
    lodash.functions = functions;
    lodash.groupBy = groupBy;
    lodash.indexBy = indexBy;
    lodash.initial = initial;
    lodash.intersection = intersection;
    lodash.invert = invert;
    lodash.invoke = invoke;
    lodash.keys = keys;
    lodash.map = map;
    lodash.mapValues = mapValues;
    lodash.max = max;
    lodash.memoize = memoize;
    lodash.merge = merge;
    lodash.min = min;
    lodash.omit = omit;
    lodash.once = once;
    lodash.pairs = pairs;
    lodash.partial = partial;
    lodash.partialRight = partialRight;
    lodash.pick = pick;
    lodash.pluck = pluck;
    lodash.property = property;
    lodash.pull = pull;
    lodash.range = range;
    lodash.reject = reject;
    lodash.remove = remove;
    lodash.rest = rest;
    lodash.shuffle = shuffle;
    lodash.sortBy = sortBy;
    lodash.tap = tap;
    lodash.throttle = throttle;
    lodash.times = times;
    lodash.toArray = toArray;
    lodash.transform = transform;
    lodash.union = union;
    lodash.uniq = uniq;
    lodash.values = values;
    lodash.where = where;
    lodash.without = without;
    lodash.wrap = wrap;
    lodash.xor = xor;
    lodash.zip = zip;
    lodash.zipObject = zipObject;

    // add aliases
    lodash.collect = map;
    lodash.drop = rest;
    lodash.each = forEach;
    lodash.eachRight = forEachRight;
    lodash.extend = assign;
    lodash.methods = functions;
    lodash.object = zipObject;
    lodash.select = filter;
    lodash.tail = rest;
    lodash.unique = uniq;
    lodash.unzip = zip;

    // add functions to `lodash.prototype`
    mixin(lodash);

    /*--------------------------------------------------------------------------*/

    // add functions that return unwrapped values when chaining
    lodash.clone = clone;
    lodash.cloneDeep = cloneDeep;
    lodash.contains = contains;
    lodash.escape = escape;
    lodash.every = every;
    lodash.find = find;
    lodash.findIndex = findIndex;
    lodash.findKey = findKey;
    lodash.findLast = findLast;
    lodash.findLastIndex = findLastIndex;
    lodash.findLastKey = findLastKey;
    lodash.has = has;
    lodash.identity = identity;
    lodash.indexOf = indexOf;
    lodash.isArguments = isArguments;
    lodash.isArray = isArray;
    lodash.isBoolean = isBoolean;
    lodash.isDate = isDate;
    lodash.isElement = isElement;
    lodash.isEmpty = isEmpty;
    lodash.isEqual = isEqual;
    lodash.isFinite = isFinite;
    lodash.isFunction = isFunction;
    lodash.isNaN = isNaN;
    lodash.isNull = isNull;
    lodash.isNumber = isNumber;
    lodash.isObject = isObject;
    lodash.isPlainObject = isPlainObject;
    lodash.isRegExp = isRegExp;
    lodash.isString = isString;
    lodash.isUndefined = isUndefined;
    lodash.lastIndexOf = lastIndexOf;
    lodash.mixin = mixin;
    lodash.noConflict = noConflict;
    lodash.noop = noop;
    lodash.now = now;
    lodash.parseInt = parseInt;
    lodash.random = random;
    lodash.reduce = reduce;
    lodash.reduceRight = reduceRight;
    lodash.result = result;
    lodash.runInContext = runInContext;
    lodash.size = size;
    lodash.some = some;
    lodash.sortedIndex = sortedIndex;
    lodash.template = template;
    lodash.unescape = unescape;
    lodash.uniqueId = uniqueId;

    // add aliases
    lodash.all = every;
    lodash.any = some;
    lodash.detect = find;
    lodash.findWhere = find;
    lodash.foldl = reduce;
    lodash.foldr = reduceRight;
    lodash.include = contains;
    lodash.inject = reduce;

    mixin(function() {
      var source = {}
      forOwn(lodash, function(func, methodName) {
        if (!lodash.prototype[methodName]) {
          source[methodName] = func;
        }
      });
      return source;
    }(), false);

    /*--------------------------------------------------------------------------*/

    // add functions capable of returning wrapped and unwrapped values when chaining
    lodash.first = first;
    lodash.last = last;
    lodash.sample = sample;

    // add aliases
    lodash.take = first;
    lodash.head = first;

    forOwn(lodash, function(func, methodName) {
      var callbackable = methodName !== 'sample';
      if (!lodash.prototype[methodName]) {
        lodash.prototype[methodName]= function(n, guard) {
          var chainAll = this.__chain__,
              result = func(this.__wrapped__, n, guard);

          return !chainAll && (n == null || (guard && !(callbackable && typeof n == 'function')))
            ? result
            : new lodashWrapper(result, chainAll);
        };
      }
    });

    /*--------------------------------------------------------------------------*/

    /**
     * The semantic version number.
     *
     * @static
     * @memberOf _
     * @type string
     */
    lodash.VERSION = '2.4.1';

    // add "Chaining" functions to the wrapper
    lodash.prototype.chain = wrapperChain;
    lodash.prototype.toString = wrapperToString;
    lodash.prototype.value = wrapperValueOf;
    lodash.prototype.valueOf = wrapperValueOf;

    // add `Array` functions that return unwrapped values
    forEach(['join', 'pop', 'shift'], function(methodName) {
      var func = arrayRef[methodName];
      lodash.prototype[methodName] = function() {
        var chainAll = this.__chain__,
            result = func.apply(this.__wrapped__, arguments);

        return chainAll
          ? new lodashWrapper(result, chainAll)
          : result;
      };
    });

    // add `Array` functions that return the existing wrapped value
    forEach(['push', 'reverse', 'sort', 'unshift'], function(methodName) {
      var func = arrayRef[methodName];
      lodash.prototype[methodName] = function() {
        func.apply(this.__wrapped__, arguments);
        return this;
      };
    });

    // add `Array` functions that return new wrapped values
    forEach(['concat', 'slice', 'splice'], function(methodName) {
      var func = arrayRef[methodName];
      lodash.prototype[methodName] = function() {
        return new lodashWrapper(func.apply(this.__wrapped__, arguments), this.__chain__);
      };
    });

    return lodash;
  }

  /*--------------------------------------------------------------------------*/

  // expose Lo-Dash
  var _ = runInContext();

  // some AMD build optimizers like r.js check for condition patterns like the following:
  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {
    // Expose Lo-Dash to the global object even when an AMD loader is present in
    // case Lo-Dash is loaded with a RequireJS shim config.
    // See http://requirejs.org/docs/api.html#config-shim
    root._ = _;

    // define as an anonymous module so, through path mapping, it can be
    // referenced as the "underscore" module
    define(function() {
      return _;
    });
  }
  // check for `exports` after `define` in case a build optimizer adds an `exports` object
  else if (freeExports && freeModule) {
    // in Node.js or RingoJS
    if (moduleExports) {
      (freeModule.exports = _)._ = _;
    }
    // in Narwhal or Rhino -require
    else {
      freeExports._ = _;
    }
  }
  else {
    // in a browser or Rhino
    root._ = _;
  }
}.call(this));

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],"/home/codio/workspace/node_modules/progressbar.js/node_modules/shifty/dist/shifty.js":[function(require,module,exports){
/*! shifty - v1.2.2 - 2014-10-09 - http://jeremyckahn.github.io/shifty */
;(function (root) {

/*!
 * Shifty Core
 * By Jeremy Kahn - jeremyckahn@gmail.com
 */

// UglifyJS define hack.  Used for unit testing.  Contents of this if are
// compiled away.
if (typeof SHIFTY_DEBUG_NOW === 'undefined') {
  SHIFTY_DEBUG_NOW = function () {
    return +new Date();
  };
}

var Tweenable = (function () {

  'use strict';

  // Aliases that get defined later in this function
  var formula;

  // CONSTANTS
  var DEFAULT_SCHEDULE_FUNCTION;
  var DEFAULT_EASING = 'linear';
  var DEFAULT_DURATION = 500;
  var UPDATE_TIME = 1000 / 60;

  var _now = Date.now
       ? Date.now
       : function () {return +new Date();};

  var now = SHIFTY_DEBUG_NOW
       ? SHIFTY_DEBUG_NOW
       : _now;

  if (typeof window !== 'undefined') {
    // requestAnimationFrame() shim by Paul Irish (modified for Shifty)
    // http://paulirish.com/2011/requestanimationframe-for-smart-animating/
    DEFAULT_SCHEDULE_FUNCTION = window.requestAnimationFrame
       || window.webkitRequestAnimationFrame
       || window.oRequestAnimationFrame
       || window.msRequestAnimationFrame
       || (window.mozCancelRequestAnimationFrame
       && window.mozRequestAnimationFrame)
       || setTimeout;
  } else {
    DEFAULT_SCHEDULE_FUNCTION = setTimeout;
  }

  function noop () {
    // NOOP!
  }

  /*!
   * Handy shortcut for doing a for-in loop. This is not a "normal" each
   * function, it is optimized for Shifty.  The iterator function only receives
   * the property name, not the value.
   * @param {Object} obj
   * @param {Function(string)} fn
   */
  function each (obj, fn) {
    var key;
    for (key in obj) {
      if (Object.hasOwnProperty.call(obj, key)) {
        fn(key);
      }
    }
  }

  /*!
   * Perform a shallow copy of Object properties.
   * @param {Object} targetObject The object to copy into
   * @param {Object} srcObject The object to copy from
   * @return {Object} A reference to the augmented `targetObj` Object
   */
  function shallowCopy (targetObj, srcObj) {
    each(srcObj, function (prop) {
      targetObj[prop] = srcObj[prop];
    });

    return targetObj;
  }

  /*!
   * Copies each property from src onto target, but only if the property to
   * copy to target is undefined.
   * @param {Object} target Missing properties in this Object are filled in
   * @param {Object} src
   */
  function defaults (target, src) {
    each(src, function (prop) {
      if (typeof target[prop] === 'undefined') {
        target[prop] = src[prop];
      }
    });
  }

  /*!
   * Calculates the interpolated tween values of an Object for a given
   * timestamp.
   * @param {Number} forPosition The position to compute the state for.
   * @param {Object} currentState Current state properties.
   * @param {Object} originalState: The original state properties the Object is
   * tweening from.
   * @param {Object} targetState: The destination state properties the Object
   * is tweening to.
   * @param {number} duration: The length of the tween in milliseconds.
   * @param {number} timestamp: The UNIX epoch time at which the tween began.
   * @param {Object} easing: This Object's keys must correspond to the keys in
   * targetState.
   */
  function tweenProps (forPosition, currentState, originalState, targetState,
    duration, timestamp, easing) {
    var normalizedPosition = (forPosition - timestamp) / duration;

    var prop;
    for (prop in currentState) {
      if (currentState.hasOwnProperty(prop)) {
        currentState[prop] = tweenProp(originalState[prop],
          targetState[prop], formula[easing[prop]], normalizedPosition);
      }
    }

    return currentState;
  }

  /*!
   * Tweens a single property.
   * @param {number} start The value that the tween started from.
   * @param {number} end The value that the tween should end at.
   * @param {Function} easingFunc The easing curve to apply to the tween.
   * @param {number} position The normalized position (between 0.0 and 1.0) to
   * calculate the midpoint of 'start' and 'end' against.
   * @return {number} The tweened value.
   */
  function tweenProp (start, end, easingFunc, position) {
    return start + (end - start) * easingFunc(position);
  }

  /*!
   * Applies a filter to Tweenable instance.
   * @param {Tweenable} tweenable The `Tweenable` instance to call the filter
   * upon.
   * @param {String} filterName The name of the filter to apply.
   */
  function applyFilter (tweenable, filterName) {
    var filters = Tweenable.prototype.filter;
    var args = tweenable._filterArgs;

    each(filters, function (name) {
      if (typeof filters[name][filterName] !== 'undefined') {
        filters[name][filterName].apply(tweenable, args);
      }
    });
  }

  var timeoutHandler_endTime;
  var timeoutHandler_currentTime;
  var timeoutHandler_isEnded;
  /*!
   * Handles the update logic for one step of a tween.
   * @param {Tweenable} tweenable
   * @param {number} timestamp
   * @param {number} duration
   * @param {Object} currentState
   * @param {Object} originalState
   * @param {Object} targetState
   * @param {Object} easing
   * @param {Function} step
   * @param {Function(Function,number)}} schedule
   */
  function timeoutHandler (tweenable, timestamp, duration, currentState,
    originalState, targetState, easing, step, schedule) {
    timeoutHandler_endTime = timestamp + duration;
    timeoutHandler_currentTime = Math.min(now(), timeoutHandler_endTime);
    timeoutHandler_isEnded = timeoutHandler_currentTime >= timeoutHandler_endTime;

    if (tweenable.isPlaying() && !timeoutHandler_isEnded) {
      schedule(tweenable._timeoutHandler, UPDATE_TIME);

      applyFilter(tweenable, 'beforeTween');
      tweenProps(timeoutHandler_currentTime, currentState, originalState,
        targetState, duration, timestamp, easing);
      applyFilter(tweenable, 'afterTween');

      step(currentState);
    } else if (timeoutHandler_isEnded) {
      step(targetState);
      tweenable.stop(true);
    }
  }


  /*!
   * Creates a usable easing Object from either a string or another easing
   * Object.  If `easing` is an Object, then this function clones it and fills
   * in the missing properties with "linear".
   * @param {Object} fromTweenParams
   * @param {Object|string} easing
   */
  function composeEasingObject (fromTweenParams, easing) {
    var composedEasing = {};

    if (typeof easing === 'string') {
      each(fromTweenParams, function (prop) {
        composedEasing[prop] = easing;
      });
    } else {
      each(fromTweenParams, function (prop) {
        if (!composedEasing[prop]) {
          composedEasing[prop] = easing[prop] || DEFAULT_EASING;
        }
      });
    }

    return composedEasing;
  }

  /**
   * Tweenable constructor.
   * @param {Object=} opt_initialState The values that the initial tween should start at if a "from" object is not provided to Tweenable#tween.
   * @param {Object=} opt_config See Tweenable.prototype.setConfig()
   * @constructor
   */
  function Tweenable (opt_initialState, opt_config) {
    this._currentState = opt_initialState || {};
    this._configured = false;
    this._scheduleFunction = DEFAULT_SCHEDULE_FUNCTION;

    // To prevent unnecessary calls to setConfig do not set default configuration here.
    // Only set default configuration immediately before tweening if none has been set.
    if (typeof opt_config !== 'undefined') {
      this.setConfig(opt_config);
    }
  }

  /**
   * Configure and start a tween.
   * @param {Object=} opt_config See Tweenable.prototype.setConfig()
   * @return {Tweenable}
   */
  Tweenable.prototype.tween = function (opt_config) {
    if (this._isTweening) {
      return this;
    }

    // Only set default config if no configuration has been set previously and none is provided now.
    if (opt_config !== undefined || !this._configured) {
      this.setConfig(opt_config);
    }

    this._start(this.get());
    return this.resume();
  };

  /**
   * Sets the tween configuration. `config` may have the following options:
   *
   * - __from__ (_Object=_): Starting position.  If omitted, the current state is used.
   * - __to__ (_Object=_): Ending position.
   * - __duration__ (_number=_): How many milliseconds to animate for.
   * - __start__ (_Function(Object)=_): Function to execute when the tween begins.  Receives the state of the tween as the only parameter.
   * - __step__ (_Function(Object)=_): Function to execute on every tick.  Receives the state of the tween as the only parameter.  This function is not called on the final step of the animation, but `finish` is.
   * - __finish__ (_Function(Object)=_): Function to execute upon tween completion.  Receives the state of the tween as the only parameter.
   * - __easing__ (_Object|string=_): Easing curve name(s) to use for the tween.
   * @param {Object} config
   * @return {Tweenable}
   */
  Tweenable.prototype.setConfig = function (config) {
    config = config || {};
    this._configured = true;

    // Init the internal state
    this._pausedAtTime = null;
    this._start = config.start || noop;
    this._step = config.step || noop;
    this._finish = config.finish || noop;
    this._duration = config.duration || DEFAULT_DURATION;
    this._currentState = config.from || this.get();
    this._originalState = this.get();
    this._targetState = config.to || this.get();
    this._timestamp = now();

    // Aliases used below
    var currentState = this._currentState;
    var targetState = this._targetState;

    // Ensure that there is always something to tween to.
    defaults(targetState, currentState);

    this._easing = composeEasingObject(
      currentState, config.easing || DEFAULT_EASING);

    this._filterArgs =
      [currentState, this._originalState, targetState, this._easing];

    applyFilter(this, 'tweenCreated');
    return this;
  };

  /**
   * Gets the current state.
   * @return {Object}
   */
  Tweenable.prototype.get = function () {
    return shallowCopy({}, this._currentState);
  };

  /**
   * Sets the current state.
   * @param {Object} state
   */
  Tweenable.prototype.set = function (state) {
    this._currentState = state;
  };

  /**
   * Pauses a tween.  Paused tweens can be resumed from the point at which they were paused.  This is different than [`stop()`](#stop), as that method causes a tween to start over when it is resumed.
   * @return {Tweenable}
   */
  Tweenable.prototype.pause = function () {
    this._pausedAtTime = now();
    this._isPaused = true;
    return this;
  };

  /**
   * Resumes a paused tween.
   * @return {Tweenable}
   */
  Tweenable.prototype.resume = function () {
    if (this._isPaused) {
      this._timestamp += now() - this._pausedAtTime;
    }

    this._isPaused = false;
    this._isTweening = true;

    var self = this;
    this._timeoutHandler = function () {
      timeoutHandler(self, self._timestamp, self._duration, self._currentState,
        self._originalState, self._targetState, self._easing, self._step,
        self._scheduleFunction);
    };

    this._timeoutHandler();

    return this;
  };

  /**
   * Stops and cancels a tween.
   * @param {boolean=} gotoEnd If false or omitted, the tween just stops at its current state, and the "finish" handler is not invoked.  If true, the tweened object's values are instantly set to the target values, and "finish" is invoked.
   * @return {Tweenable}
   */
  Tweenable.prototype.stop = function (gotoEnd) {
    this._isTweening = false;
    this._isPaused = false;
    this._timeoutHandler = noop;

    if (gotoEnd) {
      shallowCopy(this._currentState, this._targetState);
      applyFilter(this, 'afterTweenEnd');
      this._finish.call(this, this._currentState);
    }

    return this;
  };

  /**
   * Returns whether or not a tween is running.
   * @return {boolean}
   */
  Tweenable.prototype.isPlaying = function () {
    return this._isTweening && !this._isPaused;
  };

  /**
   * Sets a custom schedule function.
   *
   * If a custom function is not set the default one is used [`requestAnimationFrame`](https://developer.mozilla.org/en-US/docs/Web/API/window.requestAnimationFrame) if available, otherwise [`setTimeout`](https://developer.mozilla.org/en-US/docs/Web/API/Window.setTimeout)).
   *
   * @param {Function(Function,number)} scheduleFunction The function to be called to schedule the next frame to be rendered
   */
  Tweenable.prototype.setScheduleFunction = function (scheduleFunction) {
    this._scheduleFunction = scheduleFunction;
  };

  /**
   * `delete`s all "own" properties.  Call this when the `Tweenable` instance is no longer needed to free memory.
   */
  Tweenable.prototype.dispose = function () {
    var prop;
    for (prop in this) {
      if (this.hasOwnProperty(prop)) {
        delete this[prop];
      }
    }
  };

  /*!
   * Filters are used for transforming the properties of a tween at various
   * points in a Tweenable's life cycle.  See the README for more info on this.
   */
  Tweenable.prototype.filter = {};

  /*!
   * This object contains all of the tweens available to Shifty.  It is extendible - simply attach properties to the Tweenable.prototype.formula Object following the same format at linear.
   *
   * `pos` should be a normalized `number` (between 0 and 1).
   */
  Tweenable.prototype.formula = {
    linear: function (pos) {
      return pos;
    }
  };

  formula = Tweenable.prototype.formula;

  shallowCopy(Tweenable, {
    'now': now
    ,'each': each
    ,'tweenProps': tweenProps
    ,'tweenProp': tweenProp
    ,'applyFilter': applyFilter
    ,'shallowCopy': shallowCopy
    ,'defaults': defaults
    ,'composeEasingObject': composeEasingObject
  });

  // `root` is provided in the intro/outro files.

  // A hook used for unit testing.
  if (typeof SHIFTY_DEBUG_NOW === 'function') {
    root.timeoutHandler = timeoutHandler;
  }

  // Bootstrap Tweenable appropriately for the environment.
  if (typeof exports === 'object') {
    // CommonJS
    module.exports = Tweenable;
  } else if (typeof define === 'function' && define.amd) {
    // AMD
    define(function () {return Tweenable;});
  } else if (typeof root.Tweenable === 'undefined') {
    // Browser: Make `Tweenable` globally accessible.
    root.Tweenable = Tweenable;
  }

  return Tweenable;

} ());

/*!
 * All equations are adapted from Thomas Fuchs' [Scripty2](https://github.com/madrobby/scripty2/blob/master/src/effects/transitions/penner.js).
 *
 * Based on Easing Equations (c) 2003 [Robert Penner](http://www.robertpenner.com/), all rights reserved. This work is [subject to terms](http://www.robertpenner.com/easing_terms_of_use.html).
 */

/*!
 *  TERMS OF USE - EASING EQUATIONS
 *  Open source under the BSD License.
 *  Easing Equations (c) 2003 Robert Penner, all rights reserved.
 */

;(function () {

  Tweenable.shallowCopy(Tweenable.prototype.formula, {
    easeInQuad: function (pos) {
      return Math.pow(pos, 2);
    },

    easeOutQuad: function (pos) {
      return -(Math.pow((pos - 1), 2) - 1);
    },

    easeInOutQuad: function (pos) {
      if ((pos /= 0.5) < 1) {return 0.5 * Math.pow(pos,2);}
      return -0.5 * ((pos -= 2) * pos - 2);
    },

    easeInCubic: function (pos) {
      return Math.pow(pos, 3);
    },

    easeOutCubic: function (pos) {
      return (Math.pow((pos - 1), 3) + 1);
    },

    easeInOutCubic: function (pos) {
      if ((pos /= 0.5) < 1) {return 0.5 * Math.pow(pos,3);}
      return 0.5 * (Math.pow((pos - 2),3) + 2);
    },

    easeInQuart: function (pos) {
      return Math.pow(pos, 4);
    },

    easeOutQuart: function (pos) {
      return -(Math.pow((pos - 1), 4) - 1);
    },

    easeInOutQuart: function (pos) {
      if ((pos /= 0.5) < 1) {return 0.5 * Math.pow(pos,4);}
      return -0.5 * ((pos -= 2) * Math.pow(pos,3) - 2);
    },

    easeInQuint: function (pos) {
      return Math.pow(pos, 5);
    },

    easeOutQuint: function (pos) {
      return (Math.pow((pos - 1), 5) + 1);
    },

    easeInOutQuint: function (pos) {
      if ((pos /= 0.5) < 1) {return 0.5 * Math.pow(pos,5);}
      return 0.5 * (Math.pow((pos - 2),5) + 2);
    },

    easeInSine: function (pos) {
      return -Math.cos(pos * (Math.PI / 2)) + 1;
    },

    easeOutSine: function (pos) {
      return Math.sin(pos * (Math.PI / 2));
    },

    easeInOutSine: function (pos) {
      return (-0.5 * (Math.cos(Math.PI * pos) - 1));
    },

    easeInExpo: function (pos) {
      return (pos === 0) ? 0 : Math.pow(2, 10 * (pos - 1));
    },

    easeOutExpo: function (pos) {
      return (pos === 1) ? 1 : -Math.pow(2, -10 * pos) + 1;
    },

    easeInOutExpo: function (pos) {
      if (pos === 0) {return 0;}
      if (pos === 1) {return 1;}
      if ((pos /= 0.5) < 1) {return 0.5 * Math.pow(2,10 * (pos - 1));}
      return 0.5 * (-Math.pow(2, -10 * --pos) + 2);
    },

    easeInCirc: function (pos) {
      return -(Math.sqrt(1 - (pos * pos)) - 1);
    },

    easeOutCirc: function (pos) {
      return Math.sqrt(1 - Math.pow((pos - 1), 2));
    },

    easeInOutCirc: function (pos) {
      if ((pos /= 0.5) < 1) {return -0.5 * (Math.sqrt(1 - pos * pos) - 1);}
      return 0.5 * (Math.sqrt(1 - (pos -= 2) * pos) + 1);
    },

    easeOutBounce: function (pos) {
      if ((pos) < (1 / 2.75)) {
        return (7.5625 * pos * pos);
      } else if (pos < (2 / 2.75)) {
        return (7.5625 * (pos -= (1.5 / 2.75)) * pos + 0.75);
      } else if (pos < (2.5 / 2.75)) {
        return (7.5625 * (pos -= (2.25 / 2.75)) * pos + 0.9375);
      } else {
        return (7.5625 * (pos -= (2.625 / 2.75)) * pos + 0.984375);
      }
    },

    easeInBack: function (pos) {
      var s = 1.70158;
      return (pos) * pos * ((s + 1) * pos - s);
    },

    easeOutBack: function (pos) {
      var s = 1.70158;
      return (pos = pos - 1) * pos * ((s + 1) * pos + s) + 1;
    },

    easeInOutBack: function (pos) {
      var s = 1.70158;
      if ((pos /= 0.5) < 1) {return 0.5 * (pos * pos * (((s *= (1.525)) + 1) * pos - s));}
      return 0.5 * ((pos -= 2) * pos * (((s *= (1.525)) + 1) * pos + s) + 2);
    },

    elastic: function (pos) {
      return -1 * Math.pow(4,-8 * pos) * Math.sin((pos * 6 - 1) * (2 * Math.PI) / 2) + 1;
    },

    swingFromTo: function (pos) {
      var s = 1.70158;
      return ((pos /= 0.5) < 1) ? 0.5 * (pos * pos * (((s *= (1.525)) + 1) * pos - s)) :
          0.5 * ((pos -= 2) * pos * (((s *= (1.525)) + 1) * pos + s) + 2);
    },

    swingFrom: function (pos) {
      var s = 1.70158;
      return pos * pos * ((s + 1) * pos - s);
    },

    swingTo: function (pos) {
      var s = 1.70158;
      return (pos -= 1) * pos * ((s + 1) * pos + s) + 1;
    },

    bounce: function (pos) {
      if (pos < (1 / 2.75)) {
        return (7.5625 * pos * pos);
      } else if (pos < (2 / 2.75)) {
        return (7.5625 * (pos -= (1.5 / 2.75)) * pos + 0.75);
      } else if (pos < (2.5 / 2.75)) {
        return (7.5625 * (pos -= (2.25 / 2.75)) * pos + 0.9375);
      } else {
        return (7.5625 * (pos -= (2.625 / 2.75)) * pos + 0.984375);
      }
    },

    bouncePast: function (pos) {
      if (pos < (1 / 2.75)) {
        return (7.5625 * pos * pos);
      } else if (pos < (2 / 2.75)) {
        return 2 - (7.5625 * (pos -= (1.5 / 2.75)) * pos + 0.75);
      } else if (pos < (2.5 / 2.75)) {
        return 2 - (7.5625 * (pos -= (2.25 / 2.75)) * pos + 0.9375);
      } else {
        return 2 - (7.5625 * (pos -= (2.625 / 2.75)) * pos + 0.984375);
      }
    },

    easeFromTo: function (pos) {
      if ((pos /= 0.5) < 1) {return 0.5 * Math.pow(pos,4);}
      return -0.5 * ((pos -= 2) * Math.pow(pos,3) - 2);
    },

    easeFrom: function (pos) {
      return Math.pow(pos,4);
    },

    easeTo: function (pos) {
      return Math.pow(pos,0.25);
    }
  });

}());

/*!
 * The Bezier magic in this file is adapted/copied almost wholesale from
 * [Scripty2](https://github.com/madrobby/scripty2/blob/master/src/effects/transitions/cubic-bezier.js),
 * which was adapted from Apple code (which probably came from
 * [here](http://opensource.apple.com/source/WebCore/WebCore-955.66/platform/graphics/UnitBezier.h)).
 * Special thanks to Apple and Thomas Fuchs for much of this code.
 */

/*!
 *  Copyright (c) 2006 Apple Computer, Inc. All rights reserved.
 *
 *  Redistribution and use in source and binary forms, with or without
 *  modification, are permitted provided that the following conditions are met:
 *
 *  1. Redistributions of source code must retain the above copyright notice,
 *  this list of conditions and the following disclaimer.
 *
 *  2. Redistributions in binary form must reproduce the above copyright notice,
 *  this list of conditions and the following disclaimer in the documentation
 *  and/or other materials provided with the distribution.
 *
 *  3. Neither the name of the copyright holder(s) nor the names of any
 *  contributors may be used to endorse or promote products derived from
 *  this software without specific prior written permission.
 *
 *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 *  "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
 *  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 *  ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE
 *  FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 *  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 *  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 *  ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 *  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 *  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
;(function () {
  // port of webkit cubic bezier handling by http://www.netzgesta.de/dev/
  function cubicBezierAtTime(t,p1x,p1y,p2x,p2y,duration) {
    var ax = 0,bx = 0,cx = 0,ay = 0,by = 0,cy = 0;
    function sampleCurveX(t) {return ((ax * t + bx) * t + cx) * t;}
    function sampleCurveY(t) {return ((ay * t + by) * t + cy) * t;}
    function sampleCurveDerivativeX(t) {return (3.0 * ax * t + 2.0 * bx) * t + cx;}
    function solveEpsilon(duration) {return 1.0 / (200.0 * duration);}
    function solve(x,epsilon) {return sampleCurveY(solveCurveX(x,epsilon));}
    function fabs(n) {if (n >= 0) {return n;}else {return 0 - n;}}
    function solveCurveX(x,epsilon) {
      var t0,t1,t2,x2,d2,i;
      for (t2 = x, i = 0; i < 8; i++) {x2 = sampleCurveX(t2) - x; if (fabs(x2) < epsilon) {return t2;} d2 = sampleCurveDerivativeX(t2); if (fabs(d2) < 1e-6) {break;} t2 = t2 - x2 / d2;}
      t0 = 0.0; t1 = 1.0; t2 = x; if (t2 < t0) {return t0;} if (t2 > t1) {return t1;}
      while (t0 < t1) {x2 = sampleCurveX(t2); if (fabs(x2 - x) < epsilon) {return t2;} if (x > x2) {t0 = t2;}else {t1 = t2;} t2 = (t1 - t0) * 0.5 + t0;}
      return t2; // Failure.
    }
    cx = 3.0 * p1x; bx = 3.0 * (p2x - p1x) - cx; ax = 1.0 - cx - bx; cy = 3.0 * p1y; by = 3.0 * (p2y - p1y) - cy; ay = 1.0 - cy - by;
    return solve(t, solveEpsilon(duration));
  }
  /*!
   *  getCubicBezierTransition(x1, y1, x2, y2) -> Function
   *
   *  Generates a transition easing function that is compatible
   *  with WebKit's CSS transitions `-webkit-transition-timing-function`
   *  CSS property.
   *
   *  The W3C has more information about
   *  <a href="http://www.w3.org/TR/css3-transitions/#transition-timing-function_tag">
   *  CSS3 transition timing functions</a>.
   *
   *  @param {number} x1
   *  @param {number} y1
   *  @param {number} x2
   *  @param {number} y2
   *  @return {function}
   */
  function getCubicBezierTransition (x1, y1, x2, y2) {
    return function (pos) {
      return cubicBezierAtTime(pos,x1,y1,x2,y2,1);
    };
  }
  // End ported code

  /**
   * Creates a Bezier easing function and attaches it to `Tweenable.prototype.formula`.  This function gives you total control over the easing curve.  Matthew Lein's [Ceaser](http://matthewlein.com/ceaser/) is a useful tool for visualizing the curves you can make with this function.
   *
   * @param {string} name The name of the easing curve.  Overwrites the old easing function on Tweenable.prototype.formula if it exists.
   * @param {number} x1
   * @param {number} y1
   * @param {number} x2
   * @param {number} y2
   * @return {function} The easing function that was attached to Tweenable.prototype.formula.
   */
  Tweenable.setBezierFunction = function (name, x1, y1, x2, y2) {
    var cubicBezierTransition = getCubicBezierTransition(x1, y1, x2, y2);
    cubicBezierTransition.x1 = x1;
    cubicBezierTransition.y1 = y1;
    cubicBezierTransition.x2 = x2;
    cubicBezierTransition.y2 = y2;

    return Tweenable.prototype.formula[name] = cubicBezierTransition;
  };


  /**
   * `delete`s an easing function from `Tweenable.prototype.formula`.  Be careful with this method, as it `delete`s whatever easing formula matches `name` (which means you can delete default Shifty easing functions).
   *
   * @param {string} name The name of the easing function to delete.
   * @return {function}
   */
  Tweenable.unsetBezierFunction = function (name) {
    delete Tweenable.prototype.formula[name];
  };

})();

;(function () {

  function getInterpolatedValues (
    from, current, targetState, position, easing) {
    return Tweenable.tweenProps(
      position, current, from, targetState, 1, 0, easing);
  }

  // Fake a Tweenable and patch some internals.  This approach allows us to
  // skip uneccessary processing and object recreation, cutting down on garbage
  // collection pauses.
  var mockTweenable = new Tweenable();
  mockTweenable._filterArgs = [];

  /**
   * Compute the midpoint of two Objects.  This method effectively calculates a specific frame of animation that [Tweenable#tween](shifty.core.js.html#tween) does many times over the course of a tween.
   *
   * Example:
   *
   * ```
   *  var interpolatedValues = Tweenable.interpolate({
   *    width: '100px',
   *    opacity: 0,
   *    color: '#fff'
   *  }, {
   *    width: '200px',
   *    opacity: 1,
   *    color: '#000'
   *  }, 0.5);
   *
   *  console.log(interpolatedValues);
   *  // {opacity: 0.5, width: "150px", color: "rgb(127,127,127)"}
   * ```
   *
   * @param {Object} from The starting values to tween from.
   * @param {Object} targetState The ending values to tween to.
   * @param {number} position The normalized position value (between 0.0 and 1.0) to interpolate the values between `from` and `to` for.  `from` represents 0 and `to` represents `1`.
   * @param {string|Object} easing The easing curve(s) to calculate the midpoint against.  You can reference any easing function attached to `Tweenable.prototype.formula`.  If omitted, this defaults to "linear".
   * @return {Object}
   */
  Tweenable.interpolate = function (from, targetState, position, easing) {
    var current = Tweenable.shallowCopy({}, from);
    var easingObject = Tweenable.composeEasingObject(
      from, easing || 'linear');

    mockTweenable.set({});

    // Alias and reuse the _filterArgs array instead of recreating it.
    var filterArgs = mockTweenable._filterArgs;
    filterArgs.length = 0;
    filterArgs[0] = current;
    filterArgs[1] = from;
    filterArgs[2] = targetState;
    filterArgs[3] = easingObject;

    // Any defined value transformation must be applied
    Tweenable.applyFilter(mockTweenable, 'tweenCreated');
    Tweenable.applyFilter(mockTweenable, 'beforeTween');

    var interpolatedValues = getInterpolatedValues(
      from, current, targetState, position, easingObject);

    // Transform values back into their original format
    Tweenable.applyFilter(mockTweenable, 'afterTween');

    return interpolatedValues;
  };

}());

/**
 * Adds string interpolation support to Shifty.
 *
 * The Token extension allows Shifty to tween numbers inside of strings.  Among other things, this allows you to animate CSS properties.  For example, you can do this:
 *
 * ```
 * var tweenable = new Tweenable();
 * tweenable.tween({
 *   from: { transform: 'translateX(45px)'},
 *   to: { transform: 'translateX(90xp)'}
 * });
 * ```
 *
 * `translateX(45)` will be tweened to `translateX(90)`.  To demonstrate:
 *
 * ```
 * var tweenable = new Tweenable();
 * tweenable.tween({
 *   from: { transform: 'translateX(45px)'},
 *   to: { transform: 'translateX(90px)'},
 *   step: function (state) {
 *     console.log(state.transform);
 *   }
 * });
 * ```
 *
 * The above snippet will log something like this in the console:
 *
 * ```
 * translateX(60.3px)
 * ...
 * translateX(76.05px)
 * ...
 * translateX(90px)
 * ```
 *
 * Another use for this is animating colors:
 *
 * ```
 * var tweenable = new Tweenable();
 * tweenable.tween({
 *   from: { color: 'rgb(0,255,0)'},
 *   to: { color: 'rgb(255,0,255)'},
 *   step: function (state) {
 *     console.log(state.color);
 *   }
 * });
 * ```
 *
 * The above snippet will log something like this:
 *
 * ```
 * rgb(84,170,84)
 * ...
 * rgb(170,84,170)
 * ...
 * rgb(255,0,255)
 * ```
 *
 * This extension also supports hexadecimal colors, in both long (`#ff00ff`) and short (`#f0f`) forms.  Be aware that hexadecimal input values will be converted into the equivalent RGB output values.  This is done to optimize for performance.
 *
 * ```
 * var tweenable = new Tweenable();
 * tweenable.tween({
 *   from: { color: '#0f0'},
 *   to: { color: '#f0f'},
 *   step: function (state) {
 *     console.log(state.color);
 *   }
 * });
 * ```
 *
 * This snippet will generate the same output as the one before it because equivalent values were supplied (just in hexadecimal form rather than RGB):
 *
 * ```
 * rgb(84,170,84)
 * ...
 * rgb(170,84,170)
 * ...
 * rgb(255,0,255)
 * ```
 *
 * ## Easing support
 *
 * Easing works somewhat differently in the Token extension.  This is because some CSS properties have multiple values in them, and you might need to tween each value along its own easing curve.  A basic example:
 *
 * ```
 * var tweenable = new Tweenable();
 * tweenable.tween({
 *   from: { transform: 'translateX(0px) translateY(0px)'},
 *   to: { transform:   'translateX(100px) translateY(100px)'},
 *   easing: { transform: 'easeInQuad' },
 *   step: function (state) {
 *     console.log(state.transform);
 *   }
 * });
 * ```
 *
 * The above snippet create values like this:
 *
 * ```
 * translateX(11.560000000000002px) translateY(11.560000000000002px)
 * ...
 * translateX(46.24000000000001px) translateY(46.24000000000001px)
 * ...
 * translateX(100px) translateY(100px)
 * ```
 *
 * In this case, the values for `translateX` and `translateY` are always the same for each step of the tween, because they have the same start and end points and both use the same easing curve.  We can also tween `translateX` and `translateY` along independent curves:
 *
 * ```
 * var tweenable = new Tweenable();
 * tweenable.tween({
 *   from: { transform: 'translateX(0px) translateY(0px)'},
 *   to: { transform:   'translateX(100px) translateY(100px)'},
 *   easing: { transform: 'easeInQuad bounce' },
 *   step: function (state) {
 *     console.log(state.transform);
 *   }
 * });
 * ```
 *
 * The above snippet create values like this:
 *
 * ```
 * translateX(10.89px) translateY(82.355625px)
 * ...
 * translateX(44.89000000000001px) translateY(86.73062500000002px)
 * ...
 * translateX(100px) translateY(100px)
 * ```
 *
 * `translateX` and `translateY` are not in sync anymore, because `easeInQuad` was specified for `translateX` and `bounce` for `translateY`.  Mixing and matching easing curves can make for some interesting motion in your animations.
 *
 * The order of the space-separated easing curves correspond the token values they apply to.  If there are more token values than easing curves listed, the last easing curve listed is used.
 */
function token () {
  // Functionality for this extension runs implicitly if it is loaded.
} /*!*/

// token function is defined above only so that dox-foundation sees it as
// documentation and renders it.  It is never used, and is optimized away at
// build time.

;(function (Tweenable) {

  /*!
   * @typedef {{
   *   formatString: string
   *   chunkNames: Array.<string>
   * }}
   */
  var formatManifest;

  // CONSTANTS

  var R_NUMBER_COMPONENT = /(\d|\-|\.)/;
  var R_FORMAT_CHUNKS = /([^\-0-9\.]+)/g;
  var R_UNFORMATTED_VALUES = /[0-9.\-]+/g;
  var R_RGB = new RegExp(
    'rgb\\(' + R_UNFORMATTED_VALUES.source +
    (/,\s*/.source) + R_UNFORMATTED_VALUES.source +
    (/,\s*/.source) + R_UNFORMATTED_VALUES.source + '\\)', 'g');
  var R_RGB_PREFIX = /^.*\(/;
  var R_HEX = /#([0-9]|[a-f]){3,6}/gi;
  var VALUE_PLACEHOLDER = 'VAL';

  // HELPERS

  var getFormatChunksFrom_accumulator = [];
  /*!
   * @param {Array.number} rawValues
   * @param {string} prefix
   *
   * @return {Array.<string>}
   */
  function getFormatChunksFrom (rawValues, prefix) {
    getFormatChunksFrom_accumulator.length = 0;

    var rawValuesLength = rawValues.length;
    var i;

    for (i = 0; i < rawValuesLength; i++) {
      getFormatChunksFrom_accumulator.push('_' + prefix + '_' + i);
    }

    return getFormatChunksFrom_accumulator;
  }

  /*!
   * @param {string} formattedString
   *
   * @return {string}
   */
  function getFormatStringFrom (formattedString) {
    var chunks = formattedString.match(R_FORMAT_CHUNKS);

    if (!chunks) {
      // chunks will be null if there were no tokens to parse in
      // formattedString (for example, if formattedString is '2').  Coerce
      // chunks to be useful here.
      chunks = ['', ''];

      // If there is only one chunk, assume that the string is a number
      // followed by a token...
      // NOTE: This may be an unwise assumption.
    } else if (chunks.length === 1 ||
        // ...or if the string starts with a number component (".", "-", or a
        // digit)...
        formattedString[0].match(R_NUMBER_COMPONENT)) {
      // ...prepend an empty string here to make sure that the formatted number
      // is properly replaced by VALUE_PLACEHOLDER
      chunks.unshift('');
    }

    return chunks.join(VALUE_PLACEHOLDER);
  }

  /*!
   * Convert all hex color values within a string to an rgb string.
   *
   * @param {Object} stateObject
   *
   * @return {Object} The modified obj
   */
  function sanitizeObjectForHexProps (stateObject) {
    Tweenable.each(stateObject, function (prop) {
      var currentProp = stateObject[prop];

      if (typeof currentProp === 'string' && currentProp.match(R_HEX)) {
        stateObject[prop] = sanitizeHexChunksToRGB(currentProp);
      }
    });
  }

  /*!
   * @param {string} str
   *
   * @return {string}
   */
  function  sanitizeHexChunksToRGB (str) {
    return filterStringChunks(R_HEX, str, convertHexToRGB);
  }

  /*!
   * @param {string} hexString
   *
   * @return {string}
   */
  function convertHexToRGB (hexString) {
    var rgbArr = hexToRGBArray(hexString);
    return 'rgb(' + rgbArr[0] + ',' + rgbArr[1] + ',' + rgbArr[2] + ')';
  }

  var hexToRGBArray_returnArray = [];
  /*!
   * Convert a hexadecimal string to an array with three items, one each for
   * the red, blue, and green decimal values.
   *
   * @param {string} hex A hexadecimal string.
   *
   * @returns {Array.<number>} The converted Array of RGB values if `hex` is a
   * valid string, or an Array of three 0's.
   */
  function hexToRGBArray (hex) {

    hex = hex.replace(/#/, '');

    // If the string is a shorthand three digit hex notation, normalize it to
    // the standard six digit notation
    if (hex.length === 3) {
      hex = hex.split('');
      hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];
    }

    hexToRGBArray_returnArray[0] = hexToDec(hex.substr(0, 2));
    hexToRGBArray_returnArray[1] = hexToDec(hex.substr(2, 2));
    hexToRGBArray_returnArray[2] = hexToDec(hex.substr(4, 2));

    return hexToRGBArray_returnArray;
  }

  /*!
   * Convert a base-16 number to base-10.
   *
   * @param {Number|String} hex The value to convert
   *
   * @returns {Number} The base-10 equivalent of `hex`.
   */
  function hexToDec (hex) {
    return parseInt(hex, 16);
  }

  /*!
   * Runs a filter operation on all chunks of a string that match a RegExp
   *
   * @param {RegExp} pattern
   * @param {string} unfilteredString
   * @param {function(string)} filter
   *
   * @return {string}
   */
  function filterStringChunks (pattern, unfilteredString, filter) {
    var pattenMatches = unfilteredString.match(pattern);
    var filteredString = unfilteredString.replace(pattern, VALUE_PLACEHOLDER);

    if (pattenMatches) {
      var pattenMatchesLength = pattenMatches.length;
      var currentChunk;

      for (var i = 0; i < pattenMatchesLength; i++) {
        currentChunk = pattenMatches.shift();
        filteredString = filteredString.replace(
          VALUE_PLACEHOLDER, filter(currentChunk));
      }
    }

    return filteredString;
  }

  /*!
   * Check for floating point values within rgb strings and rounds them.
   *
   * @param {string} formattedString
   *
   * @return {string}
   */
  function sanitizeRGBChunks (formattedString) {
    return filterStringChunks(R_RGB, formattedString, sanitizeRGBChunk);
  }

  /*!
   * @param {string} rgbChunk
   *
   * @return {string}
   */
  function sanitizeRGBChunk (rgbChunk) {
    var numbers = rgbChunk.match(R_UNFORMATTED_VALUES);
    var numbersLength = numbers.length;
    var sanitizedString = rgbChunk.match(R_RGB_PREFIX)[0];

    for (var i = 0; i < numbersLength; i++) {
      sanitizedString += parseInt(numbers[i], 10) + ',';
    }

    sanitizedString = sanitizedString.slice(0, -1) + ')';

    return sanitizedString;
  }

  /*!
   * @param {Object} stateObject
   *
   * @return {Object} An Object of formatManifests that correspond to
   * the string properties of stateObject
   */
  function getFormatManifests (stateObject) {
    var manifestAccumulator = {};

    Tweenable.each(stateObject, function (prop) {
      var currentProp = stateObject[prop];

      if (typeof currentProp === 'string') {
        var rawValues = getValuesFrom(currentProp);

        manifestAccumulator[prop] = {
          'formatString': getFormatStringFrom(currentProp)
          ,'chunkNames': getFormatChunksFrom(rawValues, prop)
        };
      }
    });

    return manifestAccumulator;
  }

  /*!
   * @param {Object} stateObject
   * @param {Object} formatManifests
   */
  function expandFormattedProperties (stateObject, formatManifests) {
    Tweenable.each(formatManifests, function (prop) {
      var currentProp = stateObject[prop];
      var rawValues = getValuesFrom(currentProp);
      var rawValuesLength = rawValues.length;

      for (var i = 0; i < rawValuesLength; i++) {
        stateObject[formatManifests[prop].chunkNames[i]] = +rawValues[i];
      }

      delete stateObject[prop];
    });
  }

  /*!
   * @param {Object} stateObject
   * @param {Object} formatManifests
   */
  function collapseFormattedProperties (stateObject, formatManifests) {
    Tweenable.each(formatManifests, function (prop) {
      var currentProp = stateObject[prop];
      var formatChunks = extractPropertyChunks(
        stateObject, formatManifests[prop].chunkNames);
      var valuesList = getValuesList(
        formatChunks, formatManifests[prop].chunkNames);
      currentProp = getFormattedValues(
        formatManifests[prop].formatString, valuesList);
      stateObject[prop] = sanitizeRGBChunks(currentProp);
    });
  }

  /*!
   * @param {Object} stateObject
   * @param {Array.<string>} chunkNames
   *
   * @return {Object} The extracted value chunks.
   */
  function extractPropertyChunks (stateObject, chunkNames) {
    var extractedValues = {};
    var currentChunkName, chunkNamesLength = chunkNames.length;

    for (var i = 0; i < chunkNamesLength; i++) {
      currentChunkName = chunkNames[i];
      extractedValues[currentChunkName] = stateObject[currentChunkName];
      delete stateObject[currentChunkName];
    }

    return extractedValues;
  }

  var getValuesList_accumulator = [];
  /*!
   * @param {Object} stateObject
   * @param {Array.<string>} chunkNames
   *
   * @return {Array.<number>}
   */
  function getValuesList (stateObject, chunkNames) {
    getValuesList_accumulator.length = 0;
    var chunkNamesLength = chunkNames.length;

    for (var i = 0; i < chunkNamesLength; i++) {
      getValuesList_accumulator.push(stateObject[chunkNames[i]]);
    }

    return getValuesList_accumulator;
  }

  /*!
   * @param {string} formatString
   * @param {Array.<number>} rawValues
   *
   * @return {string}
   */
  function getFormattedValues (formatString, rawValues) {
    var formattedValueString = formatString;
    var rawValuesLength = rawValues.length;

    for (var i = 0; i < rawValuesLength; i++) {
      formattedValueString = formattedValueString.replace(
        VALUE_PLACEHOLDER, +rawValues[i].toFixed(4));
    }

    return formattedValueString;
  }

  /*!
   * Note: It's the duty of the caller to convert the Array elements of the
   * return value into numbers.  This is a performance optimization.
   *
   * @param {string} formattedString
   *
   * @return {Array.<string>|null}
   */
  function getValuesFrom (formattedString) {
    return formattedString.match(R_UNFORMATTED_VALUES);
  }

  /*!
   * @param {Object} easingObject
   * @param {Object} tokenData
   */
  function expandEasingObject (easingObject, tokenData) {
    Tweenable.each(tokenData, function (prop) {
      var currentProp = tokenData[prop];
      var chunkNames = currentProp.chunkNames;
      var chunkLength = chunkNames.length;
      var easingChunks = easingObject[prop].split(' ');
      var lastEasingChunk = easingChunks[easingChunks.length - 1];

      for (var i = 0; i < chunkLength; i++) {
        easingObject[chunkNames[i]] = easingChunks[i] || lastEasingChunk;
      }

      delete easingObject[prop];
    });
  }

  /*!
   * @param {Object} easingObject
   * @param {Object} tokenData
   */
  function collapseEasingObject (easingObject, tokenData) {
    Tweenable.each(tokenData, function (prop) {
      var currentProp = tokenData[prop];
      var chunkNames = currentProp.chunkNames;
      var chunkLength = chunkNames.length;
      var composedEasingString = '';

      for (var i = 0; i < chunkLength; i++) {
        composedEasingString += ' ' + easingObject[chunkNames[i]];
        delete easingObject[chunkNames[i]];
      }

      easingObject[prop] = composedEasingString.substr(1);
    });
  }

  Tweenable.prototype.filter.token = {
    'tweenCreated': function (currentState, fromState, toState, easingObject) {
      sanitizeObjectForHexProps(currentState);
      sanitizeObjectForHexProps(fromState);
      sanitizeObjectForHexProps(toState);
      this._tokenData = getFormatManifests(currentState);
    },

    'beforeTween': function (currentState, fromState, toState, easingObject) {
      expandEasingObject(easingObject, this._tokenData);
      expandFormattedProperties(currentState, this._tokenData);
      expandFormattedProperties(fromState, this._tokenData);
      expandFormattedProperties(toState, this._tokenData);
    },

    'afterTween': function (currentState, fromState, toState, easingObject) {
      collapseFormattedProperties(currentState, this._tokenData);
      collapseFormattedProperties(fromState, this._tokenData);
      collapseFormattedProperties(toState, this._tokenData);
      collapseEasingObject(easingObject, this._tokenData);
    }
  };

} (Tweenable));

}(this));

},{}],"/home/codio/workspace/node_modules/progressbar.js/progressbar.js":[function(require,module,exports){
// Browserify will transform the module compatible for browser
var Tweenable = require('shifty');

var EASING_ALIASES = {
    easeIn: 'easeInCubic',
    easeOut: 'easeOutCubic',
    easeInOut: 'easeInOutCubic'
};

// Base object for different progress bar shapes
var Progress = function(container, opts) {
    // Prevent calling constructor without parameters so inheritance
    // works correctly
    if (arguments.length === 0) return;

    var svgView = this._createSvgView(opts);

    var element;
    if (isString(container)) {
        element = document.querySelector(container);
    } else {
        element = container;
    }
    element.appendChild(svgView.svg);

    var newOpts = extend({
        attachment: this
    }, opts);
    this._path = new Path(svgView.path, newOpts);

    // Expose public attributes
    this.path = svgView.path;
    this.trail = svgView.trail;
};

Progress.prototype.animate = function animate(progress, opts, cb) {
    this._path.animate(progress, opts, cb);
};

Progress.prototype.stop = function stop() {
    this._path.stop();
};

Progress.prototype.set = function set(progress) {
    this._path.set(progress);
};

Progress.prototype._createSvgView = function _createSvgView(opts) {
    opts = extend({
        color: "#555",
        strokeWidth: 1.0,
        trailColor: null,
        fill: null
    }, opts);

    var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    this._initializeSvg(svg, opts);

    var trailPath = null;
    if (opts.trailColor) {
        var trailOpts = extend({}, opts);
        trailOpts.color = opts.trailColor;

        // When trail path is set, fill must be set for it instead of the
        // actual path to prevent trail stroke from clipping
        opts.fill = null;
        trailPath = this._createPath(trailOpts);
        svg.appendChild(trailPath);
    }

    var path = this._createPath(opts);
    svg.appendChild(path);

    return {
        svg: svg,
        path: path,
        trail: trailPath
    };
};

Progress.prototype._initializeSvg = function _initializeSvg(svg, opts) {
    svg.setAttribute("viewBox", "0 0 100 100");
};

Progress.prototype._createPath = function _createPath(opts) {
    var path = document.createElementNS("http://www.w3.org/2000/svg", "path");
    path.setAttribute("d", this._pathString(opts));
    path.setAttribute("stroke", opts.color);
    path.setAttribute("stroke-width", opts.strokeWidth);

    if (opts.fill) {
        path.setAttribute("fill", opts.fill);
    } else {
        path.setAttribute("fill-opacity", "0");
    }

    return path;
};

Progress.prototype._pathString = function _pathString(opts) {
    throw new Error("Override this function for each progress bar");
};

// Progress bar shapes

var Line = function(container, options) {
    Progress.apply(this, arguments);
};

Line.prototype = new Progress();
Line.prototype.constructor = Line;

Line.prototype._initializeSvg = function _initializeSvg(svg, opts) {
    svg.setAttribute("viewBox", "0 0 100 " + opts.strokeWidth);
    svg.setAttribute("preserveAspectRatio", "none");
};

Line.prototype._pathString = function _pathString(opts) {
    var pathString = "M 0,{c} L 100,{c}";
    var center = opts.strokeWidth / 2;
    pathString = pathString.replace(/\{c\}/g, center);
    return pathString;
};

var Circle = function(container, options) {
    Progress.apply(this, arguments);
};

Circle.prototype = new Progress();
Circle.prototype.constructor = Circle;

Circle.prototype._pathString = function _pathString(opts) {
    // Use two arcs to form a circle
    // See this answer http://stackoverflow.com/a/10477334/1446092
    var pathString = "M 50,50 m 0,-{r} a {r},{r} 0 1 1 0,{r*2} a {r},{r} 0 1 1 0,-{r*2}";
    var r = 50 - opts.strokeWidth / 2;
    pathString = pathString.replace(/\{r\}/g, r);
    pathString = pathString.replace(/\{r\*2\}/g, r * 2);
    return pathString;
};

var Square = function(container, options) {
    Progress.apply(this, arguments);
};

Square.prototype = new Progress();
Square.prototype.constructor = Square;

Square.prototype._pathString = function _pathString(opts) {
    var pathString = "M 0,{s/2} L {w},{s/2} L {w},{w} L {s/2},{w} L {s/2},{s}";
    var w = 100 - opts.strokeWidth / 2;
    pathString = pathString.replace(/\{w\}/g, w);
    pathString = pathString.replace(/\{s\}/g, opts.strokeWidth);
    pathString = pathString.replace(/\{s\/2\}/g, opts.strokeWidth / 2);
    return pathString;
};

// Lower level API to animate any kind of svg path

var Path = function(path, opts) {
    opts = extend({
        duration: 800,
        easing: "linear",
        from: {},
        to: {},
        step: noop
    }, opts);

    this._path = path;
    this._opts = opts;
    this._tweenable = null;

    // Set up the starting positions
    var length = this._path.getTotalLength();
    this._path.style.strokeDasharray = length + ' ' + length;
    this._path.style.strokeDashoffset = length;
};

Path.prototype.set = function set(progress) {
    this.stop();

    var length = this._path.getTotalLength();
    this._path.style.strokeDashoffset = length - progress * length;
};

Path.prototype.stop = function stop() {
    this._stopTween();

    var computedStyle = window.getComputedStyle(this._path, null);
    var offset = computedStyle.getPropertyValue('stroke-dashoffset');
    this._path.style.strokeDashoffset = offset;
};

// Method introduced here:
// http://jakearchibald.com/2013/animated-line-drawing-svg/
Path.prototype.animate = function animate(progress, opts, cb) {
    if (isFunction(opts)) {
        cb = opts;
        opts = {};
    }

    // Copy default opts to new object so defaults are not modified
    var defaultOpts = extend({}, this._opts);
    opts = extend(defaultOpts, opts);

    this.stop();

    // Trigger a layout so styles are calculated & the browser
    // picks up the starting position before animating
    this._path.getBoundingClientRect();

    var computedStyle = window.getComputedStyle(this._path, null);
    var offset = computedStyle.getPropertyValue('stroke-dashoffset');
    // Remove 'px' suffix
    offset = parseFloat(offset, 10);

    var length = this._path.getTotalLength();
    var newOffset = length - progress * length;

    var self = this;

    this._tweenable = new Tweenable();
    this._tweenable.tween({
        from: extend({ offset: offset }, opts.from),
        to: extend({ offset: newOffset }, opts.to),
        duration: opts.duration,
        easing: this._easing(opts.easing),
        step: function(state) {
            self._path.style.strokeDashoffset = state.offset;
            opts.step(state, opts.attachment);
        },
        finish: function(state) {
            // step function is not called on the last step of animation
            self._path.style.strokeDashoffset = state.offset;
            opts.step(state, opts.attachment);

            if (isFunction(cb)) {
                cb();
            }
        }
    });
};

Path.prototype._stopTween = function _stopTween() {
    if (this._tweenable !== null) {
        this._tweenable.stop();
        this._tweenable.dispose();
        this._tweenable = null;
    }
};

Path.prototype._easing = function _easing(easing) {
    if (EASING_ALIASES.hasOwnProperty(easing)) {
        return EASING_ALIASES[easing];
    }

    return easing;
};

// Utility functions

function noop() {}

// Copy all attributes from source object to destination object.
// destination object is mutated.
function extend(destination, source) {
    destination = destination || {};
    source = source || {};

    for (var attrName in source) {
        if (source.hasOwnProperty(attrName)) {
            destination[attrName] = source[attrName];
        }
    }

    return destination;
}

function isString(obj) {
    return typeof obj === 'string' || obj instanceof String;
}

function isFunction(obj) {
    return typeof obj === "function";
}

module.exports = {
    Line: Line,
    Circle: Circle,
    Square: Square,
    Path: Path
};

},{"shifty":"/home/codio/workspace/node_modules/progressbar.js/node_modules/shifty/dist/shifty.js"}],"/home/codio/workspace/node_modules/randomstring/index.js":[function(require,module,exports){
module.exports = require("./lib/randomstring");
},{"./lib/randomstring":"/home/codio/workspace/node_modules/randomstring/lib/randomstring.js"}],"/home/codio/workspace/node_modules/randomstring/lib/randomstring.js":[function(require,module,exports){
var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz';

exports.generate = function(length) {
  length = length ? length : 32;
  
  var string = '';
  
  for (var i = 0; i < length; i++) {
    var randomNumber = Math.floor(Math.random() * chars.length);
    string += chars.substring(randomNumber, randomNumber + 1);
  }
  
  return string;
}
},{}]},{},["./client/scripts/main.js"])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJjbGllbnQvc2NyaXB0cy9tYWluLmpzIiwiYm93ZXJfY29tcG9uZW50cy9hbmd1bGFyLWFuaW1hdGUvYW5ndWxhci1hbmltYXRlLm1pbi5qcyIsImJvd2VyX2NvbXBvbmVudHMvYW5ndWxhci1zYW5pdGl6ZS9hbmd1bGFyLXNhbml0aXplLm1pbi5qcyIsImJvd2VyX2NvbXBvbmVudHMvYW5ndWxhci11aS1yb3V0ZXIvcmVsZWFzZS9hbmd1bGFyLXVpLXJvdXRlci5taW4uanMiLCJib3dlcl9jb21wb25lbnRzL2FuZ3VsYXIvYW5ndWxhci5taW4uanMiLCJib3dlcl9jb21wb25lbnRzL2ZhbW91cy1hbmd1bGFyL2Rpc3QvZmFtb3VzLWFuZ3VsYXIubWluLmpzIiwiYm93ZXJfY29tcG9uZW50cy9mYW1vdXMvZGlzdC9mYW1vdXMtZ2xvYmFsLm1pbi5qcyIsImNsaWVudC9zY3JpcHRzL2NvbW1vbi9jb250cm9sbGVycy9ob21lLmpzIiwiY2xpZW50L3NjcmlwdHMvY29tbW9uL2NvbnRyb2xsZXJzL2luZGV4LmpzIiwiY2xpZW50L3NjcmlwdHMvY29tbW9uL2luZGV4LmpzIiwiY2xpZW50L3NjcmlwdHMvY29tbW9uL3NlcnZpY2VzL2ZhbW91c0hlbHBlci5qcyIsImNsaWVudC9zY3JpcHRzL2NvbW1vbi9zZXJ2aWNlcy9pbmRleC5qcyIsImNsaWVudC9zY3JpcHRzL2NvbW1vbi9zZXJ2aWNlcy9waG90b3MuanMiLCJjbGllbnQvc2NyaXB0cy9jb21tb24vdmlld3MvaG9tZS5odG1sIiwibm9kZV9tb2R1bGVzL2ZhbW91cy1wb2x5ZmlsbHMvY2xhc3NMaXN0LmpzIiwibm9kZV9tb2R1bGVzL2ZhbW91cy1wb2x5ZmlsbHMvZnVuY3Rpb25Qcm90b3R5cGVCaW5kLmpzIiwibm9kZV9tb2R1bGVzL2ZhbW91cy1wb2x5ZmlsbHMvaW5kZXguanMiLCJub2RlX21vZHVsZXMvZmFtb3VzLXBvbHlmaWxscy9yZXF1ZXN0QW5pbWF0aW9uRnJhbWUuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2Rpc3QvbG9kYXNoLmpzIiwibm9kZV9tb2R1bGVzL3Byb2dyZXNzYmFyLmpzL25vZGVfbW9kdWxlcy9zaGlmdHkvZGlzdC9zaGlmdHkuanMiLCJub2RlX21vZHVsZXMvcHJvZ3Jlc3NiYXIuanMvcHJvZ3Jlc3NiYXIuanMiLCJub2RlX21vZHVsZXMvcmFuZG9tc3RyaW5nL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3JhbmRvbXN0cmluZy9saWIvcmFuZG9tc3RyaW5nLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZCQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25vTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2gyQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwU0E7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIndXNlIHN0cmljdCc7XG5cbnZhciBuYW1lc3BhY2UgPSAnbWFpbic7XG5cbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xuXG52YXIgYXBwID0gYW5ndWxhci5tb2R1bGUobmFtZXNwYWNlLCBbXG4gICAgLy8gaW5qZWN0Om1vZHVsZXMgc3RhcnRcblxuICAgIHJlcXVpcmUoJy4vY29tbW9uJykobmFtZXNwYWNlKS5uYW1lXG5cbiAgICAvLyBpbmplY3Q6bW9kdWxlcyBlbmRcbl0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGFwcDsiLCIvKlxuIEFuZ3VsYXJKUyB2MS4yLjI2XG4gKGMpIDIwMTAtMjAxNCBHb29nbGUsIEluYy4gaHR0cDovL2FuZ3VsYXJqcy5vcmdcbiBMaWNlbnNlOiBNSVRcbiovXG4oZnVuY3Rpb24oRixlLE8peyd1c2Ugc3RyaWN0JztlLm1vZHVsZShcIm5nQW5pbWF0ZVwiLFtcIm5nXCJdKS5kaXJlY3RpdmUoXCJuZ0FuaW1hdGVDaGlsZHJlblwiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKEcscyxnKXtnPWcubmdBbmltYXRlQ2hpbGRyZW47ZS5pc1N0cmluZyhnKSYmMD09PWcubGVuZ3RoP3MuZGF0YShcIiQkbmdBbmltYXRlQ2hpbGRyZW5cIiwhMCk6Ry4kd2F0Y2goZyxmdW5jdGlvbihlKXtzLmRhdGEoXCIkJG5nQW5pbWF0ZUNoaWxkcmVuXCIsISFlKX0pfX0pLmZhY3RvcnkoXCIkJGFuaW1hdGVSZWZsb3dcIixbXCIkJHJBRlwiLFwiJGRvY3VtZW50XCIsZnVuY3Rpb24oZSxzKXtyZXR1cm4gZnVuY3Rpb24oZyl7cmV0dXJuIGUoZnVuY3Rpb24oKXtnKCl9KX19XSkuY29uZmlnKFtcIiRwcm92aWRlXCIsXCIkYW5pbWF0ZVByb3ZpZGVyXCIsZnVuY3Rpb24oRyxzKXtmdW5jdGlvbiBnKGUpe2Zvcih2YXIgZz0wO2c8ZS5sZW5ndGg7ZysrKXt2YXIgbD1lW2ddO2lmKGwubm9kZVR5cGU9PWFhKXJldHVybiBsfX1cbmZ1bmN0aW9uIEIobCl7cmV0dXJuIGUuZWxlbWVudChnKGwpKX12YXIgbT1lLm5vb3AsdT1lLmZvckVhY2gsUD1zLiQkc2VsZWN0b3JzLGFhPTEsbD1cIiQkbmdBbmltYXRlU3RhdGVcIixWPVwiJCRuZ0FuaW1hdGVDaGlsZHJlblwiLEo9XCJuZy1hbmltYXRlXCIsbj17cnVubmluZzohMH07Ry5kZWNvcmF0b3IoXCIkYW5pbWF0ZVwiLFtcIiRkZWxlZ2F0ZVwiLFwiJGluamVjdG9yXCIsXCIkc25pZmZlclwiLFwiJHJvb3RFbGVtZW50XCIsXCIkJGFzeW5jQ2FsbGJhY2tcIixcIiRyb290U2NvcGVcIixcIiRkb2N1bWVudFwiLGZ1bmN0aW9uKHosRiwkLFIsRSxILE8pe2Z1bmN0aW9uIEsoYSl7dmFyIGI9YS5kYXRhKGwpfHx7fTtiLnJ1bm5pbmc9ITA7YS5kYXRhKGwsYil9ZnVuY3Rpb24gTChhKXtpZihhKXt2YXIgYj1bXSxjPXt9O2E9YS5zdWJzdHIoMSkuc3BsaXQoXCIuXCIpOygkLnRyYW5zaXRpb25zfHwkLmFuaW1hdGlvbnMpJiZiLnB1c2goRi5nZXQoUFtcIlwiXSkpO2Zvcih2YXIgZD0wO2Q8YS5sZW5ndGg7ZCsrKXt2YXIgZj1cbmFbZF0sZT1QW2ZdO2UmJiFjW2ZdJiYoYi5wdXNoKEYuZ2V0KGUpKSxjW2ZdPSEwKX1yZXR1cm4gYn19ZnVuY3Rpb24gRyhhLGIsYyl7ZnVuY3Rpb24gZChhLGIpe3ZhciBjPWFbYl0sZD1hW1wiYmVmb3JlXCIrYi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStiLnN1YnN0cigxKV07aWYoY3x8ZClyZXR1cm5cImxlYXZlXCI9PWImJihkPWMsYz1udWxsKSxuLnB1c2goe2V2ZW50OmIsZm46Y30pLGgucHVzaCh7ZXZlbnQ6YixmbjpkfSksITB9ZnVuY3Rpb24gZihiLGQsZSl7dmFyIGY9W107dShiLGZ1bmN0aW9uKGEpe2EuZm4mJmYucHVzaChhKX0pO3ZhciBnPTA7dShmLGZ1bmN0aW9uKGIsbCl7dmFyIEM9ZnVuY3Rpb24oKXthOntpZihkKXsoZFtsXXx8bSkoKTtpZigrK2c8Zi5sZW5ndGgpYnJlYWsgYTtkPW51bGx9ZSgpfX07c3dpdGNoKGIuZXZlbnQpe2Nhc2UgXCJzZXRDbGFzc1wiOmQucHVzaChiLmZuKGEsQSxrLEMpKTticmVhaztjYXNlIFwiYWRkQ2xhc3NcIjpkLnB1c2goYi5mbihhLEF8fGMsXG5DKSk7YnJlYWs7Y2FzZSBcInJlbW92ZUNsYXNzXCI6ZC5wdXNoKGIuZm4oYSxrfHxjLEMpKTticmVhaztkZWZhdWx0OmQucHVzaChiLmZuKGEsQykpfX0pO2QmJjA9PT1kLmxlbmd0aCYmZSgpfXZhciBnPWFbMF07aWYoZyl7dmFyIGw9XCJzZXRDbGFzc1wiPT1iLHA9bHx8XCJhZGRDbGFzc1wiPT1ifHxcInJlbW92ZUNsYXNzXCI9PWIsQSxrO2UuaXNBcnJheShjKSYmKEE9Y1swXSxrPWNbMV0sYz1BK1wiIFwiK2spO3ZhciB4PWEuYXR0cihcImNsYXNzXCIpK1wiIFwiK2M7aWYoTSh4KSl7dmFyIHQ9bSx3PVtdLGg9W10scT1tLHk9W10sbj1bXSx4PShcIiBcIit4KS5yZXBsYWNlKC9cXHMrL2csXCIuXCIpO3UoTCh4KSxmdW5jdGlvbihhKXshZChhLGIpJiZsJiYoZChhLFwiYWRkQ2xhc3NcIiksZChhLFwicmVtb3ZlQ2xhc3NcIikpfSk7cmV0dXJue25vZGU6ZyxldmVudDpiLGNsYXNzTmFtZTpjLGlzQ2xhc3NCYXNlZDpwLGlzU2V0Q2xhc3NPcGVyYXRpb246bCxiZWZvcmU6ZnVuY3Rpb24oYSl7dD1hO2YoaCx3LGZ1bmN0aW9uKCl7dD1cbm07YSgpfSl9LGFmdGVyOmZ1bmN0aW9uKGEpe3E9YTtmKG4seSxmdW5jdGlvbigpe3E9bTthKCl9KX0sY2FuY2VsOmZ1bmN0aW9uKCl7dyYmKHUodyxmdW5jdGlvbihhKXsoYXx8bSkoITApfSksdCghMCkpO3kmJih1KHksZnVuY3Rpb24oYSl7KGF8fG0pKCEwKX0pLHEoITApKX19fX19ZnVuY3Rpb24gcihhLGIsYyxkLGYsZyxuKXtmdW5jdGlvbiBwKGQpe3ZhciBlPVwiJGFuaW1hdGU6XCIrZDtxJiYocVtlXSYmMDxxW2VdLmxlbmd0aCkmJkUoZnVuY3Rpb24oKXtjLnRyaWdnZXJIYW5kbGVyKGUse2V2ZW50OmEsY2xhc3NOYW1lOmJ9KX0pfWZ1bmN0aW9uIEEoKXtwKFwiYmVmb3JlXCIpfWZ1bmN0aW9uIG0oKXtwKFwiYWZ0ZXJcIil9ZnVuY3Rpb24geCgpe3AoXCJjbG9zZVwiKTtuJiZFKGZ1bmN0aW9uKCl7bigpfSl9ZnVuY3Rpb24gdCgpe3QuaGFzQmVlblJ1bnx8KHQuaGFzQmVlblJ1bj0hMCxnKCkpfWZ1bmN0aW9uIHcoKXtpZighdy5oYXNCZWVuUnVuKXt3Lmhhc0JlZW5SdW49ITA7dmFyIGQ9XG5jLmRhdGEobCk7ZCYmKGgmJmguaXNDbGFzc0Jhc2VkP2soYyxiKTooRShmdW5jdGlvbigpe3ZhciBkPWMuZGF0YShsKXx8e307cj09ZC5pbmRleCYmayhjLGIsYSl9KSxjLmRhdGEobCxkKSkpO3goKX19dmFyIGg9RyhjLGEsYik7aWYoaCl7Yj1oLmNsYXNzTmFtZTt2YXIgcT1lLmVsZW1lbnQuX2RhdGEoaC5ub2RlKSxxPXEmJnEuZXZlbnRzO2R8fChkPWY/Zi5wYXJlbnQoKTpjLnBhcmVudCgpKTt2YXIgeT1jLmRhdGEobCl8fHt9O2Y9eS5hY3RpdmV8fHt9O3ZhciB6PXkudG90YWxBY3RpdmV8fDAsQz15Lmxhc3QsRDtoLmlzQ2xhc3NCYXNlZCYmKEQ9eS5ydW5uaW5nfHx5LmRpc2FibGVkfHxDJiYhQy5pc0NsYXNzQmFzZWQpO2lmKER8fE4oYyxkKSl0KCksQSgpLG0oKSx3KCk7ZWxzZXtkPSExO2lmKDA8eil7RD1bXTtpZihoLmlzQ2xhc3NCYXNlZClcInNldENsYXNzXCI9PUMuZXZlbnQ/KEQucHVzaChDKSxrKGMsYikpOmZbYl0mJih2PWZbYl0sdi5ldmVudD09YT9kPSEwOihELnB1c2godiksXG5rKGMsYikpKTtlbHNlIGlmKFwibGVhdmVcIj09YSYmZltcIm5nLWxlYXZlXCJdKWQ9ITA7ZWxzZXtmb3IodmFyIHYgaW4gZilELnB1c2goZlt2XSksayhjLHYpO2Y9e307ej0wfTA8RC5sZW5ndGgmJnUoRCxmdW5jdGlvbihhKXthLmNhbmNlbCgpfSl9IWguaXNDbGFzc0Jhc2VkfHwoaC5pc1NldENsYXNzT3BlcmF0aW9ufHxkKXx8KGQ9XCJhZGRDbGFzc1wiPT1hPT1jLmhhc0NsYXNzKGIpKTtpZihkKXQoKSxBKCksbSgpLHgoKTtlbHNle2lmKFwibGVhdmVcIj09YSljLm9uZShcIiRkZXN0cm95XCIsZnVuY3Rpb24oYSl7YT1lLmVsZW1lbnQodGhpcyk7dmFyIGI9YS5kYXRhKGwpO2ImJihiPWIuYWN0aXZlW1wibmctbGVhdmVcIl0pJiYoYi5jYW5jZWwoKSxrKGEsXCJuZy1sZWF2ZVwiKSl9KTtjLmFkZENsYXNzKEopO3ZhciByPVkrKzt6Kys7ZltiXT1oO2MuZGF0YShsLHtsYXN0OmgsYWN0aXZlOmYsaW5kZXg6cix0b3RhbEFjdGl2ZTp6fSk7QSgpO2guYmVmb3JlKGZ1bmN0aW9uKGQpe3ZhciBlPWMuZGF0YShsKTtcbmQ9ZHx8IWV8fCFlLmFjdGl2ZVtiXXx8aC5pc0NsYXNzQmFzZWQmJmUuYWN0aXZlW2JdLmV2ZW50IT1hO3QoKTshMD09PWQ/dygpOihtKCksaC5hZnRlcih3KSl9KX19fWVsc2UgdCgpLEEoKSxtKCksdygpfWZ1bmN0aW9uIFQoYSl7aWYoYT1nKGEpKWE9ZS5pc0Z1bmN0aW9uKGEuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSk/YS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKEopOmEucXVlcnlTZWxlY3RvckFsbChcIi5cIitKKSx1KGEsZnVuY3Rpb24oYSl7YT1lLmVsZW1lbnQoYSk7KGE9YS5kYXRhKGwpKSYmYS5hY3RpdmUmJnUoYS5hY3RpdmUsZnVuY3Rpb24oYSl7YS5jYW5jZWwoKX0pfSl9ZnVuY3Rpb24gayhhLGIpe2lmKGcoYSk9PWcoUikpbi5kaXNhYmxlZHx8KG4ucnVubmluZz0hMSxuLnN0cnVjdHVyYWw9ITEpO2Vsc2UgaWYoYil7dmFyIGM9YS5kYXRhKGwpfHx7fSxkPSEwPT09YjshZCYmKGMuYWN0aXZlJiZjLmFjdGl2ZVtiXSkmJihjLnRvdGFsQWN0aXZlLS0sZGVsZXRlIGMuYWN0aXZlW2JdKTtcbmlmKGR8fCFjLnRvdGFsQWN0aXZlKWEucmVtb3ZlQ2xhc3MoSiksYS5yZW1vdmVEYXRhKGwpfX1mdW5jdGlvbiBOKGEsYil7aWYobi5kaXNhYmxlZClyZXR1cm4hMDtpZihnKGEpPT1nKFIpKXJldHVybiBuLnJ1bm5pbmc7dmFyIGMsZCxmO2Rve2lmKDA9PT1iLmxlbmd0aClicmVhazt2YXIgbT1nKGIpPT1nKFIpLGs9bT9uOmIuZGF0YShsKXx8e307aWYoay5kaXNhYmxlZClyZXR1cm4hMDttJiYoZj0hMCk7ITEhPT1jJiYobT1iLmRhdGEoViksZS5pc0RlZmluZWQobSkmJihjPW0pKTtkPWR8fGsucnVubmluZ3x8ay5sYXN0JiYhay5sYXN0LmlzQ2xhc3NCYXNlZH13aGlsZShiPWIucGFyZW50KCkpO3JldHVybiFmfHwhYyYmZH12YXIgWT0wO1IuZGF0YShsLG4pO0guJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCl7SC4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKXtuLnJ1bm5pbmc9ITF9KX0pO3ZhciBRPXMuY2xhc3NOYW1lRmlsdGVyKCksTT1RP2Z1bmN0aW9uKGEpe3JldHVybiBRLnRlc3QoYSl9OlxuZnVuY3Rpb24oKXtyZXR1cm4hMH07cmV0dXJue2VudGVyOmZ1bmN0aW9uKGEsYixjLGQpe2E9ZS5lbGVtZW50KGEpO2I9YiYmZS5lbGVtZW50KGIpO2M9YyYmZS5lbGVtZW50KGMpO0soYSk7ei5lbnRlcihhLGIsYyk7SC4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKXthPUIoYSk7cihcImVudGVyXCIsXCJuZy1lbnRlclwiLGEsYixjLG0sZCl9KX0sbGVhdmU6ZnVuY3Rpb24oYSxiKXthPWUuZWxlbWVudChhKTtUKGEpO0soYSk7SC4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKXtyKFwibGVhdmVcIixcIm5nLWxlYXZlXCIsQihhKSxudWxsLG51bGwsZnVuY3Rpb24oKXt6LmxlYXZlKGEpfSxiKX0pfSxtb3ZlOmZ1bmN0aW9uKGEsYixjLGQpe2E9ZS5lbGVtZW50KGEpO2I9YiYmZS5lbGVtZW50KGIpO2M9YyYmZS5lbGVtZW50KGMpO1QoYSk7SyhhKTt6Lm1vdmUoYSxiLGMpO0guJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCl7YT1CKGEpO3IoXCJtb3ZlXCIsXCJuZy1tb3ZlXCIsYSxiLGMsbSxkKX0pfSxhZGRDbGFzczpmdW5jdGlvbihhLFxuYixjKXthPWUuZWxlbWVudChhKTthPUIoYSk7cihcImFkZENsYXNzXCIsYixhLG51bGwsbnVsbCxmdW5jdGlvbigpe3ouYWRkQ2xhc3MoYSxiKX0sYyl9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGEsYixjKXthPWUuZWxlbWVudChhKTthPUIoYSk7cihcInJlbW92ZUNsYXNzXCIsYixhLG51bGwsbnVsbCxmdW5jdGlvbigpe3oucmVtb3ZlQ2xhc3MoYSxiKX0sYyl9LHNldENsYXNzOmZ1bmN0aW9uKGEsYixjLGQpe2E9ZS5lbGVtZW50KGEpO2E9QihhKTtyKFwic2V0Q2xhc3NcIixbYixjXSxhLG51bGwsbnVsbCxmdW5jdGlvbigpe3ouc2V0Q2xhc3MoYSxiLGMpfSxkKX0sZW5hYmxlZDpmdW5jdGlvbihhLGIpe3N3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtjYXNlIDI6aWYoYSlrKGIpO2Vsc2V7dmFyIGM9Yi5kYXRhKGwpfHx7fTtjLmRpc2FibGVkPSEwO2IuZGF0YShsLGMpfWJyZWFrO2Nhc2UgMTpuLmRpc2FibGVkPSFhO2JyZWFrO2RlZmF1bHQ6YT0hbi5kaXNhYmxlZH1yZXR1cm4hIWF9fX1dKTtzLnJlZ2lzdGVyKFwiXCIsXG5bXCIkd2luZG93XCIsXCIkc25pZmZlclwiLFwiJHRpbWVvdXRcIixcIiQkYW5pbWF0ZVJlZmxvd1wiLGZ1bmN0aW9uKGwsbixzLEIpe2Z1bmN0aW9uIEUoYSxVKXtTJiZTKCk7Vy5wdXNoKFUpO1M9QihmdW5jdGlvbigpe3UoVyxmdW5jdGlvbihhKXthKCl9KTtXPVtdO1M9bnVsbDt2PXt9fSl9ZnVuY3Rpb24gSChhLFUpe3ZhciBiPWcoYSk7YT1lLmVsZW1lbnQoYik7Wi5wdXNoKGEpO2I9RGF0ZS5ub3coKStVO2I8PWRhfHwocy5jYW5jZWwoY2EpLGRhPWIsY2E9cyhmdW5jdGlvbigpe0coWik7Wj1bXX0sVSwhMSkpfWZ1bmN0aW9uIEcoYSl7dShhLGZ1bmN0aW9uKGEpeyhhPWEuZGF0YShxKSkmJihhLmNsb3NlQW5pbWF0aW9uRm58fG0pKCl9KX1mdW5jdGlvbiBLKGEsYil7dmFyIGM9Yj92W2JdOm51bGw7aWYoIWMpe3ZhciBkPTAsZT0wLGY9MCxnPTAsbSxrLGgscTt1KGEsZnVuY3Rpb24oYSl7aWYoYS5ub2RlVHlwZT09YWEpe2E9bC5nZXRDb21wdXRlZFN0eWxlKGEpfHx7fTtoPWFbSStQXTtkPVxuTWF0aC5tYXgoTChoKSxkKTtxPWFbSSt4XTttPWFbSSt0XTtlPU1hdGgubWF4KEwobSksZSk7az1hW3ArdF07Zz1NYXRoLm1heChMKGspLGcpO3ZhciBiPUwoYVtwK1BdKTswPGImJihiKj1wYXJzZUludChhW3Ard10sMTApfHwxKTtmPU1hdGgubWF4KGIsZil9fSk7Yz17dG90YWw6MCx0cmFuc2l0aW9uUHJvcGVydHlTdHlsZTpxLHRyYW5zaXRpb25EdXJhdGlvblN0eWxlOmgsdHJhbnNpdGlvbkRlbGF5U3R5bGU6bSx0cmFuc2l0aW9uRGVsYXk6ZSx0cmFuc2l0aW9uRHVyYXRpb246ZCxhbmltYXRpb25EZWxheVN0eWxlOmssYW5pbWF0aW9uRGVsYXk6ZyxhbmltYXRpb25EdXJhdGlvbjpmfTtiJiYodltiXT1jKX1yZXR1cm4gY31mdW5jdGlvbiBMKGEpe3ZhciBiPTA7YT1lLmlzU3RyaW5nKGEpP2Euc3BsaXQoL1xccyosXFxzKi8pOltdO3UoYSxmdW5jdGlvbihhKXtiPU1hdGgubWF4KHBhcnNlRmxvYXQoYSl8fDAsYil9KTtyZXR1cm4gYn1mdW5jdGlvbiBKKGEpe3ZhciBiPWEucGFyZW50KCksXG5jPWIuZGF0YShoKTtjfHwoYi5kYXRhKGgsKytiYSksYz1iYSk7cmV0dXJuIGMrXCItXCIrZyhhKS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKX1mdW5jdGlvbiByKGEsYixjLGQpe3ZhciBlPUooYiksZj1lK1wiIFwiK2MsbD12W2ZdPysrdltmXS50b3RhbDowLGs9e307aWYoMDxsKXt2YXIgaD1jK1wiLXN0YWdnZXJcIixrPWUrXCIgXCIraDsoZT0hdltrXSkmJmIuYWRkQ2xhc3MoaCk7az1LKGIsayk7ZSYmYi5yZW1vdmVDbGFzcyhoKX1kPWR8fGZ1bmN0aW9uKGEpe3JldHVybiBhKCl9O2IuYWRkQ2xhc3MoYyk7dmFyIGg9Yi5kYXRhKHEpfHx7fSxuPWQoZnVuY3Rpb24oKXtyZXR1cm4gSyhiLGYpfSk7ZD1uLnRyYW5zaXRpb25EdXJhdGlvbjtlPW4uYW5pbWF0aW9uRHVyYXRpb247aWYoMD09PWQmJjA9PT1lKXJldHVybiBiLnJlbW92ZUNsYXNzKGMpLCExO2IuZGF0YShxLHtydW5uaW5nOmgucnVubmluZ3x8MCxpdGVtSW5kZXg6bCxzdGFnZ2VyOmssdGltaW5nczpuLGNsb3NlQW5pbWF0aW9uRm46bX0pO1xuYT0wPGgucnVubmluZ3x8XCJzZXRDbGFzc1wiPT1hOzA8ZCYmVChiLGMsYSk7MDxlJiYoMDxrLmFuaW1hdGlvbkRlbGF5JiYwPT09ay5hbmltYXRpb25EdXJhdGlvbikmJihnKGIpLnN0eWxlW3BdPVwibm9uZSAwc1wiKTtyZXR1cm4hMH1mdW5jdGlvbiBUKGEsYixjKXtcIm5nLWVudGVyXCIhPWImJihcIm5nLW1vdmVcIiE9YiYmXCJuZy1sZWF2ZVwiIT1iKSYmYz9hLmFkZENsYXNzKHkpOmcoYSkuc3R5bGVbSSt4XT1cIm5vbmVcIn1mdW5jdGlvbiBrKGEsYil7dmFyIGM9SSt4LGQ9ZyhhKTtkLnN0eWxlW2NdJiYwPGQuc3R5bGVbY10ubGVuZ3RoJiYoZC5zdHlsZVtjXT1cIlwiKTthLnJlbW92ZUNsYXNzKHkpfWZ1bmN0aW9uIE4oYSl7dmFyIGI9cDthPWcoYSk7YS5zdHlsZVtiXSYmMDxhLnN0eWxlW2JdLmxlbmd0aCYmKGEuc3R5bGVbYl09XCJcIil9ZnVuY3Rpb24gWShhLGIsZCxlKXtmdW5jdGlvbiBrKGEpe2Iub2ZmKHgsbCk7Yi5yZW1vdmVDbGFzcyhtKTtjKGIsZCk7YT1nKGIpO2Zvcih2YXIgZSBpbiBzKWEuc3R5bGUucmVtb3ZlUHJvcGVydHkoc1tlXSl9XG5mdW5jdGlvbiBsKGEpe2Euc3RvcFByb3BhZ2F0aW9uKCk7dmFyIGI9YS5vcmlnaW5hbEV2ZW50fHxhO2E9Yi4kbWFudWFsVGltZVN0YW1wfHxiLnRpbWVTdGFtcHx8RGF0ZS5ub3coKTtiPXBhcnNlRmxvYXQoYi5lbGFwc2VkVGltZS50b0ZpeGVkKFYpKTtNYXRoLm1heChhLXosMCk+PXkmJmI+PXYmJmUoKX12YXIgaD1nKGIpO2E9Yi5kYXRhKHEpO2lmKC0xIT1oLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpLmluZGV4T2YoZCkmJmEpe3ZhciBtPVwiXCI7dShkLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhLGIpe20rPSgwPGI/XCIgXCI6XCJcIikrYStcIi1hY3RpdmVcIn0pO3ZhciBuPWEuc3RhZ2dlcixwPWEudGltaW5ncyx0PWEuaXRlbUluZGV4LHY9TWF0aC5tYXgocC50cmFuc2l0aW9uRHVyYXRpb24scC5hbmltYXRpb25EdXJhdGlvbiksdz1NYXRoLm1heChwLnRyYW5zaXRpb25EZWxheSxwLmFuaW1hdGlvbkRlbGF5KSx5PXcqRCx6PURhdGUubm93KCkseD1BK1wiIFwiK1gscj1cIlwiLHM9W107aWYoMDxwLnRyYW5zaXRpb25EdXJhdGlvbil7dmFyIEI9XG5wLnRyYW5zaXRpb25Qcm9wZXJ0eVN0eWxlOy0xPT1CLmluZGV4T2YoXCJhbGxcIikmJihyKz1mK1widHJhbnNpdGlvbi1wcm9wZXJ0eTogXCIrQitcIjtcIixyKz1mK1widHJhbnNpdGlvbi1kdXJhdGlvbjogXCIrcC50cmFuc2l0aW9uRHVyYXRpb25TdHlsZStcIjtcIixzLnB1c2goZitcInRyYW5zaXRpb24tcHJvcGVydHlcIikscy5wdXNoKGYrXCJ0cmFuc2l0aW9uLWR1cmF0aW9uXCIpKX0wPHQmJigwPG4udHJhbnNpdGlvbkRlbGF5JiYwPT09bi50cmFuc2l0aW9uRHVyYXRpb24mJihyKz1mK1widHJhbnNpdGlvbi1kZWxheTogXCIrUShwLnRyYW5zaXRpb25EZWxheVN0eWxlLG4udHJhbnNpdGlvbkRlbGF5LHQpK1wiOyBcIixzLnB1c2goZitcInRyYW5zaXRpb24tZGVsYXlcIikpLDA8bi5hbmltYXRpb25EZWxheSYmMD09PW4uYW5pbWF0aW9uRHVyYXRpb24mJihyKz1mK1wiYW5pbWF0aW9uLWRlbGF5OiBcIitRKHAuYW5pbWF0aW9uRGVsYXlTdHlsZSxuLmFuaW1hdGlvbkRlbGF5LHQpK1wiOyBcIixzLnB1c2goZitcImFuaW1hdGlvbi1kZWxheVwiKSkpO1xuMDxzLmxlbmd0aCYmKHA9aC5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKXx8XCJcIixoLnNldEF0dHJpYnV0ZShcInN0eWxlXCIscCtcIjsgXCIrcikpO2Iub24oeCxsKTtiLmFkZENsYXNzKG0pO2EuY2xvc2VBbmltYXRpb25Gbj1mdW5jdGlvbigpe2soKTtlKCl9O2g9KHQqKE1hdGgubWF4KG4uYW5pbWF0aW9uRGVsYXksbi50cmFuc2l0aW9uRGVsYXkpfHwwKSsodyt2KSpDKSpEO2EucnVubmluZysrO0goYixoKTtyZXR1cm4ga31lKCl9ZnVuY3Rpb24gUShhLGIsYyl7dmFyIGQ9XCJcIjt1KGEuc3BsaXQoXCIsXCIpLGZ1bmN0aW9uKGEsZSl7ZCs9KDA8ZT9cIixcIjpcIlwiKSsoYypiK3BhcnNlSW50KGEsMTApKStcInNcIn0pO3JldHVybiBkfWZ1bmN0aW9uIE0oYSxiLGQsZSl7aWYocihhLGIsZCxlKSlyZXR1cm4gZnVuY3Rpb24oYSl7YSYmYyhiLGQpfX1mdW5jdGlvbiBhKGEsYixkLGUpe2lmKGIuZGF0YShxKSlyZXR1cm4gWShhLGIsZCxlKTtjKGIsZCk7ZSgpfWZ1bmN0aW9uIGIoYixjLGQsZSl7dmFyIGY9TShiLFxuYyxkKTtpZihmKXt2YXIgZz1mO0UoYyxmdW5jdGlvbigpe2soYyxkKTtOKGMpO2c9YShiLGMsZCxlKX0pO3JldHVybiBmdW5jdGlvbihhKXsoZ3x8bSkoYSl9fWUoKX1mdW5jdGlvbiBjKGEsYil7YS5yZW1vdmVDbGFzcyhiKTt2YXIgYz1hLmRhdGEocSk7YyYmKGMucnVubmluZyYmYy5ydW5uaW5nLS0sYy5ydW5uaW5nJiYwIT09Yy5ydW5uaW5nfHxhLnJlbW92ZURhdGEocSkpfWZ1bmN0aW9uIGQoYSxiKXt2YXIgYz1cIlwiO2E9ZS5pc0FycmF5KGEpP2E6YS5zcGxpdCgvXFxzKy8pO3UoYSxmdW5jdGlvbihhLGQpe2EmJjA8YS5sZW5ndGgmJihjKz0oMDxkP1wiIFwiOlwiXCIpK2ErYil9KTtyZXR1cm4gY312YXIgZj1cIlwiLEksWCxwLEE7Ri5vbnRyYW5zaXRpb25lbmQ9PT1PJiZGLm9ud2Via2l0dHJhbnNpdGlvbmVuZCE9PU8/KGY9XCItd2Via2l0LVwiLEk9XCJXZWJraXRUcmFuc2l0aW9uXCIsWD1cIndlYmtpdFRyYW5zaXRpb25FbmQgdHJhbnNpdGlvbmVuZFwiKTooST1cInRyYW5zaXRpb25cIixYPVwidHJhbnNpdGlvbmVuZFwiKTtcbkYub25hbmltYXRpb25lbmQ9PT1PJiZGLm9ud2Via2l0YW5pbWF0aW9uZW5kIT09Tz8oZj1cIi13ZWJraXQtXCIscD1cIldlYmtpdEFuaW1hdGlvblwiLEE9XCJ3ZWJraXRBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kXCIpOihwPVwiYW5pbWF0aW9uXCIsQT1cImFuaW1hdGlvbmVuZFwiKTt2YXIgUD1cIkR1cmF0aW9uXCIseD1cIlByb3BlcnR5XCIsdD1cIkRlbGF5XCIsdz1cIkl0ZXJhdGlvbkNvdW50XCIsaD1cIiQkbmdBbmltYXRlS2V5XCIscT1cIiQkbmdBbmltYXRlQ1NTM0RhdGFcIix5PVwibmctYW5pbWF0ZS1ibG9jay10cmFuc2l0aW9uc1wiLFY9MyxDPTEuNSxEPTFFMyx2PXt9LGJhPTAsVz1bXSxTLGNhPW51bGwsZGE9MCxaPVtdO3JldHVybntlbnRlcjpmdW5jdGlvbihhLGMpe3JldHVybiBiKFwiZW50ZXJcIixhLFwibmctZW50ZXJcIixjKX0sbGVhdmU6ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYihcImxlYXZlXCIsYSxcIm5nLWxlYXZlXCIsYyl9LG1vdmU6ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYihcIm1vdmVcIixhLFwibmctbW92ZVwiLFxuYyl9LGJlZm9yZVNldENsYXNzOmZ1bmN0aW9uKGEsYixjLGUpe3ZhciBmPWQoYyxcIi1yZW1vdmVcIikrXCIgXCIrZChiLFwiLWFkZFwiKSxnPU0oXCJzZXRDbGFzc1wiLGEsZixmdW5jdGlvbihkKXt2YXIgZT1hLmF0dHIoXCJjbGFzc1wiKTthLnJlbW92ZUNsYXNzKGMpO2EuYWRkQ2xhc3MoYik7ZD1kKCk7YS5hdHRyKFwiY2xhc3NcIixlKTtyZXR1cm4gZH0pO2lmKGcpcmV0dXJuIEUoYSxmdW5jdGlvbigpe2soYSxmKTtOKGEpO2UoKX0pLGc7ZSgpfSxiZWZvcmVBZGRDbGFzczpmdW5jdGlvbihhLGIsYyl7dmFyIGU9TShcImFkZENsYXNzXCIsYSxkKGIsXCItYWRkXCIpLGZ1bmN0aW9uKGMpe2EuYWRkQ2xhc3MoYik7Yz1jKCk7YS5yZW1vdmVDbGFzcyhiKTtyZXR1cm4gY30pO2lmKGUpcmV0dXJuIEUoYSxmdW5jdGlvbigpe2soYSxiKTtOKGEpO2MoKX0pLGU7YygpfSxzZXRDbGFzczpmdW5jdGlvbihiLGMsZSxmKXtlPWQoZSxcIi1yZW1vdmVcIik7Yz1kKGMsXCItYWRkXCIpO3JldHVybiBhKFwic2V0Q2xhc3NcIixiLFxuZStcIiBcIitjLGYpfSxhZGRDbGFzczpmdW5jdGlvbihiLGMsZSl7cmV0dXJuIGEoXCJhZGRDbGFzc1wiLGIsZChjLFwiLWFkZFwiKSxlKX0sYmVmb3JlUmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSxiLGMpe3ZhciBlPU0oXCJyZW1vdmVDbGFzc1wiLGEsZChiLFwiLXJlbW92ZVwiKSxmdW5jdGlvbihjKXt2YXIgZD1hLmF0dHIoXCJjbGFzc1wiKTthLnJlbW92ZUNsYXNzKGIpO2M9YygpO2EuYXR0cihcImNsYXNzXCIsZCk7cmV0dXJuIGN9KTtpZihlKXJldHVybiBFKGEsZnVuY3Rpb24oKXtrKGEsYik7TihhKTtjKCl9KSxlO2MoKX0scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYixjLGUpe3JldHVybiBhKFwicmVtb3ZlQ2xhc3NcIixiLGQoYyxcIi1yZW1vdmVcIiksZSl9fX1dKX1dKX0pKHdpbmRvdyx3aW5kb3cuYW5ndWxhcik7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hbmd1bGFyLWFuaW1hdGUubWluLmpzLm1hcFxuIiwiLypcbiBBbmd1bGFySlMgdjEuMi4yNlxuIChjKSAyMDEwLTIwMTQgR29vZ2xlLCBJbmMuIGh0dHA6Ly9hbmd1bGFyanMub3JnXG4gTGljZW5zZTogTUlUXG4qL1xuKGZ1bmN0aW9uKHEsZyxyKXsndXNlIHN0cmljdCc7ZnVuY3Rpb24gRihhKXt2YXIgZD1bXTt0KGQsZy5ub29wKS5jaGFycyhhKTtyZXR1cm4gZC5qb2luKFwiXCIpfWZ1bmN0aW9uIG0oYSl7dmFyIGQ9e307YT1hLnNwbGl0KFwiLFwiKTt2YXIgYztmb3IoYz0wO2M8YS5sZW5ndGg7YysrKWRbYVtjXV09ITA7cmV0dXJuIGR9ZnVuY3Rpb24gRyhhLGQpe2Z1bmN0aW9uIGMoYSxiLGMsaCl7Yj1nLmxvd2VyY2FzZShiKTtpZih1W2JdKWZvcig7Zi5sYXN0KCkmJnZbZi5sYXN0KCldOyllKFwiXCIsZi5sYXN0KCkpO3dbYl0mJmYubGFzdCgpPT1iJiZlKFwiXCIsYik7KGg9eFtiXXx8ISFoKXx8Zi5wdXNoKGIpO3ZhciBuPXt9O2MucmVwbGFjZShILGZ1bmN0aW9uKGEsYixkLGMsZSl7bltiXT1zKGR8fGN8fGV8fFwiXCIpfSk7ZC5zdGFydCYmZC5zdGFydChiLG4saCl9ZnVuY3Rpb24gZShhLGIpe3ZhciBjPTAsZTtpZihiPWcubG93ZXJjYXNlKGIpKWZvcihjPWYubGVuZ3RoLTE7MDw9YyYmZltjXSE9YjtjLS0pO1xuaWYoMDw9Yyl7Zm9yKGU9Zi5sZW5ndGgtMTtlPj1jO2UtLSlkLmVuZCYmZC5lbmQoZltlXSk7Zi5sZW5ndGg9Y319XCJzdHJpbmdcIiE9PXR5cGVvZiBhJiYoYT1udWxsPT09YXx8XCJ1bmRlZmluZWRcIj09PXR5cGVvZiBhP1wiXCI6XCJcIithKTt2YXIgYixsLGY9W10sbj1hLGg7Zm9yKGYubGFzdD1mdW5jdGlvbigpe3JldHVybiBmW2YubGVuZ3RoLTFdfTthOyl7aD1cIlwiO2w9ITA7aWYoZi5sYXN0KCkmJnlbZi5sYXN0KCldKWE9YS5yZXBsYWNlKFJlZ0V4cChcIiguKik8XFxcXHMqXFxcXC9cXFxccypcIitmLmxhc3QoKStcIltePl0qPlwiLFwiaVwiKSxmdW5jdGlvbihhLGIpe2I9Yi5yZXBsYWNlKEksXCIkMVwiKS5yZXBsYWNlKEosXCIkMVwiKTtkLmNoYXJzJiZkLmNoYXJzKHMoYikpO3JldHVyblwiXCJ9KSxlKFwiXCIsZi5sYXN0KCkpO2Vsc2V7aWYoMD09PWEuaW5kZXhPZihcIlxceDNjIS0tXCIpKWI9YS5pbmRleE9mKFwiLS1cIiw0KSwwPD1iJiZhLmxhc3RJbmRleE9mKFwiLS1cXHgzZVwiLGIpPT09YiYmKGQuY29tbWVudCYmZC5jb21tZW50KGEuc3Vic3RyaW5nKDQsXG5iKSksYT1hLnN1YnN0cmluZyhiKzMpLGw9ITEpO2Vsc2UgaWYoei50ZXN0KGEpKXtpZihiPWEubWF0Y2goeikpYT1hLnJlcGxhY2UoYlswXSxcIlwiKSxsPSExfWVsc2UgaWYoSy50ZXN0KGEpKXtpZihiPWEubWF0Y2goQSkpYT1hLnN1YnN0cmluZyhiWzBdLmxlbmd0aCksYlswXS5yZXBsYWNlKEEsZSksbD0hMX1lbHNlIEwudGVzdChhKSYmKChiPWEubWF0Y2goQikpPyhiWzRdJiYoYT1hLnN1YnN0cmluZyhiWzBdLmxlbmd0aCksYlswXS5yZXBsYWNlKEIsYykpLGw9ITEpOihoKz1cIjxcIixhPWEuc3Vic3RyaW5nKDEpKSk7bCYmKGI9YS5pbmRleE9mKFwiPFwiKSxoKz0wPmI/YTphLnN1YnN0cmluZygwLGIpLGE9MD5iP1wiXCI6YS5zdWJzdHJpbmcoYiksZC5jaGFycyYmZC5jaGFycyhzKGgpKSl9aWYoYT09bil0aHJvdyBNKFwiYmFkcGFyc2VcIixhKTtuPWF9ZSgpfWZ1bmN0aW9uIHMoYSl7aWYoIWEpcmV0dXJuXCJcIjt2YXIgZD1OLmV4ZWMoYSk7YT1kWzFdO3ZhciBjPWRbM107aWYoZD1kWzJdKXAuaW5uZXJIVE1MPVxuZC5yZXBsYWNlKC88L2csXCImbHQ7XCIpLGQ9XCJ0ZXh0Q29udGVudFwiaW4gcD9wLnRleHRDb250ZW50OnAuaW5uZXJUZXh0O3JldHVybiBhK2QrY31mdW5jdGlvbiBDKGEpe3JldHVybiBhLnJlcGxhY2UoLyYvZyxcIiZhbXA7XCIpLnJlcGxhY2UoTyxmdW5jdGlvbihhKXt2YXIgYz1hLmNoYXJDb2RlQXQoMCk7YT1hLmNoYXJDb2RlQXQoMSk7cmV0dXJuXCImI1wiKygxMDI0KihjLTU1Mjk2KSsoYS01NjMyMCkrNjU1MzYpK1wiO1wifSkucmVwbGFjZShQLGZ1bmN0aW9uKGEpe3JldHVyblwiJiNcIithLmNoYXJDb2RlQXQoMCkrXCI7XCJ9KS5yZXBsYWNlKC88L2csXCImbHQ7XCIpLnJlcGxhY2UoLz4vZyxcIiZndDtcIil9ZnVuY3Rpb24gdChhLGQpe3ZhciBjPSExLGU9Zy5iaW5kKGEsYS5wdXNoKTtyZXR1cm57c3RhcnQ6ZnVuY3Rpb24oYSxsLGYpe2E9Zy5sb3dlcmNhc2UoYSk7IWMmJnlbYV0mJihjPWEpO2N8fCEwIT09RFthXXx8KGUoXCI8XCIpLGUoYSksZy5mb3JFYWNoKGwsZnVuY3Rpb24oYyxmKXt2YXIgaz1cbmcubG93ZXJjYXNlKGYpLGw9XCJpbWdcIj09PWEmJlwic3JjXCI9PT1rfHxcImJhY2tncm91bmRcIj09PWs7ITAhPT1RW2tdfHwhMD09PUVba10mJiFkKGMsbCl8fChlKFwiIFwiKSxlKGYpLGUoJz1cIicpLGUoQyhjKSksZSgnXCInKSl9KSxlKGY/XCIvPlwiOlwiPlwiKSl9LGVuZDpmdW5jdGlvbihhKXthPWcubG93ZXJjYXNlKGEpO2N8fCEwIT09RFthXXx8KGUoXCI8L1wiKSxlKGEpLGUoXCI+XCIpKTthPT1jJiYoYz0hMSl9LGNoYXJzOmZ1bmN0aW9uKGEpe2N8fGUoQyhhKSl9fX12YXIgTT1nLiQkbWluRXJyKFwiJHNhbml0aXplXCIpLEI9L148KCg/OlthLXpBLVpdKVtcXHc6LV0qKSgoPzpcXHMrW1xcdzotXSsoPzpcXHMqPVxccyooPzooPzpcIlteXCJdKlwiKXwoPzonW14nXSonKXxbXj5cXHNdKykpPykqKVxccyooXFwvPylcXHMqKD4/KS8sQT0vXjxcXC9cXHMqKFtcXHc6LV0rKVtePl0qPi8sSD0vKFtcXHc6LV0rKSg/Olxccyo9XFxzKig/Oig/OlwiKCg/OlteXCJdKSopXCIpfCg/OicoKD86W14nXSkqKScpfChbXj5cXHNdKykpKT8vZyxMPS9ePC8sXG5LPS9ePFxcLy8sST0vXFx4M2MhLS0oLio/KS0tXFx4M2UvZyx6PS88IURPQ1RZUEUoW14+XSo/KT4vaSxKPS88IVxcW0NEQVRBXFxbKC4qPyldXVxceDNlL2csTz0vW1xcdUQ4MDAtXFx1REJGRl1bXFx1REMwMC1cXHVERkZGXS9nLFA9LyhbXlxcIy1+fCB8IV0pL2cseD1tKFwiYXJlYSxicixjb2wsaHIsaW1nLHdiclwiKTtxPW0oXCJjb2xncm91cCxkZCxkdCxsaSxwLHRib2R5LHRkLHRmb290LHRoLHRoZWFkLHRyXCIpO3I9bShcInJwLHJ0XCIpO3ZhciB3PWcuZXh0ZW5kKHt9LHIscSksdT1nLmV4dGVuZCh7fSxxLG0oXCJhZGRyZXNzLGFydGljbGUsYXNpZGUsYmxvY2txdW90ZSxjYXB0aW9uLGNlbnRlcixkZWwsZGlyLGRpdixkbCxmaWd1cmUsZmlnY2FwdGlvbixmb290ZXIsaDEsaDIsaDMsaDQsaDUsaDYsaGVhZGVyLGhncm91cCxocixpbnMsbWFwLG1lbnUsbmF2LG9sLHByZSxzY3JpcHQsc2VjdGlvbix0YWJsZSx1bFwiKSksdj1nLmV4dGVuZCh7fSxyLG0oXCJhLGFiYnIsYWNyb255bSxiLGJkaSxiZG8sYmlnLGJyLGNpdGUsY29kZSxkZWwsZGZuLGVtLGZvbnQsaSxpbWcsaW5zLGtiZCxsYWJlbCxtYXAsbWFyayxxLHJ1YnkscnAscnQscyxzYW1wLHNtYWxsLHNwYW4sc3RyaWtlLHN0cm9uZyxzdWIsc3VwLHRpbWUsdHQsdSx2YXJcIikpLFxueT1tKFwic2NyaXB0LHN0eWxlXCIpLEQ9Zy5leHRlbmQoe30seCx1LHYsdyksRT1tKFwiYmFja2dyb3VuZCxjaXRlLGhyZWYsbG9uZ2Rlc2Msc3JjLHVzZW1hcFwiKSxRPWcuZXh0ZW5kKHt9LEUsbShcImFiYnIsYWxpZ24sYWx0LGF4aXMsYmdjb2xvcixib3JkZXIsY2VsbHBhZGRpbmcsY2VsbHNwYWNpbmcsY2xhc3MsY2xlYXIsY29sb3IsY29scyxjb2xzcGFuLGNvbXBhY3QsY29vcmRzLGRpcixmYWNlLGhlYWRlcnMsaGVpZ2h0LGhyZWZsYW5nLGhzcGFjZSxpc21hcCxsYW5nLGxhbmd1YWdlLG5vaHJlZixub3dyYXAscmVsLHJldixyb3dzLHJvd3NwYW4scnVsZXMsc2NvcGUsc2Nyb2xsaW5nLHNoYXBlLHNpemUsc3BhbixzdGFydCxzdW1tYXJ5LHRhcmdldCx0aXRsZSx0eXBlLHZhbGlnbix2YWx1ZSx2c3BhY2Usd2lkdGhcIikpLHA9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInByZVwiKSxOPS9eKFxccyopKFtcXHNcXFNdKj8pKFxccyopJC87Zy5tb2R1bGUoXCJuZ1Nhbml0aXplXCIsW10pLnByb3ZpZGVyKFwiJHNhbml0aXplXCIsXG5mdW5jdGlvbigpe3RoaXMuJGdldD1bXCIkJHNhbml0aXplVXJpXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGQpe3ZhciBjPVtdO0coZCx0KGMsZnVuY3Rpb24oYyxiKXtyZXR1cm4hL151bnNhZmUvLnRlc3QoYShjLGIpKX0pKTtyZXR1cm4gYy5qb2luKFwiXCIpfX1dfSk7Zy5tb2R1bGUoXCJuZ1Nhbml0aXplXCIpLmZpbHRlcihcImxpbmt5XCIsW1wiJHNhbml0aXplXCIsZnVuY3Rpb24oYSl7dmFyIGQ9LygoZnRwfGh0dHBzPyk6XFwvXFwvfChtYWlsdG86KT9bQS1aYS16MC05Ll8lKy1dK0ApXFxTKlteXFxzLjssKCl7fTw+XCJdLyxjPS9ebWFpbHRvOi87cmV0dXJuIGZ1bmN0aW9uKGUsYil7ZnVuY3Rpb24gbChhKXthJiZrLnB1c2goRihhKSl9ZnVuY3Rpb24gZihhLGMpe2sucHVzaChcIjxhIFwiKTtnLmlzRGVmaW5lZChiKSYmKGsucHVzaCgndGFyZ2V0PVwiJyksay5wdXNoKGIpLGsucHVzaCgnXCIgJykpO2sucHVzaCgnaHJlZj1cIicpO2sucHVzaChhKTtrLnB1c2goJ1wiPicpO2woYyk7ay5wdXNoKFwiPC9hPlwiKX1cbmlmKCFlKXJldHVybiBlO2Zvcih2YXIgbixoPWUsaz1bXSxtLHA7bj1oLm1hdGNoKGQpOyltPW5bMF0sblsyXT09blszXSYmKG09XCJtYWlsdG86XCIrbSkscD1uLmluZGV4LGwoaC5zdWJzdHIoMCxwKSksZihtLG5bMF0ucmVwbGFjZShjLFwiXCIpKSxoPWguc3Vic3RyaW5nKHArblswXS5sZW5ndGgpO2woaCk7cmV0dXJuIGEoay5qb2luKFwiXCIpKX19XSl9KSh3aW5kb3csd2luZG93LmFuZ3VsYXIpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW5ndWxhci1zYW5pdGl6ZS5taW4uanMubWFwXG4iLCIoZnVuY3Rpb24gKGdsb2JhbCl7XG5cbjsgcmVxdWlyZShcIi9ob21lL2NvZGlvL3dvcmtzcGFjZS9ib3dlcl9jb21wb25lbnRzL2FuZ3VsYXIvYW5ndWxhci5taW4uanNcIik7XG47X19icm93c2VyaWZ5X3NoaW1fcmVxdWlyZV9fPXJlcXVpcmU7KGZ1bmN0aW9uIGJyb3dzZXJpZnlTaGltKG1vZHVsZSwgZGVmaW5lLCByZXF1aXJlKSB7XG4vKipcbiAqIFN0YXRlLWJhc2VkIHJvdXRpbmcgZm9yIEFuZ3VsYXJKU1xuICogQHZlcnNpb24gdjAuMi4xMFxuICogQGxpbmsgaHR0cDovL2FuZ3VsYXItdWkuZ2l0aHViLmNvbS9cbiAqIEBsaWNlbnNlIE1JVCBMaWNlbnNlLCBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVFxuICovXG5cInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgZXhwb3J0cyYmbW9kdWxlLmV4cG9ydHM9PT1leHBvcnRzJiYobW9kdWxlLmV4cG9ydHM9XCJ1aS5yb3V0ZXJcIiksZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSxiKXtyZXR1cm4gSShuZXcoSShmdW5jdGlvbigpe30se3Byb3RvdHlwZTphfSkpLGIpfWZ1bmN0aW9uIGUoYSl7cmV0dXJuIEgoYXJndW1lbnRzLGZ1bmN0aW9uKGIpe2IhPT1hJiZIKGIsZnVuY3Rpb24oYixjKXthLmhhc093blByb3BlcnR5KGMpfHwoYVtjXT1iKX0pfSksYX1mdW5jdGlvbiBmKGEsYil7dmFyIGM9W107Zm9yKHZhciBkIGluIGEucGF0aCl7aWYoYS5wYXRoW2RdIT09Yi5wYXRoW2RdKWJyZWFrO2MucHVzaChhLnBhdGhbZF0pfXJldHVybiBjfWZ1bmN0aW9uIGcoYSxiKXtpZihBcnJheS5wcm90b3R5cGUuaW5kZXhPZilyZXR1cm4gYS5pbmRleE9mKGIsTnVtYmVyKGFyZ3VtZW50c1syXSl8fDApO3ZhciBjPWEubGVuZ3RoPj4+MCxkPU51bWJlcihhcmd1bWVudHNbMl0pfHwwO2ZvcihkPTA+ZD9NYXRoLmNlaWwoZCk6TWF0aC5mbG9vcihkKSwwPmQmJihkKz1jKTtjPmQ7ZCsrKWlmKGQgaW4gYSYmYVtkXT09PWIpcmV0dXJuIGQ7cmV0dXJuLTF9ZnVuY3Rpb24gaChhLGIsYyxkKXt2YXIgZSxoPWYoYyxkKSxpPXt9LGo9W107Zm9yKHZhciBrIGluIGgpaWYoaFtrXS5wYXJhbXMmJmhba10ucGFyYW1zLmxlbmd0aCl7ZT1oW2tdLnBhcmFtcztmb3IodmFyIGwgaW4gZSlnKGosZVtsXSk+PTB8fChqLnB1c2goZVtsXSksaVtlW2xdXT1hW2VbbF1dKX1yZXR1cm4gSSh7fSxpLGIpfWZ1bmN0aW9uIGkoYSxiKXt2YXIgYz17fTtyZXR1cm4gSChhLGZ1bmN0aW9uKGEpe3ZhciBkPWJbYV07Y1thXT1udWxsIT1kP1N0cmluZyhkKTpudWxsfSksY31mdW5jdGlvbiBqKGEsYixjKXtpZighYyl7Yz1bXTtmb3IodmFyIGQgaW4gYSljLnB1c2goZCl9Zm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspe3ZhciBmPWNbZV07aWYoYVtmXSE9YltmXSlyZXR1cm4hMX1yZXR1cm4hMH1mdW5jdGlvbiBrKGEsYil7dmFyIGM9e307cmV0dXJuIEgoYSxmdW5jdGlvbihhKXtjW2FdPWJbYV19KSxjfWZ1bmN0aW9uIGwoYSxiKXt2YXIgZD0xLGY9MixnPXt9LGg9W10saT1nLGo9SShhLndoZW4oZykseyQkcHJvbWlzZXM6ZywkJHZhbHVlczpnfSk7dGhpcy5zdHVkeT1mdW5jdGlvbihnKXtmdW5jdGlvbiBrKGEsYyl7aWYob1tjXSE9PWYpe2lmKG4ucHVzaChjKSxvW2NdPT09ZCl0aHJvdyBuLnNwbGljZSgwLG4uaW5kZXhPZihjKSksbmV3IEVycm9yKFwiQ3ljbGljIGRlcGVuZGVuY3k6IFwiK24uam9pbihcIiAtPiBcIikpO2lmKG9bY109ZCxFKGEpKW0ucHVzaChjLFtmdW5jdGlvbigpe3JldHVybiBiLmdldChhKX1dLGgpO2Vsc2V7dmFyIGU9Yi5hbm5vdGF0ZShhKTtIKGUsZnVuY3Rpb24oYSl7YSE9PWMmJmcuaGFzT3duUHJvcGVydHkoYSkmJmsoZ1thXSxhKX0pLG0ucHVzaChjLGEsZSl9bi5wb3AoKSxvW2NdPWZ9fWZ1bmN0aW9uIGwoYSl7cmV0dXJuIEYoYSkmJmEudGhlbiYmYS4kJHByb21pc2VzfWlmKCFGKGcpKXRocm93IG5ldyBFcnJvcihcIidpbnZvY2FibGVzJyBtdXN0IGJlIGFuIG9iamVjdFwiKTt2YXIgbT1bXSxuPVtdLG89e307cmV0dXJuIEgoZyxrKSxnPW49bz1udWxsLGZ1bmN0aW9uKGQsZixnKXtmdW5jdGlvbiBoKCl7LS1zfHwodHx8ZShyLGYuJCR2YWx1ZXMpLHAuJCR2YWx1ZXM9cixwLiQkcHJvbWlzZXM9ITAsby5yZXNvbHZlKHIpKX1mdW5jdGlvbiBrKGEpe3AuJCRmYWlsdXJlPWEsby5yZWplY3QoYSl9ZnVuY3Rpb24gbihjLGUsZil7ZnVuY3Rpb24gaShhKXtsLnJlamVjdChhKSxrKGEpfWZ1bmN0aW9uIGooKXtpZighQyhwLiQkZmFpbHVyZSkpdHJ5e2wucmVzb2x2ZShiLmludm9rZShlLGcscikpLGwucHJvbWlzZS50aGVuKGZ1bmN0aW9uKGEpe3JbY109YSxoKCl9LGkpfWNhdGNoKGEpe2koYSl9fXZhciBsPWEuZGVmZXIoKSxtPTA7SChmLGZ1bmN0aW9uKGEpe3EuaGFzT3duUHJvcGVydHkoYSkmJiFkLmhhc093blByb3BlcnR5KGEpJiYobSsrLHFbYV0udGhlbihmdW5jdGlvbihiKXtyW2FdPWIsLS1tfHxqKCl9LGkpKX0pLG18fGooKSxxW2NdPWwucHJvbWlzZX1pZihsKGQpJiZnPT09YyYmKGc9ZixmPWQsZD1udWxsKSxkKXtpZighRihkKSl0aHJvdyBuZXcgRXJyb3IoXCInbG9jYWxzJyBtdXN0IGJlIGFuIG9iamVjdFwiKX1lbHNlIGQ9aTtpZihmKXtpZighbChmKSl0aHJvdyBuZXcgRXJyb3IoXCIncGFyZW50JyBtdXN0IGJlIGEgcHJvbWlzZSByZXR1cm5lZCBieSAkcmVzb2x2ZS5yZXNvbHZlKClcIil9ZWxzZSBmPWo7dmFyIG89YS5kZWZlcigpLHA9by5wcm9taXNlLHE9cC4kJHByb21pc2VzPXt9LHI9SSh7fSxkKSxzPTErbS5sZW5ndGgvMyx0PSExO2lmKEMoZi4kJGZhaWx1cmUpKXJldHVybiBrKGYuJCRmYWlsdXJlKSxwO2YuJCR2YWx1ZXM/KHQ9ZShyLGYuJCR2YWx1ZXMpLGgoKSk6KEkocSxmLiQkcHJvbWlzZXMpLGYudGhlbihoLGspKTtmb3IodmFyIHU9MCx2PW0ubGVuZ3RoO3Y+dTt1Kz0zKWQuaGFzT3duUHJvcGVydHkobVt1XSk/aCgpOm4obVt1XSxtW3UrMV0sbVt1KzJdKTtyZXR1cm4gcH19LHRoaXMucmVzb2x2ZT1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5zdHVkeShhKShiLGMsZCl9fWZ1bmN0aW9uIG0oYSxiLGMpe3RoaXMuZnJvbUNvbmZpZz1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIEMoYS50ZW1wbGF0ZSk/dGhpcy5mcm9tU3RyaW5nKGEudGVtcGxhdGUsYik6QyhhLnRlbXBsYXRlVXJsKT90aGlzLmZyb21VcmwoYS50ZW1wbGF0ZVVybCxiKTpDKGEudGVtcGxhdGVQcm92aWRlcik/dGhpcy5mcm9tUHJvdmlkZXIoYS50ZW1wbGF0ZVByb3ZpZGVyLGIsYyk6bnVsbH0sdGhpcy5mcm9tU3RyaW5nPWZ1bmN0aW9uKGEsYil7cmV0dXJuIEQoYSk/YShiKTphfSx0aGlzLmZyb21Vcmw9ZnVuY3Rpb24oYyxkKXtyZXR1cm4gRChjKSYmKGM9YyhkKSksbnVsbD09Yz9udWxsOmEuZ2V0KGMse2NhY2hlOmJ9KS50aGVuKGZ1bmN0aW9uKGEpe3JldHVybiBhLmRhdGF9KX0sdGhpcy5mcm9tUHJvdmlkZXI9ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBjLmludm9rZShhLG51bGwsZHx8e3BhcmFtczpifSl9fWZ1bmN0aW9uIG4oYSl7ZnVuY3Rpb24gYihiKXtpZighL15cXHcrKC0rXFx3KykqJC8udGVzdChiKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHBhcmFtZXRlciBuYW1lICdcIitiK1wiJyBpbiBwYXR0ZXJuICdcIithK1wiJ1wiKTtpZihmW2JdKXRocm93IG5ldyBFcnJvcihcIkR1cGxpY2F0ZSBwYXJhbWV0ZXIgbmFtZSAnXCIrYitcIicgaW4gcGF0dGVybiAnXCIrYStcIidcIik7ZltiXT0hMCxqLnB1c2goYil9ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYS5yZXBsYWNlKC9bXFxcXFxcW1xcXVxcXiQqKz8uKCl8e31dL2csXCJcXFxcJCZcIil9dmFyIGQsZT0vKFs6Kl0pKFxcdyspfFxceyhcXHcrKSg/OlxcOigoPzpbXnt9XFxcXF0rfFxcXFwufFxceyg/Oltee31cXFxcXSt8XFxcXC4pKlxcfSkrKSk/XFx9L2csZj17fSxnPVwiXlwiLGg9MCxpPXRoaXMuc2VnbWVudHM9W10saj10aGlzLnBhcmFtcz1bXTt0aGlzLnNvdXJjZT1hO2Zvcih2YXIgayxsLG07KGQ9ZS5leGVjKGEpKSYmKGs9ZFsyXXx8ZFszXSxsPWRbNF18fChcIipcIj09ZFsxXT9cIi4qXCI6XCJbXi9dKlwiKSxtPWEuc3Vic3RyaW5nKGgsZC5pbmRleCksIShtLmluZGV4T2YoXCI/XCIpPj0wKSk7KWcrPWMobSkrXCIoXCIrbCtcIilcIixiKGspLGkucHVzaChtKSxoPWUubGFzdEluZGV4O209YS5zdWJzdHJpbmcoaCk7dmFyIG49bS5pbmRleE9mKFwiP1wiKTtpZihuPj0wKXt2YXIgbz10aGlzLnNvdXJjZVNlYXJjaD1tLnN1YnN0cmluZyhuKTttPW0uc3Vic3RyaW5nKDAsbiksdGhpcy5zb3VyY2VQYXRoPWEuc3Vic3RyaW5nKDAsaCtuKSxIKG8uc3Vic3RyaW5nKDEpLnNwbGl0KC9bJj9dLyksYil9ZWxzZSB0aGlzLnNvdXJjZVBhdGg9YSx0aGlzLnNvdXJjZVNlYXJjaD1cIlwiO2crPWMobSkrXCIkXCIsaS5wdXNoKG0pLHRoaXMucmVnZXhwPW5ldyBSZWdFeHAoZyksdGhpcy5wcmVmaXg9aVswXX1mdW5jdGlvbiBvKCl7dGhpcy5jb21waWxlPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgbihhKX0sdGhpcy5pc01hdGNoZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIEYoYSkmJkQoYS5leGVjKSYmRChhLmZvcm1hdCkmJkQoYS5jb25jYXQpfSx0aGlzLiRnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319ZnVuY3Rpb24gcChhKXtmdW5jdGlvbiBiKGEpe3ZhciBiPS9eXFxeKCg/OlxcXFxbXmEtekEtWjAtOV18W15cXFxcXFxbXFxdXFxeJCorPy4oKXx7fV0rKSopLy5leGVjKGEuc291cmNlKTtyZXR1cm4gbnVsbCE9Yj9iWzFdLnJlcGxhY2UoL1xcXFwoLikvZyxcIiQxXCIpOlwiXCJ9ZnVuY3Rpb24gYyhhLGIpe3JldHVybiBhLnJlcGxhY2UoL1xcJChcXCR8XFxkezEsMn0pLyxmdW5jdGlvbihhLGMpe3JldHVybiBiW1wiJFwiPT09Yz8wOk51bWJlcihjKV19KX1mdW5jdGlvbiBkKGEsYixjKXtpZighYylyZXR1cm4hMTt2YXIgZD1hLmludm9rZShiLGIseyRtYXRjaDpjfSk7cmV0dXJuIEMoZCk/ZDohMH12YXIgZT1bXSxmPW51bGw7dGhpcy5ydWxlPWZ1bmN0aW9uKGEpe2lmKCFEKGEpKXRocm93IG5ldyBFcnJvcihcIidydWxlJyBtdXN0IGJlIGEgZnVuY3Rpb25cIik7cmV0dXJuIGUucHVzaChhKSx0aGlzfSx0aGlzLm90aGVyd2lzZT1mdW5jdGlvbihhKXtpZihFKGEpKXt2YXIgYj1hO2E9ZnVuY3Rpb24oKXtyZXR1cm4gYn19ZWxzZSBpZighRChhKSl0aHJvdyBuZXcgRXJyb3IoXCIncnVsZScgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO3JldHVybiBmPWEsdGhpc30sdGhpcy53aGVuPWZ1bmN0aW9uKGUsZil7dmFyIGcsaD1FKGYpO2lmKEUoZSkmJihlPWEuY29tcGlsZShlKSksIWgmJiFEKGYpJiYhRyhmKSl0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkICdoYW5kbGVyJyBpbiB3aGVuKClcIik7dmFyIGk9e21hdGNoZXI6ZnVuY3Rpb24oYixjKXtyZXR1cm4gaCYmKGc9YS5jb21waWxlKGMpLGM9W1wiJG1hdGNoXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGcuZm9ybWF0KGEpfV0pLEkoZnVuY3Rpb24oYSxlKXtyZXR1cm4gZChhLGMsYi5leGVjKGUucGF0aCgpLGUuc2VhcmNoKCkpKX0se3ByZWZpeDpFKGIucHJlZml4KT9iLnByZWZpeDpcIlwifSl9LHJlZ2V4OmZ1bmN0aW9uKGEsZSl7aWYoYS5nbG9iYWx8fGEuc3RpY2t5KXRocm93IG5ldyBFcnJvcihcIndoZW4oKSBSZWdFeHAgbXVzdCBub3QgYmUgZ2xvYmFsIG9yIHN0aWNreVwiKTtyZXR1cm4gaCYmKGc9ZSxlPVtcIiRtYXRjaFwiLGZ1bmN0aW9uKGEpe3JldHVybiBjKGcsYSl9XSksSShmdW5jdGlvbihiLGMpe3JldHVybiBkKGIsZSxhLmV4ZWMoYy5wYXRoKCkpKX0se3ByZWZpeDpiKGEpfSl9fSxqPXttYXRjaGVyOmEuaXNNYXRjaGVyKGUpLHJlZ2V4OmUgaW5zdGFuY2VvZiBSZWdFeHB9O2Zvcih2YXIgayBpbiBqKWlmKGpba10pcmV0dXJuIHRoaXMucnVsZShpW2tdKGUsZikpO3Rocm93IG5ldyBFcnJvcihcImludmFsaWQgJ3doYXQnIGluIHdoZW4oKVwiKX0sdGhpcy4kZ2V0PVtcIiRsb2NhdGlvblwiLFwiJHJvb3RTY29wZVwiLFwiJGluamVjdG9yXCIsZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYil7ZnVuY3Rpb24gZChiKXt2YXIgZD1iKGMsYSk7cmV0dXJuIGQ/KEUoZCkmJmEucmVwbGFjZSgpLnVybChkKSwhMCk6ITF9aWYoIWJ8fCFiLmRlZmF1bHRQcmV2ZW50ZWQpe3ZhciBnLGg9ZS5sZW5ndGg7Zm9yKGc9MDtoPmc7ZysrKWlmKGQoZVtnXSkpcmV0dXJuO2YmJmQoZil9fXJldHVybiBiLiRvbihcIiRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3NcIixkKSx7c3luYzpmdW5jdGlvbigpe2QoKX19fV19ZnVuY3Rpb24gcShhLGUsZil7ZnVuY3Rpb24gZyhhKXtyZXR1cm4gMD09PWEuaW5kZXhPZihcIi5cIil8fDA9PT1hLmluZGV4T2YoXCJeXCIpfWZ1bmN0aW9uIGwoYSxiKXt2YXIgZD1FKGEpLGU9ZD9hOmEubmFtZSxmPWcoZSk7aWYoZil7aWYoIWIpdGhyb3cgbmV3IEVycm9yKFwiTm8gcmVmZXJlbmNlIHBvaW50IGdpdmVuIGZvciBwYXRoICdcIitlK1wiJ1wiKTtmb3IodmFyIGg9ZS5zcGxpdChcIi5cIiksaT0wLGo9aC5sZW5ndGgsaz1iO2o+aTtpKyspaWYoXCJcIiE9PWhbaV18fDAhPT1pKXtpZihcIl5cIiE9PWhbaV0pYnJlYWs7aWYoIWsucGFyZW50KXRocm93IG5ldyBFcnJvcihcIlBhdGggJ1wiK2UrXCInIG5vdCB2YWxpZCBmb3Igc3RhdGUgJ1wiK2IubmFtZStcIidcIik7az1rLnBhcmVudH1lbHNlIGs9YjtoPWguc2xpY2UoaSkuam9pbihcIi5cIiksZT1rLm5hbWUrKGsubmFtZSYmaD9cIi5cIjpcIlwiKStofXZhciBsPXdbZV07cmV0dXJuIWx8fCFkJiYoZHx8bCE9PWEmJmwuc2VsZiE9PWEpP2M6bH1mdW5jdGlvbiBtKGEsYil7eFthXXx8KHhbYV09W10pLHhbYV0ucHVzaChiKX1mdW5jdGlvbiBuKGIpe2I9ZChiLHtzZWxmOmIscmVzb2x2ZTpiLnJlc29sdmV8fHt9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmFtZX19KTt2YXIgYz1iLm5hbWU7aWYoIUUoYyl8fGMuaW5kZXhPZihcIkBcIik+PTApdGhyb3cgbmV3IEVycm9yKFwiU3RhdGUgbXVzdCBoYXZlIGEgdmFsaWQgbmFtZVwiKTtpZih3Lmhhc093blByb3BlcnR5KGMpKXRocm93IG5ldyBFcnJvcihcIlN0YXRlICdcIitjK1wiJycgaXMgYWxyZWFkeSBkZWZpbmVkXCIpO3ZhciBlPS0xIT09Yy5pbmRleE9mKFwiLlwiKT9jLnN1YnN0cmluZygwLGMubGFzdEluZGV4T2YoXCIuXCIpKTpFKGIucGFyZW50KT9iLnBhcmVudDpcIlwiO2lmKGUmJiF3W2VdKXJldHVybiBtKGUsYi5zZWxmKTtmb3IodmFyIGYgaW4geilEKHpbZl0pJiYoYltmXT16W2ZdKGIsei4kZGVsZWdhdGVzW2ZdKSk7aWYod1tjXT1iLCFiW3ldJiZiLnVybCYmYS53aGVuKGIudXJsLFtcIiRtYXRjaFwiLFwiJHN0YXRlUGFyYW1zXCIsZnVuY3Rpb24oYSxjKXt2LiRjdXJyZW50Lm5hdmlnYWJsZT09YiYmaihhLGMpfHx2LnRyYW5zaXRpb25UbyhiLGEse2xvY2F0aW9uOiExfSl9XSkseFtjXSlmb3IodmFyIGc9MDtnPHhbY10ubGVuZ3RoO2crKyluKHhbY11bZ10pO3JldHVybiBifWZ1bmN0aW9uIG8oYSl7cmV0dXJuIGEuaW5kZXhPZihcIipcIik+LTF9ZnVuY3Rpb24gcChhKXt2YXIgYj1hLnNwbGl0KFwiLlwiKSxjPXYuJGN1cnJlbnQubmFtZS5zcGxpdChcIi5cIik7aWYoXCIqKlwiPT09YlswXSYmKGM9Yy5zbGljZShjLmluZGV4T2YoYlsxXSkpLGMudW5zaGlmdChcIioqXCIpKSxcIioqXCI9PT1iW2IubGVuZ3RoLTFdJiYoYy5zcGxpY2UoYy5pbmRleE9mKGJbYi5sZW5ndGgtMl0pKzEsTnVtYmVyLk1BWF9WQUxVRSksYy5wdXNoKFwiKipcIikpLGIubGVuZ3RoIT1jLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIGQ9MCxlPWIubGVuZ3RoO2U+ZDtkKyspXCIqXCI9PT1iW2RdJiYoY1tkXT1cIipcIik7cmV0dXJuIGMuam9pbihcIlwiKT09PWIuam9pbihcIlwiKX1mdW5jdGlvbiBxKGEsYil7cmV0dXJuIEUoYSkmJiFDKGIpP3pbYV06RChiKSYmRShhKT8oelthXSYmIXouJGRlbGVnYXRlc1thXSYmKHouJGRlbGVnYXRlc1thXT16W2FdKSx6W2FdPWIsdGhpcyk6dGhpc31mdW5jdGlvbiByKGEsYil7cmV0dXJuIEYoYSk/Yj1hOmIubmFtZT1hLG4oYiksdGhpc31mdW5jdGlvbiBzKGEsZSxnLG0sbixxLHIscyx4KXtmdW5jdGlvbiB6KCl7ci51cmwoKSE9PU0mJihyLnVybChNKSxyLnJlcGxhY2UoKSl9ZnVuY3Rpb24gQShhLGMsZCxmLGgpe3ZhciBpPWQ/YzprKGEucGFyYW1zLGMpLGo9eyRzdGF0ZVBhcmFtczppfTtoLnJlc29sdmU9bi5yZXNvbHZlKGEucmVzb2x2ZSxqLGgucmVzb2x2ZSxhKTt2YXIgbD1baC5yZXNvbHZlLnRoZW4oZnVuY3Rpb24oYSl7aC5nbG9iYWxzPWF9KV07cmV0dXJuIGYmJmwucHVzaChmKSxIKGEudmlld3MsZnVuY3Rpb24oYyxkKXt2YXIgZT1jLnJlc29sdmUmJmMucmVzb2x2ZSE9PWEucmVzb2x2ZT9jLnJlc29sdmU6e307ZS4kdGVtcGxhdGU9W2Z1bmN0aW9uKCl7cmV0dXJuIGcubG9hZChkLHt2aWV3OmMsbG9jYWxzOmoscGFyYW1zOmksbm90aWZ5OiExfSl8fFwiXCJ9XSxsLnB1c2gobi5yZXNvbHZlKGUsaixoLnJlc29sdmUsYSkudGhlbihmdW5jdGlvbihmKXtpZihEKGMuY29udHJvbGxlclByb3ZpZGVyKXx8RyhjLmNvbnRyb2xsZXJQcm92aWRlcikpe3ZhciBnPWIuZXh0ZW5kKHt9LGUsaik7Zi4kJGNvbnRyb2xsZXI9bS5pbnZva2UoYy5jb250cm9sbGVyUHJvdmlkZXIsbnVsbCxnKX1lbHNlIGYuJCRjb250cm9sbGVyPWMuY29udHJvbGxlcjtmLiQkc3RhdGU9YSxmLiQkY29udHJvbGxlckFzPWMuY29udHJvbGxlckFzLGhbZF09Zn0pKX0pLGUuYWxsKGwpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gaH0pfXZhciBCPWUucmVqZWN0KG5ldyBFcnJvcihcInRyYW5zaXRpb24gc3VwZXJzZWRlZFwiKSksRj1lLnJlamVjdChuZXcgRXJyb3IoXCJ0cmFuc2l0aW9uIHByZXZlbnRlZFwiKSksSz1lLnJlamVjdChuZXcgRXJyb3IoXCJ0cmFuc2l0aW9uIGFib3J0ZWRcIikpLEw9ZS5yZWplY3QobmV3IEVycm9yKFwidHJhbnNpdGlvbiBmYWlsZWRcIikpLE09ci51cmwoKSxOPXguYmFzZUhyZWYoKTtyZXR1cm4gdS5sb2NhbHM9e3Jlc29sdmU6bnVsbCxnbG9iYWxzOnskc3RhdGVQYXJhbXM6e319fSx2PXtwYXJhbXM6e30sY3VycmVudDp1LnNlbGYsJGN1cnJlbnQ6dSx0cmFuc2l0aW9uOm51bGx9LHYucmVsb2FkPWZ1bmN0aW9uKCl7di50cmFuc2l0aW9uVG8odi5jdXJyZW50LHEse3JlbG9hZDohMCxpbmhlcml0OiExLG5vdGlmeTohMX0pfSx2LmdvPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy50cmFuc2l0aW9uVG8oYSxiLEkoe2luaGVyaXQ6ITAscmVsYXRpdmU6di4kY3VycmVudH0sYykpfSx2LnRyYW5zaXRpb25Ubz1mdW5jdGlvbihiLGMsZil7Yz1jfHx7fSxmPUkoe2xvY2F0aW9uOiEwLGluaGVyaXQ6ITEscmVsYXRpdmU6bnVsbCxub3RpZnk6ITAscmVsb2FkOiExLCRyZXRyeTohMX0sZnx8e30pO3ZhciBnLGs9di4kY3VycmVudCxuPXYucGFyYW1zLG89ay5wYXRoLHA9bChiLGYucmVsYXRpdmUpO2lmKCFDKHApKXt2YXIgcz17dG86Yix0b1BhcmFtczpjLG9wdGlvbnM6Zn07aWYoZz1hLiRicm9hZGNhc3QoXCIkc3RhdGVOb3RGb3VuZFwiLHMsay5zZWxmLG4pLGcuZGVmYXVsdFByZXZlbnRlZClyZXR1cm4geigpLEs7aWYoZy5yZXRyeSl7aWYoZi4kcmV0cnkpcmV0dXJuIHooKSxMO3ZhciB3PXYudHJhbnNpdGlvbj1lLndoZW4oZy5yZXRyeSk7cmV0dXJuIHcudGhlbihmdW5jdGlvbigpe3JldHVybiB3IT09di50cmFuc2l0aW9uP0I6KHMub3B0aW9ucy4kcmV0cnk9ITAsdi50cmFuc2l0aW9uVG8ocy50byxzLnRvUGFyYW1zLHMub3B0aW9ucykpfSxmdW5jdGlvbigpe3JldHVybiBLfSkseigpLHd9aWYoYj1zLnRvLGM9cy50b1BhcmFtcyxmPXMub3B0aW9ucyxwPWwoYixmLnJlbGF0aXZlKSwhQyhwKSl7aWYoZi5yZWxhdGl2ZSl0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZCBub3QgcmVzb2x2ZSAnXCIrYitcIicgZnJvbSBzdGF0ZSAnXCIrZi5yZWxhdGl2ZStcIidcIik7dGhyb3cgbmV3IEVycm9yKFwiTm8gc3VjaCBzdGF0ZSAnXCIrYitcIidcIil9fWlmKHBbeV0pdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHRyYW5zaXRpb24gdG8gYWJzdHJhY3Qgc3RhdGUgJ1wiK2IrXCInXCIpO2YuaW5oZXJpdCYmKGM9aChxLGN8fHt9LHYuJGN1cnJlbnQscCkpLGI9cDt2YXIgeCxELEU9Yi5wYXRoLEc9dS5sb2NhbHMsSD1bXTtmb3IoeD0wLEQ9RVt4XTtEJiZEPT09b1t4XSYmaihjLG4sRC5vd25QYXJhbXMpJiYhZi5yZWxvYWQ7eCsrLEQ9RVt4XSlHPUhbeF09RC5sb2NhbHM7aWYodChiLGssRyxmKSlyZXR1cm4gYi5zZWxmLnJlbG9hZE9uU2VhcmNoIT09ITEmJnooKSx2LnRyYW5zaXRpb249bnVsbCxlLndoZW4odi5jdXJyZW50KTtpZihjPWkoYi5wYXJhbXMsY3x8e30pLGYubm90aWZ5JiYoZz1hLiRicm9hZGNhc3QoXCIkc3RhdGVDaGFuZ2VTdGFydFwiLGIuc2VsZixjLGsuc2VsZixuKSxnLmRlZmF1bHRQcmV2ZW50ZWQpKXJldHVybiB6KCksRjtmb3IodmFyIE49ZS53aGVuKEcpLE89eDtPPEUubGVuZ3RoO08rKyxEPUVbT10pRz1IW09dPWQoRyksTj1BKEQsYyxEPT09YixOLEcpO3ZhciBQPXYudHJhbnNpdGlvbj1OLnRoZW4oZnVuY3Rpb24oKXt2YXIgZCxlLGc7aWYodi50cmFuc2l0aW9uIT09UClyZXR1cm4gQjtmb3IoZD1vLmxlbmd0aC0xO2Q+PXg7ZC0tKWc9b1tkXSxnLnNlbGYub25FeGl0JiZtLmludm9rZShnLnNlbGYub25FeGl0LGcuc2VsZixnLmxvY2Fscy5nbG9iYWxzKSxnLmxvY2Fscz1udWxsO2ZvcihkPXg7ZDxFLmxlbmd0aDtkKyspZT1FW2RdLGUubG9jYWxzPUhbZF0sZS5zZWxmLm9uRW50ZXImJm0uaW52b2tlKGUuc2VsZi5vbkVudGVyLGUuc2VsZixlLmxvY2Fscy5nbG9iYWxzKTtpZih2LnRyYW5zaXRpb24hPT1QKXJldHVybiBCO3YuJGN1cnJlbnQ9Yix2LmN1cnJlbnQ9Yi5zZWxmLHYucGFyYW1zPWMsSih2LnBhcmFtcyxxKSx2LnRyYW5zaXRpb249bnVsbDt2YXIgaD1iLm5hdmlnYWJsZTtyZXR1cm4gZi5sb2NhdGlvbiYmaCYmKHIudXJsKGgudXJsLmZvcm1hdChoLmxvY2Fscy5nbG9iYWxzLiRzdGF0ZVBhcmFtcykpLFwicmVwbGFjZVwiPT09Zi5sb2NhdGlvbiYmci5yZXBsYWNlKCkpLGYubm90aWZ5JiZhLiRicm9hZGNhc3QoXCIkc3RhdGVDaGFuZ2VTdWNjZXNzXCIsYi5zZWxmLGMsay5zZWxmLG4pLE09ci51cmwoKSx2LmN1cnJlbnR9LGZ1bmN0aW9uKGQpe3JldHVybiB2LnRyYW5zaXRpb24hPT1QP0I6KHYudHJhbnNpdGlvbj1udWxsLGEuJGJyb2FkY2FzdChcIiRzdGF0ZUNoYW5nZUVycm9yXCIsYi5zZWxmLGMsay5zZWxmLG4sZCkseigpLGUucmVqZWN0KGQpKX0pO3JldHVybiBQfSx2LmlzPWZ1bmN0aW9uKGEsZCl7dmFyIGU9bChhKTtyZXR1cm4gQyhlKT92LiRjdXJyZW50IT09ZT8hMTpDKGQpJiZudWxsIT09ZD9iLmVxdWFscyhxLGQpOiEwOmN9LHYuaW5jbHVkZXM9ZnVuY3Rpb24oYSxkKXtpZihFKGEpJiZvKGEpKXtpZighcChhKSlyZXR1cm4hMTthPXYuJGN1cnJlbnQubmFtZX12YXIgZT1sKGEpO2lmKCFDKGUpKXJldHVybiBjO2lmKCFDKHYuJGN1cnJlbnQuaW5jbHVkZXNbZS5uYW1lXSkpcmV0dXJuITE7dmFyIGY9ITA7cmV0dXJuIGIuZm9yRWFjaChkLGZ1bmN0aW9uKGEsYil7QyhxW2JdKSYmcVtiXT09PWF8fChmPSExKX0pLGZ9LHYuaHJlZj1mdW5jdGlvbihhLGIsYyl7Yz1JKHtsb3NzeTohMCxpbmhlcml0OiExLGFic29sdXRlOiExLHJlbGF0aXZlOnYuJGN1cnJlbnR9LGN8fHt9KTt2YXIgZD1sKGEsYy5yZWxhdGl2ZSk7aWYoIUMoZCkpcmV0dXJuIG51bGw7Yj1oKHEsYnx8e30sdi4kY3VycmVudCxkKTt2YXIgZT1kJiZjLmxvc3N5P2QubmF2aWdhYmxlOmQsZz1lJiZlLnVybD9lLnVybC5mb3JtYXQoaShkLnBhcmFtcyxifHx7fSkpOm51bGw7cmV0dXJuIWYuaHRtbDVNb2RlKCkmJmcmJihnPVwiI1wiK2YuaGFzaFByZWZpeCgpK2cpLFwiL1wiIT09TiYmKGYuaHRtbDVNb2RlKCk/Zz1OLnNsaWNlKDAsLTEpK2c6Yy5hYnNvbHV0ZSYmKGc9Ti5zbGljZSgxKStnKSksYy5hYnNvbHV0ZSYmZyYmKGc9ci5wcm90b2NvbCgpK1wiOi8vXCIrci5ob3N0KCkrKDgwPT1yLnBvcnQoKXx8NDQzPT1yLnBvcnQoKT9cIlwiOlwiOlwiK3IucG9ydCgpKSsoIWYuaHRtbDVNb2RlKCkmJmc/XCIvXCI6XCJcIikrZyksZ30sdi5nZXQ9ZnVuY3Rpb24oYSxiKXtpZighQyhhKSl7dmFyIGM9W107cmV0dXJuIEgodyxmdW5jdGlvbihhKXtjLnB1c2goYS5zZWxmKX0pLGN9dmFyIGQ9bChhLGIpO3JldHVybiBkJiZkLnNlbGY/ZC5zZWxmOm51bGx9LHZ9ZnVuY3Rpb24gdChhLGIsYyxkKXtyZXR1cm4gYSE9PWJ8fChjIT09Yi5sb2NhbHN8fGQucmVsb2FkKSYmYS5zZWxmLnJlbG9hZE9uU2VhcmNoIT09ITE/dm9pZCAwOiEwfXZhciB1LHYsdz17fSx4PXt9LHk9XCJhYnN0cmFjdFwiLHo9e3BhcmVudDpmdW5jdGlvbihhKXtpZihDKGEucGFyZW50KSYmYS5wYXJlbnQpcmV0dXJuIGwoYS5wYXJlbnQpO3ZhciBiPS9eKC4rKVxcLlteLl0rJC8uZXhlYyhhLm5hbWUpO3JldHVybiBiP2woYlsxXSk6dX0sZGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnQmJmEucGFyZW50LmRhdGEmJihhLmRhdGE9YS5zZWxmLmRhdGE9SSh7fSxhLnBhcmVudC5kYXRhLGEuZGF0YSkpLGEuZGF0YX0sdXJsOmZ1bmN0aW9uKGEpe3ZhciBiPWEudXJsO2lmKEUoYikpcmV0dXJuXCJeXCI9PWIuY2hhckF0KDApP2UuY29tcGlsZShiLnN1YnN0cmluZygxKSk6KGEucGFyZW50Lm5hdmlnYWJsZXx8dSkudXJsLmNvbmNhdChiKTtpZihlLmlzTWF0Y2hlcihiKXx8bnVsbD09YilyZXR1cm4gYjt0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHVybCAnXCIrYitcIicgaW4gc3RhdGUgJ1wiK2ErXCInXCIpfSxuYXZpZ2FibGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGEudXJsP2E6YS5wYXJlbnQ/YS5wYXJlbnQubmF2aWdhYmxlOm51bGx9LHBhcmFtczpmdW5jdGlvbihhKXtpZighYS5wYXJhbXMpcmV0dXJuIGEudXJsP2EudXJsLnBhcmFtZXRlcnMoKTphLnBhcmVudC5wYXJhbXM7aWYoIUcoYS5wYXJhbXMpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcGFyYW1zIGluIHN0YXRlICdcIithK1wiJ1wiKTtpZihhLnVybCl0aHJvdyBuZXcgRXJyb3IoXCJCb3RoIHBhcmFtcyBhbmQgdXJsIHNwZWNpY2lmaWVkIGluIHN0YXRlICdcIithK1wiJ1wiKTtyZXR1cm4gYS5wYXJhbXN9LHZpZXdzOmZ1bmN0aW9uKGEpe3ZhciBiPXt9O3JldHVybiBIKEMoYS52aWV3cyk/YS52aWV3czp7XCJcIjphfSxmdW5jdGlvbihjLGQpe2QuaW5kZXhPZihcIkBcIik8MCYmKGQrPVwiQFwiK2EucGFyZW50Lm5hbWUpLGJbZF09Y30pLGJ9LG93blBhcmFtczpmdW5jdGlvbihhKXtpZighYS5wYXJlbnQpcmV0dXJuIGEucGFyYW1zO3ZhciBiPXt9O0goYS5wYXJhbXMsZnVuY3Rpb24oYSl7YlthXT0hMH0pLEgoYS5wYXJlbnQucGFyYW1zLGZ1bmN0aW9uKGMpe2lmKCFiW2NdKXRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgcmVxdWlyZWQgcGFyYW1ldGVyICdcIitjK1wiJyBpbiBzdGF0ZSAnXCIrYS5uYW1lK1wiJ1wiKTtiW2NdPSExfSk7dmFyIGM9W107cmV0dXJuIEgoYixmdW5jdGlvbihhLGIpe2EmJmMucHVzaChiKX0pLGN9LHBhdGg6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucGFyZW50P2EucGFyZW50LnBhdGguY29uY2F0KGEpOltdfSxpbmNsdWRlczpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudD9JKHt9LGEucGFyZW50LmluY2x1ZGVzKTp7fTtyZXR1cm4gYlthLm5hbWVdPSEwLGJ9LCRkZWxlZ2F0ZXM6e319O3U9bih7bmFtZTpcIlwiLHVybDpcIl5cIix2aWV3czpudWxsLFwiYWJzdHJhY3RcIjohMH0pLHUubmF2aWdhYmxlPW51bGwsdGhpcy5kZWNvcmF0b3I9cSx0aGlzLnN0YXRlPXIsdGhpcy4kZ2V0PXMscy4kaW5qZWN0PVtcIiRyb290U2NvcGVcIixcIiRxXCIsXCIkdmlld1wiLFwiJGluamVjdG9yXCIsXCIkcmVzb2x2ZVwiLFwiJHN0YXRlUGFyYW1zXCIsXCIkbG9jYXRpb25cIixcIiR1cmxSb3V0ZXJcIixcIiRicm93c2VyXCJdfWZ1bmN0aW9uIHIoKXtmdW5jdGlvbiBhKGEsYil7cmV0dXJue2xvYWQ6ZnVuY3Rpb24oYyxkKXt2YXIgZSxmPXt0ZW1wbGF0ZTpudWxsLGNvbnRyb2xsZXI6bnVsbCx2aWV3Om51bGwsbG9jYWxzOm51bGwsbm90aWZ5OiEwLGFzeW5jOiEwLHBhcmFtczp7fX07cmV0dXJuIGQ9SShmLGQpLGQudmlldyYmKGU9Yi5mcm9tQ29uZmlnKGQudmlldyxkLnBhcmFtcyxkLmxvY2FscykpLGUmJmQubm90aWZ5JiZhLiRicm9hZGNhc3QoXCIkdmlld0NvbnRlbnRMb2FkaW5nXCIsZCksZX19fXRoaXMuJGdldD1hLGEuJGluamVjdD1bXCIkcm9vdFNjb3BlXCIsXCIkdGVtcGxhdGVGYWN0b3J5XCJdfWZ1bmN0aW9uIHMoKXt2YXIgYT0hMTt0aGlzLnVzZUFuY2hvclNjcm9sbD1mdW5jdGlvbigpe2E9ITB9LHRoaXMuJGdldD1bXCIkYW5jaG9yU2Nyb2xsXCIsXCIkdGltZW91dFwiLGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGE/YjpmdW5jdGlvbihhKXtjKGZ1bmN0aW9uKCl7YVswXS5zY3JvbGxJbnRvVmlldygpfSwwLCExKX19XX1mdW5jdGlvbiB0KGEsYyxkKXtmdW5jdGlvbiBlKCl7cmV0dXJuIGMuaGFzP2Z1bmN0aW9uKGEpe3JldHVybiBjLmhhcyhhKT9jLmdldChhKTpudWxsfTpmdW5jdGlvbihhKXt0cnl7cmV0dXJuIGMuZ2V0KGEpfWNhdGNoKGIpe3JldHVybiBudWxsfX19ZnVuY3Rpb24gZihhLGIpe3ZhciBjPWZ1bmN0aW9uKCl7cmV0dXJue2VudGVyOmZ1bmN0aW9uKGEsYixjKXtiLmFmdGVyKGEpLGMoKX0sbGVhdmU6ZnVuY3Rpb24oYSxiKXthLnJlbW92ZSgpLGIoKX19fTtpZihpKXJldHVybntlbnRlcjpmdW5jdGlvbihhLGIsYyl7aS5lbnRlcihhLG51bGwsYixjKX0sbGVhdmU6ZnVuY3Rpb24oYSxiKXtpLmxlYXZlKGEsYil9fTtpZihoKXt2YXIgZD1oJiZoKGIsYSk7cmV0dXJue2VudGVyOmZ1bmN0aW9uKGEsYixjKXtkLmVudGVyKGEsbnVsbCxiKSxjKCl9LGxlYXZlOmZ1bmN0aW9uKGEsYil7ZC5sZWF2ZShhKSxiKCl9fX1yZXR1cm4gYygpfXZhciBnPWUoKSxoPWcoXCIkYW5pbWF0b3JcIiksaT1nKFwiJGFuaW1hdGVcIiksaj17cmVzdHJpY3Q6XCJFQ0FcIix0ZXJtaW5hbDohMCxwcmlvcml0eTo0MDAsdHJhbnNjbHVkZTpcImVsZW1lbnRcIixjb21waWxlOmZ1bmN0aW9uKGMsZSxnKXtyZXR1cm4gZnVuY3Rpb24oYyxlLGgpe2Z1bmN0aW9uIGkoKXtrJiYoay5yZW1vdmUoKSxrPW51bGwpLG0mJihtLiRkZXN0cm95KCksbT1udWxsKSxsJiYocS5sZWF2ZShsLGZ1bmN0aW9uKCl7az1udWxsfSksaz1sLGw9bnVsbCl9ZnVuY3Rpb24gaihmKXt2YXIgaD1jLiRuZXcoKSxqPWwmJmwuZGF0YShcIiR1aVZpZXdOYW1lXCIpLGs9aiYmYS4kY3VycmVudCYmYS4kY3VycmVudC5sb2NhbHNbal07aWYoZnx8ayE9PW4pe3ZhciByPWcoaCxmdW5jdGlvbihhKXtxLmVudGVyKGEsZSxmdW5jdGlvbigpeyhiLmlzRGVmaW5lZChwKSYmIXB8fGMuJGV2YWwocCkpJiZkKGEpfSksaSgpfSk7bj1hLiRjdXJyZW50LmxvY2Fsc1tyLmRhdGEoXCIkdWlWaWV3TmFtZVwiKV0sbD1yLG09aCxtLiRlbWl0KFwiJHZpZXdDb250ZW50TG9hZGVkXCIpLG0uJGV2YWwobyl9fXZhciBrLGwsbSxuLG89aC5vbmxvYWR8fFwiXCIscD1oLmF1dG9zY3JvbGwscT1mKGgsYyk7Yy4kb24oXCIkc3RhdGVDaGFuZ2VTdWNjZXNzXCIsZnVuY3Rpb24oKXtqKCExKX0pLGMuJG9uKFwiJHZpZXdDb250ZW50TG9hZGluZ1wiLGZ1bmN0aW9uKCl7aighMSl9KSxqKCEwKX19fTtyZXR1cm4gan1mdW5jdGlvbiB1KGEsYixjKXtyZXR1cm57cmVzdHJpY3Q6XCJFQ0FcIixwcmlvcml0eTotNDAwLGNvbXBpbGU6ZnVuY3Rpb24oZCl7dmFyIGU9ZC5odG1sKCk7cmV0dXJuIGZ1bmN0aW9uKGQsZixnKXt2YXIgaD1nLnVpVmlld3x8Zy5uYW1lfHxcIlwiLGk9Zi5pbmhlcml0ZWREYXRhKFwiJHVpVmlld1wiKTtoLmluZGV4T2YoXCJAXCIpPDAmJihoPWgrXCJAXCIrKGk/aS5zdGF0ZS5uYW1lOlwiXCIpKSxmLmRhdGEoXCIkdWlWaWV3TmFtZVwiLGgpO3ZhciBqPWMuJGN1cnJlbnQsaz1qJiZqLmxvY2Fsc1toXTtpZihrKXtmLmRhdGEoXCIkdWlWaWV3XCIse25hbWU6aCxzdGF0ZTprLiQkc3RhdGV9KSxmLmh0bWwoay4kdGVtcGxhdGU/ay4kdGVtcGxhdGU6ZSk7dmFyIGw9YShmLmNvbnRlbnRzKCkpO2lmKGsuJCRjb250cm9sbGVyKXtrLiRzY29wZT1kO3ZhciBtPWIoay4kJGNvbnRyb2xsZXIsayk7ay4kJGNvbnRyb2xsZXJBcyYmKGRbay4kJGNvbnRyb2xsZXJBc109bSksZi5kYXRhKFwiJG5nQ29udHJvbGxlckNvbnRyb2xsZXJcIixtKSxmLmNoaWxkcmVuKCkuZGF0YShcIiRuZ0NvbnRyb2xsZXJDb250cm9sbGVyXCIsbSl9bChkKX19fX19ZnVuY3Rpb24gdihhKXt2YXIgYj1hLnJlcGxhY2UoL1xcbi9nLFwiIFwiKS5tYXRjaCgvXihbXihdKz8pXFxzKihcXCgoLiopXFwpKT8kLyk7aWYoIWJ8fDQhPT1iLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHN0YXRlIHJlZiAnXCIrYStcIidcIik7cmV0dXJue3N0YXRlOmJbMV0scGFyYW1FeHByOmJbM118fG51bGx9fWZ1bmN0aW9uIHcoYSl7dmFyIGI9YS5wYXJlbnQoKS5pbmhlcml0ZWREYXRhKFwiJHVpVmlld1wiKTtyZXR1cm4gYiYmYi5zdGF0ZSYmYi5zdGF0ZS5uYW1lP2Iuc3RhdGU6dm9pZCAwfWZ1bmN0aW9uIHgoYSxjKXt2YXIgZD1bXCJsb2NhdGlvblwiLFwiaW5oZXJpdFwiLFwicmVsb2FkXCJdO3JldHVybntyZXN0cmljdDpcIkFcIixyZXF1aXJlOlwiP151aVNyZWZBY3RpdmVcIixsaW5rOmZ1bmN0aW9uKGUsZixnLGgpe3ZhciBpPXYoZy51aVNyZWYpLGo9bnVsbCxrPXcoZil8fGEuJGN1cnJlbnQsbD1cIkZPUk1cIj09PWZbMF0ubm9kZU5hbWUsbT1sP1wiYWN0aW9uXCI6XCJocmVmXCIsbj0hMCxvPXtyZWxhdGl2ZTprfSxwPWUuJGV2YWwoZy51aVNyZWZPcHRzKXx8e307Yi5mb3JFYWNoKGQsZnVuY3Rpb24oYSl7YSBpbiBwJiYob1thXT1wW2FdKX0pO3ZhciBxPWZ1bmN0aW9uKGIpe2lmKGImJihqPWIpLG4pe3ZhciBjPWEuaHJlZihpLnN0YXRlLGosbyk7cmV0dXJuIGgmJmguJCRzZXRTdGF0ZUluZm8oaS5zdGF0ZSxqKSxjP3ZvaWQoZlswXVttXT1jKToobj0hMSwhMSl9fTtpLnBhcmFtRXhwciYmKGUuJHdhdGNoKGkucGFyYW1FeHByLGZ1bmN0aW9uKGEpe2EhPT1qJiZxKGEpfSwhMCksaj1lLiRldmFsKGkucGFyYW1FeHByKSkscSgpLGx8fGYuYmluZChcImNsaWNrXCIsZnVuY3Rpb24oYil7dmFyIGQ9Yi53aGljaHx8Yi5idXR0b247ZD4xfHxiLmN0cmxLZXl8fGIubWV0YUtleXx8Yi5zaGlmdEtleXx8Zi5hdHRyKFwidGFyZ2V0XCIpfHwoYyhmdW5jdGlvbigpe2EuZ28oaS5zdGF0ZSxqLG8pfSksYi5wcmV2ZW50RGVmYXVsdCgpKX0pfX19ZnVuY3Rpb24geShhLGIsYyl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLGNvbnRyb2xsZXI6W1wiJHNjb3BlXCIsXCIkZWxlbWVudFwiLFwiJGF0dHJzXCIsZnVuY3Rpb24oZCxlLGYpe2Z1bmN0aW9uIGcoKXthLiRjdXJyZW50LnNlbGY9PT1pJiZoKCk/ZS5hZGRDbGFzcyhsKTplLnJlbW92ZUNsYXNzKGwpfWZ1bmN0aW9uIGgoKXtyZXR1cm4ha3x8aihrLGIpfXZhciBpLGssbDtsPWMoZi51aVNyZWZBY3RpdmV8fFwiXCIsITEpKGQpLHRoaXMuJCRzZXRTdGF0ZUluZm89ZnVuY3Rpb24oYixjKXtpPWEuZ2V0KGIsdyhlKSksaz1jLGcoKX0sZC4kb24oXCIkc3RhdGVDaGFuZ2VTdWNjZXNzXCIsZyl9XX19ZnVuY3Rpb24geihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGEuaXMoYil9fWZ1bmN0aW9uIEEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBhLmluY2x1ZGVzKGIpfX1mdW5jdGlvbiBCKGEsYil7ZnVuY3Rpb24gZShhKXt0aGlzLmxvY2Fscz1hLmxvY2Fscy5nbG9iYWxzLHRoaXMucGFyYW1zPXRoaXMubG9jYWxzLiRzdGF0ZVBhcmFtc31mdW5jdGlvbiBmKCl7dGhpcy5sb2NhbHM9bnVsbCx0aGlzLnBhcmFtcz1udWxsfWZ1bmN0aW9uIGcoYyxnKXtpZihudWxsIT1nLnJlZGlyZWN0VG8pe3ZhciBoLGo9Zy5yZWRpcmVjdFRvO2lmKEUoaikpaD1qO2Vsc2V7aWYoIUQoaikpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCAncmVkaXJlY3RUbycgaW4gd2hlbigpXCIpO2g9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gaihhLGIucGF0aCgpLGIuc2VhcmNoKCkpfX1iLndoZW4oYyxoKX1lbHNlIGEuc3RhdGUoZChnLHtwYXJlbnQ6bnVsbCxuYW1lOlwicm91dGU6XCIrZW5jb2RlVVJJQ29tcG9uZW50KGMpLHVybDpjLG9uRW50ZXI6ZSxvbkV4aXQ6Zn0pKTtyZXR1cm4gaS5wdXNoKGcpLHRoaXN9ZnVuY3Rpb24gaChhLGIsZCl7ZnVuY3Rpb24gZShhKXtyZXR1cm5cIlwiIT09YS5uYW1lP2E6Y312YXIgZj17cm91dGVzOmkscGFyYW1zOmQsY3VycmVudDpjfTtyZXR1cm4gYi4kb24oXCIkc3RhdGVDaGFuZ2VTdGFydFwiLGZ1bmN0aW9uKGEsYyxkLGYpe2IuJGJyb2FkY2FzdChcIiRyb3V0ZUNoYW5nZVN0YXJ0XCIsZShjKSxlKGYpKX0pLGIuJG9uKFwiJHN0YXRlQ2hhbmdlU3VjY2Vzc1wiLGZ1bmN0aW9uKGEsYyxkLGcpe2YuY3VycmVudD1lKGMpLGIuJGJyb2FkY2FzdChcIiRyb3V0ZUNoYW5nZVN1Y2Nlc3NcIixlKGMpLGUoZykpLEooZCxmLnBhcmFtcyl9KSxiLiRvbihcIiRzdGF0ZUNoYW5nZUVycm9yXCIsZnVuY3Rpb24oYSxjLGQsZixnLGgpe2IuJGJyb2FkY2FzdChcIiRyb3V0ZUNoYW5nZUVycm9yXCIsZShjKSxlKGYpLGgpfSksZn12YXIgaT1bXTtlLiRpbmplY3Q9W1wiJCRzdGF0ZVwiXSx0aGlzLndoZW49Zyx0aGlzLiRnZXQ9aCxoLiRpbmplY3Q9W1wiJHN0YXRlXCIsXCIkcm9vdFNjb3BlXCIsXCIkcm91dGVQYXJhbXNcIl19dmFyIEM9Yi5pc0RlZmluZWQsRD1iLmlzRnVuY3Rpb24sRT1iLmlzU3RyaW5nLEY9Yi5pc09iamVjdCxHPWIuaXNBcnJheSxIPWIuZm9yRWFjaCxJPWIuZXh0ZW5kLEo9Yi5jb3B5O2IubW9kdWxlKFwidWkucm91dGVyLnV0aWxcIixbXCJuZ1wiXSksYi5tb2R1bGUoXCJ1aS5yb3V0ZXIucm91dGVyXCIsW1widWkucm91dGVyLnV0aWxcIl0pLGIubW9kdWxlKFwidWkucm91dGVyLnN0YXRlXCIsW1widWkucm91dGVyLnJvdXRlclwiLFwidWkucm91dGVyLnV0aWxcIl0pLGIubW9kdWxlKFwidWkucm91dGVyXCIsW1widWkucm91dGVyLnN0YXRlXCJdKSxiLm1vZHVsZShcInVpLnJvdXRlci5jb21wYXRcIixbXCJ1aS5yb3V0ZXJcIl0pLGwuJGluamVjdD1bXCIkcVwiLFwiJGluamVjdG9yXCJdLGIubW9kdWxlKFwidWkucm91dGVyLnV0aWxcIikuc2VydmljZShcIiRyZXNvbHZlXCIsbCksbS4kaW5qZWN0PVtcIiRodHRwXCIsXCIkdGVtcGxhdGVDYWNoZVwiLFwiJGluamVjdG9yXCJdLGIubW9kdWxlKFwidWkucm91dGVyLnV0aWxcIikuc2VydmljZShcIiR0ZW1wbGF0ZUZhY3RvcnlcIixtKSxuLnByb3RvdHlwZS5jb25jYXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBuKHRoaXMuc291cmNlUGF0aCthK3RoaXMuc291cmNlU2VhcmNoKX0sbi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zb3VyY2V9LG4ucHJvdG90eXBlLmV4ZWM9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnJlZ2V4cC5leGVjKGEpO2lmKCFjKXJldHVybiBudWxsO3ZhciBkLGU9dGhpcy5wYXJhbXMsZj1lLmxlbmd0aCxnPXRoaXMuc2VnbWVudHMubGVuZ3RoLTEsaD17fTtpZihnIT09Yy5sZW5ndGgtMSl0aHJvdyBuZXcgRXJyb3IoXCJVbmJhbGFuY2VkIGNhcHR1cmUgZ3JvdXAgaW4gcm91dGUgJ1wiK3RoaXMuc291cmNlK1wiJ1wiKTtmb3IoZD0wO2c+ZDtkKyspaFtlW2RdXT1jW2QrMV07Zm9yKDtmPmQ7ZCsrKWhbZVtkXV09YltlW2RdXTtyZXR1cm4gaH0sbi5wcm90b3R5cGUucGFyYW1ldGVycz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmFtc30sbi5wcm90b3R5cGUuZm9ybWF0PWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc2VnbWVudHMsYz10aGlzLnBhcmFtcztpZighYSlyZXR1cm4gYi5qb2luKFwiXCIpO3ZhciBkLGUsZixnPWIubGVuZ3RoLTEsaD1jLmxlbmd0aCxpPWJbMF07Zm9yKGQ9MDtnPmQ7ZCsrKWY9YVtjW2RdXSxudWxsIT1mJiYoaSs9ZW5jb2RlVVJJQ29tcG9uZW50KGYpKSxpKz1iW2QrMV07Zm9yKDtoPmQ7ZCsrKWY9YVtjW2RdXSxudWxsIT1mJiYoaSs9KGU/XCImXCI6XCI/XCIpK2NbZF0rXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGYpLGU9ITApO3JldHVybiBpfSxiLm1vZHVsZShcInVpLnJvdXRlci51dGlsXCIpLnByb3ZpZGVyKFwiJHVybE1hdGNoZXJGYWN0b3J5XCIsbykscC4kaW5qZWN0PVtcIiR1cmxNYXRjaGVyRmFjdG9yeVByb3ZpZGVyXCJdLGIubW9kdWxlKFwidWkucm91dGVyLnJvdXRlclwiKS5wcm92aWRlcihcIiR1cmxSb3V0ZXJcIixwKSxxLiRpbmplY3Q9W1wiJHVybFJvdXRlclByb3ZpZGVyXCIsXCIkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlclwiLFwiJGxvY2F0aW9uUHJvdmlkZXJcIl0sYi5tb2R1bGUoXCJ1aS5yb3V0ZXIuc3RhdGVcIikudmFsdWUoXCIkc3RhdGVQYXJhbXNcIix7fSkucHJvdmlkZXIoXCIkc3RhdGVcIixxKSxyLiRpbmplY3Q9W10sYi5tb2R1bGUoXCJ1aS5yb3V0ZXIuc3RhdGVcIikucHJvdmlkZXIoXCIkdmlld1wiLHIpLGIubW9kdWxlKFwidWkucm91dGVyLnN0YXRlXCIpLnByb3ZpZGVyKFwiJHVpVmlld1Njcm9sbFwiLHMpLHQuJGluamVjdD1bXCIkc3RhdGVcIixcIiRpbmplY3RvclwiLFwiJHVpVmlld1Njcm9sbFwiXSx1LiRpbmplY3Q9W1wiJGNvbXBpbGVcIixcIiRjb250cm9sbGVyXCIsXCIkc3RhdGVcIl0sYi5tb2R1bGUoXCJ1aS5yb3V0ZXIuc3RhdGVcIikuZGlyZWN0aXZlKFwidWlWaWV3XCIsdCksYi5tb2R1bGUoXCJ1aS5yb3V0ZXIuc3RhdGVcIikuZGlyZWN0aXZlKFwidWlWaWV3XCIsdSkseC4kaW5qZWN0PVtcIiRzdGF0ZVwiLFwiJHRpbWVvdXRcIl0seS4kaW5qZWN0PVtcIiRzdGF0ZVwiLFwiJHN0YXRlUGFyYW1zXCIsXCIkaW50ZXJwb2xhdGVcIl0sYi5tb2R1bGUoXCJ1aS5yb3V0ZXIuc3RhdGVcIikuZGlyZWN0aXZlKFwidWlTcmVmXCIseCkuZGlyZWN0aXZlKFwidWlTcmVmQWN0aXZlXCIseSksei4kaW5qZWN0PVtcIiRzdGF0ZVwiXSxBLiRpbmplY3Q9W1wiJHN0YXRlXCJdLGIubW9kdWxlKFwidWkucm91dGVyLnN0YXRlXCIpLmZpbHRlcihcImlzU3RhdGVcIix6KS5maWx0ZXIoXCJpbmNsdWRlZEJ5U3RhdGVcIixBKSxCLiRpbmplY3Q9W1wiJHN0YXRlUHJvdmlkZXJcIixcIiR1cmxSb3V0ZXJQcm92aWRlclwiXSxiLm1vZHVsZShcInVpLnJvdXRlci5jb21wYXRcIikucHJvdmlkZXIoXCIkcm91dGVcIixCKS5kaXJlY3RpdmUoXCJuZ1ZpZXdcIix0KX0od2luZG93LHdpbmRvdy5hbmd1bGFyKTtcbn0pLmNhbGwoZ2xvYmFsLCBtb2R1bGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcblxufSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pIiwiKGZ1bmN0aW9uIChnbG9iYWwpe1xuO19fYnJvd3NlcmlmeV9zaGltX3JlcXVpcmVfXz1yZXF1aXJlOyhmdW5jdGlvbiBicm93c2VyaWZ5U2hpbShtb2R1bGUsIGV4cG9ydHMsIHJlcXVpcmUsIGRlZmluZSwgYnJvd3NlcmlmeV9zaGltX19kZWZpbmVfX21vZHVsZV9fZXhwb3J0X18pIHtcbi8qXG4gQW5ndWxhckpTIHYxLjIuMjZcbiAoYykgMjAxMC0yMDE0IEdvb2dsZSwgSW5jLiBodHRwOi8vYW5ndWxhcmpzLm9yZ1xuIExpY2Vuc2U6IE1JVFxuKi9cbihmdW5jdGlvbihXLFgsdCl7J3VzZSBzdHJpY3QnO2Z1bmN0aW9uIEMoYil7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzWzBdLGMsYT1cIltcIisoYj9iK1wiOlwiOlwiXCIpK2ErXCJdIGh0dHA6Ly9lcnJvcnMuYW5ndWxhcmpzLm9yZy8xLjIuMjYvXCIrKGI/YitcIi9cIjpcIlwiKSthO2ZvcihjPTE7Yzxhcmd1bWVudHMubGVuZ3RoO2MrKylhPWErKDE9PWM/XCI/XCI6XCImXCIpK1wicFwiKyhjLTEpK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudChcImZ1bmN0aW9uXCI9PXR5cGVvZiBhcmd1bWVudHNbY10/YXJndW1lbnRzW2NdLnRvU3RyaW5nKCkucmVwbGFjZSgvIFxce1tcXHNcXFNdKiQvLFwiXCIpOlwidW5kZWZpbmVkXCI9PXR5cGVvZiBhcmd1bWVudHNbY10/XCJ1bmRlZmluZWRcIjpcInN0cmluZ1wiIT10eXBlb2YgYXJndW1lbnRzW2NdP0pTT04uc3RyaW5naWZ5KGFyZ3VtZW50c1tjXSk6YXJndW1lbnRzW2NdKTtyZXR1cm4gRXJyb3IoYSl9fWZ1bmN0aW9uIFBhKGIpe2lmKG51bGw9PWJ8fEdhKGIpKXJldHVybiExO1xudmFyIGE9Yi5sZW5ndGg7cmV0dXJuIDE9PT1iLm5vZGVUeXBlJiZhPyEwOnYoYil8fEooYil8fDA9PT1hfHxcIm51bWJlclwiPT09dHlwZW9mIGEmJjA8YSYmYS0xIGluIGJ9ZnVuY3Rpb24gcihiLGEsYyl7dmFyIGQ7aWYoYilpZihQKGIpKWZvcihkIGluIGIpXCJwcm90b3R5cGVcIj09ZHx8KFwibGVuZ3RoXCI9PWR8fFwibmFtZVwiPT1kfHxiLmhhc093blByb3BlcnR5JiYhYi5oYXNPd25Qcm9wZXJ0eShkKSl8fGEuY2FsbChjLGJbZF0sZCk7ZWxzZSBpZihKKGIpfHxQYShiKSlmb3IoZD0wO2Q8Yi5sZW5ndGg7ZCsrKWEuY2FsbChjLGJbZF0sZCk7ZWxzZSBpZihiLmZvckVhY2gmJmIuZm9yRWFjaCE9PXIpYi5mb3JFYWNoKGEsYyk7ZWxzZSBmb3IoZCBpbiBiKWIuaGFzT3duUHJvcGVydHkoZCkmJmEuY2FsbChjLGJbZF0sZCk7cmV0dXJuIGJ9ZnVuY3Rpb24gWmIoYil7dmFyIGE9W10sYztmb3IoYyBpbiBiKWIuaGFzT3duUHJvcGVydHkoYykmJmEucHVzaChjKTtyZXR1cm4gYS5zb3J0KCl9ZnVuY3Rpb24gVGMoYixcbmEsYyl7Zm9yKHZhciBkPVpiKGIpLGU9MDtlPGQubGVuZ3RoO2UrKylhLmNhbGwoYyxiW2RbZV1dLGRbZV0pO3JldHVybiBkfWZ1bmN0aW9uICRiKGIpe3JldHVybiBmdW5jdGlvbihhLGMpe2IoYyxhKX19ZnVuY3Rpb24gaGIoKXtmb3IodmFyIGI9bWEubGVuZ3RoLGE7Yjspe2ItLTthPW1hW2JdLmNoYXJDb2RlQXQoMCk7aWYoNTc9PWEpcmV0dXJuIG1hW2JdPVwiQVwiLG1hLmpvaW4oXCJcIik7aWYoOTA9PWEpbWFbYl09XCIwXCI7ZWxzZSByZXR1cm4gbWFbYl09U3RyaW5nLmZyb21DaGFyQ29kZShhKzEpLG1hLmpvaW4oXCJcIil9bWEudW5zaGlmdChcIjBcIik7cmV0dXJuIG1hLmpvaW4oXCJcIil9ZnVuY3Rpb24gYWMoYixhKXthP2IuJCRoYXNoS2V5PWE6ZGVsZXRlIGIuJCRoYXNoS2V5fWZ1bmN0aW9uIEQoYil7dmFyIGE9Yi4kJGhhc2hLZXk7cihhcmd1bWVudHMsZnVuY3Rpb24oYSl7YSE9PWImJnIoYSxmdW5jdGlvbihhLGMpe2JbY109YX0pfSk7YWMoYixhKTtyZXR1cm4gYn1mdW5jdGlvbiBVKGIpe3JldHVybiBwYXJzZUludChiLFxuMTApfWZ1bmN0aW9uIGJjKGIsYSl7cmV0dXJuIEQobmV3IChEKGZ1bmN0aW9uKCl7fSx7cHJvdG90eXBlOmJ9KSksYSl9ZnVuY3Rpb24gRSgpe31mdW5jdGlvbiBRYShiKXtyZXR1cm4gYn1mdW5jdGlvbiBiYShiKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYn19ZnVuY3Rpb24geChiKXtyZXR1cm5cInVuZGVmaW5lZFwiPT09dHlwZW9mIGJ9ZnVuY3Rpb24geShiKXtyZXR1cm5cInVuZGVmaW5lZFwiIT09dHlwZW9mIGJ9ZnVuY3Rpb24gVChiKXtyZXR1cm4gbnVsbCE9YiYmXCJvYmplY3RcIj09PXR5cGVvZiBifWZ1bmN0aW9uIHYoYil7cmV0dXJuXCJzdHJpbmdcIj09PXR5cGVvZiBifWZ1bmN0aW9uIGliKGIpe3JldHVyblwibnVtYmVyXCI9PT10eXBlb2YgYn1mdW5jdGlvbiB0YShiKXtyZXR1cm5cIltvYmplY3QgRGF0ZV1cIj09PXphLmNhbGwoYil9ZnVuY3Rpb24gUChiKXtyZXR1cm5cImZ1bmN0aW9uXCI9PT10eXBlb2YgYn1mdW5jdGlvbiBqYihiKXtyZXR1cm5cIltvYmplY3QgUmVnRXhwXVwiPT09emEuY2FsbChiKX1cbmZ1bmN0aW9uIEdhKGIpe3JldHVybiBiJiZiLmRvY3VtZW50JiZiLmxvY2F0aW9uJiZiLmFsZXJ0JiZiLnNldEludGVydmFsfWZ1bmN0aW9uIFVjKGIpe3JldHVybiEoIWJ8fCEoYi5ub2RlTmFtZXx8Yi5wcm9wJiZiLmF0dHImJmIuZmluZCkpfWZ1bmN0aW9uIFZjKGIsYSxjKXt2YXIgZD1bXTtyKGIsZnVuY3Rpb24oYixmLGcpe2QucHVzaChhLmNhbGwoYyxiLGYsZykpfSk7cmV0dXJuIGR9ZnVuY3Rpb24gUmEoYixhKXtpZihiLmluZGV4T2YpcmV0dXJuIGIuaW5kZXhPZihhKTtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKylpZihhPT09YltjXSlyZXR1cm4gYztyZXR1cm4tMX1mdW5jdGlvbiBTYShiLGEpe3ZhciBjPVJhKGIsYSk7MDw9YyYmYi5zcGxpY2UoYywxKTtyZXR1cm4gYX1mdW5jdGlvbiBIYShiLGEsYyxkKXtpZihHYShiKXx8YiYmYi4kZXZhbEFzeW5jJiZiLiR3YXRjaCl0aHJvdyBUYShcImNwd3NcIik7aWYoYSl7aWYoYj09PWEpdGhyb3cgVGEoXCJjcGlcIik7Yz1jfHxbXTtcbmQ9ZHx8W107aWYoVChiKSl7dmFyIGU9UmEoYyxiKTtpZigtMSE9PWUpcmV0dXJuIGRbZV07Yy5wdXNoKGIpO2QucHVzaChhKX1pZihKKGIpKWZvcih2YXIgZj1hLmxlbmd0aD0wO2Y8Yi5sZW5ndGg7ZisrKWU9SGEoYltmXSxudWxsLGMsZCksVChiW2ZdKSYmKGMucHVzaChiW2ZdKSxkLnB1c2goZSkpLGEucHVzaChlKTtlbHNle3ZhciBnPWEuJCRoYXNoS2V5O0ooYSk/YS5sZW5ndGg9MDpyKGEsZnVuY3Rpb24oYixjKXtkZWxldGUgYVtjXX0pO2ZvcihmIGluIGIpZT1IYShiW2ZdLG51bGwsYyxkKSxUKGJbZl0pJiYoYy5wdXNoKGJbZl0pLGQucHVzaChlKSksYVtmXT1lO2FjKGEsZyl9fWVsc2UgaWYoYT1iKUooYik/YT1IYShiLFtdLGMsZCk6dGEoYik/YT1uZXcgRGF0ZShiLmdldFRpbWUoKSk6amIoYik/KGE9UmVnRXhwKGIuc291cmNlLGIudG9TdHJpbmcoKS5tYXRjaCgvW15cXC9dKiQvKVswXSksYS5sYXN0SW5kZXg9Yi5sYXN0SW5kZXgpOlQoYikmJihhPUhhKGIse30sYyxkKSk7XG5yZXR1cm4gYX1mdW5jdGlvbiBoYShiLGEpe2lmKEooYikpe2E9YXx8W107Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspYVtjXT1iW2NdfWVsc2UgaWYoVChiKSlmb3IoYyBpbiBhPWF8fHt9LGIpIWtiLmNhbGwoYixjKXx8XCIkXCI9PT1jLmNoYXJBdCgwKSYmXCIkXCI9PT1jLmNoYXJBdCgxKXx8KGFbY109YltjXSk7cmV0dXJuIGF8fGJ9ZnVuY3Rpb24gQWEoYixhKXtpZihiPT09YSlyZXR1cm4hMDtpZihudWxsPT09Ynx8bnVsbD09PWEpcmV0dXJuITE7aWYoYiE9PWImJmEhPT1hKXJldHVybiEwO3ZhciBjPXR5cGVvZiBiLGQ7aWYoYz09dHlwZW9mIGEmJlwib2JqZWN0XCI9PWMpaWYoSihiKSl7aWYoIUooYSkpcmV0dXJuITE7aWYoKGM9Yi5sZW5ndGgpPT1hLmxlbmd0aCl7Zm9yKGQ9MDtkPGM7ZCsrKWlmKCFBYShiW2RdLGFbZF0pKXJldHVybiExO3JldHVybiEwfX1lbHNle2lmKHRhKGIpKXJldHVybiB0YShhKT9pc05hTihiLmdldFRpbWUoKSkmJmlzTmFOKGEuZ2V0VGltZSgpKXx8Yi5nZXRUaW1lKCk9PT1cbmEuZ2V0VGltZSgpOiExO2lmKGpiKGIpJiZqYihhKSlyZXR1cm4gYi50b1N0cmluZygpPT1hLnRvU3RyaW5nKCk7aWYoYiYmYi4kZXZhbEFzeW5jJiZiLiR3YXRjaHx8YSYmYS4kZXZhbEFzeW5jJiZhLiR3YXRjaHx8R2EoYil8fEdhKGEpfHxKKGEpKXJldHVybiExO2M9e307Zm9yKGQgaW4gYilpZihcIiRcIiE9PWQuY2hhckF0KDApJiYhUChiW2RdKSl7aWYoIUFhKGJbZF0sYVtkXSkpcmV0dXJuITE7Y1tkXT0hMH1mb3IoZCBpbiBhKWlmKCFjLmhhc093blByb3BlcnR5KGQpJiZcIiRcIiE9PWQuY2hhckF0KDApJiZhW2RdIT09dCYmIVAoYVtkXSkpcmV0dXJuITE7cmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gQmIoYixhKXt2YXIgYz0yPGFyZ3VtZW50cy5sZW5ndGg/QmEuY2FsbChhcmd1bWVudHMsMik6W107cmV0dXJuIVAoYSl8fGEgaW5zdGFuY2VvZiBSZWdFeHA/YTpjLmxlbmd0aD9mdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoP2EuYXBwbHkoYixjLmNvbmNhdChCYS5jYWxsKGFyZ3VtZW50cyxcbjApKSk6YS5hcHBseShiLGMpfTpmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoP2EuYXBwbHkoYixhcmd1bWVudHMpOmEuY2FsbChiKX19ZnVuY3Rpb24gV2MoYixhKXt2YXIgYz1hO1wic3RyaW5nXCI9PT10eXBlb2YgYiYmXCIkXCI9PT1iLmNoYXJBdCgwKT9jPXQ6R2EoYSk/Yz1cIiRXSU5ET1dcIjphJiZYPT09YT9jPVwiJERPQ1VNRU5UXCI6YSYmKGEuJGV2YWxBc3luYyYmYS4kd2F0Y2gpJiYoYz1cIiRTQ09QRVwiKTtyZXR1cm4gY31mdW5jdGlvbiBuYShiLGEpe3JldHVyblwidW5kZWZpbmVkXCI9PT10eXBlb2YgYj90OkpTT04uc3RyaW5naWZ5KGIsV2MsYT9cIiAgXCI6bnVsbCl9ZnVuY3Rpb24gY2MoYil7cmV0dXJuIHYoYik/SlNPTi5wYXJzZShiKTpifWZ1bmN0aW9uIFVhKGIpe1wiZnVuY3Rpb25cIj09PXR5cGVvZiBiP2I9ITA6YiYmMCE9PWIubGVuZ3RoPyhiPUsoXCJcIitiKSxiPSEoXCJmXCI9PWJ8fFwiMFwiPT1ifHxcImZhbHNlXCI9PWJ8fFwibm9cIj09Ynx8XCJuXCI9PWJ8fFwiW11cIj09YikpOmI9ITE7XG5yZXR1cm4gYn1mdW5jdGlvbiBpYShiKXtiPXcoYikuY2xvbmUoKTt0cnl7Yi5lbXB0eSgpfWNhdGNoKGEpe312YXIgYz13KFwiPGRpdj5cIikuYXBwZW5kKGIpLmh0bWwoKTt0cnl7cmV0dXJuIDM9PT1iWzBdLm5vZGVUeXBlP0soYyk6Yy5tYXRjaCgvXig8W14+XSs+KS8pWzFdLnJlcGxhY2UoL148KFtcXHdcXC1dKykvLGZ1bmN0aW9uKGEsYil7cmV0dXJuXCI8XCIrSyhiKX0pfWNhdGNoKGQpe3JldHVybiBLKGMpfX1mdW5jdGlvbiBkYyhiKXt0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChiKX1jYXRjaChhKXt9fWZ1bmN0aW9uIGVjKGIpe3ZhciBhPXt9LGMsZDtyKChifHxcIlwiKS5zcGxpdChcIiZcIiksZnVuY3Rpb24oYil7YiYmKGM9Yi5yZXBsYWNlKC9cXCsvZyxcIiUyMFwiKS5zcGxpdChcIj1cIiksZD1kYyhjWzBdKSx5KGQpJiYoYj15KGNbMV0pP2RjKGNbMV0pOiEwLGtiLmNhbGwoYSxkKT9KKGFbZF0pP2FbZF0ucHVzaChiKTphW2RdPVthW2RdLGJdOmFbZF09YikpfSk7cmV0dXJuIGF9ZnVuY3Rpb24gQ2IoYil7dmFyIGE9XG5bXTtyKGIsZnVuY3Rpb24oYixkKXtKKGIpP3IoYixmdW5jdGlvbihiKXthLnB1c2goQ2EoZCwhMCkrKCEwPT09Yj9cIlwiOlwiPVwiK0NhKGIsITApKSl9KTphLnB1c2goQ2EoZCwhMCkrKCEwPT09Yj9cIlwiOlwiPVwiK0NhKGIsITApKSl9KTtyZXR1cm4gYS5sZW5ndGg/YS5qb2luKFwiJlwiKTpcIlwifWZ1bmN0aW9uIGxiKGIpe3JldHVybiBDYShiLCEwKS5yZXBsYWNlKC8lMjYvZ2ksXCImXCIpLnJlcGxhY2UoLyUzRC9naSxcIj1cIikucmVwbGFjZSgvJTJCL2dpLFwiK1wiKX1mdW5jdGlvbiBDYShiLGEpe3JldHVybiBlbmNvZGVVUklDb21wb25lbnQoYikucmVwbGFjZSgvJTQwL2dpLFwiQFwiKS5yZXBsYWNlKC8lM0EvZ2ksXCI6XCIpLnJlcGxhY2UoLyUyNC9nLFwiJFwiKS5yZXBsYWNlKC8lMkMvZ2ksXCIsXCIpLnJlcGxhY2UoLyUyMC9nLGE/XCIlMjBcIjpcIitcIil9ZnVuY3Rpb24gWGMoYixhKXtmdW5jdGlvbiBjKGEpe2EmJmQucHVzaChhKX12YXIgZD1bYl0sZSxmLGc9W1wibmc6YXBwXCIsXCJuZy1hcHBcIixcIngtbmctYXBwXCIsXG5cImRhdGEtbmctYXBwXCJdLGs9L1xcc25nWzpcXC1dYXBwKDpcXHMqKFtcXHdcXGRfXSspOz8pP1xccy87cihnLGZ1bmN0aW9uKGEpe2dbYV09ITA7YyhYLmdldEVsZW1lbnRCeUlkKGEpKTthPWEucmVwbGFjZShcIjpcIixcIlxcXFw6XCIpO2IucXVlcnlTZWxlY3RvckFsbCYmKHIoYi5xdWVyeVNlbGVjdG9yQWxsKFwiLlwiK2EpLGMpLHIoYi5xdWVyeVNlbGVjdG9yQWxsKFwiLlwiK2ErXCJcXFxcOlwiKSxjKSxyKGIucXVlcnlTZWxlY3RvckFsbChcIltcIithK1wiXVwiKSxjKSl9KTtyKGQsZnVuY3Rpb24oYSl7aWYoIWUpe3ZhciBiPWsuZXhlYyhcIiBcIithLmNsYXNzTmFtZStcIiBcIik7Yj8oZT1hLGY9KGJbMl18fFwiXCIpLnJlcGxhY2UoL1xccysvZyxcIixcIikpOnIoYS5hdHRyaWJ1dGVzLGZ1bmN0aW9uKGIpeyFlJiZnW2IubmFtZV0mJihlPWEsZj1iLnZhbHVlKX0pfX0pO2UmJmEoZSxmP1tmXTpbXSl9ZnVuY3Rpb24gZmMoYixhKXt2YXIgYz1mdW5jdGlvbigpe2I9dyhiKTtpZihiLmluamVjdG9yKCkpe3ZhciBjPWJbMF09PT1YP1xuXCJkb2N1bWVudFwiOmlhKGIpO3Rocm93IFRhKFwiYnRzdHJwZFwiLGMucmVwbGFjZSgvPC8sXCImbHQ7XCIpLnJlcGxhY2UoLz4vLFwiJmd0O1wiKSk7fWE9YXx8W107YS51bnNoaWZ0KFtcIiRwcm92aWRlXCIsZnVuY3Rpb24oYSl7YS52YWx1ZShcIiRyb290RWxlbWVudFwiLGIpfV0pO2EudW5zaGlmdChcIm5nXCIpO2M9Z2MoYSk7Yy5pbnZva2UoW1wiJHJvb3RTY29wZVwiLFwiJHJvb3RFbGVtZW50XCIsXCIkY29tcGlsZVwiLFwiJGluamVjdG9yXCIsXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGEsYixjLGQsZSl7YS4kYXBwbHkoZnVuY3Rpb24oKXtiLmRhdGEoXCIkaW5qZWN0b3JcIixkKTtjKGIpKGEpfSl9XSk7cmV0dXJuIGN9LGQ9L15OR19ERUZFUl9CT09UU1RSQVAhLztpZihXJiYhZC50ZXN0KFcubmFtZSkpcmV0dXJuIGMoKTtXLm5hbWU9Vy5uYW1lLnJlcGxhY2UoZCxcIlwiKTtWYS5yZXN1bWVCb290c3RyYXA9ZnVuY3Rpb24oYil7cihiLGZ1bmN0aW9uKGIpe2EucHVzaChiKX0pO2MoKX19ZnVuY3Rpb24gbWIoYixhKXthPVxuYXx8XCJfXCI7cmV0dXJuIGIucmVwbGFjZShZYyxmdW5jdGlvbihiLGQpe3JldHVybihkP2E6XCJcIikrYi50b0xvd2VyQ2FzZSgpfSl9ZnVuY3Rpb24gRGIoYixhLGMpe2lmKCFiKXRocm93IFRhKFwiYXJlcVwiLGF8fFwiP1wiLGN8fFwicmVxdWlyZWRcIik7cmV0dXJuIGJ9ZnVuY3Rpb24gV2EoYixhLGMpe2MmJkooYikmJihiPWJbYi5sZW5ndGgtMV0pO0RiKFAoYiksYSxcIm5vdCBhIGZ1bmN0aW9uLCBnb3QgXCIrKGImJlwib2JqZWN0XCI9PT10eXBlb2YgYj9iLmNvbnN0cnVjdG9yLm5hbWV8fFwiT2JqZWN0XCI6dHlwZW9mIGIpKTtyZXR1cm4gYn1mdW5jdGlvbiBEYShiLGEpe2lmKFwiaGFzT3duUHJvcGVydHlcIj09PWIpdGhyb3cgVGEoXCJiYWRuYW1lXCIsYSk7fWZ1bmN0aW9uIGhjKGIsYSxjKXtpZighYSlyZXR1cm4gYjthPWEuc3BsaXQoXCIuXCIpO2Zvcih2YXIgZCxlPWIsZj1hLmxlbmd0aCxnPTA7ZzxmO2crKylkPWFbZ10sYiYmKGI9KGU9YilbZF0pO3JldHVybiFjJiZQKGIpP0JiKGUsYik6Yn1mdW5jdGlvbiBFYihiKXt2YXIgYT1cbmJbMF07Yj1iW2IubGVuZ3RoLTFdO2lmKGE9PT1iKXJldHVybiB3KGEpO3ZhciBjPVthXTtkb3thPWEubmV4dFNpYmxpbmc7aWYoIWEpYnJlYWs7Yy5wdXNoKGEpfXdoaWxlKGEhPT1iKTtyZXR1cm4gdyhjKX1mdW5jdGlvbiBaYyhiKXt2YXIgYT1DKFwiJGluamVjdG9yXCIpLGM9QyhcIm5nXCIpO2I9Yi5hbmd1bGFyfHwoYi5hbmd1bGFyPXt9KTtiLiQkbWluRXJyPWIuJCRtaW5FcnJ8fEM7cmV0dXJuIGIubW9kdWxlfHwoYi5tb2R1bGU9ZnVuY3Rpb24oKXt2YXIgYj17fTtyZXR1cm4gZnVuY3Rpb24oZSxmLGcpe2lmKFwiaGFzT3duUHJvcGVydHlcIj09PWUpdGhyb3cgYyhcImJhZG5hbWVcIixcIm1vZHVsZVwiKTtmJiZiLmhhc093blByb3BlcnR5KGUpJiYoYltlXT1udWxsKTtyZXR1cm4gYltlXXx8KGJbZV09ZnVuY3Rpb24oKXtmdW5jdGlvbiBiKGEsZCxlKXtyZXR1cm4gZnVuY3Rpb24oKXtjW2V8fFwicHVzaFwiXShbYSxkLGFyZ3VtZW50c10pO3JldHVybiBufX1pZighZil0aHJvdyBhKFwibm9tb2RcIixcbmUpO3ZhciBjPVtdLGQ9W10sbD1iKFwiJGluamVjdG9yXCIsXCJpbnZva2VcIiksbj17X2ludm9rZVF1ZXVlOmMsX3J1bkJsb2NrczpkLHJlcXVpcmVzOmYsbmFtZTplLHByb3ZpZGVyOmIoXCIkcHJvdmlkZVwiLFwicHJvdmlkZXJcIiksZmFjdG9yeTpiKFwiJHByb3ZpZGVcIixcImZhY3RvcnlcIiksc2VydmljZTpiKFwiJHByb3ZpZGVcIixcInNlcnZpY2VcIiksdmFsdWU6YihcIiRwcm92aWRlXCIsXCJ2YWx1ZVwiKSxjb25zdGFudDpiKFwiJHByb3ZpZGVcIixcImNvbnN0YW50XCIsXCJ1bnNoaWZ0XCIpLGFuaW1hdGlvbjpiKFwiJGFuaW1hdGVQcm92aWRlclwiLFwicmVnaXN0ZXJcIiksZmlsdGVyOmIoXCIkZmlsdGVyUHJvdmlkZXJcIixcInJlZ2lzdGVyXCIpLGNvbnRyb2xsZXI6YihcIiRjb250cm9sbGVyUHJvdmlkZXJcIixcInJlZ2lzdGVyXCIpLGRpcmVjdGl2ZTpiKFwiJGNvbXBpbGVQcm92aWRlclwiLFwiZGlyZWN0aXZlXCIpLGNvbmZpZzpsLHJ1bjpmdW5jdGlvbihhKXtkLnB1c2goYSk7cmV0dXJuIHRoaXN9fTtnJiZsKGcpO3JldHVybiBufSgpKX19KCkpfVxuZnVuY3Rpb24gJGMoYil7RChiLHtib290c3RyYXA6ZmMsY29weTpIYSxleHRlbmQ6RCxlcXVhbHM6QWEsZWxlbWVudDp3LGZvckVhY2g6cixpbmplY3RvcjpnYyxub29wOkUsYmluZDpCYix0b0pzb246bmEsZnJvbUpzb246Y2MsaWRlbnRpdHk6UWEsaXNVbmRlZmluZWQ6eCxpc0RlZmluZWQ6eSxpc1N0cmluZzp2LGlzRnVuY3Rpb246UCxpc09iamVjdDpULGlzTnVtYmVyOmliLGlzRWxlbWVudDpVYyxpc0FycmF5OkosdmVyc2lvbjphZCxpc0RhdGU6dGEsbG93ZXJjYXNlOkssdXBwZXJjYXNlOklhLGNhbGxiYWNrczp7Y291bnRlcjowfSwkJG1pbkVycjpDLCQkY3NwOlhhfSk7WWE9WmMoVyk7dHJ5e1lhKFwibmdMb2NhbGVcIil9Y2F0Y2goYSl7WWEoXCJuZ0xvY2FsZVwiLFtdKS5wcm92aWRlcihcIiRsb2NhbGVcIixiZCl9WWEoXCJuZ1wiLFtcIm5nTG9jYWxlXCJdLFtcIiRwcm92aWRlXCIsZnVuY3Rpb24oYSl7YS5wcm92aWRlcih7JCRzYW5pdGl6ZVVyaTpjZH0pO2EucHJvdmlkZXIoXCIkY29tcGlsZVwiLFxuaWMpLmRpcmVjdGl2ZSh7YTpkZCxpbnB1dDpqYyx0ZXh0YXJlYTpqYyxmb3JtOmVkLHNjcmlwdDpmZCxzZWxlY3Q6Z2Qsc3R5bGU6aGQsb3B0aW9uOmlkLG5nQmluZDpqZCxuZ0JpbmRIdG1sOmtkLG5nQmluZFRlbXBsYXRlOmxkLG5nQ2xhc3M6bWQsbmdDbGFzc0V2ZW46bmQsbmdDbGFzc09kZDpvZCxuZ0Nsb2FrOnBkLG5nQ29udHJvbGxlcjpxZCxuZ0Zvcm06cmQsbmdIaWRlOnNkLG5nSWY6dGQsbmdJbmNsdWRlOnVkLG5nSW5pdDp2ZCxuZ05vbkJpbmRhYmxlOndkLG5nUGx1cmFsaXplOnhkLG5nUmVwZWF0OnlkLG5nU2hvdzp6ZCxuZ1N0eWxlOkFkLG5nU3dpdGNoOkJkLG5nU3dpdGNoV2hlbjpDZCxuZ1N3aXRjaERlZmF1bHQ6RGQsbmdPcHRpb25zOkVkLG5nVHJhbnNjbHVkZTpGZCxuZ01vZGVsOkdkLG5nTGlzdDpIZCxuZ0NoYW5nZTpJZCxyZXF1aXJlZDprYyxuZ1JlcXVpcmVkOmtjLG5nVmFsdWU6SmR9KS5kaXJlY3RpdmUoe25nSW5jbHVkZTpLZH0pLmRpcmVjdGl2ZShGYikuZGlyZWN0aXZlKGxjKTtcbmEucHJvdmlkZXIoeyRhbmNob3JTY3JvbGw6TGQsJGFuaW1hdGU6TWQsJGJyb3dzZXI6TmQsJGNhY2hlRmFjdG9yeTpPZCwkY29udHJvbGxlcjpQZCwkZG9jdW1lbnQ6UWQsJGV4Y2VwdGlvbkhhbmRsZXI6UmQsJGZpbHRlcjptYywkaW50ZXJwb2xhdGU6U2QsJGludGVydmFsOlRkLCRodHRwOlVkLCRodHRwQmFja2VuZDpWZCwkbG9jYXRpb246V2QsJGxvZzpYZCwkcGFyc2U6WWQsJHJvb3RTY29wZTpaZCwkcTokZCwkc2NlOmFlLCRzY2VEZWxlZ2F0ZTpiZSwkc25pZmZlcjpjZSwkdGVtcGxhdGVDYWNoZTpkZSwkdGltZW91dDplZSwkd2luZG93OmZlLCQkckFGOmdlLCQkYXN5bmNDYWxsYmFjazpoZX0pfV0pfWZ1bmN0aW9uIFphKGIpe3JldHVybiBiLnJlcGxhY2UoaWUsZnVuY3Rpb24oYSxiLGQsZSl7cmV0dXJuIGU/ZC50b1VwcGVyQ2FzZSgpOmR9KS5yZXBsYWNlKGplLFwiTW96JDFcIil9ZnVuY3Rpb24gR2IoYixhLGMsZCl7ZnVuY3Rpb24gZShiKXt2YXIgZT1jJiZiP1t0aGlzLmZpbHRlcihiKV06XG5bdGhpc10sbT1hLGgsbCxuLHAscSxzO2lmKCFkfHxudWxsIT1iKWZvcig7ZS5sZW5ndGg7KWZvcihoPWUuc2hpZnQoKSxsPTAsbj1oLmxlbmd0aDtsPG47bCsrKWZvcihwPXcoaFtsXSksbT9wLnRyaWdnZXJIYW5kbGVyKFwiJGRlc3Ryb3lcIik6bT0hbSxxPTAscD0ocz1wLmNoaWxkcmVuKCkpLmxlbmd0aDtxPHA7cSsrKWUucHVzaChFYShzW3FdKSk7cmV0dXJuIGYuYXBwbHkodGhpcyxhcmd1bWVudHMpfXZhciBmPUVhLmZuW2JdLGY9Zi4kb3JpZ2luYWx8fGY7ZS4kb3JpZ2luYWw9ZjtFYS5mbltiXT1lfWZ1bmN0aW9uIFMoYil7aWYoYiBpbnN0YW5jZW9mIFMpcmV0dXJuIGI7dihiKSYmKGI9YWEoYikpO2lmKCEodGhpcyBpbnN0YW5jZW9mIFMpKXtpZih2KGIpJiZcIjxcIiE9Yi5jaGFyQXQoMCkpdGhyb3cgSGIoXCJub3NlbFwiKTtyZXR1cm4gbmV3IFMoYil9aWYodihiKSl7dmFyIGE9YjtiPVg7dmFyIGM7aWYoYz1rZS5leGVjKGEpKWI9W2IuY3JlYXRlRWxlbWVudChjWzFdKV07ZWxzZXt2YXIgZD1cbmIsZTtiPWQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2M9W107aWYoSWIudGVzdChhKSl7ZD1iLmFwcGVuZENoaWxkKGQuY3JlYXRlRWxlbWVudChcImRpdlwiKSk7ZT0obGUuZXhlYyhhKXx8W1wiXCIsXCJcIl0pWzFdLnRvTG93ZXJDYXNlKCk7ZT1lYVtlXXx8ZWEuX2RlZmF1bHQ7ZC5pbm5lckhUTUw9XCI8ZGl2PiYjMTYwOzwvZGl2PlwiK2VbMV0rYS5yZXBsYWNlKG1lLFwiPCQxPjwvJDI+XCIpK2VbMl07ZC5yZW1vdmVDaGlsZChkLmZpcnN0Q2hpbGQpO2ZvcihhPWVbMF07YS0tOylkPWQubGFzdENoaWxkO2E9MDtmb3IoZT1kLmNoaWxkTm9kZXMubGVuZ3RoO2E8ZTsrK2EpYy5wdXNoKGQuY2hpbGROb2Rlc1thXSk7ZD1iLmZpcnN0Q2hpbGQ7ZC50ZXh0Q29udGVudD1cIlwifWVsc2UgYy5wdXNoKGQuY3JlYXRlVGV4dE5vZGUoYSkpO2IudGV4dENvbnRlbnQ9XCJcIjtiLmlubmVySFRNTD1cIlwiO2I9Y31KYih0aGlzLGIpO3coWC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpLmFwcGVuZCh0aGlzKX1lbHNlIEpiKHRoaXMsXG5iKX1mdW5jdGlvbiBLYihiKXtyZXR1cm4gYi5jbG9uZU5vZGUoITApfWZ1bmN0aW9uIEphKGIpe0xiKGIpO3ZhciBhPTA7Zm9yKGI9Yi5jaGlsZE5vZGVzfHxbXTthPGIubGVuZ3RoO2ErKylKYShiW2FdKX1mdW5jdGlvbiBuYyhiLGEsYyxkKXtpZih5KGQpKXRocm93IEhiKFwib2ZmYXJnc1wiKTt2YXIgZT1vYShiLFwiZXZlbnRzXCIpO29hKGIsXCJoYW5kbGVcIikmJih4KGEpP3IoZSxmdW5jdGlvbihhLGMpeyRhKGIsYyxhKTtkZWxldGUgZVtjXX0pOnIoYS5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSl7eChjKT8oJGEoYixhLGVbYV0pLGRlbGV0ZSBlW2FdKTpTYShlW2FdfHxbXSxjKX0pKX1mdW5jdGlvbiBMYihiLGEpe3ZhciBjPWIubmczMzksZD1hYltjXTtkJiYoYT9kZWxldGUgYWJbY10uZGF0YVthXTooZC5oYW5kbGUmJihkLmV2ZW50cy4kZGVzdHJveSYmZC5oYW5kbGUoe30sXCIkZGVzdHJveVwiKSxuYyhiKSksZGVsZXRlIGFiW2NdLGIubmczMzk9dCkpfWZ1bmN0aW9uIG9hKGIsYSxjKXt2YXIgZD1cbmIubmczMzksZD1hYltkfHwtMV07aWYoeShjKSlkfHwoYi5uZzMzOT1kPSsrbmUsZD1hYltkXT17fSksZFthXT1jO2Vsc2UgcmV0dXJuIGQmJmRbYV19ZnVuY3Rpb24gTWIoYixhLGMpe3ZhciBkPW9hKGIsXCJkYXRhXCIpLGU9eShjKSxmPSFlJiZ5KGEpLGc9ZiYmIVQoYSk7ZHx8Z3x8b2EoYixcImRhdGFcIixkPXt9KTtpZihlKWRbYV09YztlbHNlIGlmKGYpe2lmKGcpcmV0dXJuIGQmJmRbYV07RChkLGEpfWVsc2UgcmV0dXJuIGR9ZnVuY3Rpb24gTmIoYixhKXtyZXR1cm4gYi5nZXRBdHRyaWJ1dGU/LTE8KFwiIFwiKyhiLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfHxcIlwiKStcIiBcIikucmVwbGFjZSgvW1xcblxcdF0vZyxcIiBcIikuaW5kZXhPZihcIiBcIithK1wiIFwiKTohMX1mdW5jdGlvbiBuYihiLGEpe2EmJmIuc2V0QXR0cmlidXRlJiZyKGEuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEpe2Iuc2V0QXR0cmlidXRlKFwiY2xhc3NcIixhYSgoXCIgXCIrKGIuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCIpK1wiIFwiKS5yZXBsYWNlKC9bXFxuXFx0XS9nLFxuXCIgXCIpLnJlcGxhY2UoXCIgXCIrYWEoYSkrXCIgXCIsXCIgXCIpKSl9KX1mdW5jdGlvbiBvYihiLGEpe2lmKGEmJmIuc2V0QXR0cmlidXRlKXt2YXIgYz0oXCIgXCIrKGIuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCIpK1wiIFwiKS5yZXBsYWNlKC9bXFxuXFx0XS9nLFwiIFwiKTtyKGEuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEpe2E9YWEoYSk7LTE9PT1jLmluZGV4T2YoXCIgXCIrYStcIiBcIikmJihjKz1hK1wiIFwiKX0pO2Iuc2V0QXR0cmlidXRlKFwiY2xhc3NcIixhYShjKSl9fWZ1bmN0aW9uIEpiKGIsYSl7aWYoYSl7YT1hLm5vZGVOYW1lfHwheShhLmxlbmd0aCl8fEdhKGEpP1thXTphO2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKWIucHVzaChhW2NdKX19ZnVuY3Rpb24gb2MoYixhKXtyZXR1cm4gcGIoYixcIiRcIisoYXx8XCJuZ0NvbnRyb2xsZXJcIikrXCJDb250cm9sbGVyXCIpfWZ1bmN0aW9uIHBiKGIsYSxjKXs5PT1iLm5vZGVUeXBlJiYoYj1iLmRvY3VtZW50RWxlbWVudCk7Zm9yKGE9SihhKT9hOlthXTtiOyl7Zm9yKHZhciBkPVxuMCxlPWEubGVuZ3RoO2Q8ZTtkKyspaWYoKGM9dy5kYXRhKGIsYVtkXSkpIT09dClyZXR1cm4gYztiPWIucGFyZW50Tm9kZXx8MTE9PT1iLm5vZGVUeXBlJiZiLmhvc3R9fWZ1bmN0aW9uIHBjKGIpe2Zvcih2YXIgYT0wLGM9Yi5jaGlsZE5vZGVzO2E8Yy5sZW5ndGg7YSsrKUphKGNbYV0pO2Zvcig7Yi5maXJzdENoaWxkOyliLnJlbW92ZUNoaWxkKGIuZmlyc3RDaGlsZCl9ZnVuY3Rpb24gcWMoYixhKXt2YXIgYz1xYlthLnRvTG93ZXJDYXNlKCldO3JldHVybiBjJiZyY1tiLm5vZGVOYW1lXSYmY31mdW5jdGlvbiBvZShiLGEpe3ZhciBjPWZ1bmN0aW9uKGMsZSl7Yy5wcmV2ZW50RGVmYXVsdHx8KGMucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oKXtjLnJldHVyblZhbHVlPSExfSk7Yy5zdG9wUHJvcGFnYXRpb258fChjLnN0b3BQcm9wYWdhdGlvbj1mdW5jdGlvbigpe2MuY2FuY2VsQnViYmxlPSEwfSk7Yy50YXJnZXR8fChjLnRhcmdldD1jLnNyY0VsZW1lbnR8fFgpO2lmKHgoYy5kZWZhdWx0UHJldmVudGVkKSl7dmFyIGY9XG5jLnByZXZlbnREZWZhdWx0O2MucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oKXtjLmRlZmF1bHRQcmV2ZW50ZWQ9ITA7Zi5jYWxsKGMpfTtjLmRlZmF1bHRQcmV2ZW50ZWQ9ITF9Yy5pc0RlZmF1bHRQcmV2ZW50ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gYy5kZWZhdWx0UHJldmVudGVkfHwhMT09PWMucmV0dXJuVmFsdWV9O3ZhciBnPWhhKGFbZXx8Yy50eXBlXXx8W10pO3IoZyxmdW5jdGlvbihhKXthLmNhbGwoYixjKX0pOzg+PVE/KGMucHJldmVudERlZmF1bHQ9bnVsbCxjLnN0b3BQcm9wYWdhdGlvbj1udWxsLGMuaXNEZWZhdWx0UHJldmVudGVkPW51bGwpOihkZWxldGUgYy5wcmV2ZW50RGVmYXVsdCxkZWxldGUgYy5zdG9wUHJvcGFnYXRpb24sZGVsZXRlIGMuaXNEZWZhdWx0UHJldmVudGVkKX07Yy5lbGVtPWI7cmV0dXJuIGN9ZnVuY3Rpb24gS2EoYixhKXt2YXIgYz10eXBlb2YgYixkO1wiZnVuY3Rpb25cIj09Y3x8XCJvYmplY3RcIj09YyYmbnVsbCE9PWI/XCJmdW5jdGlvblwiPT10eXBlb2YoZD1cbmIuJCRoYXNoS2V5KT9kPWIuJCRoYXNoS2V5KCk6ZD09PXQmJihkPWIuJCRoYXNoS2V5PShhfHxoYikoKSk6ZD1iO3JldHVybiBjK1wiOlwiK2R9ZnVuY3Rpb24gYmIoYixhKXtpZihhKXt2YXIgYz0wO3RoaXMubmV4dFVpZD1mdW5jdGlvbigpe3JldHVybisrY319cihiLHRoaXMucHV0LHRoaXMpfWZ1bmN0aW9uIHNjKGIpe3ZhciBhLGM7XCJmdW5jdGlvblwiPT09dHlwZW9mIGI/KGE9Yi4kaW5qZWN0KXx8KGE9W10sYi5sZW5ndGgmJihjPWIudG9TdHJpbmcoKS5yZXBsYWNlKHBlLFwiXCIpLGM9Yy5tYXRjaChxZSkscihjWzFdLnNwbGl0KHJlKSxmdW5jdGlvbihiKXtiLnJlcGxhY2Uoc2UsZnVuY3Rpb24oYixjLGQpe2EucHVzaChkKX0pfSkpLGIuJGluamVjdD1hKTpKKGIpPyhjPWIubGVuZ3RoLTEsV2EoYltjXSxcImZuXCIpLGE9Yi5zbGljZSgwLGMpKTpXYShiLFwiZm5cIiwhMCk7cmV0dXJuIGF9ZnVuY3Rpb24gZ2MoYil7ZnVuY3Rpb24gYShhKXtyZXR1cm4gZnVuY3Rpb24oYixjKXtpZihUKGIpKXIoYixcbiRiKGEpKTtlbHNlIHJldHVybiBhKGIsYyl9fWZ1bmN0aW9uIGMoYSxiKXtEYShhLFwic2VydmljZVwiKTtpZihQKGIpfHxKKGIpKWI9bi5pbnN0YW50aWF0ZShiKTtpZighYi4kZ2V0KXRocm93IGNiKFwicGdldFwiLGEpO3JldHVybiBsW2Era109Yn1mdW5jdGlvbiBkKGEsYil7cmV0dXJuIGMoYSx7JGdldDpifSl9ZnVuY3Rpb24gZShhKXt2YXIgYj1bXSxjLGQsZixrO3IoYSxmdW5jdGlvbihhKXtpZighaC5nZXQoYSkpe2gucHV0KGEsITApO3RyeXtpZih2KGEpKWZvcihjPVlhKGEpLGI9Yi5jb25jYXQoZShjLnJlcXVpcmVzKSkuY29uY2F0KGMuX3J1bkJsb2NrcyksZD1jLl9pbnZva2VRdWV1ZSxmPTAsaz1kLmxlbmd0aDtmPGs7ZisrKXt2YXIgZz1kW2ZdLG09bi5nZXQoZ1swXSk7bVtnWzFdXS5hcHBseShtLGdbMl0pfWVsc2UgUChhKT9iLnB1c2gobi5pbnZva2UoYSkpOkooYSk/Yi5wdXNoKG4uaW52b2tlKGEpKTpXYShhLFwibW9kdWxlXCIpfWNhdGNoKGwpe3Rocm93IEooYSkmJihhPVxuYVthLmxlbmd0aC0xXSksbC5tZXNzYWdlJiYobC5zdGFjayYmLTE9PWwuc3RhY2suaW5kZXhPZihsLm1lc3NhZ2UpKSYmKGw9bC5tZXNzYWdlK1wiXFxuXCIrbC5zdGFjayksY2IoXCJtb2R1bGVyclwiLGEsbC5zdGFja3x8bC5tZXNzYWdlfHxsKTt9fX0pO3JldHVybiBifWZ1bmN0aW9uIGYoYSxiKXtmdW5jdGlvbiBjKGQpe2lmKGEuaGFzT3duUHJvcGVydHkoZCkpe2lmKGFbZF09PT1nKXRocm93IGNiKFwiY2RlcFwiLGQrXCIgPC0gXCIrbS5qb2luKFwiIDwtIFwiKSk7cmV0dXJuIGFbZF19dHJ5e3JldHVybiBtLnVuc2hpZnQoZCksYVtkXT1nLGFbZF09YihkKX1jYXRjaChlKXt0aHJvdyBhW2RdPT09ZyYmZGVsZXRlIGFbZF0sZTt9ZmluYWxseXttLnNoaWZ0KCl9fWZ1bmN0aW9uIGQoYSxiLGUpe3ZhciBmPVtdLGs9c2MoYSksZyxtLGg7bT0wO2ZvcihnPWsubGVuZ3RoO208ZzttKyspe2g9a1ttXTtpZihcInN0cmluZ1wiIT09dHlwZW9mIGgpdGhyb3cgY2IoXCJpdGtuXCIsaCk7Zi5wdXNoKGUmJmUuaGFzT3duUHJvcGVydHkoaCk/XG5lW2hdOmMoaCkpfUooYSkmJihhPWFbZ10pO3JldHVybiBhLmFwcGx5KGIsZil9cmV0dXJue2ludm9rZTpkLGluc3RhbnRpYXRlOmZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oKXt9LGU7Yy5wcm90b3R5cGU9KEooYSk/YVthLmxlbmd0aC0xXTphKS5wcm90b3R5cGU7Yz1uZXcgYztlPWQoYSxjLGIpO3JldHVybiBUKGUpfHxQKGUpP2U6Y30sZ2V0OmMsYW5ub3RhdGU6c2MsaGFzOmZ1bmN0aW9uKGIpe3JldHVybiBsLmhhc093blByb3BlcnR5KGIrayl8fGEuaGFzT3duUHJvcGVydHkoYil9fX12YXIgZz17fSxrPVwiUHJvdmlkZXJcIixtPVtdLGg9bmV3IGJiKFtdLCEwKSxsPXskcHJvdmlkZTp7cHJvdmlkZXI6YShjKSxmYWN0b3J5OmEoZCksc2VydmljZTphKGZ1bmN0aW9uKGEsYil7cmV0dXJuIGQoYSxbXCIkaW5qZWN0b3JcIixmdW5jdGlvbihhKXtyZXR1cm4gYS5pbnN0YW50aWF0ZShiKX1dKX0pLHZhbHVlOmEoZnVuY3Rpb24oYSxiKXtyZXR1cm4gZChhLGJhKGIpKX0pLGNvbnN0YW50OmEoZnVuY3Rpb24oYSxcbmIpe0RhKGEsXCJjb25zdGFudFwiKTtsW2FdPWI7cFthXT1ifSksZGVjb3JhdG9yOmZ1bmN0aW9uKGEsYil7dmFyIGM9bi5nZXQoYStrKSxkPWMuJGdldDtjLiRnZXQ9ZnVuY3Rpb24oKXt2YXIgYT1xLmludm9rZShkLGMpO3JldHVybiBxLmludm9rZShiLG51bGwseyRkZWxlZ2F0ZTphfSl9fX19LG49bC4kaW5qZWN0b3I9ZihsLGZ1bmN0aW9uKCl7dGhyb3cgY2IoXCJ1bnByXCIsbS5qb2luKFwiIDwtIFwiKSk7fSkscD17fSxxPXAuJGluamVjdG9yPWYocCxmdW5jdGlvbihhKXthPW4uZ2V0KGErayk7cmV0dXJuIHEuaW52b2tlKGEuJGdldCxhKX0pO3IoZShiKSxmdW5jdGlvbihhKXtxLmludm9rZShhfHxFKX0pO3JldHVybiBxfWZ1bmN0aW9uIExkKCl7dmFyIGI9ITA7dGhpcy5kaXNhYmxlQXV0b1Njcm9sbGluZz1mdW5jdGlvbigpe2I9ITF9O3RoaXMuJGdldD1bXCIkd2luZG93XCIsXCIkbG9jYXRpb25cIixcIiRyb290U2NvcGVcIixmdW5jdGlvbihhLGMsZCl7ZnVuY3Rpb24gZShhKXt2YXIgYj1udWxsO1xucihhLGZ1bmN0aW9uKGEpe2J8fFwiYVwiIT09SyhhLm5vZGVOYW1lKXx8KGI9YSl9KTtyZXR1cm4gYn1mdW5jdGlvbiBmKCl7dmFyIGI9Yy5oYXNoKCksZDtiPyhkPWcuZ2V0RWxlbWVudEJ5SWQoYikpP2Quc2Nyb2xsSW50b1ZpZXcoKTooZD1lKGcuZ2V0RWxlbWVudHNCeU5hbWUoYikpKT9kLnNjcm9sbEludG9WaWV3KCk6XCJ0b3BcIj09PWImJmEuc2Nyb2xsVG8oMCwwKTphLnNjcm9sbFRvKDAsMCl9dmFyIGc9YS5kb2N1bWVudDtiJiZkLiR3YXRjaChmdW5jdGlvbigpe3JldHVybiBjLmhhc2goKX0sZnVuY3Rpb24oKXtkLiRldmFsQXN5bmMoZil9KTtyZXR1cm4gZn1dfWZ1bmN0aW9uIGhlKCl7dGhpcy4kZ2V0PVtcIiQkckFGXCIsXCIkdGltZW91dFwiLGZ1bmN0aW9uKGIsYSl7cmV0dXJuIGIuc3VwcG9ydGVkP2Z1bmN0aW9uKGEpe3JldHVybiBiKGEpfTpmdW5jdGlvbihiKXtyZXR1cm4gYShiLDAsITEpfX1dfWZ1bmN0aW9uIHRlKGIsYSxjLGQpe2Z1bmN0aW9uIGUoYSl7dHJ5e2EuYXBwbHkobnVsbCxcbkJhLmNhbGwoYXJndW1lbnRzLDEpKX1maW5hbGx5e2lmKHMtLSwwPT09cylmb3IoO0YubGVuZ3RoOyl0cnl7Ri5wb3AoKSgpfWNhdGNoKGIpe2MuZXJyb3IoYil9fX1mdW5jdGlvbiBmKGEsYil7KGZ1bmN0aW9uIGZhKCl7cih1LGZ1bmN0aW9uKGEpe2EoKX0pO0E9YihmYSxhKX0pKCl9ZnVuY3Rpb24gZygpe3o9bnVsbDtOIT1rLnVybCgpJiYoTj1rLnVybCgpLHIoY2EsZnVuY3Rpb24oYSl7YShrLnVybCgpKX0pKX12YXIgaz10aGlzLG09YVswXSxoPWIubG9jYXRpb24sbD1iLmhpc3Rvcnksbj1iLnNldFRpbWVvdXQscD1iLmNsZWFyVGltZW91dCxxPXt9O2suaXNNb2NrPSExO3ZhciBzPTAsRj1bXTtrLiQkY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3Q9ZTtrLiQkaW5jT3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQ9ZnVuY3Rpb24oKXtzKyt9O2subm90aWZ5V2hlbk5vT3V0c3RhbmRpbmdSZXF1ZXN0cz1mdW5jdGlvbihhKXtyKHUsZnVuY3Rpb24oYSl7YSgpfSk7MD09PXM/YSgpOkYucHVzaChhKX07XG52YXIgdT1bXSxBO2suYWRkUG9sbEZuPWZ1bmN0aW9uKGEpe3goQSkmJmYoMTAwLG4pO3UucHVzaChhKTtyZXR1cm4gYX07dmFyIE49aC5ocmVmLFI9YS5maW5kKFwiYmFzZVwiKSx6PW51bGw7ay51cmw9ZnVuY3Rpb24oYSxjKXtoIT09Yi5sb2NhdGlvbiYmKGg9Yi5sb2NhdGlvbik7bCE9PWIuaGlzdG9yeSYmKGw9Yi5oaXN0b3J5KTtpZihhKXtpZihOIT1hKXJldHVybiBOPWEsZC5oaXN0b3J5P2M/bC5yZXBsYWNlU3RhdGUobnVsbCxcIlwiLGEpOihsLnB1c2hTdGF0ZShudWxsLFwiXCIsYSksUi5hdHRyKFwiaHJlZlwiLFIuYXR0cihcImhyZWZcIikpKTooej1hLGM/aC5yZXBsYWNlKGEpOmguaHJlZj1hKSxrfWVsc2UgcmV0dXJuIHp8fGguaHJlZi5yZXBsYWNlKC8lMjcvZyxcIidcIil9O3ZhciBjYT1bXSxMPSExO2sub25VcmxDaGFuZ2U9ZnVuY3Rpb24oYSl7aWYoIUwpe2lmKGQuaGlzdG9yeSl3KGIpLm9uKFwicG9wc3RhdGVcIixnKTtpZihkLmhhc2hjaGFuZ2UpdyhiKS5vbihcImhhc2hjaGFuZ2VcIixnKTtcbmVsc2Ugay5hZGRQb2xsRm4oZyk7TD0hMH1jYS5wdXNoKGEpO3JldHVybiBhfTtrLiQkY2hlY2tVcmxDaGFuZ2U9ZztrLmJhc2VIcmVmPWZ1bmN0aW9uKCl7dmFyIGE9Ui5hdHRyKFwiaHJlZlwiKTtyZXR1cm4gYT9hLnJlcGxhY2UoL14oaHR0cHM/XFw6KT9cXC9cXC9bXlxcL10qLyxcIlwiKTpcIlwifTt2YXIgTz17fSxkYT1cIlwiLEI9ay5iYXNlSHJlZigpO2suY29va2llcz1mdW5jdGlvbihhLGIpe3ZhciBkLGUsZixrO2lmKGEpYj09PXQ/bS5jb29raWU9ZXNjYXBlKGEpK1wiPTtwYXRoPVwiK0IrXCI7ZXhwaXJlcz1UaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAwIEdNVFwiOnYoYikmJihkPShtLmNvb2tpZT1lc2NhcGUoYSkrXCI9XCIrZXNjYXBlKGIpK1wiO3BhdGg9XCIrQikubGVuZ3RoKzEsNDA5NjxkJiZjLndhcm4oXCJDb29raWUgJ1wiK2ErXCInIHBvc3NpYmx5IG5vdCBzZXQgb3Igb3ZlcmZsb3dlZCBiZWNhdXNlIGl0IHdhcyB0b28gbGFyZ2UgKFwiK2QrXCIgPiA0MDk2IGJ5dGVzKSFcIikpO2Vsc2V7aWYobS5jb29raWUhPT1cbmRhKWZvcihkYT1tLmNvb2tpZSxkPWRhLnNwbGl0KFwiOyBcIiksTz17fSxmPTA7ZjxkLmxlbmd0aDtmKyspZT1kW2ZdLGs9ZS5pbmRleE9mKFwiPVwiKSwwPGsmJihhPXVuZXNjYXBlKGUuc3Vic3RyaW5nKDAsaykpLE9bYV09PT10JiYoT1thXT11bmVzY2FwZShlLnN1YnN0cmluZyhrKzEpKSkpO3JldHVybiBPfX07ay5kZWZlcj1mdW5jdGlvbihhLGIpe3ZhciBjO3MrKztjPW4oZnVuY3Rpb24oKXtkZWxldGUgcVtjXTtlKGEpfSxifHwwKTtxW2NdPSEwO3JldHVybiBjfTtrLmRlZmVyLmNhbmNlbD1mdW5jdGlvbihhKXtyZXR1cm4gcVthXT8oZGVsZXRlIHFbYV0scChhKSxlKEUpLCEwKTohMX19ZnVuY3Rpb24gTmQoKXt0aGlzLiRnZXQ9W1wiJHdpbmRvd1wiLFwiJGxvZ1wiLFwiJHNuaWZmZXJcIixcIiRkb2N1bWVudFwiLGZ1bmN0aW9uKGIsYSxjLGQpe3JldHVybiBuZXcgdGUoYixkLGEsYyl9XX1mdW5jdGlvbiBPZCgpe3RoaXMuJGdldD1mdW5jdGlvbigpe2Z1bmN0aW9uIGIoYixkKXtmdW5jdGlvbiBlKGEpe2EhPVxubiYmKHA/cD09YSYmKHA9YS5uKTpwPWEsZihhLm4sYS5wKSxmKGEsbiksbj1hLG4ubj1udWxsKX1mdW5jdGlvbiBmKGEsYil7YSE9YiYmKGEmJihhLnA9YiksYiYmKGIubj1hKSl9aWYoYiBpbiBhKXRocm93IEMoXCIkY2FjaGVGYWN0b3J5XCIpKFwiaWlkXCIsYik7dmFyIGc9MCxrPUQoe30sZCx7aWQ6Yn0pLG09e30saD1kJiZkLmNhcGFjaXR5fHxOdW1iZXIuTUFYX1ZBTFVFLGw9e30sbj1udWxsLHA9bnVsbDtyZXR1cm4gYVtiXT17cHV0OmZ1bmN0aW9uKGEsYil7aWYoaDxOdW1iZXIuTUFYX1ZBTFVFKXt2YXIgYz1sW2FdfHwobFthXT17a2V5OmF9KTtlKGMpfWlmKCF4KGIpKXJldHVybiBhIGluIG18fGcrKyxtW2FdPWIsZz5oJiZ0aGlzLnJlbW92ZShwLmtleSksYn0sZ2V0OmZ1bmN0aW9uKGEpe2lmKGg8TnVtYmVyLk1BWF9WQUxVRSl7dmFyIGI9bFthXTtpZighYilyZXR1cm47ZShiKX1yZXR1cm4gbVthXX0scmVtb3ZlOmZ1bmN0aW9uKGEpe2lmKGg8TnVtYmVyLk1BWF9WQUxVRSl7dmFyIGI9XG5sW2FdO2lmKCFiKXJldHVybjtiPT1uJiYobj1iLnApO2I9PXAmJihwPWIubik7ZihiLm4sYi5wKTtkZWxldGUgbFthXX1kZWxldGUgbVthXTtnLS19LHJlbW92ZUFsbDpmdW5jdGlvbigpe209e307Zz0wO2w9e307bj1wPW51bGx9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtsPWs9bT1udWxsO2RlbGV0ZSBhW2JdfSxpbmZvOmZ1bmN0aW9uKCl7cmV0dXJuIEQoe30sayx7c2l6ZTpnfSl9fX12YXIgYT17fTtiLmluZm89ZnVuY3Rpb24oKXt2YXIgYj17fTtyKGEsZnVuY3Rpb24oYSxlKXtiW2VdPWEuaW5mbygpfSk7cmV0dXJuIGJ9O2IuZ2V0PWZ1bmN0aW9uKGIpe3JldHVybiBhW2JdfTtyZXR1cm4gYn19ZnVuY3Rpb24gZGUoKXt0aGlzLiRnZXQ9W1wiJGNhY2hlRmFjdG9yeVwiLGZ1bmN0aW9uKGIpe3JldHVybiBiKFwidGVtcGxhdGVzXCIpfV19ZnVuY3Rpb24gaWMoYixhKXt2YXIgYz17fSxkPVwiRGlyZWN0aXZlXCIsZT0vXlxccypkaXJlY3RpdmVcXDpcXHMqKFtcXGRcXHdfXFwtXSspXFxzKyguKikkLyxmPS8oKFtcXGRcXHdfXFwtXSspKD86XFw6KFteO10rKSk/Oz8pLyxcbmc9L14ob25bYS16XSt8Zm9ybWFjdGlvbikkLzt0aGlzLmRpcmVjdGl2ZT1mdW5jdGlvbiBtKGEsZSl7RGEoYSxcImRpcmVjdGl2ZVwiKTt2KGEpPyhEYihlLFwiZGlyZWN0aXZlRmFjdG9yeVwiKSxjLmhhc093blByb3BlcnR5KGEpfHwoY1thXT1bXSxiLmZhY3RvcnkoYStkLFtcIiRpbmplY3RvclwiLFwiJGV4Y2VwdGlvbkhhbmRsZXJcIixmdW5jdGlvbihiLGQpe3ZhciBlPVtdO3IoY1thXSxmdW5jdGlvbihjLGYpe3RyeXt2YXIgZz1iLmludm9rZShjKTtQKGcpP2c9e2NvbXBpbGU6YmEoZyl9OiFnLmNvbXBpbGUmJmcubGluayYmKGcuY29tcGlsZT1iYShnLmxpbmspKTtnLnByaW9yaXR5PWcucHJpb3JpdHl8fDA7Zy5pbmRleD1mO2cubmFtZT1nLm5hbWV8fGE7Zy5yZXF1aXJlPWcucmVxdWlyZXx8Zy5jb250cm9sbGVyJiZnLm5hbWU7Zy5yZXN0cmljdD1nLnJlc3RyaWN0fHxcIkFcIjtlLnB1c2goZyl9Y2F0Y2gobSl7ZChtKX19KTtyZXR1cm4gZX1dKSksY1thXS5wdXNoKGUpKTpyKGEsJGIobSkpO1xucmV0dXJuIHRoaXN9O3RoaXMuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3Q9ZnVuY3Rpb24oYil7cmV0dXJuIHkoYik/KGEuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3QoYiksdGhpcyk6YS5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdCgpfTt0aGlzLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdD1mdW5jdGlvbihiKXtyZXR1cm4geShiKT8oYS5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QoYiksdGhpcyk6YS5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QoKX07dGhpcy4kZ2V0PVtcIiRpbmplY3RvclwiLFwiJGludGVycG9sYXRlXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLFwiJGh0dHBcIixcIiR0ZW1wbGF0ZUNhY2hlXCIsXCIkcGFyc2VcIixcIiRjb250cm9sbGVyXCIsXCIkcm9vdFNjb3BlXCIsXCIkZG9jdW1lbnRcIixcIiRzY2VcIixcIiRhbmltYXRlXCIsXCIkJHNhbml0aXplVXJpXCIsZnVuY3Rpb24oYSxiLGwsbixwLHEscyxGLHUsQSxOLFIpe2Z1bmN0aW9uIHooYSxiLGMsZCxlKXthIGluc3RhbmNlb2Zcbnd8fChhPXcoYSkpO3IoYSxmdW5jdGlvbihiLGMpezM9PWIubm9kZVR5cGUmJmIubm9kZVZhbHVlLm1hdGNoKC9cXFMrLykmJihhW2NdPXcoYikud3JhcChcIjxzcGFuPjwvc3Bhbj5cIikucGFyZW50KClbMF0pfSk7dmFyIGY9TChhLGIsYSxjLGQsZSk7Y2EoYSxcIm5nLXNjb3BlXCIpO3JldHVybiBmdW5jdGlvbihiLGMsZCxlKXtEYihiLFwic2NvcGVcIik7dmFyIGc9Yz9MYS5jbG9uZS5jYWxsKGEpOmE7cihkLGZ1bmN0aW9uKGEsYil7Zy5kYXRhKFwiJFwiK2IrXCJDb250cm9sbGVyXCIsYSl9KTtkPTA7Zm9yKHZhciBtPWcubGVuZ3RoO2Q8bTtkKyspe3ZhciBoPWdbZF0ubm9kZVR5cGU7MSE9PWgmJjkhPT1ofHxnLmVxKGQpLmRhdGEoXCIkc2NvcGVcIixiKX1jJiZjKGcsYik7ZiYmZihiLGcsZyxlKTtyZXR1cm4gZ319ZnVuY3Rpb24gY2EoYSxiKXt0cnl7YS5hZGRDbGFzcyhiKX1jYXRjaChjKXt9fWZ1bmN0aW9uIEwoYSxiLGMsZCxlLGYpe2Z1bmN0aW9uIGcoYSxjLGQsZSl7dmFyIGYsaCxsLHEsbixcbnAscztmPWMubGVuZ3RoO3ZhciBNPUFycmF5KGYpO2ZvcihxPTA7cTxmO3ErKylNW3FdPWNbcV07cD1xPTA7Zm9yKG49bS5sZW5ndGg7cTxuO3ArKyloPU1bcF0sYz1tW3ErK10sZj1tW3ErK10sYz8oYy5zY29wZT8obD1hLiRuZXcoKSx3LmRhdGEoaCxcIiRzY29wZVwiLGwpKTpsPWEscz1jLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50P08oYSxjLnRyYW5zY2x1ZGUsZSk6IWMudGVtcGxhdGVPblRoaXNFbGVtZW50JiZlP2U6IWUmJmI/TyhhLGIpOm51bGwsYyhmLGwsaCxkLHMpKTpmJiZmKGEsaC5jaGlsZE5vZGVzLHQsZSl9Zm9yKHZhciBtPVtdLGgsbCxxLG4scD0wO3A8YS5sZW5ndGg7cCsrKWg9bmV3IE9iLGw9ZGEoYVtwXSxbXSxoLDA9PT1wP2Q6dCxlKSwoZj1sLmxlbmd0aD9IKGwsYVtwXSxoLGIsYyxudWxsLFtdLFtdLGYpOm51bGwpJiZmLnNjb3BlJiZjYShoLiQkZWxlbWVudCxcIm5nLXNjb3BlXCIpLGg9ZiYmZi50ZXJtaW5hbHx8IShxPWFbcF0uY2hpbGROb2Rlcyl8fCFxLmxlbmd0aD9cbm51bGw6TChxLGY/KGYudHJhbnNjbHVkZU9uVGhpc0VsZW1lbnR8fCFmLnRlbXBsYXRlT25UaGlzRWxlbWVudCkmJmYudHJhbnNjbHVkZTpiKSxtLnB1c2goZixoKSxuPW58fGZ8fGgsZj1udWxsO3JldHVybiBuP2c6bnVsbH1mdW5jdGlvbiBPKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCxlLGYpe3ZhciBnPSExO2R8fChkPWEuJG5ldygpLGc9ZC4kJHRyYW5zY2x1ZGVkPSEwKTtlPWIoZCxlLGYsYyk7aWYoZyllLm9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2QuJGRlc3Ryb3koKX0pO3JldHVybiBlfX1mdW5jdGlvbiBkYShhLGIsYyxkLGcpe3ZhciBtPWMuJGF0dHIsaDtzd2l0Y2goYS5ub2RlVHlwZSl7Y2FzZSAxOmZhKGIscGEoTWEoYSkudG9Mb3dlckNhc2UoKSksXCJFXCIsZCxnKTtmb3IodmFyIGwscSxuLHA9YS5hdHRyaWJ1dGVzLHM9MCxGPXAmJnAubGVuZ3RoO3M8RjtzKyspe3ZhciBBPSExLE49ITE7bD1wW3NdO2lmKCFRfHw4PD1RfHxsLnNwZWNpZmllZCl7aD1sLm5hbWU7cT1cbmFhKGwudmFsdWUpO2w9cGEoaCk7aWYobj1VLnRlc3QobCkpaD1tYihsLnN1YnN0cig2KSxcIi1cIik7dmFyIHU9bC5yZXBsYWNlKC8oU3RhcnR8RW5kKSQvLFwiXCIpO2w9PT11K1wiU3RhcnRcIiYmKEE9aCxOPWguc3Vic3RyKDAsaC5sZW5ndGgtNSkrXCJlbmRcIixoPWguc3Vic3RyKDAsaC5sZW5ndGgtNikpO2w9cGEoaC50b0xvd2VyQ2FzZSgpKTttW2xdPWg7aWYobnx8IWMuaGFzT3duUHJvcGVydHkobCkpY1tsXT1xLHFjKGEsbCkmJihjW2xdPSEwKTtTKGEsYixxLGwpO2ZhKGIsbCxcIkFcIixkLGcsQSxOKX19YT1hLmNsYXNzTmFtZTtpZih2KGEpJiZcIlwiIT09YSlmb3IoO2g9Zi5leGVjKGEpOylsPXBhKGhbMl0pLGZhKGIsbCxcIkNcIixkLGcpJiYoY1tsXT1hYShoWzNdKSksYT1hLnN1YnN0cihoLmluZGV4K2hbMF0ubGVuZ3RoKTticmVhaztjYXNlIDM6SyhiLGEubm9kZVZhbHVlKTticmVhaztjYXNlIDg6dHJ5e2lmKGg9ZS5leGVjKGEubm9kZVZhbHVlKSlsPXBhKGhbMV0pLGZhKGIsbCxcIk1cIixcbmQsZykmJihjW2xdPWFhKGhbMl0pKX1jYXRjaCh6KXt9fWIuc29ydCh4KTtyZXR1cm4gYn1mdW5jdGlvbiBCKGEsYixjKXt2YXIgZD1bXSxlPTA7aWYoYiYmYS5oYXNBdHRyaWJ1dGUmJmEuaGFzQXR0cmlidXRlKGIpKXtkb3tpZighYSl0aHJvdyBqYShcInV0ZXJkaXJcIixiLGMpOzE9PWEubm9kZVR5cGUmJihhLmhhc0F0dHJpYnV0ZShiKSYmZSsrLGEuaGFzQXR0cmlidXRlKGMpJiZlLS0pO2QucHVzaChhKTthPWEubmV4dFNpYmxpbmd9d2hpbGUoMDxlKX1lbHNlIGQucHVzaChhKTtyZXR1cm4gdyhkKX1mdW5jdGlvbiBJKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCxlLGYsZyxoKXtlPUIoZVswXSxiLGMpO3JldHVybiBhKGQsZSxmLGcsaCl9fWZ1bmN0aW9uIEgoYSxjLGQsZSxmLGcsbSxuLHApe2Z1bmN0aW9uIEYoYSxiLGMsZCl7aWYoYSl7YyYmKGE9SShhLGMsZCkpO2EucmVxdWlyZT1HLnJlcXVpcmU7YS5kaXJlY3RpdmVOYW1lPUM7aWYoTD09PUd8fEcuJCRpc29sYXRlU2NvcGUpYT1cbnRjKGEse2lzb2xhdGVTY29wZTohMH0pO20ucHVzaChhKX1pZihiKXtjJiYoYj1JKGIsYyxkKSk7Yi5yZXF1aXJlPUcucmVxdWlyZTtiLmRpcmVjdGl2ZU5hbWU9QztpZihMPT09R3x8Ry4kJGlzb2xhdGVTY29wZSliPXRjKGIse2lzb2xhdGVTY29wZTohMH0pO24ucHVzaChiKX19ZnVuY3Rpb24gQShhLGIsYyxkKXt2YXIgZSxmPVwiZGF0YVwiLGc9ITE7aWYodihiKSl7Zm9yKDtcIl5cIj09KGU9Yi5jaGFyQXQoMCkpfHxcIj9cIj09ZTspYj1iLnN1YnN0cigxKSxcIl5cIj09ZSYmKGY9XCJpbmhlcml0ZWREYXRhXCIpLGc9Z3x8XCI/XCI9PWU7ZT1udWxsO2QmJlwiZGF0YVwiPT09ZiYmKGU9ZFtiXSk7ZT1lfHxjW2ZdKFwiJFwiK2IrXCJDb250cm9sbGVyXCIpO2lmKCFlJiYhZyl0aHJvdyBqYShcImN0cmVxXCIsYixhKTt9ZWxzZSBKKGIpJiYoZT1bXSxyKGIsZnVuY3Rpb24oYil7ZS5wdXNoKEEoYSxiLGMsZCkpfSkpO3JldHVybiBlfWZ1bmN0aW9uIE4oYSxlLGYsZyxwKXtmdW5jdGlvbiBGKGEsYil7dmFyIGM7Mj5hcmd1bWVudHMubGVuZ3RoJiZcbihiPWEsYT10KTtLJiYoYz1kYSk7cmV0dXJuIHAoYSxiLGMpfXZhciB1LE0seixPLEksQixkYT17fSxyYjt1PWM9PT1mP2Q6aGEoZCxuZXcgT2IodyhmKSxkLiRhdHRyKSk7TT11LiQkZWxlbWVudDtpZihMKXt2YXIgTmE9L15cXHMqKFtAPSZdKShcXD8/KVxccyooXFx3KilcXHMqJC87Qj1lLiRuZXcoITApOyFIfHxIIT09TCYmSCE9PUwuJCRvcmlnaW5hbERpcmVjdGl2ZT9NLmRhdGEoXCIkaXNvbGF0ZVNjb3BlTm9UZW1wbGF0ZVwiLEIpOk0uZGF0YShcIiRpc29sYXRlU2NvcGVcIixCKTtjYShNLFwibmctaXNvbGF0ZS1zY29wZVwiKTtyKEwuc2NvcGUsZnVuY3Rpb24oYSxjKXt2YXIgZD1hLm1hdGNoKE5hKXx8W10sZj1kWzNdfHxjLGc9XCI/XCI9PWRbMl0sZD1kWzFdLG0sbCxuLHA7Qi4kJGlzb2xhdGVCaW5kaW5nc1tjXT1kK2Y7c3dpdGNoKGQpe2Nhc2UgXCJAXCI6dS4kb2JzZXJ2ZShmLGZ1bmN0aW9uKGEpe0JbY109YX0pO3UuJCRvYnNlcnZlcnNbZl0uJCRzY29wZT1lO3VbZl0mJihCW2NdPWIodVtmXSkoZSkpO1xuYnJlYWs7Y2FzZSBcIj1cIjppZihnJiYhdVtmXSlicmVhaztsPXEodVtmXSk7cD1sLmxpdGVyYWw/QWE6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWJ8fGEhPT1hJiZiIT09Yn07bj1sLmFzc2lnbnx8ZnVuY3Rpb24oKXttPUJbY109bChlKTt0aHJvdyBqYShcIm5vbmFzc2lnblwiLHVbZl0sTC5uYW1lKTt9O209QltjXT1sKGUpO0IuJHdhdGNoKGZ1bmN0aW9uKCl7dmFyIGE9bChlKTtwKGEsQltjXSl8fChwKGEsbSk/bihlLGE9QltjXSk6QltjXT1hKTtyZXR1cm4gbT1hfSxudWxsLGwubGl0ZXJhbCk7YnJlYWs7Y2FzZSBcIiZcIjpsPXEodVtmXSk7QltjXT1mdW5jdGlvbihhKXtyZXR1cm4gbChlLGEpfTticmVhaztkZWZhdWx0OnRocm93IGphKFwiaXNjcFwiLEwubmFtZSxjLGEpO319KX1yYj1wJiZGO1ImJnIoUixmdW5jdGlvbihhKXt2YXIgYj17JHNjb3BlOmE9PT1MfHxhLiQkaXNvbGF0ZVNjb3BlP0I6ZSwkZWxlbWVudDpNLCRhdHRyczp1LCR0cmFuc2NsdWRlOnJifSxjO0k9YS5jb250cm9sbGVyO1xuXCJAXCI9PUkmJihJPXVbYS5uYW1lXSk7Yz1zKEksYik7ZGFbYS5uYW1lXT1jO0t8fE0uZGF0YShcIiRcIithLm5hbWUrXCJDb250cm9sbGVyXCIsYyk7YS5jb250cm9sbGVyQXMmJihiLiRzY29wZVthLmNvbnRyb2xsZXJBc109Yyl9KTtnPTA7Zm9yKHo9bS5sZW5ndGg7Zzx6O2crKyl0cnl7Tz1tW2ddLE8oTy5pc29sYXRlU2NvcGU/QjplLE0sdSxPLnJlcXVpcmUmJkEoTy5kaXJlY3RpdmVOYW1lLE8ucmVxdWlyZSxNLGRhKSxyYil9Y2F0Y2goRyl7bChHLGlhKE0pKX1nPWU7TCYmKEwudGVtcGxhdGV8fG51bGw9PT1MLnRlbXBsYXRlVXJsKSYmKGc9Qik7YSYmYShnLGYuY2hpbGROb2Rlcyx0LHApO2ZvcihnPW4ubGVuZ3RoLTE7MDw9ZztnLS0pdHJ5e089bltnXSxPKE8uaXNvbGF0ZVNjb3BlP0I6ZSxNLHUsTy5yZXF1aXJlJiZBKE8uZGlyZWN0aXZlTmFtZSxPLnJlcXVpcmUsTSxkYSkscmIpfWNhdGNoKHkpe2woeSxpYShNKSl9fXA9cHx8e307Zm9yKHZhciB1PS1OdW1iZXIuTUFYX1ZBTFVFLFxuTyxSPXAuY29udHJvbGxlckRpcmVjdGl2ZXMsTD1wLm5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSxIPXAudGVtcGxhdGVEaXJlY3RpdmUsZmE9cC5ub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlLHg9ITEsRD0hMSxLPXAuaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUsWj1kLiQkZWxlbWVudD13KGMpLEcsQyxWLFM9ZSxRLEZhPTAscWE9YS5sZW5ndGg7RmE8cWE7RmErKyl7Rz1hW0ZhXTt2YXIgVT1HLiQkc3RhcnQsWT1HLiQkZW5kO1UmJihaPUIoYyxVLFkpKTtWPXQ7aWYodT5HLnByaW9yaXR5KWJyZWFrO2lmKFY9Ry5zY29wZSlPPU98fEcsRy50ZW1wbGF0ZVVybHx8KGRiKFwibmV3L2lzb2xhdGVkIHNjb3BlXCIsTCxHLFopLFQoVikmJihMPUcpKTtDPUcubmFtZTshRy50ZW1wbGF0ZVVybCYmRy5jb250cm9sbGVyJiYoVj1HLmNvbnRyb2xsZXIsUj1SfHx7fSxkYihcIidcIitDK1wiJyBjb250cm9sbGVyXCIsUltDXSxHLFopLFJbQ109Ryk7aWYoVj1HLnRyYW5zY2x1ZGUpeD0hMCxHLiQkdGxifHxcbihkYihcInRyYW5zY2x1c2lvblwiLGZhLEcsWiksZmE9RyksXCJlbGVtZW50XCI9PVY/KEs9ITAsdT1HLnByaW9yaXR5LFY9WixaPWQuJCRlbGVtZW50PXcoWC5jcmVhdGVDb21tZW50KFwiIFwiK0MrXCI6IFwiK2RbQ10rXCIgXCIpKSxjPVpbMF0sTmEoZixCYS5jYWxsKFYsMCksYyksUz16KFYsZSx1LGcmJmcubmFtZSx7bm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZTpmYX0pKTooVj13KEtiKGMpKS5jb250ZW50cygpLFouZW1wdHkoKSxTPXooVixlKSk7aWYoRy50ZW1wbGF0ZSlpZihEPSEwLGRiKFwidGVtcGxhdGVcIixILEcsWiksSD1HLFY9UChHLnRlbXBsYXRlKT9HLnRlbXBsYXRlKFosZCk6Ry50ZW1wbGF0ZSxWPVcoViksRy5yZXBsYWNlKXtnPUc7Vj1JYi50ZXN0KFYpP3coYWEoVikpOltdO2M9VlswXTtpZigxIT1WLmxlbmd0aHx8MSE9PWMubm9kZVR5cGUpdGhyb3cgamEoXCJ0cGxydFwiLEMsXCJcIik7TmEoZixaLGMpO3FhPXskYXR0cjp7fX07Vj1kYShjLFtdLHFhKTt2YXIgJD1hLnNwbGljZShGYStcbjEsYS5sZW5ndGgtKEZhKzEpKTtMJiZ5KFYpO2E9YS5jb25jYXQoVikuY29uY2F0KCQpO0UoZCxxYSk7cWE9YS5sZW5ndGh9ZWxzZSBaLmh0bWwoVik7aWYoRy50ZW1wbGF0ZVVybClEPSEwLGRiKFwidGVtcGxhdGVcIixILEcsWiksSD1HLEcucmVwbGFjZSYmKGc9RyksTj11ZShhLnNwbGljZShGYSxhLmxlbmd0aC1GYSksWixkLGYseCYmUyxtLG4se2NvbnRyb2xsZXJEaXJlY3RpdmVzOlIsbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlOkwsdGVtcGxhdGVEaXJlY3RpdmU6SCxub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlOmZhfSkscWE9YS5sZW5ndGg7ZWxzZSBpZihHLmNvbXBpbGUpdHJ5e1E9Ry5jb21waWxlKFosZCxTKSxQKFEpP0YobnVsbCxRLFUsWSk6USYmRihRLnByZSxRLnBvc3QsVSxZKX1jYXRjaCh2ZSl7bCh2ZSxpYShaKSl9Ry50ZXJtaW5hbCYmKE4udGVybWluYWw9ITAsdT1NYXRoLm1heCh1LEcucHJpb3JpdHkpKX1OLnNjb3BlPU8mJiEwPT09Ty5zY29wZTtOLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50PVxueDtOLnRlbXBsYXRlT25UaGlzRWxlbWVudD1EO04udHJhbnNjbHVkZT1TO3AuaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmU9SztyZXR1cm4gTn1mdW5jdGlvbiB5KGEpe2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjO2IrKylhW2JdPWJjKGFbYl0seyQkaXNvbGF0ZVNjb3BlOiEwfSl9ZnVuY3Rpb24gZmEoYixlLGYsZyxoLHEsbil7aWYoZT09PWgpcmV0dXJuIG51bGw7aD1udWxsO2lmKGMuaGFzT3duUHJvcGVydHkoZSkpe3ZhciBwO2U9YS5nZXQoZStkKTtmb3IodmFyIHM9MCx1PWUubGVuZ3RoO3M8dTtzKyspdHJ5e3A9ZVtzXSwoZz09PXR8fGc+cC5wcmlvcml0eSkmJi0xIT1wLnJlc3RyaWN0LmluZGV4T2YoZikmJihxJiYocD1iYyhwLHskJHN0YXJ0OnEsJCRlbmQ6bn0pKSxiLnB1c2gocCksaD1wKX1jYXRjaChGKXtsKEYpfX1yZXR1cm4gaH1mdW5jdGlvbiBFKGEsYil7dmFyIGM9Yi4kYXR0cixkPWEuJGF0dHIsZT1hLiQkZWxlbWVudDtyKGEsZnVuY3Rpb24oZCxlKXtcIiRcIiE9XG5lLmNoYXJBdCgwKSYmKGJbZV0mJmJbZV0hPT1kJiYoZCs9KFwic3R5bGVcIj09PWU/XCI7XCI6XCIgXCIpK2JbZV0pLGEuJHNldChlLGQsITAsY1tlXSkpfSk7cihiLGZ1bmN0aW9uKGIsZil7XCJjbGFzc1wiPT1mPyhjYShlLGIpLGFbXCJjbGFzc1wiXT0oYVtcImNsYXNzXCJdP2FbXCJjbGFzc1wiXStcIiBcIjpcIlwiKStiKTpcInN0eWxlXCI9PWY/KGUuYXR0cihcInN0eWxlXCIsZS5hdHRyKFwic3R5bGVcIikrXCI7XCIrYiksYS5zdHlsZT0oYS5zdHlsZT9hLnN0eWxlK1wiO1wiOlwiXCIpK2IpOlwiJFwiPT1mLmNoYXJBdCgwKXx8YS5oYXNPd25Qcm9wZXJ0eShmKXx8KGFbZl09YixkW2ZdPWNbZl0pfSl9ZnVuY3Rpb24gdWUoYSxiLGMsZCxlLGYsZyxoKXt2YXIgbT1bXSxsLHEscz1iWzBdLHU9YS5zaGlmdCgpLEY9RCh7fSx1LHt0ZW1wbGF0ZVVybDpudWxsLHRyYW5zY2x1ZGU6bnVsbCxyZXBsYWNlOm51bGwsJCRvcmlnaW5hbERpcmVjdGl2ZTp1fSksTj1QKHUudGVtcGxhdGVVcmwpP3UudGVtcGxhdGVVcmwoYixjKTp1LnRlbXBsYXRlVXJsO1xuYi5lbXB0eSgpO24uZ2V0KEEuZ2V0VHJ1c3RlZFJlc291cmNlVXJsKE4pLHtjYWNoZTpwfSkuc3VjY2VzcyhmdW5jdGlvbihuKXt2YXIgcCxBO249VyhuKTtpZih1LnJlcGxhY2Upe249SWIudGVzdChuKT93KGFhKG4pKTpbXTtwPW5bMF07aWYoMSE9bi5sZW5ndGh8fDEhPT1wLm5vZGVUeXBlKXRocm93IGphKFwidHBscnRcIix1Lm5hbWUsTik7bj17JGF0dHI6e319O05hKGQsYixwKTt2YXIgej1kYShwLFtdLG4pO1QodS5zY29wZSkmJnkoeik7YT16LmNvbmNhdChhKTtFKGMsbil9ZWxzZSBwPXMsYi5odG1sKG4pO2EudW5zaGlmdChGKTtsPUgoYSxwLGMsZSxiLHUsZixnLGgpO3IoZCxmdW5jdGlvbihhLGMpe2E9PXAmJihkW2NdPWJbMF0pfSk7Zm9yKHE9TChiWzBdLmNoaWxkTm9kZXMsZSk7bS5sZW5ndGg7KXtuPW0uc2hpZnQoKTtBPW0uc2hpZnQoKTt2YXIgUj1tLnNoaWZ0KCksST1tLnNoaWZ0KCksej1iWzBdO2lmKEEhPT1zKXt2YXIgQj1BLmNsYXNzTmFtZTtoLmhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlJiZcbnUucmVwbGFjZXx8KHo9S2IocCkpO05hKFIsdyhBKSx6KTtjYSh3KHopLEIpfUE9bC50cmFuc2NsdWRlT25UaGlzRWxlbWVudD9PKG4sbC50cmFuc2NsdWRlLEkpOkk7bChxLG4seixkLEEpfW09bnVsbH0pLmVycm9yKGZ1bmN0aW9uKGEsYixjLGQpe3Rocm93IGphKFwidHBsb2FkXCIsZC51cmwpO30pO3JldHVybiBmdW5jdGlvbihhLGIsYyxkLGUpe2E9ZTttPyhtLnB1c2goYiksbS5wdXNoKGMpLG0ucHVzaChkKSxtLnB1c2goYSkpOihsLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50JiYoYT1PKGIsbC50cmFuc2NsdWRlLGUpKSxsKHEsYixjLGQsYSkpfX1mdW5jdGlvbiB4KGEsYil7dmFyIGM9Yi5wcmlvcml0eS1hLnByaW9yaXR5O3JldHVybiAwIT09Yz9jOmEubmFtZSE9PWIubmFtZT9hLm5hbWU8Yi5uYW1lPy0xOjE6YS5pbmRleC1iLmluZGV4fWZ1bmN0aW9uIGRiKGEsYixjLGQpe2lmKGIpdGhyb3cgamEoXCJtdWx0aWRpclwiLGIubmFtZSxjLm5hbWUsYSxpYShkKSk7fWZ1bmN0aW9uIEsoYSxcbmMpe3ZhciBkPWIoYywhMCk7ZCYmYS5wdXNoKHtwcmlvcml0eTowLGNvbXBpbGU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnQoKS5sZW5ndGg7YiYmY2EoYS5wYXJlbnQoKSxcIm5nLWJpbmRpbmdcIik7cmV0dXJuIGZ1bmN0aW9uKGEsYyl7dmFyIGU9Yy5wYXJlbnQoKSxmPWUuZGF0YShcIiRiaW5kaW5nXCIpfHxbXTtmLnB1c2goZCk7ZS5kYXRhKFwiJGJpbmRpbmdcIixmKTtifHxjYShlLFwibmctYmluZGluZ1wiKTthLiR3YXRjaChkLGZ1bmN0aW9uKGEpe2NbMF0ubm9kZVZhbHVlPWF9KX19fSl9ZnVuY3Rpb24gQyhhLGIpe2lmKFwic3JjZG9jXCI9PWIpcmV0dXJuIEEuSFRNTDt2YXIgYz1NYShhKTtpZihcInhsaW5rSHJlZlwiPT1ifHxcIkZPUk1cIj09YyYmXCJhY3Rpb25cIj09Ynx8XCJJTUdcIiE9YyYmKFwic3JjXCI9PWJ8fFwibmdTcmNcIj09YikpcmV0dXJuIEEuUkVTT1VSQ0VfVVJMfWZ1bmN0aW9uIFMoYSxjLGQsZSl7dmFyIGY9YihkLCEwKTtpZihmKXtpZihcIm11bHRpcGxlXCI9PT1lJiZcIlNFTEVDVFwiPT09XG5NYShhKSl0aHJvdyBqYShcInNlbG11bHRpXCIsaWEoYSkpO2MucHVzaCh7cHJpb3JpdHk6MTAwLGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cHJlOmZ1bmN0aW9uKGMsZCxtKXtkPW0uJCRvYnNlcnZlcnN8fChtLiQkb2JzZXJ2ZXJzPXt9KTtpZihnLnRlc3QoZSkpdGhyb3cgamEoXCJub2RvbWV2ZW50c1wiKTtpZihmPWIobVtlXSwhMCxDKGEsZSkpKW1bZV09ZihjKSwoZFtlXXx8KGRbZV09W10pKS4kJGludGVyPSEwLChtLiQkb2JzZXJ2ZXJzJiZtLiQkb2JzZXJ2ZXJzW2VdLiQkc2NvcGV8fGMpLiR3YXRjaChmLGZ1bmN0aW9uKGEsYil7XCJjbGFzc1wiPT09ZSYmYSE9Yj9tLiR1cGRhdGVDbGFzcyhhLGIpOm0uJHNldChlLGEpfSl9fX19KX19ZnVuY3Rpb24gTmEoYSxiLGMpe3ZhciBkPWJbMF0sZT1iLmxlbmd0aCxmPWQucGFyZW50Tm9kZSxnLG07aWYoYSlmb3IoZz0wLG09YS5sZW5ndGg7ZzxtO2crKylpZihhW2ddPT1kKXthW2crK109YzttPWcrZS0xO2Zvcih2YXIgaD1hLmxlbmd0aDtnPFxuaDtnKyssbSsrKW08aD9hW2ddPWFbbV06ZGVsZXRlIGFbZ107YS5sZW5ndGgtPWUtMTticmVha31mJiZmLnJlcGxhY2VDaGlsZChjLGQpO2E9WC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7YS5hcHBlbmRDaGlsZChkKTtjW3cuZXhwYW5kb109ZFt3LmV4cGFuZG9dO2Q9MTtmb3IoZT1iLmxlbmd0aDtkPGU7ZCsrKWY9YltkXSx3KGYpLnJlbW92ZSgpLGEuYXBwZW5kQ2hpbGQoZiksZGVsZXRlIGJbZF07YlswXT1jO2IubGVuZ3RoPTF9ZnVuY3Rpb24gdGMoYSxiKXtyZXR1cm4gRChmdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sYSxiKX12YXIgT2I9ZnVuY3Rpb24oYSxiKXt0aGlzLiQkZWxlbWVudD1hO3RoaXMuJGF0dHI9Ynx8e319O09iLnByb3RvdHlwZT17JG5vcm1hbGl6ZTpwYSwkYWRkQ2xhc3M6ZnVuY3Rpb24oYSl7YSYmMDxhLmxlbmd0aCYmTi5hZGRDbGFzcyh0aGlzLiQkZWxlbWVudCxhKX0sJHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGEpe2EmJjA8XG5hLmxlbmd0aCYmTi5yZW1vdmVDbGFzcyh0aGlzLiQkZWxlbWVudCxhKX0sJHVwZGF0ZUNsYXNzOmZ1bmN0aW9uKGEsYil7dmFyIGM9dWMoYSxiKSxkPXVjKGIsYSk7MD09PWMubGVuZ3RoP04ucmVtb3ZlQ2xhc3ModGhpcy4kJGVsZW1lbnQsZCk6MD09PWQubGVuZ3RoP04uYWRkQ2xhc3ModGhpcy4kJGVsZW1lbnQsYyk6Ti5zZXRDbGFzcyh0aGlzLiQkZWxlbWVudCxjLGQpfSwkc2V0OmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXFjKHRoaXMuJCRlbGVtZW50WzBdLGEpO2UmJih0aGlzLiQkZWxlbWVudC5wcm9wKGEsYiksZD1lKTt0aGlzW2FdPWI7ZD90aGlzLiRhdHRyW2FdPWQ6KGQ9dGhpcy4kYXR0clthXSl8fCh0aGlzLiRhdHRyW2FdPWQ9bWIoYSxcIi1cIikpO2U9TWEodGhpcy4kJGVsZW1lbnQpO2lmKFwiQVwiPT09ZSYmXCJocmVmXCI9PT1hfHxcIklNR1wiPT09ZSYmXCJzcmNcIj09PWEpdGhpc1thXT1iPVIoYixcInNyY1wiPT09YSk7ITEhPT1jJiYobnVsbD09PWJ8fGI9PT10P3RoaXMuJCRlbGVtZW50LnJlbW92ZUF0dHIoZCk6XG50aGlzLiQkZWxlbWVudC5hdHRyKGQsYikpOyhjPXRoaXMuJCRvYnNlcnZlcnMpJiZyKGNbYV0sZnVuY3Rpb24oYSl7dHJ5e2EoYil9Y2F0Y2goYyl7bChjKX19KX0sJG9ic2VydmU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQ9Yy4kJG9ic2VydmVyc3x8KGMuJCRvYnNlcnZlcnM9e30pLGU9ZFthXXx8KGRbYV09W10pO2UucHVzaChiKTtGLiRldmFsQXN5bmMoZnVuY3Rpb24oKXtlLiQkaW50ZXJ8fGIoY1thXSl9KTtyZXR1cm4gYn19O3ZhciBxYT1iLnN0YXJ0U3ltYm9sKCksWj1iLmVuZFN5bWJvbCgpLFc9XCJ7e1wiPT1xYXx8XCJ9fVwiPT1aP1FhOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoL1xce1xcey9nLHFhKS5yZXBsYWNlKC99fS9nLFopfSxVPS9ebmdBdHRyW0EtWl0vO3JldHVybiB6fV19ZnVuY3Rpb24gcGEoYil7cmV0dXJuIFphKGIucmVwbGFjZSh3ZSxcIlwiKSl9ZnVuY3Rpb24gdWMoYixhKXt2YXIgYz1cIlwiLGQ9Yi5zcGxpdCgvXFxzKy8pLGU9YS5zcGxpdCgvXFxzKy8pLGY9XG4wO2E6Zm9yKDtmPGQubGVuZ3RoO2YrKyl7Zm9yKHZhciBnPWRbZl0saz0wO2s8ZS5sZW5ndGg7aysrKWlmKGc9PWVba10pY29udGludWUgYTtjKz0oMDxjLmxlbmd0aD9cIiBcIjpcIlwiKStnfXJldHVybiBjfWZ1bmN0aW9uIFBkKCl7dmFyIGI9e30sYT0vXihcXFMrKShcXHMrYXNcXHMrKFxcdyspKT8kLzt0aGlzLnJlZ2lzdGVyPWZ1bmN0aW9uKGEsZCl7RGEoYSxcImNvbnRyb2xsZXJcIik7VChhKT9EKGIsYSk6YlthXT1kfTt0aGlzLiRnZXQ9W1wiJGluamVjdG9yXCIsXCIkd2luZG93XCIsZnVuY3Rpb24oYyxkKXtyZXR1cm4gZnVuY3Rpb24oZSxmKXt2YXIgZyxrLG07dihlKSYmKGc9ZS5tYXRjaChhKSxrPWdbMV0sbT1nWzNdLGU9Yi5oYXNPd25Qcm9wZXJ0eShrKT9iW2tdOmhjKGYuJHNjb3BlLGssITApfHxoYyhkLGssITApLFdhKGUsaywhMCkpO2c9Yy5pbnN0YW50aWF0ZShlLGYpO2lmKG0pe2lmKCFmfHxcIm9iamVjdFwiIT09dHlwZW9mIGYuJHNjb3BlKXRocm93IEMoXCIkY29udHJvbGxlclwiKShcIm5vc2NwXCIsXG5rfHxlLm5hbWUsbSk7Zi4kc2NvcGVbbV09Z31yZXR1cm4gZ319XX1mdW5jdGlvbiBRZCgpe3RoaXMuJGdldD1bXCIkd2luZG93XCIsZnVuY3Rpb24oYil7cmV0dXJuIHcoYi5kb2N1bWVudCl9XX1mdW5jdGlvbiBSZCgpe3RoaXMuJGdldD1bXCIkbG9nXCIsZnVuY3Rpb24oYil7cmV0dXJuIGZ1bmN0aW9uKGEsYyl7Yi5lcnJvci5hcHBseShiLGFyZ3VtZW50cyl9fV19ZnVuY3Rpb24gdmMoYil7dmFyIGE9e30sYyxkLGU7aWYoIWIpcmV0dXJuIGE7cihiLnNwbGl0KFwiXFxuXCIpLGZ1bmN0aW9uKGIpe2U9Yi5pbmRleE9mKFwiOlwiKTtjPUsoYWEoYi5zdWJzdHIoMCxlKSkpO2Q9YWEoYi5zdWJzdHIoZSsxKSk7YyYmKGFbY109YVtjXT9hW2NdK1wiLCBcIitkOmQpfSk7cmV0dXJuIGF9ZnVuY3Rpb24gd2MoYil7dmFyIGE9VChiKT9iOnQ7cmV0dXJuIGZ1bmN0aW9uKGMpe2F8fChhPXZjKGIpKTtyZXR1cm4gYz9hW0soYyldfHxudWxsOmF9fWZ1bmN0aW9uIHhjKGIsYSxjKXtpZihQKGMpKXJldHVybiBjKGIsXG5hKTtyKGMsZnVuY3Rpb24oYyl7Yj1jKGIsYSl9KTtyZXR1cm4gYn1mdW5jdGlvbiBVZCgpe3ZhciBiPS9eXFxzKihcXFt8XFx7W15cXHtdKS8sYT0vW1xcfVxcXV1cXHMqJC8sYz0vXlxcKVxcXVxcfScsP1xcbi8sZD17XCJDb250ZW50LVR5cGVcIjpcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOFwifSxlPXRoaXMuZGVmYXVsdHM9e3RyYW5zZm9ybVJlc3BvbnNlOltmdW5jdGlvbihkKXt2KGQpJiYoZD1kLnJlcGxhY2UoYyxcIlwiKSxiLnRlc3QoZCkmJmEudGVzdChkKSYmKGQ9Y2MoZCkpKTtyZXR1cm4gZH1dLHRyYW5zZm9ybVJlcXVlc3Q6W2Z1bmN0aW9uKGEpe3JldHVybiBUKGEpJiZcIltvYmplY3QgRmlsZV1cIiE9PXphLmNhbGwoYSkmJlwiW29iamVjdCBCbG9iXVwiIT09emEuY2FsbChhKT9uYShhKTphfV0saGVhZGVyczp7Y29tbW9uOntBY2NlcHQ6XCJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLypcIn0scG9zdDpoYShkKSxwdXQ6aGEoZCkscGF0Y2g6aGEoZCl9LHhzcmZDb29raWVOYW1lOlwiWFNSRi1UT0tFTlwiLFxueHNyZkhlYWRlck5hbWU6XCJYLVhTUkYtVE9LRU5cIn0sZj10aGlzLmludGVyY2VwdG9ycz1bXSxnPXRoaXMucmVzcG9uc2VJbnRlcmNlcHRvcnM9W107dGhpcy4kZ2V0PVtcIiRodHRwQmFja2VuZFwiLFwiJGJyb3dzZXJcIixcIiRjYWNoZUZhY3RvcnlcIixcIiRyb290U2NvcGVcIixcIiRxXCIsXCIkaW5qZWN0b3JcIixmdW5jdGlvbihhLGIsYyxkLG4scCl7ZnVuY3Rpb24gcShhKXtmdW5jdGlvbiBiKGEpe3ZhciBkPUQoe30sYSx7ZGF0YTp4YyhhLmRhdGEsYS5oZWFkZXJzLGMudHJhbnNmb3JtUmVzcG9uc2UpfSk7cmV0dXJuIDIwMDw9YS5zdGF0dXMmJjMwMD5hLnN0YXR1cz9kOm4ucmVqZWN0KGQpfXZhciBjPXttZXRob2Q6XCJnZXRcIix0cmFuc2Zvcm1SZXF1ZXN0OmUudHJhbnNmb3JtUmVxdWVzdCx0cmFuc2Zvcm1SZXNwb25zZTplLnRyYW5zZm9ybVJlc3BvbnNlfSxkPWZ1bmN0aW9uKGEpe3ZhciBiPWUuaGVhZGVycyxjPUQoe30sYS5oZWFkZXJzKSxkLGYsYj1EKHt9LGIuY29tbW9uLGJbSyhhLm1ldGhvZCldKTtcbmE6Zm9yKGQgaW4gYil7YT1LKGQpO2ZvcihmIGluIGMpaWYoSyhmKT09PWEpY29udGludWUgYTtjW2RdPWJbZF19KGZ1bmN0aW9uKGEpe3ZhciBiO3IoYSxmdW5jdGlvbihjLGQpe1AoYykmJihiPWMoKSxudWxsIT1iP2FbZF09YjpkZWxldGUgYVtkXSl9KX0pKGMpO3JldHVybiBjfShhKTtEKGMsYSk7Yy5oZWFkZXJzPWQ7Yy5tZXRob2Q9SWEoYy5tZXRob2QpO3ZhciBmPVtmdW5jdGlvbihhKXtkPWEuaGVhZGVyczt2YXIgYz14YyhhLmRhdGEsd2MoZCksYS50cmFuc2Zvcm1SZXF1ZXN0KTt4KGMpJiZyKGQsZnVuY3Rpb24oYSxiKXtcImNvbnRlbnQtdHlwZVwiPT09SyhiKSYmZGVsZXRlIGRbYl19KTt4KGEud2l0aENyZWRlbnRpYWxzKSYmIXgoZS53aXRoQ3JlZGVudGlhbHMpJiYoYS53aXRoQ3JlZGVudGlhbHM9ZS53aXRoQ3JlZGVudGlhbHMpO3JldHVybiBzKGEsYyxkKS50aGVuKGIsYil9LHRdLGc9bi53aGVuKGMpO2ZvcihyKEEsZnVuY3Rpb24oYSl7KGEucmVxdWVzdHx8YS5yZXF1ZXN0RXJyb3IpJiZcbmYudW5zaGlmdChhLnJlcXVlc3QsYS5yZXF1ZXN0RXJyb3IpOyhhLnJlc3BvbnNlfHxhLnJlc3BvbnNlRXJyb3IpJiZmLnB1c2goYS5yZXNwb25zZSxhLnJlc3BvbnNlRXJyb3IpfSk7Zi5sZW5ndGg7KXthPWYuc2hpZnQoKTt2YXIgbT1mLnNoaWZ0KCksZz1nLnRoZW4oYSxtKX1nLnN1Y2Nlc3M9ZnVuY3Rpb24oYSl7Zy50aGVuKGZ1bmN0aW9uKGIpe2EoYi5kYXRhLGIuc3RhdHVzLGIuaGVhZGVycyxjKX0pO3JldHVybiBnfTtnLmVycm9yPWZ1bmN0aW9uKGEpe2cudGhlbihudWxsLGZ1bmN0aW9uKGIpe2EoYi5kYXRhLGIuc3RhdHVzLGIuaGVhZGVycyxjKX0pO3JldHVybiBnfTtyZXR1cm4gZ31mdW5jdGlvbiBzKGMsZixnKXtmdW5jdGlvbiBoKGEsYixjLGUpe0kmJigyMDA8PWEmJjMwMD5hP0kucHV0KHcsW2EsYix2YyhjKSxlXSk6SS5yZW1vdmUodykpO3AoYixhLGMsZSk7ZC4kJHBoYXNlfHxkLiRhcHBseSgpfWZ1bmN0aW9uIHAoYSxiLGQsZSl7Yj1NYXRoLm1heChiLDApOygyMDA8PVxuYiYmMzAwPmI/QS5yZXNvbHZlOkEucmVqZWN0KSh7ZGF0YTphLHN0YXR1czpiLGhlYWRlcnM6d2MoZCksY29uZmlnOmMsc3RhdHVzVGV4dDplfSl9ZnVuY3Rpb24gcygpe3ZhciBhPVJhKHEucGVuZGluZ1JlcXVlc3RzLGMpOy0xIT09YSYmcS5wZW5kaW5nUmVxdWVzdHMuc3BsaWNlKGEsMSl9dmFyIEE9bi5kZWZlcigpLHI9QS5wcm9taXNlLEksSCx3PUYoYy51cmwsYy5wYXJhbXMpO3EucGVuZGluZ1JlcXVlc3RzLnB1c2goYyk7ci50aGVuKHMscyk7IWMuY2FjaGUmJiFlLmNhY2hlfHwoITE9PT1jLmNhY2hlfHxcIkdFVFwiIT09Yy5tZXRob2QmJlwiSlNPTlBcIiE9PWMubWV0aG9kKXx8KEk9VChjLmNhY2hlKT9jLmNhY2hlOlQoZS5jYWNoZSk/ZS5jYWNoZTp1KTtpZihJKWlmKEg9SS5nZXQodykseShIKSl7aWYoSCYmUChILnRoZW4pKXJldHVybiBILnRoZW4ocyxzKSxIO0ooSCk/cChIWzFdLEhbMF0saGEoSFsyXSksSFszXSk6cChILDIwMCx7fSxcIk9LXCIpfWVsc2UgSS5wdXQodyxyKTt4KEgpJiZcbigoSD1QYihjLnVybCk/Yi5jb29raWVzKClbYy54c3JmQ29va2llTmFtZXx8ZS54c3JmQ29va2llTmFtZV06dCkmJihnW2MueHNyZkhlYWRlck5hbWV8fGUueHNyZkhlYWRlck5hbWVdPUgpLGEoYy5tZXRob2QsdyxmLGgsZyxjLnRpbWVvdXQsYy53aXRoQ3JlZGVudGlhbHMsYy5yZXNwb25zZVR5cGUpKTtyZXR1cm4gcn1mdW5jdGlvbiBGKGEsYil7aWYoIWIpcmV0dXJuIGE7dmFyIGM9W107VGMoYixmdW5jdGlvbihhLGIpe251bGw9PT1hfHx4KGEpfHwoSihhKXx8KGE9W2FdKSxyKGEsZnVuY3Rpb24oYSl7VChhKSYmKGE9dGEoYSk/YS50b0lTT1N0cmluZygpOm5hKGEpKTtjLnB1c2goQ2EoYikrXCI9XCIrQ2EoYSkpfSkpfSk7MDxjLmxlbmd0aCYmKGErPSgtMT09YS5pbmRleE9mKFwiP1wiKT9cIj9cIjpcIiZcIikrYy5qb2luKFwiJlwiKSk7cmV0dXJuIGF9dmFyIHU9YyhcIiRodHRwXCIpLEE9W107cihmLGZ1bmN0aW9uKGEpe0EudW5zaGlmdCh2KGEpP3AuZ2V0KGEpOnAuaW52b2tlKGEpKX0pO3IoZyxcbmZ1bmN0aW9uKGEsYil7dmFyIGM9dihhKT9wLmdldChhKTpwLmludm9rZShhKTtBLnNwbGljZShiLDAse3Jlc3BvbnNlOmZ1bmN0aW9uKGEpe3JldHVybiBjKG4ud2hlbihhKSl9LHJlc3BvbnNlRXJyb3I6ZnVuY3Rpb24oYSl7cmV0dXJuIGMobi5yZWplY3QoYSkpfX0pfSk7cS5wZW5kaW5nUmVxdWVzdHM9W107KGZ1bmN0aW9uKGEpe3IoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe3FbYV09ZnVuY3Rpb24oYixjKXtyZXR1cm4gcShEKGN8fHt9LHttZXRob2Q6YSx1cmw6Yn0pKX19KX0pKFwiZ2V0XCIsXCJkZWxldGVcIixcImhlYWRcIixcImpzb25wXCIpOyhmdW5jdGlvbihhKXtyKGFyZ3VtZW50cyxmdW5jdGlvbihhKXtxW2FdPWZ1bmN0aW9uKGIsYyxkKXtyZXR1cm4gcShEKGR8fHt9LHttZXRob2Q6YSx1cmw6YixkYXRhOmN9KSl9fSl9KShcInBvc3RcIixcInB1dFwiKTtxLmRlZmF1bHRzPWU7cmV0dXJuIHF9XX1mdW5jdGlvbiB4ZShiKXtpZig4Pj1RJiYoIWIubWF0Y2goL14oZ2V0fHBvc3R8aGVhZHxwdXR8ZGVsZXRlfG9wdGlvbnMpJC9pKXx8XG4hVy5YTUxIdHRwUmVxdWVzdCkpcmV0dXJuIG5ldyBXLkFjdGl2ZVhPYmplY3QoXCJNaWNyb3NvZnQuWE1MSFRUUFwiKTtpZihXLlhNTEh0dHBSZXF1ZXN0KXJldHVybiBuZXcgVy5YTUxIdHRwUmVxdWVzdDt0aHJvdyBDKFwiJGh0dHBCYWNrZW5kXCIpKFwibm94aHJcIik7fWZ1bmN0aW9uIFZkKCl7dGhpcy4kZ2V0PVtcIiRicm93c2VyXCIsXCIkd2luZG93XCIsXCIkZG9jdW1lbnRcIixmdW5jdGlvbihiLGEsYyl7cmV0dXJuIHllKGIseGUsYi5kZWZlcixhLmFuZ3VsYXIuY2FsbGJhY2tzLGNbMF0pfV19ZnVuY3Rpb24geWUoYixhLGMsZCxlKXtmdW5jdGlvbiBmKGEsYixjKXt2YXIgZj1lLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIiksZz1udWxsO2YudHlwZT1cInRleHQvamF2YXNjcmlwdFwiO2Yuc3JjPWE7Zi5hc3luYz0hMDtnPWZ1bmN0aW9uKGEpeyRhKGYsXCJsb2FkXCIsZyk7JGEoZixcImVycm9yXCIsZyk7ZS5ib2R5LnJlbW92ZUNoaWxkKGYpO2Y9bnVsbDt2YXIgaz0tMSxzPVwidW5rbm93blwiO2EmJihcImxvYWRcIiE9PVxuYS50eXBlfHxkW2JdLmNhbGxlZHx8KGE9e3R5cGU6XCJlcnJvclwifSkscz1hLnR5cGUsaz1cImVycm9yXCI9PT1hLnR5cGU/NDA0OjIwMCk7YyYmYyhrLHMpfTtzYihmLFwibG9hZFwiLGcpO3NiKGYsXCJlcnJvclwiLGcpOzg+PVEmJihmLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe3YoZi5yZWFkeVN0YXRlKSYmL2xvYWRlZHxjb21wbGV0ZS8udGVzdChmLnJlYWR5U3RhdGUpJiYoZi5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCxnKHt0eXBlOlwibG9hZFwifSkpfSk7ZS5ib2R5LmFwcGVuZENoaWxkKGYpO3JldHVybiBnfXZhciBnPS0xO3JldHVybiBmdW5jdGlvbihlLG0saCxsLG4scCxxLHMpe2Z1bmN0aW9uIEYoKXtBPWc7UiYmUigpO3omJnouYWJvcnQoKX1mdW5jdGlvbiB1KGEsZCxlLGYsZyl7TCYmYy5jYW5jZWwoTCk7Uj16PW51bGw7MD09PWQmJihkPWU/MjAwOlwiZmlsZVwiPT11YShtKS5wcm90b2NvbD80MDQ6MCk7YSgxMjIzPT09ZD8yMDQ6ZCxlLGYsZ3x8XCJcIik7Yi4kJGNvbXBsZXRlT3V0c3RhbmRpbmdSZXF1ZXN0KEUpfVxudmFyIEE7Yi4kJGluY091dHN0YW5kaW5nUmVxdWVzdENvdW50KCk7bT1tfHxiLnVybCgpO2lmKFwianNvbnBcIj09SyhlKSl7dmFyIE49XCJfXCIrKGQuY291bnRlcisrKS50b1N0cmluZygzNik7ZFtOXT1mdW5jdGlvbihhKXtkW05dLmRhdGE9YTtkW05dLmNhbGxlZD0hMH07dmFyIFI9ZihtLnJlcGxhY2UoXCJKU09OX0NBTExCQUNLXCIsXCJhbmd1bGFyLmNhbGxiYWNrcy5cIitOKSxOLGZ1bmN0aW9uKGEsYil7dShsLGEsZFtOXS5kYXRhLFwiXCIsYik7ZFtOXT1FfSl9ZWxzZXt2YXIgej1hKGUpO3oub3BlbihlLG0sITApO3IobixmdW5jdGlvbihhLGIpe3koYSkmJnouc2V0UmVxdWVzdEhlYWRlcihiLGEpfSk7ei5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtpZih6JiY0PT16LnJlYWR5U3RhdGUpe3ZhciBhPW51bGwsYj1udWxsLGM9XCJcIjtBIT09ZyYmKGE9ei5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSxiPVwicmVzcG9uc2VcImluIHo/ei5yZXNwb25zZTp6LnJlc3BvbnNlVGV4dCk7QT09PWcmJlxuMTA+UXx8KGM9ei5zdGF0dXNUZXh0KTt1KGwsQXx8ei5zdGF0dXMsYixhLGMpfX07cSYmKHoud2l0aENyZWRlbnRpYWxzPSEwKTtpZihzKXRyeXt6LnJlc3BvbnNlVHlwZT1zfWNhdGNoKGNhKXtpZihcImpzb25cIiE9PXMpdGhyb3cgY2E7fXouc2VuZChofHxudWxsKX1pZigwPHApdmFyIEw9YyhGLHApO2Vsc2UgcCYmUChwLnRoZW4pJiZwLnRoZW4oRil9fWZ1bmN0aW9uIFNkKCl7dmFyIGI9XCJ7e1wiLGE9XCJ9fVwiO3RoaXMuc3RhcnRTeW1ib2w9ZnVuY3Rpb24oYSl7cmV0dXJuIGE/KGI9YSx0aGlzKTpifTt0aGlzLmVuZFN5bWJvbD1mdW5jdGlvbihiKXtyZXR1cm4gYj8oYT1iLHRoaXMpOmF9O3RoaXMuJGdldD1bXCIkcGFyc2VcIixcIiRleGNlcHRpb25IYW5kbGVyXCIsXCIkc2NlXCIsZnVuY3Rpb24oYyxkLGUpe2Z1bmN0aW9uIGYoZixoLGwpe2Zvcih2YXIgbixwLHE9MCxzPVtdLEY9Zi5sZW5ndGgsdT0hMSxBPVtdO3E8RjspLTEhPShuPWYuaW5kZXhPZihiLHEpKSYmLTEhPShwPWYuaW5kZXhPZihhLFxubitnKSk/KHEhPW4mJnMucHVzaChmLnN1YnN0cmluZyhxLG4pKSxzLnB1c2gocT1jKHU9Zi5zdWJzdHJpbmcobitnLHApKSkscS5leHA9dSxxPXArayx1PSEwKToocSE9RiYmcy5wdXNoKGYuc3Vic3RyaW5nKHEpKSxxPUYpOyhGPXMubGVuZ3RoKXx8KHMucHVzaChcIlwiKSxGPTEpO2lmKGwmJjE8cy5sZW5ndGgpdGhyb3cgeWMoXCJub2NvbmNhdFwiLGYpO2lmKCFofHx1KXJldHVybiBBLmxlbmd0aD1GLHE9ZnVuY3Rpb24oYSl7dHJ5e2Zvcih2YXIgYj0wLGM9RixnO2I8YztiKyspe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mKGc9c1tiXSkpaWYoZz1nKGEpLGc9bD9lLmdldFRydXN0ZWQobCxnKTplLnZhbHVlT2YoZyksbnVsbD09ZylnPVwiXCI7ZWxzZSBzd2l0Y2godHlwZW9mIGcpe2Nhc2UgXCJzdHJpbmdcIjpicmVhaztjYXNlIFwibnVtYmVyXCI6Zz1cIlwiK2c7YnJlYWs7ZGVmYXVsdDpnPW5hKGcpfUFbYl09Z31yZXR1cm4gQS5qb2luKFwiXCIpfWNhdGNoKGspe2E9eWMoXCJpbnRlcnJcIixmLGsudG9TdHJpbmcoKSksXG5kKGEpfX0scS5leHA9ZixxLnBhcnRzPXMscX12YXIgZz1iLmxlbmd0aCxrPWEubGVuZ3RoO2Yuc3RhcnRTeW1ib2w9ZnVuY3Rpb24oKXtyZXR1cm4gYn07Zi5lbmRTeW1ib2w9ZnVuY3Rpb24oKXtyZXR1cm4gYX07cmV0dXJuIGZ9XX1mdW5jdGlvbiBUZCgpe3RoaXMuJGdldD1bXCIkcm9vdFNjb3BlXCIsXCIkd2luZG93XCIsXCIkcVwiLGZ1bmN0aW9uKGIsYSxjKXtmdW5jdGlvbiBkKGQsZyxrLG0pe3ZhciBoPWEuc2V0SW50ZXJ2YWwsbD1hLmNsZWFySW50ZXJ2YWwsbj1jLmRlZmVyKCkscD1uLnByb21pc2UscT0wLHM9eShtKSYmIW07az15KGspP2s6MDtwLnRoZW4obnVsbCxudWxsLGQpO3AuJCRpbnRlcnZhbElkPWgoZnVuY3Rpb24oKXtuLm5vdGlmeShxKyspOzA8ayYmcT49ayYmKG4ucmVzb2x2ZShxKSxsKHAuJCRpbnRlcnZhbElkKSxkZWxldGUgZVtwLiQkaW50ZXJ2YWxJZF0pO3N8fGIuJGFwcGx5KCl9LGcpO2VbcC4kJGludGVydmFsSWRdPW47cmV0dXJuIHB9dmFyIGU9e307ZC5jYW5jZWw9XG5mdW5jdGlvbihiKXtyZXR1cm4gYiYmYi4kJGludGVydmFsSWQgaW4gZT8oZVtiLiQkaW50ZXJ2YWxJZF0ucmVqZWN0KFwiY2FuY2VsZWRcIiksYS5jbGVhckludGVydmFsKGIuJCRpbnRlcnZhbElkKSxkZWxldGUgZVtiLiQkaW50ZXJ2YWxJZF0sITApOiExfTtyZXR1cm4gZH1dfWZ1bmN0aW9uIGJkKCl7dGhpcy4kZ2V0PWZ1bmN0aW9uKCl7cmV0dXJue2lkOlwiZW4tdXNcIixOVU1CRVJfRk9STUFUUzp7REVDSU1BTF9TRVA6XCIuXCIsR1JPVVBfU0VQOlwiLFwiLFBBVFRFUk5TOlt7bWluSW50OjEsbWluRnJhYzowLG1heEZyYWM6Myxwb3NQcmU6XCJcIixwb3NTdWY6XCJcIixuZWdQcmU6XCItXCIsbmVnU3VmOlwiXCIsZ1NpemU6MyxsZ1NpemU6M30se21pbkludDoxLG1pbkZyYWM6MixtYXhGcmFjOjIscG9zUHJlOlwiXFx1MDBhNFwiLHBvc1N1ZjpcIlwiLG5lZ1ByZTpcIihcXHUwMGE0XCIsbmVnU3VmOlwiKVwiLGdTaXplOjMsbGdTaXplOjN9XSxDVVJSRU5DWV9TWU06XCIkXCJ9LERBVEVUSU1FX0ZPUk1BVFM6e01PTlRIOlwiSmFudWFyeSBGZWJydWFyeSBNYXJjaCBBcHJpbCBNYXkgSnVuZSBKdWx5IEF1Z3VzdCBTZXB0ZW1iZXIgT2N0b2JlciBOb3ZlbWJlciBEZWNlbWJlclwiLnNwbGl0KFwiIFwiKSxcblNIT1JUTU9OVEg6XCJKYW4gRmViIE1hciBBcHIgTWF5IEp1biBKdWwgQXVnIFNlcCBPY3QgTm92IERlY1wiLnNwbGl0KFwiIFwiKSxEQVk6XCJTdW5kYXkgTW9uZGF5IFR1ZXNkYXkgV2VkbmVzZGF5IFRodXJzZGF5IEZyaWRheSBTYXR1cmRheVwiLnNwbGl0KFwiIFwiKSxTSE9SVERBWTpcIlN1biBNb24gVHVlIFdlZCBUaHUgRnJpIFNhdFwiLnNwbGl0KFwiIFwiKSxBTVBNUzpbXCJBTVwiLFwiUE1cIl0sbWVkaXVtOlwiTU1NIGQsIHkgaDptbTpzcyBhXCIsXCJzaG9ydFwiOlwiTS9kL3l5IGg6bW0gYVwiLGZ1bGxEYXRlOlwiRUVFRSwgTU1NTSBkLCB5XCIsbG9uZ0RhdGU6XCJNTU1NIGQsIHlcIixtZWRpdW1EYXRlOlwiTU1NIGQsIHlcIixzaG9ydERhdGU6XCJNL2QveXlcIixtZWRpdW1UaW1lOlwiaDptbTpzcyBhXCIsc2hvcnRUaW1lOlwiaDptbSBhXCJ9LHBsdXJhbENhdDpmdW5jdGlvbihiKXtyZXR1cm4gMT09PWI/XCJvbmVcIjpcIm90aGVyXCJ9fX19ZnVuY3Rpb24gUWIoYil7Yj1iLnNwbGl0KFwiL1wiKTtmb3IodmFyIGE9Yi5sZW5ndGg7YS0tOyliW2FdPVxubGIoYlthXSk7cmV0dXJuIGIuam9pbihcIi9cIil9ZnVuY3Rpb24gemMoYixhLGMpe2I9dWEoYixjKTthLiQkcHJvdG9jb2w9Yi5wcm90b2NvbDthLiQkaG9zdD1iLmhvc3RuYW1lO2EuJCRwb3J0PVUoYi5wb3J0KXx8emVbYi5wcm90b2NvbF18fG51bGx9ZnVuY3Rpb24gQWMoYixhLGMpe3ZhciBkPVwiL1wiIT09Yi5jaGFyQXQoMCk7ZCYmKGI9XCIvXCIrYik7Yj11YShiLGMpO2EuJCRwYXRoPWRlY29kZVVSSUNvbXBvbmVudChkJiZcIi9cIj09PWIucGF0aG5hbWUuY2hhckF0KDApP2IucGF0aG5hbWUuc3Vic3RyaW5nKDEpOmIucGF0aG5hbWUpO2EuJCRzZWFyY2g9ZWMoYi5zZWFyY2gpO2EuJCRoYXNoPWRlY29kZVVSSUNvbXBvbmVudChiLmhhc2gpO2EuJCRwYXRoJiZcIi9cIiE9YS4kJHBhdGguY2hhckF0KDApJiYoYS4kJHBhdGg9XCIvXCIrYS4kJHBhdGgpfWZ1bmN0aW9uIHJhKGIsYSl7aWYoMD09PWEuaW5kZXhPZihiKSlyZXR1cm4gYS5zdWJzdHIoYi5sZW5ndGgpfWZ1bmN0aW9uIGViKGIpe3ZhciBhPVxuYi5pbmRleE9mKFwiI1wiKTtyZXR1cm4tMT09YT9iOmIuc3Vic3RyKDAsYSl9ZnVuY3Rpb24gUmIoYil7cmV0dXJuIGIuc3Vic3RyKDAsZWIoYikubGFzdEluZGV4T2YoXCIvXCIpKzEpfWZ1bmN0aW9uIEJjKGIsYSl7dGhpcy4kJGh0bWw1PSEwO2E9YXx8XCJcIjt2YXIgYz1SYihiKTt6YyhiLHRoaXMsYik7dGhpcy4kJHBhcnNlPWZ1bmN0aW9uKGEpe3ZhciBlPXJhKGMsYSk7aWYoIXYoZSkpdGhyb3cgU2IoXCJpcHRocHJmeFwiLGEsYyk7QWMoZSx0aGlzLGIpO3RoaXMuJCRwYXRofHwodGhpcy4kJHBhdGg9XCIvXCIpO3RoaXMuJCRjb21wb3NlKCl9O3RoaXMuJCRjb21wb3NlPWZ1bmN0aW9uKCl7dmFyIGE9Q2IodGhpcy4kJHNlYXJjaCksYj10aGlzLiQkaGFzaD9cIiNcIitsYih0aGlzLiQkaGFzaCk6XCJcIjt0aGlzLiQkdXJsPVFiKHRoaXMuJCRwYXRoKSsoYT9cIj9cIithOlwiXCIpK2I7dGhpcy4kJGFic1VybD1jK3RoaXMuJCR1cmwuc3Vic3RyKDEpfTt0aGlzLiQkcmV3cml0ZT1mdW5jdGlvbihkKXt2YXIgZTtcbmlmKChlPXJhKGIsZCkpIT09dClyZXR1cm4gZD1lLChlPXJhKGEsZSkpIT09dD9jKyhyYShcIi9cIixlKXx8ZSk6YitkO2lmKChlPXJhKGMsZCkpIT09dClyZXR1cm4gYytlO2lmKGM9PWQrXCIvXCIpcmV0dXJuIGN9fWZ1bmN0aW9uIFRiKGIsYSl7dmFyIGM9UmIoYik7emMoYix0aGlzLGIpO3RoaXMuJCRwYXJzZT1mdW5jdGlvbihkKXt2YXIgZT1yYShiLGQpfHxyYShjLGQpLGU9XCIjXCI9PWUuY2hhckF0KDApP3JhKGEsZSk6dGhpcy4kJGh0bWw1P2U6XCJcIjtpZighdihlKSl0aHJvdyBTYihcImloc2hwcmZ4XCIsZCxhKTtBYyhlLHRoaXMsYik7ZD10aGlzLiQkcGF0aDt2YXIgZj0vXlxcL1tBLVpdOihcXC8uKikvOzA9PT1lLmluZGV4T2YoYikmJihlPWUucmVwbGFjZShiLFwiXCIpKTtmLmV4ZWMoZSl8fChkPShlPWYuZXhlYyhkKSk/ZVsxXTpkKTt0aGlzLiQkcGF0aD1kO3RoaXMuJCRjb21wb3NlKCl9O3RoaXMuJCRjb21wb3NlPWZ1bmN0aW9uKCl7dmFyIGM9Q2IodGhpcy4kJHNlYXJjaCksZT10aGlzLiQkaGFzaD9cblwiI1wiK2xiKHRoaXMuJCRoYXNoKTpcIlwiO3RoaXMuJCR1cmw9UWIodGhpcy4kJHBhdGgpKyhjP1wiP1wiK2M6XCJcIikrZTt0aGlzLiQkYWJzVXJsPWIrKHRoaXMuJCR1cmw/YSt0aGlzLiQkdXJsOlwiXCIpfTt0aGlzLiQkcmV3cml0ZT1mdW5jdGlvbihhKXtpZihlYihiKT09ZWIoYSkpcmV0dXJuIGF9fWZ1bmN0aW9uIFViKGIsYSl7dGhpcy4kJGh0bWw1PSEwO1RiLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgYz1SYihiKTt0aGlzLiQkcmV3cml0ZT1mdW5jdGlvbihkKXt2YXIgZTtpZihiPT1lYihkKSlyZXR1cm4gZDtpZihlPXJhKGMsZCkpcmV0dXJuIGIrYStlO2lmKGM9PT1kK1wiL1wiKXJldHVybiBjfTt0aGlzLiQkY29tcG9zZT1mdW5jdGlvbigpe3ZhciBjPUNiKHRoaXMuJCRzZWFyY2gpLGU9dGhpcy4kJGhhc2g/XCIjXCIrbGIodGhpcy4kJGhhc2gpOlwiXCI7dGhpcy4kJHVybD1RYih0aGlzLiQkcGF0aCkrKGM/XCI/XCIrYzpcIlwiKStlO3RoaXMuJCRhYnNVcmw9YithK3RoaXMuJCR1cmx9fWZ1bmN0aW9uIHRiKGIpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0aGlzW2JdfX1cbmZ1bmN0aW9uIENjKGIsYSl7cmV0dXJuIGZ1bmN0aW9uKGMpe2lmKHgoYykpcmV0dXJuIHRoaXNbYl07dGhpc1tiXT1hKGMpO3RoaXMuJCRjb21wb3NlKCk7cmV0dXJuIHRoaXN9fWZ1bmN0aW9uIFdkKCl7dmFyIGI9XCJcIixhPSExO3RoaXMuaGFzaFByZWZpeD1mdW5jdGlvbihhKXtyZXR1cm4geShhKT8oYj1hLHRoaXMpOmJ9O3RoaXMuaHRtbDVNb2RlPWZ1bmN0aW9uKGIpe3JldHVybiB5KGIpPyhhPWIsdGhpcyk6YX07dGhpcy4kZ2V0PVtcIiRyb290U2NvcGVcIixcIiRicm93c2VyXCIsXCIkc25pZmZlclwiLFwiJHJvb3RFbGVtZW50XCIsZnVuY3Rpb24oYyxkLGUsZil7ZnVuY3Rpb24gZyhhKXtjLiRicm9hZGNhc3QoXCIkbG9jYXRpb25DaGFuZ2VTdWNjZXNzXCIsay5hYnNVcmwoKSxhKX12YXIgayxtLGg9ZC5iYXNlSHJlZigpLGw9ZC51cmwoKSxuO2E/KG49bC5zdWJzdHJpbmcoMCxsLmluZGV4T2YoXCIvXCIsbC5pbmRleE9mKFwiLy9cIikrMikpKyhofHxcIi9cIiksbT1lLmhpc3Rvcnk/QmM6VWIpOihuPVxuZWIobCksbT1UYik7az1uZXcgbShuLFwiI1wiK2IpO2suJCRwYXJzZShrLiQkcmV3cml0ZShsKSk7dmFyIHA9L15cXHMqKGphdmFzY3JpcHR8bWFpbHRvKTovaTtmLm9uKFwiY2xpY2tcIixmdW5jdGlvbihhKXtpZighYS5jdHJsS2V5JiYhYS5tZXRhS2V5JiYyIT1hLndoaWNoKXtmb3IodmFyIGU9dyhhLnRhcmdldCk7XCJhXCIhPT1LKGVbMF0ubm9kZU5hbWUpOylpZihlWzBdPT09ZlswXXx8IShlPWUucGFyZW50KCkpWzBdKXJldHVybjt2YXIgZz1lLnByb3AoXCJocmVmXCIpO1QoZykmJlwiW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ11cIj09PWcudG9TdHJpbmcoKSYmKGc9dWEoZy5hbmltVmFsKS5ocmVmKTtpZighcC50ZXN0KGcpKXtpZihtPT09VWIpe3ZhciBoPWUuYXR0cihcImhyZWZcIil8fGUuYXR0cihcInhsaW5rOmhyZWZcIik7aWYoaCYmMD5oLmluZGV4T2YoXCI6Ly9cIikpaWYoZz1cIiNcIitiLFwiL1wiPT1oWzBdKWc9bitnK2g7ZWxzZSBpZihcIiNcIj09aFswXSlnPW4rZysoay5wYXRoKCl8fFwiL1wiKStoO1xuZWxzZXt2YXIgbD1rLnBhdGgoKS5zcGxpdChcIi9cIiksaD1oLnNwbGl0KFwiL1wiKTsyIT09bC5sZW5ndGh8fGxbMV18fChsLmxlbmd0aD0xKTtmb3IodmFyIHE9MDtxPGgubGVuZ3RoO3ErKylcIi5cIiE9aFtxXSYmKFwiLi5cIj09aFtxXT9sLnBvcCgpOmhbcV0ubGVuZ3RoJiZsLnB1c2goaFtxXSkpO2c9bitnK2wuam9pbihcIi9cIil9fWw9ay4kJHJld3JpdGUoZyk7ZyYmKCFlLmF0dHIoXCJ0YXJnZXRcIikmJmwmJiFhLmlzRGVmYXVsdFByZXZlbnRlZCgpKSYmKGEucHJldmVudERlZmF1bHQoKSxsIT1kLnVybCgpJiYoay4kJHBhcnNlKGwpLGMuJGFwcGx5KCksVy5hbmd1bGFyW1wiZmYtNjg0MjA4LXByZXZlbnREZWZhdWx0XCJdPSEwKSl9fX0pO2suYWJzVXJsKCkhPWwmJmQudXJsKGsuYWJzVXJsKCksITApO2Qub25VcmxDaGFuZ2UoZnVuY3Rpb24oYSl7ay5hYnNVcmwoKSE9YSYmKGMuJGV2YWxBc3luYyhmdW5jdGlvbigpe3ZhciBiPWsuYWJzVXJsKCk7ay4kJHBhcnNlKGEpO2MuJGJyb2FkY2FzdChcIiRsb2NhdGlvbkNoYW5nZVN0YXJ0XCIsXG5hLGIpLmRlZmF1bHRQcmV2ZW50ZWQ/KGsuJCRwYXJzZShiKSxkLnVybChiKSk6ZyhiKX0pLGMuJCRwaGFzZXx8Yy4kZGlnZXN0KCkpfSk7dmFyIHE9MDtjLiR3YXRjaChmdW5jdGlvbigpe3ZhciBhPWQudXJsKCksYj1rLiQkcmVwbGFjZTtxJiZhPT1rLmFic1VybCgpfHwocSsrLGMuJGV2YWxBc3luYyhmdW5jdGlvbigpe2MuJGJyb2FkY2FzdChcIiRsb2NhdGlvbkNoYW5nZVN0YXJ0XCIsay5hYnNVcmwoKSxhKS5kZWZhdWx0UHJldmVudGVkP2suJCRwYXJzZShhKTooZC51cmwoay5hYnNVcmwoKSxiKSxnKGEpKX0pKTtrLiQkcmVwbGFjZT0hMTtyZXR1cm4gcX0pO3JldHVybiBrfV19ZnVuY3Rpb24gWGQoKXt2YXIgYj0hMCxhPXRoaXM7dGhpcy5kZWJ1Z0VuYWJsZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHkoYSk/KGI9YSx0aGlzKTpifTt0aGlzLiRnZXQ9W1wiJHdpbmRvd1wiLGZ1bmN0aW9uKGMpe2Z1bmN0aW9uIGQoYSl7YSBpbnN0YW5jZW9mIEVycm9yJiYoYS5zdGFjaz9hPWEubWVzc2FnZSYmXG4tMT09PWEuc3RhY2suaW5kZXhPZihhLm1lc3NhZ2UpP1wiRXJyb3I6IFwiK2EubWVzc2FnZStcIlxcblwiK2Euc3RhY2s6YS5zdGFjazphLnNvdXJjZVVSTCYmKGE9YS5tZXNzYWdlK1wiXFxuXCIrYS5zb3VyY2VVUkwrXCI6XCIrYS5saW5lKSk7cmV0dXJuIGF9ZnVuY3Rpb24gZShhKXt2YXIgYj1jLmNvbnNvbGV8fHt9LGU9YlthXXx8Yi5sb2d8fEU7YT0hMTt0cnl7YT0hIWUuYXBwbHl9Y2F0Y2gobSl7fXJldHVybiBhP2Z1bmN0aW9uKCl7dmFyIGE9W107cihhcmd1bWVudHMsZnVuY3Rpb24oYil7YS5wdXNoKGQoYikpfSk7cmV0dXJuIGUuYXBwbHkoYixhKX06ZnVuY3Rpb24oYSxiKXtlKGEsbnVsbD09Yj9cIlwiOmIpfX1yZXR1cm57bG9nOmUoXCJsb2dcIiksaW5mbzplKFwiaW5mb1wiKSx3YXJuOmUoXCJ3YXJuXCIpLGVycm9yOmUoXCJlcnJvclwiKSxkZWJ1ZzpmdW5jdGlvbigpe3ZhciBjPWUoXCJkZWJ1Z1wiKTtyZXR1cm4gZnVuY3Rpb24oKXtiJiZjLmFwcGx5KGEsYXJndW1lbnRzKX19KCl9fV19ZnVuY3Rpb24ga2EoYixcbmEpe2lmKFwiX19kZWZpbmVHZXR0ZXJfX1wiPT09Ynx8XCJfX2RlZmluZVNldHRlcl9fXCI9PT1ifHxcIl9fbG9va3VwR2V0dGVyX19cIj09PWJ8fFwiX19sb29rdXBTZXR0ZXJfX1wiPT09Ynx8XCJfX3Byb3RvX19cIj09PWIpdGhyb3cgbGEoXCJpc2VjZmxkXCIsYSk7cmV0dXJuIGJ9ZnVuY3Rpb24gdmEoYixhKXtpZihiKXtpZihiLmNvbnN0cnVjdG9yPT09Yil0aHJvdyBsYShcImlzZWNmblwiLGEpO2lmKGIuZG9jdW1lbnQmJmIubG9jYXRpb24mJmIuYWxlcnQmJmIuc2V0SW50ZXJ2YWwpdGhyb3cgbGEoXCJpc2Vjd2luZG93XCIsYSk7aWYoYi5jaGlsZHJlbiYmKGIubm9kZU5hbWV8fGIucHJvcCYmYi5hdHRyJiZiLmZpbmQpKXRocm93IGxhKFwiaXNlY2RvbVwiLGEpO2lmKGI9PT1PYmplY3QpdGhyb3cgbGEoXCJpc2Vjb2JqXCIsYSk7fXJldHVybiBifWZ1bmN0aW9uIHViKGIsYSxjLGQsZSl7dmEoYixkKTtlPWV8fHt9O2E9YS5zcGxpdChcIi5cIik7Zm9yKHZhciBmLGc9MDsxPGEubGVuZ3RoO2crKyl7Zj1rYShhLnNoaWZ0KCksXG5kKTt2YXIgaz12YShiW2ZdLGQpO2t8fChrPXt9LGJbZl09ayk7Yj1rO2IudGhlbiYmZS51bndyYXBQcm9taXNlcyYmKHdhKGQpLFwiJCR2XCJpbiBifHxmdW5jdGlvbihhKXthLnRoZW4oZnVuY3Rpb24oYil7YS4kJHY9Yn0pfShiKSxiLiQkdj09PXQmJihiLiQkdj17fSksYj1iLiQkdil9Zj1rYShhLnNoaWZ0KCksZCk7dmEoYltmXSxkKTtyZXR1cm4gYltmXT1jfWZ1bmN0aW9uIERjKGIsYSxjLGQsZSxmLGcpe2thKGIsZik7a2EoYSxmKTtrYShjLGYpO2thKGQsZik7a2EoZSxmKTtyZXR1cm4gZy51bndyYXBQcm9taXNlcz9mdW5jdGlvbihnLG0pe3ZhciBoPW0mJm0uaGFzT3duUHJvcGVydHkoYik/bTpnLGw7aWYobnVsbD09aClyZXR1cm4gaDsoaD1oW2JdKSYmaC50aGVuJiYod2EoZiksXCIkJHZcImluIGh8fChsPWgsbC4kJHY9dCxsLnRoZW4oZnVuY3Rpb24oYSl7bC4kJHY9YX0pKSxoPWguJCR2KTtpZighYSlyZXR1cm4gaDtpZihudWxsPT1oKXJldHVybiB0OyhoPWhbYV0pJiZoLnRoZW4mJlxuKHdhKGYpLFwiJCR2XCJpbiBofHwobD1oLGwuJCR2PXQsbC50aGVuKGZ1bmN0aW9uKGEpe2wuJCR2PWF9KSksaD1oLiQkdik7aWYoIWMpcmV0dXJuIGg7aWYobnVsbD09aClyZXR1cm4gdDsoaD1oW2NdKSYmaC50aGVuJiYod2EoZiksXCIkJHZcImluIGh8fChsPWgsbC4kJHY9dCxsLnRoZW4oZnVuY3Rpb24oYSl7bC4kJHY9YX0pKSxoPWguJCR2KTtpZighZClyZXR1cm4gaDtpZihudWxsPT1oKXJldHVybiB0OyhoPWhbZF0pJiZoLnRoZW4mJih3YShmKSxcIiQkdlwiaW4gaHx8KGw9aCxsLiQkdj10LGwudGhlbihmdW5jdGlvbihhKXtsLiQkdj1hfSkpLGg9aC4kJHYpO2lmKCFlKXJldHVybiBoO2lmKG51bGw9PWgpcmV0dXJuIHQ7KGg9aFtlXSkmJmgudGhlbiYmKHdhKGYpLFwiJCR2XCJpbiBofHwobD1oLGwuJCR2PXQsbC50aGVuKGZ1bmN0aW9uKGEpe2wuJCR2PWF9KSksaD1oLiQkdik7cmV0dXJuIGh9OmZ1bmN0aW9uKGYsZyl7dmFyIGg9ZyYmZy5oYXNPd25Qcm9wZXJ0eShiKT9nOmY7aWYobnVsbD09XG5oKXJldHVybiBoO2g9aFtiXTtpZighYSlyZXR1cm4gaDtpZihudWxsPT1oKXJldHVybiB0O2g9aFthXTtpZighYylyZXR1cm4gaDtpZihudWxsPT1oKXJldHVybiB0O2g9aFtjXTtpZighZClyZXR1cm4gaDtpZihudWxsPT1oKXJldHVybiB0O2g9aFtkXTtyZXR1cm4gZT9udWxsPT1oP3Q6aD1oW2VdOmh9fWZ1bmN0aW9uIEVjKGIsYSxjKXtpZihWYi5oYXNPd25Qcm9wZXJ0eShiKSlyZXR1cm4gVmJbYl07dmFyIGQ9Yi5zcGxpdChcIi5cIiksZT1kLmxlbmd0aCxmO2lmKGEuY3NwKWY9Nj5lP0RjKGRbMF0sZFsxXSxkWzJdLGRbM10sZFs0XSxjLGEpOmZ1bmN0aW9uKGIsZil7dmFyIGc9MCxrO2RvIGs9RGMoZFtnKytdLGRbZysrXSxkW2crK10sZFtnKytdLGRbZysrXSxjLGEpKGIsZiksZj10LGI9azt3aGlsZShnPGUpO3JldHVybiBrfTtlbHNle3ZhciBnPVwidmFyIHA7XFxuXCI7cihkLGZ1bmN0aW9uKGIsZCl7a2EoYixjKTtnKz1cImlmKHMgPT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZDtcXG5zPVwiK1xuKGQ/XCJzXCI6JygoayYmay5oYXNPd25Qcm9wZXJ0eShcIicrYisnXCIpKT9rOnMpJykrJ1tcIicrYisnXCJdO1xcbicrKGEudW53cmFwUHJvbWlzZXM/J2lmIChzICYmIHMudGhlbikge1xcbiBwdyhcIicrYy5yZXBsYWNlKC8oW1wiXFxyXFxuXSkvZyxcIlxcXFwkMVwiKSsnXCIpO1xcbiBpZiAoIShcIiQkdlwiIGluIHMpKSB7XFxuIHA9cztcXG4gcC4kJHYgPSB1bmRlZmluZWQ7XFxuIHAudGhlbihmdW5jdGlvbih2KSB7cC4kJHY9djt9KTtcXG59XFxuIHM9cy4kJHZcXG59XFxuJzpcIlwiKX0pO3ZhciBnPWcrXCJyZXR1cm4gcztcIixrPW5ldyBGdW5jdGlvbihcInNcIixcImtcIixcInB3XCIsZyk7ay50b1N0cmluZz1iYShnKTtmPWEudW53cmFwUHJvbWlzZXM/ZnVuY3Rpb24oYSxiKXtyZXR1cm4gayhhLGIsd2EpfTprfVwiaGFzT3duUHJvcGVydHlcIiE9PWImJihWYltiXT1mKTtyZXR1cm4gZn1mdW5jdGlvbiBZZCgpe3ZhciBiPXt9LGE9e2NzcDohMSx1bndyYXBQcm9taXNlczohMSxsb2dQcm9taXNlV2FybmluZ3M6ITB9O3RoaXMudW53cmFwUHJvbWlzZXM9XG5mdW5jdGlvbihiKXtyZXR1cm4geShiKT8oYS51bndyYXBQcm9taXNlcz0hIWIsdGhpcyk6YS51bndyYXBQcm9taXNlc307dGhpcy5sb2dQcm9taXNlV2FybmluZ3M9ZnVuY3Rpb24oYil7cmV0dXJuIHkoYik/KGEubG9nUHJvbWlzZVdhcm5pbmdzPWIsdGhpcyk6YS5sb2dQcm9taXNlV2FybmluZ3N9O3RoaXMuJGdldD1bXCIkZmlsdGVyXCIsXCIkc25pZmZlclwiLFwiJGxvZ1wiLGZ1bmN0aW9uKGMsZCxlKXthLmNzcD1kLmNzcDt3YT1mdW5jdGlvbihiKXthLmxvZ1Byb21pc2VXYXJuaW5ncyYmIUZjLmhhc093blByb3BlcnR5KGIpJiYoRmNbYl09ITAsZS53YXJuKFwiWyRwYXJzZV0gUHJvbWlzZSBmb3VuZCBpbiB0aGUgZXhwcmVzc2lvbiBgXCIrYitcImAuIEF1dG9tYXRpYyB1bndyYXBwaW5nIG9mIHByb21pc2VzIGluIEFuZ3VsYXIgZXhwcmVzc2lvbnMgaXMgZGVwcmVjYXRlZC5cIikpfTtyZXR1cm4gZnVuY3Rpb24oZCl7dmFyIGU7c3dpdGNoKHR5cGVvZiBkKXtjYXNlIFwic3RyaW5nXCI6aWYoYi5oYXNPd25Qcm9wZXJ0eShkKSlyZXR1cm4gYltkXTtcbmU9bmV3IFdiKGEpO2U9KG5ldyBmYihlLGMsYSkpLnBhcnNlKGQpO1wiaGFzT3duUHJvcGVydHlcIiE9PWQmJihiW2RdPWUpO3JldHVybiBlO2Nhc2UgXCJmdW5jdGlvblwiOnJldHVybiBkO2RlZmF1bHQ6cmV0dXJuIEV9fX1dfWZ1bmN0aW9uICRkKCl7dGhpcy4kZ2V0PVtcIiRyb290U2NvcGVcIixcIiRleGNlcHRpb25IYW5kbGVyXCIsZnVuY3Rpb24oYixhKXtyZXR1cm4gQWUoZnVuY3Rpb24oYSl7Yi4kZXZhbEFzeW5jKGEpfSxhKX1dfWZ1bmN0aW9uIEFlKGIsYSl7ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYX1mdW5jdGlvbiBkKGEpe3JldHVybiBnKGEpfXZhciBlPWZ1bmN0aW9uKCl7dmFyIGc9W10saCxsO3JldHVybiBsPXtyZXNvbHZlOmZ1bmN0aW9uKGEpe2lmKGcpe3ZhciBjPWc7Zz10O2g9ZihhKTtjLmxlbmd0aCYmYihmdW5jdGlvbigpe2Zvcih2YXIgYSxiPTAsZD1jLmxlbmd0aDtiPGQ7YisrKWE9Y1tiXSxoLnRoZW4oYVswXSxhWzFdLGFbMl0pfSl9fSxyZWplY3Q6ZnVuY3Rpb24oYSl7bC5yZXNvbHZlKGsoYSkpfSxcbm5vdGlmeTpmdW5jdGlvbihhKXtpZihnKXt2YXIgYz1nO2cubGVuZ3RoJiZiKGZ1bmN0aW9uKCl7Zm9yKHZhciBiLGQ9MCxlPWMubGVuZ3RoO2Q8ZTtkKyspYj1jW2RdLGJbMl0oYSl9KX19LHByb21pc2U6e3RoZW46ZnVuY3Rpb24oYixmLGspe3ZhciBsPWUoKSxGPWZ1bmN0aW9uKGQpe3RyeXtsLnJlc29sdmUoKFAoYik/YjpjKShkKSl9Y2F0Y2goZSl7bC5yZWplY3QoZSksYShlKX19LHU9ZnVuY3Rpb24oYil7dHJ5e2wucmVzb2x2ZSgoUChmKT9mOmQpKGIpKX1jYXRjaChjKXtsLnJlamVjdChjKSxhKGMpfX0sQT1mdW5jdGlvbihiKXt0cnl7bC5ub3RpZnkoKFAoayk/azpjKShiKSl9Y2F0Y2goZCl7YShkKX19O2c/Zy5wdXNoKFtGLHUsQV0pOmgudGhlbihGLHUsQSk7cmV0dXJuIGwucHJvbWlzZX0sXCJjYXRjaFwiOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnRoZW4obnVsbCxhKX0sXCJmaW5hbGx5XCI6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGMpe3ZhciBkPWUoKTtjP2QucmVzb2x2ZShhKTpcbmQucmVqZWN0KGEpO3JldHVybiBkLnByb21pc2V9ZnVuY3Rpb24gZChlLGYpe3ZhciBnPW51bGw7dHJ5e2c9KGF8fGMpKCl9Y2F0Y2goayl7cmV0dXJuIGIoaywhMSl9cmV0dXJuIGcmJlAoZy50aGVuKT9nLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gYihlLGYpfSxmdW5jdGlvbihhKXtyZXR1cm4gYihhLCExKX0pOmIoZSxmKX1yZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKGEpe3JldHVybiBkKGEsITApfSxmdW5jdGlvbihhKXtyZXR1cm4gZChhLCExKX0pfX19fSxmPWZ1bmN0aW9uKGEpe3JldHVybiBhJiZQKGEudGhlbik/YTp7dGhlbjpmdW5jdGlvbihjKXt2YXIgZD1lKCk7YihmdW5jdGlvbigpe2QucmVzb2x2ZShjKGEpKX0pO3JldHVybiBkLnByb21pc2V9fX0sZz1mdW5jdGlvbihhKXt2YXIgYj1lKCk7Yi5yZWplY3QoYSk7cmV0dXJuIGIucHJvbWlzZX0saz1mdW5jdGlvbihjKXtyZXR1cm57dGhlbjpmdW5jdGlvbihmLGcpe3ZhciBrPWUoKTtiKGZ1bmN0aW9uKCl7dHJ5e2sucmVzb2x2ZSgoUChnKT9cbmc6ZCkoYykpfWNhdGNoKGIpe2sucmVqZWN0KGIpLGEoYil9fSk7cmV0dXJuIGsucHJvbWlzZX19fTtyZXR1cm57ZGVmZXI6ZSxyZWplY3Q6Zyx3aGVuOmZ1bmN0aW9uKGssaCxsLG4pe3ZhciBwPWUoKSxxLHM9ZnVuY3Rpb24oYil7dHJ5e3JldHVybihQKGgpP2g6YykoYil9Y2F0Y2goZCl7cmV0dXJuIGEoZCksZyhkKX19LEY9ZnVuY3Rpb24oYil7dHJ5e3JldHVybihQKGwpP2w6ZCkoYil9Y2F0Y2goYyl7cmV0dXJuIGEoYyksZyhjKX19LHU9ZnVuY3Rpb24oYil7dHJ5e3JldHVybihQKG4pP246YykoYil9Y2F0Y2goZCl7YShkKX19O2IoZnVuY3Rpb24oKXtmKGspLnRoZW4oZnVuY3Rpb24oYSl7cXx8KHE9ITAscC5yZXNvbHZlKGYoYSkudGhlbihzLEYsdSkpKX0sZnVuY3Rpb24oYSl7cXx8KHE9ITAscC5yZXNvbHZlKEYoYSkpKX0sZnVuY3Rpb24oYSl7cXx8cC5ub3RpZnkodShhKSl9KX0pO3JldHVybiBwLnByb21pc2V9LGFsbDpmdW5jdGlvbihhKXt2YXIgYj1lKCksYz0wLGQ9SihhKT9cbltdOnt9O3IoYSxmdW5jdGlvbihhLGUpe2MrKztmKGEpLnRoZW4oZnVuY3Rpb24oYSl7ZC5oYXNPd25Qcm9wZXJ0eShlKXx8KGRbZV09YSwtLWN8fGIucmVzb2x2ZShkKSl9LGZ1bmN0aW9uKGEpe2QuaGFzT3duUHJvcGVydHkoZSl8fGIucmVqZWN0KGEpfSl9KTswPT09YyYmYi5yZXNvbHZlKGQpO3JldHVybiBiLnByb21pc2V9fX1mdW5jdGlvbiBnZSgpe3RoaXMuJGdldD1bXCIkd2luZG93XCIsXCIkdGltZW91dFwiLGZ1bmN0aW9uKGIsYSl7dmFyIGM9Yi5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGIud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxiLm1velJlcXVlc3RBbmltYXRpb25GcmFtZSxkPWIuY2FuY2VsQW5pbWF0aW9uRnJhbWV8fGIud2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWV8fGIubW96Q2FuY2VsQW5pbWF0aW9uRnJhbWV8fGIud2Via2l0Q2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lLGU9ISFjLGY9ZT9mdW5jdGlvbihhKXt2YXIgYj1jKGEpO3JldHVybiBmdW5jdGlvbigpe2QoYil9fTpcbmZ1bmN0aW9uKGIpe3ZhciBjPWEoYiwxNi42NiwhMSk7cmV0dXJuIGZ1bmN0aW9uKCl7YS5jYW5jZWwoYyl9fTtmLnN1cHBvcnRlZD1lO3JldHVybiBmfV19ZnVuY3Rpb24gWmQoKXt2YXIgYj0xMCxhPUMoXCIkcm9vdFNjb3BlXCIpLGM9bnVsbDt0aGlzLmRpZ2VzdFR0bD1mdW5jdGlvbihhKXthcmd1bWVudHMubGVuZ3RoJiYoYj1hKTtyZXR1cm4gYn07dGhpcy4kZ2V0PVtcIiRpbmplY3RvclwiLFwiJGV4Y2VwdGlvbkhhbmRsZXJcIixcIiRwYXJzZVwiLFwiJGJyb3dzZXJcIixmdW5jdGlvbihkLGUsZixnKXtmdW5jdGlvbiBrKCl7dGhpcy4kaWQ9aGIoKTt0aGlzLiQkcGhhc2U9dGhpcy4kcGFyZW50PXRoaXMuJCR3YXRjaGVycz10aGlzLiQkbmV4dFNpYmxpbmc9dGhpcy4kJHByZXZTaWJsaW5nPXRoaXMuJCRjaGlsZEhlYWQ9dGhpcy4kJGNoaWxkVGFpbD1udWxsO3RoaXNbXCJ0aGlzXCJdPXRoaXMuJHJvb3Q9dGhpczt0aGlzLiQkZGVzdHJveWVkPSExO3RoaXMuJCRhc3luY1F1ZXVlPVtdO3RoaXMuJCRwb3N0RGlnZXN0UXVldWU9XG5bXTt0aGlzLiQkbGlzdGVuZXJzPXt9O3RoaXMuJCRsaXN0ZW5lckNvdW50PXt9O3RoaXMuJCRpc29sYXRlQmluZGluZ3M9e319ZnVuY3Rpb24gbShiKXtpZihwLiQkcGhhc2UpdGhyb3cgYShcImlucHJvZ1wiLHAuJCRwaGFzZSk7cC4kJHBoYXNlPWJ9ZnVuY3Rpb24gaChhLGIpe3ZhciBjPWYoYSk7V2EoYyxiKTtyZXR1cm4gY31mdW5jdGlvbiBsKGEsYixjKXtkbyBhLiQkbGlzdGVuZXJDb3VudFtjXS09YiwwPT09YS4kJGxpc3RlbmVyQ291bnRbY10mJmRlbGV0ZSBhLiQkbGlzdGVuZXJDb3VudFtjXTt3aGlsZShhPWEuJHBhcmVudCl9ZnVuY3Rpb24gbigpe31rLnByb3RvdHlwZT17Y29uc3RydWN0b3I6aywkbmV3OmZ1bmN0aW9uKGEpe2E/KGE9bmV3IGssYS4kcm9vdD10aGlzLiRyb290LGEuJCRhc3luY1F1ZXVlPXRoaXMuJCRhc3luY1F1ZXVlLGEuJCRwb3N0RGlnZXN0UXVldWU9dGhpcy4kJHBvc3REaWdlc3RRdWV1ZSk6KHRoaXMuJCRjaGlsZFNjb3BlQ2xhc3N8fCh0aGlzLiQkY2hpbGRTY29wZUNsYXNzPVxuZnVuY3Rpb24oKXt0aGlzLiQkd2F0Y2hlcnM9dGhpcy4kJG5leHRTaWJsaW5nPXRoaXMuJCRjaGlsZEhlYWQ9dGhpcy4kJGNoaWxkVGFpbD1udWxsO3RoaXMuJCRsaXN0ZW5lcnM9e307dGhpcy4kJGxpc3RlbmVyQ291bnQ9e307dGhpcy4kaWQ9aGIoKTt0aGlzLiQkY2hpbGRTY29wZUNsYXNzPW51bGx9LHRoaXMuJCRjaGlsZFNjb3BlQ2xhc3MucHJvdG90eXBlPXRoaXMpLGE9bmV3IHRoaXMuJCRjaGlsZFNjb3BlQ2xhc3MpO2FbXCJ0aGlzXCJdPWE7YS4kcGFyZW50PXRoaXM7YS4kJHByZXZTaWJsaW5nPXRoaXMuJCRjaGlsZFRhaWw7dGhpcy4kJGNoaWxkSGVhZD90aGlzLiQkY2hpbGRUYWlsPXRoaXMuJCRjaGlsZFRhaWwuJCRuZXh0U2libGluZz1hOnRoaXMuJCRjaGlsZEhlYWQ9dGhpcy4kJGNoaWxkVGFpbD1hO3JldHVybiBhfSwkd2F0Y2g6ZnVuY3Rpb24oYSxiLGQpe3ZhciBlPWgoYSxcIndhdGNoXCIpLGY9dGhpcy4kJHdhdGNoZXJzLGc9e2ZuOmIsbGFzdDpuLGdldDplLGV4cDphLFxuZXE6ISFkfTtjPW51bGw7aWYoIVAoYikpe3ZhciBrPWgoYnx8RSxcImxpc3RlbmVyXCIpO2cuZm49ZnVuY3Rpb24oYSxiLGMpe2soYyl9fWlmKFwic3RyaW5nXCI9PXR5cGVvZiBhJiZlLmNvbnN0YW50KXt2YXIgbD1nLmZuO2cuZm49ZnVuY3Rpb24oYSxiLGMpe2wuY2FsbCh0aGlzLGEsYixjKTtTYShmLGcpfX1mfHwoZj10aGlzLiQkd2F0Y2hlcnM9W10pO2YudW5zaGlmdChnKTtyZXR1cm4gZnVuY3Rpb24oKXtTYShmLGcpO2M9bnVsbH19LCR3YXRjaENvbGxlY3Rpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQsZSxnLGs9MTxiLmxlbmd0aCxoPTAsbD1mKGEpLG09W10scD17fSxuPSEwLHI9MDtyZXR1cm4gdGhpcy4kd2F0Y2goZnVuY3Rpb24oKXtkPWwoYyk7dmFyIGEsYixmO2lmKFQoZCkpaWYoUGEoZCkpZm9yKGUhPT1tJiYoZT1tLHI9ZS5sZW5ndGg9MCxoKyspLGE9ZC5sZW5ndGgsciE9PWEmJihoKyssZS5sZW5ndGg9cj1hKSxiPTA7YjxhO2IrKylmPWVbYl0hPT1lW2JdJiZkW2JdIT09XG5kW2JdLGZ8fGVbYl09PT1kW2JdfHwoaCsrLGVbYl09ZFtiXSk7ZWxzZXtlIT09cCYmKGU9cD17fSxyPTAsaCsrKTthPTA7Zm9yKGIgaW4gZClkLmhhc093blByb3BlcnR5KGIpJiYoYSsrLGUuaGFzT3duUHJvcGVydHkoYik/KGY9ZVtiXSE9PWVbYl0mJmRbYl0hPT1kW2JdLGZ8fGVbYl09PT1kW2JdfHwoaCsrLGVbYl09ZFtiXSkpOihyKyssZVtiXT1kW2JdLGgrKykpO2lmKHI+YSlmb3IoYiBpbiBoKyssZSllLmhhc093blByb3BlcnR5KGIpJiYhZC5oYXNPd25Qcm9wZXJ0eShiKSYmKHItLSxkZWxldGUgZVtiXSl9ZWxzZSBlIT09ZCYmKGU9ZCxoKyspO3JldHVybiBofSxmdW5jdGlvbigpe24/KG49ITEsYihkLGQsYykpOmIoZCxnLGMpO2lmKGspaWYoVChkKSlpZihQYShkKSl7Zz1BcnJheShkLmxlbmd0aCk7Zm9yKHZhciBhPTA7YTxkLmxlbmd0aDthKyspZ1thXT1kW2FdfWVsc2UgZm9yKGEgaW4gZz17fSxkKWtiLmNhbGwoZCxhKSYmKGdbYV09ZFthXSk7ZWxzZSBnPWR9KX0sJGRpZ2VzdDpmdW5jdGlvbigpe3ZhciBkLFxuZixrLGgsbD10aGlzLiQkYXN5bmNRdWV1ZSxyPXRoaXMuJCRwb3N0RGlnZXN0UXVldWUsUix6LHQ9YixMLE89W10sdyxCLEk7bShcIiRkaWdlc3RcIik7Zy4kJGNoZWNrVXJsQ2hhbmdlKCk7Yz1udWxsO2Rve3o9ITE7Zm9yKEw9dGhpcztsLmxlbmd0aDspe3RyeXtJPWwuc2hpZnQoKSxJLnNjb3BlLiRldmFsKEkuZXhwcmVzc2lvbil9Y2F0Y2goSCl7cC4kJHBoYXNlPW51bGwsZShIKX1jPW51bGx9YTpkb3tpZihoPUwuJCR3YXRjaGVycylmb3IoUj1oLmxlbmd0aDtSLS07KXRyeXtpZihkPWhbUl0paWYoKGY9ZC5nZXQoTCkpIT09KGs9ZC5sYXN0KSYmIShkLmVxP0FhKGYsayk6XCJudW1iZXJcIj09PXR5cGVvZiBmJiZcIm51bWJlclwiPT09dHlwZW9mIGsmJmlzTmFOKGYpJiZpc05hTihrKSkpej0hMCxjPWQsZC5sYXN0PWQuZXE/SGEoZixudWxsKTpmLGQuZm4oZixrPT09bj9mOmssTCksNT50JiYodz00LXQsT1t3XXx8KE9bd109W10pLEI9UChkLmV4cCk/XCJmbjogXCIrKGQuZXhwLm5hbWV8fGQuZXhwLnRvU3RyaW5nKCkpOlxuZC5leHAsQis9XCI7IG5ld1ZhbDogXCIrbmEoZikrXCI7IG9sZFZhbDogXCIrbmEoayksT1t3XS5wdXNoKEIpKTtlbHNlIGlmKGQ9PT1jKXt6PSExO2JyZWFrIGF9fWNhdGNoKHkpe3AuJCRwaGFzZT1udWxsLGUoeSl9aWYoIShoPUwuJCRjaGlsZEhlYWR8fEwhPT10aGlzJiZMLiQkbmV4dFNpYmxpbmcpKWZvcig7TCE9PXRoaXMmJiEoaD1MLiQkbmV4dFNpYmxpbmcpOylMPUwuJHBhcmVudH13aGlsZShMPWgpO2lmKCh6fHxsLmxlbmd0aCkmJiF0LS0pdGhyb3cgcC4kJHBoYXNlPW51bGwsYShcImluZmRpZ1wiLGIsbmEoTykpO313aGlsZSh6fHxsLmxlbmd0aCk7Zm9yKHAuJCRwaGFzZT1udWxsO3IubGVuZ3RoOyl0cnl7ci5zaGlmdCgpKCl9Y2F0Y2godil7ZSh2KX19LCRkZXN0cm95OmZ1bmN0aW9uKCl7aWYoIXRoaXMuJCRkZXN0cm95ZWQpe3ZhciBhPXRoaXMuJHBhcmVudDt0aGlzLiRicm9hZGNhc3QoXCIkZGVzdHJveVwiKTt0aGlzLiQkZGVzdHJveWVkPSEwO3RoaXMhPT1wJiYocih0aGlzLiQkbGlzdGVuZXJDb3VudCxcbkJiKG51bGwsbCx0aGlzKSksYS4kJGNoaWxkSGVhZD09dGhpcyYmKGEuJCRjaGlsZEhlYWQ9dGhpcy4kJG5leHRTaWJsaW5nKSxhLiQkY2hpbGRUYWlsPT10aGlzJiYoYS4kJGNoaWxkVGFpbD10aGlzLiQkcHJldlNpYmxpbmcpLHRoaXMuJCRwcmV2U2libGluZyYmKHRoaXMuJCRwcmV2U2libGluZy4kJG5leHRTaWJsaW5nPXRoaXMuJCRuZXh0U2libGluZyksdGhpcy4kJG5leHRTaWJsaW5nJiYodGhpcy4kJG5leHRTaWJsaW5nLiQkcHJldlNpYmxpbmc9dGhpcy4kJHByZXZTaWJsaW5nKSx0aGlzLiRwYXJlbnQ9dGhpcy4kJG5leHRTaWJsaW5nPXRoaXMuJCRwcmV2U2libGluZz10aGlzLiQkY2hpbGRIZWFkPXRoaXMuJCRjaGlsZFRhaWw9dGhpcy4kcm9vdD1udWxsLHRoaXMuJCRsaXN0ZW5lcnM9e30sdGhpcy4kJHdhdGNoZXJzPXRoaXMuJCRhc3luY1F1ZXVlPXRoaXMuJCRwb3N0RGlnZXN0UXVldWU9W10sdGhpcy4kZGVzdHJveT10aGlzLiRkaWdlc3Q9dGhpcy4kYXBwbHk9RSx0aGlzLiRvbj1cbnRoaXMuJHdhdGNoPWZ1bmN0aW9uKCl7cmV0dXJuIEV9KX19LCRldmFsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGYoYSkodGhpcyxiKX0sJGV2YWxBc3luYzpmdW5jdGlvbihhKXtwLiQkcGhhc2V8fHAuJCRhc3luY1F1ZXVlLmxlbmd0aHx8Zy5kZWZlcihmdW5jdGlvbigpe3AuJCRhc3luY1F1ZXVlLmxlbmd0aCYmcC4kZGlnZXN0KCl9KTt0aGlzLiQkYXN5bmNRdWV1ZS5wdXNoKHtzY29wZTp0aGlzLGV4cHJlc3Npb246YX0pfSwkJHBvc3REaWdlc3Q6ZnVuY3Rpb24oYSl7dGhpcy4kJHBvc3REaWdlc3RRdWV1ZS5wdXNoKGEpfSwkYXBwbHk6ZnVuY3Rpb24oYSl7dHJ5e3JldHVybiBtKFwiJGFwcGx5XCIpLHRoaXMuJGV2YWwoYSl9Y2F0Y2goYil7ZShiKX1maW5hbGx5e3AuJCRwaGFzZT1udWxsO3RyeXtwLiRkaWdlc3QoKX1jYXRjaChjKXt0aHJvdyBlKGMpLGM7fX19LCRvbjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuJCRsaXN0ZW5lcnNbYV07Y3x8KHRoaXMuJCRsaXN0ZW5lcnNbYV09XG5jPVtdKTtjLnB1c2goYik7dmFyIGQ9dGhpcztkbyBkLiQkbGlzdGVuZXJDb3VudFthXXx8KGQuJCRsaXN0ZW5lckNvdW50W2FdPTApLGQuJCRsaXN0ZW5lckNvdW50W2FdKys7d2hpbGUoZD1kLiRwYXJlbnQpO3ZhciBlPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKCl7Y1tSYShjLGIpXT1udWxsO2woZSwxLGEpfX0sJGVtaXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1bXSxkLGY9dGhpcyxnPSExLGs9e25hbWU6YSx0YXJnZXRTY29wZTpmLHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe2c9ITB9LHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7ay5kZWZhdWx0UHJldmVudGVkPSEwfSxkZWZhdWx0UHJldmVudGVkOiExfSxoPVtrXS5jb25jYXQoQmEuY2FsbChhcmd1bWVudHMsMSkpLGwsbTtkb3tkPWYuJCRsaXN0ZW5lcnNbYV18fGM7ay5jdXJyZW50U2NvcGU9ZjtsPTA7Zm9yKG09ZC5sZW5ndGg7bDxtO2wrKylpZihkW2xdKXRyeXtkW2xdLmFwcGx5KG51bGwsaCl9Y2F0Y2gocCl7ZShwKX1lbHNlIGQuc3BsaWNlKGwsXG4xKSxsLS0sbS0tO2lmKGcpYnJlYWs7Zj1mLiRwYXJlbnR9d2hpbGUoZik7cmV0dXJuIGt9LCRicm9hZGNhc3Q6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcyxkPXRoaXMsZj17bmFtZTphLHRhcmdldFNjb3BlOnRoaXMscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXtmLmRlZmF1bHRQcmV2ZW50ZWQ9ITB9LGRlZmF1bHRQcmV2ZW50ZWQ6ITF9LGc9W2ZdLmNvbmNhdChCYS5jYWxsKGFyZ3VtZW50cywxKSksayxoO2M9ZDspe2YuY3VycmVudFNjb3BlPWM7ZD1jLiQkbGlzdGVuZXJzW2FdfHxbXTtrPTA7Zm9yKGg9ZC5sZW5ndGg7azxoO2srKylpZihkW2tdKXRyeXtkW2tdLmFwcGx5KG51bGwsZyl9Y2F0Y2gobCl7ZShsKX1lbHNlIGQuc3BsaWNlKGssMSksay0tLGgtLTtpZighKGQ9Yy4kJGxpc3RlbmVyQ291bnRbYV0mJmMuJCRjaGlsZEhlYWR8fGMhPT10aGlzJiZjLiQkbmV4dFNpYmxpbmcpKWZvcig7YyE9PXRoaXMmJiEoZD1jLiQkbmV4dFNpYmxpbmcpOyljPWMuJHBhcmVudH1yZXR1cm4gZn19O1xudmFyIHA9bmV3IGs7cmV0dXJuIHB9XX1mdW5jdGlvbiBjZCgpe3ZhciBiPS9eXFxzKihodHRwcz98ZnRwfG1haWx0b3x0ZWx8ZmlsZSk6LyxhPS9eXFxzKigoaHR0cHM/fGZ0cHxmaWxlKTp8ZGF0YTppbWFnZVxcLykvO3RoaXMuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIHkoYSk/KGI9YSx0aGlzKTpifTt0aGlzLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdD1mdW5jdGlvbihiKXtyZXR1cm4geShiKT8oYT1iLHRoaXMpOmF9O3RoaXMuJGdldD1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihjLGQpe3ZhciBlPWQ/YTpiLGY7aWYoIVF8fDg8PVEpaWYoZj11YShjKS5ocmVmLFwiXCIhPT1mJiYhZi5tYXRjaChlKSlyZXR1cm5cInVuc2FmZTpcIitmO3JldHVybiBjfX19ZnVuY3Rpb24gQmUoYil7aWYoXCJzZWxmXCI9PT1iKXJldHVybiBiO2lmKHYoYikpe2lmKC0xPGIuaW5kZXhPZihcIioqKlwiKSl0aHJvdyB4YShcIml3Y2FyZFwiLGIpO2I9Yi5yZXBsYWNlKC8oWy0oKVxcW1xcXXt9Kz8qLiRcXF58LDojPCFcXFxcXSkvZyxcblwiXFxcXCQxXCIpLnJlcGxhY2UoL1xceDA4L2csXCJcXFxceDA4XCIpLnJlcGxhY2UoXCJcXFxcKlxcXFwqXCIsXCIuKlwiKS5yZXBsYWNlKFwiXFxcXCpcIixcIlteOi8uPyY7XSpcIik7cmV0dXJuIFJlZ0V4cChcIl5cIitiK1wiJFwiKX1pZihqYihiKSlyZXR1cm4gUmVnRXhwKFwiXlwiK2Iuc291cmNlK1wiJFwiKTt0aHJvdyB4YShcImltYXRjaGVyXCIpO31mdW5jdGlvbiBHYyhiKXt2YXIgYT1bXTt5KGIpJiZyKGIsZnVuY3Rpb24oYil7YS5wdXNoKEJlKGIpKX0pO3JldHVybiBhfWZ1bmN0aW9uIGJlKCl7dGhpcy5TQ0VfQ09OVEVYVFM9Z2E7dmFyIGI9W1wic2VsZlwiXSxhPVtdO3RoaXMucmVzb3VyY2VVcmxXaGl0ZWxpc3Q9ZnVuY3Rpb24oYSl7YXJndW1lbnRzLmxlbmd0aCYmKGI9R2MoYSkpO3JldHVybiBifTt0aGlzLnJlc291cmNlVXJsQmxhY2tsaXN0PWZ1bmN0aW9uKGIpe2FyZ3VtZW50cy5sZW5ndGgmJihhPUdjKGIpKTtyZXR1cm4gYX07dGhpcy4kZ2V0PVtcIiRpbmplY3RvclwiLGZ1bmN0aW9uKGMpe2Z1bmN0aW9uIGQoYSl7dmFyIGI9XG5mdW5jdGlvbihhKXt0aGlzLiQkdW53cmFwVHJ1c3RlZFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIGF9fTthJiYoYi5wcm90b3R5cGU9bmV3IGEpO2IucHJvdG90eXBlLnZhbHVlT2Y9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kJHVud3JhcFRydXN0ZWRWYWx1ZSgpfTtiLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCkudG9TdHJpbmcoKX07cmV0dXJuIGJ9dmFyIGU9ZnVuY3Rpb24oYSl7dGhyb3cgeGEoXCJ1bnNhZmVcIik7fTtjLmhhcyhcIiRzYW5pdGl6ZVwiKSYmKGU9Yy5nZXQoXCIkc2FuaXRpemVcIikpO3ZhciBmPWQoKSxnPXt9O2dbZ2EuSFRNTF09ZChmKTtnW2dhLkNTU109ZChmKTtnW2dhLlVSTF09ZChmKTtnW2dhLkpTXT1kKGYpO2dbZ2EuUkVTT1VSQ0VfVVJMXT1kKGdbZ2EuVVJMXSk7cmV0dXJue3RydXN0QXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1nLmhhc093blByb3BlcnR5KGEpP2dbYV06bnVsbDtpZighYyl0aHJvdyB4YShcImljb250ZXh0XCIsXG5hLGIpO2lmKG51bGw9PT1ifHxiPT09dHx8XCJcIj09PWIpcmV0dXJuIGI7aWYoXCJzdHJpbmdcIiE9PXR5cGVvZiBiKXRocm93IHhhKFwiaXR5cGVcIixhKTtyZXR1cm4gbmV3IGMoYil9LGdldFRydXN0ZWQ6ZnVuY3Rpb24oYyxkKXtpZihudWxsPT09ZHx8ZD09PXR8fFwiXCI9PT1kKXJldHVybiBkO3ZhciBmPWcuaGFzT3duUHJvcGVydHkoYyk/Z1tjXTpudWxsO2lmKGYmJmQgaW5zdGFuY2VvZiBmKXJldHVybiBkLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCk7aWYoYz09PWdhLlJFU09VUkNFX1VSTCl7dmFyIGY9dWEoZC50b1N0cmluZygpKSxsLG4scD0hMTtsPTA7Zm9yKG49Yi5sZW5ndGg7bDxuO2wrKylpZihcInNlbGZcIj09PWJbbF0/UGIoZik6YltsXS5leGVjKGYuaHJlZikpe3A9ITA7YnJlYWt9aWYocClmb3IobD0wLG49YS5sZW5ndGg7bDxuO2wrKylpZihcInNlbGZcIj09PWFbbF0/UGIoZik6YVtsXS5leGVjKGYuaHJlZikpe3A9ITE7YnJlYWt9aWYocClyZXR1cm4gZDt0aHJvdyB4YShcImluc2VjdXJsXCIsXG5kLnRvU3RyaW5nKCkpO31pZihjPT09Z2EuSFRNTClyZXR1cm4gZShkKTt0aHJvdyB4YShcInVuc2FmZVwiKTt9LHZhbHVlT2Y6ZnVuY3Rpb24oYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBmP2EuJCR1bndyYXBUcnVzdGVkVmFsdWUoKTphfX19XX1mdW5jdGlvbiBhZSgpe3ZhciBiPSEwO3RoaXMuZW5hYmxlZD1mdW5jdGlvbihhKXthcmd1bWVudHMubGVuZ3RoJiYoYj0hIWEpO3JldHVybiBifTt0aGlzLiRnZXQ9W1wiJHBhcnNlXCIsXCIkc25pZmZlclwiLFwiJHNjZURlbGVnYXRlXCIsZnVuY3Rpb24oYSxjLGQpe2lmKGImJmMubXNpZSYmOD5jLm1zaWVEb2N1bWVudE1vZGUpdGhyb3cgeGEoXCJpZXF1aXJrc1wiKTt2YXIgZT1oYShnYSk7ZS5pc0VuYWJsZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gYn07ZS50cnVzdEFzPWQudHJ1c3RBcztlLmdldFRydXN0ZWQ9ZC5nZXRUcnVzdGVkO2UudmFsdWVPZj1kLnZhbHVlT2Y7Ynx8KGUudHJ1c3RBcz1lLmdldFRydXN0ZWQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYn0sXG5lLnZhbHVlT2Y9UWEpO2UucGFyc2VBcz1mdW5jdGlvbihiLGMpe3ZhciBkPWEoYyk7cmV0dXJuIGQubGl0ZXJhbCYmZC5jb25zdGFudD9kOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGUuZ2V0VHJ1c3RlZChiLGQoYSxjKSl9fTt2YXIgZj1lLnBhcnNlQXMsZz1lLmdldFRydXN0ZWQsaz1lLnRydXN0QXM7cihnYSxmdW5jdGlvbihhLGIpe3ZhciBjPUsoYik7ZVtaYShcInBhcnNlX2FzX1wiK2MpXT1mdW5jdGlvbihiKXtyZXR1cm4gZihhLGIpfTtlW1phKFwiZ2V0X3RydXN0ZWRfXCIrYyldPWZ1bmN0aW9uKGIpe3JldHVybiBnKGEsYil9O2VbWmEoXCJ0cnVzdF9hc19cIitjKV09ZnVuY3Rpb24oYil7cmV0dXJuIGsoYSxiKX19KTtyZXR1cm4gZX1dfWZ1bmN0aW9uIGNlKCl7dGhpcy4kZ2V0PVtcIiR3aW5kb3dcIixcIiRkb2N1bWVudFwiLGZ1bmN0aW9uKGIsYSl7dmFyIGM9e30sZD1VKCgvYW5kcm9pZCAoXFxkKykvLmV4ZWMoSygoYi5uYXZpZ2F0b3J8fHt9KS51c2VyQWdlbnQpKXx8W10pWzFdKSxlPS9Cb3hlZS9pLnRlc3QoKGIubmF2aWdhdG9yfHxcbnt9KS51c2VyQWdlbnQpLGY9YVswXXx8e30sZz1mLmRvY3VtZW50TW9kZSxrLG09L14oTW96fHdlYmtpdHxPfG1zKSg/PVtBLVpdKS8saD1mLmJvZHkmJmYuYm9keS5zdHlsZSxsPSExLG49ITE7aWYoaCl7Zm9yKHZhciBwIGluIGgpaWYobD1tLmV4ZWMocCkpe2s9bFswXTtrPWsuc3Vic3RyKDAsMSkudG9VcHBlckNhc2UoKStrLnN1YnN0cigxKTticmVha31rfHwoaz1cIldlYmtpdE9wYWNpdHlcImluIGgmJlwid2Via2l0XCIpO2w9ISEoXCJ0cmFuc2l0aW9uXCJpbiBofHxrK1wiVHJhbnNpdGlvblwiaW4gaCk7bj0hIShcImFuaW1hdGlvblwiaW4gaHx8aytcIkFuaW1hdGlvblwiaW4gaCk7IWR8fGwmJm58fChsPXYoZi5ib2R5LnN0eWxlLndlYmtpdFRyYW5zaXRpb24pLG49dihmLmJvZHkuc3R5bGUud2Via2l0QW5pbWF0aW9uKSl9cmV0dXJue2hpc3Rvcnk6ISghYi5oaXN0b3J5fHwhYi5oaXN0b3J5LnB1c2hTdGF0ZXx8ND5kfHxlKSxoYXNoY2hhbmdlOlwib25oYXNoY2hhbmdlXCJpbiBiJiYoIWd8fDc8XG5nKSxoYXNFdmVudDpmdW5jdGlvbihhKXtpZihcImlucHV0XCI9PWEmJjk9PVEpcmV0dXJuITE7aWYoeChjW2FdKSl7dmFyIGI9Zi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2NbYV09XCJvblwiK2EgaW4gYn1yZXR1cm4gY1thXX0sY3NwOlhhKCksdmVuZG9yUHJlZml4OmssdHJhbnNpdGlvbnM6bCxhbmltYXRpb25zOm4sYW5kcm9pZDpkLG1zaWU6USxtc2llRG9jdW1lbnRNb2RlOmd9fV19ZnVuY3Rpb24gZWUoKXt0aGlzLiRnZXQ9W1wiJHJvb3RTY29wZVwiLFwiJGJyb3dzZXJcIixcIiRxXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLGZ1bmN0aW9uKGIsYSxjLGQpe2Z1bmN0aW9uIGUoZSxrLG0pe3ZhciBoPWMuZGVmZXIoKSxsPWgucHJvbWlzZSxuPXkobSkmJiFtO2s9YS5kZWZlcihmdW5jdGlvbigpe3RyeXtoLnJlc29sdmUoZSgpKX1jYXRjaChhKXtoLnJlamVjdChhKSxkKGEpfWZpbmFsbHl7ZGVsZXRlIGZbbC4kJHRpbWVvdXRJZF19bnx8Yi4kYXBwbHkoKX0sayk7bC4kJHRpbWVvdXRJZD1rO2Zba109aDtcbnJldHVybiBsfXZhciBmPXt9O2UuY2FuY2VsPWZ1bmN0aW9uKGIpe3JldHVybiBiJiZiLiQkdGltZW91dElkIGluIGY/KGZbYi4kJHRpbWVvdXRJZF0ucmVqZWN0KFwiY2FuY2VsZWRcIiksZGVsZXRlIGZbYi4kJHRpbWVvdXRJZF0sYS5kZWZlci5jYW5jZWwoYi4kJHRpbWVvdXRJZCkpOiExfTtyZXR1cm4gZX1dfWZ1bmN0aW9uIHVhKGIsYSl7dmFyIGM9YjtRJiYoWS5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsYyksYz1ZLmhyZWYpO1kuc2V0QXR0cmlidXRlKFwiaHJlZlwiLGMpO3JldHVybntocmVmOlkuaHJlZixwcm90b2NvbDpZLnByb3RvY29sP1kucHJvdG9jb2wucmVwbGFjZSgvOiQvLFwiXCIpOlwiXCIsaG9zdDpZLmhvc3Qsc2VhcmNoOlkuc2VhcmNoP1kuc2VhcmNoLnJlcGxhY2UoL15cXD8vLFwiXCIpOlwiXCIsaGFzaDpZLmhhc2g/WS5oYXNoLnJlcGxhY2UoL14jLyxcIlwiKTpcIlwiLGhvc3RuYW1lOlkuaG9zdG5hbWUscG9ydDpZLnBvcnQscGF0aG5hbWU6XCIvXCI9PT1ZLnBhdGhuYW1lLmNoYXJBdCgwKT9ZLnBhdGhuYW1lOlxuXCIvXCIrWS5wYXRobmFtZX19ZnVuY3Rpb24gUGIoYil7Yj12KGIpP3VhKGIpOmI7cmV0dXJuIGIucHJvdG9jb2w9PT1IYy5wcm90b2NvbCYmYi5ob3N0PT09SGMuaG9zdH1mdW5jdGlvbiBmZSgpe3RoaXMuJGdldD1iYShXKX1mdW5jdGlvbiBtYyhiKXtmdW5jdGlvbiBhKGQsZSl7aWYoVChkKSl7dmFyIGY9e307cihkLGZ1bmN0aW9uKGIsYyl7ZltjXT1hKGMsYil9KTtyZXR1cm4gZn1yZXR1cm4gYi5mYWN0b3J5KGQrYyxlKX12YXIgYz1cIkZpbHRlclwiO3RoaXMucmVnaXN0ZXI9YTt0aGlzLiRnZXQ9W1wiJGluamVjdG9yXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBhLmdldChiK2MpfX1dO2EoXCJjdXJyZW5jeVwiLEljKTthKFwiZGF0ZVwiLEpjKTthKFwiZmlsdGVyXCIsQ2UpO2EoXCJqc29uXCIsRGUpO2EoXCJsaW1pdFRvXCIsRWUpO2EoXCJsb3dlcmNhc2VcIixGZSk7YShcIm51bWJlclwiLEtjKTthKFwib3JkZXJCeVwiLExjKTthKFwidXBwZXJjYXNlXCIsR2UpfWZ1bmN0aW9uIENlKCl7cmV0dXJuIGZ1bmN0aW9uKGIsXG5hLGMpe2lmKCFKKGIpKXJldHVybiBiO3ZhciBkPXR5cGVvZiBjLGU9W107ZS5jaGVjaz1mdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPGUubGVuZ3RoO2IrKylpZighZVtiXShhKSlyZXR1cm4hMTtyZXR1cm4hMH07XCJmdW5jdGlvblwiIT09ZCYmKGM9XCJib29sZWFuXCI9PT1kJiZjP2Z1bmN0aW9uKGEsYil7cmV0dXJuIFZhLmVxdWFscyhhLGIpfTpmdW5jdGlvbihhLGIpe2lmKGEmJmImJlwib2JqZWN0XCI9PT10eXBlb2YgYSYmXCJvYmplY3RcIj09PXR5cGVvZiBiKXtmb3IodmFyIGQgaW4gYSlpZihcIiRcIiE9PWQuY2hhckF0KDApJiZrYi5jYWxsKGEsZCkmJmMoYVtkXSxiW2RdKSlyZXR1cm4hMDtyZXR1cm4hMX1iPShcIlwiK2IpLnRvTG93ZXJDYXNlKCk7cmV0dXJuLTE8KFwiXCIrYSkudG9Mb3dlckNhc2UoKS5pbmRleE9mKGIpfSk7dmFyIGY9ZnVuY3Rpb24oYSxiKXtpZihcInN0cmluZ1wiPT10eXBlb2YgYiYmXCIhXCI9PT1iLmNoYXJBdCgwKSlyZXR1cm4hZihhLGIuc3Vic3RyKDEpKTtzd2l0Y2godHlwZW9mIGEpe2Nhc2UgXCJib29sZWFuXCI6Y2FzZSBcIm51bWJlclwiOmNhc2UgXCJzdHJpbmdcIjpyZXR1cm4gYyhhLFxuYik7Y2FzZSBcIm9iamVjdFwiOnN3aXRjaCh0eXBlb2YgYil7Y2FzZSBcIm9iamVjdFwiOnJldHVybiBjKGEsYik7ZGVmYXVsdDpmb3IodmFyIGQgaW4gYSlpZihcIiRcIiE9PWQuY2hhckF0KDApJiZmKGFbZF0sYikpcmV0dXJuITB9cmV0dXJuITE7Y2FzZSBcImFycmF5XCI6Zm9yKGQ9MDtkPGEubGVuZ3RoO2QrKylpZihmKGFbZF0sYikpcmV0dXJuITA7cmV0dXJuITE7ZGVmYXVsdDpyZXR1cm4hMX19O3N3aXRjaCh0eXBlb2YgYSl7Y2FzZSBcImJvb2xlYW5cIjpjYXNlIFwibnVtYmVyXCI6Y2FzZSBcInN0cmluZ1wiOmE9eyQ6YX07Y2FzZSBcIm9iamVjdFwiOmZvcih2YXIgZyBpbiBhKShmdW5jdGlvbihiKXtcInVuZGVmaW5lZFwiIT09dHlwZW9mIGFbYl0mJmUucHVzaChmdW5jdGlvbihjKXtyZXR1cm4gZihcIiRcIj09Yj9jOmMmJmNbYl0sYVtiXSl9KX0pKGcpO2JyZWFrO2Nhc2UgXCJmdW5jdGlvblwiOmUucHVzaChhKTticmVhaztkZWZhdWx0OnJldHVybiBifWQ9W107Zm9yKGc9MDtnPGIubGVuZ3RoO2crKyl7dmFyIGs9XG5iW2ddO2UuY2hlY2soaykmJmQucHVzaChrKX1yZXR1cm4gZH19ZnVuY3Rpb24gSWMoYil7dmFyIGE9Yi5OVU1CRVJfRk9STUFUUztyZXR1cm4gZnVuY3Rpb24oYixkKXt4KGQpJiYoZD1hLkNVUlJFTkNZX1NZTSk7cmV0dXJuIE1jKGIsYS5QQVRURVJOU1sxXSxhLkdST1VQX1NFUCxhLkRFQ0lNQUxfU0VQLDIpLnJlcGxhY2UoL1xcdTAwQTQvZyxkKX19ZnVuY3Rpb24gS2MoYil7dmFyIGE9Yi5OVU1CRVJfRk9STUFUUztyZXR1cm4gZnVuY3Rpb24oYixkKXtyZXR1cm4gTWMoYixhLlBBVFRFUk5TWzBdLGEuR1JPVVBfU0VQLGEuREVDSU1BTF9TRVAsZCl9fWZ1bmN0aW9uIE1jKGIsYSxjLGQsZSl7aWYobnVsbD09Ynx8IWlzRmluaXRlKGIpfHxUKGIpKXJldHVyblwiXCI7dmFyIGY9MD5iO2I9TWF0aC5hYnMoYik7dmFyIGc9YitcIlwiLGs9XCJcIixtPVtdLGg9ITE7aWYoLTEhPT1nLmluZGV4T2YoXCJlXCIpKXt2YXIgbD1nLm1hdGNoKC8oW1xcZFxcLl0rKWUoLT8pKFxcZCspLyk7bCYmXCItXCI9PWxbMl0mJlxubFszXT5lKzE/KGc9XCIwXCIsYj0wKTooaz1nLGg9ITApfWlmKGgpMDxlJiYoLTE8YiYmMT5iKSYmKGs9Yi50b0ZpeGVkKGUpKTtlbHNle2c9KGcuc3BsaXQoTmMpWzFdfHxcIlwiKS5sZW5ndGg7eChlKSYmKGU9TWF0aC5taW4oTWF0aC5tYXgoYS5taW5GcmFjLGcpLGEubWF4RnJhYykpO2I9KyhNYXRoLnJvdW5kKCsoYi50b1N0cmluZygpK1wiZVwiK2UpKS50b1N0cmluZygpK1wiZVwiKy1lKTswPT09YiYmKGY9ITEpO2I9KFwiXCIrYikuc3BsaXQoTmMpO2c9YlswXTtiPWJbMV18fFwiXCI7dmFyIGw9MCxuPWEubGdTaXplLHA9YS5nU2l6ZTtpZihnLmxlbmd0aD49bitwKWZvcihsPWcubGVuZ3RoLW4saD0wO2g8bDtoKyspMD09PShsLWgpJXAmJjAhPT1oJiYoays9Yyksays9Zy5jaGFyQXQoaCk7Zm9yKGg9bDtoPGcubGVuZ3RoO2grKykwPT09KGcubGVuZ3RoLWgpJW4mJjAhPT1oJiYoays9Yyksays9Zy5jaGFyQXQoaCk7Zm9yKDtiLmxlbmd0aDxlOyliKz1cIjBcIjtlJiZcIjBcIiE9PWUmJihrKz1kK2Iuc3Vic3RyKDAsXG5lKSl9bS5wdXNoKGY/YS5uZWdQcmU6YS5wb3NQcmUpO20ucHVzaChrKTttLnB1c2goZj9hLm5lZ1N1ZjphLnBvc1N1Zik7cmV0dXJuIG0uam9pbihcIlwiKX1mdW5jdGlvbiBYYihiLGEsYyl7dmFyIGQ9XCJcIjswPmImJihkPVwiLVwiLGI9LWIpO2ZvcihiPVwiXCIrYjtiLmxlbmd0aDxhOyliPVwiMFwiK2I7YyYmKGI9Yi5zdWJzdHIoYi5sZW5ndGgtYSkpO3JldHVybiBkK2J9ZnVuY3Rpb24gJChiLGEsYyxkKXtjPWN8fDA7cmV0dXJuIGZ1bmN0aW9uKGUpe2U9ZVtcImdldFwiK2JdKCk7aWYoMDxjfHxlPi1jKWUrPWM7MD09PWUmJi0xMj09YyYmKGU9MTIpO3JldHVybiBYYihlLGEsZCl9fWZ1bmN0aW9uIHZiKGIsYSl7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7dmFyIGU9Y1tcImdldFwiK2JdKCksZj1JYShhP1wiU0hPUlRcIitiOmIpO3JldHVybiBkW2ZdW2VdfX1mdW5jdGlvbiBKYyhiKXtmdW5jdGlvbiBhKGEpe3ZhciBiO2lmKGI9YS5tYXRjaChjKSl7YT1uZXcgRGF0ZSgwKTt2YXIgZj0wLGc9MCxrPWJbOF0/XG5hLnNldFVUQ0Z1bGxZZWFyOmEuc2V0RnVsbFllYXIsbT1iWzhdP2Euc2V0VVRDSG91cnM6YS5zZXRIb3VycztiWzldJiYoZj1VKGJbOV0rYlsxMF0pLGc9VShiWzldK2JbMTFdKSk7ay5jYWxsKGEsVShiWzFdKSxVKGJbMl0pLTEsVShiWzNdKSk7Zj1VKGJbNF18fDApLWY7Zz1VKGJbNV18fDApLWc7az1VKGJbNl18fDApO2I9TWF0aC5yb3VuZCgxRTMqcGFyc2VGbG9hdChcIjAuXCIrKGJbN118fDApKSk7bS5jYWxsKGEsZixnLGssYil9cmV0dXJuIGF9dmFyIGM9L14oXFxkezR9KS0/KFxcZFxcZCktPyhcXGRcXGQpKD86VChcXGRcXGQpKD86Oj8oXFxkXFxkKSg/Ojo/KFxcZFxcZCkoPzpcXC4oXFxkKykpPyk/KT8oWnwoWystXSkoXFxkXFxkKTo/KFxcZFxcZCkpPyk/JC87cmV0dXJuIGZ1bmN0aW9uKGMsZSl7dmFyIGY9XCJcIixnPVtdLGssbTtlPWV8fFwibWVkaXVtRGF0ZVwiO2U9Yi5EQVRFVElNRV9GT1JNQVRTW2VdfHxlO3YoYykmJihjPUhlLnRlc3QoYyk/VShjKTphKGMpKTtpYihjKSYmKGM9bmV3IERhdGUoYykpO1xuaWYoIXRhKGMpKXJldHVybiBjO2Zvcig7ZTspKG09SWUuZXhlYyhlKSk/KGc9Zy5jb25jYXQoQmEuY2FsbChtLDEpKSxlPWcucG9wKCkpOihnLnB1c2goZSksZT1udWxsKTtyKGcsZnVuY3Rpb24oYSl7az1KZVthXTtmKz1rP2soYyxiLkRBVEVUSU1FX0ZPUk1BVFMpOmEucmVwbGFjZSgvKF4nfCckKS9nLFwiXCIpLnJlcGxhY2UoLycnL2csXCInXCIpfSk7cmV0dXJuIGZ9fWZ1bmN0aW9uIERlKCl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBuYShiLCEwKX19ZnVuY3Rpb24gRWUoKXtyZXR1cm4gZnVuY3Rpb24oYixhKXtpZighSihiKSYmIXYoYikpcmV0dXJuIGI7YT1JbmZpbml0eT09PU1hdGguYWJzKE51bWJlcihhKSk/TnVtYmVyKGEpOlUoYSk7aWYodihiKSlyZXR1cm4gYT8wPD1hP2Iuc2xpY2UoMCxhKTpiLnNsaWNlKGEsYi5sZW5ndGgpOlwiXCI7dmFyIGM9W10sZCxlO2E+Yi5sZW5ndGg/YT1iLmxlbmd0aDphPC1iLmxlbmd0aCYmKGE9LWIubGVuZ3RoKTswPGE/KGQ9MCxlPWEpOihkPVxuYi5sZW5ndGgrYSxlPWIubGVuZ3RoKTtmb3IoO2Q8ZTtkKyspYy5wdXNoKGJbZF0pO3JldHVybiBjfX1mdW5jdGlvbiBMYyhiKXtyZXR1cm4gZnVuY3Rpb24oYSxjLGQpe2Z1bmN0aW9uIGUoYSxiKXtyZXR1cm4gVWEoYik/ZnVuY3Rpb24oYixjKXtyZXR1cm4gYShjLGIpfTphfWZ1bmN0aW9uIGYoYSxiKXt2YXIgYz10eXBlb2YgYSxkPXR5cGVvZiBiO3JldHVybiBjPT1kPyh0YShhKSYmdGEoYikmJihhPWEudmFsdWVPZigpLGI9Yi52YWx1ZU9mKCkpLFwic3RyaW5nXCI9PWMmJihhPWEudG9Mb3dlckNhc2UoKSxiPWIudG9Mb3dlckNhc2UoKSksYT09PWI/MDphPGI/LTE6MSk6YzxkPy0xOjF9aWYoIVBhKGEpfHwhYylyZXR1cm4gYTtjPUooYyk/YzpbY107Yz1WYyhjLGZ1bmN0aW9uKGEpe3ZhciBjPSExLGQ9YXx8UWE7aWYodihhKSl7aWYoXCIrXCI9PWEuY2hhckF0KDApfHxcIi1cIj09YS5jaGFyQXQoMCkpYz1cIi1cIj09YS5jaGFyQXQoMCksYT1hLnN1YnN0cmluZygxKTtkPWIoYSk7aWYoZC5jb25zdGFudCl7dmFyIGc9XG5kKCk7cmV0dXJuIGUoZnVuY3Rpb24oYSxiKXtyZXR1cm4gZihhW2ddLGJbZ10pfSxjKX19cmV0dXJuIGUoZnVuY3Rpb24oYSxiKXtyZXR1cm4gZihkKGEpLGQoYikpfSxjKX0pO2Zvcih2YXIgZz1bXSxrPTA7azxhLmxlbmd0aDtrKyspZy5wdXNoKGFba10pO3JldHVybiBnLnNvcnQoZShmdW5jdGlvbihhLGIpe2Zvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1jW2RdKGEsYik7aWYoMCE9PWUpcmV0dXJuIGV9cmV0dXJuIDB9LGQpKX19ZnVuY3Rpb24geWEoYil7UChiKSYmKGI9e2xpbms6Yn0pO2IucmVzdHJpY3Q9Yi5yZXN0cmljdHx8XCJBQ1wiO3JldHVybiBiYShiKX1mdW5jdGlvbiBPYyhiLGEsYyxkKXtmdW5jdGlvbiBlKGEsYyl7Yz1jP1wiLVwiK21iKGMsXCItXCIpOlwiXCI7ZC5zZXRDbGFzcyhiLChhP3diOnhiKStjLChhP3hiOndiKStjKX12YXIgZj10aGlzLGc9Yi5wYXJlbnQoKS5jb250cm9sbGVyKFwiZm9ybVwiKXx8eWIsaz0wLG09Zi4kZXJyb3I9e30saD1bXTtmLiRuYW1lPVxuYS5uYW1lfHxhLm5nRm9ybTtmLiRkaXJ0eT0hMTtmLiRwcmlzdGluZT0hMDtmLiR2YWxpZD0hMDtmLiRpbnZhbGlkPSExO2cuJGFkZENvbnRyb2woZik7Yi5hZGRDbGFzcyhPYSk7ZSghMCk7Zi4kYWRkQ29udHJvbD1mdW5jdGlvbihhKXtEYShhLiRuYW1lLFwiaW5wdXRcIik7aC5wdXNoKGEpO2EuJG5hbWUmJihmW2EuJG5hbWVdPWEpfTtmLiRyZW1vdmVDb250cm9sPWZ1bmN0aW9uKGEpe2EuJG5hbWUmJmZbYS4kbmFtZV09PT1hJiZkZWxldGUgZlthLiRuYW1lXTtyKG0sZnVuY3Rpb24oYixjKXtmLiRzZXRWYWxpZGl0eShjLCEwLGEpfSk7U2EoaCxhKX07Zi4kc2V0VmFsaWRpdHk9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPW1bYV07aWYoYilkJiYoU2EoZCxjKSxkLmxlbmd0aHx8KGstLSxrfHwoZShiKSxmLiR2YWxpZD0hMCxmLiRpbnZhbGlkPSExKSxtW2FdPSExLGUoITAsYSksZy4kc2V0VmFsaWRpdHkoYSwhMCxmKSkpO2Vsc2V7a3x8ZShiKTtpZihkKXtpZigtMSE9UmEoZCxjKSlyZXR1cm59ZWxzZSBtW2FdPVxuZD1bXSxrKyssZSghMSxhKSxnLiRzZXRWYWxpZGl0eShhLCExLGYpO2QucHVzaChjKTtmLiR2YWxpZD0hMTtmLiRpbnZhbGlkPSEwfX07Zi4kc2V0RGlydHk9ZnVuY3Rpb24oKXtkLnJlbW92ZUNsYXNzKGIsT2EpO2QuYWRkQ2xhc3MoYix6Yik7Zi4kZGlydHk9ITA7Zi4kcHJpc3RpbmU9ITE7Zy4kc2V0RGlydHkoKX07Zi4kc2V0UHJpc3RpbmU9ZnVuY3Rpb24oKXtkLnJlbW92ZUNsYXNzKGIsemIpO2QuYWRkQ2xhc3MoYixPYSk7Zi4kZGlydHk9ITE7Zi4kcHJpc3RpbmU9ITA7cihoLGZ1bmN0aW9uKGEpe2EuJHNldFByaXN0aW5lKCl9KX19ZnVuY3Rpb24gc2EoYixhLGMsZCl7Yi4kc2V0VmFsaWRpdHkoYSxjKTtyZXR1cm4gYz9kOnR9ZnVuY3Rpb24gUGMoYixhKXt2YXIgYyxkO2lmKGEpZm9yKGM9MDtjPGEubGVuZ3RoOysrYylpZihkPWFbY10sYltkXSlyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBLZShiLGEsYyxkLGUpe1QoZSkmJihiLiQkaGFzTmF0aXZlVmFsaWRhdG9ycz0hMCxcbmIuJHBhcnNlcnMucHVzaChmdW5jdGlvbihmKXtpZihiLiRlcnJvclthXXx8UGMoZSxkKXx8IVBjKGUsYykpcmV0dXJuIGY7Yi4kc2V0VmFsaWRpdHkoYSwhMSl9KSl9ZnVuY3Rpb24gQWIoYixhLGMsZCxlLGYpe3ZhciBnPWEucHJvcChMZSksaz1hWzBdLnBsYWNlaG9sZGVyLG09e30saD1LKGFbMF0udHlwZSk7ZC4kJHZhbGlkaXR5U3RhdGU9ZztpZighZS5hbmRyb2lkKXt2YXIgbD0hMTthLm9uKFwiY29tcG9zaXRpb25zdGFydFwiLGZ1bmN0aW9uKGEpe2w9ITB9KTthLm9uKFwiY29tcG9zaXRpb25lbmRcIixmdW5jdGlvbigpe2w9ITE7bigpfSl9dmFyIG49ZnVuY3Rpb24oZSl7aWYoIWwpe3ZhciBmPWEudmFsKCk7aWYoUSYmXCJpbnB1dFwiPT09KGV8fG0pLnR5cGUmJmFbMF0ucGxhY2Vob2xkZXIhPT1rKWs9YVswXS5wbGFjZWhvbGRlcjtlbHNlIGlmKFwicGFzc3dvcmRcIiE9PWgmJlVhKGMubmdUcmltfHxcIlRcIikmJihmPWFhKGYpKSxlPWcmJmQuJCRoYXNOYXRpdmVWYWxpZGF0b3JzLGQuJHZpZXdWYWx1ZSE9PVxuZnx8XCJcIj09PWYmJmUpYi4kcm9vdC4kJHBoYXNlP2QuJHNldFZpZXdWYWx1ZShmKTpiLiRhcHBseShmdW5jdGlvbigpe2QuJHNldFZpZXdWYWx1ZShmKX0pfX07aWYoZS5oYXNFdmVudChcImlucHV0XCIpKWEub24oXCJpbnB1dFwiLG4pO2Vsc2V7dmFyIHAscT1mdW5jdGlvbigpe3B8fChwPWYuZGVmZXIoZnVuY3Rpb24oKXtuKCk7cD1udWxsfSkpfTthLm9uKFwia2V5ZG93blwiLGZ1bmN0aW9uKGEpe2E9YS5rZXlDb2RlOzkxPT09YXx8KDE1PGEmJjE5PmF8fDM3PD1hJiY0MD49YSl8fHEoKX0pO2lmKGUuaGFzRXZlbnQoXCJwYXN0ZVwiKSlhLm9uKFwicGFzdGUgY3V0XCIscSl9YS5vbihcImNoYW5nZVwiLG4pO2QuJHJlbmRlcj1mdW5jdGlvbigpe2EudmFsKGQuJGlzRW1wdHkoZC4kdmlld1ZhbHVlKT9cIlwiOmQuJHZpZXdWYWx1ZSl9O3ZhciBzPWMubmdQYXR0ZXJuO3MmJigoZT1zLm1hdGNoKC9eXFwvKC4qKVxcLyhbZ2ltXSopJC8pKT8ocz1SZWdFeHAoZVsxXSxlWzJdKSxlPWZ1bmN0aW9uKGEpe3JldHVybiBzYShkLFxuXCJwYXR0ZXJuXCIsZC4kaXNFbXB0eShhKXx8cy50ZXN0KGEpLGEpfSk6ZT1mdW5jdGlvbihjKXt2YXIgZT1iLiRldmFsKHMpO2lmKCFlfHwhZS50ZXN0KXRocm93IEMoXCJuZ1BhdHRlcm5cIikoXCJub3JlZ2V4cFwiLHMsZSxpYShhKSk7cmV0dXJuIHNhKGQsXCJwYXR0ZXJuXCIsZC4kaXNFbXB0eShjKXx8ZS50ZXN0KGMpLGMpfSxkLiRmb3JtYXR0ZXJzLnB1c2goZSksZC4kcGFyc2Vycy5wdXNoKGUpKTtpZihjLm5nTWlubGVuZ3RoKXt2YXIgcj1VKGMubmdNaW5sZW5ndGgpO2U9ZnVuY3Rpb24oYSl7cmV0dXJuIHNhKGQsXCJtaW5sZW5ndGhcIixkLiRpc0VtcHR5KGEpfHxhLmxlbmd0aD49cixhKX07ZC4kcGFyc2Vycy5wdXNoKGUpO2QuJGZvcm1hdHRlcnMucHVzaChlKX1pZihjLm5nTWF4bGVuZ3RoKXt2YXIgdT1VKGMubmdNYXhsZW5ndGgpO2U9ZnVuY3Rpb24oYSl7cmV0dXJuIHNhKGQsXCJtYXhsZW5ndGhcIixkLiRpc0VtcHR5KGEpfHxhLmxlbmd0aDw9dSxhKX07ZC4kcGFyc2Vycy5wdXNoKGUpO1xuZC4kZm9ybWF0dGVycy5wdXNoKGUpfX1mdW5jdGlvbiBZYihiLGEpe2I9XCJuZ0NsYXNzXCIrYjtyZXR1cm5bXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGMpe2Z1bmN0aW9uIGQoYSxiKXt2YXIgYz1bXSxkPTA7YTpmb3IoO2Q8YS5sZW5ndGg7ZCsrKXtmb3IodmFyIGU9YVtkXSxsPTA7bDxiLmxlbmd0aDtsKyspaWYoZT09YltsXSljb250aW51ZSBhO2MucHVzaChlKX1yZXR1cm4gY31mdW5jdGlvbiBlKGEpe2lmKCFKKGEpKXtpZih2KGEpKXJldHVybiBhLnNwbGl0KFwiIFwiKTtpZihUKGEpKXt2YXIgYj1bXTtyKGEsZnVuY3Rpb24oYSxjKXthJiYoYj1iLmNvbmNhdChjLnNwbGl0KFwiIFwiKSkpfSk7cmV0dXJuIGJ9fXJldHVybiBhfXJldHVybntyZXN0cmljdDpcIkFDXCIsbGluazpmdW5jdGlvbihmLGcsayl7ZnVuY3Rpb24gbShhLGIpe3ZhciBjPWcuZGF0YShcIiRjbGFzc0NvdW50c1wiKXx8e30sZD1bXTtyKGEsZnVuY3Rpb24oYSl7aWYoMDxifHxjW2FdKWNbYV09KGNbYV18fDApK2IsY1thXT09PSsoMDxcbmIpJiZkLnB1c2goYSl9KTtnLmRhdGEoXCIkY2xhc3NDb3VudHNcIixjKTtyZXR1cm4gZC5qb2luKFwiIFwiKX1mdW5jdGlvbiBoKGIpe2lmKCEwPT09YXx8Zi4kaW5kZXglMj09PWEpe3ZhciBoPWUoYnx8W10pO2lmKCFsKXt2YXIgcT1tKGgsMSk7ay4kYWRkQ2xhc3MocSl9ZWxzZSBpZighQWEoYixsKSl7dmFyIHM9ZShsKSxxPWQoaCxzKSxoPWQocyxoKSxoPW0oaCwtMSkscT1tKHEsMSk7MD09PXEubGVuZ3RoP2MucmVtb3ZlQ2xhc3MoZyxoKTowPT09aC5sZW5ndGg/Yy5hZGRDbGFzcyhnLHEpOmMuc2V0Q2xhc3MoZyxxLGgpfX1sPWhhKGIpfXZhciBsO2YuJHdhdGNoKGtbYl0saCwhMCk7ay4kb2JzZXJ2ZShcImNsYXNzXCIsZnVuY3Rpb24oYSl7aChmLiRldmFsKGtbYl0pKX0pO1wibmdDbGFzc1wiIT09YiYmZi4kd2F0Y2goXCIkaW5kZXhcIixmdW5jdGlvbihjLGQpe3ZhciBnPWMmMTtpZihnIT09KGQmMSkpe3ZhciBoPWUoZi4kZXZhbChrW2JdKSk7Zz09PWE/KGc9bShoLDEpLGsuJGFkZENsYXNzKGcpKTpcbihnPW0oaCwtMSksay4kcmVtb3ZlQ2xhc3MoZykpfX0pfX19XX12YXIgTGU9XCJ2YWxpZGl0eVwiLEs9ZnVuY3Rpb24oYil7cmV0dXJuIHYoYik/Yi50b0xvd2VyQ2FzZSgpOmJ9LGtiPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksSWE9ZnVuY3Rpb24oYil7cmV0dXJuIHYoYik/Yi50b1VwcGVyQ2FzZSgpOmJ9LFEsdyxFYSxCYT1bXS5zbGljZSxNZT1bXS5wdXNoLHphPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsVGE9QyhcIm5nXCIpLFZhPVcuYW5ndWxhcnx8KFcuYW5ndWxhcj17fSksWWEsTWEsbWE9W1wiMFwiLFwiMFwiLFwiMFwiXTtRPVUoKC9tc2llIChcXGQrKS8uZXhlYyhLKG5hdmlnYXRvci51c2VyQWdlbnQpKXx8W10pWzFdKTtpc05hTihRKSYmKFE9VSgoL3RyaWRlbnRcXC8uKjsgcnY6KFxcZCspLy5leGVjKEsobmF2aWdhdG9yLnVzZXJBZ2VudCkpfHxbXSlbMV0pKTtFLiRpbmplY3Q9W107UWEuJGluamVjdD1bXTt2YXIgSj1mdW5jdGlvbigpe3JldHVybiBQKEFycmF5LmlzQXJyYXkpP1xuQXJyYXkuaXNBcnJheTpmdW5jdGlvbihiKXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PT16YS5jYWxsKGIpfX0oKSxhYT1mdW5jdGlvbigpe3JldHVybiBTdHJpbmcucHJvdG90eXBlLnRyaW0/ZnVuY3Rpb24oYil7cmV0dXJuIHYoYik/Yi50cmltKCk6Yn06ZnVuY3Rpb24oYil7cmV0dXJuIHYoYik/Yi5yZXBsYWNlKC9eXFxzXFxzKi8sXCJcIikucmVwbGFjZSgvXFxzXFxzKiQvLFwiXCIpOmJ9fSgpO01hPTk+UT9mdW5jdGlvbihiKXtiPWIubm9kZU5hbWU/YjpiWzBdO3JldHVybiBiLnNjb3BlTmFtZSYmXCJIVE1MXCIhPWIuc2NvcGVOYW1lP0lhKGIuc2NvcGVOYW1lK1wiOlwiK2Iubm9kZU5hbWUpOmIubm9kZU5hbWV9OmZ1bmN0aW9uKGIpe3JldHVybiBiLm5vZGVOYW1lP2Iubm9kZU5hbWU6YlswXS5ub2RlTmFtZX07dmFyIFhhPWZ1bmN0aW9uKCl7aWYoeShYYS5pc0FjdGl2ZV8pKXJldHVybiBYYS5pc0FjdGl2ZV87dmFyIGI9ISghWC5xdWVyeVNlbGVjdG9yKFwiW25nLWNzcF1cIikmJiFYLnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1uZy1jc3BdXCIpKTtcbmlmKCFiKXRyeXtuZXcgRnVuY3Rpb24oXCJcIil9Y2F0Y2goYSl7Yj0hMH1yZXR1cm4gWGEuaXNBY3RpdmVfPWJ9LFljPS9bQS1aXS9nLGFkPXtmdWxsOlwiMS4yLjI2XCIsbWFqb3I6MSxtaW5vcjoyLGRvdDoyNixjb2RlTmFtZTpcImNhcHRpdmF0aW5nLWRpc2ludGVyZXN0XCJ9O1MuZXhwYW5kbz1cIm5nMzM5XCI7dmFyIGFiPVMuY2FjaGU9e30sbmU9MSxzYj1XLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXI/ZnVuY3Rpb24oYixhLGMpe2IuYWRkRXZlbnRMaXN0ZW5lcihhLGMsITEpfTpmdW5jdGlvbihiLGEsYyl7Yi5hdHRhY2hFdmVudChcIm9uXCIrYSxjKX0sJGE9Vy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyP2Z1bmN0aW9uKGIsYSxjKXtiLnJlbW92ZUV2ZW50TGlzdGVuZXIoYSxjLCExKX06ZnVuY3Rpb24oYixhLGMpe2IuZGV0YWNoRXZlbnQoXCJvblwiK2EsYyl9O1MuX2RhdGE9ZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMuY2FjaGVbYlt0aGlzLmV4cGFuZG9dXXx8e319O3ZhciBpZT0vKFtcXDpcXC1cXF9dKyguKSkvZyxcbmplPS9ebW96KFtBLVpdKS8sSGI9QyhcImpxTGl0ZVwiKSxrZT0vXjwoXFx3KylcXHMqXFwvPz4oPzo8XFwvXFwxPnwpJC8sSWI9Lzx8JiM/XFx3KzsvLGxlPS88KFtcXHc6XSspLyxtZT0vPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXFx3Ol0rKVtePl0qKVxcLz4vZ2ksZWE9e29wdGlvbjpbMSwnPHNlbGVjdCBtdWx0aXBsZT1cIm11bHRpcGxlXCI+JyxcIjwvc2VsZWN0PlwiXSx0aGVhZDpbMSxcIjx0YWJsZT5cIixcIjwvdGFibGU+XCJdLGNvbDpbMixcIjx0YWJsZT48Y29sZ3JvdXA+XCIsXCI8L2NvbGdyb3VwPjwvdGFibGU+XCJdLHRyOlsyLFwiPHRhYmxlPjx0Ym9keT5cIixcIjwvdGJvZHk+PC90YWJsZT5cIl0sdGQ6WzMsXCI8dGFibGU+PHRib2R5Pjx0cj5cIixcIjwvdHI+PC90Ym9keT48L3RhYmxlPlwiXSxfZGVmYXVsdDpbMCxcIlwiLFwiXCJdfTtlYS5vcHRncm91cD1lYS5vcHRpb247ZWEudGJvZHk9ZWEudGZvb3Q9ZWEuY29sZ3JvdXA9ZWEuY2FwdGlvbj1lYS50aGVhZDtlYS50aD1cbmVhLnRkO3ZhciBMYT1TLnByb3RvdHlwZT17cmVhZHk6ZnVuY3Rpb24oYil7ZnVuY3Rpb24gYSgpe2N8fChjPSEwLGIoKSl9dmFyIGM9ITE7XCJjb21wbGV0ZVwiPT09WC5yZWFkeVN0YXRlP3NldFRpbWVvdXQoYSk6KHRoaXMub24oXCJET01Db250ZW50TG9hZGVkXCIsYSksUyhXKS5vbihcImxvYWRcIixhKSl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIGI9W107cih0aGlzLGZ1bmN0aW9uKGEpe2IucHVzaChcIlwiK2EpfSk7cmV0dXJuXCJbXCIrYi5qb2luKFwiLCBcIikrXCJdXCJ9LGVxOmZ1bmN0aW9uKGIpe3JldHVybiAwPD1iP3codGhpc1tiXSk6dyh0aGlzW3RoaXMubGVuZ3RoK2JdKX0sbGVuZ3RoOjAscHVzaDpNZSxzb3J0OltdLnNvcnQsc3BsaWNlOltdLnNwbGljZX0scWI9e307cihcIm11bHRpcGxlIHNlbGVjdGVkIGNoZWNrZWQgZGlzYWJsZWQgcmVhZE9ubHkgcmVxdWlyZWQgb3BlblwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihiKXtxYltLKGIpXT1ifSk7dmFyIHJjPXt9O3IoXCJpbnB1dCBzZWxlY3Qgb3B0aW9uIHRleHRhcmVhIGJ1dHRvbiBmb3JtIGRldGFpbHNcIi5zcGxpdChcIiBcIiksXG5mdW5jdGlvbihiKXtyY1tJYShiKV09ITB9KTtyKHtkYXRhOk1iLHJlbW92ZURhdGE6TGJ9LGZ1bmN0aW9uKGIsYSl7U1thXT1ifSk7cih7ZGF0YTpNYixpbmhlcml0ZWREYXRhOnBiLHNjb3BlOmZ1bmN0aW9uKGIpe3JldHVybiB3LmRhdGEoYixcIiRzY29wZVwiKXx8cGIoYi5wYXJlbnROb2RlfHxiLFtcIiRpc29sYXRlU2NvcGVcIixcIiRzY29wZVwiXSl9LGlzb2xhdGVTY29wZTpmdW5jdGlvbihiKXtyZXR1cm4gdy5kYXRhKGIsXCIkaXNvbGF0ZVNjb3BlXCIpfHx3LmRhdGEoYixcIiRpc29sYXRlU2NvcGVOb1RlbXBsYXRlXCIpfSxjb250cm9sbGVyOm9jLGluamVjdG9yOmZ1bmN0aW9uKGIpe3JldHVybiBwYihiLFwiJGluamVjdG9yXCIpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGIsYSl7Yi5yZW1vdmVBdHRyaWJ1dGUoYSl9LGhhc0NsYXNzOk5iLGNzczpmdW5jdGlvbihiLGEsYyl7YT1aYShhKTtpZih5KGMpKWIuc3R5bGVbYV09YztlbHNle3ZhciBkOzg+PVEmJihkPWIuY3VycmVudFN0eWxlJiZiLmN1cnJlbnRTdHlsZVthXSxcblwiXCI9PT1kJiYoZD1cImF1dG9cIikpO2Q9ZHx8Yi5zdHlsZVthXTs4Pj1RJiYoZD1cIlwiPT09ZD90OmQpO3JldHVybiBkfX0sYXR0cjpmdW5jdGlvbihiLGEsYyl7dmFyIGQ9SyhhKTtpZihxYltkXSlpZih5KGMpKWM/KGJbYV09ITAsYi5zZXRBdHRyaWJ1dGUoYSxkKSk6KGJbYV09ITEsYi5yZW1vdmVBdHRyaWJ1dGUoZCkpO2Vsc2UgcmV0dXJuIGJbYV18fChiLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKGEpfHxFKS5zcGVjaWZpZWQ/ZDp0O2Vsc2UgaWYoeShjKSliLnNldEF0dHJpYnV0ZShhLGMpO2Vsc2UgaWYoYi5nZXRBdHRyaWJ1dGUpcmV0dXJuIGI9Yi5nZXRBdHRyaWJ1dGUoYSwyKSxudWxsPT09Yj90OmJ9LHByb3A6ZnVuY3Rpb24oYixhLGMpe2lmKHkoYykpYlthXT1jO2Vsc2UgcmV0dXJuIGJbYV19LHRleHQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBiKGIsZCl7dmFyIGU9YVtiLm5vZGVUeXBlXTtpZih4KGQpKXJldHVybiBlP2JbZV06XCJcIjtiW2VdPWR9dmFyIGE9W107OT5RPyhhWzFdPVxuXCJpbm5lclRleHRcIixhWzNdPVwibm9kZVZhbHVlXCIpOmFbMV09YVszXT1cInRleHRDb250ZW50XCI7Yi4kZHY9XCJcIjtyZXR1cm4gYn0oKSx2YWw6ZnVuY3Rpb24oYixhKXtpZih4KGEpKXtpZihcIlNFTEVDVFwiPT09TWEoYikmJmIubXVsdGlwbGUpe3ZhciBjPVtdO3IoYi5vcHRpb25zLGZ1bmN0aW9uKGEpe2Euc2VsZWN0ZWQmJmMucHVzaChhLnZhbHVlfHxhLnRleHQpfSk7cmV0dXJuIDA9PT1jLmxlbmd0aD9udWxsOmN9cmV0dXJuIGIudmFsdWV9Yi52YWx1ZT1hfSxodG1sOmZ1bmN0aW9uKGIsYSl7aWYoeChhKSlyZXR1cm4gYi5pbm5lckhUTUw7Zm9yKHZhciBjPTAsZD1iLmNoaWxkTm9kZXM7YzxkLmxlbmd0aDtjKyspSmEoZFtjXSk7Yi5pbm5lckhUTUw9YX0sZW1wdHk6cGN9LGZ1bmN0aW9uKGIsYSl7Uy5wcm90b3R5cGVbYV09ZnVuY3Rpb24oYSxkKXt2YXIgZSxmLGc9dGhpcy5sZW5ndGg7aWYoYiE9PXBjJiYoMj09Yi5sZW5ndGgmJmIhPT1OYiYmYiE9PW9jP2E6ZCk9PT10KXtpZihUKGEpKXtmb3IoZT1cbjA7ZTxnO2UrKylpZihiPT09TWIpYih0aGlzW2VdLGEpO2Vsc2UgZm9yKGYgaW4gYSliKHRoaXNbZV0sZixhW2ZdKTtyZXR1cm4gdGhpc31lPWIuJGR2O2c9ZT09PXQ/TWF0aC5taW4oZywxKTpnO2ZvcihmPTA7ZjxnO2YrKyl7dmFyIGs9Yih0aGlzW2ZdLGEsZCk7ZT1lP2UrazprfXJldHVybiBlfWZvcihlPTA7ZTxnO2UrKyliKHRoaXNbZV0sYSxkKTtyZXR1cm4gdGhpc319KTtyKHtyZW1vdmVEYXRhOkxiLGRlYWxvYzpKYSxvbjpmdW5jdGlvbiBhKGMsZCxlLGYpe2lmKHkoZikpdGhyb3cgSGIoXCJvbmFyZ3NcIik7dmFyIGc9b2EoYyxcImV2ZW50c1wiKSxrPW9hKGMsXCJoYW5kbGVcIik7Z3x8b2EoYyxcImV2ZW50c1wiLGc9e30pO2t8fG9hKGMsXCJoYW5kbGVcIixrPW9lKGMsZykpO3IoZC5zcGxpdChcIiBcIiksZnVuY3Rpb24oZCl7dmFyIGY9Z1tkXTtpZighZil7aWYoXCJtb3VzZWVudGVyXCI9PWR8fFwibW91c2VsZWF2ZVwiPT1kKXt2YXIgbD1YLmJvZHkuY29udGFpbnN8fFguYm9keS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj9cbmZ1bmN0aW9uKGEsYyl7dmFyIGQ9OT09PWEubm9kZVR5cGU/YS5kb2N1bWVudEVsZW1lbnQ6YSxlPWMmJmMucGFyZW50Tm9kZTtyZXR1cm4gYT09PWV8fCEhKGUmJjE9PT1lLm5vZGVUeXBlJiYoZC5jb250YWlucz9kLmNvbnRhaW5zKGUpOmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZSkmMTYpKX06ZnVuY3Rpb24oYSxjKXtpZihjKWZvcig7Yz1jLnBhcmVudE5vZGU7KWlmKGM9PT1hKXJldHVybiEwO3JldHVybiExfTtnW2RdPVtdO2EoYyx7bW91c2VsZWF2ZTpcIm1vdXNlb3V0XCIsbW91c2VlbnRlcjpcIm1vdXNlb3ZlclwifVtkXSxmdW5jdGlvbihhKXt2YXIgYz1hLnJlbGF0ZWRUYXJnZXQ7YyYmKGM9PT10aGlzfHxsKHRoaXMsYykpfHxrKGEsZCl9KX1lbHNlIHNiKGMsZCxrKSxnW2RdPVtdO2Y9Z1tkXX1mLnB1c2goZSl9KX0sb2ZmOm5jLG9uZTpmdW5jdGlvbihhLGMsZCl7YT13KGEpO2Eub24oYyxmdW5jdGlvbiBmKCl7YS5vZmYoYyxcbmQpO2Eub2ZmKGMsZil9KTthLm9uKGMsZCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKGEsYyl7dmFyIGQsZT1hLnBhcmVudE5vZGU7SmEoYSk7cihuZXcgUyhjKSxmdW5jdGlvbihjKXtkP2UuaW5zZXJ0QmVmb3JlKGMsZC5uZXh0U2libGluZyk6ZS5yZXBsYWNlQ2hpbGQoYyxhKTtkPWN9KX0sY2hpbGRyZW46ZnVuY3Rpb24oYSl7dmFyIGM9W107cihhLmNoaWxkTm9kZXMsZnVuY3Rpb24oYSl7MT09PWEubm9kZVR5cGUmJmMucHVzaChhKX0pO3JldHVybiBjfSxjb250ZW50czpmdW5jdGlvbihhKXtyZXR1cm4gYS5jb250ZW50RG9jdW1lbnR8fGEuY2hpbGROb2Rlc3x8W119LGFwcGVuZDpmdW5jdGlvbihhLGMpe3IobmV3IFMoYyksZnVuY3Rpb24oYyl7MSE9PWEubm9kZVR5cGUmJjExIT09YS5ub2RlVHlwZXx8YS5hcHBlbmRDaGlsZChjKX0pfSxwcmVwZW5kOmZ1bmN0aW9uKGEsYyl7aWYoMT09PWEubm9kZVR5cGUpe3ZhciBkPWEuZmlyc3RDaGlsZDtyKG5ldyBTKGMpLGZ1bmN0aW9uKGMpe2EuaW5zZXJ0QmVmb3JlKGMsXG5kKX0pfX0sd3JhcDpmdW5jdGlvbihhLGMpe2M9dyhjKVswXTt2YXIgZD1hLnBhcmVudE5vZGU7ZCYmZC5yZXBsYWNlQ2hpbGQoYyxhKTtjLmFwcGVuZENoaWxkKGEpfSxyZW1vdmU6ZnVuY3Rpb24oYSl7SmEoYSk7dmFyIGM9YS5wYXJlbnROb2RlO2MmJmMucmVtb3ZlQ2hpbGQoYSl9LGFmdGVyOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9YSxlPWEucGFyZW50Tm9kZTtyKG5ldyBTKGMpLGZ1bmN0aW9uKGEpe2UuaW5zZXJ0QmVmb3JlKGEsZC5uZXh0U2libGluZyk7ZD1hfSl9LGFkZENsYXNzOm9iLHJlbW92ZUNsYXNzOm5iLHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGEsYyxkKXtjJiZyKGMuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGMpe3ZhciBmPWQ7eChmKSYmKGY9IU5iKGEsYykpOyhmP29iOm5iKShhLGMpfSl9LHBhcmVudDpmdW5jdGlvbihhKXtyZXR1cm4oYT1hLnBhcmVudE5vZGUpJiYxMSE9PWEubm9kZVR5cGU/YTpudWxsfSxuZXh0OmZ1bmN0aW9uKGEpe2lmKGEubmV4dEVsZW1lbnRTaWJsaW5nKXJldHVybiBhLm5leHRFbGVtZW50U2libGluZztcbmZvcihhPWEubmV4dFNpYmxpbmc7bnVsbCE9YSYmMSE9PWEubm9kZVR5cGU7KWE9YS5uZXh0U2libGluZztyZXR1cm4gYX0sZmluZDpmdW5jdGlvbihhLGMpe3JldHVybiBhLmdldEVsZW1lbnRzQnlUYWdOYW1lP2EuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYyk6W119LGNsb25lOktiLHRyaWdnZXJIYW5kbGVyOmZ1bmN0aW9uKGEsYyxkKXt2YXIgZSxmO2U9Yy50eXBlfHxjO3ZhciBnPShvYShhLFwiZXZlbnRzXCIpfHx7fSlbZV07ZyYmKGU9e3ByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dGhpcy5kZWZhdWx0UHJldmVudGVkPSEwfSxpc0RlZmF1bHRQcmV2ZW50ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hMD09PXRoaXMuZGVmYXVsdFByZXZlbnRlZH0sc3RvcFByb3BhZ2F0aW9uOkUsdHlwZTplLHRhcmdldDphfSxjLnR5cGUmJihlPUQoZSxjKSksYz1oYShnKSxmPWQ/W2VdLmNvbmNhdChkKTpbZV0scihjLGZ1bmN0aW9uKGMpe2MuYXBwbHkoYSxmKX0pKX19LGZ1bmN0aW9uKGEsYyl7Uy5wcm90b3R5cGVbY109XG5mdW5jdGlvbihjLGUsZil7Zm9yKHZhciBnLGs9MDtrPHRoaXMubGVuZ3RoO2srKyl4KGcpPyhnPWEodGhpc1trXSxjLGUsZikseShnKSYmKGc9dyhnKSkpOkpiKGcsYSh0aGlzW2tdLGMsZSxmKSk7cmV0dXJuIHkoZyk/Zzp0aGlzfTtTLnByb3RvdHlwZS5iaW5kPVMucHJvdG90eXBlLm9uO1MucHJvdG90eXBlLnVuYmluZD1TLnByb3RvdHlwZS5vZmZ9KTtiYi5wcm90b3R5cGU9e3B1dDpmdW5jdGlvbihhLGMpe3RoaXNbS2EoYSx0aGlzLm5leHRVaWQpXT1jfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXNbS2EoYSx0aGlzLm5leHRVaWQpXX0scmVtb3ZlOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXNbYT1LYShhLHRoaXMubmV4dFVpZCldO2RlbGV0ZSB0aGlzW2FdO3JldHVybiBjfX07dmFyIHFlPS9eZnVuY3Rpb25cXHMqW15cXChdKlxcKFxccyooW15cXCldKilcXCkvbSxyZT0vLC8sc2U9L15cXHMqKF8/KShcXFMrPylcXDFcXHMqJC8scGU9LygoXFwvXFwvLiokKXwoXFwvXFwqW1xcc1xcU10qP1xcKlxcLykpL21nLFxuY2I9QyhcIiRpbmplY3RvclwiKSxOZT1DKFwiJGFuaW1hdGVcIiksTWQ9W1wiJHByb3ZpZGVcIixmdW5jdGlvbihhKXt0aGlzLiQkc2VsZWN0b3JzPXt9O3RoaXMucmVnaXN0ZXI9ZnVuY3Rpb24oYyxkKXt2YXIgZT1jK1wiLWFuaW1hdGlvblwiO2lmKGMmJlwiLlwiIT1jLmNoYXJBdCgwKSl0aHJvdyBOZShcIm5vdGNzZWxcIixjKTt0aGlzLiQkc2VsZWN0b3JzW2Muc3Vic3RyKDEpXT1lO2EuZmFjdG9yeShlLGQpfTt0aGlzLmNsYXNzTmFtZUZpbHRlcj1mdW5jdGlvbihhKXsxPT09YXJndW1lbnRzLmxlbmd0aCYmKHRoaXMuJCRjbGFzc05hbWVGaWx0ZXI9YSBpbnN0YW5jZW9mIFJlZ0V4cD9hOm51bGwpO3JldHVybiB0aGlzLiQkY2xhc3NOYW1lRmlsdGVyfTt0aGlzLiRnZXQ9W1wiJHRpbWVvdXRcIixcIiQkYXN5bmNDYWxsYmFja1wiLGZ1bmN0aW9uKGEsZCl7cmV0dXJue2VudGVyOmZ1bmN0aW9uKGEsYyxnLGspe2c/Zy5hZnRlcihhKTooYyYmY1swXXx8KGM9Zy5wYXJlbnQoKSksYy5hcHBlbmQoYSkpO2smJlxuZChrKX0sbGVhdmU6ZnVuY3Rpb24oYSxjKXthLnJlbW92ZSgpO2MmJmQoYyl9LG1vdmU6ZnVuY3Rpb24oYSxjLGQsayl7dGhpcy5lbnRlcihhLGMsZCxrKX0sYWRkQ2xhc3M6ZnVuY3Rpb24oYSxjLGcpe2M9dihjKT9jOkooYyk/Yy5qb2luKFwiIFwiKTpcIlwiO3IoYSxmdW5jdGlvbihhKXtvYihhLGMpfSk7ZyYmZChnKX0scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSxjLGcpe2M9dihjKT9jOkooYyk/Yy5qb2luKFwiIFwiKTpcIlwiO3IoYSxmdW5jdGlvbihhKXtuYihhLGMpfSk7ZyYmZChnKX0sc2V0Q2xhc3M6ZnVuY3Rpb24oYSxjLGcsayl7cihhLGZ1bmN0aW9uKGEpe29iKGEsYyk7bmIoYSxnKX0pO2smJmQoayl9LGVuYWJsZWQ6RX19XX1dLGphPUMoXCIkY29tcGlsZVwiKTtpYy4kaW5qZWN0PVtcIiRwcm92aWRlXCIsXCIkJHNhbml0aXplVXJpUHJvdmlkZXJcIl07dmFyIHdlPS9eKHhbXFw6XFwtX118ZGF0YVtcXDpcXC1fXSkvaSx5Yz1DKFwiJGludGVycG9sYXRlXCIpLE9lPS9eKFteXFw/I10qKShcXD8oW14jXSopKT8oIyguKikpPyQvLFxuemU9e2h0dHA6ODAsaHR0cHM6NDQzLGZ0cDoyMX0sU2I9QyhcIiRsb2NhdGlvblwiKTtVYi5wcm90b3R5cGU9VGIucHJvdG90eXBlPUJjLnByb3RvdHlwZT17JCRodG1sNTohMSwkJHJlcGxhY2U6ITEsYWJzVXJsOnRiKFwiJCRhYnNVcmxcIiksdXJsOmZ1bmN0aW9uKGEpe2lmKHgoYSkpcmV0dXJuIHRoaXMuJCR1cmw7YT1PZS5leGVjKGEpO2FbMV0mJnRoaXMucGF0aChkZWNvZGVVUklDb21wb25lbnQoYVsxXSkpOyhhWzJdfHxhWzFdKSYmdGhpcy5zZWFyY2goYVszXXx8XCJcIik7dGhpcy5oYXNoKGFbNV18fFwiXCIpO3JldHVybiB0aGlzfSxwcm90b2NvbDp0YihcIiQkcHJvdG9jb2xcIiksaG9zdDp0YihcIiQkaG9zdFwiKSxwb3J0OnRiKFwiJCRwb3J0XCIpLHBhdGg6Q2MoXCIkJHBhdGhcIixmdW5jdGlvbihhKXthPWE/YS50b1N0cmluZygpOlwiXCI7cmV0dXJuXCIvXCI9PWEuY2hhckF0KDApP2E6XCIvXCIrYX0pLHNlYXJjaDpmdW5jdGlvbihhLGMpe3N3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIHRoaXMuJCRzZWFyY2g7XG5jYXNlIDE6aWYodihhKXx8aWIoYSkpYT1hLnRvU3RyaW5nKCksdGhpcy4kJHNlYXJjaD1lYyhhKTtlbHNlIGlmKFQoYSkpcihhLGZ1bmN0aW9uKGMsZSl7bnVsbD09YyYmZGVsZXRlIGFbZV19KSx0aGlzLiQkc2VhcmNoPWE7ZWxzZSB0aHJvdyBTYihcImlzcmNoYXJnXCIpO2JyZWFrO2RlZmF1bHQ6eChjKXx8bnVsbD09PWM/ZGVsZXRlIHRoaXMuJCRzZWFyY2hbYV06dGhpcy4kJHNlYXJjaFthXT1jfXRoaXMuJCRjb21wb3NlKCk7cmV0dXJuIHRoaXN9LGhhc2g6Q2MoXCIkJGhhc2hcIixmdW5jdGlvbihhKXtyZXR1cm4gYT9hLnRvU3RyaW5nKCk6XCJcIn0pLHJlcGxhY2U6ZnVuY3Rpb24oKXt0aGlzLiQkcmVwbGFjZT0hMDtyZXR1cm4gdGhpc319O3ZhciBsYT1DKFwiJHBhcnNlXCIpLEZjPXt9LHdhLFBlPUZ1bmN0aW9uLnByb3RvdHlwZS5jYWxsLFFlPUZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseSxRYz1GdW5jdGlvbi5wcm90b3R5cGUuYmluZCxnYj17XCJudWxsXCI6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sXG5cInRydWVcIjpmdW5jdGlvbigpe3JldHVybiEwfSxcImZhbHNlXCI6ZnVuY3Rpb24oKXtyZXR1cm4hMX0sdW5kZWZpbmVkOkUsXCIrXCI6ZnVuY3Rpb24oYSxjLGQsZSl7ZD1kKGEsYyk7ZT1lKGEsYyk7cmV0dXJuIHkoZCk/eShlKT9kK2U6ZDp5KGUpP2U6dH0sXCItXCI6ZnVuY3Rpb24oYSxjLGQsZSl7ZD1kKGEsYyk7ZT1lKGEsYyk7cmV0dXJuKHkoZCk/ZDowKS0oeShlKT9lOjApfSxcIipcIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpKmUoYSxjKX0sXCIvXCI6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIGQoYSxjKS9lKGEsYyl9LFwiJVwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYyklZShhLGMpfSxcIl5cIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpXmUoYSxjKX0sXCI9XCI6RSxcIj09PVwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYyk9PT1lKGEsYyl9LFwiIT09XCI6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIGQoYSxjKSE9PWUoYSxjKX0sXCI9PVwiOmZ1bmN0aW9uKGEsXG5jLGQsZSl7cmV0dXJuIGQoYSxjKT09ZShhLGMpfSxcIiE9XCI6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIGQoYSxjKSE9ZShhLGMpfSxcIjxcIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpPGUoYSxjKX0sXCI+XCI6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIGQoYSxjKT5lKGEsYyl9LFwiPD1cIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpPD1lKGEsYyl9LFwiPj1cIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpPj1lKGEsYyl9LFwiJiZcIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpJiZlKGEsYyl9LFwifHxcIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpfHxlKGEsYyl9LFwiJlwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYykmZShhLGMpfSxcInxcIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZShhLGMpKGEsYyxkKGEsYykpfSxcIiFcIjpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIWQoYSxjKX19LFJlPXtuOlwiXFxuXCIsZjpcIlxcZlwiLHI6XCJcXHJcIixcbnQ6XCJcXHRcIix2OlwiXFx2XCIsXCInXCI6XCInXCIsJ1wiJzonXCInfSxXYj1mdW5jdGlvbihhKXt0aGlzLm9wdGlvbnM9YX07V2IucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpXYixsZXg6ZnVuY3Rpb24oYSl7dGhpcy50ZXh0PWE7dGhpcy5pbmRleD0wO3RoaXMuY2g9dDt0aGlzLmxhc3RDaD1cIjpcIjtmb3IodGhpcy50b2tlbnM9W107dGhpcy5pbmRleDx0aGlzLnRleHQubGVuZ3RoOyl7dGhpcy5jaD10aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpO2lmKHRoaXMuaXMoXCJcXFwiJ1wiKSl0aGlzLnJlYWRTdHJpbmcodGhpcy5jaCk7ZWxzZSBpZih0aGlzLmlzTnVtYmVyKHRoaXMuY2gpfHx0aGlzLmlzKFwiLlwiKSYmdGhpcy5pc051bWJlcih0aGlzLnBlZWsoKSkpdGhpcy5yZWFkTnVtYmVyKCk7ZWxzZSBpZih0aGlzLmlzSWRlbnQodGhpcy5jaCkpdGhpcy5yZWFkSWRlbnQoKTtlbHNlIGlmKHRoaXMuaXMoXCIoKXt9W10uLDs6P1wiKSl0aGlzLnRva2Vucy5wdXNoKHtpbmRleDp0aGlzLmluZGV4LHRleHQ6dGhpcy5jaH0pLFxudGhpcy5pbmRleCsrO2Vsc2UgaWYodGhpcy5pc1doaXRlc3BhY2UodGhpcy5jaCkpe3RoaXMuaW5kZXgrKztjb250aW51ZX1lbHNle2E9dGhpcy5jaCt0aGlzLnBlZWsoKTt2YXIgYz1hK3RoaXMucGVlaygyKSxkPWdiW3RoaXMuY2hdLGU9Z2JbYV0sZj1nYltjXTtmPyh0aGlzLnRva2Vucy5wdXNoKHtpbmRleDp0aGlzLmluZGV4LHRleHQ6YyxmbjpmfSksdGhpcy5pbmRleCs9Myk6ZT8odGhpcy50b2tlbnMucHVzaCh7aW5kZXg6dGhpcy5pbmRleCx0ZXh0OmEsZm46ZX0pLHRoaXMuaW5kZXgrPTIpOmQ/KHRoaXMudG9rZW5zLnB1c2goe2luZGV4OnRoaXMuaW5kZXgsdGV4dDp0aGlzLmNoLGZuOmR9KSx0aGlzLmluZGV4Kz0xKTp0aGlzLnRocm93RXJyb3IoXCJVbmV4cGVjdGVkIG5leHQgY2hhcmFjdGVyIFwiLHRoaXMuaW5kZXgsdGhpcy5pbmRleCsxKX10aGlzLmxhc3RDaD10aGlzLmNofXJldHVybiB0aGlzLnRva2Vuc30saXM6ZnVuY3Rpb24oYSl7cmV0dXJuLTEhPT1hLmluZGV4T2YodGhpcy5jaCl9LFxud2FzOmZ1bmN0aW9uKGEpe3JldHVybi0xIT09YS5pbmRleE9mKHRoaXMubGFzdENoKX0scGVlazpmdW5jdGlvbihhKXthPWF8fDE7cmV0dXJuIHRoaXMuaW5kZXgrYTx0aGlzLnRleHQubGVuZ3RoP3RoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCthKTohMX0saXNOdW1iZXI6ZnVuY3Rpb24oYSl7cmV0dXJuXCIwXCI8PWEmJlwiOVwiPj1hfSxpc1doaXRlc3BhY2U6ZnVuY3Rpb24oYSl7cmV0dXJuXCIgXCI9PT1hfHxcIlxcclwiPT09YXx8XCJcXHRcIj09PWF8fFwiXFxuXCI9PT1hfHxcIlxcdlwiPT09YXx8XCJcXHUwMGEwXCI9PT1hfSxpc0lkZW50OmZ1bmN0aW9uKGEpe3JldHVyblwiYVwiPD1hJiZcInpcIj49YXx8XCJBXCI8PWEmJlwiWlwiPj1hfHxcIl9cIj09PWF8fFwiJFwiPT09YX0saXNFeHBPcGVyYXRvcjpmdW5jdGlvbihhKXtyZXR1cm5cIi1cIj09PWF8fFwiK1wiPT09YXx8dGhpcy5pc051bWJlcihhKX0sdGhyb3dFcnJvcjpmdW5jdGlvbihhLGMsZCl7ZD1kfHx0aGlzLmluZGV4O2M9eShjKT9cInMgXCIrYytcIi1cIit0aGlzLmluZGV4K1wiIFtcIitcbnRoaXMudGV4dC5zdWJzdHJpbmcoYyxkKStcIl1cIjpcIiBcIitkO3Rocm93IGxhKFwibGV4ZXJyXCIsYSxjLHRoaXMudGV4dCk7fSxyZWFkTnVtYmVyOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVwiXCIsYz10aGlzLmluZGV4O3RoaXMuaW5kZXg8dGhpcy50ZXh0Lmxlbmd0aDspe3ZhciBkPUsodGhpcy50ZXh0LmNoYXJBdCh0aGlzLmluZGV4KSk7aWYoXCIuXCI9PWR8fHRoaXMuaXNOdW1iZXIoZCkpYSs9ZDtlbHNle3ZhciBlPXRoaXMucGVlaygpO2lmKFwiZVwiPT1kJiZ0aGlzLmlzRXhwT3BlcmF0b3IoZSkpYSs9ZDtlbHNlIGlmKHRoaXMuaXNFeHBPcGVyYXRvcihkKSYmZSYmdGhpcy5pc051bWJlcihlKSYmXCJlXCI9PWEuY2hhckF0KGEubGVuZ3RoLTEpKWErPWQ7ZWxzZSBpZighdGhpcy5pc0V4cE9wZXJhdG9yKGQpfHxlJiZ0aGlzLmlzTnVtYmVyKGUpfHxcImVcIiE9YS5jaGFyQXQoYS5sZW5ndGgtMSkpYnJlYWs7ZWxzZSB0aGlzLnRocm93RXJyb3IoXCJJbnZhbGlkIGV4cG9uZW50XCIpfXRoaXMuaW5kZXgrK31hKj1cbjE7dGhpcy50b2tlbnMucHVzaCh7aW5kZXg6Yyx0ZXh0OmEsbGl0ZXJhbDohMCxjb25zdGFudDohMCxmbjpmdW5jdGlvbigpe3JldHVybiBhfX0pfSxyZWFkSWRlbnQ6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcyxjPVwiXCIsZD10aGlzLmluZGV4LGUsZixnLGs7dGhpcy5pbmRleDx0aGlzLnRleHQubGVuZ3RoOyl7az10aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpO2lmKFwiLlwiPT09a3x8dGhpcy5pc0lkZW50KGspfHx0aGlzLmlzTnVtYmVyKGspKVwiLlwiPT09ayYmKGU9dGhpcy5pbmRleCksYys9aztlbHNlIGJyZWFrO3RoaXMuaW5kZXgrK31pZihlKWZvcihmPXRoaXMuaW5kZXg7Zjx0aGlzLnRleHQubGVuZ3RoOyl7az10aGlzLnRleHQuY2hhckF0KGYpO2lmKFwiKFwiPT09ayl7Zz1jLnN1YnN0cihlLWQrMSk7Yz1jLnN1YnN0cigwLGUtZCk7dGhpcy5pbmRleD1mO2JyZWFrfWlmKHRoaXMuaXNXaGl0ZXNwYWNlKGspKWYrKztlbHNlIGJyZWFrfWQ9e2luZGV4OmQsdGV4dDpjfTtpZihnYi5oYXNPd25Qcm9wZXJ0eShjKSlkLmZuPVxuZ2JbY10sZC5saXRlcmFsPSEwLGQuY29uc3RhbnQ9ITA7ZWxzZXt2YXIgbT1FYyhjLHRoaXMub3B0aW9ucyx0aGlzLnRleHQpO2QuZm49RChmdW5jdGlvbihhLGMpe3JldHVybiBtKGEsYyl9LHthc3NpZ246ZnVuY3Rpb24oZCxlKXtyZXR1cm4gdWIoZCxjLGUsYS50ZXh0LGEub3B0aW9ucyl9fSl9dGhpcy50b2tlbnMucHVzaChkKTtnJiYodGhpcy50b2tlbnMucHVzaCh7aW5kZXg6ZSx0ZXh0OlwiLlwifSksdGhpcy50b2tlbnMucHVzaCh7aW5kZXg6ZSsxLHRleHQ6Z30pKX0scmVhZFN0cmluZzpmdW5jdGlvbihhKXt2YXIgYz10aGlzLmluZGV4O3RoaXMuaW5kZXgrKztmb3IodmFyIGQ9XCJcIixlPWEsZj0hMTt0aGlzLmluZGV4PHRoaXMudGV4dC5sZW5ndGg7KXt2YXIgZz10aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpLGU9ZStnO2lmKGYpXCJ1XCI9PT1nPyhmPXRoaXMudGV4dC5zdWJzdHJpbmcodGhpcy5pbmRleCsxLHRoaXMuaW5kZXgrNSksZi5tYXRjaCgvW1xcZGEtZl17NH0vaSl8fFxudGhpcy50aHJvd0Vycm9yKFwiSW52YWxpZCB1bmljb2RlIGVzY2FwZSBbXFxcXHVcIitmK1wiXVwiKSx0aGlzLmluZGV4Kz00LGQrPVN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQoZiwxNikpKTpkKz1SZVtnXXx8ZyxmPSExO2Vsc2UgaWYoXCJcXFxcXCI9PT1nKWY9ITA7ZWxzZXtpZihnPT09YSl7dGhpcy5pbmRleCsrO3RoaXMudG9rZW5zLnB1c2goe2luZGV4OmMsdGV4dDplLHN0cmluZzpkLGxpdGVyYWw6ITAsY29uc3RhbnQ6ITAsZm46ZnVuY3Rpb24oKXtyZXR1cm4gZH19KTtyZXR1cm59ZCs9Z310aGlzLmluZGV4Kyt9dGhpcy50aHJvd0Vycm9yKFwiVW50ZXJtaW5hdGVkIHF1b3RlXCIsYyl9fTt2YXIgZmI9ZnVuY3Rpb24oYSxjLGQpe3RoaXMubGV4ZXI9YTt0aGlzLiRmaWx0ZXI9Yzt0aGlzLm9wdGlvbnM9ZH07ZmIuWkVSTz1EKGZ1bmN0aW9uKCl7cmV0dXJuIDB9LHtjb25zdGFudDohMH0pO2ZiLnByb3RvdHlwZT17Y29uc3RydWN0b3I6ZmIscGFyc2U6ZnVuY3Rpb24oYSl7dGhpcy50ZXh0PVxuYTt0aGlzLnRva2Vucz10aGlzLmxleGVyLmxleChhKTthPXRoaXMuc3RhdGVtZW50cygpOzAhPT10aGlzLnRva2Vucy5sZW5ndGgmJnRoaXMudGhyb3dFcnJvcihcImlzIGFuIHVuZXhwZWN0ZWQgdG9rZW5cIix0aGlzLnRva2Vuc1swXSk7YS5saXRlcmFsPSEhYS5saXRlcmFsO2EuY29uc3RhbnQ9ISFhLmNvbnN0YW50O3JldHVybiBhfSxwcmltYXJ5OmZ1bmN0aW9uKCl7dmFyIGE7aWYodGhpcy5leHBlY3QoXCIoXCIpKWE9dGhpcy5maWx0ZXJDaGFpbigpLHRoaXMuY29uc3VtZShcIilcIik7ZWxzZSBpZih0aGlzLmV4cGVjdChcIltcIikpYT10aGlzLmFycmF5RGVjbGFyYXRpb24oKTtlbHNlIGlmKHRoaXMuZXhwZWN0KFwie1wiKSlhPXRoaXMub2JqZWN0KCk7ZWxzZXt2YXIgYz10aGlzLmV4cGVjdCgpOyhhPWMuZm4pfHx0aGlzLnRocm93RXJyb3IoXCJub3QgYSBwcmltYXJ5IGV4cHJlc3Npb25cIixjKTthLmxpdGVyYWw9ISFjLmxpdGVyYWw7YS5jb25zdGFudD0hIWMuY29uc3RhbnR9Zm9yKHZhciBkO2M9XG50aGlzLmV4cGVjdChcIihcIixcIltcIixcIi5cIik7KVwiKFwiPT09Yy50ZXh0PyhhPXRoaXMuZnVuY3Rpb25DYWxsKGEsZCksZD1udWxsKTpcIltcIj09PWMudGV4dD8oZD1hLGE9dGhpcy5vYmplY3RJbmRleChhKSk6XCIuXCI9PT1jLnRleHQ/KGQ9YSxhPXRoaXMuZmllbGRBY2Nlc3MoYSkpOnRoaXMudGhyb3dFcnJvcihcIklNUE9TU0lCTEVcIik7cmV0dXJuIGF9LHRocm93RXJyb3I6ZnVuY3Rpb24oYSxjKXt0aHJvdyBsYShcInN5bnRheFwiLGMudGV4dCxhLGMuaW5kZXgrMSx0aGlzLnRleHQsdGhpcy50ZXh0LnN1YnN0cmluZyhjLmluZGV4KSk7fSxwZWVrVG9rZW46ZnVuY3Rpb24oKXtpZigwPT09dGhpcy50b2tlbnMubGVuZ3RoKXRocm93IGxhKFwidWVvZVwiLHRoaXMudGV4dCk7cmV0dXJuIHRoaXMudG9rZW5zWzBdfSxwZWVrOmZ1bmN0aW9uKGEsYyxkLGUpe2lmKDA8dGhpcy50b2tlbnMubGVuZ3RoKXt2YXIgZj10aGlzLnRva2Vuc1swXSxnPWYudGV4dDtpZihnPT09YXx8Zz09PWN8fGc9PT1kfHxnPT09XG5lfHwhKGF8fGN8fGR8fGUpKXJldHVybiBmfXJldHVybiExfSxleHBlY3Q6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuKGE9dGhpcy5wZWVrKGEsYyxkLGUpKT8odGhpcy50b2tlbnMuc2hpZnQoKSxhKTohMX0sY29uc3VtZTpmdW5jdGlvbihhKXt0aGlzLmV4cGVjdChhKXx8dGhpcy50aHJvd0Vycm9yKFwiaXMgdW5leHBlY3RlZCwgZXhwZWN0aW5nIFtcIithK1wiXVwiLHRoaXMucGVlaygpKX0sdW5hcnlGbjpmdW5jdGlvbihhLGMpe3JldHVybiBEKGZ1bmN0aW9uKGQsZSl7cmV0dXJuIGEoZCxlLGMpfSx7Y29uc3RhbnQ6Yy5jb25zdGFudH0pfSx0ZXJuYXJ5Rm46ZnVuY3Rpb24oYSxjLGQpe3JldHVybiBEKGZ1bmN0aW9uKGUsZil7cmV0dXJuIGEoZSxmKT9jKGUsZik6ZChlLGYpfSx7Y29uc3RhbnQ6YS5jb25zdGFudCYmYy5jb25zdGFudCYmZC5jb25zdGFudH0pfSxiaW5hcnlGbjpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIEQoZnVuY3Rpb24oZSxmKXtyZXR1cm4gYyhlLGYsYSxkKX0se2NvbnN0YW50OmEuY29uc3RhbnQmJlxuZC5jb25zdGFudH0pfSxzdGF0ZW1lbnRzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdOzspaWYoMDx0aGlzLnRva2Vucy5sZW5ndGgmJiF0aGlzLnBlZWsoXCJ9XCIsXCIpXCIsXCI7XCIsXCJdXCIpJiZhLnB1c2godGhpcy5maWx0ZXJDaGFpbigpKSwhdGhpcy5leHBlY3QoXCI7XCIpKXJldHVybiAxPT09YS5sZW5ndGg/YVswXTpmdW5jdGlvbihjLGQpe2Zvcih2YXIgZSxmPTA7ZjxhLmxlbmd0aDtmKyspe3ZhciBnPWFbZl07ZyYmKGU9ZyhjLGQpKX1yZXR1cm4gZX19LGZpbHRlckNoYWluOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuZXhwcmVzc2lvbigpLGM7OylpZihjPXRoaXMuZXhwZWN0KFwifFwiKSlhPXRoaXMuYmluYXJ5Rm4oYSxjLmZuLHRoaXMuZmlsdGVyKCkpO2Vsc2UgcmV0dXJuIGF9LGZpbHRlcjpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmV4cGVjdCgpLGM9dGhpcy4kZmlsdGVyKGEudGV4dCksZD1bXTs7KWlmKGE9dGhpcy5leHBlY3QoXCI6XCIpKWQucHVzaCh0aGlzLmV4cHJlc3Npb24oKSk7XG5lbHNle3ZhciBlPWZ1bmN0aW9uKGEsZSxrKXtrPVtrXTtmb3IodmFyIG09MDttPGQubGVuZ3RoO20rKylrLnB1c2goZFttXShhLGUpKTtyZXR1cm4gYy5hcHBseShhLGspfTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZX19fSxleHByZXNzaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXNzaWdubWVudCgpfSxhc3NpZ25tZW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50ZXJuYXJ5KCksYyxkO3JldHVybihkPXRoaXMuZXhwZWN0KFwiPVwiKSk/KGEuYXNzaWdufHx0aGlzLnRocm93RXJyb3IoXCJpbXBsaWVzIGFzc2lnbm1lbnQgYnV0IFtcIit0aGlzLnRleHQuc3Vic3RyaW5nKDAsZC5pbmRleCkrXCJdIGNhbiBub3QgYmUgYXNzaWduZWQgdG9cIixkKSxjPXRoaXMudGVybmFyeSgpLGZ1bmN0aW9uKGQsZil7cmV0dXJuIGEuYXNzaWduKGQsYyhkLGYpLGYpfSk6YX0sdGVybmFyeTpmdW5jdGlvbigpe3ZhciBhPXRoaXMubG9naWNhbE9SKCksYyxkO2lmKHRoaXMuZXhwZWN0KFwiP1wiKSl7Yz10aGlzLmFzc2lnbm1lbnQoKTtcbmlmKGQ9dGhpcy5leHBlY3QoXCI6XCIpKXJldHVybiB0aGlzLnRlcm5hcnlGbihhLGMsdGhpcy5hc3NpZ25tZW50KCkpO3RoaXMudGhyb3dFcnJvcihcImV4cGVjdGVkIDpcIixkKX1lbHNlIHJldHVybiBhfSxsb2dpY2FsT1I6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5sb2dpY2FsQU5EKCksYzs7KWlmKGM9dGhpcy5leHBlY3QoXCJ8fFwiKSlhPXRoaXMuYmluYXJ5Rm4oYSxjLmZuLHRoaXMubG9naWNhbEFORCgpKTtlbHNlIHJldHVybiBhfSxsb2dpY2FsQU5EOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lcXVhbGl0eSgpLGM7aWYoYz10aGlzLmV4cGVjdChcIiYmXCIpKWE9dGhpcy5iaW5hcnlGbihhLGMuZm4sdGhpcy5sb2dpY2FsQU5EKCkpO3JldHVybiBhfSxlcXVhbGl0eTpmdW5jdGlvbigpe3ZhciBhPXRoaXMucmVsYXRpb25hbCgpLGM7aWYoYz10aGlzLmV4cGVjdChcIj09XCIsXCIhPVwiLFwiPT09XCIsXCIhPT1cIikpYT10aGlzLmJpbmFyeUZuKGEsYy5mbix0aGlzLmVxdWFsaXR5KCkpO3JldHVybiBhfSxcbnJlbGF0aW9uYWw6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmFkZGl0aXZlKCksYztpZihjPXRoaXMuZXhwZWN0KFwiPFwiLFwiPlwiLFwiPD1cIixcIj49XCIpKWE9dGhpcy5iaW5hcnlGbihhLGMuZm4sdGhpcy5yZWxhdGlvbmFsKCkpO3JldHVybiBhfSxhZGRpdGl2ZTpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLm11bHRpcGxpY2F0aXZlKCksYztjPXRoaXMuZXhwZWN0KFwiK1wiLFwiLVwiKTspYT10aGlzLmJpbmFyeUZuKGEsYy5mbix0aGlzLm11bHRpcGxpY2F0aXZlKCkpO3JldHVybiBhfSxtdWx0aXBsaWNhdGl2ZTpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLnVuYXJ5KCksYztjPXRoaXMuZXhwZWN0KFwiKlwiLFwiL1wiLFwiJVwiKTspYT10aGlzLmJpbmFyeUZuKGEsYy5mbix0aGlzLnVuYXJ5KCkpO3JldHVybiBhfSx1bmFyeTpmdW5jdGlvbigpe3ZhciBhO3JldHVybiB0aGlzLmV4cGVjdChcIitcIik/dGhpcy5wcmltYXJ5KCk6KGE9dGhpcy5leHBlY3QoXCItXCIpKT90aGlzLmJpbmFyeUZuKGZiLlpFUk8sYS5mbixcbnRoaXMudW5hcnkoKSk6KGE9dGhpcy5leHBlY3QoXCIhXCIpKT90aGlzLnVuYXJ5Rm4oYS5mbix0aGlzLnVuYXJ5KCkpOnRoaXMucHJpbWFyeSgpfSxmaWVsZEFjY2VzczpmdW5jdGlvbihhKXt2YXIgYz10aGlzLGQ9dGhpcy5leHBlY3QoKS50ZXh0LGU9RWMoZCx0aGlzLm9wdGlvbnMsdGhpcy50ZXh0KTtyZXR1cm4gRChmdW5jdGlvbihjLGQsayl7cmV0dXJuIGUoa3x8YShjLGQpKX0se2Fzc2lnbjpmdW5jdGlvbihlLGcsayl7KGs9YShlLGspKXx8YS5hc3NpZ24oZSxrPXt9KTtyZXR1cm4gdWIoayxkLGcsYy50ZXh0LGMub3B0aW9ucyl9fSl9LG9iamVjdEluZGV4OmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMsZD10aGlzLmV4cHJlc3Npb24oKTt0aGlzLmNvbnN1bWUoXCJdXCIpO3JldHVybiBEKGZ1bmN0aW9uKGUsZil7dmFyIGc9YShlLGYpLGs9ZChlLGYpLG07a2EoayxjLnRleHQpO2lmKCFnKXJldHVybiB0OyhnPXZhKGdba10sYy50ZXh0KSkmJihnLnRoZW4mJmMub3B0aW9ucy51bndyYXBQcm9taXNlcykmJlxuKG09ZyxcIiQkdlwiaW4gZ3x8KG0uJCR2PXQsbS50aGVuKGZ1bmN0aW9uKGEpe20uJCR2PWF9KSksZz1nLiQkdik7cmV0dXJuIGd9LHthc3NpZ246ZnVuY3Rpb24oZSxmLGcpe3ZhciBrPWthKGQoZSxnKSxjLnRleHQpOyhnPXZhKGEoZSxnKSxjLnRleHQpKXx8YS5hc3NpZ24oZSxnPXt9KTtyZXR1cm4gZ1trXT1mfX0pfSxmdW5jdGlvbkNhbGw6ZnVuY3Rpb24oYSxjKXt2YXIgZD1bXTtpZihcIilcIiE9PXRoaXMucGVla1Rva2VuKCkudGV4dCl7ZG8gZC5wdXNoKHRoaXMuZXhwcmVzc2lvbigpKTt3aGlsZSh0aGlzLmV4cGVjdChcIixcIikpfXRoaXMuY29uc3VtZShcIilcIik7dmFyIGU9dGhpcztyZXR1cm4gZnVuY3Rpb24oZixnKXtmb3IodmFyIGs9W10sbT1jP2MoZixnKTpmLGg9MDtoPGQubGVuZ3RoO2grKylrLnB1c2godmEoZFtoXShmLGcpLGUudGV4dCkpO2g9YShmLGcsbSl8fEU7dmEobSxlLnRleHQpO3ZhciBsPWUudGV4dDtpZihoKXtpZihoLmNvbnN0cnVjdG9yPT09aCl0aHJvdyBsYShcImlzZWNmblwiLFxubCk7aWYoaD09PVBlfHxoPT09UWV8fFFjJiZoPT09UWMpdGhyb3cgbGEoXCJpc2VjZmZcIixsKTt9az1oLmFwcGx5P2guYXBwbHkobSxrKTpoKGtbMF0sa1sxXSxrWzJdLGtbM10sa1s0XSk7cmV0dXJuIHZhKGssZS50ZXh0KX19LGFycmF5RGVjbGFyYXRpb246ZnVuY3Rpb24oKXt2YXIgYT1bXSxjPSEwO2lmKFwiXVwiIT09dGhpcy5wZWVrVG9rZW4oKS50ZXh0KXtkb3tpZih0aGlzLnBlZWsoXCJdXCIpKWJyZWFrO3ZhciBkPXRoaXMuZXhwcmVzc2lvbigpO2EucHVzaChkKTtkLmNvbnN0YW50fHwoYz0hMSl9d2hpbGUodGhpcy5leHBlY3QoXCIsXCIpKX10aGlzLmNvbnN1bWUoXCJdXCIpO3JldHVybiBEKGZ1bmN0aW9uKGMsZCl7Zm9yKHZhciBnPVtdLGs9MDtrPGEubGVuZ3RoO2srKylnLnB1c2goYVtrXShjLGQpKTtyZXR1cm4gZ30se2xpdGVyYWw6ITAsY29uc3RhbnQ6Y30pfSxvYmplY3Q6ZnVuY3Rpb24oKXt2YXIgYT1bXSxjPSEwO2lmKFwifVwiIT09dGhpcy5wZWVrVG9rZW4oKS50ZXh0KXtkb3tpZih0aGlzLnBlZWsoXCJ9XCIpKWJyZWFrO1xudmFyIGQ9dGhpcy5leHBlY3QoKSxkPWQuc3RyaW5nfHxkLnRleHQ7dGhpcy5jb25zdW1lKFwiOlwiKTt2YXIgZT10aGlzLmV4cHJlc3Npb24oKTthLnB1c2goe2tleTpkLHZhbHVlOmV9KTtlLmNvbnN0YW50fHwoYz0hMSl9d2hpbGUodGhpcy5leHBlY3QoXCIsXCIpKX10aGlzLmNvbnN1bWUoXCJ9XCIpO3JldHVybiBEKGZ1bmN0aW9uKGMsZCl7Zm9yKHZhciBlPXt9LG09MDttPGEubGVuZ3RoO20rKyl7dmFyIGg9YVttXTtlW2gua2V5XT1oLnZhbHVlKGMsZCl9cmV0dXJuIGV9LHtsaXRlcmFsOiEwLGNvbnN0YW50OmN9KX19O3ZhciBWYj17fSx4YT1DKFwiJHNjZVwiKSxnYT17SFRNTDpcImh0bWxcIixDU1M6XCJjc3NcIixVUkw6XCJ1cmxcIixSRVNPVVJDRV9VUkw6XCJyZXNvdXJjZVVybFwiLEpTOlwianNcIn0sWT1YLmNyZWF0ZUVsZW1lbnQoXCJhXCIpLEhjPXVhKFcubG9jYXRpb24uaHJlZiwhMCk7bWMuJGluamVjdD1bXCIkcHJvdmlkZVwiXTtJYy4kaW5qZWN0PVtcIiRsb2NhbGVcIl07S2MuJGluamVjdD1bXCIkbG9jYWxlXCJdO1xudmFyIE5jPVwiLlwiLEplPXt5eXl5OiQoXCJGdWxsWWVhclwiLDQpLHl5OiQoXCJGdWxsWWVhclwiLDIsMCwhMCkseTokKFwiRnVsbFllYXJcIiwxKSxNTU1NOnZiKFwiTW9udGhcIiksTU1NOnZiKFwiTW9udGhcIiwhMCksTU06JChcIk1vbnRoXCIsMiwxKSxNOiQoXCJNb250aFwiLDEsMSksZGQ6JChcIkRhdGVcIiwyKSxkOiQoXCJEYXRlXCIsMSksSEg6JChcIkhvdXJzXCIsMiksSDokKFwiSG91cnNcIiwxKSxoaDokKFwiSG91cnNcIiwyLC0xMiksaDokKFwiSG91cnNcIiwxLC0xMiksbW06JChcIk1pbnV0ZXNcIiwyKSxtOiQoXCJNaW51dGVzXCIsMSksc3M6JChcIlNlY29uZHNcIiwyKSxzOiQoXCJTZWNvbmRzXCIsMSksc3NzOiQoXCJNaWxsaXNlY29uZHNcIiwzKSxFRUVFOnZiKFwiRGF5XCIpLEVFRTp2YihcIkRheVwiLCEwKSxhOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIDEyPmEuZ2V0SG91cnMoKT9jLkFNUE1TWzBdOmMuQU1QTVNbMV19LFo6ZnVuY3Rpb24oYSl7YT0tMSphLmdldFRpbWV6b25lT2Zmc2V0KCk7cmV0dXJuIGE9KDA8PWE/XCIrXCI6XCJcIikrKFhiKE1hdGhbMDxcbmE/XCJmbG9vclwiOlwiY2VpbFwiXShhLzYwKSwyKStYYihNYXRoLmFicyhhJTYwKSwyKSl9fSxJZT0vKCg/OlteeU1kSGhtc2FaRSddKyl8KD86Jyg/OlteJ118JycpKicpfCg/OkUrfHkrfE0rfGQrfEgrfGgrfG0rfHMrfGF8WikpKC4qKS8sSGU9L15cXC0/XFxkKyQvO0pjLiRpbmplY3Q9W1wiJGxvY2FsZVwiXTt2YXIgRmU9YmEoSyksR2U9YmEoSWEpO0xjLiRpbmplY3Q9W1wiJHBhcnNlXCJdO3ZhciBkZD1iYSh7cmVzdHJpY3Q6XCJFXCIsY29tcGlsZTpmdW5jdGlvbihhLGMpezg+PVEmJihjLmhyZWZ8fGMubmFtZXx8Yy4kc2V0KFwiaHJlZlwiLFwiXCIpLGEuYXBwZW5kKFguY3JlYXRlQ29tbWVudChcIklFIGZpeFwiKSkpO2lmKCFjLmhyZWYmJiFjLnhsaW5rSHJlZiYmIWMubmFtZSlyZXR1cm4gZnVuY3Rpb24oYSxjKXt2YXIgZj1cIltvYmplY3QgU1ZHQW5pbWF0ZWRTdHJpbmddXCI9PT16YS5jYWxsKGMucHJvcChcImhyZWZcIikpP1wieGxpbms6aHJlZlwiOlwiaHJlZlwiO2Mub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2MuYXR0cihmKXx8XG5hLnByZXZlbnREZWZhdWx0KCl9KX19fSksRmI9e307cihxYixmdW5jdGlvbihhLGMpe2lmKFwibXVsdGlwbGVcIiE9YSl7dmFyIGQ9cGEoXCJuZy1cIitjKTtGYltkXT1mdW5jdGlvbigpe3JldHVybntwcmlvcml0eToxMDAsbGluazpmdW5jdGlvbihhLGYsZyl7YS4kd2F0Y2goZ1tkXSxmdW5jdGlvbihhKXtnLiRzZXQoYywhIWEpfSl9fX19fSk7cihbXCJzcmNcIixcInNyY3NldFwiLFwiaHJlZlwiXSxmdW5jdGlvbihhKXt2YXIgYz1wYShcIm5nLVwiK2EpO0ZiW2NdPWZ1bmN0aW9uKCl7cmV0dXJue3ByaW9yaXR5Ojk5LGxpbms6ZnVuY3Rpb24oZCxlLGYpe3ZhciBnPWEsaz1hO1wiaHJlZlwiPT09YSYmXCJbb2JqZWN0IFNWR0FuaW1hdGVkU3RyaW5nXVwiPT09emEuY2FsbChlLnByb3AoXCJocmVmXCIpKSYmKGs9XCJ4bGlua0hyZWZcIixmLiRhdHRyW2tdPVwieGxpbms6aHJlZlwiLGc9bnVsbCk7Zi4kb2JzZXJ2ZShjLGZ1bmN0aW9uKGMpe2M/KGYuJHNldChrLGMpLFEmJmcmJmUucHJvcChnLGZba10pKTpcImhyZWZcIj09PVxuYSYmZi4kc2V0KGssbnVsbCl9KX19fX0pO3ZhciB5Yj17JGFkZENvbnRyb2w6RSwkcmVtb3ZlQ29udHJvbDpFLCRzZXRWYWxpZGl0eTpFLCRzZXREaXJ0eTpFLCRzZXRQcmlzdGluZTpFfTtPYy4kaW5qZWN0PVtcIiRlbGVtZW50XCIsXCIkYXR0cnNcIixcIiRzY29wZVwiLFwiJGFuaW1hdGVcIl07dmFyIFJjPWZ1bmN0aW9uKGEpe3JldHVybltcIiR0aW1lb3V0XCIsZnVuY3Rpb24oYyl7cmV0dXJue25hbWU6XCJmb3JtXCIscmVzdHJpY3Q6YT9cIkVBQ1wiOlwiRVwiLGNvbnRyb2xsZXI6T2MsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwcmU6ZnVuY3Rpb24oYSxlLGYsZyl7aWYoIWYuYWN0aW9uKXt2YXIgaz1mdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0P2EucHJldmVudERlZmF1bHQoKTphLnJldHVyblZhbHVlPSExfTtzYihlWzBdLFwic3VibWl0XCIsayk7ZS5vbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtjKGZ1bmN0aW9uKCl7JGEoZVswXSxcInN1Ym1pdFwiLGspfSwwLCExKX0pfXZhciBtPWUucGFyZW50KCkuY29udHJvbGxlcihcImZvcm1cIiksXG5oPWYubmFtZXx8Zi5uZ0Zvcm07aCYmdWIoYSxoLGcsaCk7aWYobSllLm9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe20uJHJlbW92ZUNvbnRyb2woZyk7aCYmdWIoYSxoLHQsaCk7RChnLHliKX0pfX19fX1dfSxlZD1SYygpLHJkPVJjKCEwKSxTZT0vXihmdHB8aHR0cHxodHRwcyk6XFwvXFwvKFxcdys6ezAsMX1cXHcqQCk/KFxcUyspKDpbMC05XSspPyhcXC98XFwvKFtcXHcjITouPys9JiVAIVxcLVxcL10pKT8kLyxUZT0vXlthLXowLTkhIyQlJicqK1xcLz0/Xl9ge3x9fi4tXStAW2EtejAtOV0oW2EtejAtOS1dKlthLXowLTldKT8oXFwuW2EtejAtOV0oW2EtejAtOS1dKlthLXowLTldKT8pKiQvaSxVZT0vXlxccyooXFwtfFxcKyk/KFxcZCt8KFxcZCooXFwuXFxkKikpKVxccyokLyxTYz17dGV4dDpBYixudW1iZXI6ZnVuY3Rpb24oYSxjLGQsZSxmLGcpe0FiKGEsYyxkLGUsZixnKTtlLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24oYSl7dmFyIGM9ZS4kaXNFbXB0eShhKTtpZihjfHxVZS50ZXN0KGEpKXJldHVybiBlLiRzZXRWYWxpZGl0eShcIm51bWJlclwiLFxuITApLFwiXCI9PT1hP251bGw6Yz9hOnBhcnNlRmxvYXQoYSk7ZS4kc2V0VmFsaWRpdHkoXCJudW1iZXJcIiwhMSk7cmV0dXJuIHR9KTtLZShlLFwibnVtYmVyXCIsVmUsbnVsbCxlLiQkdmFsaWRpdHlTdGF0ZSk7ZS4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiBlLiRpc0VtcHR5KGEpP1wiXCI6XCJcIithfSk7ZC5taW4mJihhPWZ1bmN0aW9uKGEpe3ZhciBjPXBhcnNlRmxvYXQoZC5taW4pO3JldHVybiBzYShlLFwibWluXCIsZS4kaXNFbXB0eShhKXx8YT49YyxhKX0sZS4kcGFyc2Vycy5wdXNoKGEpLGUuJGZvcm1hdHRlcnMucHVzaChhKSk7ZC5tYXgmJihhPWZ1bmN0aW9uKGEpe3ZhciBjPXBhcnNlRmxvYXQoZC5tYXgpO3JldHVybiBzYShlLFwibWF4XCIsZS4kaXNFbXB0eShhKXx8YTw9YyxhKX0sZS4kcGFyc2Vycy5wdXNoKGEpLGUuJGZvcm1hdHRlcnMucHVzaChhKSk7ZS4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiBzYShlLFwibnVtYmVyXCIsZS4kaXNFbXB0eShhKXx8XG5pYihhKSxhKX0pfSx1cmw6ZnVuY3Rpb24oYSxjLGQsZSxmLGcpe0FiKGEsYyxkLGUsZixnKTthPWZ1bmN0aW9uKGEpe3JldHVybiBzYShlLFwidXJsXCIsZS4kaXNFbXB0eShhKXx8U2UudGVzdChhKSxhKX07ZS4kZm9ybWF0dGVycy5wdXNoKGEpO2UuJHBhcnNlcnMucHVzaChhKX0sZW1haWw6ZnVuY3Rpb24oYSxjLGQsZSxmLGcpe0FiKGEsYyxkLGUsZixnKTthPWZ1bmN0aW9uKGEpe3JldHVybiBzYShlLFwiZW1haWxcIixlLiRpc0VtcHR5KGEpfHxUZS50ZXN0KGEpLGEpfTtlLiRmb3JtYXR0ZXJzLnB1c2goYSk7ZS4kcGFyc2Vycy5wdXNoKGEpfSxyYWRpbzpmdW5jdGlvbihhLGMsZCxlKXt4KGQubmFtZSkmJmMuYXR0cihcIm5hbWVcIixoYigpKTtjLm9uKFwiY2xpY2tcIixmdW5jdGlvbigpe2NbMF0uY2hlY2tlZCYmYS4kYXBwbHkoZnVuY3Rpb24oKXtlLiRzZXRWaWV3VmFsdWUoZC52YWx1ZSl9KX0pO2UuJHJlbmRlcj1mdW5jdGlvbigpe2NbMF0uY2hlY2tlZD1kLnZhbHVlPT1lLiR2aWV3VmFsdWV9O1xuZC4kb2JzZXJ2ZShcInZhbHVlXCIsZS4kcmVuZGVyKX0sY2hlY2tib3g6ZnVuY3Rpb24oYSxjLGQsZSl7dmFyIGY9ZC5uZ1RydWVWYWx1ZSxnPWQubmdGYWxzZVZhbHVlO3YoZil8fChmPSEwKTt2KGcpfHwoZz0hMSk7Yy5vbihcImNsaWNrXCIsZnVuY3Rpb24oKXthLiRhcHBseShmdW5jdGlvbigpe2UuJHNldFZpZXdWYWx1ZShjWzBdLmNoZWNrZWQpfSl9KTtlLiRyZW5kZXI9ZnVuY3Rpb24oKXtjWzBdLmNoZWNrZWQ9ZS4kdmlld1ZhbHVlfTtlLiRpc0VtcHR5PWZ1bmN0aW9uKGEpe3JldHVybiBhIT09Zn07ZS4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiBhPT09Zn0pO2UuJHBhcnNlcnMucHVzaChmdW5jdGlvbihhKXtyZXR1cm4gYT9mOmd9KX0saGlkZGVuOkUsYnV0dG9uOkUsc3VibWl0OkUscmVzZXQ6RSxmaWxlOkV9LFZlPVtcImJhZElucHV0XCJdLGpjPVtcIiRicm93c2VyXCIsXCIkc25pZmZlclwiLGZ1bmN0aW9uKGEsYyl7cmV0dXJue3Jlc3RyaWN0OlwiRVwiLHJlcXVpcmU6XCI/bmdNb2RlbFwiLFxubGluazpmdW5jdGlvbihkLGUsZixnKXtnJiYoU2NbSyhmLnR5cGUpXXx8U2MudGV4dCkoZCxlLGYsZyxjLGEpfX19XSx3Yj1cIm5nLXZhbGlkXCIseGI9XCJuZy1pbnZhbGlkXCIsT2E9XCJuZy1wcmlzdGluZVwiLHpiPVwibmctZGlydHlcIixXZT1bXCIkc2NvcGVcIixcIiRleGNlcHRpb25IYW5kbGVyXCIsXCIkYXR0cnNcIixcIiRlbGVtZW50XCIsXCIkcGFyc2VcIixcIiRhbmltYXRlXCIsZnVuY3Rpb24oYSxjLGQsZSxmLGcpe2Z1bmN0aW9uIGsoYSxjKXtjPWM/XCItXCIrbWIoYyxcIi1cIik6XCJcIjtnLnJlbW92ZUNsYXNzKGUsKGE/eGI6d2IpK2MpO2cuYWRkQ2xhc3MoZSwoYT93Yjp4YikrYyl9dGhpcy4kbW9kZWxWYWx1ZT10aGlzLiR2aWV3VmFsdWU9TnVtYmVyLk5hTjt0aGlzLiRwYXJzZXJzPVtdO3RoaXMuJGZvcm1hdHRlcnM9W107dGhpcy4kdmlld0NoYW5nZUxpc3RlbmVycz1bXTt0aGlzLiRwcmlzdGluZT0hMDt0aGlzLiRkaXJ0eT0hMTt0aGlzLiR2YWxpZD0hMDt0aGlzLiRpbnZhbGlkPSExO3RoaXMuJG5hbWU9XG5kLm5hbWU7dmFyIG09ZihkLm5nTW9kZWwpLGg9bS5hc3NpZ247aWYoIWgpdGhyb3cgQyhcIm5nTW9kZWxcIikoXCJub25hc3NpZ25cIixkLm5nTW9kZWwsaWEoZSkpO3RoaXMuJHJlbmRlcj1FO3RoaXMuJGlzRW1wdHk9ZnVuY3Rpb24oYSl7cmV0dXJuIHgoYSl8fFwiXCI9PT1hfHxudWxsPT09YXx8YSE9PWF9O3ZhciBsPWUuaW5oZXJpdGVkRGF0YShcIiRmb3JtQ29udHJvbGxlclwiKXx8eWIsbj0wLHA9dGhpcy4kZXJyb3I9e307ZS5hZGRDbGFzcyhPYSk7ayghMCk7dGhpcy4kc2V0VmFsaWRpdHk9ZnVuY3Rpb24oYSxjKXtwW2FdIT09IWMmJihjPyhwW2FdJiZuLS0sbnx8KGsoITApLHRoaXMuJHZhbGlkPSEwLHRoaXMuJGludmFsaWQ9ITEpKTooayghMSksdGhpcy4kaW52YWxpZD0hMCx0aGlzLiR2YWxpZD0hMSxuKyspLHBbYV09IWMsayhjLGEpLGwuJHNldFZhbGlkaXR5KGEsYyx0aGlzKSl9O3RoaXMuJHNldFByaXN0aW5lPWZ1bmN0aW9uKCl7dGhpcy4kZGlydHk9ITE7dGhpcy4kcHJpc3RpbmU9XG4hMDtnLnJlbW92ZUNsYXNzKGUsemIpO2cuYWRkQ2xhc3MoZSxPYSl9O3RoaXMuJHNldFZpZXdWYWx1ZT1mdW5jdGlvbihkKXt0aGlzLiR2aWV3VmFsdWU9ZDt0aGlzLiRwcmlzdGluZSYmKHRoaXMuJGRpcnR5PSEwLHRoaXMuJHByaXN0aW5lPSExLGcucmVtb3ZlQ2xhc3MoZSxPYSksZy5hZGRDbGFzcyhlLHpiKSxsLiRzZXREaXJ0eSgpKTtyKHRoaXMuJHBhcnNlcnMsZnVuY3Rpb24oYSl7ZD1hKGQpfSk7dGhpcy4kbW9kZWxWYWx1ZSE9PWQmJih0aGlzLiRtb2RlbFZhbHVlPWQsaChhLGQpLHIodGhpcy4kdmlld0NoYW5nZUxpc3RlbmVycyxmdW5jdGlvbihhKXt0cnl7YSgpfWNhdGNoKGQpe2MoZCl9fSkpfTt2YXIgcT10aGlzO2EuJHdhdGNoKGZ1bmN0aW9uKCl7dmFyIGM9bShhKTtpZihxLiRtb2RlbFZhbHVlIT09Yyl7dmFyIGQ9cS4kZm9ybWF0dGVycyxlPWQubGVuZ3RoO2ZvcihxLiRtb2RlbFZhbHVlPWM7ZS0tOyljPWRbZV0oYyk7cS4kdmlld1ZhbHVlIT09YyYmKHEuJHZpZXdWYWx1ZT1cbmMscS4kcmVuZGVyKCkpfXJldHVybiBjfSl9XSxHZD1mdW5jdGlvbigpe3JldHVybntyZXF1aXJlOltcIm5nTW9kZWxcIixcIl4/Zm9ybVwiXSxjb250cm9sbGVyOldlLGxpbms6ZnVuY3Rpb24oYSxjLGQsZSl7dmFyIGY9ZVswXSxnPWVbMV18fHliO2cuJGFkZENvbnRyb2woZik7YS4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7Zy4kcmVtb3ZlQ29udHJvbChmKX0pfX19LElkPWJhKHtyZXF1aXJlOlwibmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oYSxjLGQsZSl7ZS4kdmlld0NoYW5nZUxpc3RlbmVycy5wdXNoKGZ1bmN0aW9uKCl7YS4kZXZhbChkLm5nQ2hhbmdlKX0pfX0pLGtjPWZ1bmN0aW9uKCl7cmV0dXJue3JlcXVpcmU6XCI/bmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oYSxjLGQsZSl7aWYoZSl7ZC5yZXF1aXJlZD0hMDt2YXIgZj1mdW5jdGlvbihhKXtpZihkLnJlcXVpcmVkJiZlLiRpc0VtcHR5KGEpKWUuJHNldFZhbGlkaXR5KFwicmVxdWlyZWRcIiwhMSk7ZWxzZSByZXR1cm4gZS4kc2V0VmFsaWRpdHkoXCJyZXF1aXJlZFwiLFxuITApLGF9O2UuJGZvcm1hdHRlcnMucHVzaChmKTtlLiRwYXJzZXJzLnVuc2hpZnQoZik7ZC4kb2JzZXJ2ZShcInJlcXVpcmVkXCIsZnVuY3Rpb24oKXtmKGUuJHZpZXdWYWx1ZSl9KX19fX0sSGQ9ZnVuY3Rpb24oKXtyZXR1cm57cmVxdWlyZTpcIm5nTW9kZWxcIixsaW5rOmZ1bmN0aW9uKGEsYyxkLGUpe3ZhciBmPShhPS9cXC8oLiopXFwvLy5leGVjKGQubmdMaXN0KSkmJlJlZ0V4cChhWzFdKXx8ZC5uZ0xpc3R8fFwiLFwiO2UuJHBhcnNlcnMucHVzaChmdW5jdGlvbihhKXtpZigheChhKSl7dmFyIGM9W107YSYmcihhLnNwbGl0KGYpLGZ1bmN0aW9uKGEpe2EmJmMucHVzaChhYShhKSl9KTtyZXR1cm4gY319KTtlLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24oYSl7cmV0dXJuIEooYSk/YS5qb2luKFwiLCBcIik6dH0pO2UuJGlzRW1wdHk9ZnVuY3Rpb24oYSl7cmV0dXJuIWF8fCFhLmxlbmd0aH19fX0sWGU9L14odHJ1ZXxmYWxzZXxcXGQrKSQvLEpkPWZ1bmN0aW9uKCl7cmV0dXJue3ByaW9yaXR5OjEwMCxcbmNvbXBpbGU6ZnVuY3Rpb24oYSxjKXtyZXR1cm4gWGUudGVzdChjLm5nVmFsdWUpP2Z1bmN0aW9uKGEsYyxmKXtmLiRzZXQoXCJ2YWx1ZVwiLGEuJGV2YWwoZi5uZ1ZhbHVlKSl9OmZ1bmN0aW9uKGEsYyxmKXthLiR3YXRjaChmLm5nVmFsdWUsZnVuY3Rpb24oYSl7Zi4kc2V0KFwidmFsdWVcIixhKX0pfX19fSxqZD15YSh7Y29tcGlsZTpmdW5jdGlvbihhKXthLmFkZENsYXNzKFwibmctYmluZGluZ1wiKTtyZXR1cm4gZnVuY3Rpb24oYSxkLGUpe2QuZGF0YShcIiRiaW5kaW5nXCIsZS5uZ0JpbmQpO2EuJHdhdGNoKGUubmdCaW5kLGZ1bmN0aW9uKGEpe2QudGV4dChhPT10P1wiXCI6YSl9KX19fSksbGQ9W1wiJGludGVycG9sYXRlXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGMsZCxlKXtjPWEoZC5hdHRyKGUuJGF0dHIubmdCaW5kVGVtcGxhdGUpKTtkLmFkZENsYXNzKFwibmctYmluZGluZ1wiKS5kYXRhKFwiJGJpbmRpbmdcIixjKTtlLiRvYnNlcnZlKFwibmdCaW5kVGVtcGxhdGVcIixmdW5jdGlvbihhKXtkLnRleHQoYSl9KX19XSxcbmtkPVtcIiRzY2VcIixcIiRwYXJzZVwiLGZ1bmN0aW9uKGEsYyl7cmV0dXJue2NvbXBpbGU6ZnVuY3Rpb24oZCl7ZC5hZGRDbGFzcyhcIm5nLWJpbmRpbmdcIik7cmV0dXJuIGZ1bmN0aW9uKGQsZixnKXtmLmRhdGEoXCIkYmluZGluZ1wiLGcubmdCaW5kSHRtbCk7dmFyIGs9YyhnLm5nQmluZEh0bWwpO2QuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuKGsoZCl8fFwiXCIpLnRvU3RyaW5nKCl9LGZ1bmN0aW9uKGMpe2YuaHRtbChhLmdldFRydXN0ZWRIdG1sKGsoZCkpfHxcIlwiKX0pfX19fV0sbWQ9WWIoXCJcIiwhMCksb2Q9WWIoXCJPZGRcIiwwKSxuZD1ZYihcIkV2ZW5cIiwxKSxwZD15YSh7Y29tcGlsZTpmdW5jdGlvbihhLGMpe2MuJHNldChcIm5nQ2xvYWtcIix0KTthLnJlbW92ZUNsYXNzKFwibmctY2xvYWtcIil9fSkscWQ9W2Z1bmN0aW9uKCl7cmV0dXJue3Njb3BlOiEwLGNvbnRyb2xsZXI6XCJAXCIscHJpb3JpdHk6NTAwfX1dLGxjPXt9LFllPXtibHVyOiEwLGZvY3VzOiEwfTtyKFwiY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlbW92ZSBtb3VzZWVudGVyIG1vdXNlbGVhdmUga2V5ZG93biBrZXl1cCBrZXlwcmVzcyBzdWJtaXQgZm9jdXMgYmx1ciBjb3B5IGN1dCBwYXN0ZVwiLnNwbGl0KFwiIFwiKSxcbmZ1bmN0aW9uKGEpe3ZhciBjPXBhKFwibmctXCIrYSk7bGNbY109W1wiJHBhcnNlXCIsXCIkcm9vdFNjb3BlXCIsZnVuY3Rpb24oZCxlKXtyZXR1cm57Y29tcGlsZTpmdW5jdGlvbihmLGcpe3ZhciBrPWQoZ1tjXSk7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7ZC5vbihhLGZ1bmN0aW9uKGQpe3ZhciBmPWZ1bmN0aW9uKCl7ayhjLHskZXZlbnQ6ZH0pfTtZZVthXSYmZS4kJHBoYXNlP2MuJGV2YWxBc3luYyhmKTpjLiRhcHBseShmKX0pfX19fV19KTt2YXIgdGQ9W1wiJGFuaW1hdGVcIixmdW5jdGlvbihhKXtyZXR1cm57dHJhbnNjbHVkZTpcImVsZW1lbnRcIixwcmlvcml0eTo2MDAsdGVybWluYWw6ITAscmVzdHJpY3Q6XCJBXCIsJCR0bGI6ITAsbGluazpmdW5jdGlvbihjLGQsZSxmLGcpe3ZhciBrLG0saDtjLiR3YXRjaChlLm5nSWYsZnVuY3Rpb24oZil7VWEoZik/bXx8KG09Yy4kbmV3KCksZyhtLGZ1bmN0aW9uKGMpe2NbYy5sZW5ndGgrK109WC5jcmVhdGVDb21tZW50KFwiIGVuZCBuZ0lmOiBcIitlLm5nSWYrXG5cIiBcIik7az17Y2xvbmU6Y307YS5lbnRlcihjLGQucGFyZW50KCksZCl9KSk6KGgmJihoLnJlbW92ZSgpLGg9bnVsbCksbSYmKG0uJGRlc3Ryb3koKSxtPW51bGwpLGsmJihoPUViKGsuY2xvbmUpLGEubGVhdmUoaCxmdW5jdGlvbigpe2g9bnVsbH0pLGs9bnVsbCkpfSl9fX1dLHVkPVtcIiRodHRwXCIsXCIkdGVtcGxhdGVDYWNoZVwiLFwiJGFuY2hvclNjcm9sbFwiLFwiJGFuaW1hdGVcIixcIiRzY2VcIixmdW5jdGlvbihhLGMsZCxlLGYpe3JldHVybntyZXN0cmljdDpcIkVDQVwiLHByaW9yaXR5OjQwMCx0ZXJtaW5hbDohMCx0cmFuc2NsdWRlOlwiZWxlbWVudFwiLGNvbnRyb2xsZXI6VmEubm9vcCxjb21waWxlOmZ1bmN0aW9uKGcsayl7dmFyIG09ay5uZ0luY2x1ZGV8fGsuc3JjLGg9ay5vbmxvYWR8fFwiXCIsbD1rLmF1dG9zY3JvbGw7cmV0dXJuIGZ1bmN0aW9uKGcsayxxLHIsRil7dmFyIHU9MCx0LHcsUix6PWZ1bmN0aW9uKCl7dyYmKHcucmVtb3ZlKCksdz1udWxsKTt0JiYodC4kZGVzdHJveSgpLHQ9bnVsbCk7XG5SJiYoZS5sZWF2ZShSLGZ1bmN0aW9uKCl7dz1udWxsfSksdz1SLFI9bnVsbCl9O2cuJHdhdGNoKGYucGFyc2VBc1Jlc291cmNlVXJsKG0pLGZ1bmN0aW9uKGYpe3ZhciBtPWZ1bmN0aW9uKCl7IXkobCl8fGwmJiFnLiRldmFsKGwpfHxkKCl9LHE9Kyt1O2Y/KGEuZ2V0KGYse2NhY2hlOmN9KS5zdWNjZXNzKGZ1bmN0aW9uKGEpe2lmKHE9PT11KXt2YXIgYz1nLiRuZXcoKTtyLnRlbXBsYXRlPWE7YT1GKGMsZnVuY3Rpb24oYSl7eigpO2UuZW50ZXIoYSxudWxsLGssbSl9KTt0PWM7Uj1hO3QuJGVtaXQoXCIkaW5jbHVkZUNvbnRlbnRMb2FkZWRcIik7Zy4kZXZhbChoKX19KS5lcnJvcihmdW5jdGlvbigpe3E9PT11JiZ6KCl9KSxnLiRlbWl0KFwiJGluY2x1ZGVDb250ZW50UmVxdWVzdGVkXCIpKTooeigpLHIudGVtcGxhdGU9bnVsbCl9KX19fX1dLEtkPVtcIiRjb21waWxlXCIsZnVuY3Rpb24oYSl7cmV0dXJue3Jlc3RyaWN0OlwiRUNBXCIscHJpb3JpdHk6LTQwMCxyZXF1aXJlOlwibmdJbmNsdWRlXCIsXG5saW5rOmZ1bmN0aW9uKGMsZCxlLGYpe2QuaHRtbChmLnRlbXBsYXRlKTthKGQuY29udGVudHMoKSkoYyl9fX1dLHZkPXlhKHtwcmlvcml0eTo0NTAsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwcmU6ZnVuY3Rpb24oYSxjLGQpe2EuJGV2YWwoZC5uZ0luaXQpfX19fSksd2Q9eWEoe3Rlcm1pbmFsOiEwLHByaW9yaXR5OjFFM30pLHhkPVtcIiRsb2NhbGVcIixcIiRpbnRlcnBvbGF0ZVwiLGZ1bmN0aW9uKGEsYyl7dmFyIGQ9L3t9L2c7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixsaW5rOmZ1bmN0aW9uKGUsZixnKXt2YXIgaz1nLmNvdW50LG09Zy4kYXR0ci53aGVuJiZmLmF0dHIoZy4kYXR0ci53aGVuKSxoPWcub2Zmc2V0fHwwLGw9ZS4kZXZhbChtKXx8e30sbj17fSxwPWMuc3RhcnRTeW1ib2woKSxxPWMuZW5kU3ltYm9sKCkscz0vXndoZW4oTWludXMpPyguKykkLztyKGcsZnVuY3Rpb24oYSxjKXtzLnRlc3QoYykmJihsW0soYy5yZXBsYWNlKFwid2hlblwiLFwiXCIpLnJlcGxhY2UoXCJNaW51c1wiLFwiLVwiKSldPVxuZi5hdHRyKGcuJGF0dHJbY10pKX0pO3IobCxmdW5jdGlvbihhLGUpe25bZV09YyhhLnJlcGxhY2UoZCxwK2srXCItXCIraCtxKSl9KTtlLiR3YXRjaChmdW5jdGlvbigpe3ZhciBjPXBhcnNlRmxvYXQoZS4kZXZhbChrKSk7aWYoaXNOYU4oYykpcmV0dXJuXCJcIjtjIGluIGx8fChjPWEucGx1cmFsQ2F0KGMtaCkpO3JldHVybiBuW2NdKGUsZiwhMCl9LGZ1bmN0aW9uKGEpe2YudGV4dChhKX0pfX19XSx5ZD1bXCIkcGFyc2VcIixcIiRhbmltYXRlXCIsZnVuY3Rpb24oYSxjKXt2YXIgZD1DKFwibmdSZXBlYXRcIik7cmV0dXJue3RyYW5zY2x1ZGU6XCJlbGVtZW50XCIscHJpb3JpdHk6MUUzLHRlcm1pbmFsOiEwLCQkdGxiOiEwLGxpbms6ZnVuY3Rpb24oZSxmLGcsayxtKXt2YXIgaD1nLm5nUmVwZWF0LGw9aC5tYXRjaCgvXlxccyooW1xcc1xcU10rPylcXHMraW5cXHMrKFtcXHNcXFNdKz8pKD86XFxzK3RyYWNrXFxzK2J5XFxzKyhbXFxzXFxTXSs/KSk/XFxzKiQvKSxuLHAscSxzLHQsdSxBPXskaWQ6S2F9O2lmKCFsKXRocm93IGQoXCJpZXhwXCIsXG5oKTtnPWxbMV07az1sWzJdOyhsPWxbM10pPyhuPWEobCkscD1mdW5jdGlvbihhLGMsZCl7dSYmKEFbdV09YSk7QVt0XT1jO0EuJGluZGV4PWQ7cmV0dXJuIG4oZSxBKX0pOihxPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIEthKGMpfSxzPWZ1bmN0aW9uKGEpe3JldHVybiBhfSk7bD1nLm1hdGNoKC9eKD86KFtcXCRcXHddKyl8XFwoKFtcXCRcXHddKylcXHMqLFxccyooW1xcJFxcd10rKVxcKSkkLyk7aWYoIWwpdGhyb3cgZChcImlpZGV4cFwiLGcpO3Q9bFszXXx8bFsxXTt1PWxbMl07dmFyIHk9e307ZS4kd2F0Y2hDb2xsZWN0aW9uKGssZnVuY3Rpb24oYSl7dmFyIGcsayxsPWZbMF0sbixBPXt9LEIsSSxILHYsRSxDLHgsSj1bXTtpZihQYShhKSlDPWEsRT1wfHxxO2Vsc2V7RT1wfHxzO0M9W107Zm9yKEggaW4gYSlhLmhhc093blByb3BlcnR5KEgpJiZcIiRcIiE9SC5jaGFyQXQoMCkmJkMucHVzaChIKTtDLnNvcnQoKX1CPUMubGVuZ3RoO2s9Si5sZW5ndGg9Qy5sZW5ndGg7Zm9yKGc9MDtnPGs7ZysrKWlmKEg9YT09PVxuQz9nOkNbZ10sdj1hW0hdLG49RShILHYsZyksRGEobixcImB0cmFjayBieWAgaWRcIikseS5oYXNPd25Qcm9wZXJ0eShuKSl4PXlbbl0sZGVsZXRlIHlbbl0sQVtuXT14LEpbZ109eDtlbHNle2lmKEEuaGFzT3duUHJvcGVydHkobikpdGhyb3cgcihKLGZ1bmN0aW9uKGEpe2EmJmEuc2NvcGUmJih5W2EuaWRdPWEpfSksZChcImR1cGVzXCIsaCxuLG5hKHYpKTtKW2ddPXtpZDpufTtBW25dPSExfWZvcihIIGluIHkpeS5oYXNPd25Qcm9wZXJ0eShIKSYmKHg9eVtIXSxnPUViKHguY2xvbmUpLGMubGVhdmUoZykscihnLGZ1bmN0aW9uKGEpe2EuJCROR19SRU1PVkVEPSEwfSkseC5zY29wZS4kZGVzdHJveSgpKTtnPTA7Zm9yKGs9Qy5sZW5ndGg7ZzxrO2crKyl7SD1hPT09Qz9nOkNbZ107dj1hW0hdO3g9SltnXTtKW2ctMV0mJihsPUpbZy0xXS5jbG9uZVtKW2ctMV0uY2xvbmUubGVuZ3RoLTFdKTtpZih4LnNjb3BlKXtJPXguc2NvcGU7bj1sO2RvIG49bi5uZXh0U2libGluZzt3aGlsZShuJiZuLiQkTkdfUkVNT1ZFRCk7XG54LmNsb25lWzBdIT1uJiZjLm1vdmUoRWIoeC5jbG9uZSksbnVsbCx3KGwpKTtsPXguY2xvbmVbeC5jbG9uZS5sZW5ndGgtMV19ZWxzZSBJPWUuJG5ldygpO0lbdF09djt1JiYoSVt1XT1IKTtJLiRpbmRleD1nO0kuJGZpcnN0PTA9PT1nO0kuJGxhc3Q9Zz09PUItMTtJLiRtaWRkbGU9IShJLiRmaXJzdHx8SS4kbGFzdCk7SS4kb2RkPSEoSS4kZXZlbj0wPT09KGcmMSkpO3guc2NvcGV8fG0oSSxmdW5jdGlvbihhKXthW2EubGVuZ3RoKytdPVguY3JlYXRlQ29tbWVudChcIiBlbmQgbmdSZXBlYXQ6IFwiK2grXCIgXCIpO2MuZW50ZXIoYSxudWxsLHcobCkpO2w9YTt4LnNjb3BlPUk7eC5jbG9uZT1hO0FbeC5pZF09eH0pfXk9QX0pfX19XSx6ZD1bXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihjLGQsZSl7Yy4kd2F0Y2goZS5uZ1Nob3csZnVuY3Rpb24oYyl7YVtVYShjKT9cInJlbW92ZUNsYXNzXCI6XCJhZGRDbGFzc1wiXShkLFwibmctaGlkZVwiKX0pfX1dLHNkPVtcIiRhbmltYXRlXCIsXG5mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYyxkLGUpe2MuJHdhdGNoKGUubmdIaWRlLGZ1bmN0aW9uKGMpe2FbVWEoYyk/XCJhZGRDbGFzc1wiOlwicmVtb3ZlQ2xhc3NcIl0oZCxcIm5nLWhpZGVcIil9KX19XSxBZD15YShmdW5jdGlvbihhLGMsZCl7YS4kd2F0Y2goZC5uZ1N0eWxlLGZ1bmN0aW9uKGEsZCl7ZCYmYSE9PWQmJnIoZCxmdW5jdGlvbihhLGQpe2MuY3NzKGQsXCJcIil9KTthJiZjLmNzcyhhKX0sITApfSksQmQ9W1wiJGFuaW1hdGVcIixmdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6XCJFQVwiLHJlcXVpcmU6XCJuZ1N3aXRjaFwiLGNvbnRyb2xsZXI6W1wiJHNjb3BlXCIsZnVuY3Rpb24oKXt0aGlzLmNhc2VzPXt9fV0sbGluazpmdW5jdGlvbihjLGQsZSxmKXt2YXIgZz1bXSxrPVtdLG09W10saD1bXTtjLiR3YXRjaChlLm5nU3dpdGNofHxlLm9uLGZ1bmN0aW9uKGQpe3ZhciBuLHA7bj0wO2ZvcihwPW0ubGVuZ3RoO248cDsrK24pbVtuXS5yZW1vdmUoKTtuPW0ubGVuZ3RoPTA7Zm9yKHA9XG5oLmxlbmd0aDtuPHA7KytuKXt2YXIgcT1rW25dO2hbbl0uJGRlc3Ryb3koKTttW25dPXE7YS5sZWF2ZShxLGZ1bmN0aW9uKCl7bS5zcGxpY2UobiwxKX0pfWsubGVuZ3RoPTA7aC5sZW5ndGg9MDtpZihnPWYuY2FzZXNbXCIhXCIrZF18fGYuY2FzZXNbXCI/XCJdKWMuJGV2YWwoZS5jaGFuZ2UpLHIoZyxmdW5jdGlvbihkKXt2YXIgZT1jLiRuZXcoKTtoLnB1c2goZSk7ZC50cmFuc2NsdWRlKGUsZnVuY3Rpb24oYyl7dmFyIGU9ZC5lbGVtZW50O2sucHVzaChjKTthLmVudGVyKGMsZS5wYXJlbnQoKSxlKX0pfSl9KX19fV0sQ2Q9eWEoe3RyYW5zY2x1ZGU6XCJlbGVtZW50XCIscHJpb3JpdHk6ODAwLHJlcXVpcmU6XCJebmdTd2l0Y2hcIixsaW5rOmZ1bmN0aW9uKGEsYyxkLGUsZil7ZS5jYXNlc1tcIiFcIitkLm5nU3dpdGNoV2hlbl09ZS5jYXNlc1tcIiFcIitkLm5nU3dpdGNoV2hlbl18fFtdO2UuY2FzZXNbXCIhXCIrZC5uZ1N3aXRjaFdoZW5dLnB1c2goe3RyYW5zY2x1ZGU6ZixlbGVtZW50OmN9KX19KSxEZD1cbnlhKHt0cmFuc2NsdWRlOlwiZWxlbWVudFwiLHByaW9yaXR5OjgwMCxyZXF1aXJlOlwiXm5nU3dpdGNoXCIsbGluazpmdW5jdGlvbihhLGMsZCxlLGYpe2UuY2FzZXNbXCI/XCJdPWUuY2FzZXNbXCI/XCJdfHxbXTtlLmNhc2VzW1wiP1wiXS5wdXNoKHt0cmFuc2NsdWRlOmYsZWxlbWVudDpjfSl9fSksRmQ9eWEoe2xpbms6ZnVuY3Rpb24oYSxjLGQsZSxmKXtpZighZil0aHJvdyBDKFwibmdUcmFuc2NsdWRlXCIpKFwib3JwaGFuXCIsaWEoYykpO2YoZnVuY3Rpb24oYSl7Yy5lbXB0eSgpO2MuYXBwZW5kKGEpfSl9fSksZmQ9W1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6XCJFXCIsdGVybWluYWw6ITAsY29tcGlsZTpmdW5jdGlvbihjLGQpe1widGV4dC9uZy10ZW1wbGF0ZVwiPT1kLnR5cGUmJmEucHV0KGQuaWQsY1swXS50ZXh0KX19fV0sWmU9QyhcIm5nT3B0aW9uc1wiKSxFZD1iYSh7dGVybWluYWw6ITB9KSxnZD1bXCIkY29tcGlsZVwiLFwiJHBhcnNlXCIsZnVuY3Rpb24oYSxjKXt2YXIgZD1cbi9eXFxzKihbXFxzXFxTXSs/KSg/Olxccythc1xccysoW1xcc1xcU10rPykpPyg/Olxccytncm91cFxccytieVxccysoW1xcc1xcU10rPykpP1xccytmb3JcXHMrKD86KFtcXCRcXHddW1xcJFxcd10qKXwoPzpcXChcXHMqKFtcXCRcXHddW1xcJFxcd10qKVxccyosXFxzKihbXFwkXFx3XVtcXCRcXHddKilcXHMqXFwpKSlcXHMraW5cXHMrKFtcXHNcXFNdKz8pKD86XFxzK3RyYWNrXFxzK2J5XFxzKyhbXFxzXFxTXSs/KSk/JC8sZT17JHNldFZpZXdWYWx1ZTpFfTtyZXR1cm57cmVzdHJpY3Q6XCJFXCIscmVxdWlyZTpbXCJzZWxlY3RcIixcIj9uZ01vZGVsXCJdLGNvbnRyb2xsZXI6W1wiJGVsZW1lbnRcIixcIiRzY29wZVwiLFwiJGF0dHJzXCIsZnVuY3Rpb24oYSxjLGQpe3ZhciBtPXRoaXMsaD17fSxsPWUsbjttLmRhdGFib3VuZD1kLm5nTW9kZWw7bS5pbml0PWZ1bmN0aW9uKGEsYyxkKXtsPWE7bj1kfTttLmFkZE9wdGlvbj1mdW5jdGlvbihjKXtEYShjLCdcIm9wdGlvbiB2YWx1ZVwiJyk7aFtjXT0hMDtsLiR2aWV3VmFsdWU9PWMmJihhLnZhbChjKSxuLnBhcmVudCgpJiZuLnJlbW92ZSgpKX07XG5tLnJlbW92ZU9wdGlvbj1mdW5jdGlvbihhKXt0aGlzLmhhc09wdGlvbihhKSYmKGRlbGV0ZSBoW2FdLGwuJHZpZXdWYWx1ZT09YSYmdGhpcy5yZW5kZXJVbmtub3duT3B0aW9uKGEpKX07bS5yZW5kZXJVbmtub3duT3B0aW9uPWZ1bmN0aW9uKGMpe2M9XCI/IFwiK0thKGMpK1wiID9cIjtuLnZhbChjKTthLnByZXBlbmQobik7YS52YWwoYyk7bi5wcm9wKFwic2VsZWN0ZWRcIiwhMCl9O20uaGFzT3B0aW9uPWZ1bmN0aW9uKGEpe3JldHVybiBoLmhhc093blByb3BlcnR5KGEpfTtjLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXttLnJlbmRlclVua25vd25PcHRpb249RX0pfV0sbGluazpmdW5jdGlvbihlLGcsayxtKXtmdW5jdGlvbiBoKGEsYyxkLGUpe2QuJHJlbmRlcj1mdW5jdGlvbigpe3ZhciBhPWQuJHZpZXdWYWx1ZTtlLmhhc09wdGlvbihhKT8odi5wYXJlbnQoKSYmdi5yZW1vdmUoKSxjLnZhbChhKSxcIlwiPT09YSYmdS5wcm9wKFwic2VsZWN0ZWRcIiwhMCkpOngoYSkmJnU/Yy52YWwoXCJcIik6ZS5yZW5kZXJVbmtub3duT3B0aW9uKGEpfTtcbmMub24oXCJjaGFuZ2VcIixmdW5jdGlvbigpe2EuJGFwcGx5KGZ1bmN0aW9uKCl7di5wYXJlbnQoKSYmdi5yZW1vdmUoKTtkLiRzZXRWaWV3VmFsdWUoYy52YWwoKSl9KX0pfWZ1bmN0aW9uIGwoYSxjLGQpe3ZhciBlO2QuJHJlbmRlcj1mdW5jdGlvbigpe3ZhciBhPW5ldyBiYihkLiR2aWV3VmFsdWUpO3IoYy5maW5kKFwib3B0aW9uXCIpLGZ1bmN0aW9uKGMpe2Muc2VsZWN0ZWQ9eShhLmdldChjLnZhbHVlKSl9KX07YS4kd2F0Y2goZnVuY3Rpb24oKXtBYShlLGQuJHZpZXdWYWx1ZSl8fChlPWhhKGQuJHZpZXdWYWx1ZSksZC4kcmVuZGVyKCkpfSk7Yy5vbihcImNoYW5nZVwiLGZ1bmN0aW9uKCl7YS4kYXBwbHkoZnVuY3Rpb24oKXt2YXIgYT1bXTtyKGMuZmluZChcIm9wdGlvblwiKSxmdW5jdGlvbihjKXtjLnNlbGVjdGVkJiZhLnB1c2goYy52YWx1ZSl9KTtkLiRzZXRWaWV3VmFsdWUoYSl9KX0pfWZ1bmN0aW9uIG4oZSxmLGcpe2Z1bmN0aW9uIGsoKXt2YXIgYT17XCJcIjpbXX0sYz1bXCJcIl0sZCxoLFxucyx0LHY7cz1nLiRtb2RlbFZhbHVlO3Q9dyhlKXx8W107dmFyIEU9bj9aYih0KTp0LEksTSxCO009e307Qj0hMTtpZihxKWlmKGg9Zy4kbW9kZWxWYWx1ZSx4JiZKKGgpKWZvcihCPW5ldyBiYihbXSksZD17fSx2PTA7djxoLmxlbmd0aDt2KyspZFttXT1oW3ZdLEIucHV0KHgoZSxkKSxoW3ZdKTtlbHNlIEI9bmV3IGJiKGgpO3Y9Qjt2YXIgRCxLO2ZvcihCPTA7ST1FLmxlbmd0aCxCPEk7QisrKXtoPUI7aWYobil7aD1FW0JdO2lmKFwiJFwiPT09aC5jaGFyQXQoMCkpY29udGludWU7TVtuXT1ofU1bbV09dFtoXTtkPXIoZSxNKXx8XCJcIjsoaD1hW2RdKXx8KGg9YVtkXT1bXSxjLnB1c2goZCkpO3E/ZD15KHYucmVtb3ZlKHg/eChlLE0pOnUoZSxNKSkpOih4PyhkPXt9LGRbbV09cyxkPXgoZSxkKT09PXgoZSxNKSk6ZD1zPT09dShlLE0pLHY9dnx8ZCk7RD1sKGUsTSk7RD15KEQpP0Q6XCJcIjtoLnB1c2goe2lkOng/eChlLE0pOm4/RVtCXTpCLGxhYmVsOkQsc2VsZWN0ZWQ6ZH0pfXF8fChGfHxudWxsPT09XG5zP2FbXCJcIl0udW5zaGlmdCh7aWQ6XCJcIixsYWJlbDpcIlwiLHNlbGVjdGVkOiF2fSk6dnx8YVtcIlwiXS51bnNoaWZ0KHtpZDpcIj9cIixsYWJlbDpcIlwiLHNlbGVjdGVkOiEwfSkpO009MDtmb3IoRT1jLmxlbmd0aDtNPEU7TSsrKXtkPWNbTV07aD1hW2RdO3oubGVuZ3RoPD1NPyhzPXtlbGVtZW50OkMuY2xvbmUoKS5hdHRyKFwibGFiZWxcIixkKSxsYWJlbDpoLmxhYmVsfSx0PVtzXSx6LnB1c2godCksZi5hcHBlbmQocy5lbGVtZW50KSk6KHQ9eltNXSxzPXRbMF0scy5sYWJlbCE9ZCYmcy5lbGVtZW50LmF0dHIoXCJsYWJlbFwiLHMubGFiZWw9ZCkpO0Q9bnVsbDtCPTA7Zm9yKEk9aC5sZW5ndGg7QjxJO0IrKylkPWhbQl0sKHY9dFtCKzFdKT8oRD12LmVsZW1lbnQsdi5sYWJlbCE9PWQubGFiZWwmJkQudGV4dCh2LmxhYmVsPWQubGFiZWwpLHYuaWQhPT1kLmlkJiZELnZhbCh2LmlkPWQuaWQpLERbMF0uc2VsZWN0ZWQhPT1kLnNlbGVjdGVkJiYoRC5wcm9wKFwic2VsZWN0ZWRcIix2LnNlbGVjdGVkPWQuc2VsZWN0ZWQpLFxuUSYmRC5wcm9wKFwic2VsZWN0ZWRcIix2LnNlbGVjdGVkKSkpOihcIlwiPT09ZC5pZCYmRj9LPUY6KEs9QS5jbG9uZSgpKS52YWwoZC5pZCkucHJvcChcInNlbGVjdGVkXCIsZC5zZWxlY3RlZCkuYXR0cihcInNlbGVjdGVkXCIsZC5zZWxlY3RlZCkudGV4dChkLmxhYmVsKSx0LnB1c2goe2VsZW1lbnQ6SyxsYWJlbDpkLmxhYmVsLGlkOmQuaWQsc2VsZWN0ZWQ6ZC5zZWxlY3RlZH0pLHAuYWRkT3B0aW9uKGQubGFiZWwsSyksRD9ELmFmdGVyKEspOnMuZWxlbWVudC5hcHBlbmQoSyksRD1LKTtmb3IoQisrO3QubGVuZ3RoPkI7KWQ9dC5wb3AoKSxwLnJlbW92ZU9wdGlvbihkLmxhYmVsKSxkLmVsZW1lbnQucmVtb3ZlKCl9Zm9yKDt6Lmxlbmd0aD5NOyl6LnBvcCgpWzBdLmVsZW1lbnQucmVtb3ZlKCl9dmFyIGg7aWYoIShoPXMubWF0Y2goZCkpKXRocm93IFplKFwiaWV4cFwiLHMsaWEoZikpO3ZhciBsPWMoaFsyXXx8aFsxXSksbT1oWzRdfHxoWzZdLG49aFs1XSxyPWMoaFszXXx8XCJcIiksdT1jKGhbMl0/XG5oWzFdOm0pLHc9YyhoWzddKSx4PWhbOF0/YyhoWzhdKTpudWxsLHo9W1t7ZWxlbWVudDpmLGxhYmVsOlwiXCJ9XV07RiYmKGEoRikoZSksRi5yZW1vdmVDbGFzcyhcIm5nLXNjb3BlXCIpLEYucmVtb3ZlKCkpO2YuZW1wdHkoKTtmLm9uKFwiY2hhbmdlXCIsZnVuY3Rpb24oKXtlLiRhcHBseShmdW5jdGlvbigpe3ZhciBhLGM9dyhlKXx8W10sZD17fSxoLGwscCxyLHMsdix5O2lmKHEpZm9yKGw9W10scj0wLHY9ei5sZW5ndGg7cjx2O3IrKylmb3IoYT16W3JdLHA9MSxzPWEubGVuZ3RoO3A8cztwKyspe2lmKChoPWFbcF0uZWxlbWVudClbMF0uc2VsZWN0ZWQpe2g9aC52YWwoKTtuJiYoZFtuXT1oKTtpZih4KWZvcih5PTA7eTxjLmxlbmd0aCYmKGRbbV09Y1t5XSx4KGUsZCkhPWgpO3krKyk7ZWxzZSBkW21dPWNbaF07bC5wdXNoKHUoZSxkKSl9fWVsc2UgaWYoaD1mLnZhbCgpLFwiP1wiPT1oKWw9dDtlbHNlIGlmKFwiXCI9PT1oKWw9bnVsbDtlbHNlIGlmKHgpZm9yKHk9MDt5PGMubGVuZ3RoO3krKyl7aWYoZFttXT1cbmNbeV0seChlLGQpPT1oKXtsPXUoZSxkKTticmVha319ZWxzZSBkW21dPWNbaF0sbiYmKGRbbl09aCksbD11KGUsZCk7Zy4kc2V0Vmlld1ZhbHVlKGwpO2soKX0pfSk7Zy4kcmVuZGVyPWs7ZS4kd2F0Y2hDb2xsZWN0aW9uKHcsayk7ZS4kd2F0Y2hDb2xsZWN0aW9uKGZ1bmN0aW9uKCl7dmFyIGE9e30sYz13KGUpO2lmKGMpe2Zvcih2YXIgZD1BcnJheShjLmxlbmd0aCksZj0wLGc9Yy5sZW5ndGg7ZjxnO2YrKylhW21dPWNbZl0sZFtmXT1sKGUsYSk7cmV0dXJuIGR9fSxrKTtxJiZlLiR3YXRjaENvbGxlY3Rpb24oZnVuY3Rpb24oKXtyZXR1cm4gZy4kbW9kZWxWYWx1ZX0sayl9aWYobVsxXSl7dmFyIHA9bVswXTttPW1bMV07dmFyIHE9ay5tdWx0aXBsZSxzPWsubmdPcHRpb25zLEY9ITEsdSxBPXcoWC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpKSxDPXcoWC5jcmVhdGVFbGVtZW50KFwib3B0Z3JvdXBcIikpLHY9QS5jbG9uZSgpO2s9MDtmb3IodmFyIHo9Zy5jaGlsZHJlbigpLEU9ei5sZW5ndGg7azxcbkU7aysrKWlmKFwiXCI9PT16W2tdLnZhbHVlKXt1PUY9ei5lcShrKTticmVha31wLmluaXQobSxGLHYpO3EmJihtLiRpc0VtcHR5PWZ1bmN0aW9uKGEpe3JldHVybiFhfHwwPT09YS5sZW5ndGh9KTtzP24oZSxnLG0pOnE/bChlLGcsbSk6aChlLGcsbSxwKX19fX1dLGlkPVtcIiRpbnRlcnBvbGF0ZVwiLGZ1bmN0aW9uKGEpe3ZhciBjPXthZGRPcHRpb246RSxyZW1vdmVPcHRpb246RX07cmV0dXJue3Jlc3RyaWN0OlwiRVwiLHByaW9yaXR5OjEwMCxjb21waWxlOmZ1bmN0aW9uKGQsZSl7aWYoeChlLnZhbHVlKSl7dmFyIGY9YShkLnRleHQoKSwhMCk7Znx8ZS4kc2V0KFwidmFsdWVcIixkLnRleHQoKSl9cmV0dXJuIGZ1bmN0aW9uKGEsZCxlKXt2YXIgaD1kLnBhcmVudCgpLGw9aC5kYXRhKFwiJHNlbGVjdENvbnRyb2xsZXJcIil8fGgucGFyZW50KCkuZGF0YShcIiRzZWxlY3RDb250cm9sbGVyXCIpO2wmJmwuZGF0YWJvdW5kP2QucHJvcChcInNlbGVjdGVkXCIsITEpOmw9YztmP2EuJHdhdGNoKGYsZnVuY3Rpb24oYSxcbmMpe2UuJHNldChcInZhbHVlXCIsYSk7YSE9PWMmJmwucmVtb3ZlT3B0aW9uKGMpO2wuYWRkT3B0aW9uKGEpfSk6bC5hZGRPcHRpb24oZS52YWx1ZSk7ZC5vbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtsLnJlbW92ZU9wdGlvbihlLnZhbHVlKX0pfX19fV0saGQ9YmEoe3Jlc3RyaWN0OlwiRVwiLHRlcm1pbmFsOiEwfSk7Vy5hbmd1bGFyLmJvb3RzdHJhcD9jb25zb2xlLmxvZyhcIldBUk5JTkc6IFRyaWVkIHRvIGxvYWQgYW5ndWxhciBtb3JlIHRoYW4gb25jZS5cIik6KChFYT1XLmpRdWVyeSkmJkVhLmZuLm9uPyh3PUVhLEQoRWEuZm4se3Njb3BlOkxhLnNjb3BlLGlzb2xhdGVTY29wZTpMYS5pc29sYXRlU2NvcGUsY29udHJvbGxlcjpMYS5jb250cm9sbGVyLGluamVjdG9yOkxhLmluamVjdG9yLGluaGVyaXRlZERhdGE6TGEuaW5oZXJpdGVkRGF0YX0pLEdiKFwicmVtb3ZlXCIsITAsITAsITEpLEdiKFwiZW1wdHlcIiwhMSwhMSwhMSksR2IoXCJodG1sXCIsITEsITEsITApKTp3PVMsVmEuZWxlbWVudD13LFxuJGMoVmEpLHcoWCkucmVhZHkoZnVuY3Rpb24oKXtYYyhYLGZjKX0pKX0pKHdpbmRvdyxkb2N1bWVudCk7IXdpbmRvdy5hbmd1bGFyLiQkY3NwKCkmJndpbmRvdy5hbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQpLmZpbmQoXCJoZWFkXCIpLnByZXBlbmQoJzxzdHlsZSB0eXBlPVwidGV4dC9jc3NcIj5AY2hhcnNldCBcIlVURi04XCI7W25nXFxcXDpjbG9ha10sW25nLWNsb2FrXSxbZGF0YS1uZy1jbG9ha10sW3gtbmctY2xvYWtdLC5uZy1jbG9haywueC1uZy1jbG9haywubmctaGlkZXtkaXNwbGF5Om5vbmUgIWltcG9ydGFudDt9bmdcXFxcOmZvcm17ZGlzcGxheTpibG9jazt9Lm5nLWFuaW1hdGUtYmxvY2stdHJhbnNpdGlvbnN7dHJhbnNpdGlvbjowcyBhbGwhaW1wb3J0YW50Oy13ZWJraXQtdHJhbnNpdGlvbjowcyBhbGwhaW1wb3J0YW50O30ubmctaGlkZS1hZGQtYWN0aXZlLC5uZy1oaWRlLXJlbW92ZXtkaXNwbGF5OmJsb2NrIWltcG9ydGFudDt9PC9zdHlsZT4nKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFuZ3VsYXIubWluLmpzLm1hcFxuXG47IGJyb3dzZXJpZnlfc2hpbV9fZGVmaW5lX19tb2R1bGVfX2V4cG9ydF9fKHR5cGVvZiBhbmd1bGFyICE9IFwidW5kZWZpbmVkXCIgPyBhbmd1bGFyIDogd2luZG93LmFuZ3VsYXIpO1xuXG59KS5jYWxsKGdsb2JhbCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBmdW5jdGlvbiBkZWZpbmVFeHBvcnQoZXgpIHsgbW9kdWxlLmV4cG9ydHMgPSBleDsgfSk7XG5cbn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KSIsIihmdW5jdGlvbiAoZ2xvYmFsKXtcblxuOyByZXF1aXJlKFwiZmFtb3VzLXBvbHlmaWxsc1wiKTtcbnJlcXVpcmUoXCIvaG9tZS9jb2Rpby93b3Jrc3BhY2UvYm93ZXJfY29tcG9uZW50cy9mYW1vdXMvZGlzdC9mYW1vdXMtZ2xvYmFsLm1pbi5qc1wiKTtcbnJlcXVpcmUoXCIvaG9tZS9jb2Rpby93b3Jrc3BhY2UvYm93ZXJfY29tcG9uZW50cy9hbmd1bGFyL2FuZ3VsYXIubWluLmpzXCIpO1xucmVxdWlyZShcIi9ob21lL2NvZGlvL3dvcmtzcGFjZS9ib3dlcl9jb21wb25lbnRzL2FuZ3VsYXItYW5pbWF0ZS9hbmd1bGFyLWFuaW1hdGUubWluLmpzXCIpO1xucmVxdWlyZShcIi9ob21lL2NvZGlvL3dvcmtzcGFjZS9ib3dlcl9jb21wb25lbnRzL2FuZ3VsYXItc2FuaXRpemUvYW5ndWxhci1zYW5pdGl6ZS5taW4uanNcIik7XG5yZXF1aXJlKFwiL2hvbWUvY29kaW8vd29ya3NwYWNlL2Jvd2VyX2NvbXBvbmVudHMvYW5ndWxhci11aS1yb3V0ZXIvcmVsZWFzZS9hbmd1bGFyLXVpLXJvdXRlci5taW4uanNcIik7XG47X19icm93c2VyaWZ5X3NoaW1fcmVxdWlyZV9fPXJlcXVpcmU7KGZ1bmN0aW9uIGJyb3dzZXJpZnlTaGltKG1vZHVsZSwgZGVmaW5lLCByZXF1aXJlKSB7XG4vKipcbiAqIGZhbW91cy1hbmd1bGFyIC0gQnJpbmcgc3RydWN0dXJlIHRvIHlvdXIgRmFtby51cyBhcHBzIHdpdGggdGhlIHBvd2VyIG9mIEFuZ3VsYXJKUy4gRmFtby51cy9Bbmd1bGFyIGludGVncmF0ZXMgc2VhbWxlc3NseSB3aXRoIGV4aXN0aW5nIEFuZ3VsYXIgYW5kIEZhbW8udXMgYXBwcy5cbiAqIEB2ZXJzaW9uIHYwLjUuMFxuICogQGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL0ZhbW91cy9mYW1vdXMtYW5ndWxhclxuICogQGxpY2Vuc2UgTVBMIHYyLjBcbiAqL1xuXCJ1c2Ugc3RyaWN0XCI7dmFyIG5nRmFtZUFwcD1hbmd1bGFyLm1vZHVsZShcImZhbW91cy5hbmd1bGFyXCIsW10pO25nRmFtZUFwcC5wcm92aWRlcihcIiRmYW1vdXNcIixmdW5jdGlvbigpe3ZhciBlPXtcImZhbW91cy9jb3JlL0NvbnRleHRcIjpmYW1vdXMuY29yZS5Db250ZXh0LFwiZmFtb3VzL2NvcmUvRWxlbWVudEFsbG9jYXRvclwiOmZhbW91cy5jb3JlLkVsZW1lbnRBbGxvY2F0b3IsXCJmYW1vdXMvY29yZS9FbmdpbmVcIjpmYW1vdXMuY29yZS5FbmdpbmUsXCJmYW1vdXMvY29yZS9FbnRpdHlcIjpmYW1vdXMuY29yZS5FbnRpdHksXCJmYW1vdXMvY29yZS9FdmVudEVtaXR0ZXJcIjpmYW1vdXMuY29yZS5FdmVudEVtaXR0ZXIsXCJmYW1vdXMvY29yZS9FdmVudEhhbmRsZXJcIjpmYW1vdXMuY29yZS5FdmVudEhhbmRsZXIsXCJmYW1vdXMvY29yZS9Hcm91cFwiOmZhbW91cy5jb3JlLkdyb3VwLFwiZmFtb3VzL2NvcmUvTW9kaWZpZXJcIjpmYW1vdXMuY29yZS5Nb2RpZmllcixcImZhbW91cy9jb3JlL09wdGlvbnNNYW5hZ2VyXCI6ZmFtb3VzLmNvcmUuT3B0aW9uc01hbmFnZXIsXCJmYW1vdXMvY29yZS9SZW5kZXJOb2RlXCI6ZmFtb3VzLmNvcmUuUmVuZGVyTm9kZSxcImZhbW91cy9jb3JlL1NjZW5lXCI6ZmFtb3VzLmNvcmUuU2NlbmUsXCJmYW1vdXMvY29yZS9TcGVjUGFyc2VyXCI6ZmFtb3VzLmNvcmUuU3BlY1BhcnNlcixcImZhbW91cy9jb3JlL1N1cmZhY2VcIjpmYW1vdXMuY29yZS5TdXJmYWNlLFwiZmFtb3VzL2NvcmUvVHJhbnNmb3JtXCI6ZmFtb3VzLmNvcmUuVHJhbnNmb3JtLFwiZmFtb3VzL2NvcmUvVmlld1wiOmZhbW91cy5jb3JlLlZpZXcsXCJmYW1vdXMvY29yZS9WaWV3U2VxdWVuY2VcIjpmYW1vdXMuY29yZS5WaWV3U2VxdWVuY2UsXCJmYW1vdXMvZXZlbnRzL0V2ZW50QXJiaXRlclwiOmZhbW91cy5ldmVudHMuRXZlbnRBcmJpdGVyLFwiZmFtb3VzL2V2ZW50cy9FdmVudEZpbHRlclwiOmZhbW91cy5ldmVudHMuRXZlbnRGaWx0ZXIsXCJmYW1vdXMvZXZlbnRzL0V2ZW50TWFwcGVyXCI6ZmFtb3VzLmV2ZW50cy5FdmVudE1hcHBlcixcImZhbW91cy9pbnB1dHMvRmFzdENsaWNrXCI6ZmFtb3VzLmlucHV0cy5GYXN0Q2xpY2ssXCJmYW1vdXMvaW5wdXRzL0dlbmVyaWNTeW5jXCI6ZmFtb3VzLmlucHV0cy5HZW5lcmljU3luYyxcImZhbW91cy9pbnB1dHMvTW91c2VTeW5jXCI6ZmFtb3VzLmlucHV0cy5Nb3VzZVN5bmMsXCJmYW1vdXMvaW5wdXRzL1BpbmNoU3luY1wiOmZhbW91cy5pbnB1dHMuUGluY2hTeW5jLFwiZmFtb3VzL2lucHV0cy9Sb3RhdGVTeW5jXCI6ZmFtb3VzLmlucHV0cy5Sb3RhdGVTeW5jLFwiZmFtb3VzL2lucHV0cy9TY2FsZVN5bmNcIjpmYW1vdXMuaW5wdXRzLlNjYWxlU3luYyxcImZhbW91cy9pbnB1dHMvU2Nyb2xsU3luY1wiOmZhbW91cy5pbnB1dHMuU2Nyb2xsU3luYyxcImZhbW91cy9pbnB1dHMvVG91Y2hTeW5jXCI6ZmFtb3VzLmlucHV0cy5Ub3VjaFN5bmMsXCJmYW1vdXMvaW5wdXRzL1RvdWNoVHJhY2tlclwiOmZhbW91cy5pbnB1dHMuVG91Y2hUcmFja2VyLFwiZmFtb3VzL2lucHV0cy9Ud29GaW5nZXJTeW5jXCI6ZmFtb3VzLmlucHV0cy5Ud29GaW5nZXJTeW5jLFwiZmFtb3VzL21hdGgvTWF0cml4XCI6ZmFtb3VzLm1hdGguTWF0cml4LFwiZmFtb3VzL21hdGgvUXVhdGVybmlvblwiOmZhbW91cy5tYXRoLlF1YXRlcm5pb24sXCJmYW1vdXMvbWF0aC9SYW5kb21cIjpmYW1vdXMubWF0aC5SYW5kb20sXCJmYW1vdXMvbWF0aC9VdGlsaXRpZXNcIjpmYW1vdXMubWF0aC5VdGlsaXRpZXMsXCJmYW1vdXMvbWF0aC9WZWN0b3JcIjpmYW1vdXMubWF0aC5WZWN0b3IsXCJmYW1vdXMvbW9kaWZpZXJzL0RyYWdnYWJsZVwiOmZhbW91cy5tb2RpZmllcnMuRHJhZ2dhYmxlLFwiZmFtb3VzL21vZGlmaWVycy9GYWRlclwiOmZhbW91cy5tb2RpZmllcnMuRmFkZXIsXCJmYW1vdXMvbW9kaWZpZXJzL01vZGlmaWVyQ2hhaW5cIjpmYW1vdXMubW9kaWZpZXJzLk1vZGlmaWVyQ2hhaW4sXCJmYW1vdXMvbW9kaWZpZXJzL1N0YXRlTW9kaWZpZXJcIjpmYW1vdXMubW9kaWZpZXJzLlN0YXRlTW9kaWZpZXIsXCJmYW1vdXMvc3VyZmFjZXMvQ2FudmFzU3VyZmFjZVwiOmZhbW91cy5zdXJmYWNlcy5DYW52YXNTdXJmYWNlLFwiZmFtb3VzL3N1cmZhY2VzL0NvbnRhaW5lclN1cmZhY2VcIjpmYW1vdXMuc3VyZmFjZXMuQ29udGFpbmVyU3VyZmFjZSxcImZhbW91cy9zdXJmYWNlcy9Gb3JtQ29udGFpbmVyU3VyZmFjZVwiOmZhbW91cy5zdXJmYWNlcy5Gb3JtQ29udGFpbmVyU3VyZmFjZSxcImZhbW91cy9zdXJmYWNlcy9JbWFnZVN1cmZhY2VcIjpmYW1vdXMuc3VyZmFjZXMuSW1hZ2VTdXJmYWNlLFwiZmFtb3VzL3N1cmZhY2VzL0lucHV0U3VyZmFjZVwiOmZhbW91cy5zdXJmYWNlcy5JbnB1dFN1cmZhY2UsXCJmYW1vdXMvc3VyZmFjZXMvU3VibWl0SW5wdXRTdXJmYWNlXCI6ZmFtb3VzLnN1cmZhY2VzLlN1Ym1pdElucHV0U3VyZmFjZSxcImZhbW91cy9zdXJmYWNlcy9UZXh0YXJlYVN1cmZhY2VcIjpmYW1vdXMuc3VyZmFjZXMuVGV4dGFyZWFTdXJmYWNlLFwiZmFtb3VzL3N1cmZhY2VzL1ZpZGVvU3VyZmFjZVwiOmZhbW91cy5zdXJmYWNlcy5WaWRlb1N1cmZhY2UsXCJmYW1vdXMvdHJhbnNpdGlvbnMvQ2FjaGVkTWFwXCI6ZmFtb3VzLnRyYW5zaXRpb25zLkNhY2hlZE1hcCxcImZhbW91cy90cmFuc2l0aW9ucy9FYXNpbmdcIjpmYW1vdXMudHJhbnNpdGlvbnMuRWFzaW5nLFwiZmFtb3VzL3RyYW5zaXRpb25zL011bHRpcGxlVHJhbnNpdGlvblwiOmZhbW91cy50cmFuc2l0aW9ucy5NdWx0aXBsZVRyYW5zaXRpb24sXCJmYW1vdXMvdHJhbnNpdGlvbnMvU25hcFRyYW5zaXRpb25cIjpmYW1vdXMudHJhbnNpdGlvbnMuU25hcFRyYW5zaXRpb24sXCJmYW1vdXMvdHJhbnNpdGlvbnMvU3ByaW5nVHJhbnNpdGlvblwiOmZhbW91cy50cmFuc2l0aW9ucy5TcHJpbmdUcmFuc2l0aW9uLFwiZmFtb3VzL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlXCI6ZmFtb3VzLnRyYW5zaXRpb25zLlRyYW5zaXRpb25hYmxlLFwiZmFtb3VzL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlVHJhbnNmb3JtXCI6ZmFtb3VzLnRyYW5zaXRpb25zLlRyYW5zaXRpb25hYmxlVHJhbnNmb3JtLFwiZmFtb3VzL3RyYW5zaXRpb25zL1R3ZWVuVHJhbnNpdGlvblwiOmZhbW91cy50cmFuc2l0aW9ucy5Ud2VlblRyYW5zaXRpb24sXCJmYW1vdXMvdHJhbnNpdGlvbnMvV2FsbFRyYW5zaXRpb25cIjpmYW1vdXMudHJhbnNpdGlvbnMuV2FsbFRyYW5zaXRpb24sXCJmYW1vdXMvdXRpbGl0aWVzL0tleUNvZGVzXCI6ZmFtb3VzLnV0aWxpdGllcy5LZXlDb2RlcyxcImZhbW91cy91dGlsaXRpZXMvVGltZXJcIjpmYW1vdXMudXRpbGl0aWVzLlRpbWVyLFwiZmFtb3VzL3V0aWxpdGllcy9VdGlsaXR5XCI6ZmFtb3VzLnV0aWxpdGllcy5VdGlsaXR5LFwiZmFtb3VzL3ZpZXdzL0RlY2tcIjpmYW1vdXMudmlld3MuRGVjayxcImZhbW91cy92aWV3cy9FZGdlU3dhcHBlclwiOmZhbW91cy52aWV3cy5FZGdlU3dhcHBlcixcImZhbW91cy92aWV3cy9GbGV4aWJsZUxheW91dFwiOmZhbW91cy52aWV3cy5GbGV4aWJsZUxheW91dCxcImZhbW91cy92aWV3cy9GbGlwcGVyXCI6ZmFtb3VzLnZpZXdzLkZsaXBwZXIsXCJmYW1vdXMvdmlld3MvR3JpZExheW91dFwiOmZhbW91cy52aWV3cy5HcmlkTGF5b3V0LFwiZmFtb3VzL3ZpZXdzL0hlYWRlckZvb3RlckxheW91dFwiOmZhbW91cy52aWV3cy5IZWFkZXJGb290ZXJMYXlvdXQsXCJmYW1vdXMvdmlld3MvTGlnaHRib3hcIjpmYW1vdXMudmlld3MuTGlnaHRib3gsXCJmYW1vdXMvdmlld3MvUmVuZGVyQ29udHJvbGxlclwiOmZhbW91cy52aWV3cy5SZW5kZXJDb250cm9sbGVyLFwiZmFtb3VzL3ZpZXdzL1Njcm9sbENvbnRhaW5lclwiOmZhbW91cy52aWV3cy5TY3JvbGxDb250YWluZXIsXCJmYW1vdXMvdmlld3MvU2Nyb2xsZXJcIjpmYW1vdXMudmlld3MuU2Nyb2xsZXIsXCJmYW1vdXMvdmlld3MvU2Nyb2xsdmlld1wiOmZhbW91cy52aWV3cy5TY3JvbGx2aWV3LFwiZmFtb3VzL3ZpZXdzL1NlcXVlbnRpYWxMYXlvdXRcIjpmYW1vdXMudmlld3MuU2VxdWVudGlhbExheW91dCxcImZhbW91cy93aWRnZXRzL05hdmlnYXRpb25CYXJcIjpmYW1vdXMud2lkZ2V0cy5OYXZpZ2F0aW9uQmFyLFwiZmFtb3VzL3dpZGdldHMvU2xpZGVyXCI6ZmFtb3VzLndpZGdldHMuU2xpZGVyLFwiZmFtb3VzL3dpZGdldHMvVGFiQmFyXCI6ZmFtb3VzLndpZGdldHMuVGFiQmFyLFwiZmFtb3VzL3dpZGdldHMvVG9nZ2xlQnV0dG9uXCI6ZmFtb3VzLndpZGdldHMuVG9nZ2xlQnV0dG9uLFwiZmFtb3VzL3BoeXNpY3MvUGh5c2ljc0VuZ2luZVwiOmZhbW91cy5waHlzaWNzLlBoeXNpY3NFbmdpbmUsXCJmYW1vdXMvcGh5c2ljcy9ib2RpZXMvQm9keVwiOmZhbW91cy5waHlzaWNzLmJvZGllcy5Cb2R5LFwiZmFtb3VzL3BoeXNpY3MvYm9kaWVzL0NpcmNsZVwiOmZhbW91cy5waHlzaWNzLmJvZGllcy5DaXJjbGUsXCJmYW1vdXMvcGh5c2ljcy9ib2RpZXMvUGFydGljbGVcIjpmYW1vdXMucGh5c2ljcy5ib2RpZXMuUGFydGljbGUsXCJmYW1vdXMvcGh5c2ljcy9ib2RpZXMvUmVjdGFuZ2xlXCI6ZmFtb3VzLnBoeXNpY3MuYm9kaWVzLlJlY3RhbmdsZSxcImZhbW91cy9waHlzaWNzL2NvbnN0cmFpbnRzL0NvbGxpc2lvblwiOmZhbW91cy5waHlzaWNzLmNvbnN0cmFpbnRzLkNvbGxpc2lvbixcImZhbW91cy9waHlzaWNzL2NvbnN0cmFpbnRzL0NvbnN0cmFpbnRcIjpmYW1vdXMucGh5c2ljcy5jb25zdHJhaW50cy5Db25zdHJhaW50LFwiZmFtb3VzL3BoeXNpY3MvY29uc3RyYWludHMvQ3VydmVcIjpmYW1vdXMucGh5c2ljcy5jb25zdHJhaW50cy5DdXJ2ZSxcImZhbW91cy9waHlzaWNzL2NvbnN0cmFpbnRzL0Rpc3RhbmNlXCI6ZmFtb3VzLnBoeXNpY3MuY29uc3RyYWludHMuRGlzdGFuY2UsXCJmYW1vdXMvcGh5c2ljcy9jb25zdHJhaW50cy9TbmFwXCI6ZmFtb3VzLnBoeXNpY3MuY29uc3RyYWludHMuU25hcCxcImZhbW91cy9waHlzaWNzL2NvbnN0cmFpbnRzL1N1cmZhY2VcIjpmYW1vdXMucGh5c2ljcy5jb25zdHJhaW50cy5TdXJmYWNlLFwiZmFtb3VzL3BoeXNpY3MvY29uc3RyYWludHMvV2FsbFwiOmZhbW91cy5waHlzaWNzLmNvbnN0cmFpbnRzLldhbGwsXCJmYW1vdXMvcGh5c2ljcy9jb25zdHJhaW50cy9XYWxsc1wiOmZhbW91cy5waHlzaWNzLmNvbnN0cmFpbnRzLldhbGxzLFwiZmFtb3VzL3BoeXNpY3MvZm9yY2VzL0RyYWdcIjpmYW1vdXMucGh5c2ljcy5mb3JjZXMuRHJhZyxcImZhbW91cy9waHlzaWNzL2ZvcmNlcy9Gb3JjZVwiOmZhbW91cy5waHlzaWNzLmZvcmNlcy5Gb3JjZSxcImZhbW91cy9waHlzaWNzL2ZvcmNlcy9SZXB1bHNpb25cIjpmYW1vdXMucGh5c2ljcy5mb3JjZXMuUmVwdWxzaW9uLFwiZmFtb3VzL3BoeXNpY3MvZm9yY2VzL1JvdGF0aW9uYWxEcmFnXCI6ZmFtb3VzLnBoeXNpY3MuZm9yY2VzLlJvdGF0aW9uYWxEcmFnLFwiZmFtb3VzL3BoeXNpY3MvZm9yY2VzL1JvdGF0aW9uYWxTcHJpbmdcIjpmYW1vdXMucGh5c2ljcy5mb3JjZXMuUm90YXRpb25hbFNwcmluZyxcImZhbW91cy9waHlzaWNzL2ZvcmNlcy9TcHJpbmdcIjpmYW1vdXMucGh5c2ljcy5mb3JjZXMuU3ByaW5nLFwiZmFtb3VzL3BoeXNpY3MvZm9yY2VzL1ZlY3RvckZpZWxkXCI6ZmFtb3VzLnBoeXNpY3MuZm9yY2VzLlZlY3RvckZpZWxkLFwiZmFtb3VzL3BoeXNpY3MvaW50ZWdyYXRvcnMvU3ltcGxlY3RpY0V1bGVyXCI6ZmFtb3VzLnBoeXNpY3MuaW50ZWdyYXRvcnMuU3ltcGxlY3RpY0V1bGVyfTt0aGlzLnJlZ2lzdGVyTW9kdWxlPWZ1bmN0aW9uKG4scil7ZVtuXT1yfSxlLmdldElzb2xhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiaXNvbGF0ZVwiaW4gZT9lLmlzb2xhdGVbZS4kaWRdOnt9fSxlLmZpbmQ9ZnVuY3Rpb24obil7dmFyIHI9YW5ndWxhci5lbGVtZW50KHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKG4pKSxhPWZ1bmN0aW9uKGUpe3ZhciBuPVtdO3JldHVybiBhbmd1bGFyLmZvckVhY2goZSxmdW5jdGlvbihlLHIpe25bcl09YW5ndWxhci5lbGVtZW50KGUpLnNjb3BlKCl9KSxufShyKSxvPWZ1bmN0aW9uKG4pe3ZhciByPVtdO3JldHVybiBhbmd1bGFyLmZvckVhY2gobixmdW5jdGlvbihuLGEpe3JbYV09ZS5nZXRJc29sYXRlKG4pfSkscn0oYSk7cmV0dXJuIG99O3ZhciBuPS8oW1xcOlxcLVxcX10rKC4pKS9nLHI9L15tb3ooW0EtWl0pLyxhPS9eKHhbXFw6XFwtX118ZGF0YVtcXDpcXC1fXSkvaSxvPS9eRkFcXC0uKlNVUkZBQ0UvLHQ9L15GQVxcLS4qLzt3aW5kb3cuJGZhbW91c1V0aWw9ZS51dGlsPXtpc0FTdXJmYWNlOmZ1bmN0aW9uKGUpe3JldHVybiBvLnRlc3QoZVswXS50YWdOYW1lKX0saXNGYUVsZW1lbnQ6ZnVuY3Rpb24oZSl7aWYodC50ZXN0KGVbMF0udGFnTmFtZSkpcmV0dXJuITA7dmFyIG49ITE7cmV0dXJuIGFuZ3VsYXIuZm9yRWFjaChlWzBdLmF0dHJpYnV0ZXMsZnVuY3Rpb24oZSl7bj1ufHx0LnRlc3QoZSl9KSxufSxjYW1lbENhc2U6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZShuLGZ1bmN0aW9uKGUsbixyLGEpe3JldHVybiBhP3IudG9VcHBlckNhc2UoKTpyfSkucmVwbGFjZShyLFwiTW96JDFcIil9LGRpcmVjdGl2ZU5vcm1hbGl6ZTpmdW5jdGlvbihuKXtyZXR1cm4gZS51dGlsLmNhbWVsQ2FzZShuLnJlcGxhY2UoYSxcIlwiKSl9fSx0aGlzLiRnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gZX19KSxhbmd1bGFyLm1vZHVsZShcImZhbW91cy5hbmd1bGFyXCIpLmNvbmZpZyhbXCIkcHJvdmlkZVwiLGZ1bmN0aW9uKGUpe2UuZGVjb3JhdG9yKFwiJGFuaW1hdGVcIixbXCIkZGVsZWdhdGVcIixcIiRyb290U2NvcGVcIixcIiRmYW1vdXNcIixcIiRwYXJzZVwiLFwiJGZhbW91c0RlY29yYXRvclwiLGZ1bmN0aW9uKGUsbixyLGEsbyl7dmFyIHQ9cltcImZhbW91cy91dGlsaXRpZXMvVGltZXJcIl0saT1cIiQkZmFBbmltYXRpb25BY3RpdmVcIixzPXt9LHU9ZnVuY3Rpb24oZSl7dmFyIG49ci5nZXRJc29sYXRlKGUpO3JldHVybiFuJiZlJiYobj1vLiQkZ2V0SXNvbGF0ZUJ5SWQoc1tlLiRpZF0pKSxufSxjPXtlbmFibGVkOmUuZW5hYmxlZH07cmV0dXJuIGFuZ3VsYXIuZm9yRWFjaChbXCJhZGRDbGFzc1wiLFwicmVtb3ZlQ2xhc3NcIl0sZnVuY3Rpb24obil7dmFyIGE9YW5ndWxhci5lbGVtZW50LnByb3RvdHlwZVtuXTthbmd1bGFyLmVsZW1lbnQucHJvdG90eXBlW25dPWZ1bmN0aW9uKGUpe3JldHVybiBhLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxyLnV0aWwuaXNBU3VyZmFjZSh0aGlzKSYmXCJzdHJpbmdcIj09dHlwZW9mIGUmJlwiXCIhPT1lLnRyaW0oKSYmdSh0aGlzLnNjb3BlKCkpLnJlbmRlck5vZGVbbl0oZSksdGhpc30sY1tuXT1mdW5jdGlvbihhLG8sdCl7aWYoZVtuXShhLG8sdCksci51dGlsLmlzRmFFbGVtZW50KGEpKXt2YXIgaT11KGEuc2NvcGUoKSk7aWYoci51dGlsLmlzQVN1cmZhY2UoYSkpe3ZhciBzPWkucmVuZGVyTm9kZTthbmd1bGFyLmZvckVhY2goby5zcGxpdChcIiBcIiksZnVuY3Rpb24oZSl7XCJuZy1oaWRlXCI9PT1lP1wiYWRkQ2xhc3NcIj09PW4/aS5oaWRlKCk6XCJyZW1vdmVDbGFzc1wiPT09biYmaS5zaG93KCk6c1tuXShlKX0pfWVsc2UgYW5ndWxhci5mb3JFYWNoKG8uc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGUpe1wibmctaGlkZVwiPT09ZSYmKFwiYWRkQ2xhc3NcIj09PW4/aS5oaWRlKCk6XCJyZW1vdmVDbGFzc1wiPT09biYmaS5zaG93KCkpfSl9fX0pLGMuc2V0Q2xhc3M9ZnVuY3Rpb24obixhLG8sdCl7aWYoZS5zZXRDbGFzcyhuLGEsbyx0KSxyLnV0aWwuaXNBU3VyZmFjZShuKSl7dmFyIGk9dShuLnNjb3BlKCkpLnJlbmRlck5vZGU7YW5ndWxhci5mb3JFYWNoKGEuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGUpe2kuYWRkQ2xhc3MoZSl9KSxhbmd1bGFyLmZvckVhY2goby5zcGxpdChcIiBcIiksZnVuY3Rpb24oZSl7aS5yZW1vdmVDbGFzcyhlKX0pfX0sYW5ndWxhci5mb3JFYWNoKFtcImVudGVyXCIsXCJsZWF2ZVwiLFwibW92ZVwiXSxmdW5jdGlvbihhKXt2YXIgbz1hWzBdLnRvVXBwZXJDYXNlKCkrYS5zbGljZSgxKTtjW2FdPWZ1bmN0aW9uKGMpe3ZhciBmPXRoaXMsbD1hcmd1bWVudHMsZD1cImVudGVyXCI9PT1hLG09Yy5zY29wZSgpO20mJm0uJHBhcmVudCYmKHNbbS4kaWRdPW0uJHBhcmVudC4kaWQpO3ZhciBwPXUobSk7ZD09PSEwJiZlW2FdLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxjLmRhdGEoaSk9PT0hMCYmcCYmcC4kJGFuaW1hdGVIYWx0SGFuZGxlciYmcC4kJGFuaW1hdGVIYWx0SGFuZGxlcihjLnNjb3BlKCkpLGMuZGF0YShpLCEwKTt2YXIgdj1mdW5jdGlvbigpe20mJm0uJGlkO2lmKFwibGVhdmVcIj09PWEmJnIudXRpbC5pc0ZhRWxlbWVudChjKSl7dmFyIG49dShtKTtuJiZuLmlkJiZuLmhpZGUoKX1jLmRhdGEoaSkhPT0hMSYmKGMuZGF0YShpLCExKSxkPT09ITEmJmVbYV0uYXBwbHkoZixsKSl9O24uJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCl7dmFyIGUsbj1jLnNjb3BlKCkscj11KG4pO2lmKHImJihlPXJbXCIkJGFuaW1hdGVcIitvK1wiSGFuZGxlclwiXSksdm9pZCAwPT09ZSlyZXR1cm4gdm9pZCB2KCk7dmFyIGE9ZShuLHskZG9uZTp2fSk7XCJudW1iZXJcIj09dHlwZW9mIGEmJnQuc2V0VGltZW91dCh2LGEpfSl9fSksY31dKX1dKSxhbmd1bGFyLm1vZHVsZShcImZhbW91cy5hbmd1bGFyXCIpLmZhY3RvcnkoXCIkZmFtb3VzRGVjb3JhdG9yXCIsW1wiJGZhbW91c1wiLGZ1bmN0aW9uKGUpe3ZhciBuPXtjaGlsZDp7fSxwYXJlbnQ6e30scmVuZGVyYWJsZTpmdW5jdGlvbihuKXt2YXIgcj1lW1wiZmFtb3VzL2NvcmUvUmVuZGVyTm9kZVwiXTtuLnJlbmRlckdhdGU9bmV3IHIsbi5lbXB0eU5vZGU9bmV3IHIsbi5zaG93PWZ1bmN0aW9uKCl7bi5yZW5kZXJHYXRlJiZuLnJlbmRlckdhdGUuc2V0KG4ucmVuZGVyTm9kZSl9LG4uaGlkZT1mdW5jdGlvbigpe24ucmVuZGVyR2F0ZS5zZXQobi5lbXB0eU5vZGUpfX19LHI9e307cmV0dXJue2FkZFJvbGU6ZnVuY3Rpb24oZSxyKXtuW2VdKHIpfSxlbnN1cmVJc29sYXRlOmZ1bmN0aW9uKGUsbil7aWYobil7dmFyIGE9W1wiZmEtZWRnZS1zd2FwcGVyXCIsXCJmYS1yZW5kZXItY29udHJvbGxlclwiLFwiZmEtZGVja1wiLFwiZmEtbGlnaHQtYm94XCJdLG89ITE7YW5ndWxhci5mb3JFYWNoKGEsZnVuY3Rpb24oZSl7cmV0dXJuIGUudG9VcHBlckNhc2UoKT09PW5bMF0udGFnTmFtZT92b2lkKG89ITApOnZvaWQgMCE9PW5bMF0uYXR0cmlidXRlc1tlXT92b2lkKG89ITApOnZvaWQgMH0pLG8mJihlPWUuJHBhcmVudCl9ZS5pc29sYXRlPWUuaXNvbGF0ZXx8e30sZS5pc29sYXRlW2UuJGlkXT1lLmlzb2xhdGVbZS4kaWRdfHx7fTt2YXIgdD1lLmlzb2xhdGVbZS4kaWRdO3QuaWQ9ZS4kaWQ7dmFyIGk9ZS4kZXZhbChcIiRpbmRleFwiKTtyZXR1cm4gaSYmXCIkaW5kZXhcIiE9PWkmJiF0LmluZGV4JiYodC5pbmRleD1pKSxyW3QuaWRdPXQsdH0sJCRnZXRJc29sYXRlQnlJZDpmdW5jdGlvbihlKXtyZXR1cm4gcltlXX0scmVnaXN0ZXJDaGlsZDpmdW5jdGlvbihlLG4scixhKXtlLiRlbWl0KFwicmVnaXN0ZXJDaGlsZFwiLHIpLG4ub25lKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe1wicmVtb3ZlTWV0aG9kXCJpbiByJiZyLnJlbW92ZU1ldGhvZChyLmlkKSxyJiZyLmhpZGUmJnIuaGlkZSgpLGEmJmEoKX0pfSxzZXF1ZW5jZVdpdGg6ZnVuY3Rpb24obixyLGEsbyl7bi4kb24oXCJyZWdpc3RlckNoaWxkXCIsZnVuY3Rpb24odCxpKXtpZih0LnRhcmdldFNjb3BlLiRpZCE9PW4uJGlkKXt2YXIgcz1lLmdldElzb2xhdGUobik7aS4kcGFyZW50PXMscy4kY2hpbGRyZW49cy4kY2hpbGRyZW58fFtdLHMuJGNoaWxkcmVuLnB1c2goaSkscihpKSx0LnN0b3BQcm9wYWdhdGlvbigpLGEmJihpLnJlbW92ZU1ldGhvZD1hKSxvJiYoaS51cGRhdGVNZXRob2Q9byl9fSl9fX1dKSxhbmd1bGFyLm1vZHVsZShcImZhbW91cy5hbmd1bGFyXCIpLnNlcnZpY2UoXCIkZmFtb3VzUGlwZVwiLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLG4scil7ZSBpbnN0YW5jZW9mIEFycmF5fHwoZT1bZV0pLG4gaW5zdGFuY2VvZiBBcnJheXx8KG49W25dKTtmb3IodmFyIGE9MDthPGUubGVuZ3RoO2ErKylmb3IodmFyIG89MDtvPG4ubGVuZ3RoO28rKyl2b2lkIDAhPT1uW29dJiZ2b2lkIDAhPT1lW2FdJiZuW29dW3JdKGVbYV0pfXRoaXMudW5waXBlc0Zyb21UYXJnZXRzPWZ1bmN0aW9uKG4scil7ZShuLHIsXCJ1bnBpcGVcIil9LHRoaXMucGlwZXNUb1RhcmdldHM9ZnVuY3Rpb24obixyKXtlKG4scixcInBpcGVcIil9fSksYW5ndWxhci5tb2R1bGUoXCJmYW1vdXMuYW5ndWxhclwiKS5mYWN0b3J5KFwiJHRpbWVsaW5lXCIsZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbihlLG4pe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiBlP2UrbjplLm1hcChmdW5jdGlvbihlLHIpe3JldHVybiBlK25bcl19KX0sbj1mdW5jdGlvbihlLG4pe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiBlP2UtbjplLm1hcChmdW5jdGlvbihlLHIpe3JldHVybiBlLW5bcl19KX0scj1mdW5jdGlvbihlLG4pe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiBlP2UqbjplLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZSpufSl9LGE9ZnVuY3Rpb24oYSxvLHQsaSxzKXtyZXR1cm4gZnVuY3Rpb24odSl7dmFyIGM9aSxmPS1vLGw9MS8odC1vKSxkPW4ocyxpKTtyZXR1cm4gZShyKGQsYShsKih1K2YpKSksYyl9fTtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49ZnVuY3Rpb24oZSl7cmV0dXJuIGV9O3JldHVybiBmdW5jdGlvbihyKXtpZihyPGVbMF1bMF0pcmV0dXJuIGVbMF1bMV07Zm9yKHZhciBvPTA7bzxlLmxlbmd0aC0xO28rKylpZihlW29dWzBdPD1yJiZyPGVbbysxXVswXSl7dmFyIHQ9YShlW29dWzJdfHxuLGVbb11bMF0sZVtvKzFdWzBdLGVbb11bMV0sZVtvKzFdWzFdKTtyZXR1cm4gdChyKX1yZXR1cm4gZVtlLmxlbmd0aC0xXVsxXX19fSksYW5ndWxhci5tb2R1bGUoXCJmYW1vdXMuYW5ndWxhclwiKS5kaXJlY3RpdmUoXCJmYUFuaW1hdGVFbnRlclwiLFtcIiRwYXJzZVwiLFwiJGZhbW91c0RlY29yYXRvclwiLGZ1bmN0aW9uKGUsbil7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHNjb3BlOiExLHByaW9yaXR5OjE2LGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cG9zdDpmdW5jdGlvbihyLGEsbyl7dmFyIHQ9bi5lbnN1cmVJc29sYXRlKHIpO3QuJCRhbmltYXRlRW50ZXJIYW5kbGVyPWUoby5mYUFuaW1hdGVFbnRlciksby4kb2JzZXJ2ZShcImZhQW5pbWF0ZUVudGVyXCIsZnVuY3Rpb24oKXt0LiQkYW5pbWF0ZUVudGVySGFuZGxlcj1lKG8uZmFBbmltYXRlRW50ZXIpfSl9fX19fV0pLGFuZ3VsYXIubW9kdWxlKFwiZmFtb3VzLmFuZ3VsYXJcIikuZGlyZWN0aXZlKFwiZmFBbmltYXRlSGFsdFwiLFtcIiRwYXJzZVwiLFwiJGZhbW91c0RlY29yYXRvclwiLGZ1bmN0aW9uKGUsbil7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHNjb3BlOiExLHByaW9yaXR5OjE2LGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cG9zdDpmdW5jdGlvbihyLGEsbyl7dmFyIHQ9bi5lbnN1cmVJc29sYXRlKHIpO3QuJCRhbmltYXRlSGFsdEhhbmRsZXI9ZShvLmZhQW5pbWF0ZUhhbHQpLG8uJG9ic2VydmUoXCJmYUFuaW1hdGVIYWx0XCIsZnVuY3Rpb24oKXt0LiQkYW5pbWF0ZUhhbHRIYW5kbGVyPWUoby5mYUFuaW1hdGVIYWx0KX0pfX19fX1dKSxhbmd1bGFyLm1vZHVsZShcImZhbW91cy5hbmd1bGFyXCIpLmRpcmVjdGl2ZShcImZhQW5pbWF0ZUxlYXZlXCIsW1wiJHBhcnNlXCIsXCIkZmFtb3VzRGVjb3JhdG9yXCIsZnVuY3Rpb24oZSxuKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIsc2NvcGU6ITEscHJpb3JpdHk6MTYsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwb3N0OmZ1bmN0aW9uKHIsYSxvKXt2YXIgdD1uLmVuc3VyZUlzb2xhdGUocik7dC4kJGFuaW1hdGVMZWF2ZUhhbmRsZXI9ZShvLmZhQW5pbWF0ZUxlYXZlKSxvLiRvYnNlcnZlKFwiZmFBbmltYXRlTGVhdmVcIixmdW5jdGlvbigpe3QuJCRhbmltYXRlTGVhdmVIYW5kbGVyPWUoby5mYUFuaW1hdGVMZWF2ZSl9KX19fX19XSksYW5ndWxhci5tb2R1bGUoXCJmYW1vdXMuYW5ndWxhclwiKS5kaXJlY3RpdmUoXCJmYUFuaW1hdGVNb3ZlXCIsW1wiJHBhcnNlXCIsXCIkZmFtb3VzRGVjb3JhdG9yXCIsZnVuY3Rpb24oZSxuKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIsc2NvcGU6ITEscHJpb3JpdHk6MTYsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwb3N0OmZ1bmN0aW9uKHIsYSxvKXt2YXIgdD1uLmVuc3VyZUlzb2xhdGUocik7dC4kJGFuaW1hdGVNb3ZlSGFuZGxlcj1lKG8uZmFBbmltYXRlTW92ZSksby4kb2JzZXJ2ZShcImZhQW5pbWF0ZU1vdmVcIixmdW5jdGlvbigpe3QuJCRhbmltYXRlTW92ZUhhbmRsZXI9ZShvLmZhQW5pbWF0ZU1vdmUpfSl9fX19fV0pLGFuZ3VsYXIubW9kdWxlKFwiZmFtb3VzLmFuZ3VsYXJcIikuZGlyZWN0aXZlKFwiZmFBbmltYXRpb25cIixbXCIkZmFtb3VzXCIsXCIkZmFtb3VzRGVjb3JhdG9yXCIsZnVuY3Rpb24oZSxuKXtyZXR1cm57cmVzdHJpY3Q6XCJFQVwiLHNjb3BlOiEwLGNvbXBpbGU6ZnVuY3Rpb24oKXt2YXIgcj1lW1wiZmFtb3VzL2NvcmUvVHJhbnNmb3JtXCJdLGE9ZVtcImZhbW91cy90cmFuc2l0aW9ucy9UcmFuc2l0aW9uYWJsZVwiXSxvPWVbXCJmYW1vdXMvdHJhbnNpdGlvbnMvRWFzaW5nXCJdO3JldHVybntwcmU6ZnVuY3Rpb24oZSl7bi5lbnN1cmVJc29sYXRlKGUpfSxwb3N0OmZ1bmN0aW9uKGUsdCxpKXt2YXIgcz1uLmVuc3VyZUlzb2xhdGUoZSk7c2V0VGltZW91dChmdW5jdGlvbigpe3MudGltZWxpbmU9ZS4kZXZhbChpLnRpbWVsaW5lKSxzLl90cmFucz1uZXcgYSgwKSxzLnBsYXk9ZnVuY3Rpb24obil7dmFyIHI9e2R1cmF0aW9uOmUuJGV2YWwoaS5kdXJhdGlvbiksY3VydmU6ZS4kZXZhbChpLmN1cnZlKXx8XCJsaW5lYXJcIn07cy5fdHJhbnMuc2V0KDEscixmdW5jdGlvbigpe24mJm4oKSxpLmxvb3AmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtzLnJlcGxheShuKX0sMCl9KX0scy5yZXNldD1mdW5jdGlvbigpe3MuX3RyYW5zLnNldCgwKX0scy5yZXBsYXk9ZnVuY3Rpb24oZSl7cy5yZXNldCgpLHMucGxheShlKX07dmFyIG49bnVsbDtpLmV2ZW50JiYobiYmbigpLG49ZS4kb24oaS5ldmVudCxmdW5jdGlvbihlLG4pe3ZhciByPW4mJm4uY2FsbGJhY2s/bi5jYWxsYmFjazp2b2lkIDA7cy5yZXBsYXkocil9KSk7aS5pZDtpZih2b2lkIDA9PT1zLnRpbWVsaW5lJiYocy50aW1lbGluZT1zLl90cmFucy5nZXQuYmluZChzLl90cmFucyksaS5hdXRvcGxheSYmcy5wbGF5KCkpLCFzLnRpbWVsaW5lIGluc3RhbmNlb2YgRnVuY3Rpb24pdGhyb3cgbmV3IEVycm9yKFwidGltZWxpbmUgbXVzdCBiZSBhIHJlZmVyZW5jZSB0byBhIGZ1bmN0aW9uIG9yIGR1cmF0aW9uIG11c3QgYmUgcHJvdmlkZWRcIik7Zm9yKHZhciB1PXRbMF0ucXVlcnlTZWxlY3RvckFsbChcImFuaW1hdGVcIiksYz17fSxmPTA7Zjx1Lmxlbmd0aDtmKyspIWZ1bmN0aW9uKCl7dmFyIG49dVtmXTtpZihuLmF0dHJpYnV0ZXMudGFyZ2V0bW9kc2VsZWN0b3Ipe3ZhciBhPWFuZ3VsYXIuZWxlbWVudCh0WzBdLnBhcmVudE5vZGUpWzBdLnF1ZXJ5U2VsZWN0b3JBbGwobi5hdHRyaWJ1dGVzLnRhcmdldG1vZHNlbGVjdG9yLnZhbHVlKTthbmd1bGFyLmZvckVhY2goYSxmdW5jdGlvbihhKXt2YXIgdD1hbmd1bGFyLmVsZW1lbnQoYSkuc2NvcGUoKSxpPXQuaXNvbGF0ZVt0LiRpZF0ubW9kaWZpZXIsdT10Lmlzb2xhdGVbdC4kaWRdLmdldFRyYW5zZm9ybSxmPW4uYXR0cmlidXRlcy5jdXJ2ZSYmXCJsaW5lYXJcIiE9PW4uYXR0cmlidXRlcy5jdXJ2ZS52YWx1ZT9vW24uYXR0cmlidXRlcy5jdXJ2ZS52YWx1ZV06ZnVuY3Rpb24oZSl7cmV0dXJuIGV9O2lmKG4uYXR0cmlidXRlcy5maWVsZCl7dmFyIGw9bi5hdHRyaWJ1dGVzLmZpZWxkLnZhbHVlLGQ9bi5hdHRyaWJ1dGVzLnRpbWVsaW5lbG93ZXJib3VuZD9wYXJzZUZsb2F0KG4uYXR0cmlidXRlcy50aW1lbGluZWxvd2VyYm91bmQudmFsdWUpOjAsbT1uLmF0dHJpYnV0ZXMudGltZWxpbmV1cHBlcmJvdW5kP3BhcnNlRmxvYXQobi5hdHRyaWJ1dGVzLnRpbWVsaW5ldXBwZXJib3VuZC52YWx1ZSk6MTtpZighbi5hdHRyaWJ1dGVzLnN0YXJ0dmFsdWUpdGhyb3cgbmV3IEVycm9yKFwieW91IG11c3QgcHJvdmlkZSBhIHN0YXJ0IHZhbHVlIGZvciB0aGUgYW5pbWF0aW9uXCIpO3ZhciBwPWUuJGV2YWwobi5hdHRyaWJ1dGVzLnN0YXJ0dmFsdWUudmFsdWUpO2lmKCFuLmF0dHJpYnV0ZXMuZW5kdmFsdWUpdGhyb3cgbmV3IEVycm9yKFwieW91IG11c3QgcHJvdmlkZSBhbiBlbmQgdmFsdWUgZm9yIHRoZSBhbmltYXRpb25cIik7dmFyIHY9ZS4kZXZhbChuLmF0dHJpYnV0ZXMuZW5kVmFsdWUudmFsdWUpLGc9Y1t0LiRpZF09Y1t0LiRpZF18fHt9LGg9Z1tsXT1nW2xdfHxbXTtoLnB1c2goe2ZpZWxkOmwsbG93ZXJCb3VuZDpkLHVwcGVyQm91bmQ6bSxzdGFydFZhbHVlOnAsZW5kVmFsdWU6dixjdXJ2ZTpmfSksaC5zb3J0KGZ1bmN0aW9uKGUsbil7cmV0dXJuIGUubG93ZXJCb3VuZC1uLmxvd2VyQm91bmR9KTtmb3IodmFyICQ9MTskPGgubGVuZ3RoOyQrKylmb3IodmFyIHk9aFskXS5sb3dlckJvdW5kLHc9MDskPnc7dysrKWlmKHk8aFt3XS51cHBlckJvdW5kKXRocm93IG5ldyBFcnJvcihcIkFuaW1hdGUgc2VnbWVudHMgaGF2ZSBvdmVybGFwcGluZ2RvbWFpbnMgZm9yIHRoZSBzYW1lIGZpZWxkIChcIitsK1wiKS5BdCBhbnkgcG9pbnQgaW4gdGhlIHRpbWVsaW5lLCBvbmx5IG9uZSA8YW5pbWF0ZT5jYW4gYWZmZWN0IGEgZ2l2ZW4gZmllbGQgb24gdGhlIHNhbWUgbW9kaWZpZXIuXCIpO3ZhciBTPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXMudGltZWxpbmUoKXx8MCxuPTAscj1oW25dLGE9MDthPGgubGVuZ3RoO2ErKyl7aWYoZT49aFthXS5sb3dlckJvdW5kJiZlPD1oW2FdLnVwcGVyQm91bmQpe3I9aFthXTticmVha31pZihhPT09aC5sZW5ndGgtMSl7cj1oW2FdO2JyZWFrfWlmKGU+PWhbYV0udXBwZXJCb3VuZCYmZTxoW2ErMV0ubG93ZXJCb3VuZCl7cj1oW2FdO2JyZWFrfX1pZihlPD1yLmxvd2VyQm91bmQpcmV0dXJuIHIuc3RhcnRWYWx1ZTtpZihlPj1yLnVwcGVyQm91bmQpcmV0dXJuIHIuZW5kVmFsdWU7dmFyIG89ci51cHBlckJvdW5kLXIubG93ZXJCb3VuZCx0PShlLXIubG93ZXJCb3VuZCkvbztpZihBcnJheS5pc0FycmF5KHIuc3RhcnRWYWx1ZSkpe2Zvcih2YXIgaT1bXSx1PTA7dTxyLnN0YXJ0VmFsdWUubGVuZ3RoO3UrKylpLnB1c2goci5zdGFydFZhbHVlW3VdK3IuY3VydmUodCkqKHIuZW5kVmFsdWVbdV0tci5zdGFydFZhbHVlW3VdKSk7cmV0dXJuIGl9cmV0dXJuIHIuc3RhcnRWYWx1ZStyLmN1cnZlKHQpKihyLmVuZFZhbHVlLXIuc3RhcnRWYWx1ZSl9LGI9Zy50cmFuc2Zvcm1Db21wb25lbnRzPWcudHJhbnNmb3JtQ29tcG9uZW50c3x8W107XCJvcGFjaXR5XCI9PT1sP2kub3BhY2l0eUZyb20oZnVuY3Rpb24oKXtyZXR1cm4gUygpfSk6XCJvcmlnaW5cIj09PWw/aS5vcmlnaW5Gcm9tKGZ1bmN0aW9uKCl7cmV0dXJuIFMoKX0pOlwic2l6ZVwiPT09bD9pLnNpemVGcm9tKGZ1bmN0aW9uKCl7cmV0dXJuIFMoKX0pOihiLnB1c2goe2ZpZWxkOmwsZm46U30pLGkudHJhbnNmb3JtRnJvbShmdW5jdGlvbigpe2Zvcih2YXIgZT17fSxuPXUmJnUoKT9bdSgpXTpbXSxhPTA7YTxiLmxlbmd0aDthKyspIWZ1bmN0aW9uKCl7dmFyIG89YlthXS5maWVsZDtpZighZVtvXSl7dmFyIHQ9YlthXS5mbigpO24ucHVzaChBcnJheS5pc0FycmF5KHQpP3Jbb10uYXBwbHkodGhpcyx0KTpyW29dKHQpKSxlW29dPSEwfX0oKTtyZXR1cm4gMT09PW4ubGVuZ3RoP25bMF06ci5tdWx0aXBseS5hcHBseSh0aGlzLG4pfSkpfX0pfX0oKX0sMSl9fX19fV0pLGFuZ3VsYXIubW9kdWxlKFwiZmFtb3VzLmFuZ3VsYXJcIikuZGlyZWN0aXZlKFwiZmFBcHBcIixbXCIkZmFtb3VzXCIsXCIkZmFtb3VzRGVjb3JhdG9yXCIsZnVuY3Rpb24oZSxuKXtyZXR1cm57dGVtcGxhdGU6JzxkaXYgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPjxkaXY+PC9kaXY+PC9kaXY+Jyx0cmFuc2NsdWRlOiEwLHNjb3BlOiEwLHJlc3RyaWN0OlwiRUFcIixjb21waWxlOmZ1bmN0aW9uKHIsYSxvKXtyZXR1cm57cHJlOmZ1bmN0aW9uKHIsYSxvKXtmdW5jdGlvbiB0KCl7cy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9e3ZhciBpPW4uZW5zdXJlSXNvbGF0ZShyKSxzPWVbXCJmYW1vdXMvY29yZS9WaWV3XCJdLHU9ZVtcImZhbW91cy9jb3JlL0VuZ2luZVwiXTtlW1wiZmFtb3VzL2NvcmUvVHJhbnNmb3JtXCJdfWEuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiZmFtb3VzLWFuZ3VsYXItY2xpcHBpbmctY29udGFpbmVyXCI+PGRpdiBjbGFzcz1cImZhbW91cy1hbmd1bGFyLWNvbnRhaW5lclwiPjwvZGl2PjwvZGl2PicpLGkuY29udGV4dD11LmNyZWF0ZUNvbnRleHQoYVswXS5xdWVyeVNlbGVjdG9yKFwiLmZhbW91cy1hbmd1bGFyLWNvbnRhaW5lclwiKSksd2luZG93LmNvbnRleHQ9aS5jb250ZXh0O3ZhciBjPWZ1bmN0aW9uKCl7dmFyIGU9cGFyc2VJbnQoby5mYVBlcnNwZWN0aXZlKTtlJiZpLmNvbnRleHQuc2V0UGVyc3BlY3RpdmUoZSl9O28uJG9ic2VydmUoXCJmYVBlcnNwZWN0aXZlXCIsYyksYygpLHQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUocy5wcm90b3R5cGUpLHQucHJvdG90eXBlLmNvbnN0cnVjdG9yPXQ7aS52aWV3PW5ldyB0LGkuY29udGV4dC5hZGQoaS52aWV3KSxyLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtpLmNvbnRleHQudXBkYXRlPWFuZ3VsYXIubm9vcH0pLHIuJG9uKFwicmVnaXN0ZXJDaGlsZFwiLGZ1bmN0aW9uKGUsbil7aS52aWV3LmFkZChuLnJlbmRlck5vZGUpLGUuc3RvcFByb3BhZ2F0aW9uKCl9KX0scG9zdDpmdW5jdGlvbihlLHIpe3ZhciBhPW4uZW5zdXJlSXNvbGF0ZShlKTtvKGUsZnVuY3Rpb24oZSl7YW5ndWxhci5lbGVtZW50KHJbMF0ucXVlcnlTZWxlY3RvckFsbChcImRpdiBkaXZcIilbMF0pLmFwcGVuZChlKX0pLGEucmVhZHlUb1JlbmRlcj0hMH19fX19XSksYW5ndWxhci5tb2R1bGUoXCJmYW1vdXMuYW5ndWxhclwiKS5kaXJlY3RpdmUoXCJmYUNhbnZhc1N1cmZhY2VcIixbXCIkZmFtb3VzXCIsXCIkZmFtb3VzRGVjb3JhdG9yXCIsXCIkaW50ZXJwb2xhdGVcIixcIiRjb250cm9sbGVyXCIsXCIkY29tcGlsZVwiLGZ1bmN0aW9uKGUsbil7cmV0dXJue3Njb3BlOiEwLHRyYW5zY2x1ZGU6ITAsdGVtcGxhdGU6JzxjYW52YXMgY2xhc3M9XCJmYS1jYW52YXMtc3VyZmFjZVwiPjwvY2FudmFzPicscmVzdHJpY3Q6XCJFQVwiLGNvbXBpbGU6ZnVuY3Rpb24ocixhLG8pe3JldHVybntwcmU6ZnVuY3Rpb24ocixhLG8pe3t2YXIgdD1uLmVuc3VyZUlzb2xhdGUociksaT1lW1wiZmFtb3VzL3N1cmZhY2VzL0NhbnZhc1N1cmZhY2VcIl07ZVtcImZhbW91cy9jb3JlL1RyYW5zZm9ybVwiXSxlW1wiZmFtb3VzL2NvcmUvRXZlbnRIYW5kbGVyXCJdfXQucmVuZGVyTm9kZT1uZXcgaSh7c2l6ZTpyLiRldmFsKG8uZmFTaXplKX0pLG4uYWRkUm9sZShcInJlbmRlcmFibGVcIix0KSx0LnNob3coKSxvLmNsYXNzJiZ0LnJlbmRlck5vZGUuc2V0Q2xhc3NlcyhvW1wiY2xhc3NcIl0uc3BsaXQoXCIgXCIpKSxuLnNlcXVlbmNlV2l0aChyLGZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKFwiU3VyZmFjZXMgYXJlIGxlYWYgbm9kZXMgb2YgdGhlIEZhbW8udXMgcmVuZGVyIHRyZWUgYW5kIGNhbm5vdCBhY2NlcHQgcmVuZGVybm9kZSBjaGlsZHJlbi4gIFRvIGluY2x1ZGUgYWRkaXRpb25hbCBGYW1vLnVzIGNvbnRlbnQgaW5zaWRlIG9mIGEgZmEtc3VyZmFjZSwgdGhhdCBjb250ZW50IG11c3QgYmUgZW5jbG9zZWQgaW4gYW4gYWRkaXRpb25hbCBmYS1hcHAuXCIpfSl9LHBvc3Q6ZnVuY3Rpb24oZSxyKXt2YXIgYT1uLmVuc3VyZUlzb2xhdGUoZSksdD1mdW5jdGlvbigpe2EucmVuZGVyTm9kZS5zZXRDb250ZW50KHJbMF0ucXVlcnlTZWxlY3RvcihcImNhbnZhcy5mYS1jYW52YXMtc3VyZmFjZVwiKSl9O3QoKSxvKGUsZnVuY3Rpb24oZSl7YW5ndWxhci5lbGVtZW50KHJbMF0ucXVlcnlTZWxlY3RvckFsbChcImNhbnZhcy5mYS1jYW52YXMtc3VyZmFjZVwiKSkuYXBwZW5kKGUpfSksbi5yZWdpc3RlckNoaWxkKGUscixhLGZ1bmN0aW9uKCl7fSl9fX19fV0pLGFuZ3VsYXIubW9kdWxlKFwiZmFtb3VzLmFuZ3VsYXJcIikuZGlyZWN0aXZlKFwiZmFDbGlja1wiLFtcIiRwYXJzZVwiLFwiJGZhbW91c0RlY29yYXRvclwiLGZ1bmN0aW9uKGUsbil7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cG9zdDpmdW5jdGlvbihyLGEsbyl7dmFyIHQ9bi5lbnN1cmVJc29sYXRlKHIpO2lmKG8uZmFDbGljayl7dmFyIGk9dC5yZW5kZXJOb2RlLl9ldmVudElucHV0fHx0LnJlbmRlck5vZGU7aS5vbihcImNsaWNrXCIsZnVuY3Rpb24obil7dmFyIGE9ZShvLmZhQ2xpY2spO2Eocix7JGV2ZW50Om59KSxyLiQkcGhhc2V8fHIuJGFwcGx5KCl9KX19fX19fV0pLGFuZ3VsYXIubW9kdWxlKFwiZmFtb3VzLmFuZ3VsYXJcIikuZGlyZWN0aXZlKFwiZmFDb250YWluZXJTdXJmYWNlXCIsW1wiJGZhbW91c1wiLFwiJGZhbW91c0RlY29yYXRvclwiLGZ1bmN0aW9uKGUsbil7cmV0dXJue3RlbXBsYXRlOlwiPGRpdj48L2Rpdj5cIixyZXN0cmljdDpcIkVcIix0cmFuc2NsdWRlOiEwLHNjb3BlOiEwLGNvbXBpbGU6ZnVuY3Rpb24ocixhLG8pe3JldHVybntwcmU6ZnVuY3Rpb24ocixhLG8pe3ZhciB0PW4uZW5zdXJlSXNvbGF0ZShyKSxpPWVbXCJmYW1vdXMvc3VyZmFjZXMvQ29udGFpbmVyU3VyZmFjZVwiXSxzPXIuJGV2YWwoby5mYU9wdGlvbnMpfHx7fTt0LnJlbmRlck5vZGU9bmV3IGkocyksbi5hZGRSb2xlKFwicmVuZGVyYWJsZVwiLHQpLHQuc2hvdygpLG4uc2VxdWVuY2VXaXRoKHIsZnVuY3Rpb24oZSl7dC5yZW5kZXJOb2RlLmFkZChlLnJlbmRlckdhdGUpfSl9LHBvc3Q6ZnVuY3Rpb24oZSxyKXt2YXIgYT1uLmVuc3VyZUlzb2xhdGUoZSk7byhlLGZ1bmN0aW9uKGUpe3IuZmluZChcImRpdlwiKS5hcHBlbmQoZSl9KSxuLnJlZ2lzdGVyQ2hpbGQoZSxyLGEpfX19fX1dKSxhbmd1bGFyLm1vZHVsZShcImZhbW91cy5hbmd1bGFyXCIpLmRpcmVjdGl2ZShcImZhRHJhZ2dhYmxlXCIsW1wiJGZhbW91c1wiLFwiJGZhbW91c0RlY29yYXRvclwiLFwiJHBhcnNlXCIsXCIkcm9vdFNjb3BlXCIsZnVuY3Rpb24oZSxuLHIsYSl7cmV0dXJue3RlbXBsYXRlOlwiPGRpdj48L2Rpdj5cIix0cmFuc2NsdWRlOiEwLHJlc3RyaWN0OlwiRUFcIixwcmlvcml0eToyLHNjb3BlOiEwLGNvbXBpbGU6ZnVuY3Rpb24ocixvLHQpe3JldHVybntwb3N0OmZ1bmN0aW9uKHIsbyxpKXt2YXIgcz1uLmVuc3VyZUlzb2xhdGUociksdT1lW1wiZmFtb3VzL2NvcmUvUmVuZGVyTm9kZVwiXSxjPWVbXCJmYW1vdXMvbW9kaWZpZXJzL0RyYWdnYWJsZVwiXSxmPXIuJGV2YWwoaS5mYU9wdGlvbnMpfHx7fTtyLiR3YXRjaChmdW5jdGlvbigpe3JldHVybiByLiRldmFsKGkuZmFPcHRpb25zKX0sZnVuY3Rpb24oZSl7ZT1lfHx7fSxzLm1vZGlmaWVyLnNldE9wdGlvbnMoZSl9LCEwKSxzLm1vZGlmaWVyPW5ldyBjKGYpLHMucmVuZGVyTm9kZT0obmV3IHUpLmFkZChzLm1vZGlmaWVyKSxuLmFkZFJvbGUoXCJyZW5kZXJhYmxlXCIscykscy5zaG93KCksbi5zZXF1ZW5jZVdpdGgocixmdW5jdGlvbihlKXtzLnJlbmRlck5vZGUuYWRkKGUucmVuZGVyR2F0ZSl9KSx0KHIsZnVuY3Rpb24oZSl7by5maW5kKFwiZGl2XCIpLmFwcGVuZChlKX0pLG4ucmVnaXN0ZXJDaGlsZChyLG8scyxmdW5jdGlvbigpe3MubW9kaWZpZXIuZGVhY3RpdmF0ZSgpfSksci4kJHBoYXNlfHxhLiQkcGhhc2V8fHIuJGFwcGx5KCl9fX19fV0pLGFuZ3VsYXIubW9kdWxlKFwiZmFtb3VzLmFuZ3VsYXJcIikuZGlyZWN0aXZlKFwiZmFFZGdlU3dhcHBlclwiLFtcIiRmYW1vdXNcIixcIiRmYW1vdXNEZWNvcmF0b3JcIixmdW5jdGlvbihlLG4pe3JldHVybntzY29wZTohMCxyZXN0cmljdDpcIkFcIixwcmlvcml0eTo1MTIsY29tcGlsZTpmdW5jdGlvbigpe3ZhciByPWVbXCJmYW1vdXMvdmlld3MvRWRnZVN3YXBwZXJcIl07cmV0dXJue3ByZTpmdW5jdGlvbihlLGEsbyl7dmFyIHQsaT1uLmVuc3VyZUlzb2xhdGUoZSk7aS4kJGFuaW1hdGVFbnRlckhhbmRsZXI9ZnVuY3Rpb24oZSxuKXtpLnJlbmRlck5vZGUuc2hvdyh0LGZ1bmN0aW9uKCl7aS4kJGxlYXZlRG9uZUNhbGxiYWNrJiZpLiQkbGVhdmVEb25lQ2FsbGJhY2soKSxuLiRkb25lKCl9KX0saS4kJGFuaW1hdGVMZWF2ZUhhbmRsZXI9ZnVuY3Rpb24oZSxuKXtpLiQkbGVhdmVEb25lQ2FsbGJhY2s9bi4kZG9uZX07dmFyIHM9ZS4kZXZhbChvLmZhT3B0aW9ucyk7aS5yZW5kZXJOb2RlPW5ldyByKHMpLG4uYWRkUm9sZShcInJlbmRlcmFibGVcIixpKSxpLnNob3coKSxuLnNlcXVlbmNlV2l0aChlLGZ1bmN0aW9uKGUpe3Q9ZS5yZW5kZXJHYXRlfSl9LHBvc3Q6ZnVuY3Rpb24oZSxyKXt2YXIgYT1uLmVuc3VyZUlzb2xhdGUoZSk7bi5yZWdpc3RlckNoaWxkKGUscixhKX19fX19XSksYW5ndWxhci5tb2R1bGUoXCJmYW1vdXMuYW5ndWxhclwiKS5kaXJlY3RpdmUoXCJmYUZsZXhpYmxlTGF5b3V0XCIsW1wiJGZhbW91c1wiLFwiJGZhbW91c0RlY29yYXRvclwiLGZ1bmN0aW9uKGUsbil7cmV0dXJue3RlbXBsYXRlOlwiPGRpdj48L2Rpdj5cIixyZXN0cmljdDpcIkVcIix0cmFuc2NsdWRlOiEwLHNjb3BlOiEwLGNvbXBpbGU6ZnVuY3Rpb24ocixhLG8pe3JldHVybntwcmU6ZnVuY3Rpb24ocixhLG8pe3ZhciB0PW4uZW5zdXJlSXNvbGF0ZShyKSxpPWVbXCJmYW1vdXMvdmlld3MvRmxleGlibGVMYXlvdXRcIl0scz0oZVtcImZhbW91cy9jb3JlL1ZpZXdTZXF1ZW5jZVwiXSxlW1wiZmFtb3VzL2NvcmUvUmVuZGVyTm9kZVwiXSxbXSksdT1yLiRldmFsKG8uZmFPcHRpb25zKXx8e307dC5yZW5kZXJOb2RlPW5ldyBpKHUpLG4uYWRkUm9sZShcInJlbmRlcmFibGVcIix0KSx0LnNob3coKTt2YXIgYz1mdW5jdGlvbigpe3Muc29ydChmdW5jdGlvbihlLG4pe3JldHVybiBlLmluZGV4LW4uaW5kZXh9KSx0LnJlbmRlck5vZGUuc2VxdWVuY2VGcm9tKGZ1bmN0aW9uKGUpe3ZhciBuPVtdO3JldHVybiBhbmd1bGFyLmZvckVhY2goZSxmdW5jdGlvbihlLHIpe25bcl09ZS5yZW5kZXJHYXRlfSksbn0ocykpfTtuLnNlcXVlbmNlV2l0aChyLGZ1bmN0aW9uKGUpe3MucHVzaChlKSxjKCl9LGZ1bmN0aW9uKGUpe3M9ZnVuY3Rpb24obil7dmFyIHI9W107cmV0dXJuIGFuZ3VsYXIuZm9yRWFjaChuLGZ1bmN0aW9uKG4pe24uaWQhPT1lJiZyLnB1c2gobil9KSxyfShzKSxjKCl9KX0scG9zdDpmdW5jdGlvbihlLHIpe3ZhciBhPW4uZW5zdXJlSXNvbGF0ZShlKTtvKGUsZnVuY3Rpb24oZSl7ci5maW5kKFwiZGl2XCIpLmFwcGVuZChlKX0pLGUuJGVtaXQoXCJyZWdpc3RlckNoaWxkXCIsYSl9fX19fV0pLGFuZ3VsYXIubW9kdWxlKFwiZmFtb3VzLmFuZ3VsYXJcIikuZGlyZWN0aXZlKFwiZmFGbGlwcGVyXCIsW1wiJGZhbW91c1wiLFwiJGZhbW91c0RlY29yYXRvclwiLGZ1bmN0aW9uKGUsbil7cmV0dXJue3RlbXBsYXRlOlwiPGRpdj48L2Rpdj5cIixyZXN0cmljdDpcIkVcIix0cmFuc2NsdWRlOiEwLHNjb3BlOiEwLGNvbXBpbGU6ZnVuY3Rpb24ocixhLG8pe3JldHVybntwcmU6ZnVuY3Rpb24ocixhLG8pe3ZhciB0PW4uZW5zdXJlSXNvbGF0ZShyKSxpPWVbXCJmYW1vdXMvdmlld3MvRmxpcHBlclwiXSxzPXIuJGV2YWwoby5mYU9wdGlvbnMpfHx7fTt0LnJlbmRlck5vZGU9bmV3IGkocyksbi5hZGRSb2xlKFwicmVuZGVyYWJsZVwiLHQpLHQuc2hvdygpLHQuY2hpbGRyZW49W10sdC5mbGlwPWZ1bmN0aW9uKGUpe3QucmVuZGVyTm9kZS5mbGlwKGV8fHIuJGV2YWwoby5mYU9wdGlvbnMpKX0sbi5zZXF1ZW5jZVdpdGgocixmdW5jdGlvbihlKXt2YXIgbj10LmNoaWxkcmVuLmxlbmd0aDtpZigwPT09bil0LnJlbmRlck5vZGUuc2V0RnJvbnQoZS5yZW5kZXJHYXRlKTtlbHNle2lmKDEhPT1uKXRocm93IG5ldyBFcnJvcihcImZhLWZsaXBwZXIgYWNjZXB0cyBvbmx5IHR3byBjaGlsZCBlbGVtZW50czsgbW9yZSB0aGFuIHR3byBoYXZlIGJlZW4gcHJvdmlkZWRcIik7dC5yZW5kZXJOb2RlLnNldEJhY2soZS5yZW5kZXJHYXRlKX10LmNoaWxkcmVuLnB1c2goZS5yZW5kZXJHYXRlKX0sZnVuY3Rpb24oKXt0LmNoaWxkcmVuLnNwbGljZSh0LmNoaWxkcmVuLmxlbmd0aC0xLDEpfSl9LHBvc3Q6ZnVuY3Rpb24oZSxyKXt2YXIgYT1uLmVuc3VyZUlzb2xhdGUoZSk7byhlLGZ1bmN0aW9uKGUpe3IuZmluZChcImRpdlwiKS5hcHBlbmQoZSl9KSxuLnJlZ2lzdGVyQ2hpbGQoZSxyLGEpfX19fX1dKSxhbmd1bGFyLm1vZHVsZShcImZhbW91cy5hbmd1bGFyXCIpLmRpcmVjdGl2ZShcImZhR3JpZExheW91dFwiLFtcIiRmYW1vdXNcIixcIiRmYW1vdXNEZWNvcmF0b3JcIixmdW5jdGlvbihlLG4pe3JldHVybnt0ZW1wbGF0ZTpcIjxkaXY+PC9kaXY+XCIscmVzdHJpY3Q6XCJFXCIsdHJhbnNjbHVkZTohMCxzY29wZTohMCxjb21waWxlOmZ1bmN0aW9uKHIsYSxvKXtyZXR1cm57cHJlOmZ1bmN0aW9uKHIsYSxvKXt2YXIgdD1uLmVuc3VyZUlzb2xhdGUociksaT1lW1wiZmFtb3VzL3ZpZXdzL0dyaWRMYXlvdXRcIl0scz0oZVtcImZhbW91cy9jb3JlL1ZpZXdTZXF1ZW5jZVwiXSxbXSksdT1yLiRldmFsKG8uZmFPcHRpb25zKXx8e307dC5yZW5kZXJOb2RlPW5ldyBpKHUpLG4uYWRkUm9sZShcInJlbmRlcmFibGVcIix0KSx0LnNob3coKTt2YXIgYz1mdW5jdGlvbigpe3IuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCl7cy5zb3J0KGZ1bmN0aW9uKGUsbil7cmV0dXJuIGUuaW5kZXgtbi5pbmRleH0pLHQucmVuZGVyTm9kZS5zZXF1ZW5jZUZyb20oZnVuY3Rpb24oZSl7dmFyIG49W107cmV0dXJuIGFuZ3VsYXIuZm9yRWFjaChlLGZ1bmN0aW9uKGUscil7bltyXT1lLnJlbmRlckdhdGV9KSxufShzKSl9KX07bi5zZXF1ZW5jZVdpdGgocixmdW5jdGlvbihlKXtzLnB1c2goZSksYygpfSxmdW5jdGlvbihlKXtzPWZ1bmN0aW9uKG4pe3ZhciByPVtdO3JldHVybiBhbmd1bGFyLmZvckVhY2gobixmdW5jdGlvbihuKXtuLmlkIT09ZSYmci5wdXNoKG4pfSkscn0ocyksYygpfSxjKX0scG9zdDpmdW5jdGlvbihlLHIpe3ZhciBhPW4uZW5zdXJlSXNvbGF0ZShlKTtvKGUsZnVuY3Rpb24oZSl7ci5maW5kKFwiZGl2XCIpLmFwcGVuZChlKX0pLG4ucmVnaXN0ZXJDaGlsZChlLHIsYSl9fX19fV0pLGFuZ3VsYXIubW9kdWxlKFwiZmFtb3VzLmFuZ3VsYXJcIikuZGlyZWN0aXZlKFwiZmFIZWFkZXJGb290ZXJMYXlvdXRcIixbXCIkZmFtb3VzXCIsXCIkZmFtb3VzRGVjb3JhdG9yXCIsZnVuY3Rpb24oZSxuKXtyZXR1cm57dGVtcGxhdGU6XCI8ZGl2PjwvZGl2PlwiLHJlc3RyaWN0OlwiRVwiLHRyYW5zY2x1ZGU6ITAsc2NvcGU6ITAsY29tcGlsZTpmdW5jdGlvbihyLGEsbyl7dmFyIHQ9ZVtcImZhbW91cy92aWV3cy9IZWFkZXJGb290ZXJMYXlvdXRcIl0saT1lW1wiZmFtb3VzL2NvcmUvUmVuZGVyTm9kZVwiXTtyZXR1cm57cHJlOmZ1bmN0aW9uKGUscixhKXt2YXIgbz1uLmVuc3VyZUlzb2xhdGUoZSkscz0obmV3IGksbmV3IGksbmV3IGksZS4kZXZhbChhLmZhT3B0aW9ucyl8fHt9KTtvLnJlbmRlck5vZGU9bmV3IHQocyksbi5hZGRSb2xlKFwicmVuZGVyYWJsZVwiLG8pLG8uc2hvdygpO3ZhciB1PTA7bi5zZXF1ZW5jZVdpdGgoZSxmdW5jdGlvbihlKXtpZih1KyssMT09PXUpby5yZW5kZXJOb2RlLmhlYWRlci5hZGQoZS5yZW5kZXJHYXRlKTtlbHNlIGlmKDI9PT11KW8ucmVuZGVyTm9kZS5jb250ZW50LmFkZChlLnJlbmRlckdhdGUpO2Vsc2V7aWYoMyE9PXUpdGhyb3cgbmV3IEVycm9yKFwiZmEtaGVhZGVyLWZvb3Rlci1sYXlvdXQgY2FuIGFjY2VwdCBubyBtb3JlIHRoYW4gMyBjaGlsZHJlblwiKTtvLnJlbmRlck5vZGUuZm9vdGVyLmFkZChlLnJlbmRlckdhdGUpfX0sZnVuY3Rpb24oKXsxPT09dT9vLnJlbmRlck5vZGUuaGVhZGVyLnNldCh7fSk6Mj09PXU/by5yZW5kZXJOb2RlLmNvbnRlbnQuc2V0KHt9KTozPT09dSYmby5yZW5kZXJOb2RlLmZvb3Rlci5zZXQoe30pLHUtLX0pfSxwb3N0OmZ1bmN0aW9uKGUscil7dmFyIGE9bi5lbnN1cmVJc29sYXRlKGUpO28oZSxmdW5jdGlvbihlKXtyLmZpbmQoXCJkaXZcIikuYXBwZW5kKGUpfSksbi5yZWdpc3RlckNoaWxkKGUscixhKX19fX19XSksYW5ndWxhci5tb2R1bGUoXCJmYW1vdXMuYW5ndWxhclwiKS5kaXJlY3RpdmUoXCJmYUltYWdlU3VyZmFjZVwiLFtcIiRmYW1vdXNcIixcIiRmYW1vdXNEZWNvcmF0b3JcIixmdW5jdGlvbihlLG4pe3JldHVybntzY29wZTohMCx0ZW1wbGF0ZTonPGRpdiBjbGFzcz1cImZhLWltYWdlLXN1cmZhY2VcIj48L2Rpdj4nLHJlc3RyaWN0OlwiRUFcIixjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3ByZTpmdW5jdGlvbihyLGEsbyl7e3ZhciB0PW4uZW5zdXJlSXNvbGF0ZShyKSxpPWVbXCJmYW1vdXMvc3VyZmFjZXMvSW1hZ2VTdXJmYWNlXCJdO2VbXCJmYW1vdXMvY29yZS9UcmFuc2Zvcm1cIl0sZVtcImZhbW91cy9jb3JlL0V2ZW50SGFuZGxlclwiXX1yLiR3YXRjaChmdW5jdGlvbigpe3JldHVybiB0LmdldFByb3BlcnRpZXMoKX0sZnVuY3Rpb24oKXt0LnJlbmRlck5vZGUmJnQucmVuZGVyTm9kZS5zZXRQcm9wZXJ0aWVzKHQuZ2V0UHJvcGVydGllcygpKX0sITApO3ZhciBzPWZ1bmN0aW9uKGUpe3JldHVyblwiZmFcIitlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Uuc2xpY2UoMSl9O3QuZ2V0UHJvcGVydGllcz1mdW5jdGlvbigpe2Zvcih2YXIgZT1yLiRldmFsKG8uZmFQcm9wZXJ0aWVzKXx8e30sbj1bXCJiYWNrZ3JvdW5kQ29sb3JcIixcImNvbG9yXCJdLGE9MDthPG4ubGVuZ3RoO2ErKyl7dmFyIHQ9blthXSxpPXModCk7b1tpXSYmKGVbdF09ci4kZXZhbChvW2ldKSl9cmV0dXJuIGV9LHQucmVuZGVyTm9kZT1uZXcgaSh7c2l6ZTpyLiRldmFsKG8uZmFTaXplKSxcImNsYXNzXCI6ci4kZXZhbChvLmNsYXNzKSxwcm9wZXJ0aWVzOnQuZ2V0UHJvcGVydGllcygpfSksbi5hZGRSb2xlKFwicmVuZGVyYWJsZVwiLHQpLHQuc2hvdygpLG8uY2xhc3MmJnQucmVuZGVyTm9kZS5zZXRDbGFzc2VzKG9bXCJjbGFzc1wiXS5zcGxpdChcIiBcIikpfSxwb3N0OmZ1bmN0aW9uKGUscixhKXt2YXIgbz1uLmVuc3VyZUlzb2xhdGUoZSksdD1mdW5jdGlvbigpe28ucmVuZGVyTm9kZS5zZXRDb250ZW50KGEuZmFJbWFnZVVybCl9O3QoKSxhLiRvYnNlcnZlKFwiZmFJbWFnZVVybFwiLHQpLG4ucmVnaXN0ZXJDaGlsZChlLHIsbyl9fX19fV0pLGFuZ3VsYXIubW9kdWxlKFwiZmFtb3VzLmFuZ3VsYXJcIikuZGlyZWN0aXZlKFwiZmFJbmRleFwiLFtcIiRwYXJzZVwiLFwiJGZhbW91c0RlY29yYXRvclwiLGZ1bmN0aW9uKGUsbil7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHNjb3BlOiExLHByaW9yaXR5OjE2LGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cG9zdDpmdW5jdGlvbihlLHIsYSl7dmFyIG89bi5lbnN1cmVJc29sYXRlKGUscik7by5pbmRleD1lLiRldmFsKGEuZmFJbmRleCksZS4kd2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4gZS4kZXZhbChhLmZhSW5kZXgpfSxmdW5jdGlvbigpe28uaW5kZXg9ZS4kZXZhbChhLmZhSW5kZXgpLG8udXBkYXRlTWV0aG9kJiZvLnVwZGF0ZU1ldGhvZCgpfSl9fX19fV0pLGFuZ3VsYXIubW9kdWxlKFwiZmFtb3VzLmFuZ3VsYXJcIikuY29uZmlnKFtcIiRwcm92aWRlXCIsZnVuY3Rpb24oZSl7ZS5kZWNvcmF0b3IoXCJuZ0NsaWNrRGlyZWN0aXZlXCIsW1wiJGRlbGVnYXRlXCIsXCIkZmFtb3VzRGVjb3JhdG9yXCIsXCIkcGFyc2VcIixcIiRyb290RWxlbWVudFwiLFwiJGZhbW91c1wiLFwiJHRpbWVvdXRcIixmdW5jdGlvbihlLG4scixhLG8sdCl7ZnVuY3Rpb24gaShlLG4scixhKXtyZXR1cm4gTWF0aC5hYnMoZS1yKTwkJiZNYXRoLmFicyhuLWEpPCR9ZnVuY3Rpb24gcyhlLG4scil7Zm9yKHZhciBhPTA7YTxlLmxlbmd0aDthKz0yKWlmKGkoZVthXSxlW2ErMV0sbixyKSlyZXR1cm4gZS5zcGxpY2UoYSxhKzIpLCEwO3JldHVybiExfWZ1bmN0aW9uIHUoZSl7aWYoIShEYXRlLm5vdygpLWw+aCkpe3ZhciBuPWUudG91Y2hlcyYmZS50b3VjaGVzLmxlbmd0aD9lLnRvdWNoZXM6W2VdLHI9blswXS5jbGllbnRYLGE9blswXS5jbGllbnRZO3MoZCxyLGEpfHwoZS5zdG9wUHJvcGFnYXRpb24oKSxlLnByZXZlbnREZWZhdWx0KCksZS50YXJnZXQmJmUudGFyZ2V0LmJsdXIoKSl9fWZ1bmN0aW9uIGMoZSl7dmFyIG49ZS50b3VjaGVzJiZlLnRvdWNoZXMubGVuZ3RoP2UudG91Y2hlczpbZV0scj1uWzBdLmNsaWVudFgsYT1uWzBdLmNsaWVudFk7ZC5wdXNoKHIsYSksdChmdW5jdGlvbigpe2Zvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSs9MilpZihkW2VdPT09ciYmZFtlKzFdPT09YSlyZXR1cm4gdm9pZCBkLnNwbGljZShlLGUrMil9LGgsITEpfWZ1bmN0aW9uIGYoZSxuKXtkfHwoYVswXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix1LCEwKSxhWzBdLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsYywhMCksZD1bXSksbD1EYXRlLm5vdygpLHMoZCxlLG4pfXt2YXIgbCxkLG09ZVswXSxwPW0uY29tcGlsZSx2PTc1MCxnPTEyLGg9MjUwMCwkPTI1LHk9XCJuZy1jbGljay1hY3RpdmVcIjtvW1wiZmFtb3VzL2NvcmUvRW5naW5lXCJdfXJldHVybiBtLmNvbXBpbGU9ZnVuY3Rpb24oZSxuLGEpe3JldHVybiBvLnV0aWwuaXNGYUVsZW1lbnQoZSk/by51dGlsLmlzQVN1cmZhY2UoZSk/e3Bvc3Q6ZnVuY3Rpb24oZSxuLGEpe2Z1bmN0aW9uIHQoKXtkPSExLHAucmVtb3ZlQ2xhc3MoeSl9dmFyIGkscyx1LGMsbD1yKGEubmdDbGljayksZD0hMSxtPW8uZ2V0SXNvbGF0ZShlKSxwPW0ucmVuZGVyTm9kZTtwLm9uKFwidG91Y2hzdGFydFwiLGZ1bmN0aW9uKGUpe2Q9ITAsaT1lLnRhcmdldD9lLnRhcmdldDplLnNyY0VsZW1lbnQsMz09PWkubm9kZVR5cGUmJihpPWkucGFyZW50Tm9kZSkscC5hZGRDbGFzcyh5KSxzPURhdGUubm93KCk7dmFyIG49ZS50b3VjaGVzJiZlLnRvdWNoZXMubGVuZ3RoP2UudG91Y2hlczpbZV0scj1uWzBdLm9yaWdpbmFsRXZlbnR8fG5bMF07dT1yLmNsaWVudFgsYz1yLmNsaWVudFl9KSxwLm9uKFwidG91Y2htb3ZlXCIsZnVuY3Rpb24oKXt0KCl9KSxwLm9uKFwidG91Y2hjYW5jZWxcIixmdW5jdGlvbigpe3QoKX0pLHAub24oXCJ0b3VjaGVuZFwiLGZ1bmN0aW9uKGUpe3ZhciBuPURhdGUubm93KCktcyxyPWUuY2hhbmdlZFRvdWNoZXMmJmUuY2hhbmdlZFRvdWNoZXMubGVuZ3RoP2UuY2hhbmdlZFRvdWNoZXM6ZS50b3VjaGVzJiZlLnRvdWNoZXMubGVuZ3RoP2UudG91Y2hlczpbZV0sbz1yWzBdLm9yaWdpbmFsRXZlbnR8fHJbMF0saT1vLmNsaWVudFgsbD1vLmNsaWVudFksbT1NYXRoLnNxcnQoTWF0aC5wb3coaS11LDIpK01hdGgucG93KGwtYywyKSk7ZCYmdj5uJiZnPm0mJihmKGksbCksYW5ndWxhci5pc0RlZmluZWQoYS5kaXNhYmxlZCkmJlwiZmFsc2VcIiE9PWEuZGlzYWJsZWR8fHAuZW1pdChcImNsaWNrXCIsW2VdKSksdCgpfSkscC5vbihcImNsaWNrXCIsZnVuY3Rpb24obixyKXtlLiRhcHBseShmdW5jdGlvbigpe2woZSx7JGV2ZW50OnJ8fG59KX0pfSkscC5vbihcIm1vdXNlZG93blwiLGZ1bmN0aW9uKCl7cC5hZGRDbGFzcyh5KX0pLHAub24oXCJtb3VzZW1vdmUgbW91c2V1cFwiLGZ1bmN0aW9uKCl7cC5yZW1vdmVDbGFzcyh5KX0pfX06dm9pZCAwOnAoZSxuLGEpfSxlfV0pLGFuZ3VsYXIuZm9yRWFjaChcImRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZW1vdmUgbW91c2VlbnRlciBtb3VzZWxlYXZlIGtleWRvd24ga2V5dXAga2V5cHJlc3Mgc3VibWl0IGZvY3VzIGJsdXIgY29weSBjdXQgcGFzdGVcIi5zcGxpdChcIiBcIiksZnVuY3Rpb24obil7dmFyIHI9d2luZG93LiRmYW1vdXNVdGlsLmRpcmVjdGl2ZU5vcm1hbGl6ZShcIm5nLVwiK24pO2UuZGVjb3JhdG9yKHIrXCJEaXJlY3RpdmVcIixbXCIkZGVsZWdhdGVcIixcIiRmYW1vdXNEZWNvcmF0b3JcIixcIiRwYXJzZVwiLFwiJGZhbW91c1wiLGZ1bmN0aW9uKGUsYSxvLHQpe3ZhciBpPWVbMF0scz1pLmNvbXBpbGU7cmV0dXJuIGkuY29tcGlsZT1mdW5jdGlvbihlLGksdSl7cmV0dXJuIHQudXRpbC5pc0ZhRWxlbWVudChlKT97cG9zdDpmdW5jdGlvbihlLHQsaSl7dmFyIHM9YS5lbnN1cmVJc29sYXRlKGUpO2lmKGlbcl0pe3ZhciB1PXMucmVuZGVyTm9kZS5fZXZlbnRJbnB1dHx8cy5yZW5kZXJOb2RlO3Uub24obixmdW5jdGlvbihuKXt2YXIgYT1vKGlbcl0pO2EoZSx7JGV2ZW50Om59KSxlLiQkcGhhc2V8fGUuJGFwcGx5KCl9KX19fTpzKGUsaSx1KX0sZX1dKX0pfV0pLGFuZ3VsYXIubW9kdWxlKFwiZmFtb3VzLmFuZ3VsYXJcIikuZGlyZWN0aXZlKFwiZmFNb2RpZmllclwiLFtcIiRmYW1vdXNcIixcIiRmYW1vdXNEZWNvcmF0b3JcIixcIiRwYXJzZVwiLFwiJHJvb3RTY29wZVwiLGZ1bmN0aW9uKGUsbixyLGEpe3JldHVybnt0ZW1wbGF0ZTpcIjxkaXY+PC9kaXY+XCIsdHJhbnNjbHVkZTohMCxyZXN0cmljdDpcIkVBXCIscHJpb3JpdHk6MixzY29wZTohMCxjb21waWxlOmZ1bmN0aW9uKG8sdCxpKXtyZXR1cm57cG9zdDpmdW5jdGlvbihvLHQscyl7dmFyIHU9bi5lbnN1cmVJc29sYXRlKG8pLGM9ZVtcImZhbW91cy9jb3JlL1JlbmRlck5vZGVcIl0sZj1lW1wiZmFtb3VzL2NvcmUvTW9kaWZpZXJcIl0sbD1lW1wiZmFtb3VzL2NvcmUvVHJhbnNmb3JtXCJdLGQ9ZVtcImZhbW91cy9waHlzaWNzL2JvZGllcy9QYXJ0aWNsZVwiXSxtPWZ1bmN0aW9uKGUpe3JldHVybiBlLmdldFBvc2l0aW9uKCl9LHA9W1wiYWJvdXRPcmlnaW5cIixcInBlcnNwZWN0aXZlXCIsXCJyb3RhdGVcIixcInJvdGF0ZUF4aXNcIixcInJvdGF0ZVhcIixcInJvdGF0ZVlcIixcInJvdGF0ZVpcIixcInNjYWxlXCIsXCJza2V3XCIsXCJ0cmFuc2xhdGVcIl07cy4kb2JzZXJ2ZShcImZhVHJhbnNmb3JtT3JkZXJcIixmdW5jdGlvbigpe3ZhciBlPW8uJGV2YWwocy5mYVRyYW5zZm9ybU9yZGVyKTt2b2lkIDAhPT1lJiYocD1lKX0pO3ZhciB2PXt9O2FuZ3VsYXIuZm9yRWFjaChwLGZ1bmN0aW9uKG4pe3ZhciBhPWUudXRpbC5kaXJlY3RpdmVOb3JtYWxpemUoXCJmYS1cIituKTtzLiRvYnNlcnZlKGEsZnVuY3Rpb24oKXt2W25dPXIoc1thXSl9KX0pO3ZhciBnPWFuZ3VsYXIubm9vcDtzLiRvYnNlcnZlKFwiZmFUcmFuc2Zvcm1cIixmdW5jdGlvbigpe2c9cihzLmZhVHJhbnNmb3JtKX0pLHUuZ2V0VHJhbnNmb3JtPWZ1bmN0aW9uKCl7dmFyIGU9ZyhvKTtpZih2b2lkIDAhPT1lKXJldHVybiBlIGluc3RhbmNlb2YgRnVuY3Rpb24/ZSgpOmUgaW5zdGFuY2VvZiBPYmplY3QmJnZvaWQgMCE9PWUuZ2V0P2UuZ2V0KCk6ZTt2YXIgbj1bXTtyZXR1cm4gYW5ndWxhci5mb3JFYWNoKHAsZnVuY3Rpb24oZSl7dmFyIHI9dltlXT92W2VdKG8pOnZvaWQgMDt2b2lkIDAhPT1yJiYociBpbnN0YW5jZW9mIEZ1bmN0aW9uJiYocj1yKCkpLG4ucHVzaChyIGluc3RhbmNlb2YgQXJyYXk/bFtlXS5hcHBseSh0aGlzLHIpOnIgaW5zdGFuY2VvZiBkP2xbZV0uYXBwbHkodGhpcyxtKHIpKTpsW2VdLmNhbGwodGhpcyxyKSkpfSksbi5sZW5ndGg/MT09PW4ubGVuZ3RoP25bMF06bC5tdWx0aXBseS5hcHBseSh0aGlzLG4pOnZvaWQgMH07dmFyIGg9YW5ndWxhci5ub29wO3MuJG9ic2VydmUoXCJmYUFsaWduXCIsZnVuY3Rpb24oKXtoPXIocy5mYUFsaWduKX0pLHUuZ2V0QWxpZ249ZnVuY3Rpb24oKXt2YXIgZT1oKG8pO3JldHVybiBlIGluc3RhbmNlb2YgRnVuY3Rpb24/ZSgpOmUgaW5zdGFuY2VvZiBPYmplY3QmJnZvaWQgMCE9PWUuZ2V0P2UuZ2V0KCk6ZSBpbnN0YW5jZW9mIGQ/bShlKTplfTt2YXIgJD1hbmd1bGFyLm5vb3A7cy4kb2JzZXJ2ZShcImZhT3BhY2l0eVwiLGZ1bmN0aW9uKCl7JD1yKHMuZmFPcGFjaXR5KX0pLHUuZ2V0T3BhY2l0eT1mdW5jdGlvbigpe3ZhciBlPSQobyk7cmV0dXJuIHZvaWQgMD09PWU/MTplIGluc3RhbmNlb2YgRnVuY3Rpb24/ZSgpOmUgaW5zdGFuY2VvZiBPYmplY3QmJnZvaWQgMCE9PWUuZ2V0P2UuZ2V0KCk6ZSBpbnN0YW5jZW9mIGQ/bShlKTplfTt2YXIgeT1hbmd1bGFyLm5vb3A7cy4kb2JzZXJ2ZShcImZhU2l6ZVwiLGZ1bmN0aW9uKCl7eT1yKHMuZmFTaXplKX0pLHUuZ2V0U2l6ZT1mdW5jdGlvbigpe3ZhciBlPXkobyk7cmV0dXJuIGUgaW5zdGFuY2VvZiBGdW5jdGlvbj9lKCk6ZSBpbnN0YW5jZW9mIE9iamVjdCYmdm9pZCAwIT09ZS5nZXQ/ZS5nZXQoKTplIGluc3RhbmNlb2YgZD9tKGUpOmV9O3ZhciB3PWFuZ3VsYXIubm9vcDtzLiRvYnNlcnZlKFwiZmFPcmlnaW5cIixmdW5jdGlvbigpe3c9cihzLmZhT3JpZ2luKX0pLHUuZ2V0T3JpZ2luPWZ1bmN0aW9uKCl7dmFyIGU9dyhvKTtyZXR1cm4gZSBpbnN0YW5jZW9mIEZ1bmN0aW9uP2UoKTplIGluc3RhbmNlb2YgT2JqZWN0JiZ2b2lkIDAhPT1lLmdldD9lLmdldCgpOmUgaW5zdGFuY2VvZiBkP20oZSk6ZX0sdS5tb2RpZmllcj1uZXcgZih7dHJhbnNmb3JtOnUuZ2V0VHJhbnNmb3JtLHNpemU6dS5nZXRTaXplLG9wYWNpdHk6dS5nZXRPcGFjaXR5LG9yaWdpbjp1LmdldE9yaWdpbixhbGlnbjp1LmdldEFsaWdufSksdS5yZW5kZXJOb2RlPShuZXcgYykuYWRkKHUubW9kaWZpZXIpLG4uYWRkUm9sZShcInJlbmRlcmFibGVcIix1KSx1LnNob3coKSxuLnNlcXVlbmNlV2l0aChvLGZ1bmN0aW9uKGUpe3UucmVuZGVyTm9kZS5hZGQoZS5yZW5kZXJHYXRlKX0pLGkobyxmdW5jdGlvbihlKXt0LmZpbmQoXCJkaXZcIikuYXBwZW5kKGUpfSksbi5yZWdpc3RlckNoaWxkKG8sdCx1LGZ1bmN0aW9uKCl7dS5tb2RpZmllci5zZXRPcGFjaXR5KDApfSksby4kJHBoYXNlfHxhLiQkcGhhc2V8fG8uJGFwcGx5KCl9fX19fV0pLGFuZ3VsYXIubW9kdWxlKFwiZmFtb3VzLmFuZ3VsYXJcIikuZGlyZWN0aXZlKFwiZmFNb3VzZW92ZXJcIixbXCIkcGFyc2VcIixcIiRmYW1vdXNEZWNvcmF0b3JcIixmdW5jdGlvbihlLG4pe3JldHVybntyZXN0cmljdDpcIkFcIixzY29wZTohMSxjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3Bvc3Q6ZnVuY3Rpb24ocixhLG8pe3ZhciB0PW4uZW5zdXJlSXNvbGF0ZShyKTtpZihvLmZhTW91c2VvdmVyKXt2YXIgaT10LnJlbmRlck5vZGUuX2V2ZW50SW5wdXR8fHQucmVuZGVyTm9kZTtpLm9uKFwibW91c2VvdmVyXCIsZnVuY3Rpb24obil7dmFyIGE9ZShvLmZhTW91c2VvdmVyKTthKHIseyRldmVudDpufSksci4kJHBoYXNlfHxyLiRhcHBseSgpfSl9fX19fX1dKSxhbmd1bGFyLm1vZHVsZShcImZhbW91cy5hbmd1bGFyXCIpLmRpcmVjdGl2ZShcImZhT3B0aW9uc1wiLFtcIiRwYXJzZVwiLFwiJGZhbW91c0RlY29yYXRvclwiLGZ1bmN0aW9uKGUsbil7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHNjb3BlOiExLHByaW9yaXR5Oi0xNixjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3Bvc3Q6ZnVuY3Rpb24oZSxyLGEpe3ZhciBvPW4uZW5zdXJlSXNvbGF0ZShlLHIpO2UuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIGUuJGV2YWwoYS5mYU9wdGlvbnMpfSxmdW5jdGlvbigpe28ucmVuZGVyTm9kZS5zZXRPcHRpb25zKGUuJGV2YWwoYS5mYU9wdGlvbnMpKX0sITApfX19fX1dKSxhbmd1bGFyLm1vZHVsZShcImZhbW91cy5hbmd1bGFyXCIpLmRpcmVjdGl2ZShcImZhUGlwZUZyb21cIixbXCIkZmFtb3VzXCIsXCIkZmFtb3VzRGVjb3JhdG9yXCIsXCIkZmFtb3VzUGlwZVwiLGZ1bmN0aW9uKGUsbixyKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIsc2NvcGU6ITEscHJpb3JpdHk6MTYsY29tcGlsZTpmdW5jdGlvbigpe3ZhciBhPWVbXCJmYW1vdXMvY29yZS9FbmdpbmVcIl07cmV0dXJue3Bvc3Q6ZnVuY3Rpb24oZSxvLHQpe3ZhciBpPW4uZW5zdXJlSXNvbGF0ZShlKTtlLiR3YXRjaChmdW5jdGlvbigpe3JldHVybiBlLiRldmFsKHQuZmFQaXBlRnJvbSl9LGZ1bmN0aW9uKGUsbil7dmFyIG87bz1pLnJlbmRlck5vZGUmJmkucmVuZGVyTm9kZS5faXNNb2RpZmllcj9pLnJlbmRlck5vZGUuX29iamVjdDppLnJlbmRlck5vZGU/aS5yZW5kZXJOb2RlLl9ldmVudElucHV0fHxpLnJlbmRlck5vZGU6YSxyLnVucGlwZXNGcm9tVGFyZ2V0cyhvLG4pLHIucGlwZXNUb1RhcmdldHMobyxlKX0pLGUuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe3IudW5waXBlc0Zyb21UYXJnZXRzKGkucmVuZGVyTm9kZXx8YSxlLiRldmFsKHQuZmFQaXBlRnJvbSkpfSl9fX19fV0pLGFuZ3VsYXIubW9kdWxlKFwiZmFtb3VzLmFuZ3VsYXJcIikuZGlyZWN0aXZlKFwiZmFQaXBlVG9cIixbXCIkZmFtb3VzXCIsXCIkZmFtb3VzRGVjb3JhdG9yXCIsXCIkZmFtb3VzUGlwZVwiLGZ1bmN0aW9uKGUsbixyKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIsc2NvcGU6ITEscHJpb3JpdHk6MTYsY29tcGlsZTpmdW5jdGlvbigpe3ZhciBhPWVbXCJmYW1vdXMvY29yZS9FbmdpbmVcIl07cmV0dXJue3Bvc3Q6ZnVuY3Rpb24oZSxvLHQpe3ZhciBpPW4uZW5zdXJlSXNvbGF0ZShlKTtlLiR3YXRjaChmdW5jdGlvbigpe3JldHVybiBlLiRldmFsKHQuZmFQaXBlVG8pfSxmdW5jdGlvbihlLG4pe3ZhciBvO289aS5yZW5kZXJOb2RlJiZpLnJlbmRlck5vZGUuX2lzTW9kaWZpZXI/aS5yZW5kZXJOb2RlLl9vYmplY3Q6aS5yZW5kZXJOb2RlP2kucmVuZGVyTm9kZS5fZXZlbnRPdXRwdXR8fGkucmVuZGVyTm9kZTphLHIudW5waXBlc0Zyb21UYXJnZXRzKG4sbyksci5waXBlc1RvVGFyZ2V0cyhlLG8pfSksZS4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7ci51bnBpcGVzRnJvbVRhcmdldHMoZS4kZXZhbCh0LmZhUGlwZVRvKSxpLnJlbmRlck5vZGV8fGEpfSl9fX19fV0pLGFuZ3VsYXIubW9kdWxlKFwiZmFtb3VzLmFuZ3VsYXJcIikuZGlyZWN0aXZlKFwiZmFSZW5kZXJOb2RlXCIsW1wiJGZhbW91c1wiLFwiJGZhbW91c0RlY29yYXRvclwiLGZ1bmN0aW9uKGUsbil7cmV0dXJue3RlbXBsYXRlOlwiPGRpdj48L2Rpdj5cIix0cmFuc2NsdWRlOiEwLHNjb3BlOiEwLHJlc3RyaWN0OlwiRUFcIixjb21waWxlOmZ1bmN0aW9uKHIsYSxvKXtyZXR1cm57cHJlOmZ1bmN0aW9uKHIsYSxvKXt7dmFyIHQ9bi5lbnN1cmVJc29sYXRlKHIpLGk9ZVtcImZhbW91cy9jb3JlL0VuZ2luZVwiXTtcbmVbXCJmYW1vdXMvY29yZS9SZW5kZXJOb2RlXCJdfXQuY2hpbGRyZW49W10sby4kb2JzZXJ2ZShcImZhUGlwZVRvXCIsZnVuY3Rpb24oZSl7dmFyIG49ci4kZXZhbChlKTtuJiZpLnBpcGUobil9KSx0LnJlbmRlck5vZGU9ci4kZXZhbChvLmZhTm9kZSksbi5hZGRSb2xlKFwicmVuZGVyYWJsZVwiLHQpLHQuc2hvdygpLG4uc2VxdWVuY2VXaXRoKHIsZnVuY3Rpb24oZSl7dC5yZW5kZXJOb2RlLmFkZChlLnJlbmRlckdhdGUpLHQuY2hpbGRyZW4ucHVzaChlKX0pfSxwb3N0OmZ1bmN0aW9uKGUscil7dmFyIGE9bi5lbnN1cmVJc29sYXRlKGUpO28oZSxmdW5jdGlvbihlKXtyLmZpbmQoXCJkaXZcIikuYXBwZW5kKGUpfSksbi5yZWdpc3RlckNoaWxkKGUscixhKX19fX19XSksYW5ndWxhci5tb2R1bGUoXCJmYW1vdXMuYW5ndWxhclwiKS5kaXJlY3RpdmUoXCJmYVNjcm9sbFZpZXdcIixbXCIkZmFtb3VzXCIsXCIkZmFtb3VzRGVjb3JhdG9yXCIsZnVuY3Rpb24oZSxuKXtyZXR1cm57dGVtcGxhdGU6XCI8ZGl2PjwvZGl2PlwiLHJlc3RyaWN0OlwiRVwiLHRyYW5zY2x1ZGU6ITAsc2NvcGU6ITAsY29tcGlsZTpmdW5jdGlvbihyLGEsbyl7cmV0dXJue3ByZTpmdW5jdGlvbihyLGEsbyl7dmFyIHQ9bi5lbnN1cmVJc29sYXRlKHIpLGk9ZVtcImZhbW91cy92aWV3cy9TY3JvbGx2aWV3XCJdLHM9ZVtcImZhbW91cy9jb3JlL1ZpZXdTZXF1ZW5jZVwiXSx1PShlW1wiZmFtb3VzL2NvcmUvU3VyZmFjZVwiXSxbXSksYz1yLiRldmFsKG8uZmFPcHRpb25zKXx8e307dC5yZW5kZXJOb2RlPW5ldyBpKGMpLG4uYWRkUm9sZShcInJlbmRlcmFibGVcIix0KSx0LnNob3coKTt2YXIgZj1mdW5jdGlvbihlKXtyLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpe3Uuc29ydChmdW5jdGlvbihlLG4pe3JldHVybiBlLmluZGV4LW4uaW5kZXh9KTt2YXIgbj17YXJyYXk6ZnVuY3Rpb24oZSl7dmFyIG49W107cmV0dXJuIGFuZ3VsYXIuZm9yRWFjaChlLGZ1bmN0aW9uKGUscil7bltyXT1lLnJlbmRlckdhdGV9KSxufSh1KX07ZSYmKG4uaW5kZXg9ci4kZXZhbChvLmZhU3RhcnRJbmRleCkpO3ZhciBhPW5ldyBzKG4pO3QucmVuZGVyTm9kZS5zZXF1ZW5jZUZyb20oYSl9KX07bi5zZXF1ZW5jZVdpdGgocixmdW5jdGlvbihlKXt1LnB1c2goZSksZighMCl9LGZ1bmN0aW9uKGUpe3U9ZnVuY3Rpb24obil7dmFyIHI9W107cmV0dXJuIGFuZ3VsYXIuZm9yRWFjaChuLGZ1bmN0aW9uKG4pe24uaWQhPT1lJiZyLnB1c2gobil9KSxyfSh1KSxmKCl9LGYpfSxwb3N0OmZ1bmN0aW9uKGUscil7dmFyIGE9bi5lbnN1cmVJc29sYXRlKGUpO28oZSxmdW5jdGlvbihlKXtyLmZpbmQoXCJkaXZcIikuYXBwZW5kKGUpfSksbi5yZWdpc3RlckNoaWxkKGUscixhKX19fX19XSksYW5ndWxhci5tb2R1bGUoXCJmYW1vdXMuYW5ndWxhclwiKS5kaXJlY3RpdmUoXCJmYVNlcXVlbnRpYWxMYXlvdXRcIixbXCIkZmFtb3VzXCIsXCIkZmFtb3VzRGVjb3JhdG9yXCIsZnVuY3Rpb24oZSxuKXtyZXR1cm57dGVtcGxhdGU6XCI8ZGl2PjwvZGl2PlwiLHJlc3RyaWN0OlwiRVwiLHRyYW5zY2x1ZGU6ITAsc2NvcGU6ITAsY29tcGlsZTpmdW5jdGlvbihyLGEsbyl7cmV0dXJuIHdpbmRvdy4kZj1lLHtwcmU6ZnVuY3Rpb24ocixhLG8pe3ZhciB0PW4uZW5zdXJlSXNvbGF0ZShyKSxpPWVbXCJmYW1vdXMvdmlld3MvU2VxdWVudGlhbExheW91dFwiXSxzPVtdLHU9ci4kZXZhbChvLmZhT3B0aW9ucyl8fHt9O3QucmVuZGVyTm9kZT1uZXcgaSh1KSxuLmFkZFJvbGUoXCJyZW5kZXJhYmxlXCIsdCksdC5zaG93KCk7dmFyIGM9ZnVuY3Rpb24oKXtzLnNvcnQoZnVuY3Rpb24oZSxuKXtyZXR1cm4gZS5pbmRleC1uLmluZGV4fSksdC5yZW5kZXJOb2RlLnNlcXVlbmNlRnJvbShmdW5jdGlvbihlKXt2YXIgbj1bXTtyZXR1cm4gYW5ndWxhci5mb3JFYWNoKGUsZnVuY3Rpb24oZSxyKXtuW3JdPWUucmVuZGVyR2F0ZX0pLG59KHMpKX07bi5zZXF1ZW5jZVdpdGgocixmdW5jdGlvbihlKXtzLnB1c2goZSksYygpfSxmdW5jdGlvbihlKXtzPWZ1bmN0aW9uKG4pe3ZhciByPVtdO3JldHVybiBhbmd1bGFyLmZvckVhY2gobixmdW5jdGlvbihuKXtuLmlkIT09ZSYmci5wdXNoKG4pfSkscn0ocyksYygpfSl9LHBvc3Q6ZnVuY3Rpb24oZSxyKXt2YXIgYT1uLmVuc3VyZUlzb2xhdGUoZSk7byhlLGZ1bmN0aW9uKGUpe3IuZmluZChcImRpdlwiKS5hcHBlbmQoZSl9KSxuLnJlZ2lzdGVyQ2hpbGQoZSxyLGEpfX19fX1dKSxhbmd1bGFyLm1vZHVsZShcImZhbW91cy5hbmd1bGFyXCIpLmRpcmVjdGl2ZShcImZhU3VyZmFjZVwiLFtcIiRmYW1vdXNcIixcIiRmYW1vdXNEZWNvcmF0b3JcIixcIiRpbnRlcnBvbGF0ZVwiLFwiJGNvbnRyb2xsZXJcIixcIiRjb21waWxlXCIsZnVuY3Rpb24oZSxuKXtyZXR1cm57c2NvcGU6ITAsdHJhbnNjbHVkZTohMCx0ZW1wbGF0ZTonPGRpdiBjbGFzcz1cImZhLXN1cmZhY2VcIj48L2Rpdj4nLHJlc3RyaWN0OlwiRUFcIixjb21waWxlOmZ1bmN0aW9uKHIsYSxvKXtyZXR1cm57cHJlOmZ1bmN0aW9uKHIsYSxvKXt7dmFyIHQ9bi5lbnN1cmVJc29sYXRlKHIpLGk9ZVtcImZhbW91cy9jb3JlL1N1cmZhY2VcIl07ZVtcImZhbW91cy9jb3JlL1RyYW5zZm9ybVwiXSxlW1wiZmFtb3VzL2NvcmUvRXZlbnRIYW5kbGVyXCJdfXIuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuZ2V0UHJvcGVydGllcygpfSxmdW5jdGlvbigpe3QucmVuZGVyTm9kZSYmdC5yZW5kZXJOb2RlLnNldFByb3BlcnRpZXModC5nZXRQcm9wZXJ0aWVzKCkpfSwhMCk7dmFyIHM9ZnVuY3Rpb24oZSl7cmV0dXJuXCJmYVwiK2UuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKX07dC5nZXRQcm9wZXJ0aWVzPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXIuJGV2YWwoby5mYVByb3BlcnRpZXMpfHx7fSxuPVtcImJhY2tncm91bmRDb2xvclwiLFwibWFyZ2luXCIsXCJwYWRkaW5nXCIsXCJjb2xvclwiLFwicG9pbnRlckV2ZW50c1wiLFwiekluZGV4XCJdLGE9MDthPG4ubGVuZ3RoO2ErKyl7dmFyIHQ9blthXSxpPXModCk7b1tpXSYmKGVbdF09ci4kZXZhbChvW2ldKSl9cmV0dXJuIGV9O3ZhciB1PVtdO28uJG9ic2VydmUoXCJmYVNpemVcIixmdW5jdGlvbigpe3QucmVuZGVyTm9kZS5zZXRTaXplKHIuJGV2YWwoby5mYVNpemUpKSx1LnB1c2gobmV3IERhdGUpLHUubGVuZ3RoPjUmJih1WzRdLXVbMF08PTFlMyYmY29uc29sZS53YXJuKFwiVXNpbmcgZmEtc2l6ZSBvbiBmYS1zdXJmYWNlIHRvIGFuaW1hdGUgaXMgc2lnbmlmaWNhbnRseSBub24tcGVyZm9ybWFudCwgcHJlZmVyIHRvIHVzZSBmYS1zaXplIG9uIGFuIGZhLW1vZGlmaWVyIHN1cnJvdW5kaW5nIGEgZmEtc3VyZmFjZVwiKSx1LnNoaWZ0KCkpfSksdC5yZW5kZXJOb2RlPW5ldyBpKHtzaXplOnIuJGV2YWwoby5mYVNpemUpLHByb3BlcnRpZXM6dC5nZXRQcm9wZXJ0aWVzKCl9KSxuLmFkZFJvbGUoXCJyZW5kZXJhYmxlXCIsdCksdC5zaG93KCksby5jbGFzcyYmdC5yZW5kZXJOb2RlLnNldENsYXNzZXMob1tcImNsYXNzXCJdLnNwbGl0KFwiIFwiKSksbi5zZXF1ZW5jZVdpdGgocixmdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcihcIlN1cmZhY2VzIGFyZSBsZWFmIG5vZGVzIG9mIHRoZSBGYW1vLnVzIHJlbmRlciB0cmVlIGFuZCBjYW5ub3QgYWNjZXB0IHJlbmRlcm5vZGUgY2hpbGRyZW4uICBUbyBpbmNsdWRlIGFkZGl0aW9uYWwgRmFtby51cyBjb250ZW50IGluc2lkZSBvZiBhIGZhLXN1cmZhY2UsIHRoYXQgY29udGVudCBtdXN0IGJlIGVuY2xvc2VkIGluIGFuIGFkZGl0aW9uYWwgZmEtYXBwLlwiKX0pfSxwb3N0OmZ1bmN0aW9uKGUscil7dmFyIGE9bi5lbnN1cmVJc29sYXRlKGUpLHQ9ZnVuY3Rpb24oKXthLnJlbmRlck5vZGUuc2V0Q29udGVudChyWzBdLnF1ZXJ5U2VsZWN0b3IoXCJkaXYuZmEtc3VyZmFjZVwiKSl9O3QoKSxvKGUsZnVuY3Rpb24oZSl7YW5ndWxhci5lbGVtZW50KHJbMF0ucXVlcnlTZWxlY3RvckFsbChcImRpdi5mYS1zdXJmYWNlXCIpKS5hcHBlbmQoZSl9KSxuLnJlZ2lzdGVyQ2hpbGQoZSxyLGEsZnVuY3Rpb24oKXt9KX19fX19XSksYW5ndWxhci5tb2R1bGUoXCJmYW1vdXMuYW5ndWxhclwiKS5kaXJlY3RpdmUoXCJmYVRhcFwiLFtcIiRwYXJzZVwiLFwiJGZhbW91c0RlY29yYXRvclwiLGZ1bmN0aW9uKGUsbil7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cG9zdDpmdW5jdGlvbihyLGEsbyl7dmFyIHQ9bi5lbnN1cmVJc29sYXRlKHIpO2lmKG8uZmFUYXApe3ZhciBpPXQucmVuZGVyTm9kZS5fZXZlbnRJbnB1dHx8dC5yZW5kZXJOb2RlLHM9ITE7aS5vbihcInRvdWNobW92ZVwiLGZ1bmN0aW9uKGUpe3JldHVybiBzPSEwLGV9KSxpLm9uKFwidGFwXCIsZnVuY3Rpb24obil7aWYoIXMpe3ZhciBhPWUoby5mYVRhcCk7YShyLHskZXZlbnQ6bn0pLHIuJCRwaGFzZXx8ci4kYXBwbHkoKX1zPSExfSl9fX19fX1dKSxhbmd1bGFyLm1vZHVsZShcImZhbW91cy5hbmd1bGFyXCIpLmRpcmVjdGl2ZShcImZhVG91Y2hlbmRcIixbXCIkcGFyc2VcIixcIiRmYW1vdXNEZWNvcmF0b3JcIixmdW5jdGlvbihlLG4pe3JldHVybntyZXN0cmljdDpcIkFcIixzY29wZTohMSxjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3Bvc3Q6ZnVuY3Rpb24ocixhLG8pe3ZhciB0PW4uZW5zdXJlSXNvbGF0ZShyKTtpZihvLmZhVG91Y2hlbmQpe3ZhciBpPXQucmVuZGVyTm9kZS5fZXZlbnRJbnB1dHx8dC5yZW5kZXJOb2RlO2kub24oXCJ0b3VjaGVuZFwiLGZ1bmN0aW9uKG4pe3ZhciBhPWUoby5mYVRvdWNoZW5kKTthKHIseyRldmVudDpufSksci4kJHBoYXNlfHxyLiRhcHBseSgpfSl9fX19fX1dKSxhbmd1bGFyLm1vZHVsZShcImZhbW91cy5hbmd1bGFyXCIpLmRpcmVjdGl2ZShcImZhVG91Y2htb3ZlXCIsW1wiJHBhcnNlXCIsXCIkZmFtb3VzRGVjb3JhdG9yXCIsZnVuY3Rpb24oZSxuKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIsc2NvcGU6ITEsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwb3N0OmZ1bmN0aW9uKHIsYSxvKXt2YXIgdD1uLmVuc3VyZUlzb2xhdGUocik7aWYoby5mYVRvdWNobW92ZSl7dmFyIGk9dC5yZW5kZXJOb2RlLl9ldmVudElucHV0fHx0LnJlbmRlck5vZGU7aS5vbihcInRvdWNobW92ZVwiLGZ1bmN0aW9uKG4pe3ZhciBhPWUoby5mYVRvdWNobW92ZSk7YShyLHskZXZlbnQ6bn0pLHIuJCRwaGFzZXx8ci4kYXBwbHkoKX0pfX19fX19XSksYW5ndWxhci5tb2R1bGUoXCJmYW1vdXMuYW5ndWxhclwiKS5kaXJlY3RpdmUoXCJmYVRvdWNoc3RhcnRcIixbXCIkcGFyc2VcIixcIiRmYW1vdXNEZWNvcmF0b3JcIixmdW5jdGlvbihlLG4pe3JldHVybntyZXN0cmljdDpcIkFcIixzY29wZTohMSxjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3Bvc3Q6ZnVuY3Rpb24ocixhLG8pe3ZhciB0PW4uZW5zdXJlSXNvbGF0ZShyKTtpZihvLmZhVG91Y2hzdGFydCl7dmFyIGk9dC5yZW5kZXJOb2RlLl9ldmVudElucHV0fHx0LnJlbmRlck5vZGU7aS5vbihcInRvdWNoc3RhcnRcIixmdW5jdGlvbihuKXt2YXIgYT1lKG8uZmFUb3VjaHN0YXJ0KTthKHIseyRldmVudDpufSksci4kJHBoYXNlfHxyLiRhcHBseSgpfSl9fX19fX1dKSxhbmd1bGFyLm1vZHVsZShcImZhbW91cy5hbmd1bGFyXCIpLmRpcmVjdGl2ZShcImZhVmlkZW9TdXJmYWNlXCIsW1wiJGZhbW91c1wiLFwiJGZhbW91c0RlY29yYXRvclwiLGZ1bmN0aW9uKGUsbil7cmV0dXJue3Njb3BlOiEwLHRyYW5zY2x1ZGU6ITAsdGVtcGxhdGU6JzxkaXYgY2xhc3M9XCJmYS12aWRlby1zdXJmYWNlXCI+PC9kaXY+JyxyZXN0cmljdDpcIkVBXCIsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwcmU6ZnVuY3Rpb24ocixhLG8pe3ZhciB0PW4uZW5zdXJlSXNvbGF0ZShyKSxpPWVbXCJmYW1vdXMvc3VyZmFjZXMvVmlkZW9TdXJmYWNlXCJdO3IuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIHIuJGV2YWwoby5mYU9wdGlvbnMpfSxmdW5jdGlvbihlLG4pe3QucmVuZGVyTm9kZS5zZXRPcHRpb25zKG4pfSwhMCksdC5yZW5kZXJOb2RlPW5ldyBpKHtcImNsYXNzXCI6ci4kZXZhbChvLmNsYXNzKX0pLG4uYWRkUm9sZShcInJlbmRlcmFibGVcIix0KSx0LnNob3coKSxvLmNsYXNzJiZ0LnJlbmRlck5vZGUuc2V0Q2xhc3NlcyhvW1wiY2xhc3NcIl0uc3BsaXQoXCIgXCIpKSxuLnNlcXVlbmNlV2l0aChyLGZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKFwiU3VyZmFjZXMgYXJlIGxlYWYgbm9kZXMgb2YgdGhlIEZhbW8udXMgcmVuZGVyIHRyZWUgYW5kIGNhbm5vdCBhY2NlcHQgcmVuZGVybm9kZSBjaGlsZHJlbi4gIFRvIGluY2x1ZGUgYWRkaXRpb25hbCBGYW1vLnVzIGNvbnRlbnQgaW5zaWRlIG9mIGEgZmEtc3VyZmFjZSwgdGhhdCBjb250ZW50IG11c3QgYmUgZW5jbG9zZWQgaW4gYW4gYWRkaXRpb25hbCBmYS1hcHAuXCIpfSl9LHBvc3Q6ZnVuY3Rpb24oZSxyLGEpe3ZhciBvPW4uZW5zdXJlSXNvbGF0ZShlKSx0PWZ1bmN0aW9uKCl7by5yZW5kZXJOb2RlLnNldENvbnRlbnQoYS5mYVZpZGVvVXJsKX07dCgpLGEuJG9ic2VydmUoXCJmYVZpZGVvVXJsXCIsdCksbi5yZWdpc3RlckNoaWxkKGUscixvKX19fX19XSksYW5ndWxhci5tb2R1bGUoXCJmYW1vdXMuYW5ndWxhclwiKS5kaXJlY3RpdmUoXCJmYVZpZXdcIixbXCIkZmFtb3VzXCIsXCIkZmFtb3VzRGVjb3JhdG9yXCIsZnVuY3Rpb24oZSxuKXtyZXR1cm57dGVtcGxhdGU6XCI8ZGl2PjwvZGl2PlwiLHRyYW5zY2x1ZGU6ITAsc2NvcGU6ITAscmVzdHJpY3Q6XCJFQVwiLGNvbXBpbGU6ZnVuY3Rpb24ocixhLG8pe3ZhciB0PWVbXCJmYW1vdXMvY29yZS9WaWV3XCJdO3JldHVybntwcmU6ZnVuY3Rpb24oZSxyLGEpe3ZhciBvPW4uZW5zdXJlSXNvbGF0ZShlKTtvLmNoaWxkcmVuPVtdLG8ucmVuZGVyTm9kZT1uZXcgdCh7c2l6ZTplLiRldmFsKGEuZmFTaXplKXx8W3ZvaWQgMCx2b2lkIDBdfSksbi5hZGRSb2xlKFwicmVuZGVyYWJsZVwiLG8pLG8uc2hvdygpLG4uc2VxdWVuY2VXaXRoKGUsZnVuY3Rpb24oZSl7by5yZW5kZXJOb2RlLmFkZChlLnJlbmRlckdhdGUpLG8uY2hpbGRyZW4ucHVzaChlKX0pfSxwb3N0OmZ1bmN0aW9uKGUscil7dmFyIGE9bi5lbnN1cmVJc29sYXRlKGUpO28oZSxmdW5jdGlvbihlKXtyLmZpbmQoXCJkaXZcIikuYXBwZW5kKGUpfSksbi5yZWdpc3RlckNoaWxkKGUscixhKX19fX19XSk7XG59KS5jYWxsKGdsb2JhbCwgbW9kdWxlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7XG5cbn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KSIsIihmdW5jdGlvbiAoZ2xvYmFsKXtcbjtfX2Jyb3dzZXJpZnlfc2hpbV9yZXF1aXJlX189cmVxdWlyZTsoZnVuY3Rpb24gYnJvd3NlcmlmeVNoaW0obW9kdWxlLCBleHBvcnRzLCByZXF1aXJlLCBkZWZpbmUsIGJyb3dzZXJpZnlfc2hpbV9fZGVmaW5lX19tb2R1bGVfX2V4cG9ydF9fKSB7XG4vKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICpcbiAqIEBjb3B5cmlnaHQgRmFtb3VzIEluZHVzdHJpZXMsIEluYy4gMjAxNFxuICovXG4hZnVuY3Rpb24odCl7aWYoXCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUpbW9kdWxlLmV4cG9ydHM9dCgpO2Vsc2UgaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSx0KTtlbHNle3ZhciBpO1widW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/aT13aW5kb3c6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9pPWdsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZiYmKGk9c2VsZiksaS5mYW1vdXM9dCgpfX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gdChpLGUsbil7ZnVuY3Rpb24gbyhyLGEpe2lmKCFlW3JdKXtpZighaVtyXSl7dmFyIGg9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighYSYmaClyZXR1cm4gaChyLCEwKTtpZihzKXJldHVybiBzKHIsITApO3ZhciBjPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrcitcIidcIik7dGhyb3cgYy5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGN9dmFyIHA9ZVtyXT17ZXhwb3J0czp7fX07aVtyXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbih0KXt2YXIgZT1pW3JdWzFdW3RdO3JldHVybiBvKGU/ZTp0KX0scCxwLmV4cG9ydHMsdCxpLGUsbil9cmV0dXJuIGVbcl0uZXhwb3J0c31mb3IodmFyIHM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxyPTA7cjxuLmxlbmd0aDtyKyspbyhuW3JdKTtyZXR1cm4gb30oezE6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXtyZXR1cm5bdC5jbGllbnRXaWR0aCx0LmNsaWVudEhlaWdodF19ZnVuY3Rpb24gbih0KXt0aGlzLmNvbnRhaW5lcj10LHRoaXMuX2FsbG9jYXRvcj1uZXcgcih0KSx0aGlzLl9ub2RlPW5ldyBvLHRoaXMuX2V2ZW50T3V0cHV0PW5ldyBzLHRoaXMuX3NpemU9ZSh0aGlzLmNvbnRhaW5lciksdGhpcy5fcGVyc3BlY3RpdmVTdGF0ZT1uZXcgaCgwKSx0aGlzLl9wZXJzcGVjdGl2ZT12b2lkIDAsdGhpcy5fbm9kZUNvbnRleHQ9e2FsbG9jYXRvcjp0aGlzLl9hbGxvY2F0b3IsdHJhbnNmb3JtOmEuaWRlbnRpdHksb3BhY2l0eToxLG9yaWdpbjpjLGFsaWduOmMsc2l6ZTp0aGlzLl9zaXplfSx0aGlzLl9ldmVudE91dHB1dC5vbihcInJlc2l6ZVwiLGZ1bmN0aW9uKCl7dGhpcy5zZXRTaXplKGUodGhpcy5jb250YWluZXIpKX0uYmluZCh0aGlzKSl9dmFyIG89dChcIi4vUmVuZGVyTm9kZVwiKSxzPXQoXCIuL0V2ZW50SGFuZGxlclwiKSxyPXQoXCIuL0VsZW1lbnRBbGxvY2F0b3JcIiksYT10KFwiLi9UcmFuc2Zvcm1cIiksaD10KFwiLi4vdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGVcIiksYz1bMCwwXSxwPSEoXCJwZXJzcGVjdGl2ZVwiaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlKSx1PXA/ZnVuY3Rpb24odCxpKXt0LnN0eWxlLndlYmtpdFBlcnNwZWN0aXZlPWk/aS50b0ZpeGVkKCkrXCJweFwiOlwiXCJ9OmZ1bmN0aW9uKHQsaSl7dC5zdHlsZS5wZXJzcGVjdGl2ZT1pP2kudG9GaXhlZCgpK1wicHhcIjpcIlwifTtuLnByb3RvdHlwZS5nZXRBbGxvY2F0b3I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWxsb2NhdG9yfSxuLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX25vZGUuYWRkKHQpfSxuLnByb3RvdHlwZS5taWdyYXRlPWZ1bmN0aW9uKHQpe3QhPT10aGlzLmNvbnRhaW5lciYmKHRoaXMuY29udGFpbmVyPXQsdGhpcy5fYWxsb2NhdG9yLm1pZ3JhdGUodCkpfSxuLnByb3RvdHlwZS5nZXRTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NpemV9LG4ucHJvdG90eXBlLnNldFNpemU9ZnVuY3Rpb24odCl7dHx8KHQ9ZSh0aGlzLmNvbnRhaW5lcikpLHRoaXMuX3NpemVbMF09dFswXSx0aGlzLl9zaXplWzFdPXRbMV19LG4ucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0KXt0JiYodC50cmFuc2Zvcm0mJih0aGlzLl9ub2RlQ29udGV4dC50cmFuc2Zvcm09dC50cmFuc2Zvcm0pLHQub3BhY2l0eSYmKHRoaXMuX25vZGVDb250ZXh0Lm9wYWNpdHk9dC5vcGFjaXR5KSx0Lm9yaWdpbiYmKHRoaXMuX25vZGVDb250ZXh0Lm9yaWdpbj10Lm9yaWdpbiksdC5hbGlnbiYmKHRoaXMuX25vZGVDb250ZXh0LmFsaWduPXQuYWxpZ24pLHQuc2l6ZSYmKHRoaXMuX25vZGVDb250ZXh0LnNpemU9dC5zaXplKSk7dmFyIGk9dGhpcy5fcGVyc3BlY3RpdmVTdGF0ZS5nZXQoKTtpIT09dGhpcy5fcGVyc3BlY3RpdmUmJih1KHRoaXMuY29udGFpbmVyLGkpLHRoaXMuX3BlcnNwZWN0aXZlPWkpLHRoaXMuX25vZGUuY29tbWl0KHRoaXMuX25vZGVDb250ZXh0KX0sbi5wcm90b3R5cGUuZ2V0UGVyc3BlY3RpdmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGVyc3BlY3RpdmVTdGF0ZS5nZXQoKX0sbi5wcm90b3R5cGUuc2V0UGVyc3BlY3RpdmU9ZnVuY3Rpb24odCxpLGUpe3JldHVybiB0aGlzLl9wZXJzcGVjdGl2ZVN0YXRlLnNldCh0LGksZSl9LG4ucHJvdG90eXBlLmVtaXQ9ZnVuY3Rpb24odCxpKXtyZXR1cm4gdGhpcy5fZXZlbnRPdXRwdXQuZW1pdCh0LGkpfSxuLnByb3RvdHlwZS5vbj1mdW5jdGlvbih0LGkpe3JldHVybiB0aGlzLl9ldmVudE91dHB1dC5vbih0LGkpfSxuLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcj1mdW5jdGlvbih0LGkpe3JldHVybiB0aGlzLl9ldmVudE91dHB1dC5yZW1vdmVMaXN0ZW5lcih0LGkpfSxuLnByb3RvdHlwZS5waXBlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9ldmVudE91dHB1dC5waXBlKHQpfSxuLnByb3RvdHlwZS51bnBpcGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2V2ZW50T3V0cHV0LnVucGlwZSh0KX0saS5leHBvcnRzPW59LHtcIi4uL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlXCI6ODgsXCIuL0VsZW1lbnRBbGxvY2F0b3JcIjoyLFwiLi9FdmVudEhhbmRsZXJcIjo3LFwiLi9SZW5kZXJOb2RlXCI6MTEsXCIuL1RyYW5zZm9ybVwiOjE1fV0sMjpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3R8fCh0PWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSksdGhpcy5jb250YWluZXI9dCx0aGlzLmRldGFjaGVkTm9kZXM9e30sdGhpcy5ub2RlQ291bnQ9MH1lLnByb3RvdHlwZS5taWdyYXRlPWZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuY29udGFpbmVyO2lmKHQhPT1pKXtpZihpIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudCl0LmFwcGVuZENoaWxkKGkpO2Vsc2UgZm9yKDtpLmhhc0NoaWxkTm9kZXMoKTspdC5hcHBlbmRDaGlsZChpLnJlbW92ZUNoaWxkKGkuZmlyc3RDaGlsZCkpO3RoaXMuY29udGFpbmVyPXR9fSxlLnByb3RvdHlwZS5hbGxvY2F0ZT1mdW5jdGlvbih0KXt0PXQudG9Mb3dlckNhc2UoKSx0IGluIHRoaXMuZGV0YWNoZWROb2Rlc3x8KHRoaXMuZGV0YWNoZWROb2Rlc1t0XT1bXSk7dmFyIGksZT10aGlzLmRldGFjaGVkTm9kZXNbdF07cmV0dXJuIGUubGVuZ3RoPjA/aT1lLnBvcCgpOihpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodCksdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQoaSkpLHRoaXMubm9kZUNvdW50KyssaX0sZS5wcm90b3R5cGUuZGVhbGxvY2F0ZT1mdW5jdGlvbih0KXt2YXIgaT10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksZT10aGlzLmRldGFjaGVkTm9kZXNbaV07ZS5wdXNoKHQpLHRoaXMubm9kZUNvdW50LS19LGUucHJvdG90eXBlLmdldE5vZGVDb3VudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVDb3VudH0saS5leHBvcnRzPWV9LHt9XSwzOltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dGhpcy5fbWF0cml4PW51bGwsdGhpcy5fb3BhY2l0eT0xLHRoaXMuX29yaWdpbj1udWxsLHRoaXMuX3NpemU9bnVsbCx0aGlzLl9ldmVudE91dHB1dD1uZXcgYyx0aGlzLl9ldmVudE91dHB1dC5iaW5kVGhpcyh0aGlzKSx0aGlzLmV2ZW50Rm9yd2FyZGVyPWZ1bmN0aW9uKHQpe3RoaXMuX2V2ZW50T3V0cHV0LmVtaXQodC50eXBlLHQpfS5iaW5kKHRoaXMpLHRoaXMuaWQ9aC5yZWdpc3Rlcih0aGlzKSx0aGlzLl9lbGVtZW50PW51bGwsdGhpcy5fc2l6ZURpcnR5PSExLHRoaXMuX29yaWdpbkRpcnR5PSExLHRoaXMuX3RyYW5zZm9ybURpcnR5PSExLHRoaXMuX2ludmlzaWJsZT0hMSx0JiZ0aGlzLmF0dGFjaCh0KX1mdW5jdGlvbiBuKHQpe2Zvcih2YXIgaSBpbiB0aGlzLl9ldmVudE91dHB1dC5saXN0ZW5lcnMpdC5hZGRFdmVudExpc3RlbmVyKGksdGhpcy5ldmVudEZvcndhcmRlcil9ZnVuY3Rpb24gbyh0KXtmb3IodmFyIGkgaW4gdGhpcy5fZXZlbnRPdXRwdXQubGlzdGVuZXJzKXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihpLHRoaXMuZXZlbnRGb3J3YXJkZXIpfWZ1bmN0aW9uIHModCl7dFsxMl09TWF0aC5yb3VuZCh0WzEyXSpsKS9sLHRbMTNdPU1hdGgucm91bmQodFsxM10qbCkvbDtmb3IodmFyIGk9XCJtYXRyaXgzZChcIixlPTA7MTU+ZTtlKyspaSs9dFtlXTwxZS02JiZ0W2VdPi0xZS02P1wiMCxcIjp0W2VdK1wiLFwiO3JldHVybiBpKz10WzE1XStcIilcIn1mdW5jdGlvbiByKHQpe3JldHVybiAxMDAqdFswXStcIiUgXCIrMTAwKnRbMV0rXCIlXCJ9ZnVuY3Rpb24gYSh0LGkpe3JldHVybiB0JiZpP3RbMF0hPT1pWzBdfHx0WzFdIT09aVsxXTp0IT09aX12YXIgaD10KFwiLi9FbnRpdHlcIiksYz10KFwiLi9FdmVudEhhbmRsZXJcIikscD10KFwiLi9UcmFuc2Zvcm1cIiksdT0hKFwidHJhbnNmb3JtXCJpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUpLGw9d2luZG93LmRldmljZVBpeGVsUmF0aW98fDE7ZS5wcm90b3R5cGUub249ZnVuY3Rpb24odCxpKXt0aGlzLl9lbGVtZW50JiZ0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIodCx0aGlzLmV2ZW50Rm9yd2FyZGVyKSx0aGlzLl9ldmVudE91dHB1dC5vbih0LGkpfSxlLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcj1mdW5jdGlvbih0LGkpe3RoaXMuX2V2ZW50T3V0cHV0LnJlbW92ZUxpc3RlbmVyKHQsaSl9LGUucHJvdG90eXBlLmVtaXQ9ZnVuY3Rpb24odCxpKXtpJiYhaS5vcmlnaW4mJihpLm9yaWdpbj10aGlzKTt2YXIgZT10aGlzLl9ldmVudE91dHB1dC5lbWl0KHQsaSk7cmV0dXJuIGUmJmkmJmkuc3RvcFByb3BhZ2F0aW9uJiZpLnN0b3BQcm9wYWdhdGlvbigpLGV9LGUucHJvdG90eXBlLnBpcGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2V2ZW50T3V0cHV0LnBpcGUodCl9LGUucHJvdG90eXBlLnVucGlwZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fZXZlbnRPdXRwdXQudW5waXBlKHQpfSxlLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pZH07dmFyIGY7Zj1uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcImZpcmVmb3hcIik+LTE/ZnVuY3Rpb24odCxpKXt0LnN0eWxlLnpJbmRleD0xZTYqaVsxNF18MCx0LnN0eWxlLnRyYW5zZm9ybT1zKGkpfTp1P2Z1bmN0aW9uKHQsaSl7dC5zdHlsZS53ZWJraXRUcmFuc2Zvcm09cyhpKX06ZnVuY3Rpb24odCxpKXt0LnN0eWxlLnRyYW5zZm9ybT1zKGkpfTt2YXIgZD11P2Z1bmN0aW9uKHQsaSl7dC5zdHlsZS53ZWJraXRUcmFuc2Zvcm1PcmlnaW49cihpKX06ZnVuY3Rpb24odCxpKXt0LnN0eWxlLnRyYW5zZm9ybU9yaWdpbj1yKGkpfSxfPXU/ZnVuY3Rpb24odCl7dC5zdHlsZS53ZWJraXRUcmFuc2Zvcm09XCJzY2FsZTNkKDAuMDAwMSwwLjAwMDEsMC4wMDAxKVwiLHQuc3R5bGUub3BhY2l0eT0wfTpmdW5jdGlvbih0KXt0LnN0eWxlLnRyYW5zZm9ybT1cInNjYWxlM2QoMC4wMDAxLDAuMDAwMSwwLjAwMDEpXCIsdC5zdHlsZS5vcGFjaXR5PTB9O2UucHJvdG90eXBlLmNvbW1pdD1mdW5jdGlvbih0KXt2YXIgaT10aGlzLl9lbGVtZW50O2lmKGkpe3t2YXIgZT10LnRyYW5zZm9ybSxuPXQub3BhY2l0eSxvPXQub3JpZ2luO3Quc2l6ZX1pZighZSYmdGhpcy5fbWF0cml4KXJldHVybiB0aGlzLl9tYXRyaXg9bnVsbCx0aGlzLl9vcGFjaXR5PTAsdm9pZCBfKGkpO2lmKGEodGhpcy5fb3JpZ2luLG8pJiYodGhpcy5fb3JpZ2luRGlydHk9ITApLHAubm90RXF1YWxzKHRoaXMuX21hdHJpeCxlKSYmKHRoaXMuX3RyYW5zZm9ybURpcnR5PSEwKSx0aGlzLl9pbnZpc2libGUmJih0aGlzLl9pbnZpc2libGU9ITEsdGhpcy5fZWxlbWVudC5zdHlsZS5kaXNwbGF5PVwiXCIpLHRoaXMuX29wYWNpdHkhPT1uJiYodGhpcy5fb3BhY2l0eT1uLGkuc3R5bGUub3BhY2l0eT1uPj0xP1wiMC45OTk5OTlcIjpuKSx0aGlzLl90cmFuc2Zvcm1EaXJ0eXx8dGhpcy5fb3JpZ2luRGlydHl8fHRoaXMuX3NpemVEaXJ0eSl7dGhpcy5fc2l6ZURpcnR5JiYodGhpcy5fc2l6ZURpcnR5PSExKSx0aGlzLl9vcmlnaW5EaXJ0eSYmKG8/KHRoaXMuX29yaWdpbnx8KHRoaXMuX29yaWdpbj1bMCwwXSksdGhpcy5fb3JpZ2luWzBdPW9bMF0sdGhpcy5fb3JpZ2luWzFdPW9bMV0pOnRoaXMuX29yaWdpbj1udWxsLGQoaSx0aGlzLl9vcmlnaW4pLHRoaXMuX29yaWdpbkRpcnR5PSExKSxlfHwoZT1wLmlkZW50aXR5KSx0aGlzLl9tYXRyaXg9ZTt2YXIgcz10aGlzLl9zaXplP3AudGhlbk1vdmUoZSxbLXRoaXMuX3NpemVbMF0qb1swXSwtdGhpcy5fc2l6ZVsxXSpvWzFdLDBdKTplO2YoaSxzKSx0aGlzLl90cmFuc2Zvcm1EaXJ0eT0hMX19fSxlLnByb3RvdHlwZS5jbGVhbnVwPWZ1bmN0aW9uKCl7dGhpcy5fZWxlbWVudCYmKHRoaXMuX2ludmlzaWJsZT0hMCx0aGlzLl9lbGVtZW50LnN0eWxlLmRpc3BsYXk9XCJub25lXCIpfSxlLnByb3RvdHlwZS5hdHRhY2g9ZnVuY3Rpb24odCl7dGhpcy5fZWxlbWVudD10LG4uY2FsbCh0aGlzLHQpfSxlLnByb3RvdHlwZS5kZXRhY2g9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9lbGVtZW50O3JldHVybiB0JiYoby5jYWxsKHRoaXMsdCksdGhpcy5faW52aXNpYmxlJiYodGhpcy5faW52aXNpYmxlPSExLHRoaXMuX2VsZW1lbnQuc3R5bGUuZGlzcGxheT1cIlwiKSksdGhpcy5fZWxlbWVudD1udWxsLHR9LGkuZXhwb3J0cz1lfSx7XCIuL0VudGl0eVwiOjUsXCIuL0V2ZW50SGFuZGxlclwiOjcsXCIuL1RyYW5zZm9ybVwiOjE1fV0sNDpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKCl7di5ydW5Mb29wPyhwLnN0ZXAoKSx3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGUpKTpfPSExfWZ1bmN0aW9uIG4oKXtmb3IodmFyIHQ9MDt0PHUubGVuZ3RoO3QrKyl1W3RdLmVtaXQoXCJyZXNpemVcIik7Zy5lbWl0KFwicmVzaXplXCIpfWZ1bmN0aW9uIG8oKXt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLGZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKX0sITApLGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChcImZhbW91cy1yb290XCIpLGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZmFtb3VzLXJvb3RcIil9dmFyIHMscixhPXQoXCIuL0NvbnRleHRcIiksaD10KFwiLi9FdmVudEhhbmRsZXJcIiksYz10KFwiLi9PcHRpb25zTWFuYWdlclwiKSxwPXt9LHU9W10sbD1bXSxmPVtdLGQ9RGF0ZS5ub3coKSxfPSEwLHk9e30sZz1uZXcgaCx2PXtjb250YWluZXJUeXBlOlwiZGl2XCIsY29udGFpbmVyQ2xhc3M6XCJmYW1vdXMtY29udGFpbmVyXCIsZnBzQ2FwOnZvaWQgMCxydW5Mb29wOiEwLGFwcE1vZGU6ITB9LG09bmV3IGModiksTz0xMDtwLnN0ZXA9ZnVuY3Rpb24oKXt2YXIgdD1EYXRlLm5vdygpO2lmKCEociYmcj50LWQpKXt2YXIgaT0wO2ZvcihzPXQtZCxkPXQsZy5lbWl0KFwicHJlcmVuZGVyXCIpLGk9MDtpPGwubGVuZ3RoO2krKylsW2ldLmNhbGwodGhpcyk7Zm9yKGwuc3BsaWNlKDApO2YubGVuZ3RoJiZEYXRlLm5vdygpLXQ8TzspZi5zaGlmdCgpLmNhbGwodGhpcyk7Zm9yKGk9MDtpPHUubGVuZ3RoO2krKyl1W2ldLnVwZGF0ZSgpO2cuZW1pdChcInBvc3RyZW5kZXJcIil9fSx3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGUpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsbiwhMSksbigpO3ZhciBTPSExO3AucGlwZT1mdW5jdGlvbih0KXtyZXR1cm4gdC5zdWJzY3JpYmUgaW5zdGFuY2VvZiBGdW5jdGlvbj90LnN1YnNjcmliZShwKTpnLnBpcGUodCl9LHAudW5waXBlPWZ1bmN0aW9uKHQpe3JldHVybiB0LnVuc3Vic2NyaWJlIGluc3RhbmNlb2YgRnVuY3Rpb24/dC51bnN1YnNjcmliZShwKTpnLnVucGlwZSh0KX0scC5vbj1mdW5jdGlvbih0LGkpe3JldHVybiB0IGluIHl8fCh5W3RdPWcuZW1pdC5iaW5kKGcsdCksZG9jdW1lbnQuYm9keT9kb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIodCx5W3RdKTpwLm5leHRUaWNrKGZ1bmN0aW9uKHQsaSl7ZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKHQsaSl9LmJpbmQodGhpcyx0LHlbdF0pKSksZy5vbih0LGkpfSxwLmVtaXQ9ZnVuY3Rpb24odCxpKXtyZXR1cm4gZy5lbWl0KHQsaSl9LHAucmVtb3ZlTGlzdGVuZXI9ZnVuY3Rpb24odCxpKXtyZXR1cm4gZy5yZW1vdmVMaXN0ZW5lcih0LGkpfSxwLmdldEZQUz1mdW5jdGlvbigpe3JldHVybiAxZTMvc30scC5zZXRGUFNDYXA9ZnVuY3Rpb24odCl7cj1NYXRoLmZsb29yKDFlMy90KX0scC5nZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3JldHVybiBtLmdldE9wdGlvbnModCl9LHAuc2V0T3B0aW9ucz1mdW5jdGlvbigpe3JldHVybiBtLnNldE9wdGlvbnMuYXBwbHkobSxhcmd1bWVudHMpfSxwLmNyZWF0ZUNvbnRleHQ9ZnVuY3Rpb24odCl7IVMmJnYuYXBwTW9kZSYmcC5uZXh0VGljayhvKTt2YXIgaT0hMTt0fHwodD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KHYuY29udGFpbmVyVHlwZSksdC5jbGFzc0xpc3QuYWRkKHYuY29udGFpbmVyQ2xhc3MpLGk9ITApO3ZhciBlPW5ldyBhKHQpO3JldHVybiBwLnJlZ2lzdGVyQ29udGV4dChlKSxpJiZwLm5leHRUaWNrKGZ1bmN0aW9uKHQsaSl7ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpKSx0LmVtaXQoXCJyZXNpemVcIil9LmJpbmQodGhpcyxlLHQpKSxlfSxwLnJlZ2lzdGVyQ29udGV4dD1mdW5jdGlvbih0KXtyZXR1cm4gdS5wdXNoKHQpLHR9LHAuZ2V0Q29udGV4dHM9ZnVuY3Rpb24oKXtyZXR1cm4gdX0scC5kZXJlZ2lzdGVyQ29udGV4dD1mdW5jdGlvbih0KXt2YXIgaT11LmluZGV4T2YodCk7aT49MCYmdS5zcGxpY2UoaSwxKX0scC5uZXh0VGljaz1mdW5jdGlvbih0KXtsLnB1c2godCl9LHAuZGVmZXI9ZnVuY3Rpb24odCl7Zi5wdXNoKHQpfSxtLm9uKFwiY2hhbmdlXCIsZnVuY3Rpb24odCl7XCJmcHNDYXBcIj09PXQuaWQ/cC5zZXRGUFNDYXAodC52YWx1ZSk6XCJydW5Mb29wXCI9PT10LmlkJiYhXyYmdC52YWx1ZSYmKF89ITAsd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShlKSl9KSxpLmV4cG9ydHM9cH0se1wiLi9Db250ZXh0XCI6MSxcIi4vRXZlbnRIYW5kbGVyXCI6NyxcIi4vT3B0aW9uc01hbmFnZXJcIjoxMH1dLDU6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXtyZXR1cm4gclt0XX1mdW5jdGlvbiBuKHQsaSl7clt0XT1pfWZ1bmN0aW9uIG8odCl7dmFyIGk9ci5sZW5ndGg7cmV0dXJuIG4oaSx0KSxpfWZ1bmN0aW9uIHModCl7bih0LG51bGwpfXZhciByPVtdO2kuZXhwb3J0cz17cmVnaXN0ZXI6byx1bnJlZ2lzdGVyOnMsZ2V0OmUsc2V0Om59fSx7fV0sNjpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKCl7dGhpcy5saXN0ZW5lcnM9e30sdGhpcy5fb3duZXI9dGhpc31lLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKHQsaSl7dmFyIGU9dGhpcy5saXN0ZW5lcnNbdF07aWYoZSlmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyllW25dLmNhbGwodGhpcy5fb3duZXIsaSk7cmV0dXJuIHRoaXN9LGUucHJvdG90eXBlLm9uPWZ1bmN0aW9uKHQsaSl7dCBpbiB0aGlzLmxpc3RlbmVyc3x8KHRoaXMubGlzdGVuZXJzW3RdPVtdKTt2YXIgZT10aGlzLmxpc3RlbmVyc1t0XS5pbmRleE9mKGkpO3JldHVybiAwPmUmJnRoaXMubGlzdGVuZXJzW3RdLnB1c2goaSksdGhpc30sZS5wcm90b3R5cGUuYWRkTGlzdGVuZXI9ZS5wcm90b3R5cGUub24sZS5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI9ZnVuY3Rpb24odCxpKXt2YXIgZT10aGlzLmxpc3RlbmVyc1t0XTtpZih2b2lkIDAhPT1lKXt2YXIgbj1lLmluZGV4T2YoaSk7bj49MCYmZS5zcGxpY2UobiwxKX1yZXR1cm4gdGhpc30sZS5wcm90b3R5cGUuYmluZFRoaXM9ZnVuY3Rpb24odCl7dGhpcy5fb3duZXI9dH0saS5leHBvcnRzPWV9LHt9XSw3OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUoKXtuLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLmRvd25zdHJlYW09W10sdGhpcy5kb3duc3RyZWFtRm49W10sdGhpcy51cHN0cmVhbT1bXSx0aGlzLnVwc3RyZWFtTGlzdGVuZXJzPXt9fXZhciBuPXQoXCIuL0V2ZW50RW1pdHRlclwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUuc2V0SW5wdXRIYW5kbGVyPWZ1bmN0aW9uKHQsaSl7dC50cmlnZ2VyPWkudHJpZ2dlci5iaW5kKGkpLGkuc3Vic2NyaWJlJiZpLnVuc3Vic2NyaWJlJiYodC5zdWJzY3JpYmU9aS5zdWJzY3JpYmUuYmluZChpKSx0LnVuc3Vic2NyaWJlPWkudW5zdWJzY3JpYmUuYmluZChpKSl9LGUuc2V0T3V0cHV0SGFuZGxlcj1mdW5jdGlvbih0LGkpe2kgaW5zdGFuY2VvZiBlJiZpLmJpbmRUaGlzKHQpLHQucGlwZT1pLnBpcGUuYmluZChpKSx0LnVucGlwZT1pLnVucGlwZS5iaW5kKGkpLHQub249aS5vbi5iaW5kKGkpLHQuYWRkTGlzdGVuZXI9dC5vbix0LnJlbW92ZUxpc3RlbmVyPWkucmVtb3ZlTGlzdGVuZXIuYmluZChpKX0sZS5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbih0LGkpe24ucHJvdG90eXBlLmVtaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBlPTA7Zm9yKGU9MDtlPHRoaXMuZG93bnN0cmVhbS5sZW5ndGg7ZSsrKXRoaXMuZG93bnN0cmVhbVtlXS50cmlnZ2VyJiZ0aGlzLmRvd25zdHJlYW1bZV0udHJpZ2dlcih0LGkpO2ZvcihlPTA7ZTx0aGlzLmRvd25zdHJlYW1Gbi5sZW5ndGg7ZSsrKXRoaXMuZG93bnN0cmVhbUZuW2VdKHQsaSk7cmV0dXJuIHRoaXN9LGUucHJvdG90eXBlLnRyaWdnZXI9ZS5wcm90b3R5cGUuZW1pdCxlLnByb3RvdHlwZS5waXBlPWZ1bmN0aW9uKHQpe2lmKHQuc3Vic2NyaWJlIGluc3RhbmNlb2YgRnVuY3Rpb24pcmV0dXJuIHQuc3Vic2NyaWJlKHRoaXMpO3ZhciBpPXQgaW5zdGFuY2VvZiBGdW5jdGlvbj90aGlzLmRvd25zdHJlYW1Gbjp0aGlzLmRvd25zdHJlYW0sZT1pLmluZGV4T2YodCk7cmV0dXJuIDA+ZSYmaS5wdXNoKHQpLHQgaW5zdGFuY2VvZiBGdW5jdGlvbj90KFwicGlwZVwiLG51bGwpOnQudHJpZ2dlciYmdC50cmlnZ2VyKFwicGlwZVwiLG51bGwpLHR9LGUucHJvdG90eXBlLnVucGlwZT1mdW5jdGlvbih0KXtpZih0LnVuc3Vic2NyaWJlIGluc3RhbmNlb2YgRnVuY3Rpb24pcmV0dXJuIHQudW5zdWJzY3JpYmUodGhpcyk7dmFyIGk9dCBpbnN0YW5jZW9mIEZ1bmN0aW9uP3RoaXMuZG93bnN0cmVhbUZuOnRoaXMuZG93bnN0cmVhbSxlPWkuaW5kZXhPZih0KTtyZXR1cm4gZT49MD8oaS5zcGxpY2UoZSwxKSx0IGluc3RhbmNlb2YgRnVuY3Rpb24/dChcInVucGlwZVwiLG51bGwpOnQudHJpZ2dlciYmdC50cmlnZ2VyKFwidW5waXBlXCIsbnVsbCksdCk6ITF9LGUucHJvdG90eXBlLm9uPWZ1bmN0aW9uKHQpe2lmKG4ucHJvdG90eXBlLm9uLmFwcGx5KHRoaXMsYXJndW1lbnRzKSwhKHQgaW4gdGhpcy51cHN0cmVhbUxpc3RlbmVycykpe3ZhciBpPXRoaXMudHJpZ2dlci5iaW5kKHRoaXMsdCk7dGhpcy51cHN0cmVhbUxpc3RlbmVyc1t0XT1pO2Zvcih2YXIgZT0wO2U8dGhpcy51cHN0cmVhbS5sZW5ndGg7ZSsrKXRoaXMudXBzdHJlYW1bZV0ub24odCxpKX1yZXR1cm4gdGhpc30sZS5wcm90b3R5cGUuYWRkTGlzdGVuZXI9ZS5wcm90b3R5cGUub24sZS5wcm90b3R5cGUuc3Vic2NyaWJlPWZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMudXBzdHJlYW0uaW5kZXhPZih0KTtpZigwPmkpe3RoaXMudXBzdHJlYW0ucHVzaCh0KTtmb3IodmFyIGUgaW4gdGhpcy51cHN0cmVhbUxpc3RlbmVycyl0Lm9uKGUsdGhpcy51cHN0cmVhbUxpc3RlbmVyc1tlXSl9cmV0dXJuIHRoaXN9LGUucHJvdG90eXBlLnVuc3Vic2NyaWJlPWZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMudXBzdHJlYW0uaW5kZXhPZih0KTtpZihpPj0wKXt0aGlzLnVwc3RyZWFtLnNwbGljZShpLDEpO2Zvcih2YXIgZSBpbiB0aGlzLnVwc3RyZWFtTGlzdGVuZXJzKXQucmVtb3ZlTGlzdGVuZXIoZSx0aGlzLnVwc3RyZWFtTGlzdGVuZXJzW2VdKX1yZXR1cm4gdGhpc30saS5leHBvcnRzPWV9LHtcIi4vRXZlbnRFbWl0dGVyXCI6Nn1dLDg6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXtzLmNhbGwodGhpcyx0KSx0aGlzLl9zaG91bGRSZWNhbGN1bGF0ZVNpemU9ITEsdGhpcy5fY29udGFpbmVyPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSx0aGlzLmNvbnRleHQ9bmV3IG4odGhpcy5fY29udGFpbmVyKSx0aGlzLnNldENvbnRlbnQodGhpcy5fY29udGFpbmVyKSx0aGlzLl9ncm91cFNpemU9W3ZvaWQgMCx2b2lkIDBdfXZhciBuPXQoXCIuL0NvbnRleHRcIiksbz10KFwiLi9UcmFuc2Zvcm1cIikscz10KFwiLi9TdXJmYWNlXCIpO2UuU0laRV9aRVJPPVswLDBdLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUocy5wcm90b3R5cGUpLGUucHJvdG90eXBlLmVsZW1lbnRUeXBlPVwiZGl2XCIsZS5wcm90b3R5cGUuZWxlbWVudENsYXNzPVwiZmFtb3VzLWdyb3VwXCIsZS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGV4dC5hZGQuYXBwbHkodGhpcy5jb250ZXh0LGFyZ3VtZW50cyl9LGUucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe3JldHVybiBzLnByb3RvdHlwZS5yZW5kZXIuY2FsbCh0aGlzKX0sZS5wcm90b3R5cGUuZGVwbG95PWZ1bmN0aW9uKHQpe3RoaXMuY29udGV4dC5taWdyYXRlKHQpfSxlLnByb3RvdHlwZS5yZWNhbGw9ZnVuY3Rpb24oKXt0aGlzLl9jb250YWluZXI9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLHRoaXMuY29udGV4dC5taWdyYXRlKHRoaXMuX2NvbnRhaW5lcil9LGUucHJvdG90eXBlLmNvbW1pdD1mdW5jdGlvbih0KXt2YXIgaT10LnRyYW5zZm9ybSxuPXQub3JpZ2luLHI9dC5vcGFjaXR5LGE9dC5zaXplLGg9cy5wcm90b3R5cGUuY29tbWl0LmNhbGwodGhpcyx7YWxsb2NhdG9yOnQuYWxsb2NhdG9yLHRyYW5zZm9ybTpvLnRoZW5Nb3ZlKGksWy1uWzBdKmFbMF0sLW5bMV0qYVsxXSwwXSksb3BhY2l0eTpyLG9yaWdpbjpuLHNpemU6ZS5TSVpFX1pFUk99KTtyZXR1cm4oYVswXSE9PXRoaXMuX2dyb3VwU2l6ZVswXXx8YVsxXSE9PXRoaXMuX2dyb3VwU2l6ZVsxXSkmJih0aGlzLl9ncm91cFNpemVbMF09YVswXSx0aGlzLl9ncm91cFNpemVbMV09YVsxXSx0aGlzLmNvbnRleHQuc2V0U2l6ZShhKSksdGhpcy5jb250ZXh0LnVwZGF0ZSh7dHJhbnNmb3JtOm8udHJhbnNsYXRlKC1uWzBdKmFbMF0sLW5bMV0qYVsxXSwwKSxvcmlnaW46bixzaXplOmF9KSxofSxpLmV4cG9ydHM9ZX0se1wiLi9Db250ZXh0XCI6MSxcIi4vU3VyZmFjZVwiOjE0LFwiLi9UcmFuc2Zvcm1cIjoxNX1dLDk6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLl90cmFuc2Zvcm1HZXR0ZXI9bnVsbCx0aGlzLl9vcGFjaXR5R2V0dGVyPW51bGwsdGhpcy5fb3JpZ2luR2V0dGVyPW51bGwsdGhpcy5fYWxpZ25HZXR0ZXI9bnVsbCx0aGlzLl9zaXplR2V0dGVyPW51bGwsdGhpcy5fcHJvcG9ydGlvbkdldHRlcj1udWxsLHRoaXMuX2xlZ2FjeVN0YXRlcz17fSx0aGlzLl9vdXRwdXQ9e3RyYW5zZm9ybTpvLmlkZW50aXR5LG9wYWNpdHk6MSxvcmlnaW46bnVsbCxhbGlnbjpudWxsLHNpemU6bnVsbCxwcm9wb3J0aW9uczpudWxsLHRhcmdldDpudWxsfSx0JiYodC50cmFuc2Zvcm0mJnRoaXMudHJhbnNmb3JtRnJvbSh0LnRyYW5zZm9ybSksdm9pZCAwIT09dC5vcGFjaXR5JiZ0aGlzLm9wYWNpdHlGcm9tKHQub3BhY2l0eSksdC5vcmlnaW4mJnRoaXMub3JpZ2luRnJvbSh0Lm9yaWdpbiksdC5hbGlnbiYmdGhpcy5hbGlnbkZyb20odC5hbGlnbiksdC5zaXplJiZ0aGlzLnNpemVGcm9tKHQuc2l6ZSksdC5wcm9wb3J0aW9ucyYmdGhpcy5wcm9wb3J0aW9uc0Zyb20odC5wcm9wb3J0aW9ucykpfWZ1bmN0aW9uIG4oKXt0aGlzLl90cmFuc2Zvcm1HZXR0ZXImJih0aGlzLl9vdXRwdXQudHJhbnNmb3JtPXRoaXMuX3RyYW5zZm9ybUdldHRlcigpKSx0aGlzLl9vcGFjaXR5R2V0dGVyJiYodGhpcy5fb3V0cHV0Lm9wYWNpdHk9dGhpcy5fb3BhY2l0eUdldHRlcigpKSx0aGlzLl9vcmlnaW5HZXR0ZXImJih0aGlzLl9vdXRwdXQub3JpZ2luPXRoaXMuX29yaWdpbkdldHRlcigpKSx0aGlzLl9hbGlnbkdldHRlciYmKHRoaXMuX291dHB1dC5hbGlnbj10aGlzLl9hbGlnbkdldHRlcigpKSx0aGlzLl9zaXplR2V0dGVyJiYodGhpcy5fb3V0cHV0LnNpemU9dGhpcy5fc2l6ZUdldHRlcigpKSx0aGlzLl9wcm9wb3J0aW9uR2V0dGVyJiYodGhpcy5fb3V0cHV0LnByb3BvcnRpb25zPXRoaXMuX3Byb3BvcnRpb25HZXR0ZXIoKSl9dmFyIG89dChcIi4vVHJhbnNmb3JtXCIpLHM9dChcIi4uL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlXCIpLHI9dChcIi4uL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlVHJhbnNmb3JtXCIpO2UucHJvdG90eXBlLnRyYW5zZm9ybUZyb209ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBGdW5jdGlvbj90aGlzLl90cmFuc2Zvcm1HZXR0ZXI9dDp0IGluc3RhbmNlb2YgT2JqZWN0JiZ0LmdldD90aGlzLl90cmFuc2Zvcm1HZXR0ZXI9dC5nZXQuYmluZCh0KToodGhpcy5fdHJhbnNmb3JtR2V0dGVyPW51bGwsdGhpcy5fb3V0cHV0LnRyYW5zZm9ybT10KSx0aGlzfSxlLnByb3RvdHlwZS5vcGFjaXR5RnJvbT1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIEZ1bmN0aW9uP3RoaXMuX29wYWNpdHlHZXR0ZXI9dDp0IGluc3RhbmNlb2YgT2JqZWN0JiZ0LmdldD90aGlzLl9vcGFjaXR5R2V0dGVyPXQuZ2V0LmJpbmQodCk6KHRoaXMuX29wYWNpdHlHZXR0ZXI9bnVsbCx0aGlzLl9vdXRwdXQub3BhY2l0eT10KSx0aGlzfSxlLnByb3RvdHlwZS5vcmlnaW5Gcm9tPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgRnVuY3Rpb24/dGhpcy5fb3JpZ2luR2V0dGVyPXQ6dCBpbnN0YW5jZW9mIE9iamVjdCYmdC5nZXQ/dGhpcy5fb3JpZ2luR2V0dGVyPXQuZ2V0LmJpbmQodCk6KHRoaXMuX29yaWdpbkdldHRlcj1udWxsLHRoaXMuX291dHB1dC5vcmlnaW49dCksdGhpc30sZS5wcm90b3R5cGUuYWxpZ25Gcm9tPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgRnVuY3Rpb24/dGhpcy5fYWxpZ25HZXR0ZXI9dDp0IGluc3RhbmNlb2YgT2JqZWN0JiZ0LmdldD90aGlzLl9hbGlnbkdldHRlcj10LmdldC5iaW5kKHQpOih0aGlzLl9hbGlnbkdldHRlcj1udWxsLHRoaXMuX291dHB1dC5hbGlnbj10KSx0aGlzfSxlLnByb3RvdHlwZS5zaXplRnJvbT1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIEZ1bmN0aW9uP3RoaXMuX3NpemVHZXR0ZXI9dDp0IGluc3RhbmNlb2YgT2JqZWN0JiZ0LmdldD90aGlzLl9zaXplR2V0dGVyPXQuZ2V0LmJpbmQodCk6KHRoaXMuX3NpemVHZXR0ZXI9bnVsbCx0aGlzLl9vdXRwdXQuc2l6ZT10KSx0aGlzfSxlLnByb3RvdHlwZS5wcm9wb3J0aW9uc0Zyb209ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBGdW5jdGlvbj90aGlzLl9wcm9wb3J0aW9uR2V0dGVyPXQ6dCBpbnN0YW5jZW9mIE9iamVjdCYmdC5nZXQ/dGhpcy5fcHJvcG9ydGlvbkdldHRlcj10LmdldC5iaW5kKHQpOih0aGlzLl9wcm9wb3J0aW9uR2V0dGVyPW51bGwsdGhpcy5fb3V0cHV0LnByb3BvcnRpb25zPXQpLHRoaXN9LGUucHJvdG90eXBlLnNldFRyYW5zZm9ybT1mdW5jdGlvbih0LGksZSl7cmV0dXJuIGl8fHRoaXMuX2xlZ2FjeVN0YXRlcy50cmFuc2Zvcm0/KHRoaXMuX2xlZ2FjeVN0YXRlcy50cmFuc2Zvcm18fCh0aGlzLl9sZWdhY3lTdGF0ZXMudHJhbnNmb3JtPW5ldyByKHRoaXMuX291dHB1dC50cmFuc2Zvcm0pKSx0aGlzLl90cmFuc2Zvcm1HZXR0ZXJ8fHRoaXMudHJhbnNmb3JtRnJvbSh0aGlzLl9sZWdhY3lTdGF0ZXMudHJhbnNmb3JtKSx0aGlzLl9sZWdhY3lTdGF0ZXMudHJhbnNmb3JtLnNldCh0LGksZSksdGhpcyk6dGhpcy50cmFuc2Zvcm1Gcm9tKHQpfSxlLnByb3RvdHlwZS5zZXRPcGFjaXR5PWZ1bmN0aW9uKHQsaSxlKXtyZXR1cm4gaXx8dGhpcy5fbGVnYWN5U3RhdGVzLm9wYWNpdHk/KHRoaXMuX2xlZ2FjeVN0YXRlcy5vcGFjaXR5fHwodGhpcy5fbGVnYWN5U3RhdGVzLm9wYWNpdHk9bmV3IHModGhpcy5fb3V0cHV0Lm9wYWNpdHkpKSx0aGlzLl9vcGFjaXR5R2V0dGVyfHx0aGlzLm9wYWNpdHlGcm9tKHRoaXMuX2xlZ2FjeVN0YXRlcy5vcGFjaXR5KSx0aGlzLl9sZWdhY3lTdGF0ZXMub3BhY2l0eS5zZXQodCxpLGUpKTp0aGlzLm9wYWNpdHlGcm9tKHQpfSxlLnByb3RvdHlwZS5zZXRPcmlnaW49ZnVuY3Rpb24odCxpLGUpe3JldHVybiBpfHx0aGlzLl9sZWdhY3lTdGF0ZXMub3JpZ2luPyh0aGlzLl9sZWdhY3lTdGF0ZXMub3JpZ2lufHwodGhpcy5fbGVnYWN5U3RhdGVzLm9yaWdpbj1uZXcgcyh0aGlzLl9vdXRwdXQub3JpZ2lufHxbMCwwXSkpLHRoaXMuX29yaWdpbkdldHRlcnx8dGhpcy5vcmlnaW5Gcm9tKHRoaXMuX2xlZ2FjeVN0YXRlcy5vcmlnaW4pLHRoaXMuX2xlZ2FjeVN0YXRlcy5vcmlnaW4uc2V0KHQsaSxlKSx0aGlzKTp0aGlzLm9yaWdpbkZyb20odCl9LGUucHJvdG90eXBlLnNldEFsaWduPWZ1bmN0aW9uKHQsaSxlKXtyZXR1cm4gaXx8dGhpcy5fbGVnYWN5U3RhdGVzLmFsaWduPyh0aGlzLl9sZWdhY3lTdGF0ZXMuYWxpZ258fCh0aGlzLl9sZWdhY3lTdGF0ZXMuYWxpZ249bmV3IHModGhpcy5fb3V0cHV0LmFsaWdufHxbMCwwXSkpLHRoaXMuX2FsaWduR2V0dGVyfHx0aGlzLmFsaWduRnJvbSh0aGlzLl9sZWdhY3lTdGF0ZXMuYWxpZ24pLHRoaXMuX2xlZ2FjeVN0YXRlcy5hbGlnbi5zZXQodCxpLGUpLHRoaXMpOnRoaXMuYWxpZ25Gcm9tKHQpfSxlLnByb3RvdHlwZS5zZXRTaXplPWZ1bmN0aW9uKHQsaSxlKXtyZXR1cm4gdCYmKGl8fHRoaXMuX2xlZ2FjeVN0YXRlcy5zaXplKT8odGhpcy5fbGVnYWN5U3RhdGVzLnNpemV8fCh0aGlzLl9sZWdhY3lTdGF0ZXMuc2l6ZT1uZXcgcyh0aGlzLl9vdXRwdXQuc2l6ZXx8WzAsMF0pKSx0aGlzLl9zaXplR2V0dGVyfHx0aGlzLnNpemVGcm9tKHRoaXMuX2xlZ2FjeVN0YXRlcy5zaXplKSx0aGlzLl9sZWdhY3lTdGF0ZXMuc2l6ZS5zZXQodCxpLGUpLHRoaXMpOnRoaXMuc2l6ZUZyb20odCl9LGUucHJvdG90eXBlLnNldFByb3BvcnRpb25zPWZ1bmN0aW9uKHQsaSxlKXtyZXR1cm4gdCYmKGl8fHRoaXMuX2xlZ2FjeVN0YXRlcy5wcm9wb3J0aW9ucyk/KHRoaXMuX2xlZ2FjeVN0YXRlcy5wcm9wb3J0aW9uc3x8KHRoaXMuX2xlZ2FjeVN0YXRlcy5wcm9wb3J0aW9ucz1uZXcgcyh0aGlzLl9vdXRwdXQucHJvcG9ydGlvbnN8fFswLDBdKSksdGhpcy5fcHJvcG9ydGlvbkdldHRlcnx8dGhpcy5wcm9wb3J0aW9uc0Zyb20odGhpcy5fbGVnYWN5U3RhdGVzLnByb3BvcnRpb25zKSx0aGlzLl9sZWdhY3lTdGF0ZXMucHJvcG9ydGlvbnMuc2V0KHQsaSxlKSx0aGlzKTp0aGlzLnByb3BvcnRpb25zRnJvbSh0KX0sZS5wcm90b3R5cGUuaGFsdD1mdW5jdGlvbigpe3RoaXMuX2xlZ2FjeVN0YXRlcy50cmFuc2Zvcm0mJnRoaXMuX2xlZ2FjeVN0YXRlcy50cmFuc2Zvcm0uaGFsdCgpLHRoaXMuX2xlZ2FjeVN0YXRlcy5vcGFjaXR5JiZ0aGlzLl9sZWdhY3lTdGF0ZXMub3BhY2l0eS5oYWx0KCksdGhpcy5fbGVnYWN5U3RhdGVzLm9yaWdpbiYmdGhpcy5fbGVnYWN5U3RhdGVzLm9yaWdpbi5oYWx0KCksdGhpcy5fbGVnYWN5U3RhdGVzLmFsaWduJiZ0aGlzLl9sZWdhY3lTdGF0ZXMuYWxpZ24uaGFsdCgpLHRoaXMuX2xlZ2FjeVN0YXRlcy5zaXplJiZ0aGlzLl9sZWdhY3lTdGF0ZXMuc2l6ZS5oYWx0KCksdGhpcy5fbGVnYWN5U3RhdGVzLnByb3BvcnRpb25zJiZ0aGlzLl9sZWdhY3lTdGF0ZXMucHJvcG9ydGlvbnMuaGFsdCgpLHRoaXMuX3RyYW5zZm9ybUdldHRlcj1udWxsLHRoaXMuX29wYWNpdHlHZXR0ZXI9bnVsbCx0aGlzLl9vcmlnaW5HZXR0ZXI9bnVsbCx0aGlzLl9hbGlnbkdldHRlcj1udWxsLHRoaXMuX3NpemVHZXR0ZXI9bnVsbCx0aGlzLl9wcm9wb3J0aW9uR2V0dGVyPW51bGx9LGUucHJvdG90eXBlLmdldFRyYW5zZm9ybT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl90cmFuc2Zvcm1HZXR0ZXIoKX0sZS5wcm90b3R5cGUuZ2V0RmluYWxUcmFuc2Zvcm09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGVnYWN5U3RhdGVzLnRyYW5zZm9ybT90aGlzLl9sZWdhY3lTdGF0ZXMudHJhbnNmb3JtLmdldEZpbmFsKCk6dGhpcy5fb3V0cHV0LnRyYW5zZm9ybX0sZS5wcm90b3R5cGUuZ2V0T3BhY2l0eT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcGFjaXR5R2V0dGVyKCl9LGUucHJvdG90eXBlLmdldE9yaWdpbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcmlnaW5HZXR0ZXIoKX0sZS5wcm90b3R5cGUuZ2V0QWxpZ249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWxpZ25HZXR0ZXIoKX0sZS5wcm90b3R5cGUuZ2V0U2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaXplR2V0dGVyP3RoaXMuX3NpemVHZXR0ZXIoKTp0aGlzLl9vdXRwdXQuc2l6ZX0sZS5wcm90b3R5cGUuZ2V0UHJvcG9ydGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvcG9ydGlvbkdldHRlcj90aGlzLl9wcm9wb3J0aW9uR2V0dGVyKCk6dGhpcy5fb3V0cHV0LnByb3BvcnRpb25zfSxlLnByb3RvdHlwZS5tb2RpZnk9ZnVuY3Rpb24odCl7cmV0dXJuIG4uY2FsbCh0aGlzKSx0aGlzLl9vdXRwdXQudGFyZ2V0PXQsdGhpcy5fb3V0cHV0fSxpLmV4cG9ydHM9ZX0se1wiLi4vdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGVcIjo4OCxcIi4uL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlVHJhbnNmb3JtXCI6ODksXCIuL1RyYW5zZm9ybVwiOjE1fV0sMTA6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLl92YWx1ZT10LHRoaXMuZXZlbnRPdXRwdXQ9bnVsbH1mdW5jdGlvbiBuKCl7dGhpcy5ldmVudE91dHB1dD1uZXcgbyx0aGlzLmV2ZW50T3V0cHV0LmJpbmRUaGlzKHRoaXMpLG8uc2V0T3V0cHV0SGFuZGxlcih0aGlzLHRoaXMuZXZlbnRPdXRwdXQpfXZhciBvPXQoXCIuL0V2ZW50SGFuZGxlclwiKTtlLnBhdGNoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgaT1uZXcgZSh0KSxuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKylpLnBhdGNoKGFyZ3VtZW50c1tuXSk7cmV0dXJuIHR9LGUucHJvdG90eXBlLnBhdGNoPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuX3ZhbHVlLGk9MDtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXt2YXIgZT1hcmd1bWVudHNbaV07Zm9yKHZhciBuIGluIGUpbiBpbiB0JiZlW25dJiZlW25dLmNvbnN0cnVjdG9yPT09T2JqZWN0JiZ0W25dJiZ0W25dLmNvbnN0cnVjdG9yPT09T2JqZWN0Pyh0Lmhhc093blByb3BlcnR5KG4pfHwodFtuXT1PYmplY3QuY3JlYXRlKHRbbl0pKSx0aGlzLmtleShuKS5wYXRjaChlW25dKSx0aGlzLmV2ZW50T3V0cHV0JiZ0aGlzLmV2ZW50T3V0cHV0LmVtaXQoXCJjaGFuZ2VcIix7aWQ6bix2YWx1ZTp0aGlzLmtleShuKS52YWx1ZSgpfSkpOnRoaXMuc2V0KG4sZVtuXSl9cmV0dXJuIHRoaXN9LGUucHJvdG90eXBlLnNldE9wdGlvbnM9ZS5wcm90b3R5cGUucGF0Y2gsZS5wcm90b3R5cGUua2V5PWZ1bmN0aW9uKHQpe3ZhciBpPW5ldyBlKHRoaXMuX3ZhbHVlW3RdKTtyZXR1cm4oIShpLl92YWx1ZSBpbnN0YW5jZW9mIE9iamVjdCl8fGkuX3ZhbHVlIGluc3RhbmNlb2YgQXJyYXkpJiYoaS5fdmFsdWU9e30pLGl9LGUucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gdD90aGlzLl92YWx1ZVt0XTp0aGlzLl92YWx1ZX0sZS5wcm90b3R5cGUuZ2V0T3B0aW9ucz1lLnByb3RvdHlwZS5nZXQsZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsaSl7dmFyIGU9dGhpcy5nZXQodCk7cmV0dXJuIHRoaXMuX3ZhbHVlW3RdPWksdGhpcy5ldmVudE91dHB1dCYmaSE9PWUmJnRoaXMuZXZlbnRPdXRwdXQuZW1pdChcImNoYW5nZVwiLHtpZDp0LHZhbHVlOml9KSx0aGlzfSxlLnByb3RvdHlwZS5vbj1mdW5jdGlvbigpe3JldHVybiBuLmNhbGwodGhpcyksdGhpcy5vbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGUucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKCl7cmV0dXJuIG4uY2FsbCh0aGlzKSx0aGlzLnJlbW92ZUxpc3RlbmVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZS5wcm90b3R5cGUucGlwZT1mdW5jdGlvbigpe3JldHVybiBuLmNhbGwodGhpcyksdGhpcy5waXBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZS5wcm90b3R5cGUudW5waXBlPWZ1bmN0aW9uKCl7cmV0dXJuIG4uY2FsbCh0aGlzKSx0aGlzLnVucGlwZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGkuZXhwb3J0cz1lfSx7XCIuL0V2ZW50SGFuZGxlclwiOjd9XSwxMTpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3RoaXMuX29iamVjdD1udWxsLHRoaXMuX2NoaWxkPW51bGwsdGhpcy5faGFzTXVsdGlwbGVDaGlsZHJlbj0hMSx0aGlzLl9pc1JlbmRlcmFibGU9ITEsdGhpcy5faXNNb2RpZmllcj0hMSx0aGlzLl9yZXN1bHRDYWNoZT17fSx0aGlzLl9wcmV2UmVzdWx0cz17fSx0aGlzLl9jaGlsZFJlc3VsdD1udWxsLHQmJnRoaXMuc2V0KHQpfWZ1bmN0aW9uIG4odCxpLGUpe2Zvcih2YXIgcj1zLnBhcnNlKHQsaSksYT1PYmplY3Qua2V5cyhyKSxoPTA7aDxhLmxlbmd0aDtoKyspe3ZhciBjPWFbaF0scD1vLmdldChjKSx1PXJbY107dS5hbGxvY2F0b3I9aS5hbGxvY2F0b3I7dmFyIGw9cC5jb21taXQodSk7bD9uKGwsaSxlKTplW2NdPXV9fXZhciBvPXQoXCIuL0VudGl0eVwiKSxzPXQoXCIuL1NwZWNQYXJzZXJcIik7ZS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQpe3ZhciBpPXQgaW5zdGFuY2VvZiBlP3Q6bmV3IGUodCk7cmV0dXJuIHRoaXMuX2NoaWxkIGluc3RhbmNlb2YgQXJyYXk/dGhpcy5fY2hpbGQucHVzaChpKTp0aGlzLl9jaGlsZD8odGhpcy5fY2hpbGQ9W3RoaXMuX2NoaWxkLGldLHRoaXMuX2hhc011bHRpcGxlQ2hpbGRyZW49ITAsdGhpcy5fY2hpbGRSZXN1bHQ9W10pOnRoaXMuX2NoaWxkPWksaX0sZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29iamVjdHx8KHRoaXMuX2hhc011bHRpcGxlQ2hpbGRyZW4/bnVsbDp0aGlzLl9jaGlsZD90aGlzLl9jaGlsZC5nZXQoKTpudWxsKX0sZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9jaGlsZFJlc3VsdD1udWxsLHRoaXMuX2hhc011bHRpcGxlQ2hpbGRyZW49ITEsdGhpcy5faXNSZW5kZXJhYmxlPXQucmVuZGVyPyEwOiExLHRoaXMuX2lzTW9kaWZpZXI9dC5tb2RpZnk/ITA6ITEsdGhpcy5fb2JqZWN0PXQsdGhpcy5fY2hpbGQ9bnVsbCx0IGluc3RhbmNlb2YgZT90OnRoaXN9LGUucHJvdG90eXBlLmdldFNpemU9ZnVuY3Rpb24oKXt2YXIgdD1udWxsLGk9dGhpcy5nZXQoKTtyZXR1cm4gaSYmaS5nZXRTaXplJiYodD1pLmdldFNpemUoKSksIXQmJnRoaXMuX2NoaWxkJiZ0aGlzLl9jaGlsZC5nZXRTaXplJiYodD10aGlzLl9jaGlsZC5nZXRTaXplKCkpLHR9LGUucHJvdG90eXBlLmNvbW1pdD1mdW5jdGlvbih0KXtmb3IodmFyIGk9T2JqZWN0LmtleXModGhpcy5fcHJldlJlc3VsdHMpLGU9MDtlPGkubGVuZ3RoO2UrKyl7dmFyIHM9aVtlXTtpZih2b2lkIDA9PT10aGlzLl9yZXN1bHRDYWNoZVtzXSl7dmFyIHI9by5nZXQocyk7ci5jbGVhbnVwJiZyLmNsZWFudXAodC5hbGxvY2F0b3IpfX10aGlzLl9wcmV2UmVzdWx0cz10aGlzLl9yZXN1bHRDYWNoZSx0aGlzLl9yZXN1bHRDYWNoZT17fSxuKHRoaXMucmVuZGVyKCksdCx0aGlzLl9yZXN1bHRDYWNoZSl9LGUucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe2lmKHRoaXMuX2lzUmVuZGVyYWJsZSlyZXR1cm4gdGhpcy5fb2JqZWN0LnJlbmRlcigpO3ZhciB0PW51bGw7aWYodGhpcy5faGFzTXVsdGlwbGVDaGlsZHJlbil7dD10aGlzLl9jaGlsZFJlc3VsdDtmb3IodmFyIGk9dGhpcy5fY2hpbGQsZT0wO2U8aS5sZW5ndGg7ZSsrKXRbZV09aVtlXS5yZW5kZXIoKX1lbHNlIHRoaXMuX2NoaWxkJiYodD10aGlzLl9jaGlsZC5yZW5kZXIoKSk7cmV0dXJuIHRoaXMuX2lzTW9kaWZpZXI/dGhpcy5fb2JqZWN0Lm1vZGlmeSh0KTp0fSxpLmV4cG9ydHM9ZX0se1wiLi9FbnRpdHlcIjo1LFwiLi9TcGVjUGFyc2VyXCI6MTN9XSwxMjpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3RoaXMuaWQ9bnVsbCx0aGlzLl9vYmplY3RzPW51bGwsdGhpcy5ub2RlPW5ldyBjLHRoaXMuX2RlZmluaXRpb249bnVsbCx0JiZ0aGlzLmxvYWQodCl9ZnVuY3Rpb24gbih0KXtmb3IodmFyIGkgaW4gcClpZihpIGluIHQpe3ZhciBlPXRbaV07cmV0dXJuIGUgaW5zdGFuY2VvZiBBcnJheXx8KGU9W2VdKSxwW2ldLmFwcGx5KHRoaXMsZSl9fWZ1bmN0aW9uIG8odCl7dmFyIGk9dC50cmFuc2Zvcm0sZT10Lm9wYWNpdHksbz10Lm9yaWdpbixzPXQuYWxpZ24scj10LnNpemUsYz1hLmlkZW50aXR5O2lmKGkgaW5zdGFuY2VvZiBBcnJheSlpZigxNj09PWkubGVuZ3RoJiZcIm51bWJlclwiPT10eXBlb2YgaVswXSljPWk7ZWxzZSBmb3IodmFyIHA9MDtwPGkubGVuZ3RoO3ArKyljPWEubXVsdGlwbHkoYyxuKGlbcF0pKTtlbHNlIGkgaW5zdGFuY2VvZiBGdW5jdGlvbj9jPWk6aSBpbnN0YW5jZW9mIE9iamVjdCYmKGM9bihpKSk7dmFyIHU9bmV3IGgoe3RyYW5zZm9ybTpjLG9wYWNpdHk6ZSxvcmlnaW46byxhbGlnbjpzLHNpemU6cn0pO3JldHVybiB1fWZ1bmN0aW9uIHModCl7Zm9yKHZhciBpPW5ldyBjLGU9MDtlPHQubGVuZ3RoO2UrKyl7dmFyIG49ci5jYWxsKHRoaXMsdFtlXSk7biYmaS5hZGQobil9cmV0dXJuIGl9ZnVuY3Rpb24gcih0KXt2YXIgaSxlO2lmKHQgaW5zdGFuY2VvZiBBcnJheSlpPXMuY2FsbCh0aGlzLHQpO2Vsc2UgaWYoZT10aGlzLl9vYmplY3RzLmxlbmd0aCx0LnJlbmRlciYmdC5yZW5kZXIgaW5zdGFuY2VvZiBGdW5jdGlvbilpPXQ7ZWxzZSBpZih0LnRhcmdldCl7dmFyIG49ci5jYWxsKHRoaXMsdC50YXJnZXQpLGE9by5jYWxsKHRoaXMsdCk7aT1uZXcgYyhhKSxpLmFkZChuKSx0LmlkJiYodGhpcy5pZFt0LmlkXT1hKX1lbHNlIHQuaWQmJihpPW5ldyBjLHRoaXMuaWRbdC5pZF09aSk7cmV0dXJuIHRoaXMuX29iamVjdHNbZV09aSxpfXZhciBhPXQoXCIuL1RyYW5zZm9ybVwiKSxoPXQoXCIuL01vZGlmaWVyXCIpLGM9dChcIi4vUmVuZGVyTm9kZVwiKSxwPXt0cmFuc2xhdGU6YS50cmFuc2xhdGUscm90YXRlOmEucm90YXRlLHJvdGF0ZVg6YS5yb3RhdGVYLHJvdGF0ZVk6YS5yb3RhdGVZLHJvdGF0ZVo6YS5yb3RhdGVaLHJvdGF0ZUF4aXM6YS5yb3RhdGVBeGlzLHNjYWxlOmEuc2NhbGUsc2tldzphLnNrZXcsbWF0cml4M2Q6ZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfX07ZS5wcm90b3R5cGUuY3JlYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBlKHRoaXMuX2RlZmluaXRpb24pfSxlLnByb3RvdHlwZS5sb2FkPWZ1bmN0aW9uKHQpe3RoaXMuX2RlZmluaXRpb249dCx0aGlzLmlkPXt9LHRoaXMuX29iamVjdHM9W10sdGhpcy5ub2RlLnNldChyLmNhbGwodGhpcyx0KSl9LGUucHJvdG90eXBlLmFkZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUuYWRkLmFwcGx5KHRoaXMubm9kZSxhcmd1bWVudHMpfSxlLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlLnJlbmRlci5hcHBseSh0aGlzLm5vZGUsYXJndW1lbnRzKX0saS5leHBvcnRzPWV9LHtcIi4vTW9kaWZpZXJcIjo5LFwiLi9SZW5kZXJOb2RlXCI6MTEsXCIuL1RyYW5zZm9ybVwiOjE1fV0sMTM6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSgpe3RoaXMucmVzdWx0PXt9fWZ1bmN0aW9uIG4odCxpKXtyZXR1cm5bdFswXSppWzBdK3RbMV0qaVs0XSt0WzJdKmlbOF0sdFswXSppWzFdK3RbMV0qaVs1XSt0WzJdKmlbOV0sdFswXSppWzJdK3RbMV0qaVs2XSt0WzJdKmlbMTBdXX12YXIgbz10KFwiLi9UcmFuc2Zvcm1cIik7ZS5faW5zdGFuY2U9bmV3IGUsZS5wYXJzZT1mdW5jdGlvbih0LGkpe3JldHVybiBlLl9pbnN0YW5jZS5wYXJzZSh0LGkpfSxlLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0LGkpe3JldHVybiB0aGlzLnJlc2V0KCksdGhpcy5fcGFyc2VTcGVjKHQsaSxvLmlkZW50aXR5KSx0aGlzLnJlc3VsdH0sZS5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLnJlc3VsdD17fX07dmFyIHM9WzAsMF07ZS5wcm90b3R5cGUuX3BhcnNlU3BlYz1mdW5jdGlvbih0LGksZSl7dmFyIHIsYSxoLGMscCx1LGw7aWYoXCJudW1iZXJcIj09dHlwZW9mIHQpe2lmKHI9dCxoPWkudHJhbnNmb3JtLHU9aS5hbGlnbnx8cyxpLnNpemUmJnUmJih1WzBdfHx1WzFdKSl7dmFyIGY9W3VbMF0qaS5zaXplWzBdLHVbMV0qaS5zaXplWzFdLDBdO2g9by50aGVuTW92ZShoLG4oZixlKSl9dGhpcy5yZXN1bHRbcl09e3RyYW5zZm9ybTpoLG9wYWNpdHk6aS5vcGFjaXR5LG9yaWdpbjppLm9yaWdpbnx8cyxhbGlnbjppLmFsaWdufHxzLHNpemU6aS5zaXplfX1lbHNle2lmKCF0KXJldHVybjtpZih0IGluc3RhbmNlb2YgQXJyYXkpZm9yKHZhciBkPTA7ZDx0Lmxlbmd0aDtkKyspdGhpcy5fcGFyc2VTcGVjKHRbZF0saSxlKTtlbHNle2E9dC50YXJnZXQsaD1pLnRyYW5zZm9ybSxjPWkub3BhY2l0eSxwPWkub3JpZ2luLHU9aS5hbGlnbixsPWkuc2l6ZTt2YXIgXz1lO2lmKHZvaWQgMCE9PXQub3BhY2l0eSYmKGM9aS5vcGFjaXR5KnQub3BhY2l0eSksdC50cmFuc2Zvcm0mJihoPW8ubXVsdGlwbHkoaS50cmFuc2Zvcm0sdC50cmFuc2Zvcm0pKSx0Lm9yaWdpbiYmKHA9dC5vcmlnaW4sXz1pLnRyYW5zZm9ybSksdC5hbGlnbiYmKHU9dC5hbGlnbiksdC5zaXplfHx0LnByb3BvcnRpb25zKXt2YXIgeT1sO2w9W2xbMF0sbFsxXV0sdC5zaXplJiYodm9pZCAwIT09dC5zaXplWzBdJiYobFswXT10LnNpemVbMF0pLHZvaWQgMCE9PXQuc2l6ZVsxXSYmKGxbMV09dC5zaXplWzFdKSksdC5wcm9wb3J0aW9ucyYmKHZvaWQgMCE9PXQucHJvcG9ydGlvbnNbMF0mJihsWzBdPWxbMF0qdC5wcm9wb3J0aW9uc1swXSksdm9pZCAwIT09dC5wcm9wb3J0aW9uc1sxXSYmKGxbMV09bFsxXSp0LnByb3BvcnRpb25zWzFdKSkseSYmKHUmJih1WzBdfHx1WzFdKSYmKGg9by50aGVuTW92ZShoLG4oW3VbMF0qeVswXSx1WzFdKnlbMV0sMF0sZSkpKSxwJiYocFswXXx8cFsxXSkmJihoPW8ubW92ZVRoZW4oWy1wWzBdKmxbMF0sLXBbMV0qbFsxXSwwXSxoKSkpLF89aS50cmFuc2Zvcm0scD1udWxsLHU9bnVsbH10aGlzLl9wYXJzZVNwZWMoYSx7dHJhbnNmb3JtOmgsb3BhY2l0eTpjLG9yaWdpbjpwLGFsaWduOnUsc2l6ZTpsfSxfKX19fSxpLmV4cG9ydHM9ZX0se1wiLi9UcmFuc2Zvcm1cIjoxNX1dLDE0OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7Yy5jYWxsKHRoaXMpLHRoaXMub3B0aW9ucz17fSx0aGlzLnByb3BlcnRpZXM9e30sdGhpcy5hdHRyaWJ1dGVzPXt9LHRoaXMuY29udGVudD1cIlwiLHRoaXMuY2xhc3NMaXN0PVtdLHRoaXMuc2l6ZT1udWxsLHRoaXMuX2NsYXNzZXNEaXJ0eT0hMCx0aGlzLl9zdHlsZXNEaXJ0eT0hMCx0aGlzLl9hdHRyaWJ1dGVzRGlydHk9ITAsdGhpcy5fc2l6ZURpcnR5PSEwLHRoaXMuX2NvbnRlbnREaXJ0eT0hMCx0aGlzLl90cnVlU2l6ZUNoZWNrPSEwLHRoaXMuX2RpcnR5Q2xhc3Nlcz1bXSx0JiZ0aGlzLnNldE9wdGlvbnModCksdGhpcy5fY3VycmVudFRhcmdldD1udWxsfWZ1bmN0aW9uIG4odCl7Zm9yKHZhciBpPTA7aTx0aGlzLl9kaXJ0eUNsYXNzZXMubGVuZ3RoO2krKyl0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZGlydHlDbGFzc2VzW2ldKTt0aGlzLl9kaXJ0eUNsYXNzZXM9W119ZnVuY3Rpb24gbyh0KXtmb3IodmFyIGkgaW4gdGhpcy5wcm9wZXJ0aWVzKXQuc3R5bGVbaV09dGhpcy5wcm9wZXJ0aWVzW2ldfWZ1bmN0aW9uIHModCl7Zm9yKHZhciBpIGluIHRoaXMucHJvcGVydGllcyl0LnN0eWxlW2ldPVwiXCJ9ZnVuY3Rpb24gcih0KXtmb3IodmFyIGkgaW4gdGhpcy5hdHRyaWJ1dGVzKXQuc2V0QXR0cmlidXRlKGksdGhpcy5hdHRyaWJ1dGVzW2ldKX1mdW5jdGlvbiBhKHQpe2Zvcih2YXIgaSBpbiB0aGlzLmF0dHJpYnV0ZXMpdC5yZW1vdmVBdHRyaWJ1dGUoaSl9ZnVuY3Rpb24gaCh0LGkpe3JldHVybiB0JiZpP3RbMF0hPT1pWzBdfHx0WzFdIT09aVsxXTp0IT09aX12YXIgYz10KFwiLi9FbGVtZW50T3V0cHV0XCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuZWxlbWVudFR5cGU9XCJkaXZcIixlLnByb3RvdHlwZS5lbGVtZW50Q2xhc3M9XCJmYW1vdXMtc3VyZmFjZVwiLGUucHJvdG90eXBlLnNldEF0dHJpYnV0ZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBpIGluIHQpe2lmKFwic3R5bGVcIj09PWkpdGhyb3cgbmV3IEVycm9yKCdDYW5ub3Qgc2V0IHN0eWxlcyB2aWEgXCJzZXRBdHRyaWJ1dGVzXCIgYXMgaXQgd2lsbCBicmVhayBGYW1vLnVzLiAgVXNlIFwic2V0UHJvcGVydGllc1wiIGluc3RlYWQuJyk7dGhpcy5hdHRyaWJ1dGVzW2ldPXRbaV19dGhpcy5fYXR0cmlidXRlc0RpcnR5PSEwfSxlLnByb3RvdHlwZS5nZXRBdHRyaWJ1dGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXR0cmlidXRlc30sZS5wcm90b3R5cGUuc2V0UHJvcGVydGllcz1mdW5jdGlvbih0KXtmb3IodmFyIGkgaW4gdCl0aGlzLnByb3BlcnRpZXNbaV09dFtpXTtyZXR1cm4gdGhpcy5fc3R5bGVzRGlydHk9ITAsdGhpc30sZS5wcm90b3R5cGUuZ2V0UHJvcGVydGllcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnByb3BlcnRpZXN9LGUucHJvdG90eXBlLmFkZENsYXNzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNsYXNzTGlzdC5pbmRleE9mKHQpPDAmJih0aGlzLmNsYXNzTGlzdC5wdXNoKHQpLHRoaXMuX2NsYXNzZXNEaXJ0eT0hMCksdGhpc30sZS5wcm90b3R5cGUucmVtb3ZlQ2xhc3M9ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5jbGFzc0xpc3QuaW5kZXhPZih0KTtyZXR1cm4gaT49MCYmKHRoaXMuX2RpcnR5Q2xhc3Nlcy5wdXNoKHRoaXMuY2xhc3NMaXN0LnNwbGljZShpLDEpWzBdKSx0aGlzLl9jbGFzc2VzRGlydHk9ITApLHRoaXN9LGUucHJvdG90eXBlLnRvZ2dsZUNsYXNzPWZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuY2xhc3NMaXN0LmluZGV4T2YodCk7cmV0dXJuIGk+PTA/dGhpcy5yZW1vdmVDbGFzcyh0KTp0aGlzLmFkZENsYXNzKHQpLHRoaXN9LGUucHJvdG90eXBlLnNldENsYXNzZXM9ZnVuY3Rpb24odCl7dmFyIGk9MCxlPVtdO2ZvcihpPTA7aTx0aGlzLmNsYXNzTGlzdC5sZW5ndGg7aSsrKXQuaW5kZXhPZih0aGlzLmNsYXNzTGlzdFtpXSk8MCYmZS5wdXNoKHRoaXMuY2xhc3NMaXN0W2ldKTtmb3IoaT0wO2k8ZS5sZW5ndGg7aSsrKXRoaXMucmVtb3ZlQ2xhc3MoZVtpXSk7Zm9yKGk9MDtpPHQubGVuZ3RoO2krKyl0aGlzLmFkZENsYXNzKHRbaV0pO3JldHVybiB0aGlzfSxlLnByb3RvdHlwZS5nZXRDbGFzc0xpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jbGFzc0xpc3R9LGUucHJvdG90eXBlLnNldENvbnRlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudCE9PXQmJih0aGlzLmNvbnRlbnQ9dCx0aGlzLl9jb250ZW50RGlydHk9ITApLHRoaXN9LGUucHJvdG90eXBlLmdldENvbnRlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50fSxlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3JldHVybiB0LnNpemUmJnRoaXMuc2V0U2l6ZSh0LnNpemUpLHQuY2xhc3NlcyYmdGhpcy5zZXRDbGFzc2VzKHQuY2xhc3NlcyksdC5wcm9wZXJ0aWVzJiZ0aGlzLnNldFByb3BlcnRpZXModC5wcm9wZXJ0aWVzKSx0LmF0dHJpYnV0ZXMmJnRoaXMuc2V0QXR0cmlidXRlcyh0LmF0dHJpYnV0ZXMpLHQuY29udGVudCYmdGhpcy5zZXRDb250ZW50KHQuY29udGVudCksdGhpc30sZS5wcm90b3R5cGUuc2V0dXA9ZnVuY3Rpb24odCl7dmFyIGk9dC5hbGxvY2F0ZSh0aGlzLmVsZW1lbnRUeXBlKTtpZih0aGlzLmVsZW1lbnRDbGFzcylpZih0aGlzLmVsZW1lbnRDbGFzcyBpbnN0YW5jZW9mIEFycmF5KWZvcih2YXIgZT0wO2U8dGhpcy5lbGVtZW50Q2xhc3MubGVuZ3RoO2UrKylpLmNsYXNzTGlzdC5hZGQodGhpcy5lbGVtZW50Q2xhc3NbZV0pO2Vsc2UgaS5jbGFzc0xpc3QuYWRkKHRoaXMuZWxlbWVudENsYXNzKTtpLnN0eWxlLmRpc3BsYXk9XCJcIix0aGlzLmF0dGFjaChpKSx0aGlzLl9vcGFjaXR5PW51bGwsdGhpcy5fY3VycmVudFRhcmdldD1pLHRoaXMuX3N0eWxlc0RpcnR5PSEwLHRoaXMuX2NsYXNzZXNEaXJ0eT0hMCx0aGlzLl9hdHRyaWJ1dGVzRGlydHk9ITAsdGhpcy5fc2l6ZURpcnR5PSEwLHRoaXMuX2NvbnRlbnREaXJ0eT0hMCx0aGlzLl9vcmlnaW5EaXJ0eT0hMCx0aGlzLl90cmFuc2Zvcm1EaXJ0eT0hMH0sZS5wcm90b3R5cGUuY29tbWl0PWZ1bmN0aW9uKHQpe3RoaXMuX2N1cnJlbnRUYXJnZXR8fHRoaXMuc2V0dXAodC5hbGxvY2F0b3IpO3ZhciBpPXRoaXMuX2N1cnJlbnRUYXJnZXQsZT10LnNpemU7aWYodGhpcy5fY2xhc3Nlc0RpcnR5KXtuLmNhbGwodGhpcyxpKTtmb3IodmFyIHM9dGhpcy5nZXRDbGFzc0xpc3QoKSxhPTA7YTxzLmxlbmd0aDthKyspaS5jbGFzc0xpc3QuYWRkKHNbYV0pO3RoaXMuX2NsYXNzZXNEaXJ0eT0hMSx0aGlzLl90cnVlU2l6ZUNoZWNrPSEwfWlmKHRoaXMuX3N0eWxlc0RpcnR5JiYoby5jYWxsKHRoaXMsaSksdGhpcy5fc3R5bGVzRGlydHk9ITEsdGhpcy5fdHJ1ZVNpemVDaGVjaz0hMCksdGhpcy5fYXR0cmlidXRlc0RpcnR5JiYoci5jYWxsKHRoaXMsaSksdGhpcy5fYXR0cmlidXRlc0RpcnR5PSExLHRoaXMuX3RydWVTaXplQ2hlY2s9ITApLHRoaXMuc2l6ZSl7dmFyIHA9dC5zaXplO2lmKGU9W3RoaXMuc2l6ZVswXSx0aGlzLnNpemVbMV1dLHZvaWQgMD09PWVbMF0mJihlWzBdPXBbMF0pLHZvaWQgMD09PWVbMV0mJihlWzFdPXBbMV0pLGVbMF09PT0hMHx8ZVsxXT09PSEwKXtpZihlWzBdIT09ITB8fCF0aGlzLl90cnVlU2l6ZUNoZWNrJiYwIT09dGhpcy5fc2l6ZVswXSl0aGlzLl9zaXplJiYoZVswXT10aGlzLl9zaXplWzBdKTtlbHNle3ZhciB1PWkub2Zmc2V0V2lkdGg7dGhpcy5fc2l6ZSYmdGhpcy5fc2l6ZVswXSE9PXUmJih0aGlzLl9zaXplWzBdPXUsdGhpcy5fc2l6ZURpcnR5PSEwKSxlWzBdPXV9aWYoZVsxXSE9PSEwfHwhdGhpcy5fdHJ1ZVNpemVDaGVjayYmMCE9PXRoaXMuX3NpemVbMV0pdGhpcy5fc2l6ZSYmKGVbMV09dGhpcy5fc2l6ZVsxXSk7ZWxzZXt2YXIgbD1pLm9mZnNldEhlaWdodDt0aGlzLl9zaXplJiZ0aGlzLl9zaXplWzFdIT09bCYmKHRoaXMuX3NpemVbMV09bCx0aGlzLl9zaXplRGlydHk9ITApLGVbMV09bH10aGlzLl90cnVlU2l6ZUNoZWNrPSExfX1oKHRoaXMuX3NpemUsZSkmJih0aGlzLl9zaXplfHwodGhpcy5fc2l6ZT1bMCwwXSksdGhpcy5fc2l6ZVswXT1lWzBdLHRoaXMuX3NpemVbMV09ZVsxXSx0aGlzLl9zaXplRGlydHk9ITApLHRoaXMuX3NpemVEaXJ0eSYmKHRoaXMuX3NpemUmJihpLnN0eWxlLndpZHRoPXRoaXMuc2l6ZSYmdGhpcy5zaXplWzBdPT09ITA/XCJcIjp0aGlzLl9zaXplWzBdK1wicHhcIixpLnN0eWxlLmhlaWdodD10aGlzLnNpemUmJnRoaXMuc2l6ZVsxXT09PSEwP1wiXCI6dGhpcy5fc2l6ZVsxXStcInB4XCIpLHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoXCJyZXNpemVcIikpLHRoaXMuX2NvbnRlbnREaXJ0eSYmKHRoaXMuZGVwbG95KGkpLHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoXCJkZXBsb3lcIiksdGhpcy5fY29udGVudERpcnR5PSExLHRoaXMuX3RydWVTaXplQ2hlY2s9ITApLGMucHJvdG90eXBlLmNvbW1pdC5jYWxsKHRoaXMsdCl9LGUucHJvdG90eXBlLmNsZWFudXA9ZnVuY3Rpb24odCl7dmFyIGk9MCxlPXRoaXMuX2N1cnJlbnRUYXJnZXQ7dGhpcy5fZXZlbnRPdXRwdXQuZW1pdChcInJlY2FsbFwiKSx0aGlzLnJlY2FsbChlKSxlLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsZS5zdHlsZS5vcGFjaXR5PVwiXCIsZS5zdHlsZS53aWR0aD1cIlwiLGUuc3R5bGUuaGVpZ2h0PVwiXCIscy5jYWxsKHRoaXMsZSksYS5jYWxsKHRoaXMsZSk7dmFyIG89dGhpcy5nZXRDbGFzc0xpc3QoKTtmb3Iobi5jYWxsKHRoaXMsZSksaT0wO2k8by5sZW5ndGg7aSsrKWUuY2xhc3NMaXN0LnJlbW92ZShvW2ldKTtpZih0aGlzLmVsZW1lbnRDbGFzcylpZih0aGlzLmVsZW1lbnRDbGFzcyBpbnN0YW5jZW9mIEFycmF5KWZvcihpPTA7aTx0aGlzLmVsZW1lbnRDbGFzcy5sZW5ndGg7aSsrKWUuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmVsZW1lbnRDbGFzc1tpXSk7ZWxzZSBlLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5lbGVtZW50Q2xhc3MpO3RoaXMuZGV0YWNoKGUpLHRoaXMuX2N1cnJlbnRUYXJnZXQ9bnVsbCx0LmRlYWxsb2NhdGUoZSl9LGUucHJvdG90eXBlLmRlcGxveT1mdW5jdGlvbih0KXt2YXIgaT10aGlzLmdldENvbnRlbnQoKTtpZihpIGluc3RhbmNlb2YgTm9kZSl7Zm9yKDt0Lmhhc0NoaWxkTm9kZXMoKTspdC5yZW1vdmVDaGlsZCh0LmZpcnN0Q2hpbGQpO3QuYXBwZW5kQ2hpbGQoaSl9ZWxzZSB0LmlubmVySFRNTD1pfSxlLnByb3RvdHlwZS5yZWNhbGw9ZnVuY3Rpb24odCl7Zm9yKHZhciBpPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTt0Lmhhc0NoaWxkTm9kZXMoKTspaS5hcHBlbmRDaGlsZCh0LmZpcnN0Q2hpbGQpO3RoaXMuc2V0Q29udGVudChpKX0sZS5wcm90b3R5cGUuZ2V0U2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaXplP3RoaXMuX3NpemU6dGhpcy5zaXplfSxlLnByb3RvdHlwZS5zZXRTaXplPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNpemU9dD9bdFswXSx0WzFdXTpudWxsLHRoaXMuX3NpemVEaXJ0eT0hMCx0aGlzfSxpLmV4cG9ydHM9ZX0se1wiLi9FbGVtZW50T3V0cHV0XCI6M31dLDE1OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7cmV0dXJuIDI9PT10Lmxlbmd0aD90WzBdKnRbMF0rdFsxXSp0WzFdOnRbMF0qdFswXSt0WzFdKnRbMV0rdFsyXSp0WzJdfWZ1bmN0aW9uIG4odCl7cmV0dXJuIE1hdGguc3FydChlKHQpKX1mdW5jdGlvbiBvKHQpe3JldHVybiAwPnQ/LTE6MX12YXIgcz17fTtzLnByZWNpc2lvbj0xZS02LHMuaWRlbnRpdHk9WzEsMCwwLDAsMCwxLDAsMCwwLDAsMSwwLDAsMCwwLDFdLHMubXVsdGlwbHk0eDQ9ZnVuY3Rpb24odCxpKXtyZXR1cm5bdFswXSppWzBdK3RbNF0qaVsxXSt0WzhdKmlbMl0rdFsxMl0qaVszXSx0WzFdKmlbMF0rdFs1XSppWzFdK3RbOV0qaVsyXSt0WzEzXSppWzNdLHRbMl0qaVswXSt0WzZdKmlbMV0rdFsxMF0qaVsyXSt0WzE0XSppWzNdLHRbM10qaVswXSt0WzddKmlbMV0rdFsxMV0qaVsyXSt0WzE1XSppWzNdLHRbMF0qaVs0XSt0WzRdKmlbNV0rdFs4XSppWzZdK3RbMTJdKmlbN10sdFsxXSppWzRdK3RbNV0qaVs1XSt0WzldKmlbNl0rdFsxM10qaVs3XSx0WzJdKmlbNF0rdFs2XSppWzVdK3RbMTBdKmlbNl0rdFsxNF0qaVs3XSx0WzNdKmlbNF0rdFs3XSppWzVdK3RbMTFdKmlbNl0rdFsxNV0qaVs3XSx0WzBdKmlbOF0rdFs0XSppWzldK3RbOF0qaVsxMF0rdFsxMl0qaVsxMV0sdFsxXSppWzhdK3RbNV0qaVs5XSt0WzldKmlbMTBdK3RbMTNdKmlbMTFdLHRbMl0qaVs4XSt0WzZdKmlbOV0rdFsxMF0qaVsxMF0rdFsxNF0qaVsxMV0sdFszXSppWzhdK3RbN10qaVs5XSt0WzExXSppWzEwXSt0WzE1XSppWzExXSx0WzBdKmlbMTJdK3RbNF0qaVsxM10rdFs4XSppWzE0XSt0WzEyXSppWzE1XSx0WzFdKmlbMTJdK3RbNV0qaVsxM10rdFs5XSppWzE0XSt0WzEzXSppWzE1XSx0WzJdKmlbMTJdK3RbNl0qaVsxM10rdFsxMF0qaVsxNF0rdFsxNF0qaVsxNV0sdFszXSppWzEyXSt0WzddKmlbMTNdK3RbMTFdKmlbMTRdK3RbMTVdKmlbMTVdXX0scy5tdWx0aXBseT1mdW5jdGlvbih0LGkpe3JldHVyblt0WzBdKmlbMF0rdFs0XSppWzFdK3RbOF0qaVsyXSx0WzFdKmlbMF0rdFs1XSppWzFdK3RbOV0qaVsyXSx0WzJdKmlbMF0rdFs2XSppWzFdK3RbMTBdKmlbMl0sMCx0WzBdKmlbNF0rdFs0XSppWzVdK3RbOF0qaVs2XSx0WzFdKmlbNF0rdFs1XSppWzVdK3RbOV0qaVs2XSx0WzJdKmlbNF0rdFs2XSppWzVdK3RbMTBdKmlbNl0sMCx0WzBdKmlbOF0rdFs0XSppWzldK3RbOF0qaVsxMF0sdFsxXSppWzhdK3RbNV0qaVs5XSt0WzldKmlbMTBdLHRbMl0qaVs4XSt0WzZdKmlbOV0rdFsxMF0qaVsxMF0sMCx0WzBdKmlbMTJdK3RbNF0qaVsxM10rdFs4XSppWzE0XSt0WzEyXSx0WzFdKmlbMTJdK3RbNV0qaVsxM10rdFs5XSppWzE0XSt0WzEzXSx0WzJdKmlbMTJdK3RbNl0qaVsxM10rdFsxMF0qaVsxNF0rdFsxNF0sMV1cbn0scy50aGVuTW92ZT1mdW5jdGlvbih0LGkpe3JldHVybiBpWzJdfHwoaVsyXT0wKSxbdFswXSx0WzFdLHRbMl0sMCx0WzRdLHRbNV0sdFs2XSwwLHRbOF0sdFs5XSx0WzEwXSwwLHRbMTJdK2lbMF0sdFsxM10raVsxXSx0WzE0XStpWzJdLDFdfSxzLm1vdmVUaGVuPWZ1bmN0aW9uKHQsaSl7dFsyXXx8KHRbMl09MCk7dmFyIGU9dFswXSppWzBdK3RbMV0qaVs0XSt0WzJdKmlbOF0sbj10WzBdKmlbMV0rdFsxXSppWzVdK3RbMl0qaVs5XSxvPXRbMF0qaVsyXSt0WzFdKmlbNl0rdFsyXSppWzEwXTtyZXR1cm4gcy50aGVuTW92ZShpLFtlLG4sb10pfSxzLnRyYW5zbGF0ZT1mdW5jdGlvbih0LGksZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPTApLFsxLDAsMCwwLDAsMSwwLDAsMCwwLDEsMCx0LGksZSwxXX0scy50aGVuU2NhbGU9ZnVuY3Rpb24odCxpKXtyZXR1cm5baVswXSp0WzBdLGlbMV0qdFsxXSxpWzJdKnRbMl0sMCxpWzBdKnRbNF0saVsxXSp0WzVdLGlbMl0qdFs2XSwwLGlbMF0qdFs4XSxpWzFdKnRbOV0saVsyXSp0WzEwXSwwLGlbMF0qdFsxMl0saVsxXSp0WzEzXSxpWzJdKnRbMTRdLDFdfSxzLnNjYWxlPWZ1bmN0aW9uKHQsaSxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MSksdm9pZCAwPT09aSYmKGk9dCksW3QsMCwwLDAsMCxpLDAsMCwwLDAsZSwwLDAsMCwwLDFdfSxzLnJvdGF0ZVg9ZnVuY3Rpb24odCl7dmFyIGk9TWF0aC5jb3ModCksZT1NYXRoLnNpbih0KTtyZXR1cm5bMSwwLDAsMCwwLGksZSwwLDAsLWUsaSwwLDAsMCwwLDFdfSxzLnJvdGF0ZVk9ZnVuY3Rpb24odCl7dmFyIGk9TWF0aC5jb3ModCksZT1NYXRoLnNpbih0KTtyZXR1cm5baSwwLC1lLDAsMCwxLDAsMCxlLDAsaSwwLDAsMCwwLDFdfSxzLnJvdGF0ZVo9ZnVuY3Rpb24odCl7dmFyIGk9TWF0aC5jb3ModCksZT1NYXRoLnNpbih0KTtyZXR1cm5baSxlLDAsMCwtZSxpLDAsMCwwLDAsMSwwLDAsMCwwLDFdfSxzLnJvdGF0ZT1mdW5jdGlvbih0LGksZSl7dmFyIG49TWF0aC5jb3ModCksbz1NYXRoLnNpbih0KSxzPU1hdGguY29zKGkpLHI9TWF0aC5zaW4oaSksYT1NYXRoLmNvcyhlKSxoPU1hdGguc2luKGUpLGM9W3MqYSxuKmgrbypyKmEsbypoLW4qciphLDAsLXMqaCxuKmEtbypyKmgsbyphK24qcipoLDAsciwtbypzLG4qcywwLDAsMCwwLDFdO3JldHVybiBjfSxzLnJvdGF0ZUF4aXM9ZnVuY3Rpb24odCxpKXt2YXIgZT1NYXRoLnNpbihpKSxuPU1hdGguY29zKGkpLG89MS1uLHM9dFswXSp0WzBdKm8scj10WzBdKnRbMV0qbyxhPXRbMF0qdFsyXSpvLGg9dFsxXSp0WzFdKm8sYz10WzFdKnRbMl0qbyxwPXRbMl0qdFsyXSpvLHU9dFswXSplLGw9dFsxXSplLGY9dFsyXSplLGQ9W3MrbixyK2YsYS1sLDAsci1mLGgrbixjK3UsMCxhK2wsYy11LHArbiwwLDAsMCwwLDFdO3JldHVybiBkfSxzLmFib3V0T3JpZ2luPWZ1bmN0aW9uKHQsaSl7dmFyIGU9dFswXS0odFswXSppWzBdK3RbMV0qaVs0XSt0WzJdKmlbOF0pLG49dFsxXS0odFswXSppWzFdK3RbMV0qaVs1XSt0WzJdKmlbOV0pLG89dFsyXS0odFswXSppWzJdK3RbMV0qaVs2XSt0WzJdKmlbMTBdKTtyZXR1cm4gcy50aGVuTW92ZShpLFtlLG4sb10pfSxzLnNrZXc9ZnVuY3Rpb24odCxpLGUpe3JldHVyblsxLE1hdGgudGFuKGkpLDAsMCxNYXRoLnRhbihlKSwxLDAsMCwwLE1hdGgudGFuKHQpLDEsMCwwLDAsMCwxXX0scy5za2V3WD1mdW5jdGlvbih0KXtyZXR1cm5bMSwwLDAsMCxNYXRoLnRhbih0KSwxLDAsMCwwLDAsMSwwLDAsMCwwLDFdfSxzLnNrZXdZPWZ1bmN0aW9uKHQpe3JldHVyblsxLE1hdGgudGFuKHQpLDAsMCwwLDEsMCwwLDAsMCwxLDAsMCwwLDAsMV19LHMucGVyc3BlY3RpdmU9ZnVuY3Rpb24odCl7cmV0dXJuWzEsMCwwLDAsMCwxLDAsMCwwLDAsMSwtMS90LDAsMCwwLDFdfSxzLmdldFRyYW5zbGF0ZT1mdW5jdGlvbih0KXtyZXR1cm5bdFsxMl0sdFsxM10sdFsxNF1dfSxzLmludmVyc2U9ZnVuY3Rpb24odCl7dmFyIGk9dFs1XSp0WzEwXS10WzZdKnRbOV0sZT10WzRdKnRbMTBdLXRbNl0qdFs4XSxuPXRbNF0qdFs5XS10WzVdKnRbOF0sbz10WzFdKnRbMTBdLXRbMl0qdFs5XSxzPXRbMF0qdFsxMF0tdFsyXSp0WzhdLHI9dFswXSp0WzldLXRbMV0qdFs4XSxhPXRbMV0qdFs2XS10WzJdKnRbNV0saD10WzBdKnRbNl0tdFsyXSp0WzRdLGM9dFswXSp0WzVdLXRbMV0qdFs0XSxwPXRbMF0qaS10WzFdKmUrdFsyXSpuLHU9MS9wLGw9W3UqaSwtdSpvLHUqYSwwLC11KmUsdSpzLC11KmgsMCx1Km4sLXUqcix1KmMsMCwwLDAsMCwxXTtyZXR1cm4gbFsxMl09LXRbMTJdKmxbMF0tdFsxM10qbFs0XS10WzE0XSpsWzhdLGxbMTNdPS10WzEyXSpsWzFdLXRbMTNdKmxbNV0tdFsxNF0qbFs5XSxsWzE0XT0tdFsxMl0qbFsyXS10WzEzXSpsWzZdLXRbMTRdKmxbMTBdLGx9LHMudHJhbnNwb3NlPWZ1bmN0aW9uKHQpe3JldHVyblt0WzBdLHRbNF0sdFs4XSx0WzEyXSx0WzFdLHRbNV0sdFs5XSx0WzEzXSx0WzJdLHRbNl0sdFsxMF0sdFsxNF0sdFszXSx0WzddLHRbMTFdLHRbMTVdXX0scy5pbnRlcnByZXQ9ZnVuY3Rpb24odCl7dmFyIGk9W3RbMF0sdFsxXSx0WzJdXSxyPW8oaVswXSksYT1uKGkpLGg9W2lbMF0rciphLGlbMV0saVsyXV0sYz0yL2UoaCk7aWYoYz49MS8wKXJldHVybnt0cmFuc2xhdGU6cy5nZXRUcmFuc2xhdGUodCkscm90YXRlOlswLDAsMF0sc2NhbGU6WzAsMCwwXSxza2V3OlswLDAsMF19O3ZhciBwPVswLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwxXTtwWzBdPTEtYypoWzBdKmhbMF0scFs1XT0xLWMqaFsxXSpoWzFdLHBbMTBdPTEtYypoWzJdKmhbMl0scFsxXT0tYypoWzBdKmhbMV0scFsyXT0tYypoWzBdKmhbMl0scFs2XT0tYypoWzFdKmhbMl0scFs0XT1wWzFdLHBbOF09cFsyXSxwWzldPXBbNl07dmFyIHU9cy5tdWx0aXBseShwLHQpLGw9W3VbNV0sdVs2XV0sZj1vKGxbMF0pLGQ9bihsKSxfPVtsWzBdK2YqZCxsWzFdXSx5PTIvZShfKSxnPVsxLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwxXTtnWzVdPTEteSpfWzBdKl9bMF0sZ1sxMF09MS15Kl9bMV0qX1sxXSxnWzZdPS15Kl9bMF0qX1sxXSxnWzldPWdbNl07dmFyIHY9cy5tdWx0aXBseShnLHApLG09cy5tdWx0aXBseSh2LHQpLE89cy5zY2FsZShtWzBdPDA/LTE6MSxtWzVdPDA/LTE6MSxtWzEwXTwwPy0xOjEpO209cy5tdWx0aXBseShtLE8pLHY9cy5tdWx0aXBseShPLHYpO3ZhciBTPXt9O3JldHVybiBTLnRyYW5zbGF0ZT1zLmdldFRyYW5zbGF0ZSh0KSxTLnJvdGF0ZT1bTWF0aC5hdGFuMigtdls2XSx2WzEwXSksTWF0aC5hc2luKHZbMl0pLE1hdGguYXRhbjIoLXZbMV0sdlswXSldLFMucm90YXRlWzBdfHwoUy5yb3RhdGVbMF09MCxTLnJvdGF0ZVsyXT1NYXRoLmF0YW4yKHZbNF0sdls1XSkpLFMuc2NhbGU9W21bMF0sbVs1XSxtWzEwXV0sUy5za2V3PVtNYXRoLmF0YW4yKG1bOV0sUy5zY2FsZVsyXSksTWF0aC5hdGFuMihtWzhdLFMuc2NhbGVbMl0pLE1hdGguYXRhbjIobVs0XSxTLnNjYWxlWzBdKV0sTWF0aC5hYnMoUy5yb3RhdGVbMF0pK01hdGguYWJzKFMucm90YXRlWzJdKT4xLjUqTWF0aC5QSSYmKFMucm90YXRlWzFdPU1hdGguUEktUy5yb3RhdGVbMV0sUy5yb3RhdGVbMV0+TWF0aC5QSSYmKFMucm90YXRlWzFdLT0yKk1hdGguUEkpLFMucm90YXRlWzFdPC1NYXRoLlBJJiYoUy5yb3RhdGVbMV0rPTIqTWF0aC5QSSksUy5yb3RhdGVbMF08MD9TLnJvdGF0ZVswXSs9TWF0aC5QSTpTLnJvdGF0ZVswXS09TWF0aC5QSSxTLnJvdGF0ZVsyXTwwP1Mucm90YXRlWzJdKz1NYXRoLlBJOlMucm90YXRlWzJdLT1NYXRoLlBJKSxTfSxzLmF2ZXJhZ2U9ZnVuY3Rpb24odCxpLGUpe2U9dm9pZCAwPT09ZT8uNTplO2Zvcih2YXIgbj1zLmludGVycHJldCh0KSxvPXMuaW50ZXJwcmV0KGkpLHI9e3RyYW5zbGF0ZTpbMCwwLDBdLHJvdGF0ZTpbMCwwLDBdLHNjYWxlOlswLDAsMF0sc2tldzpbMCwwLDBdfSxhPTA7Mz5hO2ErKylyLnRyYW5zbGF0ZVthXT0oMS1lKSpuLnRyYW5zbGF0ZVthXStlKm8udHJhbnNsYXRlW2FdLHIucm90YXRlW2FdPSgxLWUpKm4ucm90YXRlW2FdK2Uqby5yb3RhdGVbYV0sci5zY2FsZVthXT0oMS1lKSpuLnNjYWxlW2FdK2Uqby5zY2FsZVthXSxyLnNrZXdbYV09KDEtZSkqbi5za2V3W2FdK2Uqby5za2V3W2FdO3JldHVybiBzLmJ1aWxkKHIpfSxzLmJ1aWxkPWZ1bmN0aW9uKHQpe3ZhciBpPXMuc2NhbGUodC5zY2FsZVswXSx0LnNjYWxlWzFdLHQuc2NhbGVbMl0pLGU9cy5za2V3KHQuc2tld1swXSx0LnNrZXdbMV0sdC5za2V3WzJdKSxuPXMucm90YXRlKHQucm90YXRlWzBdLHQucm90YXRlWzFdLHQucm90YXRlWzJdKTtyZXR1cm4gcy50aGVuTW92ZShzLm11bHRpcGx5KHMubXVsdGlwbHkobixlKSxpKSx0LnRyYW5zbGF0ZSl9LHMuZXF1YWxzPWZ1bmN0aW9uKHQsaSl7cmV0dXJuIXMubm90RXF1YWxzKHQsaSl9LHMubm90RXF1YWxzPWZ1bmN0aW9uKHQsaSl7cmV0dXJuIHQ9PT1pPyExOiEodCYmaSl8fHRbMTJdIT09aVsxMl18fHRbMTNdIT09aVsxM118fHRbMTRdIT09aVsxNF18fHRbMF0hPT1pWzBdfHx0WzFdIT09aVsxXXx8dFsyXSE9PWlbMl18fHRbNF0hPT1pWzRdfHx0WzVdIT09aVs1XXx8dFs2XSE9PWlbNl18fHRbOF0hPT1pWzhdfHx0WzldIT09aVs5XXx8dFsxMF0hPT1pWzEwXX0scy5ub3JtYWxpemVSb3RhdGlvbj1mdW5jdGlvbih0KXt2YXIgaT10LnNsaWNlKDApO2ZvcigoaVswXT09PS41Kk1hdGguUEl8fGlbMF09PT0uNSotTWF0aC5QSSkmJihpWzBdPS1pWzBdLGlbMV09TWF0aC5QSS1pWzFdLGlbMl0tPU1hdGguUEkpLGlbMF0+LjUqTWF0aC5QSSYmKGlbMF09aVswXS1NYXRoLlBJLGlbMV09TWF0aC5QSS1pWzFdLGlbMl0tPU1hdGguUEkpLGlbMF08LjUqLU1hdGguUEkmJihpWzBdPWlbMF0rTWF0aC5QSSxpWzFdPS1NYXRoLlBJLWlbMV0saVsyXS09TWF0aC5QSSk7aVsxXTwtTWF0aC5QSTspaVsxXSs9MipNYXRoLlBJO2Zvcig7aVsxXT49TWF0aC5QSTspaVsxXS09MipNYXRoLlBJO2Zvcig7aVsyXTwtTWF0aC5QSTspaVsyXSs9MipNYXRoLlBJO2Zvcig7aVsyXT49TWF0aC5QSTspaVsyXS09MipNYXRoLlBJO3JldHVybiBpfSxzLmluRnJvbnQ9WzEsMCwwLDAsMCwxLDAsMCwwLDAsMSwwLDAsMCwuMDAxLDFdLHMuYmVoaW5kPVsxLDAsMCwwLDAsMSwwLDAsMCwwLDEsMCwwLDAsLS4wMDEsMV0saS5leHBvcnRzPXN9LHt9XSwxNjpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3RoaXMuX25vZGU9bmV3IHMsdGhpcy5fZXZlbnRJbnB1dD1uZXcgbix0aGlzLl9ldmVudE91dHB1dD1uZXcgbixuLnNldElucHV0SGFuZGxlcih0aGlzLHRoaXMuX2V2ZW50SW5wdXQpLG4uc2V0T3V0cHV0SGFuZGxlcih0aGlzLHRoaXMuX2V2ZW50T3V0cHV0KSx0aGlzLm9wdGlvbnM9ci5jbG9uZSh0aGlzLmNvbnN0cnVjdG9yLkRFRkFVTFRfT1BUSU9OU3x8ZS5ERUZBVUxUX09QVElPTlMpLHRoaXMuX29wdGlvbnNNYW5hZ2VyPW5ldyBvKHRoaXMub3B0aW9ucyksdCYmdGhpcy5zZXRPcHRpb25zKHQpfXZhciBuPXQoXCIuL0V2ZW50SGFuZGxlclwiKSxvPXQoXCIuL09wdGlvbnNNYW5hZ2VyXCIpLHM9dChcIi4vUmVuZGVyTm9kZVwiKSxyPXQoXCIuLi91dGlsaXRpZXMvVXRpbGl0eVwiKTtlLkRFRkFVTFRfT1BUSU9OUz17fSxlLnByb3RvdHlwZS5nZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKHQpfSxlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3RoaXMuX29wdGlvbnNNYW5hZ2VyLnBhdGNoKHQpfSxlLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbm9kZS5hZGQuYXBwbHkodGhpcy5fbm9kZSxhcmd1bWVudHMpfSxlLnByb3RvdHlwZS5fYWRkPWUucHJvdG90eXBlLmFkZCxlLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbm9kZS5yZW5kZXIoKX0sZS5wcm90b3R5cGUuZ2V0U2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ub2RlJiZ0aGlzLl9ub2RlLmdldFNpemU/dGhpcy5fbm9kZS5nZXRTaXplLmFwcGx5KHRoaXMuX25vZGUsYXJndW1lbnRzKXx8dGhpcy5vcHRpb25zLnNpemU6dGhpcy5vcHRpb25zLnNpemV9LGkuZXhwb3J0cz1lfSx7XCIuLi91dGlsaXRpZXMvVXRpbGl0eVwiOjk1LFwiLi9FdmVudEhhbmRsZXJcIjo3LFwiLi9PcHRpb25zTWFuYWdlclwiOjEwLFwiLi9SZW5kZXJOb2RlXCI6MTF9XSwxNzpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3R8fCh0PVtdKSx0IGluc3RhbmNlb2YgQXJyYXkmJih0PXthcnJheTp0fSksdGhpcy5fPW51bGwsdGhpcy5pbmRleD10LmluZGV4fHwwLHQuYXJyYXk/dGhpcy5fPW5ldyB0aGlzLmNvbnN0cnVjdG9yLkJhY2tpbmcodC5hcnJheSk6dC5fJiYodGhpcy5fPXQuXyksdGhpcy5pbmRleD09PXRoaXMuXy5maXJzdEluZGV4JiYodGhpcy5fLmZpcnN0Tm9kZT10aGlzKSx0aGlzLmluZGV4PT09dGhpcy5fLmZpcnN0SW5kZXgrdGhpcy5fLmFycmF5Lmxlbmd0aC0xJiYodGhpcy5fLmxhc3ROb2RlPXRoaXMpLHZvaWQgMCE9PXQubG9vcCYmKHRoaXMuXy5sb29wPXQubG9vcCksdm9pZCAwIT09dC50cmFja1NpemUmJih0aGlzLl8udHJhY2tTaXplPXQudHJhY2tTaXplKSx0aGlzLl9wcmV2aW91c05vZGU9bnVsbCx0aGlzLl9uZXh0Tm9kZT1udWxsfWUuQmFja2luZz1mdW5jdGlvbih0KXt0aGlzLmFycmF5PXQsdGhpcy5maXJzdEluZGV4PTAsdGhpcy5sb29wPSExLHRoaXMuZmlyc3ROb2RlPW51bGwsdGhpcy5sYXN0Tm9kZT1udWxsLHRoaXMuY3VtdWxhdGl2ZVNpemVzPVtbMCwwXV0sdGhpcy5zaXplRGlydHk9ITAsdGhpcy50cmFja1NpemU9ITF9LGUuQmFja2luZy5wcm90b3R5cGUuZ2V0VmFsdWU9ZnVuY3Rpb24odCl7dmFyIGk9dC10aGlzLmZpcnN0SW5kZXg7cmV0dXJuIDA+aXx8aT49dGhpcy5hcnJheS5sZW5ndGg/bnVsbDp0aGlzLmFycmF5W2ldfSxlLkJhY2tpbmcucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKHQsaSl7dGhpcy5hcnJheVt0LXRoaXMuZmlyc3RJbmRleF09aX0sZS5CYWNraW5nLnByb3RvdHlwZS5nZXRTaXplPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmN1bXVsYXRpdmVTaXplc1t0XX0sZS5CYWNraW5nLnByb3RvdHlwZS5jYWxjdWxhdGVTaXplPWZ1bmN0aW9uKHQpe3Q9dHx8dGhpcy5hcnJheS5sZW5ndGg7Zm9yKHZhciBpPVswLDBdLGU9MDt0PmU7ZSsrKXt2YXIgbj10aGlzLmFycmF5W2VdLmdldFNpemUoKTtpZighbilyZXR1cm4gdm9pZCAwO3ZvaWQgMCE9PWlbMF0mJih2b2lkIDA9PT1uWzBdP2lbMF09dm9pZCAwOmlbMF0rPW5bMF0pLHZvaWQgMCE9PWlbMV0mJih2b2lkIDA9PT1uWzFdP2lbMV09dm9pZCAwOmlbMV0rPW5bMV0pLHRoaXMuY3VtdWxhdGl2ZVNpemVzW2UrMV09aS5zbGljZSgpfXJldHVybiB0aGlzLnNpemVEaXJ0eT0hMSxpfSxlLkJhY2tpbmcucHJvdG90eXBlLnJlaW5kZXg9ZnVuY3Rpb24odCxpLGUpe2lmKHRoaXMuYXJyYXlbMF0pe2Zvcih2YXIgbj0wLG89dGhpcy5maXJzdEluZGV4LHM9ZS1pLHI9dGhpcy5maXJzdE5vZGU7dC0xPm87KXI9ci5nZXROZXh0KCksbysrO3ZhciBhPXI7Zm9yKG49MDtpPm47bisrKXI9ci5nZXROZXh0KCksciYmKHIuX3ByZXZpb3VzTm9kZT1hKTt2YXIgaD1yP3IuZ2V0TmV4dCgpOm51bGw7Zm9yKGEuX25leHROb2RlPW51bGwscj1hLG49MDtlPm47bisrKXI9ci5nZXROZXh0KCk7aWYobys9ZSxyIT09aCYmKHIuX25leHROb2RlPWgsaCYmKGguX3ByZXZpb3VzTm9kZT1yKSksaClmb3Iocj1oLG8rKztyJiZvPHRoaXMuYXJyYXkubGVuZ3RoK3RoaXMuZmlyc3RJbmRleDspci5fbmV4dE5vZGU/ci5pbmRleCs9czpyLmluZGV4PW8scj1yLmdldE5leHQoKSxvKys7dGhpcy50cmFja1NpemUmJih0aGlzLnNpemVEaXJ0eT0hMCl9fSxlLnByb3RvdHlwZS5nZXRQcmV2aW91cz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuXy5hcnJheS5sZW5ndGg7cmV0dXJuIHQ/dGhpcy5pbmRleD09PXRoaXMuXy5maXJzdEluZGV4P3RoaXMuXy5sb29wPyh0aGlzLl9wcmV2aW91c05vZGU9dGhpcy5fLmxhc3ROb2RlfHxuZXcgdGhpcy5jb25zdHJ1Y3Rvcih7Xzp0aGlzLl8saW5kZXg6dGhpcy5fLmZpcnN0SW5kZXgrdC0xfSksdGhpcy5fcHJldmlvdXNOb2RlLl9uZXh0Tm9kZT10aGlzKTp0aGlzLl9wcmV2aW91c05vZGU9bnVsbDp0aGlzLl9wcmV2aW91c05vZGV8fCh0aGlzLl9wcmV2aW91c05vZGU9bmV3IHRoaXMuY29uc3RydWN0b3Ioe186dGhpcy5fLGluZGV4OnRoaXMuaW5kZXgtMX0pLHRoaXMuX3ByZXZpb3VzTm9kZS5fbmV4dE5vZGU9dGhpcyk6dGhpcy5fcHJldmlvdXNOb2RlPW51bGwsdGhpcy5fcHJldmlvdXNOb2RlfSxlLnByb3RvdHlwZS5nZXROZXh0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fLmFycmF5Lmxlbmd0aDtyZXR1cm4gdD90aGlzLmluZGV4PT09dGhpcy5fLmZpcnN0SW5kZXgrdC0xP3RoaXMuXy5sb29wPyh0aGlzLl9uZXh0Tm9kZT10aGlzLl8uZmlyc3ROb2RlfHxuZXcgdGhpcy5jb25zdHJ1Y3Rvcih7Xzp0aGlzLl8saW5kZXg6dGhpcy5fLmZpcnN0SW5kZXh9KSx0aGlzLl9uZXh0Tm9kZS5fcHJldmlvdXNOb2RlPXRoaXMpOnRoaXMuX25leHROb2RlPW51bGw6dGhpcy5fbmV4dE5vZGV8fCh0aGlzLl9uZXh0Tm9kZT1uZXcgdGhpcy5jb25zdHJ1Y3Rvcih7Xzp0aGlzLl8saW5kZXg6dGhpcy5pbmRleCsxfSksdGhpcy5fbmV4dE5vZGUuX3ByZXZpb3VzTm9kZT10aGlzKTp0aGlzLl9uZXh0Tm9kZT1udWxsLHRoaXMuX25leHROb2RlfSxlLnByb3RvdHlwZS5pbmRleE9mPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl8uYXJyYXkuaW5kZXhPZih0KX0sZS5wcm90b3R5cGUuZ2V0SW5kZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbmRleH0sZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIlwiK3RoaXMuaW5kZXh9LGUucHJvdG90eXBlLnVuc2hpZnQ9ZnVuY3Rpb24oKXt0aGlzLl8uYXJyYXkudW5zaGlmdC5hcHBseSh0aGlzLl8uYXJyYXksYXJndW1lbnRzKSx0aGlzLl8uZmlyc3RJbmRleC09YXJndW1lbnRzLmxlbmd0aCx0aGlzLl8udHJhY2tTaXplJiYodGhpcy5fLnNpemVEaXJ0eT0hMCl9LGUucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24oKXt0aGlzLl8uYXJyYXkucHVzaC5hcHBseSh0aGlzLl8uYXJyYXksYXJndW1lbnRzKSx0aGlzLl8udHJhY2tTaXplJiYodGhpcy5fLnNpemVEaXJ0eT0hMCl9LGUucHJvdG90eXBlLnNwbGljZT1mdW5jdGlvbih0LGkpe3ZhciBlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKTt0aGlzLl8uYXJyYXkuc3BsaWNlLmFwcGx5KHRoaXMuXy5hcnJheSxbdC10aGlzLl8uZmlyc3RJbmRleCxpXS5jb25jYXQoZSkpLHRoaXMuXy5yZWluZGV4KHQsaSxlLmxlbmd0aCl9LGUucHJvdG90eXBlLnN3YXA9ZnVuY3Rpb24odCl7dmFyIGk9dC5nZXQoKSxlPXRoaXMuZ2V0KCk7dGhpcy5fLnNldFZhbHVlKHRoaXMuaW5kZXgsaSksdGhpcy5fLnNldFZhbHVlKHQuaW5kZXgsZSk7dmFyIG49dGhpcy5fcHJldmlvdXNOb2RlLG89dGhpcy5fbmV4dE5vZGUscz10aGlzLmluZGV4LHI9dC5fcHJldmlvdXNOb2RlLGE9dC5fbmV4dE5vZGUsaD10LmluZGV4O3RoaXMuaW5kZXg9aCx0aGlzLl9wcmV2aW91c05vZGU9cj09PXRoaXM/dDpyLHRoaXMuX3ByZXZpb3VzTm9kZSYmKHRoaXMuX3ByZXZpb3VzTm9kZS5fbmV4dE5vZGU9dGhpcyksdGhpcy5fbmV4dE5vZGU9YT09PXRoaXM/dDphLHRoaXMuX25leHROb2RlJiYodGhpcy5fbmV4dE5vZGUuX3ByZXZpb3VzTm9kZT10aGlzKSx0LmluZGV4PXMsdC5fcHJldmlvdXNOb2RlPW49PT10P3RoaXM6bix0Ll9wcmV2aW91c05vZGUmJih0Ll9wcmV2aW91c05vZGUuX25leHROb2RlPXQpLHQuX25leHROb2RlPW89PT10P3RoaXM6byx0Ll9uZXh0Tm9kZSYmKHQuX25leHROb2RlLl9wcmV2aW91c05vZGU9dCksdGhpcy5pbmRleD09PXRoaXMuXy5maXJzdEluZGV4P3RoaXMuXy5maXJzdE5vZGU9dGhpczp0aGlzLmluZGV4PT09dGhpcy5fLmZpcnN0SW5kZXgrdGhpcy5fLmFycmF5Lmxlbmd0aC0xJiYodGhpcy5fLmxhc3ROb2RlPXRoaXMpLHQuaW5kZXg9PT10aGlzLl8uZmlyc3RJbmRleD90aGlzLl8uZmlyc3ROb2RlPXQ6dC5pbmRleD09PXRoaXMuXy5maXJzdEluZGV4K3RoaXMuXy5hcnJheS5sZW5ndGgtMSYmKHRoaXMuXy5sYXN0Tm9kZT10KSx0aGlzLl8udHJhY2tTaXplJiYodGhpcy5fLnNpemVEaXJ0eT0hMCl9LGUucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl8uZ2V0VmFsdWUodGhpcy5pbmRleCl9LGUucHJvdG90eXBlLmdldFNpemU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldCgpO3JldHVybiB0P3QuZ2V0U2l6ZSgpOm51bGx9LGUucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe3RoaXMuXy50cmFja1NpemUmJnRoaXMuXy5zaXplRGlydHkmJnRoaXMuXy5jYWxjdWxhdGVTaXplKCk7dmFyIHQ9dGhpcy5nZXQoKTtyZXR1cm4gdD90LnJlbmRlci5hcHBseSh0LGFyZ3VtZW50cyk6bnVsbH0saS5leHBvcnRzPWV9LHt9XSwxODpbZnVuY3Rpb24odCxpKXtpLmV4cG9ydHM9e0NvbnRleHQ6dChcIi4vQ29udGV4dFwiKSxFbGVtZW50QWxsb2NhdG9yOnQoXCIuL0VsZW1lbnRBbGxvY2F0b3JcIiksRWxlbWVudE91dHB1dDp0KFwiLi9FbGVtZW50T3V0cHV0XCIpLEVuZ2luZTp0KFwiLi9FbmdpbmVcIiksRW50aXR5OnQoXCIuL0VudGl0eVwiKSxFdmVudEVtaXR0ZXI6dChcIi4vRXZlbnRFbWl0dGVyXCIpLEV2ZW50SGFuZGxlcjp0KFwiLi9FdmVudEhhbmRsZXJcIiksR3JvdXA6dChcIi4vR3JvdXBcIiksTW9kaWZpZXI6dChcIi4vTW9kaWZpZXJcIiksT3B0aW9uc01hbmFnZXI6dChcIi4vT3B0aW9uc01hbmFnZXJcIiksUmVuZGVyTm9kZTp0KFwiLi9SZW5kZXJOb2RlXCIpLFNjZW5lOnQoXCIuL1NjZW5lXCIpLFNwZWNQYXJzZXI6dChcIi4vU3BlY1BhcnNlclwiKSxTdXJmYWNlOnQoXCIuL1N1cmZhY2VcIiksVHJhbnNmb3JtOnQoXCIuL1RyYW5zZm9ybVwiKSxWaWV3OnQoXCIuL1ZpZXdcIiksVmlld1NlcXVlbmNlOnQoXCIuL1ZpZXdTZXF1ZW5jZVwiKX19LHtcIi4vQ29udGV4dFwiOjEsXCIuL0VsZW1lbnRBbGxvY2F0b3JcIjoyLFwiLi9FbGVtZW50T3V0cHV0XCI6MyxcIi4vRW5naW5lXCI6NCxcIi4vRW50aXR5XCI6NSxcIi4vRXZlbnRFbWl0dGVyXCI6NixcIi4vRXZlbnRIYW5kbGVyXCI6NyxcIi4vR3JvdXBcIjo4LFwiLi9Nb2RpZmllclwiOjksXCIuL09wdGlvbnNNYW5hZ2VyXCI6MTAsXCIuL1JlbmRlck5vZGVcIjoxMSxcIi4vU2NlbmVcIjoxMixcIi4vU3BlY1BhcnNlclwiOjEzLFwiLi9TdXJmYWNlXCI6MTQsXCIuL1RyYW5zZm9ybVwiOjE1LFwiLi9WaWV3XCI6MTYsXCIuL1ZpZXdTZXF1ZW5jZVwiOjE3fV0sMTk6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLmRpc3BhdGNoZXJzPXt9LHRoaXMuY3Vyck1vZGU9dm9pZCAwLHRoaXMuc2V0TW9kZSh0KX12YXIgbj10KFwiLi4vY29yZS9FdmVudEhhbmRsZXJcIik7ZS5wcm90b3R5cGUuc2V0TW9kZT1mdW5jdGlvbih0KXtpZih0IT09dGhpcy5jdXJyTW9kZSl7dmFyIGk9dGhpcy5jdXJyTW9kZTt0aGlzLmRpc3BhdGNoZXJzW3RoaXMuY3Vyck1vZGVdJiZ0aGlzLmRpc3BhdGNoZXJzW3RoaXMuY3Vyck1vZGVdLnRyaWdnZXIoXCJ1bnBpcGVcIiksdGhpcy5jdXJyTW9kZT10LHRoaXMuZGlzcGF0Y2hlcnNbdF0mJnRoaXMuZGlzcGF0Y2hlcnNbdF0uZW1pdChcInBpcGVcIiksdGhpcy5lbWl0KFwiY2hhbmdlXCIse2Zyb206aSx0bzp0fSl9fSxlLnByb3RvdHlwZS5mb3JNb2RlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRpc3BhdGNoZXJzW3RdfHwodGhpcy5kaXNwYXRjaGVyc1t0XT1uZXcgbiksdGhpcy5kaXNwYXRjaGVyc1t0XX0sZS5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbih0LGkpe2lmKHZvaWQgMD09PXRoaXMuY3Vyck1vZGUpcmV0dXJuITE7aXx8KGk9e30pO3ZhciBlPXRoaXMuZGlzcGF0Y2hlcnNbdGhpcy5jdXJyTW9kZV07cmV0dXJuIGU/ZS50cmlnZ2VyKHQsaSk6dm9pZCAwfSxpLmV4cG9ydHM9ZX0se1wiLi4vY29yZS9FdmVudEhhbmRsZXJcIjo3fV0sMjA6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXtuLmNhbGwodGhpcyksdGhpcy5fY29uZGl0aW9uPXR9dmFyIG49dChcIi4uL2NvcmUvRXZlbnRIYW5kbGVyXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbih0LGkpe3JldHVybiB0aGlzLl9jb25kaXRpb24odCxpKT9uLnByb3RvdHlwZS5lbWl0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTp2b2lkIDB9LGUucHJvdG90eXBlLnRyaWdnZXI9ZS5wcm90b3R5cGUuZW1pdCxpLmV4cG9ydHM9ZX0se1wiLi4vY29yZS9FdmVudEhhbmRsZXJcIjo3fV0sMjE6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXtuLmNhbGwodGhpcyksdGhpcy5fbWFwcGluZ0Z1bmN0aW9uPXR9dmFyIG49dChcIi4uL2NvcmUvRXZlbnRIYW5kbGVyXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuc3Vic2NyaWJlPW51bGwsZS5wcm90b3R5cGUudW5zdWJzY3JpYmU9bnVsbCxlLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKHQsaSl7dmFyIGU9dGhpcy5fbWFwcGluZ0Z1bmN0aW9uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtlJiZlLmVtaXQgaW5zdGFuY2VvZiBGdW5jdGlvbiYmZS5lbWl0KHQsaSl9LGUucHJvdG90eXBlLnRyaWdnZXI9ZS5wcm90b3R5cGUuZW1pdCxpLmV4cG9ydHM9ZX0se1wiLi4vY29yZS9FdmVudEhhbmRsZXJcIjo3fV0sMjI6W2Z1bmN0aW9uKHQsaSl7aS5leHBvcnRzPXtFdmVudEFyYml0ZXI6dChcIi4vRXZlbnRBcmJpdGVyXCIpLEV2ZW50RmlsdGVyOnQoXCIuL0V2ZW50RmlsdGVyXCIpLEV2ZW50TWFwcGVyOnQoXCIuL0V2ZW50TWFwcGVyXCIpfX0se1wiLi9FdmVudEFyYml0ZXJcIjoxOSxcIi4vRXZlbnRGaWx0ZXJcIjoyMCxcIi4vRXZlbnRNYXBwZXJcIjoyMX1dLDIzOltmdW5jdGlvbih0LGkpe2kuZXhwb3J0cz17ZXZlbnRzOnQoXCIuL2V2ZW50c1wiKSxjb3JlOnQoXCIuL2NvcmVcIiksbWF0aDp0KFwiLi9tYXRoXCIpLGlucHV0czp0KFwiLi9pbnB1dHNcIikscGh5c2ljczp0KFwiLi9waHlzaWNzXCIpLG1vZGlmaWVyczp0KFwiLi9tb2RpZmllcnNcIiksc3VyZmFjZXM6dChcIi4vc3VyZmFjZXNcIiksdHJhbnNpdGlvbnM6dChcIi4vdHJhbnNpdGlvbnNcIiksdXRpbGl0aWVzOnQoXCIuL3V0aWxpdGllc1wiKSx2aWV3czp0KFwiLi92aWV3c1wiKSx3aWRnZXRzOnQoXCIuL3dpZGdldHNcIil9fSx7XCIuL2NvcmVcIjoxOCxcIi4vZXZlbnRzXCI6MjIsXCIuL2lucHV0c1wiOjM2LFwiLi9tYXRoXCI6NDIsXCIuL21vZGlmaWVyc1wiOjQ3LFwiLi9waHlzaWNzXCI6NzEsXCIuL3N1cmZhY2VzXCI6ODIsXCIuL3RyYW5zaXRpb25zXCI6OTIsXCIuL3V0aWxpdGllc1wiOjk2LFwiLi92aWV3c1wiOjExMSxcIi4vd2lkZ2V0c1wiOjExNn1dLDI0OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCxpKXt2b2lkIDA9PT1pJiYoaT1cInVwZGF0ZVwiKSx0aGlzLl9zdGF0ZT10JiZ0LmdldCYmdC5zZXQ/dDpuZXcgcyh0fHwwKSx0aGlzLl9ldmVudElucHV0PW5ldyBvLG8uc2V0SW5wdXRIYW5kbGVyKHRoaXMsdGhpcy5fZXZlbnRJbnB1dCksdGhpcy5fZXZlbnRJbnB1dC5vbihpLG4uYmluZCh0aGlzKSl9ZnVuY3Rpb24gbih0KXt2YXIgaT10LmRlbHRhLGU9dGhpcy5nZXQoKTtpZihpLmNvbnN0cnVjdG9yPT09ZS5jb25zdHJ1Y3Rvcil7dmFyIG49aSBpbnN0YW5jZW9mIEFycmF5P1tlWzBdK2lbMF0sZVsxXStpWzFdXTplK2k7dGhpcy5zZXQobil9fXZhciBvPXQoXCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiKSxzPXQoXCIuLi90cmFuc2l0aW9ucy9UcmFuc2l0aW9uYWJsZVwiKTtlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhdGUuZ2V0KCl9LGUucHJvdG90eXBlLnNldD1mdW5jdGlvbih0KXt0aGlzLl9zdGF0ZS5zZXQodCl9LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiOjcsXCIuLi90cmFuc2l0aW9ucy9UcmFuc2l0aW9uYWJsZVwiOjg4fV0sMjU6W2Z1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcih0LGZ1bmN0aW9uKHQpe3JldHVybiB0LnN0b3BQcm9wYWdhdGlvbigpLCExfSwhMCl9dmFyIGk9XCJvbnRvdWNoc3RhcnRcImluIHdpbmRvdztpJiYodChcIm1vdXNlZG93blwiKSx0KFwibW91c2Vtb3ZlXCIpLHQoXCJtb3VzZXVwXCIpLHQoXCJtb3VzZWxlYXZlXCIpKX0se31dLDI2OltmdW5jdGlvbigpeyFmdW5jdGlvbigpe2lmKHdpbmRvdy5DdXN0b21FdmVudCl7dmFyIHQ9MzAwLGk9NTAwLGU9e30sbj17fSxvPURhdGUubm93O3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLGZ1bmN0aW9uKHQpe2Zvcih2YXIgaT1vKCksbj0wO248dC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7bisrKXt2YXIgcz10LmNoYW5nZWRUb3VjaGVzW25dO2Vbcy5pZGVudGlmaWVyXT1pfX0pLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsZnVuY3Rpb24odCl7Zm9yKHZhciBpPTA7aTx0LmNoYW5nZWRUb3VjaGVzLmxlbmd0aDtpKyspe3ZhciBuPXQuY2hhbmdlZFRvdWNoZXNbaV07ZGVsZXRlIGVbbi5pZGVudGlmaWVyXX19KSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsZnVuY3Rpb24oaSl7Zm9yKHZhciBzPW8oKSxyPTA7cjxpLmNoYW5nZWRUb3VjaGVzLmxlbmd0aDtyKyspe3ZhciBhPWkuY2hhbmdlZFRvdWNoZXNbcl0saD1lW2EuaWRlbnRpZmllcl07aWYoaCYmdD5zLWgpe3ZhciBjPW5ldyB3aW5kb3cuQ3VzdG9tRXZlbnQoXCJjbGlja1wiLHtidWJibGVzOiEwLGRldGFpbDphfSk7bltzXT1pLGkudGFyZ2V0LmRpc3BhdGNoRXZlbnQoYyl9ZGVsZXRlIGVbYS5pZGVudGlmaWVyXX19KSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsZnVuY3Rpb24odCl7dmFyIGU9bygpO2Zvcih2YXIgcyBpbiBuKXt2YXIgcj1uW3NdO2k+ZS1zP3QgaW5zdGFuY2VvZiB3aW5kb3cuTW91c2VFdmVudCYmdC50YXJnZXQ9PT1yLnRhcmdldCYmdC5zdG9wUHJvcGFnYXRpb24oKTpkZWxldGUgbltzXX19LCEwKX19KCl9LHt9XSwyNzpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQsaSl7dGhpcy5fZXZlbnRJbnB1dD1uZXcgbyx0aGlzLl9ldmVudE91dHB1dD1uZXcgbyxvLnNldElucHV0SGFuZGxlcih0aGlzLHRoaXMuX2V2ZW50SW5wdXQpLG8uc2V0T3V0cHV0SGFuZGxlcih0aGlzLHRoaXMuX2V2ZW50T3V0cHV0KSx0aGlzLl9zeW5jcz17fSx0JiZ0aGlzLmFkZFN5bmModCksaSYmdGhpcy5zZXRPcHRpb25zKGkpfWZ1bmN0aW9uIG4odCxpKXtzW3RdJiYodGhpcy5fc3luY3NbdF09bmV3IHNbdF0oaSksdGhpcy5waXBlU3luYyh0KSl9dmFyIG89dChcIi4uL2NvcmUvRXZlbnRIYW5kbGVyXCIpO2UuRElSRUNUSU9OX1g9MCxlLkRJUkVDVElPTl9ZPTEsZS5ESVJFQ1RJT05fWj0yO3ZhciBzPXt9O2UucmVnaXN0ZXI9ZnVuY3Rpb24odCl7Zm9yKHZhciBpIGluIHQpe2lmKHNbaV0pe2lmKHNbaV09PT10W2ldKXJldHVybjt0aHJvdyBuZXcgRXJyb3IoXCJ0aGlzIGtleSBpcyByZWdpc3RlcmVkIHRvIGEgZGlmZmVyZW50IHN5bmMgY2xhc3NcIil9c1tpXT10W2ldfX0sZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbih0KXtmb3IodmFyIGkgaW4gdGhpcy5fc3luY3MpdGhpcy5fc3luY3NbaV0uc2V0T3B0aW9ucyh0KX0sZS5wcm90b3R5cGUucGlwZVN5bmM9ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5fc3luY3NbdF07dGhpcy5fZXZlbnRJbnB1dC5waXBlKGkpLGkucGlwZSh0aGlzLl9ldmVudE91dHB1dCl9LGUucHJvdG90eXBlLnVucGlwZVN5bmM9ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5fc3luY3NbdF07dGhpcy5fZXZlbnRJbnB1dC51bnBpcGUoaSksaS51bnBpcGUodGhpcy5fZXZlbnRPdXRwdXQpfSxlLnByb3RvdHlwZS5hZGRTeW5jPWZ1bmN0aW9uKHQpe2lmKHQgaW5zdGFuY2VvZiBBcnJheSlmb3IodmFyIGk9MDtpPHQubGVuZ3RoO2krKyluLmNhbGwodGhpcyx0W2ldKTtlbHNlIGlmKHQgaW5zdGFuY2VvZiBPYmplY3QpZm9yKHZhciBlIGluIHQpbi5jYWxsKHRoaXMsZSx0W2VdKX0saS5leHBvcnRzPWV9LHtcIi4uL2NvcmUvRXZlbnRIYW5kbGVyXCI6N31dLDI4OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dGhpcy5vcHRpb25zPU9iamVjdC5jcmVhdGUoZS5ERUZBVUxUX09QVElPTlMpLHRoaXMuX29wdGlvbnNNYW5hZ2VyPW5ldyBoKHRoaXMub3B0aW9ucyksdCYmdGhpcy5zZXRPcHRpb25zKHQpLHRoaXMuX2V2ZW50SW5wdXQ9bmV3IGEsdGhpcy5fZXZlbnRPdXRwdXQ9bmV3IGEsYS5zZXRJbnB1dEhhbmRsZXIodGhpcyx0aGlzLl9ldmVudElucHV0KSxhLnNldE91dHB1dEhhbmRsZXIodGhpcyx0aGlzLl9ldmVudE91dHB1dCksdGhpcy5fZXZlbnRJbnB1dC5vbihcIm1vdXNlZG93blwiLG4uYmluZCh0aGlzKSksdGhpcy5fZXZlbnRJbnB1dC5vbihcIm1vdXNlbW92ZVwiLG8uYmluZCh0aGlzKSksdGhpcy5fZXZlbnRJbnB1dC5vbihcIm1vdXNldXBcIixzLmJpbmQodGhpcykpLHRoaXMub3B0aW9ucy5wcm9wb2dhdGU/dGhpcy5fZXZlbnRJbnB1dC5vbihcIm1vdXNlbGVhdmVcIixyLmJpbmQodGhpcykpOnRoaXMuX2V2ZW50SW5wdXQub24oXCJtb3VzZWxlYXZlXCIscy5iaW5kKHRoaXMpKSx0aGlzLl9wYXlsb2FkPXtkZWx0YTpudWxsLHBvc2l0aW9uOm51bGwsdmVsb2NpdHk6bnVsbCxjbGllbnRYOjAsY2xpZW50WTowLG9mZnNldFg6MCxvZmZzZXRZOjB9LHRoaXMuX3Bvc2l0aW9uSGlzdG9yeT1bXSx0aGlzLl9wb3NpdGlvbj1udWxsLHRoaXMuX3ByZXZDb29yZD12b2lkIDAsdGhpcy5fcHJldlRpbWU9dm9pZCAwLHRoaXMuX2Rvd249ITEsdGhpcy5fbW92ZWQ9ITEsdGhpcy5fZG9jdW1lbnRBY3RpdmU9ITF9ZnVuY3Rpb24gbih0KXt2YXIgaSxlO3RoaXMub3B0aW9ucy5wcmV2ZW50RGVmYXVsdCYmdC5wcmV2ZW50RGVmYXVsdCgpO3ZhciBuPXQuY2xpZW50WCxvPXQuY2xpZW50WTt0aGlzLl9wcmV2Q29vcmQ9W24sb10sdGhpcy5fcHJldlRpbWU9RGF0ZS5ub3coKSx0aGlzLl9kb3duPSEwLHRoaXMuX21vdmU9ITEsdm9pZCAwIT09dGhpcy5vcHRpb25zLmRpcmVjdGlvbj8odGhpcy5fcG9zaXRpb249MCxpPTAsZT0wKToodGhpcy5fcG9zaXRpb249WzAsMF0saT1bMCwwXSxlPVswLDBdKTt2YXIgcz10aGlzLl9wYXlsb2FkO3MuZGVsdGE9aSxzLnBvc2l0aW9uPXRoaXMuX3Bvc2l0aW9uLHMudmVsb2NpdHk9ZSxzLmNsaWVudFg9bixzLmNsaWVudFk9byxzLm9mZnNldFg9dC5vZmZzZXRYLHMub2Zmc2V0WT10Lm9mZnNldFksdGhpcy5fcG9zaXRpb25IaXN0b3J5LnB1c2goe3Bvc2l0aW9uOnMucG9zaXRpb24uc2xpY2U/cy5wb3NpdGlvbi5zbGljZSgwKTpzLnBvc2l0aW9uLHRpbWU6dGhpcy5fcHJldlRpbWV9KSx0aGlzLl9ldmVudE91dHB1dC5lbWl0KFwic3RhcnRcIixzKSx0aGlzLl9kb2N1bWVudEFjdGl2ZT0hMX1mdW5jdGlvbiBvKHQpe2lmKHRoaXMuX3ByZXZDb29yZCl7dmFyIGk9dGhpcy5fcHJldkNvb3JkLG49KHRoaXMuX3ByZXZUaW1lLHQuY2xpZW50WCksbz10LmNsaWVudFkscz1EYXRlLm5vdygpLHI9bi1pWzBdLGE9by1pWzFdO3RoaXMub3B0aW9ucy5yYWlscyYmKE1hdGguYWJzKHIpPk1hdGguYWJzKGEpP2E9MDpyPTApO3ZhciBoLHAsdT1NYXRoLm1heChzLXRoaXMuX3Bvc2l0aW9uSGlzdG9yeVswXS50aW1lLGMpLGw9dGhpcy5vcHRpb25zLnNjYWxlO3RoaXMub3B0aW9ucy5kaXJlY3Rpb249PT1lLkRJUkVDVElPTl9YPyhwPWwqcix0aGlzLl9wb3NpdGlvbis9cCxoPWwqKHRoaXMuX3Bvc2l0aW9uLXRoaXMuX3Bvc2l0aW9uSGlzdG9yeVswXS5wb3NpdGlvbikvdSk6dGhpcy5vcHRpb25zLmRpcmVjdGlvbj09PWUuRElSRUNUSU9OX1k/KHA9bCphLHRoaXMuX3Bvc2l0aW9uKz1wLGg9bCoodGhpcy5fcG9zaXRpb24tdGhpcy5fcG9zaXRpb25IaXN0b3J5WzBdLnBvc2l0aW9uKS91KToocD1bbCpyLGwqYV0saD1bbCoodGhpcy5fcG9zaXRpb25bMF0tdGhpcy5fcG9zaXRpb25IaXN0b3J5WzBdLnBvc2l0aW9uWzBdKS91LGwqKHRoaXMuX3Bvc2l0aW9uWzFdLXRoaXMuX3Bvc2l0aW9uSGlzdG9yeVswXS5wb3NpdGlvblsxXSkvdV0sdGhpcy5fcG9zaXRpb25bMF0rPXBbMF0sdGhpcy5fcG9zaXRpb25bMV0rPXBbMV0pO3ZhciBmPXRoaXMuX3BheWxvYWQ7Zi5kZWx0YT1wLGYucG9zaXRpb249dGhpcy5fcG9zaXRpb24sZi52ZWxvY2l0eT1oLGYuY2xpZW50WD1uLGYuY2xpZW50WT1vLGYub2Zmc2V0WD10Lm9mZnNldFgsZi5vZmZzZXRZPXQub2Zmc2V0WSx0aGlzLl9wb3NpdGlvbkhpc3RvcnkubGVuZ3RoPT09dGhpcy5vcHRpb25zLnZlbG9jaXR5U2FtcGxlTGVuZ3RoJiZ0aGlzLl9wb3NpdGlvbkhpc3Rvcnkuc2hpZnQoKSx0aGlzLl9wb3NpdGlvbkhpc3RvcnkucHVzaCh7cG9zaXRpb246Zi5wb3NpdGlvbi5zbGljZT9mLnBvc2l0aW9uLnNsaWNlKDApOmYucG9zaXRpb24sdGltZTpzfSksdGhpcy5fZXZlbnRPdXRwdXQuZW1pdChcInVwZGF0ZVwiLGYpLHRoaXMuX3ByZXZDb29yZD1bbixvXSx0aGlzLl9wcmV2VGltZT1zLHRoaXMuX21vdmU9ITB9fWZ1bmN0aW9uIHMoKXt0aGlzLl9kb3duJiYodGhpcy5fZXZlbnRPdXRwdXQuZW1pdChcImVuZFwiLHRoaXMuX3BheWxvYWQpLHRoaXMuX3ByZXZDb29yZD12b2lkIDAsdGhpcy5fcHJldlRpbWU9dm9pZCAwLHRoaXMuX2Rvd249ITEsdGhpcy5fbW92ZT0hMSx0aGlzLl9wb3NpdGlvbkhpc3Rvcnk9W10pfWZ1bmN0aW9uIHIodCl7aWYodGhpcy5fZG93biYmdGhpcy5fbW92ZSYmIXRoaXMuX2RvY3VtZW50QWN0aXZlKXt2YXIgaT1vLmJpbmQodGhpcyksZT1mdW5jdGlvbih0KXtzLmNhbGwodGhpcyx0KSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsaSksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIixlKX0uYmluZCh0aGlzLHQpO2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIixpKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLGUpLHRoaXMuX2RvY3VtZW50QWN0aXZlPSEwfX12YXIgYT10KFwiLi4vY29yZS9FdmVudEhhbmRsZXJcIiksaD10KFwiLi4vY29yZS9PcHRpb25zTWFuYWdlclwiKTtlLkRFRkFVTFRfT1BUSU9OUz17ZGlyZWN0aW9uOnZvaWQgMCxyYWlsczohMSxzY2FsZToxLHByb3BvZ2F0ZTohMCx2ZWxvY2l0eVNhbXBsZUxlbmd0aDoxMCxwcmV2ZW50RGVmYXVsdDohMH0sZS5ESVJFQ1RJT05fWD0wLGUuRElSRUNUSU9OX1k9MTt2YXIgYz04O2UucHJvdG90eXBlLmdldE9wdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zfSxlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9vcHRpb25zTWFuYWdlci5zZXRPcHRpb25zKHQpfSxpLmV4cG9ydHM9ZX0se1wiLi4vY29yZS9FdmVudEhhbmRsZXJcIjo3LFwiLi4vY29yZS9PcHRpb25zTWFuYWdlclwiOjEwfV0sMjk6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXtuLmNhbGwodGhpcyksdGhpcy5vcHRpb25zPU9iamVjdC5jcmVhdGUoZS5ERUZBVUxUX09QVElPTlMpLHRoaXMuX29wdGlvbnNNYW5hZ2VyPW5ldyBvKHRoaXMub3B0aW9ucyksdCYmdGhpcy5zZXRPcHRpb25zKHQpLHRoaXMuX2Rpc3BsYWNlbWVudD0wLHRoaXMuX3ByZXZpb3VzRGlzdGFuY2U9MH12YXIgbj10KFwiLi9Ud29GaW5nZXJTeW5jXCIpLG89dChcIi4uL2NvcmUvT3B0aW9uc01hbmFnZXJcIik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLkRFRkFVTFRfT1BUSU9OUz17c2NhbGU6MX0sZS5wcm90b3R5cGUuX3N0YXJ0VXBkYXRlPWZ1bmN0aW9uKHQpe3RoaXMuX3ByZXZpb3VzRGlzdGFuY2U9bi5jYWxjdWxhdGVEaXN0YW5jZSh0aGlzLnBvc0EsdGhpcy5wb3NCKSx0aGlzLl9kaXNwbGFjZW1lbnQ9MCx0aGlzLl9ldmVudE91dHB1dC5lbWl0KFwic3RhcnRcIix7Y291bnQ6dC50b3VjaGVzLmxlbmd0aCx0b3VjaGVzOlt0aGlzLnRvdWNoQUlkLHRoaXMudG91Y2hCSWRdLGRpc3RhbmNlOnRoaXMuX2Rpc3QsY2VudGVyOm4uY2FsY3VsYXRlQ2VudGVyKHRoaXMucG9zQSx0aGlzLnBvc0IpfSl9LGUucHJvdG90eXBlLl9tb3ZlVXBkYXRlPWZ1bmN0aW9uKHQpe3ZhciBpPW4uY2FsY3VsYXRlRGlzdGFuY2UodGhpcy5wb3NBLHRoaXMucG9zQiksZT1uLmNhbGN1bGF0ZUNlbnRlcih0aGlzLnBvc0EsdGhpcy5wb3NCKSxvPXRoaXMub3B0aW9ucy5zY2FsZSxzPW8qKGktdGhpcy5fcHJldmlvdXNEaXN0YW5jZSkscj1zL3Q7dGhpcy5fcHJldmlvdXNEaXN0YW5jZT1pLHRoaXMuX2Rpc3BsYWNlbWVudCs9cyx0aGlzLl9ldmVudE91dHB1dC5lbWl0KFwidXBkYXRlXCIse2RlbHRhOnMsdmVsb2NpdHk6cixkaXN0YW5jZTppLGRpc3BsYWNlbWVudDp0aGlzLl9kaXNwbGFjZW1lbnQsY2VudGVyOmUsdG91Y2hlczpbdGhpcy50b3VjaEFJZCx0aGlzLnRvdWNoQklkXX0pfSxlLnByb3RvdHlwZS5nZXRPcHRpb25zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9uc30sZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fb3B0aW9uc01hbmFnZXIuc2V0T3B0aW9ucyh0KX0saS5leHBvcnRzPWV9LHtcIi4uL2NvcmUvT3B0aW9uc01hbmFnZXJcIjoxMCxcIi4vVHdvRmluZ2VyU3luY1wiOjM1fV0sMzA6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXtuLmNhbGwodGhpcyksdGhpcy5vcHRpb25zPU9iamVjdC5jcmVhdGUoZS5ERUZBVUxUX09QVElPTlMpLHRoaXMuX29wdGlvbnNNYW5hZ2VyPW5ldyBvKHRoaXMub3B0aW9ucyksdCYmdGhpcy5zZXRPcHRpb25zKHQpLHRoaXMuX2FuZ2xlPTAsdGhpcy5fcHJldmlvdXNBbmdsZT0wfXZhciBuPXQoXCIuL1R3b0ZpbmdlclN5bmNcIiksbz10KFwiLi4vY29yZS9PcHRpb25zTWFuYWdlclwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUuREVGQVVMVF9PUFRJT05TPXtzY2FsZToxfSxlLnByb3RvdHlwZS5fc3RhcnRVcGRhdGU9ZnVuY3Rpb24odCl7dGhpcy5fYW5nbGU9MCx0aGlzLl9wcmV2aW91c0FuZ2xlPW4uY2FsY3VsYXRlQW5nbGUodGhpcy5wb3NBLHRoaXMucG9zQik7dmFyIGk9bi5jYWxjdWxhdGVDZW50ZXIodGhpcy5wb3NBLHRoaXMucG9zQik7dGhpcy5fZXZlbnRPdXRwdXQuZW1pdChcInN0YXJ0XCIse2NvdW50OnQudG91Y2hlcy5sZW5ndGgsYW5nbGU6dGhpcy5fYW5nbGUsY2VudGVyOmksdG91Y2hlczpbdGhpcy50b3VjaEFJZCx0aGlzLnRvdWNoQklkXX0pfSxlLnByb3RvdHlwZS5fbW92ZVVwZGF0ZT1mdW5jdGlvbih0KXt2YXIgaT10aGlzLm9wdGlvbnMuc2NhbGUsZT1uLmNhbGN1bGF0ZUFuZ2xlKHRoaXMucG9zQSx0aGlzLnBvc0IpLG89bi5jYWxjdWxhdGVDZW50ZXIodGhpcy5wb3NBLHRoaXMucG9zQikscz1pKihlLXRoaXMuX3ByZXZpb3VzQW5nbGUpLHI9cy90O3RoaXMuX2FuZ2xlKz1zLHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoXCJ1cGRhdGVcIix7ZGVsdGE6cyx2ZWxvY2l0eTpyLGFuZ2xlOnRoaXMuX2FuZ2xlLGNlbnRlcjpvLHRvdWNoZXM6W3RoaXMudG91Y2hBSWQsdGhpcy50b3VjaEJJZF19KSx0aGlzLl9wcmV2aW91c0FuZ2xlPWV9LGUucHJvdG90eXBlLmdldE9wdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zfSxlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9vcHRpb25zTWFuYWdlci5zZXRPcHRpb25zKHQpfSxpLmV4cG9ydHM9ZX0se1wiLi4vY29yZS9PcHRpb25zTWFuYWdlclwiOjEwLFwiLi9Ud29GaW5nZXJTeW5jXCI6MzV9XSwzMTpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe28uY2FsbCh0aGlzKSx0aGlzLm9wdGlvbnM9T2JqZWN0LmNyZWF0ZShlLkRFRkFVTFRfT1BUSU9OUyksdGhpcy5fb3B0aW9uc01hbmFnZXI9bmV3IHModGhpcy5vcHRpb25zKSx0JiZ0aGlzLnNldE9wdGlvbnModCksdGhpcy5fc2NhbGVGYWN0b3I9MSx0aGlzLl9zdGFydERpc3Q9MCx0aGlzLl9ldmVudElucHV0Lm9uKFwicGlwZVwiLG4uYmluZCh0aGlzKSl9ZnVuY3Rpb24gbigpe3RoaXMudG91Y2hBSWQ9dm9pZCAwLHRoaXMudG91Y2hCSWQ9dm9pZCAwfXZhciBvPXQoXCIuL1R3b0ZpbmdlclN5bmNcIikscz10KFwiLi4vY29yZS9PcHRpb25zTWFuYWdlclwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG8ucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUuREVGQVVMVF9PUFRJT05TPXtzY2FsZToxfSxlLnByb3RvdHlwZS5fc3RhcnRVcGRhdGU9ZnVuY3Rpb24odCl7dGhpcy5fc2NhbGVGYWN0b3I9MSx0aGlzLl9zdGFydERpc3Q9by5jYWxjdWxhdGVEaXN0YW5jZSh0aGlzLnBvc0EsdGhpcy5wb3NCKSx0aGlzLl9ldmVudE91dHB1dC5lbWl0KFwic3RhcnRcIix7Y291bnQ6dC50b3VjaGVzLmxlbmd0aCx0b3VjaGVzOlt0aGlzLnRvdWNoQUlkLHRoaXMudG91Y2hCSWRdLGRpc3RhbmNlOnRoaXMuX3N0YXJ0RGlzdCxjZW50ZXI6by5jYWxjdWxhdGVDZW50ZXIodGhpcy5wb3NBLHRoaXMucG9zQil9KX0sZS5wcm90b3R5cGUuX21vdmVVcGRhdGU9ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5vcHRpb25zLnNjYWxlLGU9by5jYWxjdWxhdGVEaXN0YW5jZSh0aGlzLnBvc0EsdGhpcy5wb3NCKSxuPW8uY2FsY3VsYXRlQ2VudGVyKHRoaXMucG9zQSx0aGlzLnBvc0IpLHM9KGUtdGhpcy5fc3RhcnREaXN0KS90aGlzLl9zdGFydERpc3Qscj1NYXRoLm1heCgxK2kqcywwKSxhPShyLXRoaXMuX3NjYWxlRmFjdG9yKS90O3RoaXMuX2V2ZW50T3V0cHV0LmVtaXQoXCJ1cGRhdGVcIix7ZGVsdGE6cyxzY2FsZTpyLHZlbG9jaXR5OmEsZGlzdGFuY2U6ZSxjZW50ZXI6bix0b3VjaGVzOlt0aGlzLnRvdWNoQUlkLHRoaXMudG91Y2hCSWRdfSksdGhpcy5fc2NhbGVGYWN0b3I9cn0sZS5wcm90b3R5cGUuZ2V0T3B0aW9ucz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnN9LGUucHJvdG90eXBlLnNldE9wdGlvbnM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX29wdGlvbnNNYW5hZ2VyLnNldE9wdGlvbnModCl9LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL09wdGlvbnNNYW5hZ2VyXCI6MTAsXCIuL1R3b0ZpbmdlclN5bmNcIjozNX1dLDMyOltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dGhpcy5vcHRpb25zPU9iamVjdC5jcmVhdGUoZS5ERUZBVUxUX09QVElPTlMpLHRoaXMuX29wdGlvbnNNYW5hZ2VyPW5ldyBhKHRoaXMub3B0aW9ucyksdCYmdGhpcy5zZXRPcHRpb25zKHQpLHRoaXMuX3BheWxvYWQ9e2RlbHRhOm51bGwscG9zaXRpb246bnVsbCx2ZWxvY2l0eTpudWxsLHNsaXA6ITB9LHRoaXMuX2V2ZW50SW5wdXQ9bmV3IHMsdGhpcy5fZXZlbnRPdXRwdXQ9bmV3IHMscy5zZXRJbnB1dEhhbmRsZXIodGhpcyx0aGlzLl9ldmVudElucHV0KSxzLnNldE91dHB1dEhhbmRsZXIodGhpcyx0aGlzLl9ldmVudE91dHB1dCksdGhpcy5fcG9zaXRpb249dm9pZCAwPT09dGhpcy5vcHRpb25zLmRpcmVjdGlvbj9bMCwwXTowLHRoaXMuX3ByZXZUaW1lPXZvaWQgMCx0aGlzLl9wcmV2VmVsPXZvaWQgMCx0aGlzLl9ldmVudElucHV0Lm9uKFwibW91c2V3aGVlbFwiLG8uYmluZCh0aGlzKSksdGhpcy5fZXZlbnRJbnB1dC5vbihcIndoZWVsXCIsby5iaW5kKHRoaXMpKSx0aGlzLl9pblByb2dyZXNzPSExLHRoaXMuX2xvb3BCb3VuZD0hMX1mdW5jdGlvbiBuKCl7aWYodGhpcy5faW5Qcm9ncmVzcyYmYygpLXRoaXMuX3ByZXZUaW1lPnRoaXMub3B0aW9ucy5zdGFsbFRpbWUpe3RoaXMuX2luUHJvZ3Jlc3M9ITE7dmFyIHQ9TWF0aC5hYnModGhpcy5fcHJldlZlbCk+PXRoaXMub3B0aW9ucy5taW5pbXVtRW5kU3BlZWQ/dGhpcy5fcHJldlZlbDowLGk9dGhpcy5fcGF5bG9hZDtpLnBvc2l0aW9uPXRoaXMuX3Bvc2l0aW9uLGkudmVsb2NpdHk9dCxpLnNsaXA9ITAsdGhpcy5fZXZlbnRPdXRwdXQuZW1pdChcImVuZFwiLGkpfX1mdW5jdGlvbiBvKHQpe3RoaXMub3B0aW9ucy5wcmV2ZW50RGVmYXVsdCYmdC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuX2luUHJvZ3Jlc3N8fCh0aGlzLl9pblByb2dyZXNzPSEwLHRoaXMuX3Bvc2l0aW9uPXZvaWQgMD09PXRoaXMub3B0aW9ucy5kaXJlY3Rpb24/WzAsMF06MCx5PXRoaXMuX3BheWxvYWQseS5zbGlwPSEwLHkucG9zaXRpb249dGhpcy5fcG9zaXRpb24seS5jbGllbnRYPXQuY2xpZW50WCx5LmNsaWVudFk9dC5jbGllbnRZLHkub2Zmc2V0WD10Lm9mZnNldFgseS5vZmZzZXRZPXQub2Zmc2V0WSx0aGlzLl9ldmVudE91dHB1dC5lbWl0KFwic3RhcnRcIix5KSx0aGlzLl9sb29wQm91bmR8fChyLm9uKFwicHJlcmVuZGVyXCIsbi5iaW5kKHRoaXMpKSx0aGlzLl9sb29wQm91bmQ9ITApKTt2YXIgaT1jKCksbz10aGlzLl9wcmV2VGltZXx8aSxzPXZvaWQgMCE9PXQud2hlZWxEZWx0YVg/dC53aGVlbERlbHRhWDotdC5kZWx0YVgsYT12b2lkIDAhPT10LndoZWVsRGVsdGFZP3Qud2hlZWxEZWx0YVk6LXQuZGVsdGFZOzE9PT10LmRlbHRhTW9kZSYmKHMqPXRoaXMub3B0aW9ucy5saW5lSGVpZ2h0LGEqPXRoaXMub3B0aW9ucy5saW5lSGVpZ2h0KSx0aGlzLm9wdGlvbnMucmFpbHMmJihNYXRoLmFicyhzKT5NYXRoLmFicyhhKT9hPTA6cz0wKTt2YXIgcCx1LGw9TWF0aC5tYXgoaS1vLGgpLGY9cy9sLGQ9YS9sLF89dGhpcy5vcHRpb25zLnNjYWxlO3RoaXMub3B0aW9ucy5kaXJlY3Rpb249PT1lLkRJUkVDVElPTl9YPyh1PV8qcyxwPV8qZix0aGlzLl9wb3NpdGlvbis9dSk6dGhpcy5vcHRpb25zLmRpcmVjdGlvbj09PWUuRElSRUNUSU9OX1k/KHU9XyphLHA9XypkLHRoaXMuX3Bvc2l0aW9uKz11KToodT1bXypzLF8qYV0scD1bXypmLF8qZF0sdGhpcy5fcG9zaXRpb25bMF0rPXVbMF0sdGhpcy5fcG9zaXRpb25bMV0rPXVbMV0pO3ZhciB5PXRoaXMuX3BheWxvYWQ7eS5kZWx0YT11LHkudmVsb2NpdHk9cCx5LnBvc2l0aW9uPXRoaXMuX3Bvc2l0aW9uLHkuc2xpcD0hMCx0aGlzLl9ldmVudE91dHB1dC5lbWl0KFwidXBkYXRlXCIseSksdGhpcy5fcHJldlRpbWU9aSx0aGlzLl9wcmV2VmVsPXB9dmFyIHM9dChcIi4uL2NvcmUvRXZlbnRIYW5kbGVyXCIpLHI9dChcIi4uL2NvcmUvRW5naW5lXCIpLGE9dChcIi4uL2NvcmUvT3B0aW9uc01hbmFnZXJcIik7ZS5ERUZBVUxUX09QVElPTlM9e2RpcmVjdGlvbjp2b2lkIDAsbWluaW11bUVuZFNwZWVkOjEvMCxyYWlsczohMSxzY2FsZToxLHN0YWxsVGltZTo1MCxsaW5lSGVpZ2h0OjQwLHByZXZlbnREZWZhdWx0OiEwfSxlLkRJUkVDVElPTl9YPTAsZS5ESVJFQ1RJT05fWT0xO3ZhciBoPTgsYz1EYXRlLm5vdztlLnByb3RvdHlwZS5nZXRPcHRpb25zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9uc30sZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fb3B0aW9uc01hbmFnZXIuc2V0T3B0aW9ucyh0KX0saS5leHBvcnRzPWV9LHtcIi4uL2NvcmUvRW5naW5lXCI6NCxcIi4uL2NvcmUvRXZlbnRIYW5kbGVyXCI6NyxcIi4uL2NvcmUvT3B0aW9uc01hbmFnZXJcIjoxMH1dLDMzOltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dGhpcy5vcHRpb25zPU9iamVjdC5jcmVhdGUoZS5ERUZBVUxUX09QVElPTlMpLHRoaXMuX29wdGlvbnNNYW5hZ2VyPW5ldyBoKHRoaXMub3B0aW9ucyksdCYmdGhpcy5zZXRPcHRpb25zKHQpLHRoaXMuX2V2ZW50T3V0cHV0PW5ldyBhLHRoaXMuX3RvdWNoVHJhY2tlcj1uZXcgcih7dG91Y2hMaW1pdDp0aGlzLm9wdGlvbnMudG91Y2hMaW1pdH0pLGEuc2V0T3V0cHV0SGFuZGxlcih0aGlzLHRoaXMuX2V2ZW50T3V0cHV0KSxhLnNldElucHV0SGFuZGxlcih0aGlzLHRoaXMuX3RvdWNoVHJhY2tlciksdGhpcy5fdG91Y2hUcmFja2VyLm9uKFwidHJhY2tzdGFydFwiLG4uYmluZCh0aGlzKSksdGhpcy5fdG91Y2hUcmFja2VyLm9uKFwidHJhY2ttb3ZlXCIsby5iaW5kKHRoaXMpKSx0aGlzLl90b3VjaFRyYWNrZXIub24oXCJ0cmFja2VuZFwiLHMuYmluZCh0aGlzKSksdGhpcy5fcGF5bG9hZD17ZGVsdGE6bnVsbCxwb3NpdGlvbjpudWxsLHZlbG9jaXR5Om51bGwsY2xpZW50WDp2b2lkIDAsY2xpZW50WTp2b2lkIDAsY291bnQ6MCx0b3VjaDp2b2lkIDB9LHRoaXMuX3Bvc2l0aW9uPW51bGx9ZnVuY3Rpb24gbih0KXt2YXIgaSxlO3ZvaWQgMCE9PXRoaXMub3B0aW9ucy5kaXJlY3Rpb24/KHRoaXMuX3Bvc2l0aW9uPTAsaT0wLGU9MCk6KHRoaXMuX3Bvc2l0aW9uPVswLDBdLGk9WzAsMF0sZT1bMCwwXSk7dmFyIG49dGhpcy5fcGF5bG9hZDtuLmRlbHRhPWUsbi5wb3NpdGlvbj10aGlzLl9wb3NpdGlvbixuLnZlbG9jaXR5PWksbi5jbGllbnRYPXQueCxuLmNsaWVudFk9dC55LG4uY291bnQ9dC5jb3VudCxuLnRvdWNoPXQuaWRlbnRpZmllcix0aGlzLl9ldmVudE91dHB1dC5lbWl0KFwic3RhcnRcIixuKX1mdW5jdGlvbiBvKHQpe3ZhciBpPXQuaGlzdG9yeSxuPWlbaS5sZW5ndGgtMV0sbz1pW2kubGVuZ3RoLTJdLHM9aVtpLmxlbmd0aC10aGlzLm9wdGlvbnMudmVsb2NpdHlTYW1wbGVMZW5ndGhdP2lbaS5sZW5ndGgtdGhpcy5vcHRpb25zLnZlbG9jaXR5U2FtcGxlTGVuZ3RoXTppW2kubGVuZ3RoLTJdLHI9cy50aW1lc3RhbXAsYT1uLnRpbWVzdGFtcCxoPW4ueC1vLngscD1uLnktby55LHU9bi54LXMueCxsPW4ueS1zLnk7dGhpcy5vcHRpb25zLnJhaWxzJiYoTWF0aC5hYnMoaCk+TWF0aC5hYnMocCk/cD0wOmg9MCxNYXRoLmFicyh1KT5NYXRoLmFicyhsKT9sPTA6dT0wKTt2YXIgZixkLF89TWF0aC5tYXgoYS1yLGMpLHk9dS9fLGc9bC9fLHY9dGhpcy5vcHRpb25zLnNjYWxlO3RoaXMub3B0aW9ucy5kaXJlY3Rpb249PT1lLkRJUkVDVElPTl9YPyhkPXYqaCxmPXYqeSx0aGlzLl9wb3NpdGlvbis9ZCk6dGhpcy5vcHRpb25zLmRpcmVjdGlvbj09PWUuRElSRUNUSU9OX1k/KGQ9dipwLGY9dipnLHRoaXMuX3Bvc2l0aW9uKz1kKTooZD1bdipoLHYqcF0sZj1bdip5LHYqZ10sdGhpcy5fcG9zaXRpb25bMF0rPWRbMF0sdGhpcy5fcG9zaXRpb25bMV0rPWRbMV0pO3ZhciBtPXRoaXMuX3BheWxvYWQ7bS5kZWx0YT1kLG0udmVsb2NpdHk9ZixtLnBvc2l0aW9uPXRoaXMuX3Bvc2l0aW9uLG0uY2xpZW50WD10LngsbS5jbGllbnRZPXQueSxtLmNvdW50PXQuY291bnQsbS50b3VjaD10LmlkZW50aWZpZXIsdGhpcy5fZXZlbnRPdXRwdXQuZW1pdChcInVwZGF0ZVwiLG0pfWZ1bmN0aW9uIHModCl7dGhpcy5fcGF5bG9hZC5jb3VudD10LmNvdW50LHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoXCJlbmRcIix0aGlzLl9wYXlsb2FkKX12YXIgcj10KFwiLi9Ub3VjaFRyYWNrZXJcIiksYT10KFwiLi4vY29yZS9FdmVudEhhbmRsZXJcIiksaD10KFwiLi4vY29yZS9PcHRpb25zTWFuYWdlclwiKTtlLkRFRkFVTFRfT1BUSU9OUz17ZGlyZWN0aW9uOnZvaWQgMCxyYWlsczohMSx0b3VjaExpbWl0OjEsdmVsb2NpdHlTYW1wbGVMZW5ndGg6MTAsc2NhbGU6MX0sZS5ESVJFQ1RJT05fWD0wLGUuRElSRUNUSU9OX1k9MTt2YXIgYz04O2UucHJvdG90eXBlLnNldE9wdGlvbnM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX29wdGlvbnNNYW5hZ2VyLnNldE9wdGlvbnModCl9LGUucHJvdG90eXBlLmdldE9wdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zfSxpLmV4cG9ydHM9ZX0se1wiLi4vY29yZS9FdmVudEhhbmRsZXJcIjo3LFwiLi4vY29yZS9PcHRpb25zTWFuYWdlclwiOjEwLFwiLi9Ub3VjaFRyYWNrZXJcIjozNH1dLDM0OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCxpLGUpe3JldHVybnt4OnQuY2xpZW50WCx5OnQuY2xpZW50WSxpZGVudGlmaWVyOnQuaWRlbnRpZmllcixvcmlnaW46aS5vcmlnaW4sdGltZXN0YW1wOmMoKSxjb3VudDppLnRvdWNoZXMubGVuZ3RoLGhpc3Rvcnk6ZX19ZnVuY3Rpb24gbih0KXtpZighKHQudG91Y2hlcy5sZW5ndGg+dGhpcy50b3VjaExpbWl0KSl7dGhpcy5pc1RvdWNoZWQ9ITA7Zm9yKHZhciBpPTA7aTx0LmNoYW5nZWRUb3VjaGVzLmxlbmd0aDtpKyspe3ZhciBuPXQuY2hhbmdlZFRvdWNoZXNbaV0sbz1lKG4sdCxudWxsKTt0aGlzLmV2ZW50T3V0cHV0LmVtaXQoXCJ0cmFja3N0YXJ0XCIsbyksdGhpcy5zZWxlY3RpdmV8fHRoaXMudG91Y2hIaXN0b3J5W24uaWRlbnRpZmllcl18fHRoaXMudHJhY2sobyl9fX1mdW5jdGlvbiBvKHQpe2lmKCEodC50b3VjaGVzLmxlbmd0aD50aGlzLnRvdWNoTGltaXQpKWZvcih2YXIgaT0wO2k8dC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7aSsrKXt2YXIgbj10LmNoYW5nZWRUb3VjaGVzW2ldLG89dGhpcy50b3VjaEhpc3Rvcnlbbi5pZGVudGlmaWVyXTtpZihvKXt2YXIgcz1lKG4sdCxvKTt0aGlzLnRvdWNoSGlzdG9yeVtuLmlkZW50aWZpZXJdLnB1c2gocyksdGhpcy5ldmVudE91dHB1dC5lbWl0KFwidHJhY2ttb3ZlXCIscyl9fX1mdW5jdGlvbiBzKHQpe2lmKHRoaXMuaXNUb3VjaGVkKXtmb3IodmFyIGk9MDtpPHQuY2hhbmdlZFRvdWNoZXMubGVuZ3RoO2krKyl7dmFyIG49dC5jaGFuZ2VkVG91Y2hlc1tpXSxvPXRoaXMudG91Y2hIaXN0b3J5W24uaWRlbnRpZmllcl07aWYobyl7dmFyIHM9ZShuLHQsbyk7dGhpcy5ldmVudE91dHB1dC5lbWl0KFwidHJhY2tlbmRcIixzKSxkZWxldGUgdGhpcy50b3VjaEhpc3Rvcnlbbi5pZGVudGlmaWVyXX19dGhpcy5pc1RvdWNoZWQ9ITF9fWZ1bmN0aW9uIHIoKXtmb3IodmFyIHQgaW4gdGhpcy50b3VjaEhpc3Rvcnkpe3ZhciBpPXRoaXMudG91Y2hIaXN0b3J5W3RdO3RoaXMuZXZlbnRPdXRwdXQuZW1pdChcInRyYWNrZW5kXCIse3RvdWNoOmlbaS5sZW5ndGgtMV0udG91Y2gsdGltZXN0YW1wOkRhdGUubm93KCksY291bnQ6MCxoaXN0b3J5Oml9KSxkZWxldGUgdGhpcy50b3VjaEhpc3RvcnlbdF19fWZ1bmN0aW9uIGEodCl7dGhpcy5zZWxlY3RpdmU9dC5zZWxlY3RpdmUsdGhpcy50b3VjaExpbWl0PXQudG91Y2hMaW1pdHx8MSx0aGlzLnRvdWNoSGlzdG9yeT17fSx0aGlzLmV2ZW50SW5wdXQ9bmV3IGgsdGhpcy5ldmVudE91dHB1dD1uZXcgaCxoLnNldElucHV0SGFuZGxlcih0aGlzLHRoaXMuZXZlbnRJbnB1dCksaC5zZXRPdXRwdXRIYW5kbGVyKHRoaXMsdGhpcy5ldmVudE91dHB1dCksdGhpcy5ldmVudElucHV0Lm9uKFwidG91Y2hzdGFydFwiLG4uYmluZCh0aGlzKSksdGhpcy5ldmVudElucHV0Lm9uKFwidG91Y2htb3ZlXCIsby5iaW5kKHRoaXMpKSx0aGlzLmV2ZW50SW5wdXQub24oXCJ0b3VjaGVuZFwiLHMuYmluZCh0aGlzKSksdGhpcy5ldmVudElucHV0Lm9uKFwidG91Y2hjYW5jZWxcIixzLmJpbmQodGhpcykpLHRoaXMuZXZlbnRJbnB1dC5vbihcInVucGlwZVwiLHIuYmluZCh0aGlzKSksdGhpcy5pc1RvdWNoZWQ9ITF9dmFyIGg9dChcIi4uL2NvcmUvRXZlbnRIYW5kbGVyXCIpLGM9RGF0ZS5ub3c7YS5wcm90b3R5cGUudHJhY2s9ZnVuY3Rpb24odCl7dGhpcy50b3VjaEhpc3RvcnlbdC5pZGVudGlmaWVyXT1bdF19LGkuZXhwb3J0cz1hfSx7XCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiOjd9XSwzNTpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKCl7dGhpcy5fZXZlbnRJbnB1dD1uZXcgbix0aGlzLl9ldmVudE91dHB1dD1uZXcgbixuLnNldElucHV0SGFuZGxlcih0aGlzLHRoaXMuX2V2ZW50SW5wdXQpLG4uc2V0T3V0cHV0SGFuZGxlcih0aGlzLHRoaXMuX2V2ZW50T3V0cHV0KSx0aGlzLnRvdWNoQUVuYWJsZWQ9ITEsdGhpcy50b3VjaEFJZD0wLHRoaXMucG9zQT1udWxsLHRoaXMudGltZXN0YW1wQT0wLHRoaXMudG91Y2hCRW5hYmxlZD0hMSx0aGlzLnRvdWNoQklkPTAsdGhpcy5wb3NCPW51bGwsdGhpcy50aW1lc3RhbXBCPTAsdGhpcy5fZXZlbnRJbnB1dC5vbihcInRvdWNoc3RhcnRcIix0aGlzLmhhbmRsZVN0YXJ0LmJpbmQodGhpcykpLHRoaXMuX2V2ZW50SW5wdXQub24oXCJ0b3VjaG1vdmVcIix0aGlzLmhhbmRsZU1vdmUuYmluZCh0aGlzKSksdGhpcy5fZXZlbnRJbnB1dC5vbihcInRvdWNoZW5kXCIsdGhpcy5oYW5kbGVFbmQuYmluZCh0aGlzKSksdGhpcy5fZXZlbnRJbnB1dC5vbihcInRvdWNoY2FuY2VsXCIsdGhpcy5oYW5kbGVFbmQuYmluZCh0aGlzKSl9dmFyIG49dChcIi4uL2NvcmUvRXZlbnRIYW5kbGVyXCIpO2UuY2FsY3VsYXRlQW5nbGU9ZnVuY3Rpb24odCxpKXt2YXIgZT1pWzBdLXRbMF0sbj1pWzFdLXRbMV07cmV0dXJuIE1hdGguYXRhbjIobixlKX0sZS5jYWxjdWxhdGVEaXN0YW5jZT1mdW5jdGlvbih0LGkpe3ZhciBlPWlbMF0tdFswXSxuPWlbMV0tdFsxXTtyZXR1cm4gTWF0aC5zcXJ0KGUqZStuKm4pfSxlLmNhbGN1bGF0ZUNlbnRlcj1mdW5jdGlvbih0LGkpe3JldHVyblsodFswXStpWzBdKS8yLCh0WzFdK2lbMV0pLzJdfTt2YXIgbz1EYXRlLm5vdztlLnByb3RvdHlwZS5oYW5kbGVTdGFydD1mdW5jdGlvbih0KXtmb3IodmFyIGk9MDtpPHQuY2hhbmdlZFRvdWNoZXMubGVuZ3RoO2krKyl7dmFyIGU9dC5jaGFuZ2VkVG91Y2hlc1tpXTt0aGlzLnRvdWNoQUVuYWJsZWQ/dGhpcy50b3VjaEJFbmFibGVkfHwodGhpcy50b3VjaEJJZD1lLmlkZW50aWZpZXIsdGhpcy50b3VjaEJFbmFibGVkPSEwLHRoaXMucG9zQj1bZS5wYWdlWCxlLnBhZ2VZXSx0aGlzLnRpbWVzdGFtcEI9bygpLHRoaXMuX3N0YXJ0VXBkYXRlKHQpKToodGhpcy50b3VjaEFJZD1lLmlkZW50aWZpZXIsdGhpcy50b3VjaEFFbmFibGVkPSEwLHRoaXMucG9zQT1bZS5wYWdlWCxlLnBhZ2VZXSx0aGlzLnRpbWVzdGFtcEE9bygpKX19LGUucHJvdG90eXBlLmhhbmRsZU1vdmU9ZnVuY3Rpb24odCl7aWYodGhpcy50b3VjaEFFbmFibGVkJiZ0aGlzLnRvdWNoQkVuYWJsZWQpe2Zvcih2YXIgaSxlPXRoaXMudGltZXN0YW1wQSxuPXRoaXMudGltZXN0YW1wQixzPTA7czx0LmNoYW5nZWRUb3VjaGVzLmxlbmd0aDtzKyspe3ZhciByPXQuY2hhbmdlZFRvdWNoZXNbc107ci5pZGVudGlmaWVyPT09dGhpcy50b3VjaEFJZD8odGhpcy5wb3NBPVtyLnBhZ2VYLHIucGFnZVldLHRoaXMudGltZXN0YW1wQT1vKCksaT10aGlzLnRpbWVzdGFtcEEtZSk6ci5pZGVudGlmaWVyPT09dGhpcy50b3VjaEJJZCYmKHRoaXMucG9zQj1bci5wYWdlWCxyLnBhZ2VZXSx0aGlzLnRpbWVzdGFtcEI9bygpLGk9dGhpcy50aW1lc3RhbXBCLW4pfWkmJnRoaXMuX21vdmVVcGRhdGUoaSl9fSxlLnByb3RvdHlwZS5oYW5kbGVFbmQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBpPTA7aTx0LmNoYW5nZWRUb3VjaGVzLmxlbmd0aDtpKyspe3ZhciBlPXQuY2hhbmdlZFRvdWNoZXNbaV07KGUuaWRlbnRpZmllcj09PXRoaXMudG91Y2hBSWR8fGUuaWRlbnRpZmllcj09PXRoaXMudG91Y2hCSWQpJiYodGhpcy50b3VjaEFFbmFibGVkJiZ0aGlzLnRvdWNoQkVuYWJsZWQmJnRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoXCJlbmRcIix7dG91Y2hlczpbdGhpcy50b3VjaEFJZCx0aGlzLnRvdWNoQklkXSxhbmdsZTp0aGlzLl9hbmdsZX0pLHRoaXMudG91Y2hBRW5hYmxlZD0hMSx0aGlzLnRvdWNoQUlkPTAsdGhpcy50b3VjaEJFbmFibGVkPSExLHRoaXMudG91Y2hCSWQ9MCl9fSxpLmV4cG9ydHM9ZX0se1wiLi4vY29yZS9FdmVudEhhbmRsZXJcIjo3fV0sMzY6W2Z1bmN0aW9uKHQsaSl7aS5leHBvcnRzPXtBY2N1bXVsYXRvcjp0KFwiLi9BY2N1bXVsYXRvclwiKSxEZXNrdG9wRW11bGF0aW9uTW9kZTp0KFwiLi9EZXNrdG9wRW11bGF0aW9uTW9kZVwiKSxGYXN0Q2xpY2s6dChcIi4vRmFzdENsaWNrXCIpLEdlbmVyaWNTeW5jOnQoXCIuL0dlbmVyaWNTeW5jXCIpLE1vdXNlU3luYzp0KFwiLi9Nb3VzZVN5bmNcIiksUGluY2hTeW5jOnQoXCIuL1BpbmNoU3luY1wiKSxSb3RhdGVTeW5jOnQoXCIuL1JvdGF0ZVN5bmNcIiksU2NhbGVTeW5jOnQoXCIuL1NjYWxlU3luY1wiKSxTY3JvbGxTeW5jOnQoXCIuL1Njcm9sbFN5bmNcIiksVG91Y2hTeW5jOnQoXCIuL1RvdWNoU3luY1wiKSxUb3VjaFRyYWNrZXI6dChcIi4vVG91Y2hUcmFja2VyXCIpLFR3b0ZpbmdlclN5bmM6dChcIi4vVHdvRmluZ2VyU3luY1wiKX19LHtcIi4vQWNjdW11bGF0b3JcIjoyNCxcIi4vRGVza3RvcEVtdWxhdGlvbk1vZGVcIjoyNSxcIi4vRmFzdENsaWNrXCI6MjYsXCIuL0dlbmVyaWNTeW5jXCI6MjcsXCIuL01vdXNlU3luY1wiOjI4LFwiLi9QaW5jaFN5bmNcIjoyOSxcIi4vUm90YXRlU3luY1wiOjMwLFwiLi9TY2FsZVN5bmNcIjozMSxcIi4vU2Nyb2xsU3luY1wiOjMyLFwiLi9Ub3VjaFN5bmNcIjozMyxcIi4vVG91Y2hUcmFja2VyXCI6MzQsXCIuL1R3b0ZpbmdlclN5bmNcIjozNX1dLDM3OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7cmV0dXJuIHRoaXMudmFsdWVzPXR8fFtbMSwwLDBdLFswLDEsMF0sWzAsMCwxXV0sdGhpc312YXIgbj10KFwiLi9WZWN0b3JcIiksbz1uZXcgZSxzPW5ldyBuO1xuZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVzfSxlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCl7dGhpcy52YWx1ZXM9dH0sZS5wcm90b3R5cGUudmVjdG9yTXVsdGlwbHk9ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5nZXQoKSxlPXQueCxuPXQueSxvPXQueixyPWlbMF0sYT1pWzFdLGg9aVsyXSxjPXJbMF0scD1yWzFdLHU9clsyXSxsPWFbMF0sZj1hWzFdLGQ9YVsyXSxfPWhbMF0seT1oWzFdLGc9aFsyXTtyZXR1cm4gcy5zZXRYWVooYyplK3Aqbit1Km8sbCplK2YqbitkKm8sXyplK3kqbitnKm8pfSxlLnByb3RvdHlwZS5tdWx0aXBseT1mdW5jdGlvbih0KXtmb3IodmFyIGk9dGhpcy5nZXQoKSxlPVtbXV0sbj0wOzM+bjtuKyspe2Vbbl09W107Zm9yKHZhciBzPTA7Mz5zO3MrKyl7Zm9yKHZhciByPTAsYT0wOzM+YTthKyspcis9aVtuXVthXSp0W2FdW3NdO2Vbbl1bc109cn19cmV0dXJuIG8uc2V0KGUpfSxlLnByb3RvdHlwZS50cmFuc3Bvc2U9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10saT10aGlzLmdldCgpLGU9MDszPmU7ZSsrKWZvcih2YXIgbj0wOzM+bjtuKyspdFtlXVtuXT1pW25dW2VdO3JldHVybiBvLnNldCh0KX0sZS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5nZXQoKSxpPVtdLG49MDszPm47bisrKWlbbl09dFtuXS5zbGljZSgpO3JldHVybiBuZXcgZShpKX0saS5leHBvcnRzPWV9LHtcIi4vVmVjdG9yXCI6NDF9XSwzODpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQsaSxlLG4pe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLnNldCh0KToodGhpcy53PXZvaWQgMCE9PXQ/dDoxLHRoaXMueD12b2lkIDAhPT1pP2k6MCx0aGlzLnk9dm9pZCAwIT09ZT9lOjAsdGhpcy56PXZvaWQgMCE9PW4/bjowKSx0aGlzfXZhciBuPXQoXCIuL01hdHJpeFwiKSxvPW5ldyBlKDEsMCwwLDApO2UucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXtyZXR1cm4gby5zZXRXWFlaKHRoaXMudyt0LncsdGhpcy54K3QueCx0aGlzLnkrdC55LHRoaXMueit0LnopfSxlLnByb3RvdHlwZS5zdWI9ZnVuY3Rpb24odCl7cmV0dXJuIG8uc2V0V1hZWih0aGlzLnctdC53LHRoaXMueC10LngsdGhpcy55LXQueSx0aGlzLnotdC56KX0sZS5wcm90b3R5cGUuc2NhbGFyRGl2aWRlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNjYWxhck11bHRpcGx5KDEvdCl9LGUucHJvdG90eXBlLnNjYWxhck11bHRpcGx5PWZ1bmN0aW9uKHQpe3JldHVybiBvLnNldFdYWVoodGhpcy53KnQsdGhpcy54KnQsdGhpcy55KnQsdGhpcy56KnQpfSxlLnByb3RvdHlwZS5tdWx0aXBseT1mdW5jdGlvbih0KXt2YXIgaT10aGlzLngsZT10aGlzLnksbj10aGlzLnoscz10aGlzLncscj10LngsYT10LnksaD10LnosYz10Lnd8fDA7cmV0dXJuIG8uc2V0V1hZWihzKmMtaSpyLWUqYS1uKmgsaSpjK3IqcythKm4tZSpoLGUqYythKnMraSpoLXIqbixuKmMraCpzK3IqZS1pKmEpfTt2YXIgcz1uZXcgZSgxLDAsMCwwKTtlLnByb3RvdHlwZS5yb3RhdGVWZWN0b3I9ZnVuY3Rpb24odCl7cmV0dXJuIHMuc2V0KHRoaXMuY29uaigpKSxvLnNldCh0aGlzLm11bHRpcGx5KHQpLm11bHRpcGx5KHMpKX0sZS5wcm90b3R5cGUuaW52ZXJzZT1mdW5jdGlvbigpe3JldHVybiBvLnNldCh0aGlzLmNvbmooKS5zY2FsYXJEaXZpZGUodGhpcy5ub3JtU3F1YXJlZCgpKSl9LGUucHJvdG90eXBlLm5lZ2F0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNjYWxhck11bHRpcGx5KC0xKX0sZS5wcm90b3R5cGUuY29uaj1mdW5jdGlvbigpe3JldHVybiBvLnNldFdYWVoodGhpcy53LC10aGlzLngsLXRoaXMueSwtdGhpcy56KX0sZS5wcm90b3R5cGUubm9ybWFsaXplPWZ1bmN0aW9uKHQpe3JldHVybiB0PXZvaWQgMD09PXQ/MTp0LHRoaXMuc2NhbGFyRGl2aWRlKHQqdGhpcy5ub3JtKCkpfSxlLnByb3RvdHlwZS5tYWtlRnJvbUFuZ2xlQW5kQXhpcz1mdW5jdGlvbih0LGkpe3ZhciBlPWkubm9ybWFsaXplKCksbj0uNSp0LG89LU1hdGguc2luKG4pO3JldHVybiB0aGlzLng9byplLngsdGhpcy55PW8qZS55LHRoaXMuej1vKmUueix0aGlzLnc9TWF0aC5jb3MobiksdGhpc30sZS5wcm90b3R5cGUuc2V0V1hZWj1mdW5jdGlvbih0LGksZSxuKXtyZXR1cm4gby5jbGVhcigpLHRoaXMudz10LHRoaXMueD1pLHRoaXMueT1lLHRoaXMuej1uLHRoaXN9LGUucHJvdG90eXBlLnNldD1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIEFycmF5Pyh0aGlzLnc9MCx0aGlzLng9dFswXSx0aGlzLnk9dFsxXSx0aGlzLno9dFsyXSk6KHRoaXMudz10LncsdGhpcy54PXQueCx0aGlzLnk9dC55LHRoaXMuej10LnopLHRoaXMhPT1vJiZvLmNsZWFyKCksdGhpc30sZS5wcm90b3R5cGUucHV0PWZ1bmN0aW9uKHQpe3Quc2V0KG8pfSxlLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgZSh0aGlzKX0sZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53PTEsdGhpcy54PTAsdGhpcy55PTAsdGhpcy56PTAsdGhpc30sZS5wcm90b3R5cGUuaXNFcXVhbD1mdW5jdGlvbih0KXtyZXR1cm4gdC53PT09dGhpcy53JiZ0Lng9PT10aGlzLngmJnQueT09PXRoaXMueSYmdC56PT09dGhpcy56fSxlLnByb3RvdHlwZS5kb3Q9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudyp0LncrdGhpcy54KnQueCt0aGlzLnkqdC55K3RoaXMueip0Lnp9LGUucHJvdG90eXBlLm5vcm1TcXVhcmVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG90KHRoaXMpfSxlLnByb3RvdHlwZS5ub3JtPWZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguc3FydCh0aGlzLm5vcm1TcXVhcmVkKCkpfSxlLnByb3RvdHlwZS5pc1plcm89ZnVuY3Rpb24oKXtyZXR1cm4hKHRoaXMueHx8dGhpcy55fHx0aGlzLnopfSxlLnByb3RvdHlwZS5nZXRUcmFuc2Zvcm09ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm5vcm1hbGl6ZSgxKSxpPXQueCxlPXQueSxuPXQueixvPXQudztyZXR1cm5bMS0yKmUqZS0yKm4qbiwyKmkqZS0yKm4qbywyKmkqbisyKmUqbywwLDIqaSplKzIqbipvLDEtMippKmktMipuKm4sMiplKm4tMippKm8sMCwyKmkqbi0yKmUqbywyKmUqbisyKmkqbywxLTIqaSppLTIqZSplLDAsMCwwLDAsMV19O3ZhciByPW5ldyBuO2UucHJvdG90eXBlLmdldE1hdHJpeD1mdW5jdGlvbigpe3ZhciB0PXRoaXMubm9ybWFsaXplKDEpLGk9dC54LGU9dC55LG49dC56LG89dC53O3JldHVybiByLnNldChbWzEtMiplKmUtMipuKm4sMippKmUrMipuKm8sMippKm4tMiplKm9dLFsyKmkqZS0yKm4qbywxLTIqaSppLTIqbipuLDIqZSpuKzIqaSpvXSxbMippKm4rMiplKm8sMiplKm4tMippKm8sMS0yKmkqaS0yKmUqZV1dKX07dmFyIGE9MWUtNTtlLnByb3RvdHlwZS5zbGVycD1mdW5jdGlvbih0LGkpe3ZhciBlLG4scyxyLGg7cmV0dXJuIG49dGhpcy5kb3QodCksMS1uPmE/KGU9TWF0aC5hY29zKG4pLHM9TWF0aC5zaW4oZSkscj1NYXRoLnNpbigoMS1pKSplKS9zLGg9TWF0aC5zaW4oaSplKS9zKToocj0xLWksaD1pKSxvLnNldCh0aGlzLnNjYWxhck11bHRpcGx5KHIvaCkuYWRkKHQpLm11bHRpcGx5KGgpKX0saS5leHBvcnRzPWV9LHtcIi4vTWF0cml4XCI6Mzd9XSwzOTpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQsaSl7cmV0dXJuIHQrbygpKihpLXQpfWZ1bmN0aW9uIG4odCxpKXtyZXR1cm4gdCtvKCkqKGktdCsxKT4+MH12YXIgbz1NYXRoLnJhbmRvbSxzPXt9O3MuaW50ZWdlcj1mdW5jdGlvbih0LGksZSl7aWYodD12b2lkIDAhPT10P3Q6MCxpPXZvaWQgMCE9PWk/aToxLHZvaWQgMCE9PWUpe2Zvcih2YXIgbz1bXSxzPTA7ZT5zO3MrKylvLnB1c2gobih0LGkpKTtyZXR1cm4gb31yZXR1cm4gbih0LGkpfSxzLnJhbmdlPWZ1bmN0aW9uKHQsaSxuKXtpZih0PXZvaWQgMCE9PXQ/dDowLGk9dm9pZCAwIT09aT9pOjEsdm9pZCAwIT09bil7Zm9yKHZhciBvPVtdLHM9MDtuPnM7cysrKW8ucHVzaChlKHQsaSkpO3JldHVybiBvfXJldHVybiBlKHQsaSl9LHMuc2lnbj1mdW5jdGlvbih0KXtyZXR1cm4gdD12b2lkIDAhPT10P3Q6LjUsbygpPHQ/MTotMX0scy5ib29sPWZ1bmN0aW9uKHQpe3JldHVybiB0PXZvaWQgMCE9PXQ/dDouNSxvKCk8dH0saS5leHBvcnRzPXN9LHt9XSw0MDpbZnVuY3Rpb24odCxpKXt2YXIgZT17fTtlLmNsYW1wPWZ1bmN0aW9uKHQsaSl7cmV0dXJuIE1hdGgubWF4KE1hdGgubWluKHQsaVsxXSksaVswXSl9LGUubGVuZ3RoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgaT0wLGU9MDtlPHQubGVuZ3RoO2UrKylpKz10W2VdKnRbZV07cmV0dXJuIE1hdGguc3FydChpKX0saS5leHBvcnRzPWV9LHt9XSw0MTpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQsaSxlKXtyZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PXQ/dGhpcy5zZXQodCk6KHRoaXMueD10fHwwLHRoaXMueT1pfHwwLHRoaXMuej1lfHwwKSx0aGlzfWZ1bmN0aW9uIG4odCxpLGUpe3JldHVybiB0aGlzLng9dCx0aGlzLnk9aSx0aGlzLno9ZSx0aGlzfWZ1bmN0aW9uIG8odCl7cmV0dXJuIG4uY2FsbCh0aGlzLHRbMF0sdFsxXSx0WzJdfHwwKX1mdW5jdGlvbiBzKHQpe3JldHVybiBuLmNhbGwodGhpcyx0LngsdC55LHQueil9ZnVuY3Rpb24gcih0KXtyZXR1cm4gbi5jYWxsKHRoaXMsdCwwLDApfXZhciBhPW5ldyBlKDAsMCwwKTtlLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCl7cmV0dXJuIG4uY2FsbChhLHRoaXMueCt0LngsdGhpcy55K3QueSx0aGlzLnordC56KX0sZS5wcm90b3R5cGUuc3ViPWZ1bmN0aW9uKHQpe3JldHVybiBuLmNhbGwoYSx0aGlzLngtdC54LHRoaXMueS10LnksdGhpcy56LXQueil9LGUucHJvdG90eXBlLm11bHQ9ZnVuY3Rpb24odCl7cmV0dXJuIG4uY2FsbChhLHQqdGhpcy54LHQqdGhpcy55LHQqdGhpcy56KX0sZS5wcm90b3R5cGUuZGl2PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm11bHQoMS90KX0sZS5wcm90b3R5cGUuY3Jvc3M9ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy54LGU9dGhpcy55LG89dGhpcy56LHM9dC54LHI9dC55LGg9dC56O3JldHVybiBuLmNhbGwoYSxvKnItZSpoLGkqaC1vKnMsZSpzLWkqcil9LGUucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbih0KXtyZXR1cm4gdC54PT09dGhpcy54JiZ0Lnk9PT10aGlzLnkmJnQuej09PXRoaXMuen0sZS5wcm90b3R5cGUucm90YXRlWD1mdW5jdGlvbih0KXt2YXIgaT10aGlzLngsZT10aGlzLnksbz10aGlzLnoscz1NYXRoLmNvcyh0KSxyPU1hdGguc2luKHQpO3JldHVybiBuLmNhbGwoYSxpLGUqcy1vKnIsZSpyK28qcyl9LGUucHJvdG90eXBlLnJvdGF0ZVk9ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy54LGU9dGhpcy55LG89dGhpcy56LHM9TWF0aC5jb3ModCkscj1NYXRoLnNpbih0KTtyZXR1cm4gbi5jYWxsKGEsbypyK2kqcyxlLG8qcy1pKnIpfSxlLnByb3RvdHlwZS5yb3RhdGVaPWZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMueCxlPXRoaXMueSxvPXRoaXMueixzPU1hdGguY29zKHQpLHI9TWF0aC5zaW4odCk7cmV0dXJuIG4uY2FsbChhLGkqcy1lKnIsaSpyK2UqcyxvKX0sZS5wcm90b3R5cGUuZG90PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLngqdC54K3RoaXMueSp0LnkrdGhpcy56KnQuen0sZS5wcm90b3R5cGUubm9ybVNxdWFyZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb3QodGhpcyl9LGUucHJvdG90eXBlLm5vcm09ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMubm9ybVNxdWFyZWQoKSl9LGUucHJvdG90eXBlLm5vcm1hbGl6ZT1mdW5jdGlvbih0KXswPT09YXJndW1lbnRzLmxlbmd0aCYmKHQ9MSk7dmFyIGk9dGhpcy5ub3JtKCk7cmV0dXJuIGk+MWUtNz9zLmNhbGwoYSx0aGlzLm11bHQodC9pKSk6bi5jYWxsKGEsdCwwLDApfSxlLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgZSh0aGlzKX0sZS5wcm90b3R5cGUuaXNaZXJvPWZ1bmN0aW9uKCl7cmV0dXJuISh0aGlzLnh8fHRoaXMueXx8dGhpcy56KX0sZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgQXJyYXk/by5jYWxsKHRoaXMsdCk6XCJudW1iZXJcIj09dHlwZW9mIHQ/ci5jYWxsKHRoaXMsdCk6cy5jYWxsKHRoaXMsdCl9LGUucHJvdG90eXBlLnNldFhZWj1mdW5jdGlvbigpe3JldHVybiBuLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZS5wcm90b3R5cGUuc2V0MUQ9ZnVuY3Rpb24odCl7cmV0dXJuIHIuY2FsbCh0aGlzLHQpfSxlLnByb3RvdHlwZS5wdXQ9ZnVuY3Rpb24odCl7dGhpcz09PWE/cy5jYWxsKHQsYSk6cy5jYWxsKHQsdGhpcyl9LGUucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7cmV0dXJuIG4uY2FsbCh0aGlzLDAsMCwwKX0sZS5wcm90b3R5cGUuY2FwPWZ1bmN0aW9uIGgoaCl7aWYoMS8wPT09aClyZXR1cm4gcy5jYWxsKGEsdGhpcyk7dmFyIHQ9dGhpcy5ub3JtKCk7cmV0dXJuIHQ+aD9zLmNhbGwoYSx0aGlzLm11bHQoaC90KSk6cy5jYWxsKGEsdGhpcyl9LGUucHJvdG90eXBlLnByb2plY3Q9ZnVuY3Rpb24odCl7cmV0dXJuIHQubXVsdCh0aGlzLmRvdCh0KSl9LGUucHJvdG90eXBlLnJlZmxlY3RBY3Jvc3M9ZnVuY3Rpb24odCl7cmV0dXJuIHQubm9ybWFsaXplKCkucHV0KHQpLHMoYSx0aGlzLnN1Yih0aGlzLnByb2plY3QodCkubXVsdCgyKSkpfSxlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy54LHRoaXMueSx0aGlzLnpdfSxlLnByb3RvdHlwZS5nZXQxRD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnh9LGkuZXhwb3J0cz1lfSx7fV0sNDI6W2Z1bmN0aW9uKHQsaSl7aS5leHBvcnRzPXtNYXRyaXg6dChcIi4vTWF0cml4XCIpLFF1YXRlcm5pb246dChcIi4vUXVhdGVybmlvblwiKSxSYW5kb206dChcIi4vUmFuZG9tXCIpLFV0aWxpdGllczp0KFwiLi9VdGlsaXRpZXNcIiksVmVjdG9yOnQoXCIuL1ZlY3RvclwiKX19LHtcIi4vTWF0cml4XCI6MzcsXCIuL1F1YXRlcm5pb25cIjozOCxcIi4vUmFuZG9tXCI6MzksXCIuL1V0aWxpdGllc1wiOjQwLFwiLi9WZWN0b3JcIjo0MX1dLDQzOltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dGhpcy5vcHRpb25zPU9iamVjdC5jcmVhdGUoZS5ERUZBVUxUX09QVElPTlMpLHQmJnRoaXMuc2V0T3B0aW9ucyh0KSx0aGlzLl9wb3NpdGlvblN0YXRlPW5ldyBjKFswLDBdKSx0aGlzLl9kaWZmZXJlbnRpYWw9WzAsMF0sdGhpcy5fYWN0aXZlPSEwLHRoaXMuc3luYz1uZXcgbChbXCJtb3VzZVwiLFwidG91Y2hcIl0se3NjYWxlOnRoaXMub3B0aW9ucy5zY2FsZX0pLHRoaXMuZXZlbnRPdXRwdXQ9bmV3IHAscC5zZXRJbnB1dEhhbmRsZXIodGhpcyx0aGlzLnN5bmMpLHAuc2V0T3V0cHV0SGFuZGxlcih0aGlzLHRoaXMuZXZlbnRPdXRwdXQpLGEuY2FsbCh0aGlzKX1mdW5jdGlvbiBuKHQpe3ZhciBpPXRoaXMub3B0aW9ucyxlPWkucHJvamVjdGlvbixuPWkuc25hcFgsbz1pLnNuYXBZLHM9ZSZfLng/dFswXTowLHI9ZSZfLnk/dFsxXTowO3JldHVybiBuPjAmJihzLT1zJW4pLG8+MCYmKHItPXIlbyksW3Mscl19ZnVuY3Rpb24gbygpe3RoaXMuX2FjdGl2ZSYmKHRoaXMuX3Bvc2l0aW9uU3RhdGUuaXNBY3RpdmUoKSYmdGhpcy5fcG9zaXRpb25TdGF0ZS5oYWx0KCksdGhpcy5ldmVudE91dHB1dC5lbWl0KFwic3RhcnRcIix7cG9zaXRpb246dGhpcy5nZXRQb3NpdGlvbigpfSkpfWZ1bmN0aW9uIHModCl7aWYodGhpcy5fYWN0aXZlKXt2YXIgaT10aGlzLm9wdGlvbnM7dGhpcy5fZGlmZmVyZW50aWFsPXQucG9zaXRpb247dmFyIGU9bi5jYWxsKHRoaXMsdGhpcy5fZGlmZmVyZW50aWFsKTt0aGlzLl9kaWZmZXJlbnRpYWxbMF0tPWVbMF0sdGhpcy5fZGlmZmVyZW50aWFsWzFdLT1lWzFdO3ZhciBvPXRoaXMuZ2V0UG9zaXRpb24oKTtpZihvWzBdKz1lWzBdLG9bMV0rPWVbMV0saS54UmFuZ2Upe3ZhciBzPVtpLnhSYW5nZVswXSsuNSppLnNuYXBYLGkueFJhbmdlWzFdLS41Kmkuc25hcFhdO29bMF09eShvWzBdLHMpfWlmKGkueVJhbmdlKXt2YXIgcj1baS55UmFuZ2VbMF0rLjUqaS5zbmFwWSxpLnlSYW5nZVsxXS0uNSppLnNuYXBZXTtvWzFdPXkob1sxXSxyKX10aGlzLmV2ZW50T3V0cHV0LmVtaXQoXCJ1cGRhdGVcIix7cG9zaXRpb246b30pfX1mdW5jdGlvbiByKCl7dGhpcy5fYWN0aXZlJiZ0aGlzLmV2ZW50T3V0cHV0LmVtaXQoXCJlbmRcIix7cG9zaXRpb246dGhpcy5nZXRQb3NpdGlvbigpfSl9ZnVuY3Rpb24gYSgpe3RoaXMuc3luYy5vbihcInN0YXJ0XCIsby5iaW5kKHRoaXMpKSx0aGlzLnN5bmMub24oXCJ1cGRhdGVcIixzLmJpbmQodGhpcykpLHRoaXMuc3luYy5vbihcImVuZFwiLHIuYmluZCh0aGlzKSl9dmFyIGg9dChcIi4uL2NvcmUvVHJhbnNmb3JtXCIpLGM9dChcIi4uL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlXCIpLHA9dChcIi4uL2NvcmUvRXZlbnRIYW5kbGVyXCIpLHU9dChcIi4uL21hdGgvVXRpbGl0aWVzXCIpLGw9dChcIi4uL2lucHV0cy9HZW5lcmljU3luY1wiKSxmPXQoXCIuLi9pbnB1dHMvTW91c2VTeW5jXCIpLGQ9dChcIi4uL2lucHV0cy9Ub3VjaFN5bmNcIik7bC5yZWdpc3Rlcih7bW91c2U6Zix0b3VjaDpkfSk7dmFyIF89e3g6MSx5OjJ9O2UuRElSRUNUSU9OX1g9Xy54LGUuRElSRUNUSU9OX1k9Xy55O3ZhciB5PXUuY2xhbXA7ZS5ERUZBVUxUX09QVElPTlM9e3Byb2plY3Rpb246Xy54fF8ueSxzY2FsZToxLHhSYW5nZTpudWxsLHlSYW5nZTpudWxsLHNuYXBYOjAsc25hcFk6MCx0cmFuc2l0aW9uOntkdXJhdGlvbjowfX0sZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbih0KXt2YXIgaT10aGlzLm9wdGlvbnM7aWYodm9pZCAwIT09dC5wcm9qZWN0aW9uKXt2YXIgZT10LnByb2plY3Rpb247dGhpcy5vcHRpb25zLnByb2plY3Rpb249MCxbXCJ4XCIsXCJ5XCJdLmZvckVhY2goZnVuY3Rpb24odCl7LTEhPT1lLmluZGV4T2YodCkmJihpLnByb2plY3Rpb258PV9bdF0pfSl9dm9pZCAwIT09dC5zY2FsZSYmKGkuc2NhbGU9dC5zY2FsZSx0aGlzLnN5bmMuc2V0T3B0aW9ucyh7c2NhbGU6dC5zY2FsZX0pKSx2b2lkIDAhPT10LnhSYW5nZSYmKGkueFJhbmdlPXQueFJhbmdlKSx2b2lkIDAhPT10LnlSYW5nZSYmKGkueVJhbmdlPXQueVJhbmdlKSx2b2lkIDAhPT10LnNuYXBYJiYoaS5zbmFwWD10LnNuYXBYKSx2b2lkIDAhPT10LnNuYXBZJiYoaS5zbmFwWT10LnNuYXBZKX0sZS5wcm90b3R5cGUuZ2V0UG9zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcG9zaXRpb25TdGF0ZS5nZXQoKX0sZS5wcm90b3R5cGUuc2V0UmVsYXRpdmVQb3NpdGlvbj1mdW5jdGlvbih0LGksZSl7dmFyIG49dGhpcy5nZXRQb3NpdGlvbigpLG89W25bMF0rdFswXSxuWzFdK3RbMV1dO3RoaXMuc2V0UG9zaXRpb24obyxpLGUpfSxlLnByb3RvdHlwZS5zZXRQb3NpdGlvbj1mdW5jdGlvbih0LGksZSl7dGhpcy5fcG9zaXRpb25TdGF0ZS5pc0FjdGl2ZSgpJiZ0aGlzLl9wb3NpdGlvblN0YXRlLmhhbHQoKSx0aGlzLl9wb3NpdGlvblN0YXRlLnNldCh0LGksZSl9LGUucHJvdG90eXBlLmFjdGl2YXRlPWZ1bmN0aW9uKCl7dGhpcy5fYWN0aXZlPSEwfSxlLnByb3RvdHlwZS5kZWFjdGl2YXRlPWZ1bmN0aW9uKCl7dGhpcy5fYWN0aXZlPSExfSxlLnByb3RvdHlwZS50b2dnbGU9ZnVuY3Rpb24oKXt0aGlzLl9hY3RpdmU9IXRoaXMuX2FjdGl2ZX0sZS5wcm90b3R5cGUubW9kaWZ5PWZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuZ2V0UG9zaXRpb24oKTtyZXR1cm57dHJhbnNmb3JtOmgudHJhbnNsYXRlKGlbMF0saVsxXSksdGFyZ2V0OnR9fSxpLmV4cG9ydHM9ZX0se1wiLi4vY29yZS9FdmVudEhhbmRsZXJcIjo3LFwiLi4vY29yZS9UcmFuc2Zvcm1cIjoxNSxcIi4uL2lucHV0cy9HZW5lcmljU3luY1wiOjI3LFwiLi4vaW5wdXRzL01vdXNlU3luY1wiOjI4LFwiLi4vaW5wdXRzL1RvdWNoU3luY1wiOjMzLFwiLi4vbWF0aC9VdGlsaXRpZXNcIjo0MCxcIi4uL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlXCI6ODh9XSw0NDpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQsaSl7dGhpcy5vcHRpb25zPU9iamVjdC5jcmVhdGUoZS5ERUZBVUxUX09QVElPTlMpLHRoaXMuX29wdGlvbnNNYW5hZ2VyPW5ldyBvKHRoaXMub3B0aW9ucyksdCYmdGhpcy5zZXRPcHRpb25zKHQpLGl8fChpPTApLHRoaXMudHJhbnNpdGlvbkhlbHBlcj1uZXcgbihpKX12YXIgbj10KFwiLi4vdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGVcIiksbz10KFwiLi4vY29yZS9PcHRpb25zTWFuYWdlclwiKTtlLkRFRkFVTFRfT1BUSU9OUz17Y3VsbDohMSx0cmFuc2l0aW9uOiEwLHB1bHNlSW5UcmFuc2l0aW9uOiEwLHB1bHNlT3V0VHJhbnNpdGlvbjohMH0sZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fb3B0aW9uc01hbmFnZXIuc2V0T3B0aW9ucyh0KX0sZS5wcm90b3R5cGUuc2hvdz1mdW5jdGlvbih0LGkpe3Q9dHx8dGhpcy5vcHRpb25zLnRyYW5zaXRpb24sdGhpcy5zZXQoMSx0LGkpfSxlLnByb3RvdHlwZS5oaWRlPWZ1bmN0aW9uKHQsaSl7dD10fHx0aGlzLm9wdGlvbnMudHJhbnNpdGlvbix0aGlzLnNldCgwLHQsaSl9LGUucHJvdG90eXBlLnNldD1mdW5jdGlvbih0LGksZSl7dGhpcy5oYWx0KCksdGhpcy50cmFuc2l0aW9uSGVscGVyLnNldCh0LGksZSl9LGUucHJvdG90eXBlLmhhbHQ9ZnVuY3Rpb24oKXt0aGlzLnRyYW5zaXRpb25IZWxwZXIuaGFsdCgpfSxlLnByb3RvdHlwZS5pc1Zpc2libGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmFuc2l0aW9uSGVscGVyLmdldCgpPjB9LGUucHJvdG90eXBlLm1vZGlmeT1mdW5jdGlvbih0KXt2YXIgaT10aGlzLnRyYW5zaXRpb25IZWxwZXIuZ2V0KCk7cmV0dXJuIHRoaXMub3B0aW9ucy5jdWxsJiYhaT92b2lkIDA6e29wYWNpdHk6aSx0YXJnZXQ6dH19LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL09wdGlvbnNNYW5hZ2VyXCI6MTAsXCIuLi90cmFuc2l0aW9ucy9UcmFuc2l0aW9uYWJsZVwiOjg4fV0sNDU6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSgpe3RoaXMuX2NoYWluPVtdLGFyZ3VtZW50cy5sZW5ndGgmJnRoaXMuYWRkTW9kaWZpZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpfWUucHJvdG90eXBlLmFkZE1vZGlmaWVyPWZ1bmN0aW9uKCl7QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkodGhpcy5fY2hhaW4sYXJndW1lbnRzKX0sZS5wcm90b3R5cGUucmVtb3ZlTW9kaWZpZXI9ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5fY2hhaW4uaW5kZXhPZih0KTswPml8fHRoaXMuX2NoYWluLnNwbGljZShpLDEpfSxlLnByb3RvdHlwZS5tb2RpZnk9ZnVuY3Rpb24odCl7Zm9yKHZhciBpPXRoaXMuX2NoYWluLGU9dCxuPTA7bjxpLmxlbmd0aDtuKyspZT1pW25dLm1vZGlmeShlKTtyZXR1cm4gZX0saS5leHBvcnRzPWV9LHt9XSw0NjpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3RoaXMuX3RyYW5zZm9ybVN0YXRlPW5ldyByKG8uaWRlbnRpdHkpLHRoaXMuX29wYWNpdHlTdGF0ZT1uZXcgcygxKSx0aGlzLl9vcmlnaW5TdGF0ZT1uZXcgcyhbMCwwXSksdGhpcy5fYWxpZ25TdGF0ZT1uZXcgcyhbMCwwXSksdGhpcy5fc2l6ZVN0YXRlPW5ldyBzKFswLDBdKSx0aGlzLl9wcm9wb3J0aW9uc1N0YXRlPW5ldyBzKFswLDBdKSx0aGlzLl9tb2RpZmllcj1uZXcgbih7dHJhbnNmb3JtOnRoaXMuX3RyYW5zZm9ybVN0YXRlLG9wYWNpdHk6dGhpcy5fb3BhY2l0eVN0YXRlLG9yaWdpbjpudWxsLGFsaWduOm51bGwsc2l6ZTpudWxsLHByb3BvcnRpb25zOm51bGx9KSx0aGlzLl9oYXNPcmlnaW49ITEsdGhpcy5faGFzQWxpZ249ITEsdGhpcy5faGFzU2l6ZT0hMSx0aGlzLl9oYXNQcm9wb3J0aW9ucz0hMSx0JiYodC50cmFuc2Zvcm0mJnRoaXMuc2V0VHJhbnNmb3JtKHQudHJhbnNmb3JtKSx2b2lkIDAhPT10Lm9wYWNpdHkmJnRoaXMuc2V0T3BhY2l0eSh0Lm9wYWNpdHkpLHQub3JpZ2luJiZ0aGlzLnNldE9yaWdpbih0Lm9yaWdpbiksdC5hbGlnbiYmdGhpcy5zZXRBbGlnbih0LmFsaWduKSx0LnNpemUmJnRoaXMuc2V0U2l6ZSh0LnNpemUpLHQucHJvcG9ydGlvbnMmJnRoaXMuc2V0UHJvcG9ydGlvbnModC5wcm9wb3J0aW9ucykpfXZhciBuPXQoXCIuLi9jb3JlL01vZGlmaWVyXCIpLG89dChcIi4uL2NvcmUvVHJhbnNmb3JtXCIpLHM9dChcIi4uL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlXCIpLHI9dChcIi4uL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlVHJhbnNmb3JtXCIpO2UucHJvdG90eXBlLnNldFRyYW5zZm9ybT1mdW5jdGlvbih0LGksZSl7cmV0dXJuIHRoaXMuX3RyYW5zZm9ybVN0YXRlLnNldCh0LGksZSksdGhpc30sZS5wcm90b3R5cGUuc2V0T3BhY2l0eT1mdW5jdGlvbih0LGksZSl7cmV0dXJuIHRoaXMuX29wYWNpdHlTdGF0ZS5zZXQodCxpLGUpLHRoaXN9LGUucHJvdG90eXBlLnNldE9yaWdpbj1mdW5jdGlvbih0LGksZSl7cmV0dXJuIG51bGw9PT10Pyh0aGlzLl9oYXNPcmlnaW4mJih0aGlzLl9tb2RpZmllci5vcmlnaW5Gcm9tKG51bGwpLHRoaXMuX2hhc09yaWdpbj0hMSksdGhpcyk6KHRoaXMuX2hhc09yaWdpbnx8KHRoaXMuX2hhc09yaWdpbj0hMCx0aGlzLl9tb2RpZmllci5vcmlnaW5Gcm9tKHRoaXMuX29yaWdpblN0YXRlKSksdGhpcy5fb3JpZ2luU3RhdGUuc2V0KHQsaSxlKSx0aGlzKX0sZS5wcm90b3R5cGUuc2V0QWxpZ249ZnVuY3Rpb24odCxpLGUpe3JldHVybiBudWxsPT09dD8odGhpcy5faGFzQWxpZ24mJih0aGlzLl9tb2RpZmllci5hbGlnbkZyb20obnVsbCksdGhpcy5faGFzQWxpZ249ITEpLHRoaXMpOih0aGlzLl9oYXNBbGlnbnx8KHRoaXMuX2hhc0FsaWduPSEwLHRoaXMuX21vZGlmaWVyLmFsaWduRnJvbSh0aGlzLl9hbGlnblN0YXRlKSksdGhpcy5fYWxpZ25TdGF0ZS5zZXQodCxpLGUpLHRoaXMpfSxlLnByb3RvdHlwZS5zZXRTaXplPWZ1bmN0aW9uKHQsaSxlKXtyZXR1cm4gbnVsbD09PXQ/KHRoaXMuX2hhc1NpemUmJih0aGlzLl9tb2RpZmllci5zaXplRnJvbShudWxsKSx0aGlzLl9oYXNTaXplPSExKSx0aGlzKToodGhpcy5faGFzU2l6ZXx8KHRoaXMuX2hhc1NpemU9ITAsdGhpcy5fbW9kaWZpZXIuc2l6ZUZyb20odGhpcy5fc2l6ZVN0YXRlKSksdGhpcy5fc2l6ZVN0YXRlLnNldCh0LGksZSksdGhpcyl9LGUucHJvdG90eXBlLnNldFByb3BvcnRpb25zPWZ1bmN0aW9uKHQsaSxlKXtyZXR1cm4gbnVsbD09PXQ/KHRoaXMuX2hhc1Byb3BvcnRpb25zJiYodGhpcy5fbW9kaWZpZXIucHJvcG9ydGlvbnNGcm9tKG51bGwpLHRoaXMuX2hhc1Byb3BvcnRpb25zPSExKSx0aGlzKToodGhpcy5faGFzUHJvcG9ydGlvbnN8fCh0aGlzLl9oYXNQcm9wb3J0aW9ucz0hMCx0aGlzLl9tb2RpZmllci5wcm9wb3J0aW9uc0Zyb20odGhpcy5fcHJvcG9ydGlvbnNTdGF0ZSkpLHRoaXMuX3Byb3BvcnRpb25zU3RhdGUuc2V0KHQsaSxlKSx0aGlzKX0sZS5wcm90b3R5cGUuaGFsdD1mdW5jdGlvbigpe3RoaXMuX3RyYW5zZm9ybVN0YXRlLmhhbHQoKSx0aGlzLl9vcGFjaXR5U3RhdGUuaGFsdCgpLHRoaXMuX29yaWdpblN0YXRlLmhhbHQoKSx0aGlzLl9hbGlnblN0YXRlLmhhbHQoKSx0aGlzLl9zaXplU3RhdGUuaGFsdCgpLHRoaXMuX3Byb3BvcnRpb25zU3RhdGUuaGFsdCgpfSxlLnByb3RvdHlwZS5nZXRUcmFuc2Zvcm09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdHJhbnNmb3JtU3RhdGUuZ2V0KCl9LGUucHJvdG90eXBlLmdldEZpbmFsVHJhbnNmb3JtPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RyYW5zZm9ybVN0YXRlLmdldEZpbmFsKCl9LGUucHJvdG90eXBlLmdldE9wYWNpdHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3BhY2l0eVN0YXRlLmdldCgpfSxlLnByb3RvdHlwZS5nZXRPcmlnaW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGFzT3JpZ2luP3RoaXMuX29yaWdpblN0YXRlLmdldCgpOm51bGx9LGUucHJvdG90eXBlLmdldEFsaWduPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hhc0FsaWduP3RoaXMuX2FsaWduU3RhdGUuZ2V0KCk6bnVsbH0sZS5wcm90b3R5cGUuZ2V0U2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9oYXNTaXplP3RoaXMuX3NpemVTdGF0ZS5nZXQoKTpudWxsfSxlLnByb3RvdHlwZS5nZXRQcm9wb3J0aW9ucz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9oYXNQcm9wb3J0aW9ucz90aGlzLl9wcm9wb3J0aW9uc1N0YXRlLmdldCgpOm51bGx9LGUucHJvdG90eXBlLm1vZGlmeT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbW9kaWZpZXIubW9kaWZ5KHQpfSxpLmV4cG9ydHM9ZX0se1wiLi4vY29yZS9Nb2RpZmllclwiOjksXCIuLi9jb3JlL1RyYW5zZm9ybVwiOjE1LFwiLi4vdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGVcIjo4OCxcIi4uL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlVHJhbnNmb3JtXCI6ODl9XSw0NzpbZnVuY3Rpb24odCxpKXtpLmV4cG9ydHM9e0RyYWdnYWJsZTp0KFwiLi9EcmFnZ2FibGVcIiksRmFkZXI6dChcIi4vRmFkZXJcIiksTW9kaWZpZXJDaGFpbjp0KFwiLi9Nb2RpZmllckNoYWluXCIpLFN0YXRlTW9kaWZpZXI6dChcIi4vU3RhdGVNb2RpZmllclwiKX19LHtcIi4vRHJhZ2dhYmxlXCI6NDMsXCIuL0ZhZGVyXCI6NDQsXCIuL01vZGlmaWVyQ2hhaW5cIjo0NSxcIi4vU3RhdGVNb2RpZmllclwiOjQ2fV0sNDg6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLm9wdGlvbnM9T2JqZWN0LmNyZWF0ZShlLkRFRkFVTFRfT1BUSU9OUyksdCYmdGhpcy5zZXRPcHRpb25zKHQpLHRoaXMuX3BhcnRpY2xlcz1bXSx0aGlzLl9ib2RpZXM9W10sdGhpcy5fYWdlbnREYXRhPXt9LHRoaXMuX2ZvcmNlcz1bXSx0aGlzLl9jb25zdHJhaW50cz1bXSx0aGlzLl9idWZmZXI9MCx0aGlzLl9wcmV2VGltZT1TKCksdGhpcy5faXNTbGVlcGluZz0hMSx0aGlzLl9ldmVudEhhbmRsZXI9bnVsbCx0aGlzLl9jdXJyQWdlbnRJZD0wLHRoaXMuX2hhc0JvZGllcz0hMSx0aGlzLl9ldmVudEhhbmRsZXI9bnVsbH1mdW5jdGlvbiBuKHQpe3JldHVybiB0LmFwcGx5Rm9yY2U/dGhpcy5fZm9yY2VzOnQuYXBwbHlDb25zdHJhaW50P3RoaXMuX2NvbnN0cmFpbnRzOnZvaWQgMH1mdW5jdGlvbiBvKHQsaSxlKXtyZXR1cm4gdm9pZCAwPT09aSYmKGk9dGhpcy5nZXRQYXJ0aWNsZXNBbmRCb2RpZXMoKSksaSBpbnN0YW5jZW9mIEFycmF5fHwoaT1baV0pLHQub24oXCJjaGFuZ2VcIix0aGlzLndha2UuYmluZCh0aGlzKSksdGhpcy5fYWdlbnREYXRhW3RoaXMuX2N1cnJBZ2VudElkXT17YWdlbnQ6dCxpZDp0aGlzLl9jdXJyQWdlbnRJZCx0YXJnZXRzOmksc291cmNlOmV9LG4uY2FsbCh0aGlzLHQpLnB1c2godGhpcy5fY3VyckFnZW50SWQpLHRoaXMuX2N1cnJBZ2VudElkKyt9ZnVuY3Rpb24gcyh0KXtyZXR1cm4gdGhpcy5fYWdlbnREYXRhW3RdfWZ1bmN0aW9uIHIodCl7dmFyIGk9cy5jYWxsKHRoaXMsdGhpcy5fZm9yY2VzW3RdKTtpLmFnZW50LmFwcGx5Rm9yY2UoaS50YXJnZXRzLGkuc291cmNlKX1mdW5jdGlvbiBhKCl7Zm9yKHZhciB0PXRoaXMuX2ZvcmNlcy5sZW5ndGgtMTt0Pi0xO3QtLSlyLmNhbGwodGhpcyx0KX1mdW5jdGlvbiBoKHQsaSl7dmFyIGU9dGhpcy5fYWdlbnREYXRhW3RoaXMuX2NvbnN0cmFpbnRzW3RdXTtyZXR1cm4gZS5hZ2VudC5hcHBseUNvbnN0cmFpbnQoZS50YXJnZXRzLGUuc291cmNlLGkpfWZ1bmN0aW9uIGModCl7Zm9yKHZhciBpPTA7aTx0aGlzLm9wdGlvbnMuY29uc3RyYWludFN0ZXBzOyl7Zm9yKHZhciBlPXRoaXMuX2NvbnN0cmFpbnRzLmxlbmd0aC0xO2U+LTE7ZS0tKWguY2FsbCh0aGlzLGUsdCk7aSsrfX1mdW5jdGlvbiBwKHQsaSl7dC5pbnRlZ3JhdGVWZWxvY2l0eShpKSx0aGlzLm9wdGlvbnMudmVsb2NpdHlDYXAmJnQudmVsb2NpdHkuY2FwKHRoaXMub3B0aW9ucy52ZWxvY2l0eUNhcCkucHV0KHQudmVsb2NpdHkpfWZ1bmN0aW9uIHUodCxpKXt0LmludGVncmF0ZUFuZ3VsYXJNb21lbnR1bShpKSx0LnVwZGF0ZUFuZ3VsYXJWZWxvY2l0eSgpLHRoaXMub3B0aW9ucy5hbmd1bGFyVmVsb2NpdHlDYXAmJnQuYW5ndWxhclZlbG9jaXR5LmNhcCh0aGlzLm9wdGlvbnMuYW5ndWxhclZlbG9jaXR5Q2FwKS5wdXQodC5hbmd1bGFyVmVsb2NpdHkpfWZ1bmN0aW9uIGwodCxpKXt0LmludGVncmF0ZU9yaWVudGF0aW9uKGkpfWZ1bmN0aW9uIGYodCxpKXt0LmludGVncmF0ZVBvc2l0aW9uKGkpLHQuZW1pdChULnVwZGF0ZSx0KX1mdW5jdGlvbiBkKHQpe2EuY2FsbCh0aGlzLHQpLHRoaXMuZm9yRWFjaChwLHQpLHRoaXMuZm9yRWFjaEJvZHkodSx0KSxjLmNhbGwodGhpcyx0KSx0aGlzLmZvckVhY2hCb2R5KGwsdCksdGhpcy5mb3JFYWNoKGYsdCl9ZnVuY3Rpb24gXygpe3ZhciB0PTAsaT0wO3JldHVybiB0aGlzLmZvckVhY2goZnVuY3Rpb24oZSl7aT1lLmdldEVuZXJneSgpLHQrPWl9KSx0fWZ1bmN0aW9uIHkoKXt2YXIgdD0wO2Zvcih2YXIgaSBpbiB0aGlzLl9hZ2VudERhdGEpdCs9dGhpcy5nZXRBZ2VudEVuZXJneShpKTtyZXR1cm4gdH12YXIgZz10KFwiLi4vY29yZS9FdmVudEhhbmRsZXJcIiksdj0xNyxtPTFlMy8xMjAsTz0xNyxTPURhdGUubm93LFQ9e3N0YXJ0Olwic3RhcnRcIix1cGRhdGU6XCJ1cGRhdGVcIixlbmQ6XCJlbmRcIn07ZS5ERUZBVUxUX09QVElPTlM9e2NvbnN0cmFpbnRTdGVwczoxLHNsZWVwVG9sZXJhbmNlOjFlLTcsdmVsb2NpdHlDYXA6dm9pZCAwLGFuZ3VsYXJWZWxvY2l0eUNhcDp2b2lkIDB9LGUucHJvdG90eXBlLnNldE9wdGlvbnM9ZnVuY3Rpb24odCl7Zm9yKHZhciBpIGluIHQpdGhpcy5vcHRpb25zW2ldJiYodGhpcy5vcHRpb25zW2ldPXRbaV0pfSxlLnByb3RvdHlwZS5hZGRCb2R5PWZ1bmN0aW9uKHQpe3JldHVybiB0Ll9lbmdpbmU9dGhpcyx0LmlzQm9keT8odGhpcy5fYm9kaWVzLnB1c2godCksdGhpcy5faGFzQm9kaWVzPSEwKTp0aGlzLl9wYXJ0aWNsZXMucHVzaCh0KSx0Lm9uKFwic3RhcnRcIix0aGlzLndha2UuYmluZCh0aGlzKSksdH0sZS5wcm90b3R5cGUucmVtb3ZlQm9keT1mdW5jdGlvbih0KXt2YXIgaT10LmlzQm9keT90aGlzLl9ib2RpZXM6dGhpcy5fcGFydGljbGVzLGU9aS5pbmRleE9mKHQpO2lmKGU+LTEpe2Zvcih2YXIgbiBpbiB0aGlzLl9hZ2VudERhdGEpdGhpcy5kZXRhY2hGcm9tKG4uaWQsdCk7aS5zcGxpY2UoZSwxKX0wPT09dGhpcy5nZXRCb2RpZXMoKS5sZW5ndGgmJih0aGlzLl9oYXNCb2RpZXM9ITEpfSxlLnByb3RvdHlwZS5hdHRhY2g9ZnVuY3Rpb24odCxpLGUpe2lmKHRoaXMud2FrZSgpLHQgaW5zdGFuY2VvZiBBcnJheSl7Zm9yKHZhciBuPVtdLHM9MDtzPHQubGVuZ3RoO3MrKyluW3NdPW8uY2FsbCh0aGlzLHRbc10saSxlKTtyZXR1cm4gbn1yZXR1cm4gby5jYWxsKHRoaXMsdCxpLGUpfSxlLnByb3RvdHlwZS5hdHRhY2hUbz1mdW5jdGlvbih0LGkpe3MuY2FsbCh0aGlzLHQpLnRhcmdldHMucHVzaChpKX0sZS5wcm90b3R5cGUuZGV0YWNoPWZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuZ2V0QWdlbnQodCksZT1uLmNhbGwodGhpcyxpKSxvPWUuaW5kZXhPZih0KTtlLnNwbGljZShvLDEpLGRlbGV0ZSB0aGlzLl9hZ2VudERhdGFbdF19LGUucHJvdG90eXBlLmRldGFjaEZyb209ZnVuY3Rpb24odCxpKXt2YXIgZT1zLmNhbGwodGhpcyx0KTtpZihlLnNvdXJjZT09PWkpdGhpcy5kZXRhY2godCk7ZWxzZXt2YXIgbj1lLnRhcmdldHMsbz1uLmluZGV4T2YoaSk7bz4tMSYmbi5zcGxpY2UobywxKX19LGUucHJvdG90eXBlLmRldGFjaEFsbD1mdW5jdGlvbigpe3RoaXMuX2FnZW50RGF0YT17fSx0aGlzLl9mb3JjZXM9W10sdGhpcy5fY29uc3RyYWludHM9W10sdGhpcy5fY3VyckFnZW50SWQ9MH0sZS5wcm90b3R5cGUuZ2V0QWdlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHMuY2FsbCh0aGlzLHQpLmFnZW50fSxlLnByb3RvdHlwZS5nZXRQYXJ0aWNsZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFydGljbGVzfSxlLnByb3RvdHlwZS5nZXRCb2RpZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYm9kaWVzfSxlLnByb3RvdHlwZS5nZXRQYXJ0aWNsZXNBbmRCb2RpZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRQYXJ0aWNsZXMoKS5jb25jYXQodGhpcy5nZXRCb2RpZXMoKSl9LGUucHJvdG90eXBlLmZvckVhY2hQYXJ0aWNsZT1mdW5jdGlvbih0LGkpe2Zvcih2YXIgZT10aGlzLmdldFBhcnRpY2xlcygpLG49MCxvPWUubGVuZ3RoO28+bjtuKyspdC5jYWxsKHRoaXMsZVtuXSxpKX0sZS5wcm90b3R5cGUuZm9yRWFjaEJvZHk9ZnVuY3Rpb24odCxpKXtpZih0aGlzLl9oYXNCb2RpZXMpZm9yKHZhciBlPXRoaXMuZ2V0Qm9kaWVzKCksbj0wLG89ZS5sZW5ndGg7bz5uO24rKyl0LmNhbGwodGhpcyxlW25dLGkpfSxlLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKHQsaSl7dGhpcy5mb3JFYWNoUGFydGljbGUodCxpKSx0aGlzLmZvckVhY2hCb2R5KHQsaSl9LGUucHJvdG90eXBlLmdldEFnZW50RW5lcmd5PWZ1bmN0aW9uKHQpe3ZhciBpPXMuY2FsbCh0aGlzLHQpO3JldHVybiBpLmFnZW50LmdldEVuZXJneShpLnRhcmdldHMsaS5zb3VyY2UpfSxlLnByb3RvdHlwZS5nZXRFbmVyZ3k9ZnVuY3Rpb24oKXtyZXR1cm4gXy5jYWxsKHRoaXMpK3kuY2FsbCh0aGlzKX0sZS5wcm90b3R5cGUuc3RlcD1mdW5jdGlvbigpe2lmKCF0aGlzLmlzU2xlZXBpbmcoKSl7dmFyIHQ9UygpLGk9dC10aGlzLl9wcmV2VGltZTt0aGlzLl9wcmV2VGltZT10LG0+aXx8KGk+TyYmKGk9TyksZC5jYWxsKHRoaXMsdiksdGhpcy5lbWl0KFQudXBkYXRlLHRoaXMpLHRoaXMuZ2V0RW5lcmd5KCk8dGhpcy5vcHRpb25zLnNsZWVwVG9sZXJhbmNlJiZ0aGlzLnNsZWVwKCkpfX0sZS5wcm90b3R5cGUuaXNTbGVlcGluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1NsZWVwaW5nfSxlLnByb3RvdHlwZS5pc0FjdGl2ZT1mdW5jdGlvbigpe3JldHVybiF0aGlzLl9pc1NsZWVwaW5nfSxlLnByb3RvdHlwZS5zbGVlcD1mdW5jdGlvbigpe3RoaXMuX2lzU2xlZXBpbmd8fCh0aGlzLmZvckVhY2goZnVuY3Rpb24odCl7dC5zbGVlcCgpfSksdGhpcy5lbWl0KFQuZW5kLHRoaXMpLHRoaXMuX2lzU2xlZXBpbmc9ITApfSxlLnByb3RvdHlwZS53YWtlPWZ1bmN0aW9uKCl7dGhpcy5faXNTbGVlcGluZyYmKHRoaXMuX3ByZXZUaW1lPVMoKSx0aGlzLmVtaXQoVC5zdGFydCx0aGlzKSx0aGlzLl9pc1NsZWVwaW5nPSExKX0sZS5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbih0LGkpe251bGwhPT10aGlzLl9ldmVudEhhbmRsZXImJnRoaXMuX2V2ZW50SGFuZGxlci5lbWl0KHQsaSl9LGUucHJvdG90eXBlLm9uPWZ1bmN0aW9uKHQsaSl7bnVsbD09PXRoaXMuX2V2ZW50SGFuZGxlciYmKHRoaXMuX2V2ZW50SGFuZGxlcj1uZXcgZyksdGhpcy5fZXZlbnRIYW5kbGVyLm9uKHQsaSl9LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiOjd9XSw0OTpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe24uY2FsbCh0aGlzLHQpLHQ9dHx8e30sdGhpcy5vcmllbnRhdGlvbj1uZXcgcix0aGlzLmFuZ3VsYXJWZWxvY2l0eT1uZXcgcyx0aGlzLmFuZ3VsYXJNb21lbnR1bT1uZXcgcyx0aGlzLnRvcnF1ZT1uZXcgcyx0Lm9yaWVudGF0aW9uJiZ0aGlzLm9yaWVudGF0aW9uLnNldCh0Lm9yaWVudGF0aW9uKSx0LmFuZ3VsYXJWZWxvY2l0eSYmdGhpcy5hbmd1bGFyVmVsb2NpdHkuc2V0KHQuYW5ndWxhclZlbG9jaXR5KSx0LmFuZ3VsYXJNb21lbnR1bSYmdGhpcy5hbmd1bGFyTW9tZW50dW0uc2V0KHQuYW5ndWxhck1vbWVudHVtKSx0LnRvcnF1ZSYmdGhpcy50b3JxdWUuc2V0KHQudG9ycXVlKSx0aGlzLmFuZ3VsYXJWZWxvY2l0eS53PTAsdGhpcy5zZXRNb21lbnRzT2ZJbmVydGlhKCksdGhpcy5wV29ybGQ9bmV3IHN9dmFyIG49dChcIi4vUGFydGljbGVcIiksbz10KFwiLi4vLi4vY29yZS9UcmFuc2Zvcm1cIikscz10KFwiLi4vLi4vbWF0aC9WZWN0b3JcIikscj10KFwiLi4vLi4vbWF0aC9RdWF0ZXJuaW9uXCIpLGE9dChcIi4uLy4uL21hdGgvTWF0cml4XCIpLGg9dChcIi4uL2ludGVncmF0b3JzL1N5bXBsZWN0aWNFdWxlclwiKTtlLkRFRkFVTFRfT1BUSU9OUz1uLkRFRkFVTFRfT1BUSU9OUyxlLkRFRkFVTFRfT1BUSU9OUy5vcmllbnRhdGlvbj1bMCwwLDAsMV0sZS5ERUZBVUxUX09QVElPTlMuYW5ndWxhclZlbG9jaXR5PVswLDAsMF0sZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5pc0JvZHk9ITAsZS5wcm90b3R5cGUuc2V0TWFzcz1mdW5jdGlvbigpe24ucHJvdG90eXBlLnNldE1hc3MuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuc2V0TW9tZW50c09mSW5lcnRpYSgpfSxlLnByb3RvdHlwZS5zZXRNb21lbnRzT2ZJbmVydGlhPWZ1bmN0aW9uKCl7dGhpcy5pbmVydGlhPW5ldyBhLHRoaXMuaW52ZXJzZUluZXJ0aWE9bmV3IGF9LGUucHJvdG90eXBlLnVwZGF0ZUFuZ3VsYXJWZWxvY2l0eT1mdW5jdGlvbigpe3RoaXMuYW5ndWxhclZlbG9jaXR5LnNldCh0aGlzLmludmVyc2VJbmVydGlhLnZlY3Rvck11bHRpcGx5KHRoaXMuYW5ndWxhck1vbWVudHVtKSl9LGUucHJvdG90eXBlLnRvV29ybGRDb29yZGluYXRlcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wV29ybGQuc2V0KHRoaXMub3JpZW50YXRpb24ucm90YXRlVmVjdG9yKHQpKX0sZS5wcm90b3R5cGUuZ2V0RW5lcmd5PWZ1bmN0aW9uKCl7cmV0dXJuIG4ucHJvdG90eXBlLmdldEVuZXJneS5jYWxsKHRoaXMpKy41KnRoaXMuaW5lcnRpYS52ZWN0b3JNdWx0aXBseSh0aGlzLmFuZ3VsYXJWZWxvY2l0eSkuZG90KHRoaXMuYW5ndWxhclZlbG9jaXR5KX0sZS5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24odCxpLGUsbyl7bi5wcm90b3R5cGUucmVzZXQuY2FsbCh0aGlzLHQsaSksdGhpcy5hbmd1bGFyVmVsb2NpdHkuY2xlYXIoKSx0aGlzLnNldE9yaWVudGF0aW9uKGV8fFsxLDAsMCwwXSksdGhpcy5zZXRBbmd1bGFyTW9tZW50dW0ob3x8WzAsMCwwXSl9LGUucHJvdG90eXBlLnNldE9yaWVudGF0aW9uPWZ1bmN0aW9uKHQpe3RoaXMub3JpZW50YXRpb24uc2V0KHQpfSxlLnByb3RvdHlwZS5zZXRBbmd1bGFyVmVsb2NpdHk9ZnVuY3Rpb24odCl7dGhpcy53YWtlKCksdGhpcy5hbmd1bGFyVmVsb2NpdHkuc2V0KHQpfSxlLnByb3RvdHlwZS5zZXRBbmd1bGFyTW9tZW50dW09ZnVuY3Rpb24odCl7dGhpcy53YWtlKCksdGhpcy5hbmd1bGFyTW9tZW50dW0uc2V0KHQpfSxlLnByb3RvdHlwZS5hcHBseUZvcmNlPWZ1bmN0aW9uKHQsaSl7bi5wcm90b3R5cGUuYXBwbHlGb3JjZS5jYWxsKHRoaXMsdCksdm9pZCAwIT09aSYmdGhpcy5hcHBseVRvcnF1ZShpLmNyb3NzKHQpKX0sZS5wcm90b3R5cGUuYXBwbHlUb3JxdWU9ZnVuY3Rpb24odCl7dGhpcy53YWtlKCksdGhpcy50b3JxdWUuc2V0KHRoaXMudG9ycXVlLmFkZCh0KSl9LGUucHJvdG90eXBlLmdldFRyYW5zZm9ybT1mdW5jdGlvbigpe3JldHVybiBvLnRoZW5Nb3ZlKHRoaXMub3JpZW50YXRpb24uZ2V0VHJhbnNmb3JtKCksby5nZXRUcmFuc2xhdGUobi5wcm90b3R5cGUuZ2V0VHJhbnNmb3JtLmNhbGwodGhpcykpKX0sZS5wcm90b3R5cGUuX2ludGVncmF0ZT1mdW5jdGlvbih0KXtuLnByb3RvdHlwZS5faW50ZWdyYXRlLmNhbGwodGhpcyx0KSx0aGlzLmludGVncmF0ZUFuZ3VsYXJNb21lbnR1bSh0KSx0aGlzLnVwZGF0ZUFuZ3VsYXJWZWxvY2l0eSh0KSx0aGlzLmludGVncmF0ZU9yaWVudGF0aW9uKHQpfSxlLnByb3RvdHlwZS5pbnRlZ3JhdGVBbmd1bGFyTW9tZW50dW09ZnVuY3Rpb24odCl7aC5pbnRlZ3JhdGVBbmd1bGFyTW9tZW50dW0odGhpcyx0KX0sZS5wcm90b3R5cGUuaW50ZWdyYXRlT3JpZW50YXRpb249ZnVuY3Rpb24odCl7aC5pbnRlZ3JhdGVPcmllbnRhdGlvbih0aGlzLHQpfSxpLmV4cG9ydHM9ZX0se1wiLi4vLi4vY29yZS9UcmFuc2Zvcm1cIjoxNSxcIi4uLy4uL21hdGgvTWF0cml4XCI6MzcsXCIuLi8uLi9tYXRoL1F1YXRlcm5pb25cIjozOCxcIi4uLy4uL21hdGgvVmVjdG9yXCI6NDEsXCIuLi9pbnRlZ3JhdG9ycy9TeW1wbGVjdGljRXVsZXJcIjo3MixcIi4vUGFydGljbGVcIjo1MX1dLDUwOltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dD10fHx7fSx0aGlzLnNldFJhZGl1cyh0LnJhZGl1c3x8MCksbi5jYWxsKHRoaXMsdCl9dmFyIG49dChcIi4vQm9keVwiKSxvPXQoXCIuLi8uLi9tYXRoL01hdHJpeFwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLnNldFJhZGl1cz1mdW5jdGlvbih0KXt0aGlzLnJhZGl1cz10LHRoaXMuc2l6ZT1bMip0aGlzLnJhZGl1cywyKnRoaXMucmFkaXVzXSx0aGlzLnNldE1vbWVudHNPZkluZXJ0aWEoKX0sZS5wcm90b3R5cGUuc2V0TW9tZW50c09mSW5lcnRpYT1mdW5jdGlvbigpe3ZhciB0PXRoaXMubWFzcyxpPXRoaXMucmFkaXVzO3RoaXMuaW5lcnRpYT1uZXcgbyhbWy4yNSp0KmkqaSwwLDBdLFswLC4yNSp0KmkqaSwwXSxbMCwwLC41KnQqaSppXV0pLHRoaXMuaW52ZXJzZUluZXJ0aWE9bmV3IG8oW1s0Lyh0KmkqaSksMCwwXSxbMCw0Lyh0KmkqaSksMF0sWzAsMCwyLyh0KmkqaSldXSl9LGkuZXhwb3J0cz1lfSx7XCIuLi8uLi9tYXRoL01hdHJpeFwiOjM3LFwiLi9Cb2R5XCI6NDl9XSw1MTpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3Q9dHx8e307dmFyIGk9ZS5ERUZBVUxUX09QVElPTlM7dGhpcy5wb3NpdGlvbj1uZXcgbyx0aGlzLnZlbG9jaXR5PW5ldyBvLHRoaXMuZm9yY2U9bmV3IG8sdGhpcy5fZW5naW5lPW51bGwsdGhpcy5faXNTbGVlcGluZz0hMCx0aGlzLl9ldmVudE91dHB1dD1udWxsLHRoaXMubWFzcz12b2lkIDAhPT10Lm1hc3M/dC5tYXNzOmkubWFzcyx0aGlzLmludmVyc2VNYXNzPTEvdGhpcy5tYXNzLHRoaXMuc2V0UG9zaXRpb24odC5wb3NpdGlvbnx8aS5wb3NpdGlvbiksdGhpcy5zZXRWZWxvY2l0eSh0LnZlbG9jaXR5fHxpLnZlbG9jaXR5KSx0aGlzLmZvcmNlLnNldCh0LmZvcmNlfHxbMCwwLDBdKSx0aGlzLnRyYW5zZm9ybT1zLmlkZW50aXR5LnNsaWNlKCksdGhpcy5fc3BlYz17c2l6ZTpbITAsITBdLHRhcmdldDp7dHJhbnNmb3JtOnRoaXMudHJhbnNmb3JtLG9yaWdpbjpbLjUsLjVdLHRhcmdldDpudWxsfX19ZnVuY3Rpb24gbigpe3RoaXMuX2V2ZW50T3V0cHV0PW5ldyByLHRoaXMuX2V2ZW50T3V0cHV0LmJpbmRUaGlzKHRoaXMpLHIuc2V0T3V0cHV0SGFuZGxlcih0aGlzLHRoaXMuX2V2ZW50T3V0cHV0KX12YXIgbz10KFwiLi4vLi4vbWF0aC9WZWN0b3JcIikscz10KFwiLi4vLi4vY29yZS9UcmFuc2Zvcm1cIikscj10KFwiLi4vLi4vY29yZS9FdmVudEhhbmRsZXJcIiksYT10KFwiLi4vaW50ZWdyYXRvcnMvU3ltcGxlY3RpY0V1bGVyXCIpO2UuREVGQVVMVF9PUFRJT05TPXtwb3NpdGlvbjpbMCwwLDBdLHZlbG9jaXR5OlswLDAsMF0sbWFzczoxfTt2YXIgaD17c3RhcnQ6XCJzdGFydFwiLHVwZGF0ZTpcInVwZGF0ZVwiLGVuZDpcImVuZFwifSxjPURhdGUubm93O2UucHJvdG90eXBlLmlzQm9keT0hMSxlLnByb3RvdHlwZS5pc0FjdGl2ZT1mdW5jdGlvbigpe3JldHVybiF0aGlzLl9pc1NsZWVwaW5nfSxlLnByb3RvdHlwZS5zbGVlcD1mdW5jdGlvbigpe3RoaXMuX2lzU2xlZXBpbmd8fCh0aGlzLmVtaXQoaC5lbmQsdGhpcyksdGhpcy5faXNTbGVlcGluZz0hMCl9LGUucHJvdG90eXBlLndha2U9ZnVuY3Rpb24oKXt0aGlzLl9pc1NsZWVwaW5nJiYodGhpcy5lbWl0KGguc3RhcnQsdGhpcyksdGhpcy5faXNTbGVlcGluZz0hMSx0aGlzLl9wcmV2VGltZT1jKCksdGhpcy5fZW5naW5lJiZ0aGlzLl9lbmdpbmUud2FrZSgpKX0sZS5wcm90b3R5cGUuc2V0UG9zaXRpb249ZnVuY3Rpb24odCl7dGhpcy5wb3NpdGlvbi5zZXQodCl9LGUucHJvdG90eXBlLnNldFBvc2l0aW9uMUQ9ZnVuY3Rpb24odCl7dGhpcy5wb3NpdGlvbi54PXR9LGUucHJvdG90eXBlLmdldFBvc2l0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuZ2luZS5zdGVwKCksdGhpcy5wb3NpdGlvbi5nZXQoKX0sZS5wcm90b3R5cGUuZ2V0UG9zaXRpb24xRD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmdpbmUuc3RlcCgpLHRoaXMucG9zaXRpb24ueH0sZS5wcm90b3R5cGUuc2V0VmVsb2NpdHk9ZnVuY3Rpb24odCl7dGhpcy52ZWxvY2l0eS5zZXQodCksKDAhPT10WzBdfHwwIT09dFsxXXx8MCE9PXRbMl0pJiZ0aGlzLndha2UoKX0sZS5wcm90b3R5cGUuc2V0VmVsb2NpdHkxRD1mdW5jdGlvbih0KXt0aGlzLnZlbG9jaXR5Lng9dCwwIT09dCYmdGhpcy53YWtlKCl9LGUucHJvdG90eXBlLmdldFZlbG9jaXR5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmVsb2NpdHkuZ2V0KCl9LGUucHJvdG90eXBlLnNldEZvcmNlPWZ1bmN0aW9uKHQpe3RoaXMuZm9yY2Uuc2V0KHQpLHRoaXMud2FrZSgpfSxlLnByb3RvdHlwZS5nZXRWZWxvY2l0eTFEPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmVsb2NpdHkueH0sZS5wcm90b3R5cGUuc2V0TWFzcz1mdW5jdGlvbih0KXt0aGlzLm1hc3M9dCx0aGlzLmludmVyc2VNYXNzPTEvdH0sZS5wcm90b3R5cGUuZ2V0TWFzcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1hc3N9LGUucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKHQsaSl7dGhpcy5zZXRQb3NpdGlvbih0fHxbMCwwLDBdKSx0aGlzLnNldFZlbG9jaXR5KGl8fFswLDAsMF0pfSxlLnByb3RvdHlwZS5hcHBseUZvcmNlPWZ1bmN0aW9uKHQpe3QuaXNaZXJvKCl8fCh0aGlzLmZvcmNlLmFkZCh0KS5wdXQodGhpcy5mb3JjZSksdGhpcy53YWtlKCkpfSxlLnByb3RvdHlwZS5hcHBseUltcHVsc2U9ZnVuY3Rpb24odCl7aWYoIXQuaXNaZXJvKCkpe3ZhciBpPXRoaXMudmVsb2NpdHk7aS5hZGQodC5tdWx0KHRoaXMuaW52ZXJzZU1hc3MpKS5wdXQoaSl9fSxlLnByb3RvdHlwZS5pbnRlZ3JhdGVWZWxvY2l0eT1mdW5jdGlvbih0KXthLmludGVncmF0ZVZlbG9jaXR5KHRoaXMsdCl9LGUucHJvdG90eXBlLmludGVncmF0ZVBvc2l0aW9uPWZ1bmN0aW9uKHQpe2EuaW50ZWdyYXRlUG9zaXRpb24odGhpcyx0KX0sZS5wcm90b3R5cGUuX2ludGVncmF0ZT1mdW5jdGlvbih0KXt0aGlzLmludGVncmF0ZVZlbG9jaXR5KHQpLHRoaXMuaW50ZWdyYXRlUG9zaXRpb24odCl9LGUucHJvdG90eXBlLmdldEVuZXJneT1mdW5jdGlvbigpe3JldHVybi41KnRoaXMubWFzcyp0aGlzLnZlbG9jaXR5Lm5vcm1TcXVhcmVkKCl9LGUucHJvdG90eXBlLmdldFRyYW5zZm9ybT1mdW5jdGlvbigpe3RoaXMuX2VuZ2luZS5zdGVwKCk7dmFyIHQ9dGhpcy5wb3NpdGlvbixpPXRoaXMudHJhbnNmb3JtO3JldHVybiBpWzEyXT10LngsaVsxM109dC55LGlbMTRdPXQueixpfSxlLnByb3RvdHlwZS5tb2RpZnk9ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5fc3BlYy50YXJnZXQ7cmV0dXJuIGkudHJhbnNmb3JtPXRoaXMuZ2V0VHJhbnNmb3JtKCksaS50YXJnZXQ9dCx0aGlzLl9zcGVjfSxlLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKHQsaSl7dGhpcy5fZXZlbnRPdXRwdXQmJnRoaXMuX2V2ZW50T3V0cHV0LmVtaXQodCxpKX0sZS5wcm90b3R5cGUub249ZnVuY3Rpb24oKXtyZXR1cm4gbi5jYWxsKHRoaXMpLHRoaXMub24uYXBwbHkodGhpcyxhcmd1bWVudHMpfSxlLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcj1mdW5jdGlvbigpe3JldHVybiBuLmNhbGwodGhpcyksdGhpcy5yZW1vdmVMaXN0ZW5lci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGUucHJvdG90eXBlLnBpcGU9ZnVuY3Rpb24oKXtyZXR1cm4gbi5jYWxsKHRoaXMpLHRoaXMucGlwZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGUucHJvdG90eXBlLnVucGlwZT1mdW5jdGlvbigpe3JldHVybiBuLmNhbGwodGhpcyksdGhpcy51bnBpcGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxpLmV4cG9ydHM9ZX0se1wiLi4vLi4vY29yZS9FdmVudEhhbmRsZXJcIjo3LFwiLi4vLi4vY29yZS9UcmFuc2Zvcm1cIjoxNSxcIi4uLy4uL21hdGgvVmVjdG9yXCI6NDEsXCIuLi9pbnRlZ3JhdG9ycy9TeW1wbGVjdGljRXVsZXJcIjo3Mn1dLDUyOltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dD10fHx7fSx0aGlzLnNpemU9dC5zaXplfHxbMCwwXSxuLmNhbGwodGhpcyx0KX12YXIgbj10KFwiLi9Cb2R5XCIpLG89dChcIi4uLy4uL21hdGgvTWF0cml4XCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuc2V0U2l6ZT1mdW5jdGlvbih0KXt0aGlzLnNpemU9dCx0aGlzLnNldE1vbWVudHNPZkluZXJ0aWEoKX0sZS5wcm90b3R5cGUuc2V0TW9tZW50c09mSW5lcnRpYT1mdW5jdGlvbigpe3ZhciB0PXRoaXMubWFzcyxpPXRoaXMuc2l6ZVswXSxlPXRoaXMuc2l6ZVsxXTt0aGlzLmluZXJ0aWE9bmV3IG8oW1t0KmUqZS8xMiwwLDBdLFswLHQqaSppLzEyLDBdLFswLDAsdCooaSppK2UqZSkvMTJdXSksdGhpcy5pbnZlcnNlSW5lcnRpYT1uZXcgbyhbWzEyLyh0KmUqZSksMCwwXSxbMCwxMi8odCppKmkpLDBdLFswLDAsMTIvKHQqKGkqaStlKmUpKV1dKX0saS5leHBvcnRzPWV9LHtcIi4uLy4uL21hdGgvTWF0cml4XCI6MzcsXCIuL0JvZHlcIjo0OX1dLDUzOltmdW5jdGlvbih0LGkpe2kuZXhwb3J0cz17Qm9keTp0KFwiLi9Cb2R5XCIpLENpcmNsZTp0KFwiLi9DaXJjbGVcIiksUGFydGljbGU6dChcIi4vUGFydGljbGVcIiksUmVjdGFuZ2xlOnQoXCIuL1JlY3RhbmdsZVwiKX19LHtcIi4vQm9keVwiOjQ5LFwiLi9DaXJjbGVcIjo1MCxcIi4vUGFydGljbGVcIjo1MSxcIi4vUmVjdGFuZ2xlXCI6NTJ9XSw1NDpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3RoaXMub3B0aW9ucz1PYmplY3QuY3JlYXRlKGUuREVGQVVMVF9PUFRJT05TKSx0JiZ0aGlzLnNldE9wdGlvbnModCksdGhpcy5ub3JtYWw9bmV3IG8sdGhpcy5wRGlmZj1uZXcgbyx0aGlzLnZEaWZmPW5ldyBvLHRoaXMuaW1wdWxzZTE9bmV3IG8sdGhpcy5pbXB1bHNlMj1uZXcgbyxuLmNhbGwodGhpcyl9dmFyIG49dChcIi4vQ29uc3RyYWludFwiKSxvPXQoXCIuLi8uLi9tYXRoL1ZlY3RvclwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUuREVGQVVMVF9PUFRJT05TPXtyZXN0aXR1dGlvbjouNSxkcmlmdDouNSxzbG9wOjB9LGUucHJvdG90eXBlLnNldE9wdGlvbnM9ZnVuY3Rpb24odCl7Zm9yKHZhciBpIGluIHQpdGhpcy5vcHRpb25zW2ldPXRbaV19LGUucHJvdG90eXBlLmFwcGx5Q29uc3RyYWludD1mdW5jdGlvbih0LGksZSl7aWYodm9pZCAwIT09aSlmb3IodmFyIG49aS52ZWxvY2l0eSxvPWkucG9zaXRpb24scz1pLmludmVyc2VNYXNzLHI9aS5yYWRpdXMsYT10aGlzLm9wdGlvbnMsaD1hLmRyaWZ0LGM9LWEuc2xvcCxwPWEucmVzdGl0dXRpb24sdT10aGlzLm5vcm1hbCxsPXRoaXMucERpZmYsZj10aGlzLnZEaWZmLGQ9dGhpcy5pbXB1bHNlMSxfPXRoaXMuaW1wdWxzZTIseT0wO3k8dC5sZW5ndGg7eSsrKXt2YXIgZz10W3ldO2lmKGchPT1pKXt2YXIgdj1nLnZlbG9jaXR5LG09Zy5wb3NpdGlvbixPPWcuaW52ZXJzZU1hc3MsUz1nLnJhZGl1cztsLnNldChtLnN1YihvKSksZi5zZXQodi5zdWIobikpO3ZhciBUPWwubm9ybSgpLHc9VC0ocitTKSxiPTEvKHMrTyksRT0wO2lmKDA+dyl7aWYodS5zZXQobC5ub3JtYWxpemUoKSksdGhpcy5fZXZlbnRPdXRwdXQpe3ZhciBJPXt0YXJnZXQ6Zyxzb3VyY2U6aSxvdmVybGFwOncsbm9ybWFsOnV9O3RoaXMuX2V2ZW50T3V0cHV0LmVtaXQoXCJwcmVDb2xsaXNpb25cIixJKSx0aGlzLl9ldmVudE91dHB1dC5lbWl0KFwiY29sbGlzaW9uXCIsSSl9dmFyIHg9Yz49dz8oKDErcCkqdS5kb3QoZikraC9lKih3LWMpKS8oRStlL2IpOigxK3ApKnUuZG90KGYpLyhFK2UvYik7dS5tdWx0KGUqeCkucHV0KGQpLGQubXVsdCgtMSkucHV0KF8pLGkuYXBwbHlJbXB1bHNlKGQpLGcuYXBwbHlJbXB1bHNlKF8pLHRoaXMuX2V2ZW50T3V0cHV0JiZ0aGlzLl9ldmVudE91dHB1dC5lbWl0KFwicG9zdENvbGxpc2lvblwiLEkpfX19fSxpLmV4cG9ydHM9ZX0se1wiLi4vLi4vbWF0aC9WZWN0b3JcIjo0MSxcIi4vQ29uc3RyYWludFwiOjU1fV0sNTU6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSgpe3RoaXMub3B0aW9ucz10aGlzLm9wdGlvbnN8fHt9LHRoaXMuX2V2ZW50T3V0cHV0PW5ldyBuLG4uc2V0T3V0cHV0SGFuZGxlcih0aGlzLHRoaXMuX2V2ZW50T3V0cHV0KX12YXIgbj10KFwiLi4vLi4vY29yZS9FdmVudEhhbmRsZXJcIik7ZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbih0KXt0aGlzLl9ldmVudE91dHB1dC5lbWl0KFwiY2hhbmdlXCIsdCl9LGUucHJvdG90eXBlLmFwcGx5Q29uc3RyYWludD1mdW5jdGlvbigpe30sZS5wcm90b3R5cGUuZ2V0RW5lcmd5PWZ1bmN0aW9uKCl7cmV0dXJuIDB9LGkuZXhwb3J0cz1lfSx7XCIuLi8uLi9jb3JlL0V2ZW50SGFuZGxlclwiOjd9XSw1NjpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3RoaXMub3B0aW9ucz1PYmplY3QuY3JlYXRlKGUuREVGQVVMVF9PUFRJT05TKSx0JiZ0aGlzLnNldE9wdGlvbnModCksdGhpcy5KPW5ldyBvLHRoaXMuaW1wdWxzZT1uZXcgbyxuLmNhbGwodGhpcyl9dmFyIG49dChcIi4vQ29uc3RyYWludFwiKSxvPXQoXCIuLi8uLi9tYXRoL1ZlY3RvclwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lO3ZhciBzPTFlLTcscj1NYXRoLlBJO2UuREVGQVVMVF9PUFRJT05TPXtlcXVhdGlvbjpmdW5jdGlvbigpe3JldHVybiAwfSxwbGFuZTpmdW5jdGlvbih0LGksZSl7cmV0dXJuIGV9LHBlcmlvZDowLGRhbXBpbmdSYXRpbzowfSxlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe2Zvcih2YXIgaSBpbiB0KXRoaXMub3B0aW9uc1tpXT10W2ldfSxlLnByb3RvdHlwZS5hcHBseUNvbnN0cmFpbnQ9ZnVuY3Rpb24odCxpLGUpe2Zvcih2YXIgbj10aGlzLm9wdGlvbnMsbz10aGlzLmltcHVsc2UsYT10aGlzLkosaD1uLmVxdWF0aW9uLGM9bi5wbGFuZSxwPW4uZGFtcGluZ1JhdGlvLHU9bi5wZXJpb2QsbD0wO2w8dC5sZW5ndGg7bCsrKXt2YXIgZixkLF89dFtsXSx5PV8udmVsb2NpdHksZz1fLnBvc2l0aW9uLHY9Xy5tYXNzO2lmKDA9PT11KWY9MCxkPTE7ZWxzZXt2YXIgbT00KnYqcipwL3UsTz00KnYqcipyLyh1KnUpO2Y9MS8obStlKk8pLGQ9ZSpPLyhtK2UqTyl9dmFyIFM9Zy54LFQ9Zy55LHc9Zy56LGI9aChTLFQsdyksRT0oaChTK3MsZyxnKS1iKS9zLEk9KGgoUyxUK3MsZyktYikvcyx4PShoKFMsVCxnK3MpLWIpL3MsTT1jKFMsVCx3KSx6PShjKFMrcyxULHcpLU0pL3MsQz0oYyhTLFQrcyx3KS1NKS9zLFA9KGMoUyxULHcrcyktTSkvczthLnNldFhZWihFK3osSStDLHgrUCk7dmFyIEY9ZC9lKihiK00pLEQ9LShhLmRvdCh5KStGKS8oZitlKmEubm9ybVNxdWFyZWQoKS92KTtvLnNldChhLm11bHQoZSpEKSksXy5hcHBseUltcHVsc2Uobyl9fSxpLmV4cG9ydHM9ZX0se1wiLi4vLi4vbWF0aC9WZWN0b3JcIjo0MSxcIi4vQ29uc3RyYWludFwiOjU1fV0sNTc6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLm9wdGlvbnM9T2JqZWN0LmNyZWF0ZSh0aGlzLmNvbnN0cnVjdG9yLkRFRkFVTFRfT1BUSU9OUyksdCYmdGhpcy5zZXRPcHRpb25zKHQpLHRoaXMuaW1wdWxzZT1uZXcgbyx0aGlzLm5vcm1hbD1uZXcgbyx0aGlzLmRpZmZQPW5ldyBvLHRoaXMuZGlmZlY9bmV3IG8sbi5jYWxsKHRoaXMpfXZhciBuPXQoXCIuL0NvbnN0cmFpbnRcIiksbz10KFwiLi4vLi4vbWF0aC9WZWN0b3JcIik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLkRFRkFVTFRfT1BUSU9OUz17YW5jaG9yOm51bGwsbGVuZ3RoOjAsbWluTGVuZ3RoOjAscGVyaW9kOjAsZGFtcGluZ1JhdGlvOjB9O3ZhciBzPU1hdGguUEk7ZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbih0KXt0LmFuY2hvciYmKHQuYW5jaG9yLnBvc2l0aW9uIGluc3RhbmNlb2YgbyYmKHRoaXMub3B0aW9ucy5hbmNob3I9dC5hbmNob3IucG9zaXRpb24pLHQuYW5jaG9yIGluc3RhbmNlb2YgbyYmKHRoaXMub3B0aW9ucy5hbmNob3I9dC5hbmNob3IpLHQuYW5jaG9yIGluc3RhbmNlb2YgQXJyYXkmJih0aGlzLm9wdGlvbnMuYW5jaG9yPW5ldyBvKHQuYW5jaG9yKSkpLHZvaWQgMCE9PXQubGVuZ3RoJiYodGhpcy5vcHRpb25zLmxlbmd0aD10Lmxlbmd0aCksdm9pZCAwIT09dC5kYW1waW5nUmF0aW8mJih0aGlzLm9wdGlvbnMuZGFtcGluZ1JhdGlvPXQuZGFtcGluZ1JhdGlvKSx2b2lkIDAhPT10LnBlcmlvZCYmKHRoaXMub3B0aW9ucy5wZXJpb2Q9dC5wZXJpb2QpLHZvaWQgMCE9PXQubWluTGVuZ3RoJiYodGhpcy5vcHRpb25zLm1pbkxlbmd0aD10Lm1pbkxlbmd0aCl9LGUucHJvdG90eXBlLnNldEFuY2hvcj1mdW5jdGlvbih0KXt0aGlzLm9wdGlvbnMuYW5jaG9yfHwodGhpcy5vcHRpb25zLmFuY2hvcj1uZXcgbyksdGhpcy5vcHRpb25zLmFuY2hvci5zZXQodCl9LGUucHJvdG90eXBlLmFwcGx5Q29uc3RyYWludD1mdW5jdGlvbih0LGksZSl7dmFyIG4sbyxyPXRoaXMubm9ybWFsLGE9dGhpcy5kaWZmUCxoPXRoaXMuZGlmZlYsYz10aGlzLmltcHVsc2UscD10aGlzLm9wdGlvbnMsdT1wLmRhbXBpbmdSYXRpbyxsPXAucGVyaW9kLGY9cC5taW5MZW5ndGg7aWYoaSl7dmFyIGQ9aS52ZWxvY2l0eTtuPWkucG9zaXRpb24sbz1pLmludmVyc2VNYXNzfWVsc2Ugbj10aGlzLm9wdGlvbnMuYW5jaG9yLG89MDtmb3IodmFyIF89dGhpcy5vcHRpb25zLmxlbmd0aCx5PTA7eTx0Lmxlbmd0aDt5Kyspe3ZhciBnPXRbeV0sdj1nLnZlbG9jaXR5LG09Zy5wb3NpdGlvbixPPWcuaW52ZXJzZU1hc3M7YS5zZXQobS5zdWIobikpLHIuc2V0KGEubm9ybWFsaXplKCkpO3ZhciBTPWEubm9ybSgpLV87aWYoTWF0aC5hYnMoUyk8ZilyZXR1cm47aC5zZXQoaT92LnN1YihkKTp2KTt2YXIgVCx3LGI9MS8oTytvKTtpZigwPT09bClUPTAsdz0xO2Vsc2V7dmFyIEU9NCpiKnMqdS9sLEk9NCpiKnMqcy8obCpsKTtUPTEvKEUrZSpJKSx3PWUqSS8oRStlKkkpfXZhciB4PXcvZSpTLE09LShyLmRvdChoKSt4KS8oVCtlL2IpO2Muc2V0KHIubXVsdChlKk0pKSxnLmFwcGx5SW1wdWxzZShjKSxpJiZpLmFwcGx5SW1wdWxzZShjLm11bHQoLTEpKX19LGkuZXhwb3J0cz1lfSx7XCIuLi8uLi9tYXRoL1ZlY3RvclwiOjQxLFwiLi9Db25zdHJhaW50XCI6NTV9XSw1ODpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe24uY2FsbCh0aGlzKSx0aGlzLm9wdGlvbnM9T2JqZWN0LmNyZWF0ZSh0aGlzLmNvbnN0cnVjdG9yLkRFRkFVTFRfT1BUSU9OUyksdCYmdGhpcy5zZXRPcHRpb25zKHQpLHRoaXMucERpZmY9bmV3IG8sdGhpcy52RGlmZj1uZXcgbyx0aGlzLmltcHVsc2UxPW5ldyBvLHRoaXMuaW1wdWxzZTI9bmV3IG99dmFyIG49dChcIi4vQ29uc3RyYWludFwiKSxvPXQoXCIuLi8uLi9tYXRoL1ZlY3RvclwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUuREVGQVVMVF9PUFRJT05TPXtwZXJpb2Q6MzAwLGRhbXBpbmdSYXRpbzouMSxsZW5ndGg6MCxhbmNob3I6dm9pZCAwfTt2YXIgcz1NYXRoLlBJO2UucHJvdG90eXBlLnNldE9wdGlvbnM9ZnVuY3Rpb24odCl7dm9pZCAwIT09dC5hbmNob3ImJih0LmFuY2hvciBpbnN0YW5jZW9mIG8mJih0aGlzLm9wdGlvbnMuYW5jaG9yPXQuYW5jaG9yKSx0LmFuY2hvci5wb3NpdGlvbiBpbnN0YW5jZW9mIG8mJih0aGlzLm9wdGlvbnMuYW5jaG9yPXQuYW5jaG9yLnBvc2l0aW9uKSx0LmFuY2hvciBpbnN0YW5jZW9mIEFycmF5JiYodGhpcy5vcHRpb25zLmFuY2hvcj1uZXcgbyh0LmFuY2hvcikpKSx2b2lkIDAhPT10Lmxlbmd0aCYmKHRoaXMub3B0aW9ucy5sZW5ndGg9dC5sZW5ndGgpLHZvaWQgMCE9PXQuZGFtcGluZ1JhdGlvJiYodGhpcy5vcHRpb25zLmRhbXBpbmdSYXRpbz10LmRhbXBpbmdSYXRpbyksdm9pZCAwIT09dC5wZXJpb2QmJih0aGlzLm9wdGlvbnMucGVyaW9kPXQucGVyaW9kKSxuLnByb3RvdHlwZS5zZXRPcHRpb25zLmNhbGwodGhpcyx0KX0sZS5wcm90b3R5cGUuZ2V0RW5lcmd5PWZ1bmN0aW9uKHQsaSl7Zm9yKHZhciBlPXRoaXMub3B0aW9ucyxuPWUubGVuZ3RoLG89ZS5hbmNob3J8fGkucG9zaXRpb24scj1NYXRoLnBvdygyKnMvZS5wZXJpb2QsMiksYT0wLGg9MDtoPHQubGVuZ3RoO2grKyl7dmFyIGM9dFtoXSxwPW8uc3ViKGMucG9zaXRpb24pLm5vcm0oKS1uO2ErPS41KnIqcCpwfXJldHVybiBhfSxlLnByb3RvdHlwZS5hcHBseUNvbnN0cmFpbnQ9ZnVuY3Rpb24odCxpLGUpe2Zvcih2YXIgbj10aGlzLm9wdGlvbnMsbz10aGlzLnBEaWZmLHI9dGhpcy52RGlmZixhPXRoaXMuaW1wdWxzZTEsaD10aGlzLmltcHVsc2UyLGM9bi5sZW5ndGgscD1uLmFuY2hvcnx8aS5wb3NpdGlvbix1PW4ucGVyaW9kLGw9bi5kYW1waW5nUmF0aW8sZj0wO2Y8dC5sZW5ndGg7ZisrKXt2YXIgZD10W2ZdLF89ZC5wb3NpdGlvbix5PWQudmVsb2NpdHksZz1kLm1hc3Msdj1kLmludmVyc2VNYXNzO1xuby5zZXQoXy5zdWIocCkpO3ZhciBtLE89by5ub3JtKCktYztpZihpKXt2YXIgUz1pLmludmVyc2VNYXNzLFQ9aS52ZWxvY2l0eTtyLnNldCh5LnN1YihUKSksbT0xLyh2K1MpfWVsc2Ugci5zZXQoeSksbT1nO3ZhciB3LGI7aWYoMD09PXRoaXMub3B0aW9ucy5wZXJpb2Qpdz0wLGI9MTtlbHNle3ZhciBFPTQqbSpzKnMvKHUqdSksST00Km0qcypsL3U7Yj1lKkUvKEkrZSpFKSx3PTEvKEkrZSpFKX12YXIgeD1iL2UqTztvLm5vcm1hbGl6ZSgteCkuc3ViKHIpLm11bHQoZS8odytlL20pKS5wdXQoYSksZC5hcHBseUltcHVsc2UoYSksaSYmKGEubXVsdCgtMSkucHV0KGgpLGkuYXBwbHlJbXB1bHNlKGgpKX19LGkuZXhwb3J0cz1lfSx7XCIuLi8uLi9tYXRoL1ZlY3RvclwiOjQxLFwiLi9Db25zdHJhaW50XCI6NTV9XSw1OTpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3RoaXMub3B0aW9ucz1PYmplY3QuY3JlYXRlKGUuREVGQVVMVF9PUFRJT05TKSx0JiZ0aGlzLnNldE9wdGlvbnModCksdGhpcy5KPW5ldyBvLHRoaXMuaW1wdWxzZT1uZXcgbyxuLmNhbGwodGhpcyl9dmFyIG49dChcIi4vQ29uc3RyYWludFwiKSxvPXQoXCIuLi8uLi9tYXRoL1ZlY3RvclwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUuREVGQVVMVF9PUFRJT05TPXtlcXVhdGlvbjp2b2lkIDAscGVyaW9kOjAsZGFtcGluZ1JhdGlvOjB9O3ZhciBzPTFlLTcscj1NYXRoLlBJO2UucHJvdG90eXBlLnNldE9wdGlvbnM9ZnVuY3Rpb24odCl7Zm9yKHZhciBpIGluIHQpdGhpcy5vcHRpb25zW2ldPXRbaV19LGUucHJvdG90eXBlLmFwcGx5Q29uc3RyYWludD1mdW5jdGlvbih0LGksZSl7Zm9yKHZhciBuPXRoaXMuaW1wdWxzZSxvPXRoaXMuSixhPXRoaXMub3B0aW9ucyxoPWEuZXF1YXRpb24sYz1hLmRhbXBpbmdSYXRpbyxwPWEucGVyaW9kLHU9MDt1PHQubGVuZ3RoO3UrKyl7dmFyIGwsZixkPXRbdV0sXz1kLnZlbG9jaXR5LHk9ZC5wb3NpdGlvbixnPWQubWFzcztpZigwPT09cClsPTAsZj0xO2Vsc2V7dmFyIHY9NCpnKnIqYy9wLG09NCpnKnIqci8ocCpwKTtsPTEvKHYrZSptKSxmPWUqbS8oditlKm0pfXZhciBPPXkueCxTPXkueSxUPXkueix3PWgoTyxTLFQpLGI9KGgoTytzLHkseSktdykvcyxFPShoKE8sUytzLHkpLXcpL3MsST0oaChPLFMseStzKS13KS9zO28uc2V0WFlaKGIsRSxJKTt2YXIgeD1mL2UqdyxNPS0oby5kb3QoXykreCkvKGwrZSpvLm5vcm1TcXVhcmVkKCkvZyk7bi5zZXQoby5tdWx0KGUqTSkpLGQuYXBwbHlJbXB1bHNlKG4pfX0saS5leHBvcnRzPWV9LHtcIi4uLy4uL21hdGgvVmVjdG9yXCI6NDEsXCIuL0NvbnN0cmFpbnRcIjo1NX1dLDYwOltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dGhpcy5vcHRpb25zPU9iamVjdC5jcmVhdGUoZS5ERUZBVUxUX09QVElPTlMpLHQmJnRoaXMuc2V0T3B0aW9ucyh0KSx0aGlzLmRpZmY9bmV3IGgsdGhpcy5pbXB1bHNlPW5ldyBoLGEuY2FsbCh0aGlzKX1mdW5jdGlvbiBuKHQsaSl7cmV0dXJuIGkuZG90KHQpfWZ1bmN0aW9uIG8odCl7dmFyIGk9dGhpcy5vcHRpb25zLm5vcm1hbCxlPXRoaXMub3B0aW9ucy5kaXN0YW5jZTtyZXR1cm4gdC5kb3QoaSkrZX1mdW5jdGlvbiBzKHQsaSxuKXt2YXIgbz10LnBvc2l0aW9uLHM9dC52ZWxvY2l0eSxyPXQubWFzcyxhPXRoaXMub3B0aW9ucy5ub3JtYWwsaD10aGlzLm9wdGlvbnMub25Db250YWN0LGM9dGhpcy5vcHRpb25zLnJlc3RpdHV0aW9uLHA9dGhpcy5pbXB1bHNlLHU9dGhpcy5vcHRpb25zLmRyaWZ0LGw9LXRoaXMub3B0aW9ucy5zbG9wLGY9MDtpZih0aGlzLl9ldmVudE91dHB1dCl7dmFyIGQ9e3BhcnRpY2xlOnQsd2FsbDp0aGlzLG92ZXJsYXA6aSxub3JtYWw6YX07dGhpcy5fZXZlbnRPdXRwdXQuZW1pdChcInByZUNvbGxpc2lvblwiLGQpLHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoXCJjb2xsaXNpb25cIixkKX1zd2l0Y2goaCl7Y2FzZSBlLk9OX0NPTlRBQ1QuUkVGTEVDVDp2YXIgXz1sPmk/LSgoMStjKSphLmRvdChzKSt1L24qKGktbCkpLyhyKm4rZik6LSgoMStjKSphLmRvdChzKSkvKHIqbitmKTtwLnNldChhLm11bHQobipfKSksdC5hcHBseUltcHVsc2UocCksdC5zZXRQb3NpdGlvbihvLmFkZChhLm11bHQoLWkpKSl9dGhpcy5fZXZlbnRPdXRwdXQmJnRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoXCJwb3N0Q29sbGlzaW9uXCIsZCl9ZnVuY3Rpb24gcih0LGkpe3ZhciBuPXRoaXMub3B0aW9ucy5vbkNvbnRhY3Qsbz10LnBvc2l0aW9uLHM9dGhpcy5vcHRpb25zLm5vcm1hbDtuPT09ZS5PTl9DT05UQUNULlJFRkxFQ1QmJnQuc2V0UG9zaXRpb24oby5hZGQocy5tdWx0KC1pKSkpfXZhciBhPXQoXCIuL0NvbnN0cmFpbnRcIiksaD10KFwiLi4vLi4vbWF0aC9WZWN0b3JcIik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShhLnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLk9OX0NPTlRBQ1Q9e1JFRkxFQ1Q6MCxTSUxFTlQ6MX0sZS5ERUZBVUxUX09QVElPTlM9e3Jlc3RpdHV0aW9uOi41LGRyaWZ0Oi41LHNsb3A6MCxub3JtYWw6WzEsMCwwXSxkaXN0YW5jZTowLG9uQ29udGFjdDplLk9OX0NPTlRBQ1QuUkVGTEVDVH0sZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbih0KXt2b2lkIDAhPT10Lm5vcm1hbCYmKHQubm9ybWFsIGluc3RhbmNlb2YgaCYmKHRoaXMub3B0aW9ucy5ub3JtYWw9dC5ub3JtYWwuY2xvbmUoKSksdC5ub3JtYWwgaW5zdGFuY2VvZiBBcnJheSYmKHRoaXMub3B0aW9ucy5ub3JtYWw9bmV3IGgodC5ub3JtYWwpKSksdm9pZCAwIT09dC5yZXN0aXR1dGlvbiYmKHRoaXMub3B0aW9ucy5yZXN0aXR1dGlvbj10LnJlc3RpdHV0aW9uKSx2b2lkIDAhPT10LmRyaWZ0JiYodGhpcy5vcHRpb25zLmRyaWZ0PXQuZHJpZnQpLHZvaWQgMCE9PXQuc2xvcCYmKHRoaXMub3B0aW9ucy5zbG9wPXQuc2xvcCksdm9pZCAwIT09dC5kaXN0YW5jZSYmKHRoaXMub3B0aW9ucy5kaXN0YW5jZT10LmRpc3RhbmNlKSx2b2lkIDAhPT10Lm9uQ29udGFjdCYmKHRoaXMub3B0aW9ucy5vbkNvbnRhY3Q9dC5vbkNvbnRhY3QpfSxlLnByb3RvdHlwZS5hcHBseUNvbnN0cmFpbnQ9ZnVuY3Rpb24odCxpLGUpe2Zvcih2YXIgYT10aGlzLm9wdGlvbnMubm9ybWFsLGg9MDtoPHQubGVuZ3RoO2grKyl7dmFyIGM9dFtoXSxwPWMucG9zaXRpb24sdT1jLnZlbG9jaXR5LGw9Yy5yYWRpdXN8fDAsZj1vLmNhbGwodGhpcyxwLmFkZChhLm11bHQoLWwpKSksZD1uLmNhbGwodGhpcyxhLHUpOzA+PWYmJigwPmQ/cy5jYWxsKHRoaXMsYyxmLGUpOnIuY2FsbCh0aGlzLGMsZixlKSl9fSxpLmV4cG9ydHM9ZX0se1wiLi4vLi4vbWF0aC9WZWN0b3JcIjo0MSxcIi4vQ29uc3RyYWludFwiOjU1fV0sNjE6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLm9wdGlvbnM9T2JqZWN0LmNyZWF0ZShlLkRFRkFVTFRfT1BUSU9OUyksdCYmdGhpcy5zZXRPcHRpb25zKHQpLG8uY2FsbCh0aGlzLHQuc2lkZXN8fHRoaXMub3B0aW9ucy5zaWRlcyksci5jYWxsKHRoaXMpfWZ1bmN0aW9uIG4odCxpLG4pe3ZhciBvLHM9ZS5TSURFUztzd2l0Y2gocGFyc2VJbnQodCkpe2Nhc2Ugcy5MRUZUOm89aVswXSpuWzBdO2JyZWFrO2Nhc2Ugcy5UT1A6bz1pWzFdKm5bMV07YnJlYWs7Y2FzZSBzLkZST05UOm89aVsyXSpuWzJdO2JyZWFrO2Nhc2Ugcy5SSUdIVDpvPWlbMF0qKDEtblswXSk7YnJlYWs7Y2FzZSBzLkJPVFRPTTpvPWlbMV0qKDEtblsxXSk7YnJlYWs7Y2FzZSBzLkJBQ0s6bz1pWzJdKigxLW5bMl0pfXJldHVybiBvfWZ1bmN0aW9uIG8odCl7dGhpcy5jb21wb25lbnRzPXt9O2Zvcih2YXIgaT10aGlzLmNvbXBvbmVudHMsZT0wO2U8dC5sZW5ndGg7ZSsrKXt2YXIgbz10W2VdO2lbZV09bmV3IGEoe25vcm1hbDpjW29dLmNsb25lKCksZGlzdGFuY2U6bihvLHRoaXMub3B0aW9ucy5zaXplLHRoaXMub3B0aW9ucy5vcmlnaW4pfSl9fWZ1bmN0aW9uIHModCl7dGhpcy5mb3JFYWNoKGZ1bmN0aW9uKGkpe2kuc2V0T3B0aW9ucyh0KX0pO2Zvcih2YXIgaSBpbiB0KXRoaXMub3B0aW9uc1tpXT10W2ldfXZhciByPXQoXCIuL0NvbnN0cmFpbnRcIiksYT10KFwiLi9XYWxsXCIpLGg9dChcIi4uLy4uL21hdGgvVmVjdG9yXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoci5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5PTl9DT05UQUNUPWEuT05fQ09OVEFDVCxlLlNJREVTPXtMRUZUOjAsUklHSFQ6MSxUT1A6MixCT1RUT006MyxGUk9OVDo0LEJBQ0s6NSxUV09fRElNRU5TSU9OQUw6WzAsMSwyLDNdLFRIUkVFX0RJTUVOU0lPTkFMOlswLDEsMiwzLDQsNV19LGUuREVGQVVMVF9PUFRJT05TPXtzaWRlczplLlNJREVTLlRXT19ESU1FTlNJT05BTCxzaXplOlt3aW5kb3cuaW5uZXJXaWR0aCx3aW5kb3cuaW5uZXJIZWlnaHQsMF0sb3JpZ2luOlsuNSwuNSwuNV0sZHJpZnQ6LjUsc2xvcDowLHJlc3RpdHV0aW9uOi41LG9uQ29udGFjdDplLk9OX0NPTlRBQ1QuUkVGTEVDVH07dmFyIGM9ezA6bmV3IGgoMSwwLDApLDE6bmV3IGgoLTEsMCwwKSwyOm5ldyBoKDAsMSwwKSwzOm5ldyBoKDAsLTEsMCksNDpuZXcgaCgwLDAsMSksNTpuZXcgaCgwLDAsLTEpfTtlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3ZhciBpPSExO3ZvaWQgMCE9PXQucmVzdGl0dXRpb24mJnMuY2FsbCh0aGlzLHtyZXN0aXR1dGlvbjp0LnJlc3RpdHV0aW9ufSksdm9pZCAwIT09dC5kcmlmdCYmcy5jYWxsKHRoaXMse2RyaWZ0OnQuZHJpZnR9KSx2b2lkIDAhPT10LnNsb3AmJnMuY2FsbCh0aGlzLHtzbG9wOnQuc2xvcH0pLHZvaWQgMCE9PXQub25Db250YWN0JiZzLmNhbGwodGhpcyx7b25Db250YWN0OnQub25Db250YWN0fSksdm9pZCAwIT09dC5zaXplJiYoaT0hMCksdm9pZCAwIT09dC5zaWRlcyYmKHRoaXMub3B0aW9ucy5zaWRlcz10LnNpZGVzKSx2b2lkIDAhPT10Lm9yaWdpbiYmKGk9ITApLGkmJnRoaXMuc2V0U2l6ZSh0LnNpemUsdC5vcmlnaW4pfSxlLnByb3RvdHlwZS5zZXRTaXplPWZ1bmN0aW9uKHQsaSl7aT1pfHx0aGlzLm9wdGlvbnMub3JpZ2luLGkubGVuZ3RoPDMmJihpWzJdPS41KSx0aGlzLmZvckVhY2goZnVuY3Rpb24oZSxvKXt2YXIgcz1uKG8sdCxpKTtlLnNldE9wdGlvbnMoe2Rpc3RhbmNlOnN9KX0pLHRoaXMub3B0aW9ucy5zaXplPXQsdGhpcy5vcHRpb25zLm9yaWdpbj1pfSxlLnByb3RvdHlwZS5hcHBseUNvbnN0cmFpbnQ9ZnVuY3Rpb24odCxpLGUpe3RoaXMuZm9yRWFjaChmdW5jdGlvbihuKXtuLmFwcGx5Q29uc3RyYWludCh0LGksZSl9KX0sZS5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbih0KXt2YXIgaT10aGlzLm9wdGlvbnMuc2lkZXM7Zm9yKHZhciBlIGluIHRoaXMuc2lkZXMpdChpW2VdLGUpfSxlLnByb3RvdHlwZS5yb3RhdGVaPWZ1bmN0aW9uKHQpe3RoaXMuZm9yRWFjaChmdW5jdGlvbihpKXt2YXIgZT1pLm9wdGlvbnMubm9ybWFsO2Uucm90YXRlWih0KS5wdXQoZSl9KX0sZS5wcm90b3R5cGUucm90YXRlWD1mdW5jdGlvbih0KXt0aGlzLmZvckVhY2goZnVuY3Rpb24oaSl7dmFyIGU9aS5vcHRpb25zLm5vcm1hbDtlLnJvdGF0ZVgodCkucHV0KGUpfSl9LGUucHJvdG90eXBlLnJvdGF0ZVk9ZnVuY3Rpb24odCl7dGhpcy5mb3JFYWNoKGZ1bmN0aW9uKGkpe3ZhciBlPWkub3B0aW9ucy5ub3JtYWw7ZS5yb3RhdGVZKHQpLnB1dChlKX0pfSxpLmV4cG9ydHM9ZX0se1wiLi4vLi4vbWF0aC9WZWN0b3JcIjo0MSxcIi4vQ29uc3RyYWludFwiOjU1LFwiLi9XYWxsXCI6NjB9XSw2MjpbZnVuY3Rpb24odCxpKXtpLmV4cG9ydHM9e0NvbGxpc2lvbjp0KFwiLi9Db2xsaXNpb25cIiksQ29uc3RyYWludDp0KFwiLi9Db25zdHJhaW50XCIpLEN1cnZlOnQoXCIuL0N1cnZlXCIpLERpc3RhbmNlOnQoXCIuL0Rpc3RhbmNlXCIpLFNuYXA6dChcIi4vU25hcFwiKSxTdXJmYWNlOnQoXCIuL1N1cmZhY2VcIiksV2FsbDp0KFwiLi9XYWxsXCIpLFdhbGxzOnQoXCIuL1dhbGxzXCIpfX0se1wiLi9Db2xsaXNpb25cIjo1NCxcIi4vQ29uc3RyYWludFwiOjU1LFwiLi9DdXJ2ZVwiOjU2LFwiLi9EaXN0YW5jZVwiOjU3LFwiLi9TbmFwXCI6NTgsXCIuL1N1cmZhY2VcIjo1OSxcIi4vV2FsbFwiOjYwLFwiLi9XYWxsc1wiOjYxfV0sNjM6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLm9wdGlvbnM9T2JqZWN0LmNyZWF0ZSh0aGlzLmNvbnN0cnVjdG9yLkRFRkFVTFRfT1BUSU9OUyksdCYmdGhpcy5zZXRPcHRpb25zKHQpLG4uY2FsbCh0aGlzKX12YXIgbj10KFwiLi9Gb3JjZVwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUuRk9SQ0VfRlVOQ1RJT05TPXtMSU5FQVI6ZnVuY3Rpb24odCl7cmV0dXJuIHR9LFFVQURSQVRJQzpmdW5jdGlvbih0KXtyZXR1cm4gdC5tdWx0KHQubm9ybSgpKX19LGUuREVGQVVMVF9PUFRJT05TPXtzdHJlbmd0aDouMDEsZm9yY2VGdW5jdGlvbjplLkZPUkNFX0ZVTkNUSU9OUy5MSU5FQVJ9LGUucHJvdG90eXBlLmFwcGx5Rm9yY2U9ZnVuY3Rpb24odCl7dmFyIGksZSxuPXRoaXMub3B0aW9ucy5zdHJlbmd0aCxvPXRoaXMub3B0aW9ucy5mb3JjZUZ1bmN0aW9uLHM9dGhpcy5mb3JjZTtmb3IoaT0wO2k8dC5sZW5ndGg7aSsrKWU9dFtpXSxvKGUudmVsb2NpdHkpLm11bHQoLW4pLnB1dChzKSxlLmFwcGx5Rm9yY2Uocyl9LGUucHJvdG90eXBlLnNldE9wdGlvbnM9ZnVuY3Rpb24odCl7Zm9yKHZhciBpIGluIHQpdGhpcy5vcHRpb25zW2ldPXRbaV19LGkuZXhwb3J0cz1lfSx7XCIuL0ZvcmNlXCI6NjR9XSw2NDpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3RoaXMuZm9yY2U9bmV3IG4odCksdGhpcy5fZXZlbnRPdXRwdXQ9bmV3IG8sby5zZXRPdXRwdXRIYW5kbGVyKHRoaXMsdGhpcy5fZXZlbnRPdXRwdXQpfXZhciBuPXQoXCIuLi8uLi9tYXRoL1ZlY3RvclwiKSxvPXQoXCIuLi8uLi9jb3JlL0V2ZW50SGFuZGxlclwiKTtlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3RoaXMuX2V2ZW50T3V0cHV0LmVtaXQoXCJjaGFuZ2VcIix0KX0sZS5wcm90b3R5cGUuYXBwbHlGb3JjZT1mdW5jdGlvbih0KXtmb3IodmFyIGk9dC5sZW5ndGg7aS0tOyl0W2ldLmFwcGx5Rm9yY2UodGhpcy5mb3JjZSl9LGUucHJvdG90eXBlLmdldEVuZXJneT1mdW5jdGlvbigpe3JldHVybiAwfSxpLmV4cG9ydHM9ZX0se1wiLi4vLi4vY29yZS9FdmVudEhhbmRsZXJcIjo3LFwiLi4vLi4vbWF0aC9WZWN0b3JcIjo0MX1dLDY1OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dGhpcy5vcHRpb25zPU9iamVjdC5jcmVhdGUoZS5ERUZBVUxUX09QVElPTlMpLHQmJnRoaXMuc2V0T3B0aW9ucyh0KSx0aGlzLmRpc3A9bmV3IG8sbi5jYWxsKHRoaXMpfXZhciBuPXQoXCIuL0ZvcmNlXCIpLG89dChcIi4uLy4uL21hdGgvVmVjdG9yXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5ERUNBWV9GVU5DVElPTlM9e0xJTkVBUjpmdW5jdGlvbih0LGkpe3JldHVybiBNYXRoLm1heCgxLTEvaSp0LDApfSxNT1JTRTpmdW5jdGlvbih0LGkpe3ZhciBlPTA9PT1pPzEwMDppLG49dCtlKigxLU1hdGgubG9nKDIpKTtyZXR1cm4gTWF0aC5tYXgoMS1NYXRoLnBvdygxLU1hdGguZXhwKG4vZS0xKSwyKSwwKX0sSU5WRVJTRTpmdW5jdGlvbih0LGkpe3JldHVybiAxLygxLWkrdCl9LEdSQVZJVFk6ZnVuY3Rpb24odCxpKXtyZXR1cm4gMS8oMS1pK3QqdCl9fSxlLkRFRkFVTFRfT1BUSU9OUz17c3RyZW5ndGg6MSxhbmNob3I6dm9pZCAwLHJhbmdlOlswLDEvMF0sY3V0b2ZmOjAsY2FwOjEvMCxkZWNheUZ1bmN0aW9uOmUuREVDQVlfRlVOQ1RJT05TLkdSQVZJVFl9LGUucHJvdG90eXBlLnNldE9wdGlvbnM9ZnVuY3Rpb24odCl7dm9pZCAwIT09dC5hbmNob3ImJih0LmFuY2hvci5wb3NpdGlvbiBpbnN0YW5jZW9mIG8mJih0aGlzLm9wdGlvbnMuYW5jaG9yPXQuYW5jaG9yLnBvc2l0aW9uKSx0LmFuY2hvciBpbnN0YW5jZW9mIEFycmF5JiYodGhpcy5vcHRpb25zLmFuY2hvcj1uZXcgbyh0LmFuY2hvcikpLGRlbGV0ZSB0LmFuY2hvcik7Zm9yKHZhciBpIGluIHQpdGhpcy5vcHRpb25zW2ldPXRbaV19LGUucHJvdG90eXBlLmFwcGx5Rm9yY2U9ZnVuY3Rpb24odCxpKXt2YXIgZT10aGlzLm9wdGlvbnMsbj10aGlzLmZvcmNlLG89dGhpcy5kaXNwLHM9ZS5zdHJlbmd0aCxyPWUuYW5jaG9yfHxpLnBvc2l0aW9uLGE9ZS5jYXAsaD1lLmN1dG9mZixjPWUucmFuZ2VbMF0scD1lLnJhbmdlWzFdLHU9ZS5kZWNheUZ1bmN0aW9uO2lmKDAhPT1zKWZvcih2YXIgbCxmLGQsXyx5PXQubGVuZ3RoO3ktLTspbD10W3ldLGwhPT1pJiYoZj1sLm1hc3MsZD1sLnBvc2l0aW9uLG8uc2V0KGQuc3ViKHIpKSxfPW8ubm9ybSgpLHA+XyYmXz5jJiYobi5zZXQoby5ub3JtYWxpemUocypmKnUoXyxoKSkuY2FwKGEpKSxsLmFwcGx5Rm9yY2UobikpKX0saS5leHBvcnRzPWV9LHtcIi4uLy4uL21hdGgvVmVjdG9yXCI6NDEsXCIuL0ZvcmNlXCI6NjR9XSw2NjpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe24uY2FsbCh0aGlzLHQpfXZhciBuPXQoXCIuL0RyYWdcIik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLkRFRkFVTFRfT1BUSU9OUz1uLkRFRkFVTFRfT1BUSU9OUyxlLkZPUkNFX0ZVTkNUSU9OUz1uLkZPUkNFX0ZVTkNUSU9OUyxlLkZPUkNFX0ZVTkNUSU9OUz17TElORUFSOmZ1bmN0aW9uKHQpe3JldHVybiB0fSxRVUFEUkFUSUM6ZnVuY3Rpb24odCl7cmV0dXJuIHQubXVsdCh0Lm5vcm0oKSl9fSxlLnByb3RvdHlwZS5hcHBseUZvcmNlPWZ1bmN0aW9uKHQpe3ZhciBpLGUsbj10aGlzLm9wdGlvbnMuc3RyZW5ndGgsbz10aGlzLm9wdGlvbnMuZm9yY2VGdW5jdGlvbixzPXRoaXMuZm9yY2U7Zm9yKGk9MDtpPHQubGVuZ3RoO2krKyllPXRbaV0sbyhlLmFuZ3VsYXJWZWxvY2l0eSkubXVsdCgtMTAwKm4pLnB1dChzKSxlLmFwcGx5VG9ycXVlKHMpfSxlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe2Zvcih2YXIgaSBpbiB0KXRoaXMub3B0aW9uc1tpXT10W2ldfSxpLmV4cG9ydHM9ZX0se1wiLi9EcmFnXCI6NjN9XSw2NzpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe2EuY2FsbCh0aGlzLHQpfWZ1bmN0aW9uIG4oKXt2YXIgdD10aGlzLm9wdGlvbnM7dC5zdGlmZm5lc3M9TWF0aC5wb3coMipjL3QucGVyaW9kLDIpfWZ1bmN0aW9uIG8oKXt2YXIgdD10aGlzLm9wdGlvbnM7dC5kYW1waW5nPTQqYyp0LmRhbXBpbmdSYXRpby90LnBlcmlvZH1mdW5jdGlvbiBzKCl7bi5jYWxsKHRoaXMpLG8uY2FsbCh0aGlzKX12YXIgcj10KFwiLi9Gb3JjZVwiKSxhPXQoXCIuL1NwcmluZ1wiKSxoPXQoXCIuLi8uLi9tYXRoL1F1YXRlcm5pb25cIik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShhLnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLkRFRkFVTFRfT1BUSU9OUz1hLkRFRkFVTFRfT1BUSU9OUyxlLkZPUkNFX0ZVTkNUSU9OUz1hLkZPUkNFX0ZVTkNUSU9OUzt2YXIgYz1NYXRoLlBJO2UucHJvdG90eXBlLnNldE9wdGlvbnM9ZnVuY3Rpb24odCl7dm9pZCAwIT09dC5hbmNob3ImJih0LmFuY2hvciBpbnN0YW5jZW9mIGgmJih0aGlzLm9wdGlvbnMuYW5jaG9yPXQuYW5jaG9yKSx0LmFuY2hvciBpbnN0YW5jZW9mIEFycmF5JiYodGhpcy5vcHRpb25zLmFuY2hvcj1uZXcgaCh0LmFuY2hvcikpKSx2b2lkIDAhPT10LnBlcmlvZCYmKHRoaXMub3B0aW9ucy5wZXJpb2Q9dC5wZXJpb2QpLHZvaWQgMCE9PXQuZGFtcGluZ1JhdGlvJiYodGhpcy5vcHRpb25zLmRhbXBpbmdSYXRpbz10LmRhbXBpbmdSYXRpbyksdm9pZCAwIT09dC5sZW5ndGgmJih0aGlzLm9wdGlvbnMubGVuZ3RoPXQubGVuZ3RoKSx2b2lkIDAhPT10LmZvcmNlRnVuY3Rpb24mJih0aGlzLm9wdGlvbnMuZm9yY2VGdW5jdGlvbj10LmZvcmNlRnVuY3Rpb24pLHZvaWQgMCE9PXQubWF4TGVuZ3RoJiYodGhpcy5vcHRpb25zLm1heExlbmd0aD10Lm1heExlbmd0aCkscy5jYWxsKHRoaXMpLHIucHJvdG90eXBlLnNldE9wdGlvbnMuY2FsbCh0aGlzLHQpfSxlLnByb3RvdHlwZS5hcHBseUZvcmNlPWZ1bmN0aW9uKHQpe3ZhciBpLGUsbixvLHM9dGhpcy5mb3JjZSxyPXRoaXMub3B0aW9ucyxhPXRoaXMuZGlzcCxoPXIuc3RpZmZuZXNzLGM9ci5kYW1waW5nLHA9ci5sZW5ndGgsdT1yLmFuY2hvcixsPXIuZm9yY2VGdW5jdGlvbixmPXIubWF4TGVuZ3RoO2ZvcihpPTA7aTx0Lmxlbmd0aDtpKyspe2lmKGU9dFtpXSxhLnNldCh1LnN1YihlLm9yaWVudGF0aW9uKSksbj1hLm5vcm0oKS1wLDA9PT1uKXJldHVybjtvPWUubWFzcyxoKj1vLGMqPW8scy5zZXQoYS5ub3JtYWxpemUoaCpsKG4sZikpKSxjJiZzLmFkZChlLmFuZ3VsYXJWZWxvY2l0eS5tdWx0KC1jKSkucHV0KHMpLGUuYXBwbHlUb3JxdWUocyl9fSxlLnByb3RvdHlwZS5nZXRFbmVyZ3k9ZnVuY3Rpb24odCl7Zm9yKHZhciBpPXRoaXMub3B0aW9ucyxlPWkubGVuZ3RoLG49aS5hbmNob3Isbz1pLnN0aWZmbmVzcyxzPTAscj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgYT10W3JdLGg9bi5zdWIoYS5vcmllbnRhdGlvbikubm9ybSgpLWU7cys9LjUqbypoKmh9cmV0dXJuIHN9LGkuZXhwb3J0cz1lfSx7XCIuLi8uLi9tYXRoL1F1YXRlcm5pb25cIjozOCxcIi4vRm9yY2VcIjo2NCxcIi4vU3ByaW5nXCI6Njh9XSw2ODpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3IuY2FsbCh0aGlzKSx0aGlzLm9wdGlvbnM9T2JqZWN0LmNyZWF0ZSh0aGlzLmNvbnN0cnVjdG9yLkRFRkFVTFRfT1BUSU9OUyksdCYmdGhpcy5zZXRPcHRpb25zKHQpLHRoaXMuZGlzcD1uZXcgYSgwLDAsMCkscy5jYWxsKHRoaXMpfWZ1bmN0aW9uIG4oKXt2YXIgdD10aGlzLm9wdGlvbnM7dC5zdGlmZm5lc3M9TWF0aC5wb3coMipoL3QucGVyaW9kLDIpfWZ1bmN0aW9uIG8oKXt2YXIgdD10aGlzLm9wdGlvbnM7dC5kYW1waW5nPTQqaCp0LmRhbXBpbmdSYXRpby90LnBlcmlvZH1mdW5jdGlvbiBzKCl7bi5jYWxsKHRoaXMpLG8uY2FsbCh0aGlzKX12YXIgcj10KFwiLi9Gb3JjZVwiKSxhPXQoXCIuLi8uLi9tYXRoL1ZlY3RvclwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHIucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lO3ZhciBoPU1hdGguUEksYz0xNTA7ZS5GT1JDRV9GVU5DVElPTlM9e0ZFTkU6ZnVuY3Rpb24odCxpKXt2YXIgZT0uOTkqaSxuPU1hdGgubWF4KE1hdGgubWluKHQsZSksLWUpO3JldHVybiBuLygxLW4qbi8oaSppKSl9LEhPT0s6ZnVuY3Rpb24odCl7cmV0dXJuIHR9fSxlLkRFRkFVTFRfT1BUSU9OUz17cGVyaW9kOjMwMCxkYW1waW5nUmF0aW86LjEsbGVuZ3RoOjAsbWF4TGVuZ3RoOjEvMCxhbmNob3I6dm9pZCAwLGZvcmNlRnVuY3Rpb246ZS5GT1JDRV9GVU5DVElPTlMuSE9PS30sZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbih0KXt2b2lkIDAhPT10LmFuY2hvciYmKHQuYW5jaG9yLnBvc2l0aW9uIGluc3RhbmNlb2YgYSYmKHRoaXMub3B0aW9ucy5hbmNob3I9dC5hbmNob3IucG9zaXRpb24pLHQuYW5jaG9yIGluc3RhbmNlb2YgYSYmKHRoaXMub3B0aW9ucy5hbmNob3I9dC5hbmNob3IpLHQuYW5jaG9yIGluc3RhbmNlb2YgQXJyYXkmJih0aGlzLm9wdGlvbnMuYW5jaG9yPW5ldyBhKHQuYW5jaG9yKSkpLHZvaWQgMCE9PXQucGVyaW9kJiYodC5wZXJpb2Q8YyYmKHQucGVyaW9kPWMsY29uc29sZS53YXJuKFwiVGhlIHBlcmlvZCBvZiBhIFNwcmluZ1RyYW5zaXRpb24gaXMgY2FwcGVkIGF0IFwiK2MrXCIgbXMuIFVzZSBhIFNuYXBUcmFuc2l0aW9uIGZvciBmYXN0ZXIgdHJhbnNpdGlvbnNcIikpLHRoaXMub3B0aW9ucy5wZXJpb2Q9dC5wZXJpb2QpLHZvaWQgMCE9PXQuZGFtcGluZ1JhdGlvJiYodGhpcy5vcHRpb25zLmRhbXBpbmdSYXRpbz10LmRhbXBpbmdSYXRpbyksdm9pZCAwIT09dC5sZW5ndGgmJih0aGlzLm9wdGlvbnMubGVuZ3RoPXQubGVuZ3RoKSx2b2lkIDAhPT10LmZvcmNlRnVuY3Rpb24mJih0aGlzLm9wdGlvbnMuZm9yY2VGdW5jdGlvbj10LmZvcmNlRnVuY3Rpb24pLHZvaWQgMCE9PXQubWF4TGVuZ3RoJiYodGhpcy5vcHRpb25zLm1heExlbmd0aD10Lm1heExlbmd0aCkscy5jYWxsKHRoaXMpLHIucHJvdG90eXBlLnNldE9wdGlvbnMuY2FsbCh0aGlzLHQpfSxlLnByb3RvdHlwZS5hcHBseUZvcmNlPWZ1bmN0aW9uKHQsaSl7dmFyIGUsbixvLHMscixhLGg9dGhpcy5mb3JjZSxjPXRoaXMuZGlzcCxwPXRoaXMub3B0aW9ucyx1PXAuc3RpZmZuZXNzLGw9cC5kYW1waW5nLGY9cC5sZW5ndGgsZD1wLm1heExlbmd0aCxfPXAuYW5jaG9yfHxpLnBvc2l0aW9uLHk9cC5mb3JjZUZ1bmN0aW9uO2ZvcihlPTA7ZTx0Lmxlbmd0aDtlKyspe2lmKG49dFtlXSxvPW4ucG9zaXRpb24scz1uLnZlbG9jaXR5LF8uc3ViKG8pLnB1dChjKSxyPWMubm9ybSgpLWYsMD09PXIpcmV0dXJuO2E9bi5tYXNzLHUqPWEsbCo9YSxjLm5vcm1hbGl6ZSh1KnkocixkKSkucHV0KGgpLGwmJihpP2guYWRkKHMuc3ViKGkudmVsb2NpdHkpLm11bHQoLWwpKS5wdXQoaCk6aC5hZGQocy5tdWx0KC1sKSkucHV0KGgpKSxuLmFwcGx5Rm9yY2UoaCksaSYmaS5hcHBseUZvcmNlKGgubXVsdCgtMSkpfX0sZS5wcm90b3R5cGUuZ2V0RW5lcmd5PWZ1bmN0aW9uKHQsaSl7Zm9yKHZhciBlPXRoaXMub3B0aW9ucyxuPWUubGVuZ3RoLG89aT9pLnBvc2l0aW9uOmUuYW5jaG9yLHM9ZS5zdGlmZm5lc3Mscj0wLGE9MDthPHQubGVuZ3RoO2ErKyl7dmFyIGg9dFthXSxjPW8uc3ViKGgucG9zaXRpb24pLm5vcm0oKS1uO3IrPS41KnMqYypjfXJldHVybiByfSxpLmV4cG9ydHM9ZX0se1wiLi4vLi4vbWF0aC9WZWN0b3JcIjo0MSxcIi4vRm9yY2VcIjo2NH1dLDY5OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7by5jYWxsKHRoaXMpLHRoaXMub3B0aW9ucz1PYmplY3QuY3JlYXRlKGUuREVGQVVMVF9PUFRJT05TKSx0JiZ0aGlzLnNldE9wdGlvbnModCksdGhpcy5ldmFsdWF0aW9uPW5ldyBzfWZ1bmN0aW9uIG4odCl7dmFyIGk9ZS5GSUVMRFM7c3dpdGNoKHQpe2Nhc2UgaS5DT05TVEFOVDp0aGlzLm9wdGlvbnMuZGlyZWN0aW9uP3RoaXMub3B0aW9ucy5kaXJlY3Rpb24gaW5zdGFuY2VvZiBBcnJheSYmKHRoaXMub3B0aW9ucy5kaXJlY3Rpb249bmV3IHModGhpcy5vcHRpb25zLmRpcmVjdGlvbikpOnRoaXMub3B0aW9ucy5kaXJlY3Rpb249bmV3IHMoMCwxLDApO2JyZWFrO2Nhc2UgaS5QT0lOVF9BVFRSQUNUT1I6dGhpcy5vcHRpb25zLnBvc2l0aW9uP3RoaXMub3B0aW9ucy5wb3NpdGlvbiBpbnN0YW5jZW9mIEFycmF5JiYodGhpcy5vcHRpb25zLnBvc2l0aW9uPW5ldyBzKHRoaXMub3B0aW9ucy5wb3NpdGlvbikpOnRoaXMub3B0aW9ucy5wb3NpdGlvbj1uZXcgcygwLDAsMCl9fXZhciBvPXQoXCIuL0ZvcmNlXCIpLHM9dChcIi4uLy4uL21hdGgvVmVjdG9yXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoby5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5GSUVMRFM9e0NPTlNUQU5UOmZ1bmN0aW9uKHQsaSl7aS5kaXJlY3Rpb24ucHV0KHRoaXMuZXZhbHVhdGlvbil9LExJTkVBUjpmdW5jdGlvbih0KXt0LnB1dCh0aGlzLmV2YWx1YXRpb24pfSxSQURJQUw6ZnVuY3Rpb24odCl7dC5tdWx0KC0xKS5wdXQodGhpcy5ldmFsdWF0aW9uKX0sUE9JTlRfQVRUUkFDVE9SOmZ1bmN0aW9uKHQsaSl7aS5wb3NpdGlvbi5zdWIodCkucHV0KHRoaXMuZXZhbHVhdGlvbil9fSxlLkRFRkFVTFRfT1BUSU9OUz17c3RyZW5ndGg6LjAxLGZpZWxkOmUuRklFTERTLkNPTlNUQU5UfSxlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3ZvaWQgMCE9PXQuc3RyZW5ndGgmJih0aGlzLm9wdGlvbnMuc3RyZW5ndGg9dC5zdHJlbmd0aCksdm9pZCAwIT09dC5maWVsZCYmKHRoaXMub3B0aW9ucy5maWVsZD10LmZpZWxkLG4uY2FsbCh0aGlzLHRoaXMub3B0aW9ucy5maWVsZCkpfSxlLnByb3RvdHlwZS5hcHBseUZvcmNlPWZ1bmN0aW9uKHQpe3ZhciBpLGUsbj10aGlzLmZvcmNlLG89dGhpcy5vcHRpb25zLnN0cmVuZ3RoLHM9dGhpcy5vcHRpb25zLmZpZWxkO2ZvcihpPTA7aTx0Lmxlbmd0aDtpKyspZT10W2ldLHMuY2FsbCh0aGlzLGUucG9zaXRpb24sdGhpcy5vcHRpb25zKSx0aGlzLmV2YWx1YXRpb24ubXVsdChlLm1hc3MqbykucHV0KG4pLGUuYXBwbHlGb3JjZShuKX0sZS5wcm90b3R5cGUuZ2V0RW5lcmd5PWZ1bmN0aW9uKHQpe3ZhciBpLG4sbz10aGlzLm9wdGlvbnMuZmllbGQscz1lLkZJRUxEUyxyPTA7c3dpdGNoKG8pe2Nhc2Ugcy5DT05TVEFOVDpyPXQubGVuZ3RoKnRoaXMub3B0aW9ucy5kaXJlY3Rpb24ubm9ybSgpO2JyZWFrO2Nhc2Ugcy5SQURJQUw6Zm9yKGk9MDtpPHQubGVuZ3RoO2krKyluPXRbaV0scis9bi5wb3NpdGlvbi5ub3JtKCk7YnJlYWs7Y2FzZSBzLlBPSU5UX0FUVFJBQ1RPUjpmb3IoaT0wO2k8dC5sZW5ndGg7aSsrKW49dFtpXSxyKz1uLnBvc2l0aW9uLnN1Yih0aGlzLm9wdGlvbnMucG9zaXRpb24pLm5vcm0oKX1yZXR1cm4gcio9dGhpcy5vcHRpb25zLnN0cmVuZ3RofSxpLmV4cG9ydHM9ZX0se1wiLi4vLi4vbWF0aC9WZWN0b3JcIjo0MSxcIi4vRm9yY2VcIjo2NH1dLDcwOltmdW5jdGlvbih0LGkpe2kuZXhwb3J0cz17RHJhZzp0KFwiLi9EcmFnXCIpLEZvcmNlOnQoXCIuL0ZvcmNlXCIpLFJlcHVsc2lvbjp0KFwiLi9SZXB1bHNpb25cIiksUm90YXRpb25hbERyYWc6dChcIi4vUm90YXRpb25hbERyYWdcIiksUm90YXRpb25hbFNwcmluZzp0KFwiLi9Sb3RhdGlvbmFsU3ByaW5nXCIpLFNwcmluZzp0KFwiLi9TcHJpbmdcIiksVmVjdG9yRmllbGQ6dChcIi4vVmVjdG9yRmllbGRcIil9fSx7XCIuL0RyYWdcIjo2MyxcIi4vRm9yY2VcIjo2NCxcIi4vUmVwdWxzaW9uXCI6NjUsXCIuL1JvdGF0aW9uYWxEcmFnXCI6NjYsXCIuL1JvdGF0aW9uYWxTcHJpbmdcIjo2NyxcIi4vU3ByaW5nXCI6NjgsXCIuL1ZlY3RvckZpZWxkXCI6Njl9XSw3MTpbZnVuY3Rpb24odCxpKXtpLmV4cG9ydHM9e1BoeXNpY3NFbmdpbmU6dChcIi4vUGh5c2ljc0VuZ2luZVwiKSxib2RpZXM6dChcIi4vYm9kaWVzXCIpLGNvbnN0cmFpbnRzOnQoXCIuL2NvbnN0cmFpbnRzXCIpLGZvcmNlczp0KFwiLi9mb3JjZXNcIiksaW50ZWdyYXRvcnM6dChcIi4vaW50ZWdyYXRvcnNcIil9fSx7XCIuL1BoeXNpY3NFbmdpbmVcIjo0OCxcIi4vYm9kaWVzXCI6NTMsXCIuL2NvbnN0cmFpbnRzXCI6NjIsXCIuL2ZvcmNlc1wiOjcwLFwiLi9pbnRlZ3JhdG9yc1wiOjczfV0sNzI6W2Z1bmN0aW9uKHQsaSl7dmFyIGU9e307ZS5pbnRlZ3JhdGVWZWxvY2l0eT1mdW5jdGlvbih0LGkpe3ZhciBlPXQudmVsb2NpdHksbj10LmludmVyc2VNYXNzLG89dC5mb3JjZTtvLmlzWmVybygpfHwoZS5hZGQoby5tdWx0KGkqbikpLnB1dChlKSxvLmNsZWFyKCkpfSxlLmludGVncmF0ZVBvc2l0aW9uPWZ1bmN0aW9uKHQsaSl7dmFyIGU9dC5wb3NpdGlvbixuPXQudmVsb2NpdHk7ZS5hZGQobi5tdWx0KGkpKS5wdXQoZSl9LGUuaW50ZWdyYXRlQW5ndWxhck1vbWVudHVtPWZ1bmN0aW9uKHQsaSl7dmFyIGU9dC5hbmd1bGFyTW9tZW50dW0sbj10LnRvcnF1ZTtuLmlzWmVybygpfHwoZS5hZGQobi5tdWx0KGkpKS5wdXQoZSksbi5jbGVhcigpKX0sZS5pbnRlZ3JhdGVPcmllbnRhdGlvbj1mdW5jdGlvbih0LGkpe3ZhciBlPXQub3JpZW50YXRpb24sbj10LmFuZ3VsYXJWZWxvY2l0eTtuLmlzWmVybygpfHxlLmFkZChlLm11bHRpcGx5KG4pLnNjYWxhck11bHRpcGx5KC41KmkpKS5wdXQoZSl9LGkuZXhwb3J0cz1lfSx7fV0sNzM6W2Z1bmN0aW9uKHQsaSl7aS5leHBvcnRzPXtTeW1wbGVjdGljRXVsZXI6dChcIi4vU3ltcGxlY3RpY0V1bGVyXCIpfX0se1wiLi9TeW1wbGVjdGljRXVsZXJcIjo3Mn1dLDc0OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dCYmdC5jYW52YXNTaXplJiYodGhpcy5fY2FudmFzU2l6ZT10LmNhbnZhc1NpemUpLG4uYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuX2NhbnZhc1NpemV8fCh0aGlzLl9jYW52YXNTaXplPXRoaXMuZ2V0U2l6ZSgpKSx0aGlzLl9iYWNrQnVmZmVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksdGhpcy5fY2FudmFzU2l6ZSYmKHRoaXMuX2JhY2tCdWZmZXIud2lkdGg9dGhpcy5fY2FudmFzU2l6ZVswXSx0aGlzLl9iYWNrQnVmZmVyLmhlaWdodD10aGlzLl9jYW52YXNTaXplWzFdKSx0aGlzLl9jb250ZXh0SWQ9dm9pZCAwfXZhciBuPXQoXCIuLi9jb3JlL1N1cmZhY2VcIik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5lbGVtZW50VHlwZT1cImNhbnZhc1wiLGUucHJvdG90eXBlLmVsZW1lbnRDbGFzcz1cImZhbW91cy1zdXJmYWNlXCIsZS5wcm90b3R5cGUuc2V0Q29udGVudD1mdW5jdGlvbigpe30sZS5wcm90b3R5cGUuZGVwbG95PWZ1bmN0aW9uKHQpe3RoaXMuX2NhbnZhc1NpemUmJih0LndpZHRoPXRoaXMuX2NhbnZhc1NpemVbMF0sdC5oZWlnaHQ9dGhpcy5fY2FudmFzU2l6ZVsxXSksXCIyZFwiPT09dGhpcy5fY29udGV4dElkJiYodC5nZXRDb250ZXh0KHRoaXMuX2NvbnRleHRJZCkuZHJhd0ltYWdlKHRoaXMuX2JhY2tCdWZmZXIsMCwwKSx0aGlzLl9iYWNrQnVmZmVyLndpZHRoPTAsdGhpcy5fYmFja0J1ZmZlci5oZWlnaHQ9MCl9LGUucHJvdG90eXBlLnJlY2FsbD1mdW5jdGlvbih0KXt0aGlzLmdldFNpemUoKTt0aGlzLl9iYWNrQnVmZmVyLndpZHRoPXQud2lkdGgsdGhpcy5fYmFja0J1ZmZlci5oZWlnaHQ9dC5oZWlnaHQsXCIyZFwiPT09dGhpcy5fY29udGV4dElkJiYodGhpcy5fYmFja0J1ZmZlci5nZXRDb250ZXh0KHRoaXMuX2NvbnRleHRJZCkuZHJhd0ltYWdlKHQsMCwwKSx0LndpZHRoPTAsdC5oZWlnaHQ9MCl9LGUucHJvdG90eXBlLmdldENvbnRleHQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2NvbnRleHRJZD10LHRoaXMuX2N1cnJlbnRUYXJnZXQ/dGhpcy5fY3VycmVudFRhcmdldC5nZXRDb250ZXh0KHQpOnRoaXMuX2JhY2tCdWZmZXIuZ2V0Q29udGV4dCh0KX0sZS5wcm90b3R5cGUuc2V0U2l6ZT1mdW5jdGlvbih0LGkpe24ucHJvdG90eXBlLnNldFNpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpLGkmJih0aGlzLl9jYW52YXNTaXplPVtpWzBdLGlbMV1dKSx0aGlzLl9jdXJyZW50VGFyZ2V0JiYodGhpcy5fY3VycmVudFRhcmdldC53aWR0aD10aGlzLl9jYW52YXNTaXplWzBdLHRoaXMuX2N1cnJlbnRUYXJnZXQuaGVpZ2h0PXRoaXMuX2NhbnZhc1NpemVbMV0pfSxpLmV4cG9ydHM9ZX0se1wiLi4vY29yZS9TdXJmYWNlXCI6MTR9XSw3NTpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe24uY2FsbCh0aGlzLHQpLHRoaXMuX2NvbnRhaW5lcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuX2NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiZmFtb3VzLWdyb3VwXCIpLHRoaXMuX2NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiZmFtb3VzLWNvbnRhaW5lci1ncm91cFwiKSx0aGlzLl9zaG91bGRSZWNhbGN1bGF0ZVNpemU9ITEsdGhpcy5jb250ZXh0PW5ldyBvKHRoaXMuX2NvbnRhaW5lciksdGhpcy5zZXRDb250ZW50KHRoaXMuX2NvbnRhaW5lcil9dmFyIG49dChcIi4uL2NvcmUvU3VyZmFjZVwiKSxvPXQoXCIuLi9jb3JlL0NvbnRleHRcIik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5lbGVtZW50VHlwZT1cImRpdlwiLGUucHJvdG90eXBlLmVsZW1lbnRDbGFzcz1cImZhbW91cy1zdXJmYWNlXCIsZS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGV4dC5hZGQuYXBwbHkodGhpcy5jb250ZXh0LGFyZ3VtZW50cyl9LGUucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaXplRGlydHkmJih0aGlzLl9zaG91bGRSZWNhbGN1bGF0ZVNpemU9ITApLG4ucHJvdG90eXBlLnJlbmRlci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGUucHJvdG90eXBlLmRlcGxveT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaG91bGRSZWNhbGN1bGF0ZVNpemU9ITAsbi5wcm90b3R5cGUuZGVwbG95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZS5wcm90b3R5cGUuY29tbWl0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fc2l6ZT9bdGhpcy5fc2l6ZVswXSx0aGlzLl9zaXplWzFdXTpudWxsLGk9bi5wcm90b3R5cGUuY29tbWl0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4odGhpcy5fc2hvdWxkUmVjYWxjdWxhdGVTaXplfHx0JiYodGhpcy5fc2l6ZVswXSE9PXRbMF18fHRoaXMuX3NpemVbMV0hPT10WzFdKSkmJih0aGlzLmNvbnRleHQuc2V0U2l6ZSgpLHRoaXMuX3Nob3VsZFJlY2FsY3VsYXRlU2l6ZT0hMSksdGhpcy5jb250ZXh0LnVwZGF0ZSgpLGl9LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL0NvbnRleHRcIjoxLFwiLi4vY29yZS9TdXJmYWNlXCI6MTR9XSw3NjpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3QmJih0aGlzLl9tZXRob2Q9dC5tZXRob2R8fFwiXCIpLG4uYXBwbHkodGhpcyxhcmd1bWVudHMpfXZhciBuPXQoXCIuL0NvbnRhaW5lclN1cmZhY2VcIik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5lbGVtZW50VHlwZT1cImZvcm1cIixlLnByb3RvdHlwZS5kZXBsb3k9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX21ldGhvZCYmKHQubWV0aG9kPXRoaXMuX21ldGhvZCksbi5wcm90b3R5cGUuZGVwbG95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0saS5leHBvcnRzPWV9LHtcIi4vQ29udGFpbmVyU3VyZmFjZVwiOjc1fV0sNzc6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSgpe3RoaXMuX2ltYWdlVXJsPXZvaWQgMCxuLmFwcGx5KHRoaXMsYXJndW1lbnRzKX12YXIgbj10KFwiLi4vY29yZS9TdXJmYWNlXCIpLG89W10scz1bXSxyPVtdLGE9ITA7ZS5lbmFibGVDYWNoZT1mdW5jdGlvbigpe2E9ITB9LGUuZGlzYWJsZUNhY2hlPWZ1bmN0aW9uKCl7YT0hMX0sZS5jbGVhckNhY2hlPWZ1bmN0aW9uKCl7bz1bXSxzPVtdLHI9W119LGUuZ2V0Q2FjaGU9ZnVuY3Rpb24oKXtyZXR1cm57dXJsQ2FjaGU6byxjb3VudENhY2hlOnMsbm9kZUNhY2hlOnN9fSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLmVsZW1lbnRUeXBlPVwiaW1nXCIsZS5wcm90b3R5cGUuZWxlbWVudENsYXNzPVwiZmFtb3VzLXN1cmZhY2VcIixlLnByb3RvdHlwZS5zZXRDb250ZW50PWZ1bmN0aW9uKHQpe3ZhciBpPW8uaW5kZXhPZih0aGlzLl9pbWFnZVVybCk7LTEhPT1pJiYoMT09PXNbaV0/KG8uc3BsaWNlKGksMSkscy5zcGxpY2UoaSwxKSxyLnNwbGljZShpLDEpKTpzW2ldLS0pLGk9by5pbmRleE9mKHQpLC0xPT09aT8oby5wdXNoKHQpLHMucHVzaCgxKSk6c1tpXSsrLHRoaXMuX2ltYWdlVXJsPXQsdGhpcy5fY29udGVudERpcnR5PSEwfSxlLnByb3RvdHlwZS5kZXBsb3k9ZnVuY3Rpb24odCl7dmFyIGk9by5pbmRleE9mKHRoaXMuX2ltYWdlVXJsKTtpZih2b2lkIDA9PT1yW2ldJiZhKXt2YXIgZT1uZXcgSW1hZ2U7ZS5zcmM9dGhpcy5faW1hZ2VVcmx8fFwiXCIscltpXT1lfXQuc3JjPXRoaXMuX2ltYWdlVXJsfHxcIlwifSxlLnByb3RvdHlwZS5yZWNhbGw9ZnVuY3Rpb24odCl7dC5zcmM9XCJcIn0saS5leHBvcnRzPWV9LHtcIi4uL2NvcmUvU3VyZmFjZVwiOjE0fV0sNzg6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLl9wbGFjZWhvbGRlcj10LnBsYWNlaG9sZGVyfHxcIlwiLHRoaXMuX3ZhbHVlPXQudmFsdWV8fFwiXCIsdGhpcy5fdHlwZT10LnR5cGV8fFwidGV4dFwiLHRoaXMuX25hbWU9dC5uYW1lfHxcIlwiLG4uYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMub24oXCJjbGlja1wiLHRoaXMuZm9jdXMuYmluZCh0aGlzKSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGZ1bmN0aW9uKHQpe3QudGFyZ2V0IT09dGhpcy5fY3VycmVudFRhcmdldCYmdGhpcy5ibHVyKCl9LmJpbmQodGhpcykpfXZhciBuPXQoXCIuLi9jb3JlL1N1cmZhY2VcIik7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5lbGVtZW50VHlwZT1cImlucHV0XCIsZS5wcm90b3R5cGUuZWxlbWVudENsYXNzPVwiZmFtb3VzLXN1cmZhY2VcIixlLnByb3RvdHlwZS5zZXRQbGFjZWhvbGRlcj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fcGxhY2Vob2xkZXI9dCx0aGlzLl9jb250ZW50RGlydHk9ITAsdGhpc30sZS5wcm90b3R5cGUuZm9jdXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudFRhcmdldCYmdGhpcy5fY3VycmVudFRhcmdldC5mb2N1cygpLHRoaXN9LGUucHJvdG90eXBlLmJsdXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudFRhcmdldCYmdGhpcy5fY3VycmVudFRhcmdldC5ibHVyKCksdGhpc30sZS5wcm90b3R5cGUuc2V0VmFsdWU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3ZhbHVlPXQsdGhpcy5fY29udGVudERpcnR5PSEwLHRoaXN9LGUucHJvdG90eXBlLnNldFR5cGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3R5cGU9dCx0aGlzLl9jb250ZW50RGlydHk9ITAsdGhpc30sZS5wcm90b3R5cGUuZ2V0VmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudFRhcmdldD90aGlzLl9jdXJyZW50VGFyZ2V0LnZhbHVlOnRoaXMuX3ZhbHVlfSxlLnByb3RvdHlwZS5zZXROYW1lPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9uYW1lPXQsdGhpcy5fY29udGVudERpcnR5PSEwLHRoaXN9LGUucHJvdG90eXBlLmdldE5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbmFtZX0sZS5wcm90b3R5cGUuZGVwbG95PWZ1bmN0aW9uKHQpe1wiXCIhPT10aGlzLl9wbGFjZWhvbGRlciYmKHQucGxhY2Vob2xkZXI9dGhpcy5fcGxhY2Vob2xkZXIpLHQudmFsdWU9dGhpcy5fdmFsdWUsdC50eXBlPXRoaXMuX3R5cGUsdC5uYW1lPXRoaXMuX25hbWV9LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL1N1cmZhY2VcIjoxNH1dLDc5OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7bi5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5fdHlwZT1cInN1Ym1pdFwiLHQmJnQub25DbGljayYmdGhpcy5zZXRPbkNsaWNrKHQub25DbGljayl9dmFyIG49dChcIi4vSW5wdXRTdXJmYWNlXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuc2V0T25DbGljaz1mdW5jdGlvbih0KXt0aGlzLm9uQ2xpY2s9dH0sZS5wcm90b3R5cGUuZGVwbG95PWZ1bmN0aW9uKHQpe3RoaXMub25jbGljayYmKHQub25DbGljaz10aGlzLm9uQ2xpY2spLG4ucHJvdG90eXBlLmRlcGxveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGkuZXhwb3J0cz1lfSx7XCIuL0lucHV0U3VyZmFjZVwiOjc4fV0sODA6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLl9wbGFjZWhvbGRlcj10LnBsYWNlaG9sZGVyfHxcIlwiLHRoaXMuX3ZhbHVlPXQudmFsdWV8fFwiXCIsdGhpcy5fbmFtZT10Lm5hbWV8fFwiXCIsdGhpcy5fd3JhcD10LndyYXB8fFwiXCIsdGhpcy5fY29scz10LmNvbHN8fFwiXCIsdGhpcy5fcm93cz10LnJvd3N8fFwiXCIsbi5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5vbihcImNsaWNrXCIsdGhpcy5mb2N1cy5iaW5kKHRoaXMpKX12YXIgbj10KFwiLi4vY29yZS9TdXJmYWNlXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuZWxlbWVudFR5cGU9XCJ0ZXh0YXJlYVwiLGUucHJvdG90eXBlLmVsZW1lbnRDbGFzcz1cImZhbW91cy1zdXJmYWNlXCIsZS5wcm90b3R5cGUuc2V0UGxhY2Vob2xkZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3BsYWNlaG9sZGVyPXQsdGhpcy5fY29udGVudERpcnR5PSEwLHRoaXN9LGUucHJvdG90eXBlLmZvY3VzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2N1cnJlbnRUYXJnZXQmJnRoaXMuX2N1cnJlbnRUYXJnZXQuZm9jdXMoKSx0aGlzfSxlLnByb3RvdHlwZS5ibHVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2N1cnJlbnRUYXJnZXQmJnRoaXMuX2N1cnJlbnRUYXJnZXQuYmx1cigpLHRoaXN9LGUucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl92YWx1ZT10LHRoaXMuX2NvbnRlbnREaXJ0eT0hMCx0aGlzfSxlLnByb3RvdHlwZS5nZXRWYWx1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50VGFyZ2V0P3RoaXMuX2N1cnJlbnRUYXJnZXQudmFsdWU6dGhpcy5fdmFsdWV9LGUucHJvdG90eXBlLnNldE5hbWU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX25hbWU9dCx0aGlzLl9jb250ZW50RGlydHk9ITAsdGhpc30sZS5wcm90b3R5cGUuZ2V0TmFtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9uYW1lfSxlLnByb3RvdHlwZS5zZXRXcmFwPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl93cmFwPXQsdGhpcy5fY29udGVudERpcnR5PSEwLHRoaXN9LGUucHJvdG90eXBlLnNldENvbHVtbnM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2NvbHM9dCx0aGlzLl9jb250ZW50RGlydHk9ITAsdGhpc30sZS5wcm90b3R5cGUuc2V0Um93cz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fcm93cz10LHRoaXMuX2NvbnRlbnREaXJ0eT0hMCx0aGlzfSxlLnByb3RvdHlwZS5kZXBsb3k9ZnVuY3Rpb24odCl7XCJcIiE9PXRoaXMuX3BsYWNlaG9sZGVyJiYodC5wbGFjZWhvbGRlcj10aGlzLl9wbGFjZWhvbGRlciksXCJcIiE9PXRoaXMuX3ZhbHVlJiYodC52YWx1ZT10aGlzLl92YWx1ZSksXCJcIiE9PXRoaXMuX25hbWUmJih0Lm5hbWU9dGhpcy5fbmFtZSksXCJcIiE9PXRoaXMuX3dyYXAmJih0LndyYXA9dGhpcy5fd3JhcCksXCJcIiE9PXRoaXMuX2NvbHMmJih0LmNvbHM9dGhpcy5fY29scyksXCJcIiE9PXRoaXMuX3Jvd3MmJih0LnJvd3M9dGhpcy5fcm93cyl9LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL1N1cmZhY2VcIjoxNH1dLDgxOltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7bi5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5fdmlkZW9Vcmw9dm9pZCAwLHRoaXMub3B0aW9ucz1PYmplY3QuY3JlYXRlKGUuREVGQVVMVF9PUFRJT05TKSx0JiZ0aGlzLnNldE9wdGlvbnModCl9dmFyIG49dChcIi4uL2NvcmUvU3VyZmFjZVwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUuREVGQVVMVF9PUFRJT05TPXthdXRvcGxheTohMX0sZS5wcm90b3R5cGUuZWxlbWVudFR5cGU9XCJ2aWRlb1wiLGUucHJvdG90eXBlLmVsZW1lbnRDbGFzcz1cImZhbW91cy1zdXJmYWNlXCIsZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbih0KXt0LnNpemUmJnRoaXMuc2V0U2l6ZSh0LnNpemUpLHQuY2xhc3NlcyYmdGhpcy5zZXRDbGFzc2VzKHQuY2xhc3NlcyksdC5wcm9wZXJ0aWVzJiZ0aGlzLnNldFByb3BlcnRpZXModC5wcm9wZXJ0aWVzKSx0LmF1dG9wbGF5JiYodGhpcy5vcHRpb25zLmF1dG9wbGF5PXQuYXV0b3BsYXkpLHQuc3JjJiYodGhpcy5fdmlkZW9Vcmw9dC5zcmMsdGhpcy5fY29udGVudERpcnR5PSEwKX0sZS5wcm90b3R5cGUuc2V0Q29udGVudD1mdW5jdGlvbih0KXt0aGlzLl92aWRlb1VybD10LHRoaXMuX2NvbnRlbnREaXJ0eT0hMH0sZS5wcm90b3R5cGUuZGVwbG95PWZ1bmN0aW9uKHQpe3Quc3JjPXRoaXMuX3ZpZGVvVXJsLHQuYXV0b3BsYXk9dGhpcy5vcHRpb25zLmF1dG9wbGF5fSxlLnByb3RvdHlwZS5yZWNhbGw9ZnVuY3Rpb24odCl7dC5zcmM9XCJcIn0saS5leHBvcnRzPWV9LHtcIi4uL2NvcmUvU3VyZmFjZVwiOjE0fV0sODI6W2Z1bmN0aW9uKHQsaSl7aS5leHBvcnRzPXtDYW52YXNTdXJmYWNlOnQoXCIuL0NhbnZhc1N1cmZhY2VcIiksQ29udGFpbmVyU3VyZmFjZTp0KFwiLi9Db250YWluZXJTdXJmYWNlXCIpLEZvcm1Db250YWluZXJTdXJmYWNlOnQoXCIuL0Zvcm1Db250YWluZXJTdXJmYWNlXCIpLEltYWdlU3VyZmFjZTp0KFwiLi9JbWFnZVN1cmZhY2VcIiksSW5wdXRTdXJmYWNlOnQoXCIuL0lucHV0U3VyZmFjZVwiKSxTdWJtaXRJbnB1dFN1cmZhY2U6dChcIi4vU3VibWl0SW5wdXRTdXJmYWNlXCIpLFRleHRhcmVhU3VyZmFjZTp0KFwiLi9UZXh0YXJlYVN1cmZhY2VcIiksVmlkZW9TdXJmYWNlOnQoXCIuL1ZpZGVvU3VyZmFjZVwiKX19LHtcIi4vQ2FudmFzU3VyZmFjZVwiOjc0LFwiLi9Db250YWluZXJTdXJmYWNlXCI6NzUsXCIuL0Zvcm1Db250YWluZXJTdXJmYWNlXCI6NzYsXCIuL0ltYWdlU3VyZmFjZVwiOjc3LFwiLi9JbnB1dFN1cmZhY2VcIjo3OCxcIi4vU3VibWl0SW5wdXRTdXJmYWNlXCI6NzksXCIuL1RleHRhcmVhU3VyZmFjZVwiOjgwLFwiLi9WaWRlb1N1cmZhY2VcIjo4MX1dLDgzOltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dGhpcy5fbWFwPXR8fG51bGwsdGhpcy5fY2FjaGVkT3V0cHV0PW51bGwsdGhpcy5fY2FjaGVkSW5wdXQ9TnVtYmVyLk5hTn1lLmNyZWF0ZT1mdW5jdGlvbih0KXt2YXIgaT1uZXcgZSh0KTtyZXR1cm4gaS5nZXQuYmluZChpKX0sZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0IT09dGhpcy5fY2FjaGVkSW5wdXQmJih0aGlzLl9jYWNoZWRJbnB1dD10LHRoaXMuX2NhY2hlZE91dHB1dD10aGlzLl9tYXAodCkpLHRoaXMuX2NhY2hlZE91dHB1dH0saS5leHBvcnRzPWV9LHt9XSw4NDpbZnVuY3Rpb24odCxpKXt2YXIgZT17aW5RdWFkOmZ1bmN0aW9uKHQpe3JldHVybiB0KnR9LG91dFF1YWQ6ZnVuY3Rpb24odCl7cmV0dXJuLSh0LT0xKSp0KzF9LGluT3V0UXVhZDpmdW5jdGlvbih0KXtyZXR1cm4odC89LjUpPDE/LjUqdCp0Oi0uNSooLS10Kih0LTIpLTEpfSxpbkN1YmljOmZ1bmN0aW9uKHQpe3JldHVybiB0KnQqdH0sb3V0Q3ViaWM6ZnVuY3Rpb24odCl7cmV0dXJuLS10KnQqdCsxfSxpbk91dEN1YmljOmZ1bmN0aW9uKHQpe3JldHVybih0Lz0uNSk8MT8uNSp0KnQqdDouNSooKHQtPTIpKnQqdCsyKX0saW5RdWFydDpmdW5jdGlvbih0KXtyZXR1cm4gdCp0KnQqdH0sb3V0UXVhcnQ6ZnVuY3Rpb24odCl7cmV0dXJuLSgtLXQqdCp0KnQtMSl9LGluT3V0UXVhcnQ6ZnVuY3Rpb24odCl7cmV0dXJuKHQvPS41KTwxPy41KnQqdCp0KnQ6LS41KigodC09MikqdCp0KnQtMil9LGluUXVpbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQqdCp0KnQqdH0sb3V0UXVpbnQ6ZnVuY3Rpb24odCl7cmV0dXJuLS10KnQqdCp0KnQrMX0saW5PdXRRdWludDpmdW5jdGlvbih0KXtyZXR1cm4odC89LjUpPDE/LjUqdCp0KnQqdCp0Oi41KigodC09MikqdCp0KnQqdCsyKX0saW5TaW5lOmZ1bmN0aW9uKHQpe3JldHVybi0xKk1hdGguY29zKHQqKE1hdGguUEkvMikpKzF9LG91dFNpbmU6ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGguc2luKHQqKE1hdGguUEkvMikpfSxpbk91dFNpbmU6ZnVuY3Rpb24odCl7cmV0dXJuLS41KihNYXRoLmNvcyhNYXRoLlBJKnQpLTEpfSxpbkV4cG86ZnVuY3Rpb24odCl7cmV0dXJuIDA9PT10PzA6TWF0aC5wb3coMiwxMCoodC0xKSl9LG91dEV4cG86ZnVuY3Rpb24odCl7cmV0dXJuIDE9PT10PzE6LU1hdGgucG93KDIsLTEwKnQpKzF9LGluT3V0RXhwbzpmdW5jdGlvbih0KXtyZXR1cm4gMD09PXQ/MDoxPT09dD8xOih0Lz0uNSk8MT8uNSpNYXRoLnBvdygyLDEwKih0LTEpKTouNSooLU1hdGgucG93KDIsLTEwKi0tdCkrMil9LGluQ2lyYzpmdW5jdGlvbih0KXtyZXR1cm4tKE1hdGguc3FydCgxLXQqdCktMSl9LG91dENpcmM6ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGguc3FydCgxLSAtLXQqdCl9LGluT3V0Q2lyYzpmdW5jdGlvbih0KXtyZXR1cm4odC89LjUpPDE/LS41KihNYXRoLnNxcnQoMS10KnQpLTEpOi41KihNYXRoLnNxcnQoMS0odC09MikqdCkrMSl9LGluRWxhc3RpYzpmdW5jdGlvbih0KXt2YXIgaT0xLjcwMTU4LGU9MCxuPTE7cmV0dXJuIDA9PT10PzA6MT09PXQ/MTooZXx8KGU9LjMpLGk9ZS8oMipNYXRoLlBJKSpNYXRoLmFzaW4oMS9uKSwtKG4qTWF0aC5wb3coMiwxMCoodC09MSkpKk1hdGguc2luKDIqKHQtaSkqTWF0aC5QSS9lKSkpfSxvdXRFbGFzdGljOmZ1bmN0aW9uKHQpe3ZhciBpPTEuNzAxNTgsZT0wLG49MTtyZXR1cm4gMD09PXQ/MDoxPT09dD8xOihlfHwoZT0uMyksaT1lLygyKk1hdGguUEkpKk1hdGguYXNpbigxL24pLG4qTWF0aC5wb3coMiwtMTAqdCkqTWF0aC5zaW4oMioodC1pKSpNYXRoLlBJL2UpKzEpfSxpbk91dEVsYXN0aWM6ZnVuY3Rpb24odCl7dmFyIGk9MS43MDE1OCxlPTAsbj0xO3JldHVybiAwPT09dD8wOjI9PT0odC89LjUpPzE6KGV8fChlPS4zKjEuNSksaT1lLygyKk1hdGguUEkpKk1hdGguYXNpbigxL24pLDE+dD8tLjUqbipNYXRoLnBvdygyLDEwKih0LT0xKSkqTWF0aC5zaW4oMioodC1pKSpNYXRoLlBJL2UpOm4qTWF0aC5wb3coMiwtMTAqKHQtPTEpKSpNYXRoLnNpbigyKih0LWkpKk1hdGguUEkvZSkqLjUrMSl9LGluQmFjazpmdW5jdGlvbih0LGkpe3JldHVybiB2b2lkIDA9PT1pJiYoaT0xLjcwMTU4KSx0KnQqKChpKzEpKnQtaSl9LG91dEJhY2s6ZnVuY3Rpb24odCxpKXtyZXR1cm4gdm9pZCAwPT09aSYmKGk9MS43MDE1OCksLS10KnQqKChpKzEpKnQraSkrMX0saW5PdXRCYWNrOmZ1bmN0aW9uKHQsaSl7cmV0dXJuIHZvaWQgMD09PWkmJihpPTEuNzAxNTgpLCh0Lz0uNSk8MT8uNSp0KnQqKCgoaSo9MS41MjUpKzEpKnQtaSk6LjUqKCh0LT0yKSp0KigoKGkqPTEuNTI1KSsxKSp0K2kpKzIpfSxpbkJvdW5jZTpmdW5jdGlvbih0KXtyZXR1cm4gMS1lLm91dEJvdW5jZSgxLXQpfSxvdXRCb3VuY2U6ZnVuY3Rpb24odCl7cmV0dXJuIDEvMi43NT50PzcuNTYyNSp0KnQ6Mi8yLjc1PnQ/Ny41NjI1Kih0LT0xLjUvMi43NSkqdCsuNzU6Mi41LzIuNzU+dD83LjU2MjUqKHQtPTIuMjUvMi43NSkqdCsuOTM3NTo3LjU2MjUqKHQtPTIuNjI1LzIuNzUpKnQrLjk4NDM3NX0saW5PdXRCb3VuY2U6ZnVuY3Rpb24odCl7cmV0dXJuLjU+dD8uNSplLmluQm91bmNlKDIqdCk6LjUqZS5vdXRCb3VuY2UoMip0LTEpKy41fX07aS5leHBvcnRzPWV9LHt9XSw4NTpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3RoaXMubWV0aG9kPXQsdGhpcy5faW5zdGFuY2VzPVtdLHRoaXMuc3RhdGU9W119dmFyIG49dChcIi4uL3V0aWxpdGllcy9VdGlsaXR5XCIpO2UuU1VQUE9SVFNfTVVMVElQTEU9ITAsZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDx0aGlzLl9pbnN0YW5jZXMubGVuZ3RoO3QrKyl0aGlzLnN0YXRlW3RdPXRoaXMuX2luc3RhbmNlc1t0XS5nZXQoKTtyZXR1cm4gdGhpcy5zdGF0ZX0sZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsaSxlKXtmb3IodmFyIG89bi5hZnRlcih0Lmxlbmd0aCxlKSxzPTA7czx0Lmxlbmd0aDtzKyspdGhpcy5faW5zdGFuY2VzW3NdfHwodGhpcy5faW5zdGFuY2VzW3NdPW5ldyB0aGlzLm1ldGhvZCksdGhpcy5faW5zdGFuY2VzW3NdLnNldCh0W3NdLGksbyl9LGUucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgaT0wO2k8dC5sZW5ndGg7aSsrKXRoaXMuX2luc3RhbmNlc1tpXXx8KHRoaXMuX2luc3RhbmNlc1tpXT1uZXcgdGhpcy5tZXRob2QpLHRoaXMuX2luc3RhbmNlc1tpXS5yZXNldCh0W2ldKX0saS5leHBvcnRzPWV9LHtcIi4uL3V0aWxpdGllcy9VdGlsaXR5XCI6OTV9XSw4NjpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3Q9dHx8MCx0aGlzLmVuZFN0YXRlPW5ldyB2KHQpLHRoaXMuaW5pdFN0YXRlPW5ldyB2LHRoaXMuX2RpbWVuc2lvbnM9MSx0aGlzLl9yZXN0VG9sZXJhbmNlPTFlLTEwLHRoaXMuX2Fic1Jlc3RUb2xlcmFuY2U9dGhpcy5fcmVzdFRvbGVyYW5jZSx0aGlzLl9jYWxsYmFjaz12b2lkIDAsdGhpcy5QRT1uZXcgXyx0aGlzLnBhcnRpY2xlPW5ldyB5LHRoaXMuc3ByaW5nPW5ldyBnKHthbmNob3I6dGhpcy5lbmRTdGF0ZX0pLHRoaXMuUEUuYWRkQm9keSh0aGlzLnBhcnRpY2xlKSx0aGlzLlBFLmF0dGFjaCh0aGlzLnNwcmluZyx0aGlzLnBhcnRpY2xlKX1mdW5jdGlvbiBuKCl7cmV0dXJuIHRoaXMucGFydGljbGUuZ2V0RW5lcmd5KCkrdGhpcy5zcHJpbmcuZ2V0RW5lcmd5KFt0aGlzLnBhcnRpY2xlXSl9ZnVuY3Rpb24gbygpe3ZhciB0PXRoaXMuZW5kU3RhdGUuc3ViKHRoaXMuaW5pdFN0YXRlKS5ub3JtU3F1YXJlZCgpO3RoaXMuX2Fic1Jlc3RUb2xlcmFuY2U9MD09PXQ/dGhpcy5fcmVzdFRvbGVyYW5jZTp0aGlzLl9yZXN0VG9sZXJhbmNlKnR9ZnVuY3Rpb24gcyh0KXt0aGlzLmVuZFN0YXRlLnNldCh0KSxvLmNhbGwodGhpcyl9ZnVuY3Rpb24gcigpe3RoaXMuUEUud2FrZSgpfWZ1bmN0aW9uIGEoKXt0aGlzLlBFLnNsZWVwKCl9ZnVuY3Rpb24gaCh0KXt0aGlzLnBhcnRpY2xlLnBvc2l0aW9uLnNldCh0KX1mdW5jdGlvbiBjKHQpe3RoaXMucGFydGljbGUudmVsb2NpdHkuc2V0KHQpfWZ1bmN0aW9uIHAoKXtyZXR1cm4gMD09PXRoaXMuX2RpbWVuc2lvbnM/dGhpcy5wYXJ0aWNsZS5nZXRQb3NpdGlvbjFEKCk6dGhpcy5wYXJ0aWNsZS5nZXRQb3NpdGlvbigpfWZ1bmN0aW9uIHUoKXtyZXR1cm4gMD09PXRoaXMuX2RpbWVuc2lvbnM/dGhpcy5wYXJ0aWNsZS5nZXRWZWxvY2l0eTFEKCk6dGhpcy5wYXJ0aWNsZS5nZXRWZWxvY2l0eSgpfWZ1bmN0aW9uIGwodCl7dGhpcy5fY2FsbGJhY2s9dH1mdW5jdGlvbiBmKHQpe3ZhciBpPWUuREVGQVVMVF9PUFRJT05TO3ZvaWQgMD09PXQucGVyaW9kJiYodC5wZXJpb2Q9aS5wZXJpb2QpLHZvaWQgMD09PXQuZGFtcGluZ1JhdGlvJiYodC5kYW1waW5nUmF0aW89aS5kYW1waW5nUmF0aW8pLHZvaWQgMD09PXQudmVsb2NpdHkmJih0LnZlbG9jaXR5PWkudmVsb2NpdHkpLHRoaXMuc3ByaW5nLnNldE9wdGlvbnMoe3BlcmlvZDp0LnBlcmlvZCxkYW1waW5nUmF0aW86dC5kYW1waW5nUmF0aW99KSxjLmNhbGwodGhpcyx0LnZlbG9jaXR5KX1mdW5jdGlvbiBkKCl7aWYodGhpcy5QRS5pc1NsZWVwaW5nKCkpe2lmKHRoaXMuX2NhbGxiYWNrKXt2YXIgdD10aGlzLl9jYWxsYmFjazt0aGlzLl9jYWxsYmFjaz12b2lkIDAsdCgpfX1lbHNlIG4uY2FsbCh0aGlzKTx0aGlzLl9hYnNSZXN0VG9sZXJhbmNlJiYoaC5jYWxsKHRoaXMsdGhpcy5lbmRTdGF0ZSksYy5jYWxsKHRoaXMsWzAsMCwwXSksYS5jYWxsKHRoaXMpKX12YXIgXz10KFwiLi4vcGh5c2ljcy9QaHlzaWNzRW5naW5lXCIpLHk9dChcIi4uL3BoeXNpY3MvYm9kaWVzL1BhcnRpY2xlXCIpLGc9dChcIi4uL3BoeXNpY3MvY29uc3RyYWludHMvU25hcFwiKSx2PXQoXCIuLi9tYXRoL1ZlY3RvclwiKTtlLlNVUFBPUlRTX01VTFRJUExFPTMsZS5ERUZBVUxUX09QVElPTlM9e3BlcmlvZDoxMDAsZGFtcGluZ1JhdGlvOi4yLHZlbG9jaXR5OjB9LGUucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKHQsaSl7dGhpcy5fZGltZW5zaW9ucz10IGluc3RhbmNlb2YgQXJyYXk/dC5sZW5ndGg6MCx0aGlzLmluaXRTdGF0ZS5zZXQodCksaC5jYWxsKHRoaXMsdCkscy5jYWxsKHRoaXMsdCksaSYmYy5jYWxsKHRoaXMsaSksbC5jYWxsKHRoaXMsdm9pZCAwKX0sZS5wcm90b3R5cGUuZ2V0VmVsb2NpdHk9ZnVuY3Rpb24oKXtyZXR1cm4gdS5jYWxsKHRoaXMpfSxlLnByb3RvdHlwZS5zZXRWZWxvY2l0eT1mdW5jdGlvbih0KXt0aGlzLmNhbGwodGhpcyxjKHQpKX0sZS5wcm90b3R5cGUuaXNBY3RpdmU9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5QRS5pc1NsZWVwaW5nKCl9LGUucHJvdG90eXBlLmhhbHQ9ZnVuY3Rpb24oKXt0aGlzLnNldCh0aGlzLmdldCgpKX0sZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIGQuY2FsbCh0aGlzKSxwLmNhbGwodGhpcyl9LGUucHJvdG90eXBlLnNldD1mdW5jdGlvbih0LGksZSl7cmV0dXJuIGk/KHRoaXMuX2RpbWVuc2lvbnM9dCBpbnN0YW5jZW9mIEFycmF5P3QubGVuZ3RoOjAsci5jYWxsKHRoaXMpLGYuY2FsbCh0aGlzLGkpLHMuY2FsbCh0aGlzLHQpLHZvaWQgbC5jYWxsKHRoaXMsZSkpOih0aGlzLnJlc2V0KHQpLHZvaWQoZSYmZSgpKSl9LGkuZXhwb3J0cz1lfSx7XCIuLi9tYXRoL1ZlY3RvclwiOjQxLFwiLi4vcGh5c2ljcy9QaHlzaWNzRW5naW5lXCI6NDgsXCIuLi9waHlzaWNzL2JvZGllcy9QYXJ0aWNsZVwiOjUxLFwiLi4vcGh5c2ljcy9jb25zdHJhaW50cy9TbmFwXCI6NTh9XSw4NzpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3Q9dHx8MCx0aGlzLmVuZFN0YXRlPW5ldyB2KHQpLHRoaXMuaW5pdFN0YXRlPW5ldyB2LHRoaXMuX2RpbWVuc2lvbnM9dm9pZCAwLHRoaXMuX3Jlc3RUb2xlcmFuY2U9MWUtMTAsdGhpcy5fYWJzUmVzdFRvbGVyYW5jZT10aGlzLl9yZXN0VG9sZXJhbmNlLHRoaXMuX2NhbGxiYWNrPXZvaWQgMCx0aGlzLlBFPW5ldyBfLHRoaXMuc3ByaW5nPW5ldyBnKHthbmNob3I6dGhpcy5lbmRTdGF0ZX0pLHRoaXMucGFydGljbGU9bmV3IHksdGhpcy5QRS5hZGRCb2R5KHRoaXMucGFydGljbGUpLHRoaXMuUEUuYXR0YWNoKHRoaXMuc3ByaW5nLHRoaXMucGFydGljbGUpfWZ1bmN0aW9uIG4oKXtyZXR1cm4gdGhpcy5wYXJ0aWNsZS5nZXRFbmVyZ3koKSt0aGlzLnNwcmluZy5nZXRFbmVyZ3koW3RoaXMucGFydGljbGVdKX1mdW5jdGlvbiBvKHQpe3RoaXMucGFydGljbGUuc2V0UG9zaXRpb24odCl9ZnVuY3Rpb24gcyh0KXt0aGlzLnBhcnRpY2xlLnNldFZlbG9jaXR5KHQpfWZ1bmN0aW9uIHIoKXtyZXR1cm4gMD09PXRoaXMuX2RpbWVuc2lvbnM/dGhpcy5wYXJ0aWNsZS5nZXRQb3NpdGlvbjFEKCk6dGhpcy5wYXJ0aWNsZS5nZXRQb3NpdGlvbigpfWZ1bmN0aW9uIGEoKXtyZXR1cm4gMD09PXRoaXMuX2RpbWVuc2lvbnM/dGhpcy5wYXJ0aWNsZS5nZXRWZWxvY2l0eTFEKCk6dGhpcy5wYXJ0aWNsZS5nZXRWZWxvY2l0eSgpfWZ1bmN0aW9uIGgodCl7dGhpcy5fY2FsbGJhY2s9dH1mdW5jdGlvbiBjKCl7dGhpcy5QRS53YWtlKCl9ZnVuY3Rpb24gcCgpe3RoaXMuUEUuc2xlZXAoKX1mdW5jdGlvbiB1KCl7aWYodGhpcy5QRS5pc1NsZWVwaW5nKCkpe2lmKHRoaXMuX2NhbGxiYWNrKXt2YXIgdD10aGlzLl9jYWxsYmFjazt0aGlzLl9jYWxsYmFjaz12b2lkIDAsdCgpfX1lbHNlIG4uY2FsbCh0aGlzKTx0aGlzLl9hYnNSZXN0VG9sZXJhbmNlJiYoby5jYWxsKHRoaXMsdGhpcy5lbmRTdGF0ZSkscy5jYWxsKHRoaXMsWzAsMCwwXSkscC5jYWxsKHRoaXMpKX1mdW5jdGlvbiBsKHQpe3ZhciBpPWUuREVGQVVMVF9PUFRJT05TO3ZvaWQgMD09PXQucGVyaW9kJiYodC5wZXJpb2Q9aS5wZXJpb2QpLHZvaWQgMD09PXQuZGFtcGluZ1JhdGlvJiYodC5kYW1waW5nUmF0aW89aS5kYW1waW5nUmF0aW8pLHZvaWQgMD09PXQudmVsb2NpdHkmJih0LnZlbG9jaXR5PWkudmVsb2NpdHkpLHQucGVyaW9kPDE1MCYmKHQucGVyaW9kPTE1MCxjb25zb2xlLndhcm4oXCJUaGUgcGVyaW9kIG9mIGEgU3ByaW5nVHJhbnNpdGlvbiBpcyBjYXBwZWQgYXQgMTUwIG1zLiBVc2UgYSBTbmFwVHJhbnNpdGlvbiBmb3IgZmFzdGVyIHRyYW5zaXRpb25zXCIpKSx0aGlzLnNwcmluZy5zZXRPcHRpb25zKHtwZXJpb2Q6dC5wZXJpb2QsZGFtcGluZ1JhdGlvOnQuZGFtcGluZ1JhdGlvfSkscy5jYWxsKHRoaXMsdC52ZWxvY2l0eSl9ZnVuY3Rpb24gZigpe3ZhciB0PXRoaXMuZW5kU3RhdGUuc3ViKHRoaXMuaW5pdFN0YXRlKS5ub3JtU3F1YXJlZCgpO3RoaXMuX2Fic1Jlc3RUb2xlcmFuY2U9MD09PXQ/dGhpcy5fcmVzdFRvbGVyYW5jZTp0aGlzLl9yZXN0VG9sZXJhbmNlKnR9ZnVuY3Rpb24gZCh0KXt0aGlzLmVuZFN0YXRlLnNldCh0KSxmLmNhbGwodGhpcyl9dmFyIF89dChcIi4uL3BoeXNpY3MvUGh5c2ljc0VuZ2luZVwiKSx5PXQoXCIuLi9waHlzaWNzL2JvZGllcy9QYXJ0aWNsZVwiKSxnPXQoXCIuLi9waHlzaWNzL2ZvcmNlcy9TcHJpbmdcIiksdj10KFwiLi4vbWF0aC9WZWN0b3JcIik7ZS5TVVBQT1JUU19NVUxUSVBMRT0zLGUuREVGQVVMVF9PUFRJT05TPXtwZXJpb2Q6MzAwLGRhbXBpbmdSYXRpbzouNSx2ZWxvY2l0eTowfSxlLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbih0LGkpe3RoaXMuX2RpbWVuc2lvbnM9dCBpbnN0YW5jZW9mIEFycmF5P3QubGVuZ3RoOjAsdGhpcy5pbml0U3RhdGUuc2V0KHQpLG8uY2FsbCh0aGlzLHQpLGQuY2FsbCh0aGlzLHQpLGkmJnMuY2FsbCh0aGlzLGkpLGguY2FsbCh0aGlzLHZvaWQgMCl9LGUucHJvdG90eXBlLmdldFZlbG9jaXR5PWZ1bmN0aW9uKCl7cmV0dXJuIGEuY2FsbCh0aGlzKX0sZS5wcm90b3R5cGUuc2V0VmVsb2NpdHk9ZnVuY3Rpb24odCl7dGhpcy5jYWxsKHRoaXMscyh0KSl9LGUucHJvdG90eXBlLmlzQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuUEUuaXNTbGVlcGluZygpXG59LGUucHJvdG90eXBlLmhhbHQ9ZnVuY3Rpb24oKXt0aGlzLnNldCh0aGlzLmdldCgpKX0sZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHUuY2FsbCh0aGlzKSxyLmNhbGwodGhpcyl9LGUucHJvdG90eXBlLnNldD1mdW5jdGlvbih0LGksZSl7cmV0dXJuIGk/KHRoaXMuX2RpbWVuc2lvbnM9dCBpbnN0YW5jZW9mIEFycmF5P3QubGVuZ3RoOjAsYy5jYWxsKHRoaXMpLGwuY2FsbCh0aGlzLGkpLGQuY2FsbCh0aGlzLHQpLHZvaWQgaC5jYWxsKHRoaXMsZSkpOih0aGlzLnJlc2V0KHQpLHZvaWQoZSYmZSgpKSl9LGkuZXhwb3J0cz1lfSx7XCIuLi9tYXRoL1ZlY3RvclwiOjQxLFwiLi4vcGh5c2ljcy9QaHlzaWNzRW5naW5lXCI6NDgsXCIuLi9waHlzaWNzL2JvZGllcy9QYXJ0aWNsZVwiOjUxLFwiLi4vcGh5c2ljcy9mb3JjZXMvU3ByaW5nXCI6Njh9XSw4ODpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3RoaXMuY3VycmVudEFjdGlvbj1udWxsLHRoaXMuYWN0aW9uUXVldWU9W10sdGhpcy5jYWxsYmFja1F1ZXVlPVtdLHRoaXMuc3RhdGU9MCx0aGlzLnZlbG9jaXR5PXZvaWQgMCx0aGlzLl9jYWxsYmFjaz12b2lkIDAsdGhpcy5fZW5naW5lSW5zdGFuY2U9bnVsbCx0aGlzLl9jdXJyZW50TWV0aG9kPW51bGwsdGhpcy5zZXQodCl9ZnVuY3Rpb24gbigpe2lmKHRoaXMuX2NhbGxiYWNrKXt2YXIgdD10aGlzLl9jYWxsYmFjazt0aGlzLl9jYWxsYmFjaz12b2lkIDAsdCgpfWlmKHRoaXMuYWN0aW9uUXVldWUubGVuZ3RoPD0wKXJldHVybiB2b2lkIHRoaXMuc2V0KHRoaXMuZ2V0KCkpO3RoaXMuY3VycmVudEFjdGlvbj10aGlzLmFjdGlvblF1ZXVlLnNoaWZ0KCksdGhpcy5fY2FsbGJhY2s9dGhpcy5jYWxsYmFja1F1ZXVlLnNoaWZ0KCk7dmFyIGk9bnVsbCxlPXRoaXMuY3VycmVudEFjdGlvblswXSxhPXRoaXMuY3VycmVudEFjdGlvblsxXTthIGluc3RhbmNlb2YgT2JqZWN0JiZhLm1ldGhvZD8oaT1hLm1ldGhvZCxcInN0cmluZ1wiPT10eXBlb2YgaSYmKGk9cltpXSkpOmk9cyx0aGlzLl9jdXJyZW50TWV0aG9kIT09aSYmKHRoaXMuX2VuZ2luZUluc3RhbmNlPSEoZSBpbnN0YW5jZW9mIE9iamVjdCl8fGkuU1VQUE9SVFNfTVVMVElQTEU9PT0hMHx8ZS5sZW5ndGg8PWkuU1VQUE9SVFNfTVVMVElQTEU/bmV3IGk6bmV3IG8oaSksdGhpcy5fY3VycmVudE1ldGhvZD1pKSx0aGlzLl9lbmdpbmVJbnN0YW5jZS5yZXNldCh0aGlzLnN0YXRlLHRoaXMudmVsb2NpdHkpLHZvaWQgMCE9PXRoaXMudmVsb2NpdHkmJihhLnZlbG9jaXR5PXRoaXMudmVsb2NpdHkpLHRoaXMuX2VuZ2luZUluc3RhbmNlLnNldChlLGEsbi5iaW5kKHRoaXMpKX12YXIgbz10KFwiLi9NdWx0aXBsZVRyYW5zaXRpb25cIikscz10KFwiLi9Ud2VlblRyYW5zaXRpb25cIikscj17fTtlLnJlZ2lzdGVyPWZ1bmN0aW9uKHQpe3ZhciBpPSEwO2Zvcih2YXIgbiBpbiB0KWUucmVnaXN0ZXJNZXRob2Qobix0W25dKXx8KGk9ITEpO3JldHVybiBpfSxlLnJlZ2lzdGVyTWV0aG9kPWZ1bmN0aW9uKHQsaSl7cmV0dXJuIHQgaW4gcj8hMTooclt0XT1pLCEwKX0sZS51bnJlZ2lzdGVyTWV0aG9kPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluIHI/KGRlbGV0ZSByW3RdLCEwKTohMX0sZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsaSxlKXtpZighaSlyZXR1cm4gdGhpcy5yZXNldCh0KSxlJiZlKCksdGhpczt2YXIgbz1bdCxpXTtyZXR1cm4gdGhpcy5hY3Rpb25RdWV1ZS5wdXNoKG8pLHRoaXMuY2FsbGJhY2tRdWV1ZS5wdXNoKGUpLHRoaXMuY3VycmVudEFjdGlvbnx8bi5jYWxsKHRoaXMpLHRoaXN9LGUucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKHQsaSl7dGhpcy5fY3VycmVudE1ldGhvZD1udWxsLHRoaXMuX2VuZ2luZUluc3RhbmNlPW51bGwsdGhpcy5fY2FsbGJhY2s9dm9pZCAwLHRoaXMuc3RhdGU9dCx0aGlzLnZlbG9jaXR5PWksdGhpcy5jdXJyZW50QWN0aW9uPW51bGwsdGhpcy5hY3Rpb25RdWV1ZT1bXSx0aGlzLmNhbGxiYWNrUXVldWU9W119LGUucHJvdG90eXBlLmRlbGF5PWZ1bmN0aW9uKHQsaSl7dGhpcy5zZXQodGhpcy5nZXQoKSx7ZHVyYXRpb246dCxjdXJ2ZTpmdW5jdGlvbigpe3JldHVybiAwfX0saSl9LGUucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fZW5naW5lSW5zdGFuY2UmJih0aGlzLl9lbmdpbmVJbnN0YW5jZS5nZXRWZWxvY2l0eSYmKHRoaXMudmVsb2NpdHk9dGhpcy5fZW5naW5lSW5zdGFuY2UuZ2V0VmVsb2NpdHkoKSksdGhpcy5zdGF0ZT10aGlzLl9lbmdpbmVJbnN0YW5jZS5nZXQodCkpLHRoaXMuc3RhdGV9LGUucHJvdG90eXBlLmlzQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLmN1cnJlbnRBY3Rpb259LGUucHJvdG90eXBlLmhhbHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXQodGhpcy5nZXQoKSl9LGkuZXhwb3J0cz1lfSx7XCIuL011bHRpcGxlVHJhbnNpdGlvblwiOjg1LFwiLi9Ud2VlblRyYW5zaXRpb25cIjo5MH1dLDg5OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dGhpcy5fZmluYWw9ci5pZGVudGl0eS5zbGljZSgpLHRoaXMuX2ZpbmFsVHJhbnNsYXRlPVswLDAsMF0sdGhpcy5fZmluYWxSb3RhdGU9WzAsMCwwXSx0aGlzLl9maW5hbFNrZXc9WzAsMCwwXSx0aGlzLl9maW5hbFNjYWxlPVsxLDEsMV0sdGhpcy50cmFuc2xhdGU9bmV3IHModGhpcy5fZmluYWxUcmFuc2xhdGUpLHRoaXMucm90YXRlPW5ldyBzKHRoaXMuX2ZpbmFsUm90YXRlKSx0aGlzLnNrZXc9bmV3IHModGhpcy5fZmluYWxTa2V3KSx0aGlzLnNjYWxlPW5ldyBzKHRoaXMuX2ZpbmFsU2NhbGUpLHQmJnRoaXMuc2V0KHQpfWZ1bmN0aW9uIG4oKXtyZXR1cm4gci5idWlsZCh7dHJhbnNsYXRlOnRoaXMudHJhbnNsYXRlLmdldCgpLHJvdGF0ZTp0aGlzLnJvdGF0ZS5nZXQoKSxza2V3OnRoaXMuc2tldy5nZXQoKSxzY2FsZTp0aGlzLnNjYWxlLmdldCgpfSl9ZnVuY3Rpb24gbygpe3JldHVybiByLmJ1aWxkKHt0cmFuc2xhdGU6dGhpcy5fZmluYWxUcmFuc2xhdGUscm90YXRlOnRoaXMuX2ZpbmFsUm90YXRlLHNrZXc6dGhpcy5fZmluYWxTa2V3LHNjYWxlOnRoaXMuX2ZpbmFsU2NhbGV9KX12YXIgcz10KFwiLi9UcmFuc2l0aW9uYWJsZVwiKSxyPXQoXCIuLi9jb3JlL1RyYW5zZm9ybVwiKSxhPXQoXCIuLi91dGlsaXRpZXMvVXRpbGl0eVwiKTtlLnByb3RvdHlwZS5zZXRUcmFuc2xhdGU9ZnVuY3Rpb24odCxpLGUpe3JldHVybiB0aGlzLl9maW5hbFRyYW5zbGF0ZT10LHRoaXMuX2ZpbmFsPW8uY2FsbCh0aGlzKSx0aGlzLnRyYW5zbGF0ZS5zZXQodCxpLGUpLHRoaXN9LGUucHJvdG90eXBlLnNldFNjYWxlPWZ1bmN0aW9uKHQsaSxlKXtyZXR1cm4gdGhpcy5fZmluYWxTY2FsZT10LHRoaXMuX2ZpbmFsPW8uY2FsbCh0aGlzKSx0aGlzLnNjYWxlLnNldCh0LGksZSksdGhpc30sZS5wcm90b3R5cGUuc2V0Um90YXRlPWZ1bmN0aW9uKHQsaSxlKXtyZXR1cm4gdGhpcy5fZmluYWxSb3RhdGU9dCx0aGlzLl9maW5hbD1vLmNhbGwodGhpcyksdGhpcy5yb3RhdGUuc2V0KHQsaSxlKSx0aGlzfSxlLnByb3RvdHlwZS5zZXRTa2V3PWZ1bmN0aW9uKHQsaSxlKXtyZXR1cm4gdGhpcy5fZmluYWxTa2V3PXQsdGhpcy5fZmluYWw9by5jYWxsKHRoaXMpLHRoaXMuc2tldy5zZXQodCxpLGUpLHRoaXN9LGUucHJvdG90eXBlLnNldD1mdW5jdGlvbih0LGksZSl7dmFyIG49ci5pbnRlcnByZXQodCk7dGhpcy5fZmluYWxUcmFuc2xhdGU9bi50cmFuc2xhdGUsdGhpcy5fZmluYWxSb3RhdGU9bi5yb3RhdGUsdGhpcy5fZmluYWxTa2V3PW4uc2tldyx0aGlzLl9maW5hbFNjYWxlPW4uc2NhbGUsdGhpcy5fZmluYWw9dDt2YXIgbz1lP2EuYWZ0ZXIoNCxlKTpudWxsO3JldHVybiB0aGlzLnRyYW5zbGF0ZS5zZXQobi50cmFuc2xhdGUsaSxvKSx0aGlzLnJvdGF0ZS5zZXQobi5yb3RhdGUsaSxvKSx0aGlzLnNrZXcuc2V0KG4uc2tldyxpLG8pLHRoaXMuc2NhbGUuc2V0KG4uc2NhbGUsaSxvKSx0aGlzfSxlLnByb3RvdHlwZS5zZXREZWZhdWx0VHJhbnNpdGlvbj1mdW5jdGlvbih0KXt0aGlzLnRyYW5zbGF0ZS5zZXREZWZhdWx0KHQpLHRoaXMucm90YXRlLnNldERlZmF1bHQodCksdGhpcy5za2V3LnNldERlZmF1bHQodCksdGhpcy5zY2FsZS5zZXREZWZhdWx0KHQpfSxlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0FjdGl2ZSgpP24uY2FsbCh0aGlzKTp0aGlzLl9maW5hbH0sZS5wcm90b3R5cGUuZ2V0RmluYWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmluYWx9LGUucHJvdG90eXBlLmlzQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJhbnNsYXRlLmlzQWN0aXZlKCl8fHRoaXMucm90YXRlLmlzQWN0aXZlKCl8fHRoaXMuc2NhbGUuaXNBY3RpdmUoKXx8dGhpcy5za2V3LmlzQWN0aXZlKCl9LGUucHJvdG90eXBlLmhhbHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmFuc2xhdGUuaGFsdCgpLHRoaXMucm90YXRlLmhhbHQoKSx0aGlzLnNrZXcuaGFsdCgpLHRoaXMuc2NhbGUuaGFsdCgpLHRoaXMuX2ZpbmFsPXRoaXMuZ2V0KCksdGhpcy5fZmluYWxUcmFuc2xhdGU9dGhpcy50cmFuc2xhdGUuZ2V0KCksdGhpcy5fZmluYWxSb3RhdGU9dGhpcy5yb3RhdGUuZ2V0KCksdGhpcy5fZmluYWxTa2V3PXRoaXMuc2tldy5nZXQoKSx0aGlzLl9maW5hbFNjYWxlPXRoaXMuc2NhbGUuZ2V0KCksdGhpc30saS5leHBvcnRzPWV9LHtcIi4uL2NvcmUvVHJhbnNmb3JtXCI6MTUsXCIuLi91dGlsaXRpZXMvVXRpbGl0eVwiOjk1LFwiLi9UcmFuc2l0aW9uYWJsZVwiOjg4fV0sOTA6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLm9wdGlvbnM9T2JqZWN0LmNyZWF0ZShlLkRFRkFVTFRfT1BUSU9OUyksdCYmdGhpcy5zZXRPcHRpb25zKHQpLHRoaXMuX3N0YXJ0VGltZT0wLHRoaXMuX3N0YXJ0VmFsdWU9MCx0aGlzLl91cGRhdGVUaW1lPTAsdGhpcy5fZW5kVmFsdWU9MCx0aGlzLl9jdXJ2ZT12b2lkIDAsdGhpcy5fZHVyYXRpb249MCx0aGlzLl9hY3RpdmU9ITEsdGhpcy5fY2FsbGJhY2s9dm9pZCAwLHRoaXMuc3RhdGU9MCx0aGlzLnZlbG9jaXR5PXZvaWQgMH1mdW5jdGlvbiBuKHQsaSxlKXtyZXR1cm4oMS1lKSp0K2UqaX1mdW5jdGlvbiBvKHQpe3JldHVybiB0IGluc3RhbmNlb2YgT2JqZWN0P3QgaW5zdGFuY2VvZiBBcnJheT90LnNsaWNlKDApOk9iamVjdC5jcmVhdGUodCk6dH1mdW5jdGlvbiBzKHQsaSl7dmFyIG49e2N1cnZlOmkuY3VydmV9O3JldHVybiBpLmR1cmF0aW9uJiYobi5kdXJhdGlvbj1pLmR1cmF0aW9uKSxpLnNwZWVkJiYobi5zcGVlZD1pLnNwZWVkKSx0IGluc3RhbmNlb2YgT2JqZWN0JiYodm9pZCAwIT09dC5kdXJhdGlvbiYmKG4uZHVyYXRpb249dC5kdXJhdGlvbiksdC5jdXJ2ZSYmKG4uY3VydmU9dC5jdXJ2ZSksdC5zcGVlZCYmKG4uc3BlZWQ9dC5zcGVlZCkpLFwic3RyaW5nXCI9PXR5cGVvZiBuLmN1cnZlJiYobi5jdXJ2ZT1lLmdldEN1cnZlKG4uY3VydmUpKSxufWZ1bmN0aW9uIHIodCxpLGUsbixvKXt2YXIgcyxyPTFlLTcsYT0oZShvKS1lKG8tcikpL3I7aWYodCBpbnN0YW5jZW9mIEFycmF5KXtzPVtdO2Zvcih2YXIgaD0wO2g8dC5sZW5ndGg7aCsrKXNbaF09XCJudW1iZXJcIj09dHlwZW9mIHRbaF0/YSoodFtoXS1pW2hdKS9uOjB9ZWxzZSBzPWEqKHQtaSkvbjtyZXR1cm4gc31mdW5jdGlvbiBhKHQsaSxlKXt2YXIgbztpZih0IGluc3RhbmNlb2YgQXJyYXkpe289W107Zm9yKHZhciBzPTA7czx0Lmxlbmd0aDtzKyspb1tzXT1cIm51bWJlclwiPT10eXBlb2YgdFtzXT9uKHRbc10saVtzXSxlKTp0W3NdfWVsc2Ugbz1uKHQsaSxlKTtyZXR1cm4gb31lLkN1cnZlcz17bGluZWFyOmZ1bmN0aW9uKHQpe3JldHVybiB0fSxlYXNlSW46ZnVuY3Rpb24odCl7cmV0dXJuIHQqdH0sZWFzZU91dDpmdW5jdGlvbih0KXtyZXR1cm4gdCooMi10KX0sZWFzZUluT3V0OmZ1bmN0aW9uKHQpe3JldHVybi41Pj10PzIqdCp0Oi0yKnQqdCs0KnQtMX0sZWFzZU91dEJvdW5jZTpmdW5jdGlvbih0KXtyZXR1cm4gdCooMy0yKnQpfSxzcHJpbmc6ZnVuY3Rpb24odCl7cmV0dXJuKDEtdCkqTWF0aC5zaW4oNipNYXRoLlBJKnQpK3R9fSxlLlNVUFBPUlRTX01VTFRJUExFPSEwLGUuREVGQVVMVF9PUFRJT05TPXtjdXJ2ZTplLkN1cnZlcy5saW5lYXIsZHVyYXRpb246NTAwLHNwZWVkOjB9O3ZhciBoPXt9O2UucmVnaXN0ZXJDdXJ2ZT1mdW5jdGlvbih0LGkpe3JldHVybiBoW3RdPyExOihoW3RdPWksITApfSxlLnVucmVnaXN0ZXJDdXJ2ZT1mdW5jdGlvbih0KXtyZXR1cm4gaFt0XT8oZGVsZXRlIGhbdF0sITApOiExfSxlLmdldEN1cnZlPWZ1bmN0aW9uKHQpe3ZhciBpPWhbdF07aWYodm9pZCAwIT09aSlyZXR1cm4gaTt0aHJvdyBuZXcgRXJyb3IoXCJjdXJ2ZSBub3QgcmVnaXN0ZXJlZFwiKX0sZS5nZXRDdXJ2ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gaH0sZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbih0KXt2b2lkIDAhPT10LmN1cnZlJiYodGhpcy5vcHRpb25zLmN1cnZlPXQuY3VydmUpLHZvaWQgMCE9PXQuZHVyYXRpb24mJih0aGlzLm9wdGlvbnMuZHVyYXRpb249dC5kdXJhdGlvbiksdm9pZCAwIT09dC5zcGVlZCYmKHRoaXMub3B0aW9ucy5zcGVlZD10LnNwZWVkKX0sZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsaSxlKXtpZighaSlyZXR1cm4gdGhpcy5yZXNldCh0KSx2b2lkKGUmJmUoKSk7aWYodGhpcy5fc3RhcnRWYWx1ZT1vKHRoaXMuZ2V0KCkpLGk9cyhpLHRoaXMub3B0aW9ucyksaS5zcGVlZCl7dmFyIG49dGhpcy5fc3RhcnRWYWx1ZTtpZihuIGluc3RhbmNlb2YgT2JqZWN0KXt2YXIgcj0wO2Zvcih2YXIgYSBpbiBuKXIrPSh0W2FdLW5bYV0pKih0W2FdLW5bYV0pO2kuZHVyYXRpb249TWF0aC5zcXJ0KHIpL2kuc3BlZWR9ZWxzZSBpLmR1cmF0aW9uPU1hdGguYWJzKHQtbikvaS5zcGVlZH10aGlzLl9zdGFydFRpbWU9RGF0ZS5ub3coKSx0aGlzLl9lbmRWYWx1ZT1vKHQpLHRoaXMuX3N0YXJ0VmVsb2NpdHk9byhpLnZlbG9jaXR5KSx0aGlzLl9kdXJhdGlvbj1pLmR1cmF0aW9uLHRoaXMuX2N1cnZlPWkuY3VydmUsdGhpcy5fYWN0aXZlPSEwLHRoaXMuX2NhbGxiYWNrPWV9LGUucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKHQsaSl7aWYodGhpcy5fY2FsbGJhY2spe3ZhciBlPXRoaXMuX2NhbGxiYWNrO3RoaXMuX2NhbGxiYWNrPXZvaWQgMCxlKCl9dGhpcy5zdGF0ZT1vKHQpLHRoaXMudmVsb2NpdHk9byhpKSx0aGlzLl9zdGFydFRpbWU9MCx0aGlzLl9kdXJhdGlvbj0wLHRoaXMuX3VwZGF0ZVRpbWU9MCx0aGlzLl9zdGFydFZhbHVlPXRoaXMuc3RhdGUsdGhpcy5fc3RhcnRWZWxvY2l0eT10aGlzLnZlbG9jaXR5LHRoaXMuX2VuZFZhbHVlPXRoaXMuc3RhdGUsdGhpcy5fYWN0aXZlPSExfSxlLnByb3RvdHlwZS5nZXRWZWxvY2l0eT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZlbG9jaXR5fSxlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudXBkYXRlKHQpLHRoaXMuc3RhdGV9LGUucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0KXtpZih0aGlzLl9hY3RpdmUpe2lmKHR8fCh0PURhdGUubm93KCkpLCEodGhpcy5fdXBkYXRlVGltZT49dCkpe3RoaXMuX3VwZGF0ZVRpbWU9dDt2YXIgaT10LXRoaXMuX3N0YXJ0VGltZTtpZihpPj10aGlzLl9kdXJhdGlvbil0aGlzLnN0YXRlPXRoaXMuX2VuZFZhbHVlLHRoaXMudmVsb2NpdHk9cih0aGlzLnN0YXRlLHRoaXMuX3N0YXJ0VmFsdWUsdGhpcy5fY3VydmUsdGhpcy5fZHVyYXRpb24sMSksdGhpcy5fYWN0aXZlPSExO2Vsc2UgaWYoMD5pKXRoaXMuc3RhdGU9dGhpcy5fc3RhcnRWYWx1ZSx0aGlzLnZlbG9jaXR5PXRoaXMuX3N0YXJ0VmVsb2NpdHk7ZWxzZXt2YXIgZT1pL3RoaXMuX2R1cmF0aW9uO3RoaXMuc3RhdGU9YSh0aGlzLl9zdGFydFZhbHVlLHRoaXMuX2VuZFZhbHVlLHRoaXMuX2N1cnZlKGUpKSx0aGlzLnZlbG9jaXR5PXIodGhpcy5zdGF0ZSx0aGlzLl9zdGFydFZhbHVlLHRoaXMuX2N1cnZlLHRoaXMuX2R1cmF0aW9uLGUpfX19ZWxzZSBpZih0aGlzLl9jYWxsYmFjayl7dmFyIG49dGhpcy5fY2FsbGJhY2s7dGhpcy5fY2FsbGJhY2s9dm9pZCAwLG4oKX19LGUucHJvdG90eXBlLmlzQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FjdGl2ZX0sZS5wcm90b3R5cGUuaGFsdD1mdW5jdGlvbigpe3RoaXMucmVzZXQodGhpcy5nZXQoKSl9LGUucmVnaXN0ZXJDdXJ2ZShcImxpbmVhclwiLGUuQ3VydmVzLmxpbmVhciksZS5yZWdpc3RlckN1cnZlKFwiZWFzZUluXCIsZS5DdXJ2ZXMuZWFzZUluKSxlLnJlZ2lzdGVyQ3VydmUoXCJlYXNlT3V0XCIsZS5DdXJ2ZXMuZWFzZU91dCksZS5yZWdpc3RlckN1cnZlKFwiZWFzZUluT3V0XCIsZS5DdXJ2ZXMuZWFzZUluT3V0KSxlLnJlZ2lzdGVyQ3VydmUoXCJlYXNlT3V0Qm91bmNlXCIsZS5DdXJ2ZXMuZWFzZU91dEJvdW5jZSksZS5yZWdpc3RlckN1cnZlKFwic3ByaW5nXCIsZS5DdXJ2ZXMuc3ByaW5nKSxlLmN1c3RvbUN1cnZlPWZ1bmN0aW9uKHQsaSl7cmV0dXJuIHQ9dHx8MCxpPWl8fDAsZnVuY3Rpb24oZSl7cmV0dXJuIHQqZSsoLTIqdC1pKzMpKmUqZSsodCtpLTIpKmUqZSplfX0saS5leHBvcnRzPWV9LHt9XSw5MTpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3Q9dHx8MCx0aGlzLmVuZFN0YXRlPW5ldyBtKHQpLHRoaXMuaW5pdFN0YXRlPW5ldyBtLHRoaXMuc3ByaW5nPW5ldyBnKHthbmNob3I6dGhpcy5lbmRTdGF0ZX0pLHRoaXMud2FsbD1uZXcgdix0aGlzLl9yZXN0VG9sZXJhbmNlPTFlLTEwLHRoaXMuX2RpbWVuc2lvbnM9MSx0aGlzLl9hYnNSZXN0VG9sZXJhbmNlPXRoaXMuX3Jlc3RUb2xlcmFuY2UsdGhpcy5fY2FsbGJhY2s9dm9pZCAwLHRoaXMuUEU9bmV3IF8sdGhpcy5wYXJ0aWNsZT1uZXcgeSx0aGlzLlBFLmFkZEJvZHkodGhpcy5wYXJ0aWNsZSksdGhpcy5QRS5hdHRhY2goW3RoaXMud2FsbCx0aGlzLnNwcmluZ10sdGhpcy5wYXJ0aWNsZSl9ZnVuY3Rpb24gbigpe3JldHVybiB0aGlzLnBhcnRpY2xlLmdldEVuZXJneSgpK3RoaXMuc3ByaW5nLmdldEVuZXJneShbdGhpcy5wYXJ0aWNsZV0pfWZ1bmN0aW9uIG8oKXt2YXIgdD10aGlzLmVuZFN0YXRlLnN1Yih0aGlzLmluaXRTdGF0ZSkubm9ybVNxdWFyZWQoKTt0aGlzLl9hYnNSZXN0VG9sZXJhbmNlPTA9PT10P3RoaXMuX3Jlc3RUb2xlcmFuY2U6dGhpcy5fcmVzdFRvbGVyYW5jZSp0fWZ1bmN0aW9uIHMoKXt0aGlzLlBFLndha2UoKX1mdW5jdGlvbiByKCl7dGhpcy5QRS5zbGVlcCgpfWZ1bmN0aW9uIGEodCl7dGhpcy5lbmRTdGF0ZS5zZXQodCk7dmFyIGk9dGhpcy5lbmRTdGF0ZS5zdWIodGhpcy5pbml0U3RhdGUpLm5vcm0oKTt0aGlzLndhbGwuc2V0T3B0aW9ucyh7ZGlzdGFuY2U6dGhpcy5lbmRTdGF0ZS5ub3JtKCksbm9ybWFsOjA9PT1pP3RoaXMucGFydGljbGUudmVsb2NpdHkubm9ybWFsaXplKC0xKTp0aGlzLmVuZFN0YXRlLnN1Yih0aGlzLmluaXRTdGF0ZSkubm9ybWFsaXplKC0xKX0pLG8uY2FsbCh0aGlzKX1mdW5jdGlvbiBoKHQpe3RoaXMucGFydGljbGUucG9zaXRpb24uc2V0KHQpfWZ1bmN0aW9uIGModCl7dGhpcy5wYXJ0aWNsZS52ZWxvY2l0eS5zZXQodCl9ZnVuY3Rpb24gcCgpe3JldHVybiAwPT09dGhpcy5fZGltZW5zaW9ucz90aGlzLnBhcnRpY2xlLmdldFBvc2l0aW9uMUQoKTp0aGlzLnBhcnRpY2xlLmdldFBvc2l0aW9uKCl9ZnVuY3Rpb24gdSgpe3JldHVybiAwPT09dGhpcy5fZGltZW5zaW9ucz90aGlzLnBhcnRpY2xlLmdldFZlbG9jaXR5MUQoKTp0aGlzLnBhcnRpY2xlLmdldFZlbG9jaXR5KCl9ZnVuY3Rpb24gbCh0KXt0aGlzLl9jYWxsYmFjaz10fWZ1bmN0aW9uIGYoKXtpZih0aGlzLlBFLmlzU2xlZXBpbmcoKSl7aWYodGhpcy5fY2FsbGJhY2spe3ZhciB0PXRoaXMuX2NhbGxiYWNrO3RoaXMuX2NhbGxiYWNrPXZvaWQgMCx0KCl9fWVsc2V7dmFyIGk9bi5jYWxsKHRoaXMpO2k8dGhpcy5fYWJzUmVzdFRvbGVyYW5jZSYmKHIuY2FsbCh0aGlzKSxoLmNhbGwodGhpcyx0aGlzLmVuZFN0YXRlKSxjLmNhbGwodGhpcyxbMCwwLDBdKSl9fWZ1bmN0aW9uIGQodCl7dmFyIGk9ZS5ERUZBVUxUX09QVElPTlM7dm9pZCAwPT09dC5wZXJpb2QmJih0LnBlcmlvZD1pLnBlcmlvZCksdm9pZCAwPT09dC5kYW1waW5nUmF0aW8mJih0LmRhbXBpbmdSYXRpbz1pLmRhbXBpbmdSYXRpbyksdm9pZCAwPT09dC52ZWxvY2l0eSYmKHQudmVsb2NpdHk9aS52ZWxvY2l0eSksdm9pZCAwPT09dC5yZXN0aXR1dGlvbiYmKHQucmVzdGl0dXRpb249aS5yZXN0aXR1dGlvbiksdGhpcy5zcHJpbmcuc2V0T3B0aW9ucyh7cGVyaW9kOnQucGVyaW9kLGRhbXBpbmdSYXRpbzp0LmRhbXBpbmdSYXRpb30pLHRoaXMud2FsbC5zZXRPcHRpb25zKHtyZXN0aXR1dGlvbjp0LnJlc3RpdHV0aW9ufSksYy5jYWxsKHRoaXMsdC52ZWxvY2l0eSl9dmFyIF89dChcIi4uL3BoeXNpY3MvUGh5c2ljc0VuZ2luZVwiKSx5PXQoXCIuLi9waHlzaWNzL2JvZGllcy9QYXJ0aWNsZVwiKSxnPXQoXCIuLi9waHlzaWNzL2ZvcmNlcy9TcHJpbmdcIiksdj10KFwiLi4vcGh5c2ljcy9jb25zdHJhaW50cy9XYWxsXCIpLG09dChcIi4uL21hdGgvVmVjdG9yXCIpO2UuU1VQUE9SVFNfTVVMVElQTEU9MyxlLkRFRkFVTFRfT1BUSU9OUz17cGVyaW9kOjMwMCxkYW1waW5nUmF0aW86LjUsdmVsb2NpdHk6MCxyZXN0aXR1dGlvbjouNX0sZS5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24odCxpKXt0aGlzLl9kaW1lbnNpb25zPXQgaW5zdGFuY2VvZiBBcnJheT90Lmxlbmd0aDowLHRoaXMuaW5pdFN0YXRlLnNldCh0KSxoLmNhbGwodGhpcyx0KSxpJiZjLmNhbGwodGhpcyxpKSxhLmNhbGwodGhpcyx0KSxsLmNhbGwodGhpcyx2b2lkIDApfSxlLnByb3RvdHlwZS5nZXRWZWxvY2l0eT1mdW5jdGlvbigpe3JldHVybiB1LmNhbGwodGhpcyl9LGUucHJvdG90eXBlLnNldFZlbG9jaXR5PWZ1bmN0aW9uKHQpe3RoaXMuY2FsbCh0aGlzLGModCkpfSxlLnByb3RvdHlwZS5pc0FjdGl2ZT1mdW5jdGlvbigpe3JldHVybiF0aGlzLlBFLmlzU2xlZXBpbmcoKX0sZS5wcm90b3R5cGUuaGFsdD1mdW5jdGlvbigpe3RoaXMuc2V0KHRoaXMuZ2V0KCkpfSxlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gZi5jYWxsKHRoaXMpLHAuY2FsbCh0aGlzKX0sZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsaSxlKXtyZXR1cm4gaT8odGhpcy5fZGltZW5zaW9ucz10IGluc3RhbmNlb2YgQXJyYXk/dC5sZW5ndGg6MCxzLmNhbGwodGhpcyksZC5jYWxsKHRoaXMsaSksYS5jYWxsKHRoaXMsdCksdm9pZCBsLmNhbGwodGhpcyxlKSk6KHRoaXMucmVzZXQodCksdm9pZChlJiZlKCkpKX0saS5leHBvcnRzPWV9LHtcIi4uL21hdGgvVmVjdG9yXCI6NDEsXCIuLi9waHlzaWNzL1BoeXNpY3NFbmdpbmVcIjo0OCxcIi4uL3BoeXNpY3MvYm9kaWVzL1BhcnRpY2xlXCI6NTEsXCIuLi9waHlzaWNzL2NvbnN0cmFpbnRzL1dhbGxcIjo2MCxcIi4uL3BoeXNpY3MvZm9yY2VzL1NwcmluZ1wiOjY4fV0sOTI6W2Z1bmN0aW9uKHQsaSl7aS5leHBvcnRzPXtDYWNoZWRNYXA6dChcIi4vQ2FjaGVkTWFwXCIpLEVhc2luZzp0KFwiLi9FYXNpbmdcIiksTXVsdGlwbGVUcmFuc2l0aW9uOnQoXCIuL011bHRpcGxlVHJhbnNpdGlvblwiKSxTbmFwVHJhbnNpdGlvbjp0KFwiLi9TbmFwVHJhbnNpdGlvblwiKSxTcHJpbmdUcmFuc2l0aW9uOnQoXCIuL1NwcmluZ1RyYW5zaXRpb25cIiksVHJhbnNpdGlvbmFibGU6dChcIi4vVHJhbnNpdGlvbmFibGVcIiksVHJhbnNpdGlvbmFibGVUcmFuc2Zvcm06dChcIi4vVHJhbnNpdGlvbmFibGVUcmFuc2Zvcm1cIiksVHdlZW5UcmFuc2l0aW9uOnQoXCIuL1R3ZWVuVHJhbnNpdGlvblwiKSxXYWxsVHJhbnNpdGlvbjp0KFwiLi9XYWxsVHJhbnNpdGlvblwiKX19LHtcIi4vQ2FjaGVkTWFwXCI6ODMsXCIuL0Vhc2luZ1wiOjg0LFwiLi9NdWx0aXBsZVRyYW5zaXRpb25cIjo4NSxcIi4vU25hcFRyYW5zaXRpb25cIjo4NixcIi4vU3ByaW5nVHJhbnNpdGlvblwiOjg3LFwiLi9UcmFuc2l0aW9uYWJsZVwiOjg4LFwiLi9UcmFuc2l0aW9uYWJsZVRyYW5zZm9ybVwiOjg5LFwiLi9Ud2VlblRyYW5zaXRpb25cIjo5MCxcIi4vV2FsbFRyYW5zaXRpb25cIjo5MX1dLDkzOltmdW5jdGlvbih0LGkpe3ZhciBlPXswOjQ4LDE6NDksMjo1MCwzOjUxLDQ6NTIsNTo1Myw2OjU0LDc6NTUsODo1Niw5OjU3LGE6OTcsYjo5OCxjOjk5LGQ6MTAwLGU6MTAxLGY6MTAyLGc6MTAzLGg6MTA0LGk6MTA1LGo6MTA2LGs6MTA3LGw6MTA4LG06MTA5LG46MTEwLG86MTExLHA6MTEyLHE6MTEzLHI6MTE0LHM6MTE1LHQ6MTE2LHU6MTE3LHY6MTE4LHc6MTE5LHg6MTIwLHk6MTIxLHo6MTIyLEE6NjUsQjo2NixDOjY3LEQ6NjgsRTo2OSxGOjcwLEc6NzEsSDo3MixJOjczLEo6NzQsSzo3NSxMOjc2LE06NzcsTjo3OCxPOjc5LFA6ODAsUTo4MSxSOjgyLFM6ODMsVDo4NCxVOjg1LFY6ODYsVzo4NyxYOjg4LFk6ODksWjo5MCxFTlRFUjoxMyxMRUZUX0FSUk9XOjM3LFJJR0hUX0FSUk9XOjM5LFVQX0FSUk9XOjM4LERPV05fQVJST1c6NDAsU1BBQ0U6MzIsU0hJRlQ6MTYsVEFCOjl9O2kuZXhwb3J0cz1lfSx7fV0sOTQ6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXtyZXR1cm4gYy5vbihwLHQpLHR9ZnVuY3Rpb24gbih0LGkpe3ZhciBuPXUoKSxvPWZ1bmN0aW9uKCl7dmFyIGU9dSgpO2Utbj49aSYmKHQuYXBwbHkodGhpcyxhcmd1bWVudHMpLGMucmVtb3ZlTGlzdGVuZXIocCxvKSl9O3JldHVybiBlKG8pfWZ1bmN0aW9uIG8odCxpKXt2YXIgbj11KCksbz1mdW5jdGlvbigpe3ZhciBlPXUoKTtlLW4+PWkmJih0LmFwcGx5KHRoaXMsYXJndW1lbnRzKSxuPXUoKSl9O3JldHVybiBlKG8pfWZ1bmN0aW9uIHModCxpKXtpZih2b2lkIDA9PT1pKXJldHVybiB2b2lkIDA7dmFyIG49ZnVuY3Rpb24oKXtpLS0sMD49aSYmKHQuYXBwbHkodGhpcyxhcmd1bWVudHMpLGEobikpfTtyZXR1cm4gZShuKX1mdW5jdGlvbiByKHQsaSl7aT1pfHwxO3ZhciBuPWksbz1mdW5jdGlvbigpe2ktLSwwPj1pJiYodC5hcHBseSh0aGlzLGFyZ3VtZW50cyksaT1uKX07cmV0dXJuIGUobyl9ZnVuY3Rpb24gYSh0KXtjLnJlbW92ZUxpc3RlbmVyKHAsdCl9ZnVuY3Rpb24gaCh0LGkpe3ZhciBlLG8scyxyLGg7cmV0dXJuIGZ1bmN0aW9uKCl7bz10aGlzLGg9YXJndW1lbnRzLHM9dSgpO3ZhciBjPWZ1bmN0aW9uKCl7dmFyIGE9dS1zO2k+YT9lPW4oYyxpLWEpOihlPW51bGwscj10LmFwcGx5KG8saCkpfTtyZXR1cm4gYShlKSxlPW4oYyxpKSxyfX12YXIgYz10KFwiLi4vY29yZS9FbmdpbmVcIikscD1cInByZXJlbmRlclwiLHU9d2luZG93LnBlcmZvcm1hbmNlJiZ3aW5kb3cucGVyZm9ybWFuY2Uubm93P2Z1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy5wZXJmb3JtYW5jZS5ub3coKX06ZnVuY3Rpb24oKXtyZXR1cm4gRGF0ZS5ub3coKX07aS5leHBvcnRzPXtzZXRUaW1lb3V0Om4sc2V0SW50ZXJ2YWw6byxkZWJvdW5jZTpoLGFmdGVyOnMsZXZlcnk6cixjbGVhcjphfX0se1wiLi4vY29yZS9FbmdpbmVcIjo0fV0sOTU6W2Z1bmN0aW9uKHQsaSl7dmFyIGU9e307ZS5EaXJlY3Rpb249e1g6MCxZOjEsWjoyfSxlLmFmdGVyPWZ1bmN0aW9uKHQsaSl7dmFyIGU9dDtyZXR1cm4gZnVuY3Rpb24oKXtlLS0sMD09PWUmJmkuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0sZS5sb2FkVVJMPWZ1bmN0aW9uKHQsaSl7dmFyIGU9bmV3IFhNTEh0dHBSZXF1ZXN0O2Uub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09PXRoaXMucmVhZHlTdGF0ZSYmaSYmaSh0aGlzLnJlc3BvbnNlVGV4dCl9LGUub3BlbihcIkdFVFwiLHQpLGUuc2VuZCgpfSxlLmNyZWF0ZURvY3VtZW50RnJhZ21lbnRGcm9tSFRNTD1mdW5jdGlvbih0KXt2YXIgaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2kuaW5uZXJIVE1MPXQ7Zm9yKHZhciBlPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtpLmhhc0NoaWxkTm9kZXMoKTspZS5hcHBlbmRDaGlsZChpLmZpcnN0Q2hpbGQpO3JldHVybiBlfSxlLmNsb25lPWZ1bmN0aW9uKHQpe3ZhciBpO2lmKFwib2JqZWN0XCI9PXR5cGVvZiB0KXtpPXQgaW5zdGFuY2VvZiBBcnJheT9bXTp7fTtmb3IodmFyIG4gaW4gdClpZihcIm9iamVjdFwiPT10eXBlb2YgdFtuXSYmbnVsbCE9PXRbbl0paWYodFtuXWluc3RhbmNlb2YgQXJyYXkpe2lbbl09bmV3IEFycmF5KHRbbl0ubGVuZ3RoKTtmb3IodmFyIG89MDtvPHRbbl0ubGVuZ3RoO28rKylpW25dW29dPWUuY2xvbmUodFtuXVtvXSl9ZWxzZSBpW25dPWUuY2xvbmUodFtuXSk7ZWxzZSBpW25dPXRbbl19ZWxzZSBpPXQ7cmV0dXJuIGl9LGkuZXhwb3J0cz1lfSx7fV0sOTY6W2Z1bmN0aW9uKHQsaSl7aS5leHBvcnRzPXtLZXlDb2Rlczp0KFwiLi9LZXlDb2Rlc1wiKSxUaW1lcjp0KFwiLi9UaW1lclwiKSxVdGlsaXR5OnQoXCIuL1V0aWxpdHlcIil9fSx7XCIuL0tleUNvZGVzXCI6OTMsXCIuL1RpbWVyXCI6OTQsXCIuL1V0aWxpdHlcIjo5NX1dLDk3OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dGhpcy5vcHRpb25zPU9iamVjdC5jcmVhdGUodGhpcy5jb25zdHJ1Y3Rvci5ERUZBVUxUX09QVElPTlN8fGUuREVGQVVMVF9PUFRJT05TKSx0aGlzLl9vcHRpb25zTWFuYWdlcj1uZXcgcyh0aGlzLm9wdGlvbnMpLHQmJnRoaXMuc2V0T3B0aW9ucyh0KSx0aGlzLl9ldmVudElucHV0PW5ldyBvLHRoaXMuX2V2ZW50T3V0cHV0PW5ldyBvLG8uc2V0SW5wdXRIYW5kbGVyKHRoaXMsdGhpcy5fZXZlbnRJbnB1dCksby5zZXRPdXRwdXRIYW5kbGVyKHRoaXMsdGhpcy5fZXZlbnRPdXRwdXQpLHRoaXMuX2lkPW4ucmVnaXN0ZXIodGhpcyl9dmFyIG49dChcIi4uL2NvcmUvRW50aXR5XCIpLG89KHQoXCIuLi9jb3JlL1RyYW5zZm9ybVwiKSx0KFwiLi4vY29yZS9FdmVudEhhbmRsZXJcIikpLHM9dChcIi4uL2NvcmUvT3B0aW9uc01hbmFnZXJcIik7ZS5ERUZBVUxUX09QVElPTlM9e30sZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fb3B0aW9uc01hbmFnZXIuc2V0T3B0aW9ucyh0KX0sZS5wcm90b3R5cGUuZ2V0T3B0aW9ucz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fb3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyh0KX0sZS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lkfSxlLnByb3RvdHlwZS5jb21taXQ9ZnVuY3Rpb24oKXt9LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL0VudGl0eVwiOjUsXCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiOjcsXCIuLi9jb3JlL09wdGlvbnNNYW5hZ2VyXCI6MTAsXCIuLi9jb3JlL1RyYW5zZm9ybVwiOjE1fV0sOTg6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSgpe2MuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuc3RhdGU9bmV3IGEoMCksdGhpcy5faXNPcGVuPSExLHRoaXMuc2V0T3V0cHV0RnVuY3Rpb24oZnVuY3Rpb24odCxpLGUpe3ZhciBvPW4uY2FsbCh0aGlzKSxyPXRoaXMub3B0aW9ucy5kaXJlY3Rpb249PT1oLkRpcmVjdGlvbi5YP3MudHJhbnNsYXRlKG8qaSwwLC4wMDEqKG8tMSkqaSk6cy50cmFuc2xhdGUoMCxvKmksLjAwMSooby0xKSppKSxhPXQucmVuZGVyKCk7aWYodGhpcy5vcHRpb25zLnN0YWNrUm90YXRpb24pe3ZhciBjPXRoaXMub3B0aW9ucy5zdGFja1JvdGF0aW9uKmUqKDEtbyk7YT17dHJhbnNmb3JtOnMucm90YXRlWihjKSxvcmlnaW46Wy41LC41XSx0YXJnZXQ6YX19cmV0dXJue3RyYW5zZm9ybTpyLHNpemU6dC5nZXRTaXplKCksdGFyZ2V0OmF9fSl9ZnVuY3Rpb24gbih0KXtyZXR1cm4gdD90aGlzLl9pc09wZW4/MTowOnRoaXMuc3RhdGUuZ2V0KCl9ZnVuY3Rpb24gbyh0LGksZSl7dGhpcy5zdGF0ZS5oYWx0KCksdGhpcy5zdGF0ZS5zZXQodCxpLGUpfXZhciBzPXQoXCIuLi9jb3JlL1RyYW5zZm9ybVwiKSxyPXQoXCIuLi9jb3JlL09wdGlvbnNNYW5hZ2VyXCIpLGE9dChcIi4uL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlXCIpLGg9dChcIi4uL3V0aWxpdGllcy9VdGlsaXR5XCIpLGM9dChcIi4vU2VxdWVudGlhbExheW91dFwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUuREVGQVVMVF9PUFRJT05TPXIucGF0Y2goYy5ERUZBVUxUX09QVElPTlMse3RyYW5zaXRpb246e2N1cnZlOlwiZWFzZU91dEJvdW5jZVwiLGR1cmF0aW9uOjUwMH0sc3RhY2tSb3RhdGlvbjowfSksZS5wcm90b3R5cGUuZ2V0U2l6ZT1mdW5jdGlvbigpe3ZhciB0PWMucHJvdG90eXBlLmdldFNpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpLGk9dGhpcy5faXRlbXM/dGhpcy5faXRlbXMuZ2V0KCkuZ2V0U2l6ZSgpOlswLDBdO2l8fChpPVswLDBdKTt2YXIgZT1uLmNhbGwodGhpcyksbz0xLWU7cmV0dXJuW2lbMF0qbyt0WzBdKmUsaVsxXSpvK3RbMV0qZV19LGUucHJvdG90eXBlLmlzT3Blbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc09wZW59LGUucHJvdG90eXBlLm9wZW49ZnVuY3Rpb24odCl7dGhpcy5faXNPcGVuPSEwLG8uY2FsbCh0aGlzLDEsdGhpcy5vcHRpb25zLnRyYW5zaXRpb24sdCl9LGUucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKHQpe3RoaXMuX2lzT3Blbj0hMSxvLmNhbGwodGhpcywwLHRoaXMub3B0aW9ucy50cmFuc2l0aW9uLHQpfSxlLnByb3RvdHlwZS50b2dnbGU9ZnVuY3Rpb24odCl7dGhpcy5faXNPcGVuP3RoaXMuY2xvc2UodCk6dGhpcy5vcGVuKHQpfSxpLmV4cG9ydHM9ZX0se1wiLi4vY29yZS9PcHRpb25zTWFuYWdlclwiOjEwLFwiLi4vY29yZS9UcmFuc2Zvcm1cIjoxNSxcIi4uL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlXCI6ODgsXCIuLi91dGlsaXRpZXMvVXRpbGl0eVwiOjk1LFwiLi9TZXF1ZW50aWFsTGF5b3V0XCI6MTEwfV0sOTk6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLm9wdGlvbnM9T2JqZWN0LmNyZWF0ZShlLkRFRkFVTFRfT1BUSU9OUyksdGhpcy5fb3B0aW9uc01hbmFnZXI9bmV3IHAodGhpcy5vcHRpb25zKSx0JiZ0aGlzLnNldE9wdGlvbnModCksdGhpcy5fcG9zaXRpb249bmV3IHUoMCksdGhpcy5fZGlyZWN0aW9uPW4odGhpcy5vcHRpb25zLnNpZGUpLHRoaXMuX29yaWVudGF0aW9uPW8odGhpcy5vcHRpb25zLnNpZGUpLHRoaXMuX2lzT3Blbj0hMSx0aGlzLl9jYWNoZWRMZW5ndGg9MCx0aGlzLmRyYXdlcj1uZXcgaCx0aGlzLmNvbnRlbnQ9bmV3IGgsdGhpcy5fZXZlbnRJbnB1dD1uZXcgbCx0aGlzLl9ldmVudE91dHB1dD1uZXcgbCxsLnNldElucHV0SGFuZGxlcih0aGlzLHRoaXMuX2V2ZW50SW5wdXQpLGwuc2V0T3V0cHV0SGFuZGxlcih0aGlzLHRoaXMuX2V2ZW50T3V0cHV0KSx0aGlzLl9ldmVudElucHV0Lm9uKFwidXBkYXRlXCIsci5iaW5kKHRoaXMpKSx0aGlzLl9ldmVudElucHV0Lm9uKFwiZW5kXCIsYS5iaW5kKHRoaXMpKX1mdW5jdGlvbiBuKHQpe3ZhciBpPWUuU0lERVM7cmV0dXJuIHQ9PT1pLkxFRlR8fHQ9PT1pLlJJR0hUP2Y6ZH1mdW5jdGlvbiBvKHQpe3ZhciBpPWUuU0lERVM7cmV0dXJuIHQ9PT1pLkxFRlR8fHQ9PT1pLlRPUD8xOi0xfWZ1bmN0aW9uIHModCl7dmFyIGksZT10aGlzLm9wdGlvbnM7aWYoZS5kcmF3ZXJMZW5ndGgpaT1lLmRyYXdlckxlbmd0aDtlbHNle3ZhciBuPXQuZ2V0U2l6ZSgpO2k9bj9uW3RoaXMuX2RpcmVjdGlvbl06ZS5kcmF3ZXJMZW5ndGh9cmV0dXJuIHRoaXMuX29yaWVudGF0aW9uKml9ZnVuY3Rpb24gcih0KXt2YXIgaSxlLG49dGhpcy5nZXRQb3NpdGlvbigpK3QuZGVsdGE7dGhpcy5fY2FjaGVkTGVuZ3RoPXMuY2FsbCh0aGlzLHRoaXMuZHJhd2VyKSwxPT09dGhpcy5fb3JpZW50YXRpb24/KGk9MCxlPXRoaXMuX2NhY2hlZExlbmd0aCk6KGk9dGhpcy5fY2FjaGVkTGVuZ3RoLGU9MCksbj5lP249ZTppPm4mJihuPWkpLHRoaXMuc2V0UG9zaXRpb24obil9ZnVuY3Rpb24gYSh0KXt2YXIgaT10LnZlbG9jaXR5LGU9dGhpcy5fb3JpZW50YXRpb24qdGhpcy5nZXRQb3NpdGlvbigpLG49dGhpcy5vcHRpb25zLG89dGhpcy5fb3JpZW50YXRpb24qdGhpcy5fY2FjaGVkTGVuZ3RoLHM9bi5wb3NpdGlvblRocmVzaG9sZHx8by8yLHI9bi52ZWxvY2l0eVRocmVzaG9sZDtpZihuLnRyYW5zaXRpb24gaW5zdGFuY2VvZiBPYmplY3QmJihuLnRyYW5zaXRpb24udmVsb2NpdHk9dC52ZWxvY2l0eSksMD09PWUpcmV0dXJuIHZvaWQodGhpcy5faXNPcGVuPSExKTtpZihlPT09bylyZXR1cm4gdm9pZCh0aGlzLl9pc09wZW49ITApO3ZhciBhPU1hdGguYWJzKGkpPnJ8fCF0aGlzLl9pc09wZW4mJmU+c3x8dGhpcy5faXNPcGVuJiZzPmU7YT90aGlzLnRvZ2dsZSgpOnRoaXMucmVzZXQoKX12YXIgaD10KFwiLi4vY29yZS9SZW5kZXJOb2RlXCIpLGM9dChcIi4uL2NvcmUvVHJhbnNmb3JtXCIpLHA9dChcIi4uL2NvcmUvT3B0aW9uc01hbmFnZXJcIiksdT10KFwiLi4vdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGVcIiksbD10KFwiLi4vY29yZS9FdmVudEhhbmRsZXJcIiksZj0wLGQ9MTtlLlNJREVTPXtMRUZUOjAsVE9QOjEsUklHSFQ6MixCT1RUT006M30sZS5ERUZBVUxUX09QVElPTlM9e3NpZGU6ZS5TSURFUy5MRUZULGRyYXdlckxlbmd0aDowLHZlbG9jaXR5VGhyZXNob2xkOjAscG9zaXRpb25UaHJlc2hvbGQ6MCx0cmFuc2l0aW9uOiEwfSxlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3RoaXMuX29wdGlvbnNNYW5hZ2VyLnNldE9wdGlvbnModCksdm9pZCAwIT09dC5zaWRlJiYodGhpcy5fZGlyZWN0aW9uPW4odC5zaWRlKSx0aGlzLl9vcmllbnRhdGlvbj1vKHQuc2lkZSkpfSxlLnByb3RvdHlwZS5vcGVuPWZ1bmN0aW9uKHQsaSl7dCBpbnN0YW5jZW9mIEZ1bmN0aW9uJiYoaT10KSx2b2lkIDA9PT10JiYodD10aGlzLm9wdGlvbnMudHJhbnNpdGlvbiksdGhpcy5fY2FjaGVkTGVuZ3RoPXMuY2FsbCh0aGlzLHRoaXMuZHJhd2VyKSx0aGlzLnNldFBvc2l0aW9uKHRoaXMuX2NhY2hlZExlbmd0aCx0LGkpLHRoaXMuX2lzT3Blbnx8KHRoaXMuX2lzT3Blbj0hMCx0aGlzLl9ldmVudE91dHB1dC5lbWl0KFwib3BlblwiKSl9LGUucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKHQsaSl7dCBpbnN0YW5jZW9mIEZ1bmN0aW9uJiYoaT10KSx2b2lkIDA9PT10JiYodD10aGlzLm9wdGlvbnMudHJhbnNpdGlvbiksdGhpcy5zZXRQb3NpdGlvbigwLHQsaSksdGhpcy5faXNPcGVuJiYodGhpcy5faXNPcGVuPSExLHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoXCJjbG9zZVwiKSl9LGUucHJvdG90eXBlLnNldFBvc2l0aW9uPWZ1bmN0aW9uKHQsaSxlKXt0aGlzLl9wb3NpdGlvbi5pc0FjdGl2ZSgpJiZ0aGlzLl9wb3NpdGlvbi5oYWx0KCksdGhpcy5fcG9zaXRpb24uc2V0KHQsaSxlKX0sZS5wcm90b3R5cGUuZ2V0UG9zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcG9zaXRpb24uZ2V0KCl9LGUucHJvdG90eXBlLnNldFByb2dyZXNzPWZ1bmN0aW9uKHQsaSxlKXtyZXR1cm4gdGhpcy5fcG9zaXRpb24uc2V0KHQqdGhpcy5fY2FjaGVkTGVuZ3RoLGksZSl9LGUucHJvdG90eXBlLmdldFByb2dyZXNzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Bvc2l0aW9uLmdldCgpL3RoaXMuX2NhY2hlZExlbmd0aH0sZS5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uKHQpe3RoaXMuX2lzT3Blbj90aGlzLmNsb3NlKHQpOnRoaXMub3Blbih0KX0sZS5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24odCl7dGhpcy5faXNPcGVuP3RoaXMub3Blbih0KTp0aGlzLmNsb3NlKHQpfSxlLnByb3RvdHlwZS5pc09wZW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNPcGVufSxlLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldFBvc2l0aW9uKCk7KCF0aGlzLl9pc09wZW4mJjA+dCYmMT09PXRoaXMuX29yaWVudGF0aW9ufHx0PjAmJi0xPT09dGhpcy5fb3JpZW50YXRpb24pJiYodD0wLHRoaXMuc2V0UG9zaXRpb24odCkpO3ZhciBpPXRoaXMuX2RpcmVjdGlvbj09PWY/Yy50cmFuc2xhdGUodCwwLDApOmMudHJhbnNsYXRlKDAsdCwwKTtyZXR1cm5be3RyYW5zZm9ybTpjLmJlaGluZCx0YXJnZXQ6dGhpcy5kcmF3ZXIucmVuZGVyKCl9LHt0cmFuc2Zvcm06aSx0YXJnZXQ6dGhpcy5jb250ZW50LnJlbmRlcigpfV19LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiOjcsXCIuLi9jb3JlL09wdGlvbnNNYW5hZ2VyXCI6MTAsXCIuLi9jb3JlL1JlbmRlck5vZGVcIjoxMSxcIi4uL2NvcmUvVHJhbnNmb3JtXCI6MTUsXCIuLi90cmFuc2l0aW9ucy9UcmFuc2l0aW9uYWJsZVwiOjg4fV0sMTAwOltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dGhpcy5fY3VycmVudFRhcmdldD1udWxsLHRoaXMuX3NpemU9W3ZvaWQgMCx2b2lkIDBdLHRoaXMuX2NvbnRyb2xsZXI9bmV3IGgodCksdGhpcy5fY29udHJvbGxlci5pblRyYW5zZm9ybUZyb20oby5jcmVhdGUobi5iaW5kKHRoaXMsMWUtNCkpKSx0aGlzLl9jb250cm9sbGVyLm91dFRyYW5zZm9ybUZyb20oby5jcmVhdGUobi5iaW5kKHRoaXMsLTFlLTQpKSksdGhpcy5fZXZlbnRJbnB1dD1uZXcgcixyLnNldElucHV0SGFuZGxlcih0aGlzLHRoaXMuX2V2ZW50SW5wdXQpLHRoaXMuX2VudGl0eUlkPXMucmVnaXN0ZXIodGhpcyksdCYmdGhpcy5zZXRPcHRpb25zKHQpfWZ1bmN0aW9uIG4odCxpKXtyZXR1cm4gYS50cmFuc2xhdGUodGhpcy5fc2l6ZVswXSooMS1pKSwwLHQqKDEtaSkpfXZhciBvPXQoXCIuLi90cmFuc2l0aW9ucy9DYWNoZWRNYXBcIikscz10KFwiLi4vY29yZS9FbnRpdHlcIikscj10KFwiLi4vY29yZS9FdmVudEhhbmRsZXJcIiksYT10KFwiLi4vY29yZS9UcmFuc2Zvcm1cIiksaD10KFwiLi9SZW5kZXJDb250cm9sbGVyXCIpO2UucHJvdG90eXBlLnNob3c9ZnVuY3Rpb24odCl7dGhpcy5fY3VycmVudFRhcmdldCYmdGhpcy5fZXZlbnRJbnB1dC51bnBpcGUodGhpcy5fY3VycmVudFRhcmdldCksdGhpcy5fY3VycmVudFRhcmdldD10LHRoaXMuX2N1cnJlbnRUYXJnZXQmJnRoaXMuX2N1cnJlbnRUYXJnZXQudHJpZ2dlciYmdGhpcy5fZXZlbnRJbnB1dC5waXBlKHRoaXMuX2N1cnJlbnRUYXJnZXQpLHRoaXMuX2NvbnRyb2xsZXIuc2hvdy5hcHBseSh0aGlzLl9jb250cm9sbGVyLGFyZ3VtZW50cyl9LGUucHJvdG90eXBlLnNldE9wdGlvbnM9ZnVuY3Rpb24odCl7dGhpcy5fY29udHJvbGxlci5zZXRPcHRpb25zKHQpfSxlLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW50aXR5SWR9LGUucHJvdG90eXBlLmNvbW1pdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fc2l6ZVswXT10LnNpemVbMF0sdGhpcy5fc2l6ZVsxXT10LnNpemVbMV0se3RyYW5zZm9ybTp0LnRyYW5zZm9ybSxvcGFjaXR5OnQub3BhY2l0eSxvcmlnaW46dC5vcmlnaW4sc2l6ZTp0LnNpemUsdGFyZ2V0OnRoaXMuX2NvbnRyb2xsZXIucmVuZGVyKCl9fSxpLmV4cG9ydHM9ZX0se1wiLi4vY29yZS9FbnRpdHlcIjo1LFwiLi4vY29yZS9FdmVudEhhbmRsZXJcIjo3LFwiLi4vY29yZS9UcmFuc2Zvcm1cIjoxNSxcIi4uL3RyYW5zaXRpb25zL0NhY2hlZE1hcFwiOjgzLFwiLi9SZW5kZXJDb250cm9sbGVyXCI6MTA2fV0sMTAxOltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dGhpcy5vcHRpb25zPU9iamVjdC5jcmVhdGUoZS5ERUZBVUxUX09QVElPTlMpLHRoaXMub3B0aW9uc01hbmFnZXI9bmV3IGEodGhpcy5vcHRpb25zKSx0JiZ0aGlzLnNldE9wdGlvbnModCksdGhpcy5pZD1zLnJlZ2lzdGVyKHRoaXMpLHRoaXMuX3JhdGlvcz1uZXcgYyh0aGlzLm9wdGlvbnMucmF0aW9zKSx0aGlzLl9ub2Rlcz1bXSx0aGlzLl9zaXplPVswLDBdLHRoaXMuX2NhY2hlZERpcmVjdGlvbj1udWxsLHRoaXMuX2NhY2hlZExlbmd0aHM9W10sdGhpcy5fY2FjaGVkVHJhbnNmb3Jtcz1udWxsLHRoaXMuX3JhdGlvc0RpcnR5PSExLHRoaXMuX2V2ZW50T3V0cHV0PW5ldyBoLGguc2V0T3V0cHV0SGFuZGxlcih0aGlzLHRoaXMuX2V2ZW50T3V0cHV0KX1mdW5jdGlvbiBuKHQsaSxuKXt2YXIgbyxzLGEsaCxjPTAscD1pLHU9MDtmb3IodGhpcy5fY2FjaGVkTGVuZ3Rocz1bXSx0aGlzLl9jYWNoZWRUcmFuc2Zvcm1zPVtdLGg9MDtoPHQubGVuZ3RoO2grKylzPXRbaF0sYT10aGlzLl9ub2Rlc1toXSxcIm51bWJlclwiIT10eXBlb2Ygcz9wLT1hLmdldFNpemUoKVtuXXx8MDp1Kz1zO2ZvcihoPTA7aDx0Lmxlbmd0aDtoKyspYT10aGlzLl9ub2Rlc1toXSxzPXRbaF0saT1cIm51bWJlclwiPT10eXBlb2Ygcz9wKnMvdTphLmdldFNpemUoKVtuXSxvPW49PT1lLkRJUkVDVElPTl9YP3IudHJhbnNsYXRlKGMsMCwwKTpyLnRyYW5zbGF0ZSgwLGMsMCksdGhpcy5fY2FjaGVkVHJhbnNmb3Jtcy5wdXNoKG8pLHRoaXMuX2NhY2hlZExlbmd0aHMucHVzaChpKSxjKz1pfWZ1bmN0aW9uIG8odCxpKXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZihcIm51bWJlclwiIT10eXBlb2YgdFtlXSYmdGhpcy5fbm9kZXNbZV0uZ2V0U2l6ZSgpW2ldIT09dGhpcy5fY2FjaGVkTGVuZ3Roc1tlXSlyZXR1cm4hMDtyZXR1cm4hMX12YXIgcz10KFwiLi4vY29yZS9FbnRpdHlcIikscj10KFwiLi4vY29yZS9UcmFuc2Zvcm1cIiksYT10KFwiLi4vY29yZS9PcHRpb25zTWFuYWdlclwiKSxoPXQoXCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiKSxjPXQoXCIuLi90cmFuc2l0aW9ucy9UcmFuc2l0aW9uYWJsZVwiKTtlLkRJUkVDVElPTl9YPTAsZS5ESVJFQ1RJT05fWT0xLGUuREVGQVVMVF9PUFRJT05TPXtkaXJlY3Rpb246ZS5ESVJFQ1RJT05fWCx0cmFuc2l0aW9uOiExLHJhdGlvczpbXX0sZS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaWR9LGUucHJvdG90eXBlLnNldE9wdGlvbnM9ZnVuY3Rpb24odCl7dGhpcy5vcHRpb25zTWFuYWdlci5zZXRPcHRpb25zKHQpfSxlLnByb3RvdHlwZS5zZXF1ZW5jZUZyb209ZnVuY3Rpb24odCl7aWYodGhpcy5fbm9kZXM9dCwwPT09dGhpcy5fcmF0aW9zLmdldCgpLmxlbmd0aCl7Zm9yKHZhciBpPVtdLGU9MDtlPHRoaXMuX25vZGVzLmxlbmd0aDtlKyspaS5wdXNoKDEpO3RoaXMuc2V0UmF0aW9zKGkpfX0sZS5wcm90b3R5cGUuc2V0UmF0aW9zPWZ1bmN0aW9uKHQsaSxlKXt2b2lkIDA9PT1pJiYoaT10aGlzLm9wdGlvbnMudHJhbnNpdGlvbik7dmFyIG49dGhpcy5fcmF0aW9zOzA9PT1uLmdldCgpLmxlbmd0aCYmKGk9dm9pZCAwKSxuLmlzQWN0aXZlKCkmJm4uaGFsdCgpLG4uc2V0KHQsaSxlKSx0aGlzLl9yYXRpb3NEaXJ0eT0hMH0sZS5wcm90b3R5cGUuZ2V0U2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaXplfSxlLnByb3RvdHlwZS5jb21taXQ9ZnVuY3Rpb24odCl7dmFyIGksZT10LnNpemUscz10LnRyYW5zZm9ybSxhPXQub3JpZ2luLGg9dC5vcGFjaXR5LGM9dGhpcy5fcmF0aW9zLmdldCgpLHA9dGhpcy5vcHRpb25zLmRpcmVjdGlvbix1PWVbcF07KHUhPT10aGlzLl9zaXplW3BdfHx0aGlzLl9yYXRpb3NEaXJ0eXx8dGhpcy5fcmF0aW9zLmlzQWN0aXZlKCl8fHAhPT10aGlzLl9jYWNoZWREaXJlY3Rpb258fG8uY2FsbCh0aGlzLGMscCkpJiYobi5jYWxsKHRoaXMsYyx1LHApLHUhPT10aGlzLl9zaXplW3BdJiYodGhpcy5fc2l6ZVswXT1lWzBdLHRoaXMuX3NpemVbMV09ZVsxXSkscCE9PXRoaXMuX2NhY2hlZERpcmVjdGlvbiYmKHRoaXMuX2NhY2hlZERpcmVjdGlvbj1wKSx0aGlzLl9yYXRpb3NEaXJ0eSYmKHRoaXMuX3JhdGlvc0RpcnR5PSExKSk7Zm9yKHZhciBsPVtdLGY9MDtmPGMubGVuZ3RoO2YrKylpPVt2b2lkIDAsdm9pZCAwXSx1PXRoaXMuX2NhY2hlZExlbmd0aHNbZl0saVtwXT11LGwucHVzaCh7dHJhbnNmb3JtOnRoaXMuX2NhY2hlZFRyYW5zZm9ybXNbZl0sc2l6ZTppLHRhcmdldDp0aGlzLl9ub2Rlc1tmXS5yZW5kZXIoKX0pO3JldHVybiBlJiYwIT09YVswXSYmMCE9PWFbMV0mJihzPXIubW92ZVRoZW4oWy1lWzBdKmFbMF0sLWVbMV0qYVsxXSwwXSxzKSkse3RyYW5zZm9ybTpzLHNpemU6ZSxvcGFjaXR5OmgsdGFyZ2V0Omx9fSxpLmV4cG9ydHM9ZX0se1wiLi4vY29yZS9FbnRpdHlcIjo1LFwiLi4vY29yZS9FdmVudEhhbmRsZXJcIjo3LFwiLi4vY29yZS9PcHRpb25zTWFuYWdlclwiOjEwLFwiLi4vY29yZS9UcmFuc2Zvcm1cIjoxNSxcIi4uL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlXCI6ODh9XSwxMDI6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLm9wdGlvbnM9T2JqZWN0LmNyZWF0ZShlLkRFRkFVTFRfT1BUSU9OUyksdGhpcy5fb3B0aW9uc01hbmFnZXI9bmV3IHModGhpcy5vcHRpb25zKSx0JiZ0aGlzLnNldE9wdGlvbnModCksdGhpcy5hbmdsZT1uZXcgbygwKSx0aGlzLmZyb250Tm9kZT12b2lkIDAsdGhpcy5iYWNrTm9kZT12b2lkIDAsdGhpcy5mbGlwcGVkPSExfXZhciBuPXQoXCIuLi9jb3JlL1RyYW5zZm9ybVwiKSxvPXQoXCIuLi90cmFuc2l0aW9ucy9UcmFuc2l0aW9uYWJsZVwiKSxzPSh0KFwiLi4vY29yZS9SZW5kZXJOb2RlXCIpLHQoXCIuLi9jb3JlL09wdGlvbnNNYW5hZ2VyXCIpKTtlLkRJUkVDVElPTl9YPTAsZS5ESVJFQ1RJT05fWT0xO3ZhciByPTE7ZS5ERUZBVUxUX09QVElPTlM9e3RyYW5zaXRpb246ITAsZGlyZWN0aW9uOmUuRElSRUNUSU9OX1h9LGUucHJvdG90eXBlLmZsaXA9ZnVuY3Rpb24odCxpKXt2YXIgZT10aGlzLmZsaXBwZWQ/MDpNYXRoLlBJO3RoaXMuc2V0QW5nbGUoZSx0LGkpLHRoaXMuZmxpcHBlZD0hdGhpcy5mbGlwcGVkfSxlLnByb3RvdHlwZS5zZXRBbmdsZT1mdW5jdGlvbih0LGksZSl7dm9pZCAwPT09aSYmKGk9dGhpcy5vcHRpb25zLnRyYW5zaXRpb24pLHRoaXMuYW5nbGUuaXNBY3RpdmUoKSYmdGhpcy5hbmdsZS5oYWx0KCksdGhpcy5hbmdsZS5zZXQodCxpLGUpfSxlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9vcHRpb25zTWFuYWdlci5zZXRPcHRpb25zKHQpfSxlLnByb3RvdHlwZS5zZXRGcm9udD1mdW5jdGlvbih0KXt0aGlzLmZyb250Tm9kZT10fSxlLnByb3RvdHlwZS5zZXRCYWNrPWZ1bmN0aW9uKHQpe3RoaXMuYmFja05vZGU9dH0sZS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKCl7dmFyIHQsaSxvPXRoaXMuYW5nbGUuZ2V0KCk7dGhpcy5vcHRpb25zLmRpcmVjdGlvbj09PWUuRElSRUNUSU9OX1g/KHQ9bi5yb3RhdGVZKG8pLGk9bi5yb3RhdGVZKG8rTWF0aC5QSSkpOih0PW4ucm90YXRlWChvKSxpPW4ucm90YXRlWChvK01hdGguUEkpKTt2YXIgcz1bXTtyZXR1cm4gdGhpcy5mcm9udE5vZGUmJnMucHVzaCh7dHJhbnNmb3JtOnQsdGFyZ2V0OnRoaXMuZnJvbnROb2RlLnJlbmRlcigpfSksdGhpcy5iYWNrTm9kZSYmcy5wdXNoKHt0cmFuc2Zvcm06bi5tb3ZlVGhlbihbMCwwLHJdLGkpLHRhcmdldDp0aGlzLmJhY2tOb2RlLnJlbmRlcigpfSksc30saS5leHBvcnRzPWV9LHtcIi4uL2NvcmUvT3B0aW9uc01hbmFnZXJcIjoxMCxcIi4uL2NvcmUvUmVuZGVyTm9kZVwiOjExLFwiLi4vY29yZS9UcmFuc2Zvcm1cIjoxNSxcIi4uL3RyYW5zaXRpb25zL1RyYW5zaXRpb25hYmxlXCI6ODh9XSwxMDM6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLm9wdGlvbnM9T2JqZWN0LmNyZWF0ZShlLkRFRkFVTFRfT1BUSU9OUyksdGhpcy5vcHRpb25zTWFuYWdlcj1uZXcgdSh0aGlzLm9wdGlvbnMpLHQmJnRoaXMuc2V0T3B0aW9ucyh0KSx0aGlzLmlkPXIucmVnaXN0ZXIodGhpcyksdGhpcy5fbW9kaWZpZXJzPVtdLHRoaXMuX3N0YXRlcz1bXSx0aGlzLl9jb250ZXh0U2l6ZUNhY2hlPVswLDBdLHRoaXMuX2RpbWVuc2lvbnNDYWNoZT1bMCwwXSx0aGlzLl9hY3RpdmVDb3VudD0wLHRoaXMuX2V2ZW50T3V0cHV0PW5ldyBjLGMuc2V0T3V0cHV0SGFuZGxlcih0aGlzLHRoaXMuX2V2ZW50T3V0cHV0KX1mdW5jdGlvbiBuKHQsaSxlKXt2YXIgbj1bdFswXSx0WzFdXTtuWzBdLT10aGlzLm9wdGlvbnMuZ3V0dGVyU2l6ZVswXSooaS0xKSxuWzFdLT10aGlzLm9wdGlvbnMuZ3V0dGVyU2l6ZVsxXSooZS0xKTtmb3IodmFyIHIsYT1NYXRoLnJvdW5kKG5bMV0vZSksaD1NYXRoLnJvdW5kKG5bMF0vaSksYz0wLHA9MCx1PTA7ZT51O3UrKyl7cj0wO2Zvcih2YXIgbD0wO2k+bDtsKyspdm9pZCAwPT09dGhpcy5fbW9kaWZpZXJzW3BdP28uY2FsbCh0aGlzLHAsW2gsYV0sW3IsYywwXSwxKTpzLmNhbGwodGhpcyxwLFtoLGFdLFtyLGMsMF0sMSkscCsrLHIrPWgrdGhpcy5vcHRpb25zLmd1dHRlclNpemVbMF07Yys9YSt0aGlzLm9wdGlvbnMuZ3V0dGVyU2l6ZVsxXX1mb3IodGhpcy5fZGltZW5zaW9uc0NhY2hlPVt0aGlzLm9wdGlvbnMuZGltZW5zaW9uc1swXSx0aGlzLm9wdGlvbnMuZGltZW5zaW9uc1sxXV0sdGhpcy5fY29udGV4dFNpemVDYWNoZT1bdFswXSx0WzFdXSx0aGlzLl9hY3RpdmVDb3VudD1lKmksdT10aGlzLl9hY3RpdmVDb3VudDt1PHRoaXMuX21vZGlmaWVycy5sZW5ndGg7dSsrKXMuY2FsbCh0aGlzLHUsW01hdGgucm91bmQoaCksTWF0aC5yb3VuZChhKV0sWzAsMF0sMCk7dGhpcy5fZXZlbnRPdXRwdXQuZW1pdChcInJlZmxvd1wiKX1mdW5jdGlvbiBvKHQsaSxlLG4pe3ZhciBvPXt0cmFuc2Zvcm06bmV3IGYoYS50cmFuc2xhdGUuYXBwbHkobnVsbCxlKSksb3BhY2l0eTpuZXcgbChuKSxzaXplOm5ldyBsKGkpfSxzPW5ldyBwKHt0cmFuc2Zvcm06by50cmFuc2Zvcm0sb3BhY2l0eTpvLm9wYWNpdHksc2l6ZTpvLnNpemV9KTt0aGlzLl9zdGF0ZXNbdF09byx0aGlzLl9tb2RpZmllcnNbdF09c31mdW5jdGlvbiBzKHQsaSxlLG4pe3ZhciBvPXRoaXMuX3N0YXRlc1t0XSxzPW8uc2l6ZSxyPW8ub3BhY2l0eSxhPW8udHJhbnNmb3JtLGg9dGhpcy5vcHRpb25zLnRyYW5zaXRpb247YS5oYWx0KCksci5oYWx0KCkscy5oYWx0KCksYS5zZXRUcmFuc2xhdGUoZSxoKSxzLnNldChpLGgpLHIuc2V0KG4saCl9dmFyIHI9dChcIi4uL2NvcmUvRW50aXR5XCIpLGE9KHQoXCIuLi9jb3JlL1JlbmRlck5vZGVcIiksdChcIi4uL2NvcmUvVHJhbnNmb3JtXCIpKSxoPXQoXCIuLi9jb3JlL1ZpZXdTZXF1ZW5jZVwiKSxjPXQoXCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiKSxwPXQoXCIuLi9jb3JlL01vZGlmaWVyXCIpLHU9dChcIi4uL2NvcmUvT3B0aW9uc01hbmFnZXJcIiksbD10KFwiLi4vdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGVcIiksZj10KFwiLi4vdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGVUcmFuc2Zvcm1cIik7ZS5ERUZBVUxUX09QVElPTlM9e2RpbWVuc2lvbnM6WzEsMV0sdHJhbnNpdGlvbjohMSxndXR0ZXJTaXplOlswLDBdfSxlLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pZH0sZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5vcHRpb25zTWFuYWdlci5zZXRPcHRpb25zKHQpfSxlLnByb3RvdHlwZS5zZXF1ZW5jZUZyb209ZnVuY3Rpb24odCl7dCBpbnN0YW5jZW9mIEFycmF5JiYodD1uZXcgaCh0KSksdGhpcy5zZXF1ZW5jZT10fSxlLnByb3RvdHlwZS5jb21taXQ9ZnVuY3Rpb24odCl7dmFyIGk9dC50cmFuc2Zvcm0sZT10Lm9wYWNpdHksbz10Lm9yaWdpbixzPXQuc2l6ZSxyPXRoaXMub3B0aW9ucy5kaW1lbnNpb25zWzBdLGg9dGhpcy5vcHRpb25zLmRpbWVuc2lvbnNbMV07KHNbMF0hPT10aGlzLl9jb250ZXh0U2l6ZUNhY2hlWzBdfHxzWzFdIT09dGhpcy5fY29udGV4dFNpemVDYWNoZVsxXXx8ciE9PXRoaXMuX2RpbWVuc2lvbnNDYWNoZVswXXx8aCE9PXRoaXMuX2RpbWVuc2lvbnNDYWNoZVsxXSkmJm4uY2FsbCh0aGlzLHMscixoKTtmb3IodmFyIGM9dGhpcy5zZXF1ZW5jZSxwPVtdLHU9MDtjJiZ1PHRoaXMuX21vZGlmaWVycy5sZW5ndGg7KXt2YXIgbD1jLmdldCgpLGY9dGhpcy5fbW9kaWZpZXJzW3VdO3U+PXRoaXMuX2FjdGl2ZUNvdW50JiZ0aGlzLl9zdGF0ZXNbdV0ub3BhY2l0eS5pc0FjdGl2ZSgpJiYodGhpcy5fbW9kaWZpZXJzLnNwbGljZSh1LDEpLHRoaXMuX3N0YXRlcy5zcGxpY2UodSwxKSksbCYmcC5wdXNoKGYubW9kaWZ5KHtvcmlnaW46byx0YXJnZXQ6bC5yZW5kZXIoKX0pKSxjPWMuZ2V0TmV4dCgpLHUrK31yZXR1cm4gcyYmKGk9YS5tb3ZlVGhlbihbLXNbMF0qb1swXSwtc1sxXSpvWzFdLDBdLGkpKSx7dHJhbnNmb3JtOmksb3BhY2l0eTplLHNpemU6cyx0YXJnZXQ6cH19LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL0VudGl0eVwiOjUsXCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiOjcsXCIuLi9jb3JlL01vZGlmaWVyXCI6OSxcIi4uL2NvcmUvT3B0aW9uc01hbmFnZXJcIjoxMCxcIi4uL2NvcmUvUmVuZGVyTm9kZVwiOjExLFwiLi4vY29yZS9UcmFuc2Zvcm1cIjoxNSxcIi4uL2NvcmUvVmlld1NlcXVlbmNlXCI6MTcsXCIuLi90cmFuc2l0aW9ucy9UcmFuc2l0aW9uYWJsZVwiOjg4LFwiLi4vdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGVUcmFuc2Zvcm1cIjo4OX1dLDEwNDpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3RoaXMub3B0aW9ucz1PYmplY3QuY3JlYXRlKGUuREVGQVVMVF9PUFRJT05TKSx0aGlzLl9vcHRpb25zTWFuYWdlcj1uZXcgYyh0aGlzLm9wdGlvbnMpLHQmJnRoaXMuc2V0T3B0aW9ucyh0KSx0aGlzLl9lbnRpdHlJZD1yLnJlZ2lzdGVyKHRoaXMpLHRoaXMuaGVhZGVyPW5ldyBhLHRoaXMuZm9vdGVyPW5ldyBhLHRoaXMuY29udGVudD1uZXcgYX1mdW5jdGlvbiBuKHQsaSl7dmFyIGU9dC5nZXRTaXplKCk7cmV0dXJuIGU/ZVt0aGlzLm9wdGlvbnMuZGlyZWN0aW9uXTppfWZ1bmN0aW9uIG8odCl7cmV0dXJuIHRoaXMub3B0aW9ucy5kaXJlY3Rpb249PT1lLkRJUkVDVElPTl9YP2gudHJhbnNsYXRlKHQsMCwwKTpoLnRyYW5zbGF0ZSgwLHQsMCl9ZnVuY3Rpb24gcyh0LGkpe3JldHVybiB0aGlzLm9wdGlvbnMuZGlyZWN0aW9uPT09ZS5ESVJFQ1RJT05fWD9bdCxpWzFdXTpbaVswXSx0XX12YXIgcj10KFwiLi4vY29yZS9FbnRpdHlcIiksYT10KFwiLi4vY29yZS9SZW5kZXJOb2RlXCIpLGg9dChcIi4uL2NvcmUvVHJhbnNmb3JtXCIpLGM9dChcIi4uL2NvcmUvT3B0aW9uc01hbmFnZXJcIik7ZS5ESVJFQ1RJT05fWD0wLGUuRElSRUNUSU9OX1k9MSxlLkRFRkFVTFRfT1BUSU9OUz17ZGlyZWN0aW9uOmUuRElSRUNUSU9OX1ksaGVhZGVyU2l6ZTp2b2lkIDAsZm9vdGVyU2l6ZTp2b2lkIDAsZGVmYXVsdEhlYWRlclNpemU6MCxkZWZhdWx0Rm9vdGVyU2l6ZTowfSxlLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW50aXR5SWR9LGUucHJvdG90eXBlLnNldE9wdGlvbnM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX29wdGlvbnNNYW5hZ2VyLnNldE9wdGlvbnModCl9LGUucHJvdG90eXBlLmNvbW1pdD1mdW5jdGlvbih0KXt2YXIgaT10LnRyYW5zZm9ybSxlPXQub3JpZ2luLHI9dC5zaXplLGE9dC5vcGFjaXR5LGM9dm9pZCAwIT09dGhpcy5vcHRpb25zLmhlYWRlclNpemU/dGhpcy5vcHRpb25zLmhlYWRlclNpemU6bi5jYWxsKHRoaXMsdGhpcy5oZWFkZXIsdGhpcy5vcHRpb25zLmRlZmF1bHRIZWFkZXJTaXplKSxwPXZvaWQgMCE9PXRoaXMub3B0aW9ucy5mb290ZXJTaXplP3RoaXMub3B0aW9ucy5mb290ZXJTaXplOm4uY2FsbCh0aGlzLHRoaXMuZm9vdGVyLHRoaXMub3B0aW9ucy5kZWZhdWx0Rm9vdGVyU2l6ZSksdT1yW3RoaXMub3B0aW9ucy5kaXJlY3Rpb25dLWMtcDtyJiYoaT1oLm1vdmVUaGVuKFstclswXSplWzBdLC1yWzFdKmVbMV0sMF0saSkpO3ZhciBsPVt7c2l6ZTpzLmNhbGwodGhpcyxjLHIpLHRhcmdldDp0aGlzLmhlYWRlci5yZW5kZXIoKX0se3RyYW5zZm9ybTpvLmNhbGwodGhpcyxjKSxzaXplOnMuY2FsbCh0aGlzLHUsciksdGFyZ2V0OnRoaXMuY29udGVudC5yZW5kZXIoKX0se3RyYW5zZm9ybTpvLmNhbGwodGhpcyxjK3UpLHNpemU6cy5jYWxsKHRoaXMscCxyKSx0YXJnZXQ6dGhpcy5mb290ZXIucmVuZGVyKCl9XTtyZXR1cm57dHJhbnNmb3JtOmksb3BhY2l0eTphLHNpemU6cix0YXJnZXQ6bH19LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL0VudGl0eVwiOjUsXCIuLi9jb3JlL09wdGlvbnNNYW5hZ2VyXCI6MTAsXCIuLi9jb3JlL1JlbmRlck5vZGVcIjoxMSxcIi4uL2NvcmUvVHJhbnNmb3JtXCI6MTV9XSwxMDU6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLm9wdGlvbnM9T2JqZWN0LmNyZWF0ZShlLkRFRkFVTFRfT1BUSU9OUyksdGhpcy5fb3B0aW9uc01hbmFnZXI9bmV3IGEodGhpcy5vcHRpb25zKSx0JiZ0aGlzLnNldE9wdGlvbnModCksdGhpcy5fc2hvd2luZz0hMSx0aGlzLm5vZGVzPVtdLHRoaXMudHJhbnNmb3Jtcz1bXSx0aGlzLnN0YXRlcz1bXX12YXIgbj10KFwiLi4vY29yZS9UcmFuc2Zvcm1cIiksbz10KFwiLi4vY29yZS9Nb2RpZmllclwiKSxzPXQoXCIuLi9jb3JlL1JlbmRlck5vZGVcIikscj10KFwiLi4vdXRpbGl0aWVzL1V0aWxpdHlcIiksYT10KFwiLi4vY29yZS9PcHRpb25zTWFuYWdlclwiKSxoPXQoXCIuLi90cmFuc2l0aW9ucy9UcmFuc2l0aW9uYWJsZVwiKSxjPXQoXCIuLi90cmFuc2l0aW9ucy9UcmFuc2l0aW9uYWJsZVRyYW5zZm9ybVwiKTtlLkRFRkFVTFRfT1BUSU9OUz17aW5UcmFuc2Zvcm06bi5zY2FsZSguMDAxLC4wMDEsLjAwMSksaW5PcGFjaXR5OjAsaW5PcmlnaW46Wy41LC41XSxpbkFsaWduOlsuNSwuNV0sb3V0VHJhbnNmb3JtOm4uc2NhbGUoLjAwMSwuMDAxLC4wMDEpLG91dE9wYWNpdHk6MCxvdXRPcmlnaW46Wy41LC41XSxvdXRBbGlnbjpbLjUsLjVdLHNob3dUcmFuc2Zvcm06bi5pZGVudGl0eSxzaG93T3BhY2l0eToxLHNob3dPcmlnaW46Wy41LC41XSxzaG93QWxpZ246Wy41LC41XSxpblRyYW5zaXRpb246ITAsb3V0VHJhbnNpdGlvbjohMCxvdmVybGFwOiExfSxlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9vcHRpb25zTWFuYWdlci5zZXRPcHRpb25zKHQpfSxlLnByb3RvdHlwZS5zaG93PWZ1bmN0aW9uKHQsaSxlKXtpZighdClyZXR1cm4gdGhpcy5oaWRlKGUpO2lmKGkgaW5zdGFuY2VvZiBGdW5jdGlvbiYmKGU9aSxpPXZvaWQgMCksdGhpcy5fc2hvd2luZyl7aWYoIXRoaXMub3B0aW9ucy5vdmVybGFwKXJldHVybiB0aGlzLmhpZGUodGhpcy5zaG93LmJpbmQodGhpcyx0LGksZSkpO3RoaXMuaGlkZSgpfXRoaXMuX3Nob3dpbmc9ITA7dmFyIG49e3RyYW5zZm9ybTpuZXcgYyh0aGlzLm9wdGlvbnMuaW5UcmFuc2Zvcm0pLG9yaWdpbjpuZXcgaCh0aGlzLm9wdGlvbnMuaW5PcmlnaW4pLGFsaWduOm5ldyBoKHRoaXMub3B0aW9ucy5pbkFsaWduKSxvcGFjaXR5Om5ldyBoKHRoaXMub3B0aW9ucy5pbk9wYWNpdHkpfSxhPW5ldyBvKHt0cmFuc2Zvcm06bi50cmFuc2Zvcm0sb3BhY2l0eTpuLm9wYWNpdHksb3JpZ2luOm4ub3JpZ2luLGFsaWduOm4uYWxpZ259KSxwPW5ldyBzO3AuYWRkKGEpLmFkZCh0KSx0aGlzLm5vZGVzLnB1c2gocCksdGhpcy5zdGF0ZXMucHVzaChuKSx0aGlzLnRyYW5zZm9ybXMucHVzaChhKTt2YXIgdT1lP3IuYWZ0ZXIoMyxlKTp2b2lkIDA7aXx8KGk9dGhpcy5vcHRpb25zLmluVHJhbnNpdGlvbiksbi50cmFuc2Zvcm0uc2V0KHRoaXMub3B0aW9ucy5zaG93VHJhbnNmb3JtLGksdSksbi5vcGFjaXR5LnNldCh0aGlzLm9wdGlvbnMuc2hvd09wYWNpdHksaSx1KSxuLm9yaWdpbi5zZXQodGhpcy5vcHRpb25zLnNob3dPcmlnaW4saSx1KSxuLmFsaWduLnNldCh0aGlzLm9wdGlvbnMuc2hvd0FsaWduLGksdSl9LGUucHJvdG90eXBlLmhpZGU9ZnVuY3Rpb24odCxpKXtpZih0aGlzLl9zaG93aW5nKXt0aGlzLl9zaG93aW5nPSExLHQgaW5zdGFuY2VvZiBGdW5jdGlvbiYmKGk9dCx0PXZvaWQgMCk7dmFyIGU9dGhpcy5ub2Rlc1t0aGlzLm5vZGVzLmxlbmd0aC0xXSxuPXRoaXMudHJhbnNmb3Jtc1t0aGlzLnRyYW5zZm9ybXMubGVuZ3RoLTFdLG89dGhpcy5zdGF0ZXNbdGhpcy5zdGF0ZXMubGVuZ3RoLTFdLHM9ci5hZnRlcigzLGZ1bmN0aW9uKCl7dGhpcy5ub2Rlcy5zcGxpY2UodGhpcy5ub2Rlcy5pbmRleE9mKGUpLDEpLHRoaXMuc3RhdGVzLnNwbGljZSh0aGlzLnN0YXRlcy5pbmRleE9mKG8pLDEpLHRoaXMudHJhbnNmb3Jtcy5zcGxpY2UodGhpcy50cmFuc2Zvcm1zLmluZGV4T2YobiksMSksaSYmaS5jYWxsKHRoaXMpfS5iaW5kKHRoaXMpKTt0fHwodD10aGlzLm9wdGlvbnMub3V0VHJhbnNpdGlvbiksby50cmFuc2Zvcm0uc2V0KHRoaXMub3B0aW9ucy5vdXRUcmFuc2Zvcm0sdCxzKSxvLm9wYWNpdHkuc2V0KHRoaXMub3B0aW9ucy5vdXRPcGFjaXR5LHQscyksby5vcmlnaW4uc2V0KHRoaXMub3B0aW9ucy5vdXRPcmlnaW4sdCxzKSxvLmFsaWduLnNldCh0aGlzLm9wdGlvbnMub3V0QWxpZ24sdCxzKX19LGUucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxpPTA7aTx0aGlzLm5vZGVzLmxlbmd0aDtpKyspdC5wdXNoKHRoaXMubm9kZXNbaV0ucmVuZGVyKCkpO3JldHVybiB0fSxpLmV4cG9ydHM9ZX0se1wiLi4vY29yZS9Nb2RpZmllclwiOjksXCIuLi9jb3JlL09wdGlvbnNNYW5hZ2VyXCI6MTAsXCIuLi9jb3JlL1JlbmRlck5vZGVcIjoxMSxcIi4uL2NvcmUvVHJhbnNmb3JtXCI6MTUsXCIuLi90cmFuc2l0aW9ucy9UcmFuc2l0aW9uYWJsZVwiOjg4LFwiLi4vdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGVUcmFuc2Zvcm1cIjo4OSxcIi4uL3V0aWxpdGllcy9VdGlsaXR5XCI6OTV9XSwxMDY6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSgpe2guYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuX3Nob3dpbmc9LTEsdGhpcy5fb3V0Z29pbmdSZW5kZXJhYmxlcz1bXSx0aGlzLl9uZXh0UmVuZGVyYWJsZT1udWxsLHRoaXMuX3JlbmRlcmFibGVzPVtdLHRoaXMuX25vZGVzPVtdLHRoaXMuX21vZGlmaWVycz1bXSx0aGlzLl9zdGF0ZXM9W10sdGhpcy5pblRyYW5zZm9ybU1hcD1lLkRlZmF1bHRNYXAudHJhbnNmb3JtLHRoaXMuaW5PcGFjaXR5TWFwPWUuRGVmYXVsdE1hcC5vcGFjaXR5LHRoaXMuaW5PcmlnaW5NYXA9ZS5EZWZhdWx0TWFwLm9yaWdpbix0aGlzLm91dFRyYW5zZm9ybU1hcD1lLkRlZmF1bHRNYXAudHJhbnNmb3JtLHRoaXMub3V0T3BhY2l0eU1hcD1lLkRlZmF1bHRNYXAub3BhY2l0eSx0aGlzLm91dE9yaWdpbk1hcD1lLkRlZmF1bHRNYXAub3JpZ2luLHRoaXMuX291dHB1dD1bXVxufWZ1bmN0aW9uIG4odCxpKXtyZXR1cm4gdChpLmdldCgpKX12YXIgbz10KFwiLi4vY29yZS9Nb2RpZmllclwiKSxzPXQoXCIuLi9jb3JlL1JlbmRlck5vZGVcIikscj10KFwiLi4vY29yZS9UcmFuc2Zvcm1cIiksYT10KFwiLi4vdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGVcIiksaD10KFwiLi4vY29yZS9WaWV3XCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoaC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5ERUZBVUxUX09QVElPTlM9e2luVHJhbnNpdGlvbjohMCxvdXRUcmFuc2l0aW9uOiEwLG92ZXJsYXA6ITB9LGUuRGVmYXVsdE1hcD17dHJhbnNmb3JtOmZ1bmN0aW9uKCl7cmV0dXJuIHIuaWRlbnRpdHl9LG9wYWNpdHk6ZnVuY3Rpb24odCl7cmV0dXJuIHR9LG9yaWdpbjpudWxsfSxlLnByb3RvdHlwZS5pblRyYW5zZm9ybUZyb209ZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIEZ1bmN0aW9uKXRoaXMuaW5UcmFuc2Zvcm1NYXA9dDtlbHNle2lmKCF0fHwhdC5nZXQpdGhyb3cgbmV3IEVycm9yKFwiaW5UcmFuc2Zvcm1Gcm9tIHRha2VzIG9ubHkgZnVuY3Rpb24gb3IgZ2V0dGVyIG9iamVjdFwiKTt0aGlzLmluVHJhbnNmb3JtTWFwPXQuZ2V0LmJpbmQodCl9cmV0dXJuIHRoaXN9LGUucHJvdG90eXBlLmluT3BhY2l0eUZyb209ZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIEZ1bmN0aW9uKXRoaXMuaW5PcGFjaXR5TWFwPXQ7ZWxzZXtpZighdHx8IXQuZ2V0KXRocm93IG5ldyBFcnJvcihcImluT3BhY2l0eUZyb20gdGFrZXMgb25seSBmdW5jdGlvbiBvciBnZXR0ZXIgb2JqZWN0XCIpO3RoaXMuaW5PcGFjaXR5TWFwPXQuZ2V0LmJpbmQodCl9cmV0dXJuIHRoaXN9LGUucHJvdG90eXBlLmluT3JpZ2luRnJvbT1mdW5jdGlvbih0KXtpZih0IGluc3RhbmNlb2YgRnVuY3Rpb24pdGhpcy5pbk9yaWdpbk1hcD10O2Vsc2V7aWYoIXR8fCF0LmdldCl0aHJvdyBuZXcgRXJyb3IoXCJpbk9yaWdpbkZyb20gdGFrZXMgb25seSBmdW5jdGlvbiBvciBnZXR0ZXIgb2JqZWN0XCIpO3RoaXMuaW5PcmlnaW5NYXA9dC5nZXQuYmluZCh0KX1yZXR1cm4gdGhpc30sZS5wcm90b3R5cGUub3V0VHJhbnNmb3JtRnJvbT1mdW5jdGlvbih0KXtpZih0IGluc3RhbmNlb2YgRnVuY3Rpb24pdGhpcy5vdXRUcmFuc2Zvcm1NYXA9dDtlbHNle2lmKCF0fHwhdC5nZXQpdGhyb3cgbmV3IEVycm9yKFwib3V0VHJhbnNmb3JtRnJvbSB0YWtlcyBvbmx5IGZ1bmN0aW9uIG9yIGdldHRlciBvYmplY3RcIik7dGhpcy5vdXRUcmFuc2Zvcm1NYXA9dC5nZXQuYmluZCh0KX1yZXR1cm4gdGhpc30sZS5wcm90b3R5cGUub3V0T3BhY2l0eUZyb209ZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIEZ1bmN0aW9uKXRoaXMub3V0T3BhY2l0eU1hcD10O2Vsc2V7aWYoIXR8fCF0LmdldCl0aHJvdyBuZXcgRXJyb3IoXCJvdXRPcGFjaXR5RnJvbSB0YWtlcyBvbmx5IGZ1bmN0aW9uIG9yIGdldHRlciBvYmplY3RcIik7dGhpcy5vdXRPcGFjaXR5TWFwPXQuZ2V0LmJpbmQodCl9cmV0dXJuIHRoaXN9LGUucHJvdG90eXBlLm91dE9yaWdpbkZyb209ZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIEZ1bmN0aW9uKXRoaXMub3V0T3JpZ2luTWFwPXQ7ZWxzZXtpZighdHx8IXQuZ2V0KXRocm93IG5ldyBFcnJvcihcIm91dE9yaWdpbkZyb20gdGFrZXMgb25seSBmdW5jdGlvbiBvciBnZXR0ZXIgb2JqZWN0XCIpO3RoaXMub3V0T3JpZ2luTWFwPXQuZ2V0LmJpbmQodCl9cmV0dXJuIHRoaXN9LGUucHJvdG90eXBlLnNob3c9ZnVuY3Rpb24odCxpLGUpe2lmKCF0KXJldHVybiB0aGlzLmhpZGUoZSk7aWYoaSBpbnN0YW5jZW9mIEZ1bmN0aW9uJiYoZT1pLGk9bnVsbCksdGhpcy5fc2hvd2luZz49MCl7aWYoIXRoaXMub3B0aW9ucy5vdmVybGFwKXJldHVybiB2b2lkKHRoaXMuX25leHRSZW5kZXJhYmxlP3RoaXMuX25leHRSZW5kZXJhYmxlPXQ6KHRoaXMuX25leHRSZW5kZXJhYmxlPXQsdGhpcy5oaWRlKGZ1bmN0aW9uKCl7dGhpcy5fbmV4dFJlbmRlcmFibGU9PT10JiZ0aGlzLnNob3codGhpcy5fbmV4dFJlbmRlcmFibGUsZSksdGhpcy5fbmV4dFJlbmRlcmFibGU9bnVsbH0pKSk7dGhpcy5oaWRlKCl9dmFyIHI9bnVsbCxoPXRoaXMuX3JlbmRlcmFibGVzLmluZGV4T2YodCk7aWYoaD49MCl7dGhpcy5fc2hvd2luZz1oLHI9dGhpcy5fc3RhdGVzW2hdLHIuaGFsdCgpO3ZhciBjPXRoaXMuX291dGdvaW5nUmVuZGVyYWJsZXMuaW5kZXhPZih0KTtjPj0wJiZ0aGlzLl9vdXRnb2luZ1JlbmRlcmFibGVzLnNwbGljZShjLDEpfWVsc2V7cj1uZXcgYSgwKTt2YXIgcD1uZXcgbyh7dHJhbnNmb3JtOnRoaXMuaW5UcmFuc2Zvcm1NYXA/bi5iaW5kKHRoaXMsdGhpcy5pblRyYW5zZm9ybU1hcCxyKTpudWxsLG9wYWNpdHk6dGhpcy5pbk9wYWNpdHlNYXA/bi5iaW5kKHRoaXMsdGhpcy5pbk9wYWNpdHlNYXAscik6bnVsbCxvcmlnaW46dGhpcy5pbk9yaWdpbk1hcD9uLmJpbmQodGhpcyx0aGlzLmluT3JpZ2luTWFwLHIpOm51bGx9KSx1PW5ldyBzO3UuYWRkKHApLmFkZCh0KSx0aGlzLl9zaG93aW5nPXRoaXMuX25vZGVzLmxlbmd0aCx0aGlzLl9ub2Rlcy5wdXNoKHUpLHRoaXMuX21vZGlmaWVycy5wdXNoKHApLHRoaXMuX3N0YXRlcy5wdXNoKHIpLHRoaXMuX3JlbmRlcmFibGVzLnB1c2godCl9aXx8KGk9dGhpcy5vcHRpb25zLmluVHJhbnNpdGlvbiksci5zZXQoMSxpLGUpfSxlLnByb3RvdHlwZS5oaWRlPWZ1bmN0aW9uKHQsaSl7aWYoISh0aGlzLl9zaG93aW5nPDApKXt2YXIgZT10aGlzLl9zaG93aW5nO3RoaXMuX3Nob3dpbmc9LTEsdCBpbnN0YW5jZW9mIEZ1bmN0aW9uJiYoaT10LHQ9dm9pZCAwKTt2YXIgbz10aGlzLl9ub2Rlc1tlXSxzPXRoaXMuX21vZGlmaWVyc1tlXSxyPXRoaXMuX3N0YXRlc1tlXSxhPXRoaXMuX3JlbmRlcmFibGVzW2VdO3MudHJhbnNmb3JtRnJvbSh0aGlzLm91dFRyYW5zZm9ybU1hcD9uLmJpbmQodGhpcyx0aGlzLm91dFRyYW5zZm9ybU1hcCxyKTpudWxsKSxzLm9wYWNpdHlGcm9tKHRoaXMub3V0T3BhY2l0eU1hcD9uLmJpbmQodGhpcyx0aGlzLm91dE9wYWNpdHlNYXAscik6bnVsbCkscy5vcmlnaW5Gcm9tKHRoaXMub3V0T3JpZ2luTWFwP24uYmluZCh0aGlzLHRoaXMub3V0T3JpZ2luTWFwLHIpOm51bGwpLHRoaXMuX291dGdvaW5nUmVuZGVyYWJsZXMuaW5kZXhPZihhKTwwJiZ0aGlzLl9vdXRnb2luZ1JlbmRlcmFibGVzLnB1c2goYSksdHx8KHQ9dGhpcy5vcHRpb25zLm91dFRyYW5zaXRpb24pLHIuaGFsdCgpLHIuc2V0KDAsdCxmdW5jdGlvbih0LGUsbixvKXtpZih0aGlzLl9vdXRnb2luZ1JlbmRlcmFibGVzLmluZGV4T2Yobyk+PTApe3ZhciBzPXRoaXMuX25vZGVzLmluZGV4T2YodCk7dGhpcy5fbm9kZXMuc3BsaWNlKHMsMSksdGhpcy5fbW9kaWZpZXJzLnNwbGljZShzLDEpLHRoaXMuX3N0YXRlcy5zcGxpY2UocywxKSx0aGlzLl9yZW5kZXJhYmxlcy5zcGxpY2UocywxKSx0aGlzLl9vdXRnb2luZ1JlbmRlcmFibGVzLnNwbGljZSh0aGlzLl9vdXRnb2luZ1JlbmRlcmFibGVzLmluZGV4T2YobyksMSksdGhpcy5fc2hvd2luZz49cyYmdGhpcy5fc2hvd2luZy0tfWkmJmkuY2FsbCh0aGlzKX0uYmluZCh0aGlzLG8scyxyLGEpKX19LGUucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX291dHB1dDt0Lmxlbmd0aD50aGlzLl9ub2Rlcy5sZW5ndGgmJnQuc3BsaWNlKHRoaXMuX25vZGVzLmxlbmd0aCk7Zm9yKHZhciBpPTA7aTx0aGlzLl9ub2Rlcy5sZW5ndGg7aSsrKXRbaV09dGhpcy5fbm9kZXNbaV0ucmVuZGVyKCk7cmV0dXJuIHR9LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL01vZGlmaWVyXCI6OSxcIi4uL2NvcmUvUmVuZGVyTm9kZVwiOjExLFwiLi4vY29yZS9UcmFuc2Zvcm1cIjoxNSxcIi4uL2NvcmUvVmlld1wiOjE2LFwiLi4vdHJhbnNpdGlvbnMvVHJhbnNpdGlvbmFibGVcIjo4OH1dLDEwNzpbZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3RoaXMub3B0aW9ucz1PYmplY3QuY3JlYXRlKGUuREVGQVVMVF9PUFRJT05TKSx0aGlzLl9vcHRpb25zTWFuYWdlcj1uZXcgcih0aGlzLm9wdGlvbnMpLHQmJnRoaXMuc2V0T3B0aW9ucyh0KSx0aGlzLmNvbnRhaW5lcj1uZXcgbih0aGlzLm9wdGlvbnMuY29udGFpbmVyKSx0aGlzLnNjcm9sbHZpZXc9bmV3IHModGhpcy5vcHRpb25zLnNjcm9sbHZpZXcpLHRoaXMuY29udGFpbmVyLmFkZCh0aGlzLnNjcm9sbHZpZXcpLHRoaXMuX2V2ZW50SW5wdXQ9bmV3IG8sby5zZXRJbnB1dEhhbmRsZXIodGhpcyx0aGlzLl9ldmVudElucHV0KSx0aGlzLl9ldmVudElucHV0LnBpcGUodGhpcy5zY3JvbGx2aWV3KSx0aGlzLl9ldmVudE91dHB1dD1uZXcgbyxvLnNldE91dHB1dEhhbmRsZXIodGhpcyx0aGlzLl9ldmVudE91dHB1dCksdGhpcy5jb250YWluZXIucGlwZSh0aGlzLl9ldmVudE91dHB1dCksdGhpcy5zY3JvbGx2aWV3LnBpcGUodGhpcy5fZXZlbnRPdXRwdXQpfXZhciBuPXQoXCIuLi9zdXJmYWNlcy9Db250YWluZXJTdXJmYWNlXCIpLG89dChcIi4uL2NvcmUvRXZlbnRIYW5kbGVyXCIpLHM9dChcIi4vU2Nyb2xsdmlld1wiKSxyPSh0KFwiLi4vdXRpbGl0aWVzL1V0aWxpdHlcIiksdChcIi4uL2NvcmUvT3B0aW9uc01hbmFnZXJcIikpO2UuREVGQVVMVF9PUFRJT05TPXtjb250YWluZXI6e3Byb3BlcnRpZXM6e292ZXJmbG93OlwiaGlkZGVuXCJ9fSxzY3JvbGx2aWV3Ont9fSxlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9vcHRpb25zTWFuYWdlci5zZXRPcHRpb25zKHQpfSxlLnByb3RvdHlwZS5zZXF1ZW5jZUZyb209ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zY3JvbGx2aWV3LnNlcXVlbmNlRnJvbS5hcHBseSh0aGlzLnNjcm9sbHZpZXcsYXJndW1lbnRzKX0sZS5wcm90b3R5cGUuZ2V0U2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRhaW5lci5nZXRTaXplLmFwcGx5KHRoaXMuY29udGFpbmVyLGFyZ3VtZW50cyl9LGUucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRhaW5lci5yZW5kZXIoKX0saS5leHBvcnRzPWV9LHtcIi4uL2NvcmUvRXZlbnRIYW5kbGVyXCI6NyxcIi4uL2NvcmUvT3B0aW9uc01hbmFnZXJcIjoxMCxcIi4uL3N1cmZhY2VzL0NvbnRhaW5lclN1cmZhY2VcIjo3NSxcIi4uL3V0aWxpdGllcy9VdGlsaXR5XCI6OTUsXCIuL1Njcm9sbHZpZXdcIjoxMDl9XSwxMDg6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLm9wdGlvbnM9T2JqZWN0LmNyZWF0ZSh0aGlzLmNvbnN0cnVjdG9yLkRFRkFVTFRfT1BUSU9OUyksdGhpcy5fb3B0aW9uc01hbmFnZXI9bmV3IGModGhpcy5vcHRpb25zKSx0JiZ0aGlzLl9vcHRpb25zTWFuYWdlci5zZXRPcHRpb25zKHQpLHRoaXMuX25vZGU9bnVsbCx0aGlzLl9wb3NpdGlvbj0wLHRoaXMuX3Bvc2l0aW9uT2Zmc2V0PTAsdGhpcy5fcG9zaXRpb25HZXR0ZXI9bnVsbCx0aGlzLl9vdXRwdXRGdW5jdGlvbj1udWxsLHRoaXMuX21hc3Rlck91dHB1dEZ1bmN0aW9uPW51bGwsdGhpcy5vdXRwdXRGcm9tKCksdGhpcy5fb25FZGdlPTAsdGhpcy5ncm91cD1uZXcgaCx0aGlzLmdyb3VwLmFkZCh7cmVuZGVyOnIuYmluZCh0aGlzKX0pLHRoaXMuX2VudGl0eUlkPWEucmVnaXN0ZXIodGhpcyksdGhpcy5fc2l6ZT1bdm9pZCAwLHZvaWQgMF0sdGhpcy5fY29udGV4dFNpemU9W3ZvaWQgMCx2b2lkIDBdLHRoaXMuX2V2ZW50SW5wdXQ9bmV3IGYsdGhpcy5fZXZlbnRPdXRwdXQ9bmV3IGYsZi5zZXRJbnB1dEhhbmRsZXIodGhpcyx0aGlzLl9ldmVudElucHV0KSxmLnNldE91dHB1dEhhbmRsZXIodGhpcyx0aGlzLl9ldmVudE91dHB1dCl9ZnVuY3Rpb24gbih0KXt0fHwodD10aGlzLl9jb250ZXh0U2l6ZSk7dmFyIGk9dGhpcy5vcHRpb25zLmRpcmVjdGlvbjtyZXR1cm4gdm9pZCAwPT09dFtpXT90aGlzLl9jb250ZXh0U2l6ZVtpXTp0W2ldfWZ1bmN0aW9uIG8odCxpLGUpe3ZhciBvPXQuZ2V0U2l6ZT90LmdldFNpemUoKTp0aGlzLl9jb250ZXh0U2l6ZSxzPXRoaXMuX291dHB1dEZ1bmN0aW9uKGkpO3JldHVybiBlLnB1c2goe3RyYW5zZm9ybTpzLHRhcmdldDp0LnJlbmRlcigpfSksbi5jYWxsKHRoaXMsbyl9ZnVuY3Rpb24gcygpe3JldHVybiB2b2lkIDAhPT10aGlzLm9wdGlvbnMuY2xpcFNpemU/dGhpcy5vcHRpb25zLmNsaXBTaXplOnRoaXMuX2NvbnRleHRTaXplW3RoaXMub3B0aW9ucy5kaXJlY3Rpb25dPnRoaXMuZ2V0Q3VtdWxhdGl2ZVNpemUoKVt0aGlzLm9wdGlvbnMuZGlyZWN0aW9uXT9uLmNhbGwodGhpcyx0aGlzLmdldEN1bXVsYXRpdmVTaXplKCkpOm4uY2FsbCh0aGlzLHRoaXMuX2NvbnRleHRTaXplKX1mdW5jdGlvbiByKCl7Zm9yKHZhciB0PW51bGwsaT10aGlzLl9wb3NpdGlvbixlPVtdLHI9LXRoaXMuX3Bvc2l0aW9uT2Zmc2V0LGE9cy5jYWxsKHRoaXMpLGg9dGhpcy5fbm9kZTtoJiZyLWk8YSt0aGlzLm9wdGlvbnMubWFyZ2luOylyKz1vLmNhbGwodGhpcyxoLHIsZSksaD1oLmdldE5leHQ/aC5nZXROZXh0KCk6bnVsbDt2YXIgYz10aGlzLl9ub2RlLHA9bi5jYWxsKHRoaXMsYy5nZXRTaXplKCkpO2lmKGE+cil7Zm9yKDtjJiZhPnA7KWM9Yy5nZXRQcmV2aW91cygpLGMmJihwKz1uLmNhbGwodGhpcyxjLmdldFNpemUoKSkpO2ZvcihjPXRoaXMuX25vZGU7YyYmYT5wOyljPWMuZ2V0TmV4dCgpLGMmJihwKz1uLmNhbGwodGhpcyxjLmdldFNpemUoKSkpfWZvcighaCYmYS1kPnItaT8xIT09dGhpcy5fb25FZGdlJiYodGhpcy5fb25FZGdlPTEsdGhpcy5fZXZlbnRPdXRwdXQuZW1pdChcIm9uRWRnZVwiLHtwb3NpdGlvbjpyLWF9KSk6IXRoaXMuX25vZGUuZ2V0UHJldmlvdXMoKSYmLWQ+aT8tMSE9PXRoaXMuX29uRWRnZSYmKHRoaXMuX29uRWRnZT0tMSx0aGlzLl9ldmVudE91dHB1dC5lbWl0KFwib25FZGdlXCIse3Bvc2l0aW9uOjB9KSk6MCE9PXRoaXMuX29uRWRnZSYmKHRoaXMuX29uRWRnZT0wLHRoaXMuX2V2ZW50T3V0cHV0LmVtaXQoXCJvZmZFZGdlXCIpKSxoPXRoaXMuX25vZGUmJnRoaXMuX25vZGUuZ2V0UHJldmlvdXM/dGhpcy5fbm9kZS5nZXRQcmV2aW91cygpOm51bGwscj0tdGhpcy5fcG9zaXRpb25PZmZzZXQsaCYmKHQ9aC5nZXRTaXplP2guZ2V0U2l6ZSgpOnRoaXMuX2NvbnRleHRTaXplLHItPW4uY2FsbCh0aGlzLHQpKTtoJiZyLWk+LShhK3RoaXMub3B0aW9ucy5tYXJnaW4pOylvLmNhbGwodGhpcyxoLHIsZSksaD1oLmdldFByZXZpb3VzP2guZ2V0UHJldmlvdXMoKTpudWxsLGgmJih0PWguZ2V0U2l6ZT9oLmdldFNpemUoKTp0aGlzLl9jb250ZXh0U2l6ZSxyLT1uLmNhbGwodGhpcyx0KSk7cmV0dXJuIGV9dmFyIGE9dChcIi4uL2NvcmUvRW50aXR5XCIpLGg9dChcIi4uL2NvcmUvR3JvdXBcIiksYz10KFwiLi4vY29yZS9PcHRpb25zTWFuYWdlclwiKSxwPXQoXCIuLi9jb3JlL1RyYW5zZm9ybVwiKSx1PXQoXCIuLi91dGlsaXRpZXMvVXRpbGl0eVwiKSxsPXQoXCIuLi9jb3JlL1ZpZXdTZXF1ZW5jZVwiKSxmPXQoXCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiKTtlLkRFRkFVTFRfT1BUSU9OUz17ZGlyZWN0aW9uOnUuRGlyZWN0aW9uLlksbWFyZ2luOjAsY2xpcFNpemU6dm9pZCAwLGdyb3VwU2Nyb2xsOiExfTt2YXIgZD0wO2UucHJvdG90eXBlLmdldEN1bXVsYXRpdmVTaXplPWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10JiYodD10aGlzLl9ub2RlLl8uY3VtdWxhdGl2ZVNpemVzLmxlbmd0aC0xKSx0aGlzLl9ub2RlLl8uZ2V0U2l6ZSh0KX0sZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbih0KXt0Lmdyb3VwU2Nyb2xsIT09dGhpcy5vcHRpb25zLmdyb3VwU2Nyb2xsJiYodC5ncm91cFNjcm9sbD90aGlzLmdyb3VwLnBpcGUodGhpcy5fZXZlbnRPdXRwdXQpOnRoaXMuZ3JvdXAudW5waXBlKHRoaXMuX2V2ZW50T3V0cHV0KSksdGhpcy5fb3B0aW9uc01hbmFnZXIuc2V0T3B0aW9ucyh0KX0sZS5wcm90b3R5cGUub25FZGdlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uRWRnZX0sZS5wcm90b3R5cGUub3V0cHV0RnJvbT1mdW5jdGlvbih0LGkpe3R8fCh0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9wdGlvbnMuZGlyZWN0aW9uPT09dS5EaXJlY3Rpb24uWD9wLnRyYW5zbGF0ZSh0LDApOnAudHJhbnNsYXRlKDAsdCl9LmJpbmQodGhpcyksaXx8KGk9dCkpLHRoaXMuX291dHB1dEZ1bmN0aW9uPXQsdGhpcy5fbWFzdGVyT3V0cHV0RnVuY3Rpb249aT9pOmZ1bmN0aW9uKGkpe3JldHVybiBwLmludmVyc2UodCgtaSkpfX0sZS5wcm90b3R5cGUucG9zaXRpb25Gcm9tPWZ1bmN0aW9uKHQpe3QgaW5zdGFuY2VvZiBGdW5jdGlvbj90aGlzLl9wb3NpdGlvbkdldHRlcj10OnQmJnQuZ2V0P3RoaXMuX3Bvc2l0aW9uR2V0dGVyPXQuZ2V0LmJpbmQodCk6KHRoaXMuX3Bvc2l0aW9uR2V0dGVyPW51bGwsdGhpcy5fcG9zaXRpb249dCksdGhpcy5fcG9zaXRpb25HZXR0ZXImJih0aGlzLl9wb3NpdGlvbj10aGlzLl9wb3NpdGlvbkdldHRlci5jYWxsKHRoaXMpKX0sZS5wcm90b3R5cGUuc2VxdWVuY2VGcm9tPWZ1bmN0aW9uKHQpe3QgaW5zdGFuY2VvZiBBcnJheSYmKHQ9bmV3IGwoe2FycmF5OnR9KSksdGhpcy5fbm9kZT10LHRoaXMuX3Bvc2l0aW9uT2Zmc2V0PTB9LGUucHJvdG90eXBlLmdldFNpemU9ZnVuY3Rpb24odCl7cmV0dXJuIHQ/dGhpcy5fY29udGV4dFNpemU6dGhpcy5fc2l6ZX0sZS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25vZGU/KHRoaXMuX3Bvc2l0aW9uR2V0dGVyJiYodGhpcy5fcG9zaXRpb249dGhpcy5fcG9zaXRpb25HZXR0ZXIuY2FsbCh0aGlzKSksdGhpcy5fZW50aXR5SWQpOm51bGx9LGUucHJvdG90eXBlLmNvbW1pdD1mdW5jdGlvbih0KXt2YXIgaT10LnRyYW5zZm9ybSxlPXQub3BhY2l0eSxuPXQub3JpZ2luLG89dC5zaXplO3RoaXMub3B0aW9ucy5jbGlwU2l6ZXx8b1swXT09PXRoaXMuX2NvbnRleHRTaXplWzBdJiZvWzFdPT09dGhpcy5fY29udGV4dFNpemVbMV18fCh0aGlzLl9vbkVkZ2U9MCx0aGlzLl9jb250ZXh0U2l6ZVswXT1vWzBdLHRoaXMuX2NvbnRleHRTaXplWzFdPW9bMV0sdGhpcy5vcHRpb25zLmRpcmVjdGlvbj09PXUuRGlyZWN0aW9uLlg/KHRoaXMuX3NpemVbMF09cy5jYWxsKHRoaXMpLHRoaXMuX3NpemVbMV09dm9pZCAwKToodGhpcy5fc2l6ZVswXT12b2lkIDAsdGhpcy5fc2l6ZVsxXT1zLmNhbGwodGhpcykpKTt2YXIgcj10aGlzLl9tYXN0ZXJPdXRwdXRGdW5jdGlvbigtdGhpcy5fcG9zaXRpb24pO3JldHVybnt0cmFuc2Zvcm06cC5tdWx0aXBseShpLHIpLHNpemU6byxvcGFjaXR5OmUsb3JpZ2luOm4sdGFyZ2V0OnRoaXMuZ3JvdXAucmVuZGVyKCl9fSxpLmV4cG9ydHM9ZX0se1wiLi4vY29yZS9FbnRpdHlcIjo1LFwiLi4vY29yZS9FdmVudEhhbmRsZXJcIjo3LFwiLi4vY29yZS9Hcm91cFwiOjgsXCIuLi9jb3JlL09wdGlvbnNNYW5hZ2VyXCI6MTAsXCIuLi9jb3JlL1RyYW5zZm9ybVwiOjE1LFwiLi4vY29yZS9WaWV3U2VxdWVuY2VcIjoxNyxcIi4uL3V0aWxpdGllcy9VdGlsaXR5XCI6OTV9XSwxMDk6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLm9wdGlvbnM9T2JqZWN0LmNyZWF0ZShlLkRFRkFVTFRfT1BUSU9OUyksdGhpcy5fb3B0aW9uc01hbmFnZXI9bmV3IE8odGhpcy5vcHRpb25zKSx0aGlzLl9zY3JvbGxlcj1uZXcgVCh0aGlzLm9wdGlvbnMpLHRoaXMuc3luYz1uZXcgYihbXCJzY3JvbGxcIixcInRvdWNoXCJdLHtkaXJlY3Rpb246dGhpcy5vcHRpb25zLmRpcmVjdGlvbixzY2FsZTp0aGlzLm9wdGlvbnMuc3luY1NjYWxlLHJhaWxzOnRoaXMub3B0aW9ucy5yYWlscyxwcmV2ZW50RGVmYXVsdDp2b2lkIDAhPT10aGlzLm9wdGlvbnMucHJldmVudERlZmF1bHQ/dGhpcy5vcHRpb25zLnByZXZlbnREZWZhdWx0OnRoaXMub3B0aW9ucy5kaXJlY3Rpb24hPT13LkRpcmVjdGlvbi5ZfSksdGhpcy5fcGh5c2ljc0VuZ2luZT1uZXcgXyx0aGlzLl9wYXJ0aWNsZT1uZXcgeSx0aGlzLl9waHlzaWNzRW5naW5lLmFkZEJvZHkodGhpcy5fcGFydGljbGUpLHRoaXMuc3ByaW5nPW5ldyB2KHthbmNob3I6WzAsMCwwXSxwZXJpb2Q6dGhpcy5vcHRpb25zLmVkZ2VQZXJpb2QsZGFtcGluZ1JhdGlvOnRoaXMub3B0aW9ucy5lZGdlRGFtcH0pLHRoaXMuZHJhZz1uZXcgZyh7Zm9yY2VGdW5jdGlvbjpnLkZPUkNFX0ZVTkNUSU9OUy5RVUFEUkFUSUMsc3RyZW5ndGg6dGhpcy5vcHRpb25zLmRyYWd9KSx0aGlzLmZyaWN0aW9uPW5ldyBnKHtmb3JjZUZ1bmN0aW9uOmcuRk9SQ0VfRlVOQ1RJT05TLkxJTkVBUixzdHJlbmd0aDp0aGlzLm9wdGlvbnMuZnJpY3Rpb259KSx0aGlzLl9ub2RlPW51bGwsdGhpcy5fdG91Y2hDb3VudD0wLHRoaXMuX3NwcmluZ1N0YXRlPXguTk9ORSx0aGlzLl9vbkVkZ2U9TS5OT05FLHRoaXMuX3BhZ2VTcHJpbmdQb3NpdGlvbj0wLHRoaXMuX2VkZ2VTcHJpbmdQb3NpdGlvbj0wLHRoaXMuX3RvdWNoVmVsb2NpdHk9MCx0aGlzLl9lYXJseUVuZD0hMSx0aGlzLl9uZWVkc1BhZ2luYXRpb25DaGVjaz0hMSx0aGlzLl9kaXNwbGFjZW1lbnQ9MCx0aGlzLl90b3RhbFNoaWZ0PTAsdGhpcy5fY2FjaGVkSW5kZXg9MCx0aGlzLl9zY3JvbGxlci5wb3NpdGlvbkZyb20odGhpcy5nZXRQb3NpdGlvbi5iaW5kKHRoaXMpKSx0aGlzLl9ldmVudElucHV0PW5ldyBtLHRoaXMuX2V2ZW50T3V0cHV0PW5ldyBtLHRoaXMuX2V2ZW50SW5wdXQucGlwZSh0aGlzLnN5bmMpLHRoaXMuc3luYy5waXBlKHRoaXMuX2V2ZW50SW5wdXQpLG0uc2V0SW5wdXRIYW5kbGVyKHRoaXMsdGhpcy5fZXZlbnRJbnB1dCksbS5zZXRPdXRwdXRIYW5kbGVyKHRoaXMsdGhpcy5fZXZlbnRPdXRwdXQpLHIuY2FsbCh0aGlzKSx0JiZ0aGlzLnNldE9wdGlvbnModCl9ZnVuY3Rpb24gbih0KXt0aGlzLl90b3VjaENvdW50PXQuY291bnQsdm9pZCAwPT09dC5jb3VudCYmKHRoaXMuX3RvdWNoQ291bnQ9MSksaC5jYWxsKHRoaXMpLHRoaXMuc2V0VmVsb2NpdHkoMCksdGhpcy5fdG91Y2hWZWxvY2l0eT0wLHRoaXMuX2Vhcmx5RW5kPSExfWZ1bmN0aW9uIG8odCl7dmFyIGk9LXQudmVsb2NpdHksZT0tdC5kZWx0YTtpZih0aGlzLl9vbkVkZ2UhPT1NLk5PTkUmJnQuc2xpcCYmKDA+aSYmdGhpcy5fb25FZGdlPT09TS5UT1B8fGk+MCYmdGhpcy5fb25FZGdlPT09TS5CT1RUT00/dGhpcy5fZWFybHlFbmR8fChzLmNhbGwodGhpcyx0KSx0aGlzLl9lYXJseUVuZD0hMCk6dGhpcy5fZWFybHlFbmQmJk1hdGguYWJzKGkpPk1hdGguYWJzKHRoaXMuZ2V0VmVsb2NpdHkoKSkmJm4uY2FsbCh0aGlzLHQpKSwhdGhpcy5fZWFybHlFbmQpe2lmKHRoaXMuX3RvdWNoVmVsb2NpdHk9aSx0LnNsaXApe3ZhciBvPXRoaXMub3B0aW9ucy5zcGVlZExpbWl0Oy1vPmk/aT0tbzppPm8mJihpPW8pLHRoaXMuc2V0VmVsb2NpdHkoaSk7dmFyIHI9MTYqbztlPnI/ZT1yOi1yPmUmJihlPS1yKX10aGlzLnNldFBvc2l0aW9uKHRoaXMuZ2V0UG9zaXRpb24oKStlKSx0aGlzLl9kaXNwbGFjZW1lbnQrPWUsdGhpcy5fc3ByaW5nU3RhdGU9PT14Lk5PTkUmJmYuY2FsbCh0aGlzKX19ZnVuY3Rpb24gcyh0KXtpZih0aGlzLl90b3VjaENvdW50PXQuY291bnR8fDAsIXRoaXMuX3RvdWNoQ291bnQpe2guY2FsbCh0aGlzKSx0aGlzLl9vbkVkZ2UhPT1NLk5PTkUmJmwuY2FsbCh0aGlzLHRoaXMuX2VkZ2VTcHJpbmdQb3NpdGlvbix4LkVER0UpLGEuY2FsbCh0aGlzKTt2YXIgaT0tdC52ZWxvY2l0eSxlPXRoaXMub3B0aW9ucy5zcGVlZExpbWl0O3Quc2xpcCYmKGUqPXRoaXMub3B0aW9ucy5lZGdlR3JpcCksLWU+aT9pPS1lOmk+ZSYmKGk9ZSksdGhpcy5zZXRWZWxvY2l0eShpKSx0aGlzLl90b3VjaFZlbG9jaXR5PTAsdGhpcy5fbmVlZHNQYWdpbmF0aW9uQ2hlY2s9ITB9fWZ1bmN0aW9uIHIoKXt0aGlzLl9ldmVudElucHV0LmJpbmRUaGlzKHRoaXMpLHRoaXMuX2V2ZW50SW5wdXQub24oXCJzdGFydFwiLG4pLHRoaXMuX2V2ZW50SW5wdXQub24oXCJ1cGRhdGVcIixvKSx0aGlzLl9ldmVudElucHV0Lm9uKFwiZW5kXCIscyksdGhpcy5fZXZlbnRJbnB1dC5vbihcInJlc2l6ZVwiLGZ1bmN0aW9uKCl7dGhpcy5fbm9kZS5fLmNhbGN1bGF0ZVNpemUoKX0uYmluZCh0aGlzKSksdGhpcy5fc2Nyb2xsZXIub24oXCJvbkVkZ2VcIixmdW5jdGlvbih0KXt0aGlzLl9lZGdlU3ByaW5nUG9zaXRpb249dC5wb3NpdGlvbixwLmNhbGwodGhpcyx0aGlzLl9zY3JvbGxlci5vbkVkZ2UoKSksdGhpcy5fZXZlbnRPdXRwdXQuZW1pdChcIm9uRWRnZVwiKX0uYmluZCh0aGlzKSksdGhpcy5fc2Nyb2xsZXIub24oXCJvZmZFZGdlXCIsZnVuY3Rpb24oKXt0aGlzLnN5bmMuc2V0T3B0aW9ucyh7c2NhbGU6dGhpcy5vcHRpb25zLnN5bmNTY2FsZX0pLHRoaXMuX29uRWRnZT10aGlzLl9zY3JvbGxlci5vbkVkZ2UoKSx0aGlzLl9ldmVudE91dHB1dC5lbWl0KFwib2ZmRWRnZVwiKX0uYmluZCh0aGlzKSksdGhpcy5fcGFydGljbGUub24oXCJ1cGRhdGVcIixmdW5jdGlvbih0KXt0aGlzLl9zcHJpbmdTdGF0ZT09PXguTk9ORSYmZi5jYWxsKHRoaXMpLHRoaXMuX2Rpc3BsYWNlbWVudD10LnBvc2l0aW9uLngtdGhpcy5fdG90YWxTaGlmdH0uYmluZCh0aGlzKSksdGhpcy5fcGFydGljbGUub24oXCJlbmRcIixmdW5jdGlvbigpeyghdGhpcy5vcHRpb25zLnBhZ2luYXRlZHx8dGhpcy5vcHRpb25zLnBhZ2luYXRlZCYmdGhpcy5fc3ByaW5nU3RhdGUhPT14Lk5PTkUpJiZ0aGlzLl9ldmVudE91dHB1dC5lbWl0KFwic2V0dGxlXCIpfS5iaW5kKHRoaXMpKX1mdW5jdGlvbiBhKCl7dGhpcy5fc3ByaW5nU3RhdGU/dGhpcy5fcGh5c2ljc0VuZ2luZS5hdHRhY2goW3RoaXMuc3ByaW5nXSx0aGlzLl9wYXJ0aWNsZSk6dGhpcy5fcGh5c2ljc0VuZ2luZS5hdHRhY2goW3RoaXMuZHJhZyx0aGlzLmZyaWN0aW9uXSx0aGlzLl9wYXJ0aWNsZSl9ZnVuY3Rpb24gaCgpe3RoaXMuX3NwcmluZ1N0YXRlPXguTk9ORSx0aGlzLl9waHlzaWNzRW5naW5lLmRldGFjaEFsbCgpfWZ1bmN0aW9uIGModCl7dmFyIGk9dGhpcy5vcHRpb25zLmRpcmVjdGlvbixlPXQuZ2V0U2l6ZSgpO3JldHVybiBlP2VbaV06dGhpcy5fc2Nyb2xsZXIuZ2V0U2l6ZSgpW2ldfWZ1bmN0aW9uIHAodCl7dGhpcy5zeW5jLnNldE9wdGlvbnMoe3NjYWxlOnRoaXMub3B0aW9ucy5lZGdlR3JpcH0pLHRoaXMuX29uRWRnZT10LHRoaXMuX3RvdWNoQ291bnR8fHRoaXMuX3NwcmluZ1N0YXRlPT09eC5FREdFfHxsLmNhbGwodGhpcyx0aGlzLl9lZGdlU3ByaW5nUG9zaXRpb24seC5FREdFKSx0aGlzLl9zcHJpbmdTdGF0ZSYmTWF0aC5hYnModGhpcy5nZXRWZWxvY2l0eSgpKTwuMDAxJiYoaC5jYWxsKHRoaXMpLGEuY2FsbCh0aGlzKSl9ZnVuY3Rpb24gdSgpe2lmKCF0aGlzLl90b3VjaENvdW50JiZ0aGlzLl9zcHJpbmdTdGF0ZSE9PXguRURHRSl7dmFyIHQ9dGhpcy5nZXRWZWxvY2l0eSgpO2lmKCEoTWF0aC5hYnModCk+PXRoaXMub3B0aW9ucy5wYWdlU3RvcFNwZWVkKSl7dmFyIGk9dGhpcy5nZXRQb3NpdGlvbigpLGU9TWF0aC5hYnModCk+dGhpcy5vcHRpb25zLnBhZ2VTd2l0Y2hTcGVlZCxuPWMuY2FsbCh0aGlzLHRoaXMuX25vZGUpLG89aT4uNSpuLHM9dD4wLHI9MD50O3RoaXMuX25lZWRzUGFnaW5hdGlvbkNoZWNrPSExLG8mJiFlfHxlJiZzP3RoaXMuZ29Ub05leHRQYWdlKCk6ZSYmcj90aGlzLmdvVG9QcmV2aW91c1BhZ2UoKTpsLmNhbGwodGhpcywwLHguUEFHRSl9fX1mdW5jdGlvbiBsKHQsaSl7dmFyIGU7aT09PXguRURHRT8odGhpcy5fZWRnZVNwcmluZ1Bvc2l0aW9uPXQsZT17YW5jaG9yOlt0aGlzLl9lZGdlU3ByaW5nUG9zaXRpb24sMCwwXSxwZXJpb2Q6dGhpcy5vcHRpb25zLmVkZ2VQZXJpb2QsZGFtcGluZ1JhdGlvOnRoaXMub3B0aW9ucy5lZGdlRGFtcH0pOmk9PT14LlBBR0UmJih0aGlzLl9wYWdlU3ByaW5nUG9zaXRpb249dCxlPXthbmNob3I6W3RoaXMuX3BhZ2VTcHJpbmdQb3NpdGlvbiwwLDBdLHBlcmlvZDp0aGlzLm9wdGlvbnMucGFnZVBlcmlvZCxkYW1waW5nUmF0aW86dGhpcy5vcHRpb25zLnBhZ2VEYW1wfSksdGhpcy5zcHJpbmcuc2V0T3B0aW9ucyhlKSxpJiYhdGhpcy5fc3ByaW5nU3RhdGUmJihoLmNhbGwodGhpcyksdGhpcy5fc3ByaW5nU3RhdGU9aSxhLmNhbGwodGhpcykpLHRoaXMuX3NwcmluZ1N0YXRlPWl9ZnVuY3Rpb24gZigpe3ZhciB0PTAsaT10aGlzLmdldFBvc2l0aW9uKCk7aSs9KDA+aT8tLjU6LjUpPj4wO2Zvcih2YXIgZT1jLmNhbGwodGhpcyx0aGlzLl9ub2RlKSxuPXRoaXMuX25vZGUuZ2V0TmV4dCgpO3QraT49ZSYmbjspdC09ZSx0aGlzLl9zY3JvbGxlci5zZXF1ZW5jZUZyb20obiksdGhpcy5fbm9kZT1uLG49dGhpcy5fbm9kZS5nZXROZXh0KCksZT1jLmNhbGwodGhpcyx0aGlzLl9ub2RlKTtmb3IodmFyIG8scz10aGlzLl9ub2RlLmdldFByZXZpb3VzKCk7MD49dCtpJiZzOylvPWMuY2FsbCh0aGlzLHMpLHRoaXMuX3Njcm9sbGVyLnNlcXVlbmNlRnJvbShzKSx0aGlzLl9ub2RlPXMsdCs9byxzPXRoaXMuX25vZGUuZ2V0UHJldmlvdXMoKTt0JiZkLmNhbGwodGhpcyx0KSx0aGlzLl9ub2RlJiYodGhpcy5fbm9kZS5pbmRleCE9PXRoaXMuX2NhY2hlZEluZGV4P3RoaXMuZ2V0UG9zaXRpb24oKTwuNSplJiYodGhpcy5fY2FjaGVkSW5kZXg9dGhpcy5fbm9kZS5pbmRleCx0aGlzLl9ldmVudE91dHB1dC5lbWl0KFwicGFnZUNoYW5nZVwiLHtkaXJlY3Rpb246LTEsaW5kZXg6dGhpcy5fY2FjaGVkSW5kZXh9KSk6dGhpcy5nZXRQb3NpdGlvbigpPi41KmUmJih0aGlzLl9jYWNoZWRJbmRleD10aGlzLl9ub2RlLmluZGV4KzEsdGhpcy5fZXZlbnRPdXRwdXQuZW1pdChcInBhZ2VDaGFuZ2VcIix7ZGlyZWN0aW9uOjEsaW5kZXg6dGhpcy5fY2FjaGVkSW5kZXh9KSkpfWZ1bmN0aW9uIGQodCl7dGhpcy5fZWRnZVNwcmluZ1Bvc2l0aW9uKz10LHRoaXMuX3BhZ2VTcHJpbmdQb3NpdGlvbis9dCx0aGlzLnNldFBvc2l0aW9uKHRoaXMuZ2V0UG9zaXRpb24oKSt0KSx0aGlzLl90b3RhbFNoaWZ0Kz10LHRoaXMuX3NwcmluZ1N0YXRlPT09eC5FREdFP3RoaXMuc3ByaW5nLnNldE9wdGlvbnMoe2FuY2hvcjpbdGhpcy5fZWRnZVNwcmluZ1Bvc2l0aW9uLDAsMF19KTp0aGlzLl9zcHJpbmdTdGF0ZT09PXguUEFHRSYmdGhpcy5zcHJpbmcuc2V0T3B0aW9ucyh7YW5jaG9yOlt0aGlzLl9wYWdlU3ByaW5nUG9zaXRpb24sMCwwXX0pfXZhciBfPXQoXCIuLi9waHlzaWNzL1BoeXNpY3NFbmdpbmVcIikseT10KFwiLi4vcGh5c2ljcy9ib2RpZXMvUGFydGljbGVcIiksZz10KFwiLi4vcGh5c2ljcy9mb3JjZXMvRHJhZ1wiKSx2PXQoXCIuLi9waHlzaWNzL2ZvcmNlcy9TcHJpbmdcIiksbT10KFwiLi4vY29yZS9FdmVudEhhbmRsZXJcIiksTz10KFwiLi4vY29yZS9PcHRpb25zTWFuYWdlclwiKSxTPXQoXCIuLi9jb3JlL1ZpZXdTZXF1ZW5jZVwiKSxUPXQoXCIuLi92aWV3cy9TY3JvbGxlclwiKSx3PXQoXCIuLi91dGlsaXRpZXMvVXRpbGl0eVwiKSxiPXQoXCIuLi9pbnB1dHMvR2VuZXJpY1N5bmNcIiksRT10KFwiLi4vaW5wdXRzL1Njcm9sbFN5bmNcIiksST10KFwiLi4vaW5wdXRzL1RvdWNoU3luY1wiKTtiLnJlZ2lzdGVyKHtzY3JvbGw6RSx0b3VjaDpJfSk7dmFyIHg9e05PTkU6MCxFREdFOjEsUEFHRToyfSxNPXtUT1A6LTEsTk9ORTowLEJPVFRPTToxfTtlLkRFRkFVTFRfT1BUSU9OUz17ZGlyZWN0aW9uOncuRGlyZWN0aW9uLlkscmFpbHM6ITAsZnJpY3Rpb246LjAwNSxkcmFnOjFlLTQsZWRnZUdyaXA6LjIsZWRnZVBlcmlvZDozMDAsZWRnZURhbXA6MSxtYXJnaW46MWUzLHBhZ2luYXRlZDohMSxwYWdlUGVyaW9kOjUwMCxwYWdlRGFtcDouOCxwYWdlU3RvcFNwZWVkOjEwLHBhZ2VTd2l0Y2hTcGVlZDouNSxzcGVlZExpbWl0OjUsZ3JvdXBTY3JvbGw6ITEsc3luY1NjYWxlOjF9LGUucHJvdG90eXBlLmdldEN1cnJlbnRJbmRleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ub2RlLmluZGV4fSxlLnByb3RvdHlwZS5nb1RvUHJldmlvdXNQYWdlPWZ1bmN0aW9uKCl7aWYoIXRoaXMuX25vZGV8fHRoaXMuX29uRWRnZT09PU0uVE9QKXJldHVybiBudWxsO2lmKHRoaXMuZ2V0UG9zaXRpb24oKT4xJiZ0aGlzLl9zcHJpbmdTdGF0ZT09PXguTk9ORSlyZXR1cm4gbC5jYWxsKHRoaXMsMCx4LlBBR0UpLHRoaXMuX25vZGU7dmFyIHQ9dGhpcy5fbm9kZS5nZXRQcmV2aW91cygpO2lmKHQpe3ZhciBpPWMuY2FsbCh0aGlzLHQpO3RoaXMuX3Njcm9sbGVyLnNlcXVlbmNlRnJvbSh0KSx0aGlzLl9ub2RlPXQsZC5jYWxsKHRoaXMsaSksbC5jYWxsKHRoaXMsMCx4LlBBR0UpfXJldHVybiB0fSxlLnByb3RvdHlwZS5nb1RvTmV4dFBhZ2U9ZnVuY3Rpb24oKXtpZighdGhpcy5fbm9kZXx8dGhpcy5fb25FZGdlPT09TS5CT1RUT00pcmV0dXJuIG51bGw7dmFyIHQ9dGhpcy5fbm9kZS5nZXROZXh0KCk7aWYodCl7dmFyIGk9Yy5jYWxsKHRoaXMsdGhpcy5fbm9kZSk7dGhpcy5fc2Nyb2xsZXIuc2VxdWVuY2VGcm9tKHQpLHRoaXMuX25vZGU9dCxkLmNhbGwodGhpcywtaSksbC5jYWxsKHRoaXMsMCx4LlBBR0UpfXJldHVybiB0fSxlLnByb3RvdHlwZS5nb1RvUGFnZT1mdW5jdGlvbih0KXt2YXIgaSxlPXRoaXMuZ2V0Q3VycmVudEluZGV4KCk7aWYoZT50KWZvcihpPTA7ZS10Pmk7aSsrKXRoaXMuZ29Ub1ByZXZpb3VzUGFnZSgpO2lmKHQ+ZSlmb3IoaT0wO3QtZT5pO2krKyl0aGlzLmdvVG9OZXh0UGFnZSgpfSxlLnByb3RvdHlwZS5vdXRwdXRGcm9tPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Njcm9sbGVyLm91dHB1dEZyb20uYXBwbHkodGhpcy5fc2Nyb2xsZXIsYXJndW1lbnRzKX0sZS5wcm90b3R5cGUuZ2V0UG9zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFydGljbGUuZ2V0UG9zaXRpb24xRCgpfSxlLnByb3RvdHlwZS5nZXRBYnNvbHV0ZVBvc2l0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Njcm9sbGVyLmdldEN1bXVsYXRpdmVTaXplKHRoaXMuZ2V0Q3VycmVudEluZGV4KCkpW3RoaXMub3B0aW9ucy5kaXJlY3Rpb25dK3RoaXMuZ2V0UG9zaXRpb24oKX0sZS5wcm90b3R5cGUuZ2V0T2Zmc2V0PWUucHJvdG90eXBlLmdldFBvc2l0aW9uLGUucHJvdG90eXBlLnNldFBvc2l0aW9uPWZ1bmN0aW9uKHQpe3RoaXMuX3BhcnRpY2xlLnNldFBvc2l0aW9uMUQodCl9LGUucHJvdG90eXBlLnNldE9mZnNldD1lLnByb3RvdHlwZS5zZXRQb3NpdGlvbixlLnByb3RvdHlwZS5nZXRWZWxvY2l0eT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl90b3VjaENvdW50P3RoaXMuX3RvdWNoVmVsb2NpdHk6dGhpcy5fcGFydGljbGUuZ2V0VmVsb2NpdHkxRCgpfSxlLnByb3RvdHlwZS5zZXRWZWxvY2l0eT1mdW5jdGlvbih0KXt0aGlzLl9wYXJ0aWNsZS5zZXRWZWxvY2l0eTFEKHQpfSxlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3ZvaWQgMCE9PXQuZGlyZWN0aW9uJiYoXCJ4XCI9PT10LmRpcmVjdGlvbj90LmRpcmVjdGlvbj13LkRpcmVjdGlvbi5YOlwieVwiPT09dC5kaXJlY3Rpb24mJih0LmRpcmVjdGlvbj13LkRpcmVjdGlvbi5ZKSksdC5ncm91cFNjcm9sbCE9PXRoaXMub3B0aW9ucy5ncm91cFNjcm9sbCYmKHQuZ3JvdXBTY3JvbGw/dGhpcy5zdWJzY3JpYmUodGhpcy5fc2Nyb2xsZXIpOnRoaXMudW5zdWJzY3JpYmUodGhpcy5fc2Nyb2xsZXIpKSx0aGlzLl9vcHRpb25zTWFuYWdlci5zZXRPcHRpb25zKHQpLHRoaXMuX3Njcm9sbGVyLnNldE9wdGlvbnModCksdm9pZCAwIT09dC5kcmFnJiZ0aGlzLmRyYWcuc2V0T3B0aW9ucyh7c3RyZW5ndGg6dGhpcy5vcHRpb25zLmRyYWd9KSx2b2lkIDAhPT10LmZyaWN0aW9uJiZ0aGlzLmZyaWN0aW9uLnNldE9wdGlvbnMoe3N0cmVuZ3RoOnRoaXMub3B0aW9ucy5mcmljdGlvbn0pLCh2b2lkIDAhPT10LmVkZ2VQZXJpb2R8fHZvaWQgMCE9PXQuZWRnZURhbXApJiZ0aGlzLnNwcmluZy5zZXRPcHRpb25zKHtwZXJpb2Q6dGhpcy5vcHRpb25zLmVkZ2VQZXJpb2QsZGFtcGluZ1JhdGlvOnRoaXMub3B0aW9ucy5lZGdlRGFtcH0pLCh0LnJhaWxzfHx2b2lkIDAhPT10LmRpcmVjdGlvbnx8dm9pZCAwIT09dC5zeW5jU2NhbGV8fHQucHJldmVudERlZmF1bHQpJiZ0aGlzLnN5bmMuc2V0T3B0aW9ucyh7cmFpbHM6dGhpcy5vcHRpb25zLnJhaWxzLGRpcmVjdGlvbjp0aGlzLm9wdGlvbnMuZGlyZWN0aW9uPT09dy5EaXJlY3Rpb24uWD9iLkRJUkVDVElPTl9YOmIuRElSRUNUSU9OX1ksc2NhbGU6dGhpcy5vcHRpb25zLnN5bmNTY2FsZSxwcmV2ZW50RGVmYXVsdDp0aGlzLm9wdGlvbnMucHJldmVudERlZmF1bHR9KX0sZS5wcm90b3R5cGUuc2VxdWVuY2VGcm9tPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgQXJyYXkmJih0PW5ldyBTKHthcnJheTp0LHRyYWNrU2l6ZTohMH0pKSx0aGlzLl9ub2RlPXQsdGhpcy5fc2Nyb2xsZXIuc2VxdWVuY2VGcm9tKHQpfSxlLnByb3RvdHlwZS5nZXRTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Njcm9sbGVyLmdldFNpemUuYXBwbHkodGhpcy5fc2Nyb2xsZXIsYXJndW1lbnRzKX0sZS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9ucy5wYWdpbmF0ZWQmJnRoaXMuX25lZWRzUGFnaW5hdGlvbkNoZWNrJiZ1LmNhbGwodGhpcyksdGhpcy5fc2Nyb2xsZXIucmVuZGVyKCl9LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiOjcsXCIuLi9jb3JlL09wdGlvbnNNYW5hZ2VyXCI6MTAsXCIuLi9jb3JlL1ZpZXdTZXF1ZW5jZVwiOjE3LFwiLi4vaW5wdXRzL0dlbmVyaWNTeW5jXCI6MjcsXCIuLi9pbnB1dHMvU2Nyb2xsU3luY1wiOjMyLFwiLi4vaW5wdXRzL1RvdWNoU3luY1wiOjMzLFwiLi4vcGh5c2ljcy9QaHlzaWNzRW5naW5lXCI6NDgsXCIuLi9waHlzaWNzL2JvZGllcy9QYXJ0aWNsZVwiOjUxLFwiLi4vcGh5c2ljcy9mb3JjZXMvRHJhZ1wiOjYzLFwiLi4vcGh5c2ljcy9mb3JjZXMvU3ByaW5nXCI6NjgsXCIuLi91dGlsaXRpZXMvVXRpbGl0eVwiOjk1LFwiLi4vdmlld3MvU2Nyb2xsZXJcIjoxMDh9XSwxMTA6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSh0KXt0aGlzLl9pdGVtcz1udWxsLHRoaXMuX3NpemU9bnVsbCx0aGlzLl9vdXRwdXRGdW5jdGlvbj1lLkRFRkFVTFRfT1VUUFVUX0ZVTkNUSU9OLHRoaXMub3B0aW9ucz1yLmNsb25lKHRoaXMuY29uc3RydWN0b3IuREVGQVVMVF9PUFRJT05TfHxlLkRFRkFVTFRfT1BUSU9OUyksdGhpcy5vcHRpb25zTWFuYWdlcj1uZXcgbih0aGlzLm9wdGlvbnMpLHQmJnRoaXMuc2V0T3B0aW9ucyh0KX12YXIgbj10KFwiLi4vY29yZS9PcHRpb25zTWFuYWdlclwiKSxvPXQoXCIuLi9jb3JlL1RyYW5zZm9ybVwiKSxzPXQoXCIuLi9jb3JlL1ZpZXdTZXF1ZW5jZVwiKSxyPXQoXCIuLi91dGlsaXRpZXMvVXRpbGl0eVwiKTtlLkRFRkFVTFRfT1BUSU9OUz17ZGlyZWN0aW9uOnIuRGlyZWN0aW9uLlksaXRlbVNwYWNpbmc6MH0sZS5ERUZBVUxUX09VVFBVVF9GVU5DVElPTj1mdW5jdGlvbih0LGkpe3ZhciBlPXRoaXMub3B0aW9ucy5kaXJlY3Rpb249PT1yLkRpcmVjdGlvbi5YP28udHJhbnNsYXRlKGksMCk6by50cmFuc2xhdGUoMCxpKTtyZXR1cm57dHJhbnNmb3JtOmUsdGFyZ2V0OnQucmVuZGVyKCl9fSxlLnByb3RvdHlwZS5nZXRTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NpemV8fHRoaXMucmVuZGVyKCksdGhpcy5fc2l6ZX0sZS5wcm90b3R5cGUuc2VxdWVuY2VGcm9tPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgQXJyYXkmJih0PW5ldyBzKHQpKSx0aGlzLl9pdGVtcz10LHRoaXN9LGUucHJvdG90eXBlLnNldE9wdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zTWFuYWdlci5zZXRPcHRpb25zLmFwcGx5KHRoaXMub3B0aW9uc01hbmFnZXIsYXJndW1lbnRzKSx0aGlzfSxlLnByb3RvdHlwZS5zZXRPdXRwdXRGdW5jdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fb3V0cHV0RnVuY3Rpb249dCx0aGlzfSxlLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgdD0wLGk9MV50aGlzLm9wdGlvbnMuZGlyZWN0aW9uLGU9dGhpcy5faXRlbXMsbj1udWxsLG89W10scz17fSxyPVtdLGE9MDtmb3IodGhpcy5fc2l6ZT1bMCwwXTtlJiYobj1lLmdldCgpKTspbi5nZXRTaXplJiYobz1uLmdldFNpemUoKSkscz10aGlzLl9vdXRwdXRGdW5jdGlvbi5jYWxsKHRoaXMsbix0LGErKyksci5wdXNoKHMpLG8mJihvW3RoaXMub3B0aW9ucy5kaXJlY3Rpb25dJiYodCs9b1t0aGlzLm9wdGlvbnMuZGlyZWN0aW9uXSksb1tpXT50aGlzLl9zaXplW2ldJiYodGhpcy5fc2l6ZVtpXT1vW2ldKSksZT1lLmdldE5leHQoKSx0aGlzLm9wdGlvbnMuaXRlbVNwYWNpbmcmJmUmJih0Kz10aGlzLm9wdGlvbnMuaXRlbVNwYWNpbmcpO3JldHVybiB0aGlzLl9zaXplW3RoaXMub3B0aW9ucy5kaXJlY3Rpb25dPXQscn0saS5leHBvcnRzPWV9LHtcIi4uL2NvcmUvT3B0aW9uc01hbmFnZXJcIjoxMCxcIi4uL2NvcmUvVHJhbnNmb3JtXCI6MTUsXCIuLi9jb3JlL1ZpZXdTZXF1ZW5jZVwiOjE3LFwiLi4vdXRpbGl0aWVzL1V0aWxpdHlcIjo5NX1dLDExMTpbZnVuY3Rpb24odCxpKXtpLmV4cG9ydHM9e0NvbnRleHR1YWxWaWV3OnQoXCIuL0NvbnRleHR1YWxWaWV3XCIpLERlY2s6dChcIi4vRGVja1wiKSxFZGdlU3dhcHBlcjp0KFwiLi9FZGdlU3dhcHBlclwiKSxEcmF3ZXJMYXlvdXQ6dChcIi4vRHJhd2VyTGF5b3V0XCIpLEZsZXhpYmxlTGF5b3V0OnQoXCIuL0ZsZXhpYmxlTGF5b3V0XCIpLEZsaXBwZXI6dChcIi4vRmxpcHBlclwiKSxHcmlkTGF5b3V0OnQoXCIuL0dyaWRMYXlvdXRcIiksSGVhZGVyRm9vdGVyTGF5b3V0OnQoXCIuL0hlYWRlckZvb3RlckxheW91dFwiKSxMaWdodGJveDp0KFwiLi9MaWdodGJveFwiKSxSZW5kZXJDb250cm9sbGVyOnQoXCIuL1JlbmRlckNvbnRyb2xsZXJcIiksU2Nyb2xsQ29udGFpbmVyOnQoXCIuL1Njcm9sbENvbnRhaW5lclwiKSxTY3JvbGxlcjp0KFwiLi9TY3JvbGxlclwiKSxTY3JvbGx2aWV3OnQoXCIuL1Njcm9sbHZpZXdcIiksU2VxdWVudGlhbExheW91dDp0KFwiLi9TZXF1ZW50aWFsTGF5b3V0XCIpfX0se1wiLi9Db250ZXh0dWFsVmlld1wiOjk3LFwiLi9EZWNrXCI6OTgsXCIuL0RyYXdlckxheW91dFwiOjk5LFwiLi9FZGdlU3dhcHBlclwiOjEwMCxcIi4vRmxleGlibGVMYXlvdXRcIjoxMDEsXCIuL0ZsaXBwZXJcIjoxMDIsXCIuL0dyaWRMYXlvdXRcIjoxMDMsXCIuL0hlYWRlckZvb3RlckxheW91dFwiOjEwNCxcIi4vTGlnaHRib3hcIjoxMDUsXCIuL1JlbmRlckNvbnRyb2xsZXJcIjoxMDYsXCIuL1Njcm9sbENvbnRhaW5lclwiOjEwNyxcIi4vU2Nyb2xsZXJcIjoxMDgsXCIuL1Njcm9sbHZpZXdcIjoxMDksXCIuL1NlcXVlbnRpYWxMYXlvdXRcIjoxMTB9XSwxMTI6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSgpe3IuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMudGl0bGU9bmV3IG8oe2NsYXNzZXM6dGhpcy5vcHRpb25zLmNsYXNzZXMsY29udGVudDp0aGlzLm9wdGlvbnMuY29udGVudH0pLHRoaXMuYmFjaz1uZXcgbyh7c2l6ZTpbdGhpcy5vcHRpb25zLnNpemVbMV0sdGhpcy5vcHRpb25zLnNpemVbMV1dLGNsYXNzZXM6dGhpcy5vcHRpb25zLmNsYXNzZXMsY29udGVudDp0aGlzLm9wdGlvbnMuYmFja0NvbnRlbnR9KSx0aGlzLmJhY2sub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7dGhpcy5fZXZlbnRPdXRwdXQuZW1pdChcImJhY2tcIix7fSl9LmJpbmQodGhpcykpLHRoaXMubW9yZT1uZXcgbyh7c2l6ZTpbdGhpcy5vcHRpb25zLnNpemVbMV0sdGhpcy5vcHRpb25zLnNpemVbMV1dLGNsYXNzZXM6dGhpcy5vcHRpb25zLmNsYXNzZXMsY29udGVudDp0aGlzLm9wdGlvbnMubW9yZUNvbnRlbnR9KSx0aGlzLm1vcmUub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7dGhpcy5fZXZlbnRPdXRwdXQuZW1pdChcIm1vcmVcIix7fSl9LmJpbmQodGhpcykpLHRoaXMubGF5b3V0PW5ldyBuKHtpZDpcIm1hc3RlclwiLHNpemU6dGhpcy5vcHRpb25zLnNpemUsdGFyZ2V0Olt7dHJhbnNmb3JtOnMuaW5Gcm9udCxvcmlnaW46WzAsLjVdLHRhcmdldDp0aGlzLmJhY2t9LHtvcmlnaW46Wy41LC41XSx0YXJnZXQ6dGhpcy50aXRsZX0se3RyYW5zZm9ybTpzLmluRnJvbnQsb3JpZ2luOlsxLC41XSx0YXJnZXQ6dGhpcy5tb3JlfV19KSx0aGlzLl9hZGQodGhpcy5sYXlvdXQpLHRoaXMuX29wdGlvbnNNYW5hZ2VyLm9uKFwiY2hhbmdlXCIsZnVuY3Rpb24odCl7dmFyIGk9dC5pZCxlPXQudmFsdWU7XCJzaXplXCI9PT1pPyh0aGlzLmxheW91dC5pZC5tYXN0ZXIuc2V0U2l6ZShlKSx0aGlzLnRpdGxlLnNldFNpemUoZSksdGhpcy5iYWNrLnNldFNpemUoW2VbMV0sZVsxXV0pLHRoaXMubW9yZS5zZXRTaXplKFtlWzFdLGVbMV1dKSk6XCJiYWNrQ2xhc3Nlc1wiPT09aT90aGlzLmJhY2suc2V0T3B0aW9ucyh7Y2xhc3Nlczp0aGlzLm9wdGlvbnMuY2xhc3Nlcy5jb25jYXQodGhpcy5vcHRpb25zLmJhY2tDbGFzc2VzKX0pOlwiYmFja0NvbnRlbnRcIj09PWk/dGhpcy5iYWNrLnNldENvbnRlbnQodGhpcy5vcHRpb25zLmJhY2tDb250ZW50KTpcImNsYXNzZXNcIj09PWk/KHRoaXMudGl0bGUuc2V0T3B0aW9ucyh7Y2xhc3Nlczp0aGlzLm9wdGlvbnMuY2xhc3Nlc30pLHRoaXMuYmFjay5zZXRPcHRpb25zKHtjbGFzc2VzOnRoaXMub3B0aW9ucy5jbGFzc2VzLmNvbmNhdCh0aGlzLm9wdGlvbnMuYmFja0NsYXNzZXMpfSksdGhpcy5tb3JlLnNldE9wdGlvbnMoe2NsYXNzZXM6dGhpcy5vcHRpb25zLmNsYXNzZXMuY29uY2F0KHRoaXMub3B0aW9ucy5tb3JlQ2xhc3Nlcyl9KSk6XCJjb250ZW50XCI9PT1pP3RoaXMuc2V0Q29udGVudCh0aGlzLm9wdGlvbnMuY29udGVudCk6XCJtb3JlQ2xhc3Nlc1wiPT09aT90aGlzLm1vcmUuc2V0T3B0aW9ucyh7Y2xhc3Nlczp0aGlzLm9wdGlvbnMuY2xhc3Nlcy5jb25jYXQodGhpcy5vcHRpb25zLm1vcmVDbGFzc2VzKX0pOlwibW9yZUNvbnRlbnRcIj09PWkmJnRoaXMubW9yZS5zZXRDb250ZW50KHRoaXMub3B0aW9ucy5jb250ZW50KX0uYmluZCh0aGlzKSl9dmFyIG49dChcIi4uL2NvcmUvU2NlbmVcIiksbz10KFwiLi4vY29yZS9TdXJmYWNlXCIpLHM9dChcIi4uL2NvcmUvVHJhbnNmb3JtXCIpLHI9dChcIi4uL2NvcmUvVmlld1wiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHIucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUuREVGQVVMVF9PUFRJT05TPXtzaXplOlt2b2lkIDAsNTBdLGJhY2tDbGFzc2VzOltcImJhY2tcIl0sYmFja0NvbnRlbnQ6XCImI3gyNWMwO1wiLGNsYXNzZXM6W1wibmF2aWdhdGlvblwiXSxjb250ZW50OlwiXCIsbW9yZUNsYXNzZXM6W1wibW9yZVwiXSxtb3JlQ29udGVudDpcIiYjeDI3MWE7XCJ9LGUucHJvdG90eXBlLnNldENvbnRlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudGl0bGUuc2V0Q29udGVudCh0KX0saS5leHBvcnRzPWV9LHtcIi4uL2NvcmUvU2NlbmVcIjoxMixcIi4uL2NvcmUvU3VyZmFjZVwiOjE0LFwiLi4vY29yZS9UcmFuc2Zvcm1cIjoxNSxcIi4uL2NvcmUvVmlld1wiOjE2fV0sMTEzOltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dGhpcy5vcHRpb25zPU9iamVjdC5jcmVhdGUoZS5ERUZBVUxUX09QVElPTlMpLHRoaXMub3B0aW9uc01hbmFnZXI9bmV3IGModGhpcy5vcHRpb25zKSx0JiZ0aGlzLnNldE9wdGlvbnModCksdGhpcy5pbmRpY2F0b3I9bmV3IHMoe3NpemU6dGhpcy5vcHRpb25zLmluZGljYXRvclNpemUsY2xhc3NlczpbXCJzbGlkZXItYmFja1wiXX0pLHRoaXMubGFiZWw9bmV3IG8oe3NpemU6dGhpcy5vcHRpb25zLmxhYmVsU2l6ZSxjb250ZW50OnRoaXMub3B0aW9ucy5sYWJlbCxwcm9wZXJ0aWVzOntwb2ludGVyRXZlbnRzOlwibm9uZVwifSxjbGFzc2VzOltcInNsaWRlci1sYWJlbFwiXX0pLHRoaXMuZXZlbnRPdXRwdXQ9bmV3IGEsdGhpcy5ldmVudElucHV0PW5ldyBhLGEuc2V0SW5wdXRIYW5kbGVyKHRoaXMsdGhpcy5ldmVudElucHV0KSxhLnNldE91dHB1dEhhbmRsZXIodGhpcyx0aGlzLmV2ZW50T3V0cHV0KTt2YXIgaT0odGhpcy5vcHRpb25zLnJhbmdlWzFdLXRoaXMub3B0aW9ucy5yYW5nZVswXSkvdGhpcy5vcHRpb25zLmluZGljYXRvclNpemVbMF07dGhpcy5zeW5jPW5ldyBsKFtcIm1vdXNlXCIsXCJ0b3VjaFwiXSx7c2NhbGU6aSxkaXJlY3Rpb246bC5ESVJFQ1RJT05fWH0pLHRoaXMuaW5kaWNhdG9yLnBpcGUodGhpcy5zeW5jKSx0aGlzLnN5bmMucGlwZSh0aGlzKSx0aGlzLmV2ZW50SW5wdXQub24oXCJ1cGRhdGVcIixmdW5jdGlvbih0KXt0aGlzLnNldCh0LnBvc2l0aW9uKX0uYmluZCh0aGlzKSksdGhpcy5fZHJhd1Bvcz0wLG4uY2FsbCh0aGlzKX1mdW5jdGlvbiBuKCl7dGhpcy5sYWJlbC5zZXRDb250ZW50KHRoaXMub3B0aW9ucy5sYWJlbCsnPHNwYW4gc3R5bGU9XCJmbG9hdDogcmlnaHRcIj4nK3RoaXMuZ2V0KCkudG9GaXhlZCh0aGlzLm9wdGlvbnMucHJlY2lzaW9uKStcIjwvc3Bhbj5cIil9dmFyIG89dChcIi4uL2NvcmUvU3VyZmFjZVwiKSxzPXQoXCIuLi9zdXJmYWNlcy9DYW52YXNTdXJmYWNlXCIpLHI9dChcIi4uL2NvcmUvVHJhbnNmb3JtXCIpLGE9dChcIi4uL2NvcmUvRXZlbnRIYW5kbGVyXCIpLGg9dChcIi4uL21hdGgvVXRpbGl0aWVzXCIpLGM9dChcIi4uL2NvcmUvT3B0aW9uc01hbmFnZXJcIikscD10KFwiLi4vaW5wdXRzL01vdXNlU3luY1wiKSx1PXQoXCIuLi9pbnB1dHMvVG91Y2hTeW5jXCIpLGw9dChcIi4uL2lucHV0cy9HZW5lcmljU3luY1wiKTtsLnJlZ2lzdGVyKHttb3VzZTpwLHRvdWNoOnV9KSxlLkRFRkFVTFRfT1BUSU9OUz17c2l6ZTpbMjAwLDYwXSxpbmRpY2F0b3JTaXplOlsyMDAsMzBdLGxhYmVsU2l6ZTpbMjAwLDMwXSxyYW5nZTpbMCwxXSxwcmVjaXNpb246Mix2YWx1ZTowLGxhYmVsOlwiXCIsZmlsbENvbG9yOlwicmdiYSgxNzAsIDE3MCwgMTcwLCAxKVwifSxlLnByb3RvdHlwZS5zZXRPcHRpb25zPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9wdGlvbnNNYW5hZ2VyLnNldE9wdGlvbnModCl9LGUucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnMudmFsdWV9LGUucHJvdG90eXBlLnNldD1mdW5jdGlvbih0KXt0IT09dGhpcy5vcHRpb25zLnZhbHVlJiYodGhpcy5vcHRpb25zLnZhbHVlPWguY2xhbXAodCx0aGlzLm9wdGlvbnMucmFuZ2UpLG4uY2FsbCh0aGlzKSx0aGlzLmV2ZW50T3V0cHV0LmVtaXQoXCJjaGFuZ2VcIix7dmFsdWU6dH0pKX0sZS5wcm90b3R5cGUuZ2V0U2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnMuc2l6ZX0sZS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLnJhbmdlLGk9TWF0aC5mbG9vcigodGhpcy5nZXQoKS10WzBdKS8odFsxXS10WzBdKSp0aGlzLm9wdGlvbnMuaW5kaWNhdG9yU2l6ZVswXSk7aWYoaTx0aGlzLl9kcmF3UG9zKXRoaXMuaW5kaWNhdG9yLmdldENvbnRleHQoXCIyZFwiKS5jbGVhclJlY3QoaSwwLHRoaXMuX2RyYXdQb3MtaSsxLHRoaXMub3B0aW9ucy5pbmRpY2F0b3JTaXplWzFdKTtlbHNlIGlmKGk+dGhpcy5fZHJhd1Bvcyl7dmFyIGU9dGhpcy5pbmRpY2F0b3IuZ2V0Q29udGV4dChcIjJkXCIpO2UuZmlsbFN0eWxlPXRoaXMub3B0aW9ucy5maWxsQ29sb3IsZS5maWxsUmVjdCh0aGlzLl9kcmF3UG9zLTEsMCxpLXRoaXMuX2RyYXdQb3MrMSx0aGlzLm9wdGlvbnMuaW5kaWNhdG9yU2l6ZVsxXSl9cmV0dXJuIHRoaXMuX2RyYXdQb3M9aSx7c2l6ZTp0aGlzLm9wdGlvbnMuc2l6ZSx0YXJnZXQ6W3tvcmlnaW46WzAsMF0sdGFyZ2V0OnRoaXMuaW5kaWNhdG9yLnJlbmRlcigpfSx7dHJhbnNmb3JtOnIudHJhbnNsYXRlKDAsMCwxKSxvcmlnaW46WzAsMF0sdGFyZ2V0OnRoaXMubGFiZWwucmVuZGVyKCl9XX19LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiOjcsXCIuLi9jb3JlL09wdGlvbnNNYW5hZ2VyXCI6MTAsXCIuLi9jb3JlL1N1cmZhY2VcIjoxNCxcIi4uL2NvcmUvVHJhbnNmb3JtXCI6MTUsXCIuLi9pbnB1dHMvR2VuZXJpY1N5bmNcIjoyNyxcIi4uL2lucHV0cy9Nb3VzZVN5bmNcIjoyOCxcIi4uL2lucHV0cy9Ub3VjaFN5bmNcIjozMyxcIi4uL21hdGgvVXRpbGl0aWVzXCI6NDAsXCIuLi9zdXJmYWNlcy9DYW52YXNTdXJmYWNlXCI6NzR9XSwxMTQ6W2Z1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gZSgpe3IuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMubGF5b3V0PW5ldyBhLHRoaXMuYnV0dG9ucz1bXSx0aGlzLl9idXR0b25JZHM9e30sdGhpcy5fYnV0dG9uQ2FsbGJhY2tzPXt9LHRoaXMubGF5b3V0LnNlcXVlbmNlRnJvbSh0aGlzLmJ1dHRvbnMpLHRoaXMuX2FkZCh0aGlzLmxheW91dCksdGhpcy5fb3B0aW9uc01hbmFnZXIub24oXCJjaGFuZ2VcIixuLmJpbmQodGhpcykpfWZ1bmN0aW9uIG4odCl7dmFyIGk9dC5pZCxlPXQudmFsdWU7aWYoXCJkaXJlY3Rpb25cIj09PWkpdGhpcy5sYXlvdXQuc2V0T3B0aW9ucyh7ZGltZW5zaW9uczpvLmNhbGwodGhpcy5idXR0b25zLmxlbmd0aCx0aGlzLm9wdGlvbnMuZGlyZWN0aW9uKX0pO2Vsc2UgaWYoXCJidXR0b25zXCI9PT1pKWZvcih2YXIgbiBpbiB0aGlzLmJ1dHRvbnMpdGhpcy5idXR0b25zW25dLnNldE9wdGlvbnMoZSk7ZWxzZSBpZihcInNlY3Rpb25zXCI9PT1pKWZvcih2YXIgcyBpbiB0aGlzLm9wdGlvbnMuc2VjdGlvbnMpdGhpcy5kZWZpbmVTZWN0aW9uKHMsdGhpcy5vcHRpb25zLnNlY3Rpb25zW3NdKX1mdW5jdGlvbiBvKHQsaSl7cmV0dXJuIGk9PT1zLkRpcmVjdGlvbi5YP1t0LDFdOlsxLHRdfXZhciBzPXQoXCIuLi91dGlsaXRpZXMvVXRpbGl0eVwiKSxyPXQoXCIuLi9jb3JlL1ZpZXdcIiksYT10KFwiLi4vdmlld3MvR3JpZExheW91dFwiKSxoPXQoXCIuL1RvZ2dsZUJ1dHRvblwiKTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHIucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUuREVGQVVMVF9PUFRJT05TPXtzZWN0aW9uczpbXSx3aWRnZXQ6aCxzaXplOlt2b2lkIDAsNTBdLGRpcmVjdGlvbjpzLkRpcmVjdGlvbi5YLGJ1dHRvbnM6e3RvZ2dsZU1vZGU6aC5PTn19LGUucHJvdG90eXBlLmRlZmluZVNlY3Rpb249ZnVuY3Rpb24odCxpKXt2YXIgZSxuPXRoaXMuX2J1dHRvbklkc1t0XTtpZih2b2lkIDA9PT1uKXtuPXRoaXMuYnV0dG9ucy5sZW5ndGgsdGhpcy5fYnV0dG9uSWRzW3RdPW47dmFyIHM9dGhpcy5vcHRpb25zLndpZGdldDtlPW5ldyBzLHRoaXMuYnV0dG9uc1tuXT1lLHRoaXMubGF5b3V0LnNldE9wdGlvbnMoe2RpbWVuc2lvbnM6byh0aGlzLmJ1dHRvbnMubGVuZ3RoLHRoaXMub3B0aW9ucy5kaXJlY3Rpb24pfSl9ZWxzZSBlPXRoaXMuYnV0dG9uc1tuXSxlLnVuYmluZChcInNlbGVjdFwiLHRoaXMuX2J1dHRvbkNhbGxiYWNrc1t0XSk7dGhpcy5vcHRpb25zLmJ1dHRvbnMmJmUuc2V0T3B0aW9ucyh0aGlzLm9wdGlvbnMuYnV0dG9ucyksZS5zZXRPcHRpb25zKGkpLHRoaXMuX2J1dHRvbkNhbGxiYWNrc1t0XT10aGlzLnNlbGVjdC5iaW5kKHRoaXMsdCksZS5vbihcInNlbGVjdFwiLHRoaXMuX2J1dHRvbkNhbGxiYWNrc1t0XSl9LGUucHJvdG90eXBlLnNlbGVjdD1mdW5jdGlvbih0KXt2YXIgaT10aGlzLl9idXR0b25JZHNbdF07dGhpcy5idXR0b25zW2ldJiZ0aGlzLmJ1dHRvbnNbaV0uaXNTZWxlY3RlZCgpP3RoaXMuX2V2ZW50T3V0cHV0LmVtaXQoXCJzZWxlY3RcIix7aWQ6dH0pOnRoaXMuYnV0dG9uc1tpXSYmdGhpcy5idXR0b25zW2ldLnNlbGVjdCgpO2Zvcih2YXIgZT0wO2U8dGhpcy5idXR0b25zLmxlbmd0aDtlKyspZSE9PWkmJnRoaXMuYnV0dG9uc1tlXS5kZXNlbGVjdCgpfSxpLmV4cG9ydHM9ZX0se1wiLi4vY29yZS9WaWV3XCI6MTYsXCIuLi91dGlsaXRpZXMvVXRpbGl0eVwiOjk1LFwiLi4vdmlld3MvR3JpZExheW91dFwiOjEwMyxcIi4vVG9nZ2xlQnV0dG9uXCI6MTE1fV0sMTE1OltmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7dGhpcy5vcHRpb25zPXtjb250ZW50OlwiXCIsb2ZmQ2xhc3NlczpbXCJvZmZcIl0sb25DbGFzc2VzOltcIm9uXCJdLHNpemU6dm9pZCAwLG91dFRyYW5zaXRpb246e2N1cnZlOlwiZWFzZUluT3V0XCIsZHVyYXRpb246MzAwfSxpblRyYW5zaXRpb246e2N1cnZlOlwiZWFzZUluT3V0XCIsZHVyYXRpb246MzAwfSx0b2dnbGVNb2RlOmUuVE9HR0xFLGNyb3NzZmFkZTohMH0sdGhpcy5fZXZlbnRPdXRwdXQ9bmV3IG8sby5zZXRPdXRwdXRIYW5kbGVyKHRoaXMsdGhpcy5fZXZlbnRPdXRwdXQpLHRoaXMub2ZmU3VyZmFjZT1uZXcgbix0aGlzLm9mZlN1cmZhY2Uub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLnRvZ2dsZU1vZGUhPT1lLk9GRiYmdGhpcy5zZWxlY3QoKX0uYmluZCh0aGlzKSksdGhpcy5vZmZTdXJmYWNlLnBpcGUodGhpcy5fZXZlbnRPdXRwdXQpLHRoaXMub25TdXJmYWNlPW5ldyBuLHRoaXMub25TdXJmYWNlLm9uKFwiY2xpY2tcIixmdW5jdGlvbigpe3RoaXMub3B0aW9ucy50b2dnbGVNb2RlIT09ZS5PTiYmdGhpcy5kZXNlbGVjdCgpfS5iaW5kKHRoaXMpKSx0aGlzLm9uU3VyZmFjZS5waXBlKHRoaXMuX2V2ZW50T3V0cHV0KSx0aGlzLmFyYml0ZXI9bmV3IHMoe292ZXJsYXA6dGhpcy5vcHRpb25zLmNyb3NzZmFkZX0pLHRoaXMuZGVzZWxlY3QoKSx0JiZ0aGlzLnNldE9wdGlvbnModCl9dmFyIG49dChcIi4uL2NvcmUvU3VyZmFjZVwiKSxvPXQoXCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiKSxzPXQoXCIuLi92aWV3cy9SZW5kZXJDb250cm9sbGVyXCIpO2UuT0ZGPTAsZS5PTj0xLGUuVE9HR0xFPTIsZS5wcm90b3R5cGUuc2VsZWN0PWZ1bmN0aW9uKCl7dGhpcy5zZWxlY3RlZD0hMCx0aGlzLmFyYml0ZXIuc2hvdyh0aGlzLm9uU3VyZmFjZSx0aGlzLm9wdGlvbnMuaW5UcmFuc2l0aW9uKSx0aGlzLl9ldmVudE91dHB1dC5lbWl0KFwic2VsZWN0XCIpfSxlLnByb3RvdHlwZS5kZXNlbGVjdD1mdW5jdGlvbigpe3RoaXMuc2VsZWN0ZWQ9ITEsdGhpcy5hcmJpdGVyLnNob3codGhpcy5vZmZTdXJmYWNlLHRoaXMub3B0aW9ucy5vdXRUcmFuc2l0aW9uKSx0aGlzLl9ldmVudE91dHB1dC5lbWl0KFwiZGVzZWxlY3RcIil9LGUucHJvdG90eXBlLmlzU2VsZWN0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWxlY3RlZH0sZS5wcm90b3R5cGUuc2V0T3B0aW9ucz1mdW5jdGlvbih0KXt2b2lkIDAhPT10LmNvbnRlbnQmJih0aGlzLm9wdGlvbnMuY29udGVudD10LmNvbnRlbnQsdGhpcy5vZmZTdXJmYWNlLnNldENvbnRlbnQodGhpcy5vcHRpb25zLmNvbnRlbnQpLHRoaXMub25TdXJmYWNlLnNldENvbnRlbnQodGhpcy5vcHRpb25zLmNvbnRlbnQpKSx0Lm9mZkNsYXNzZXMmJih0aGlzLm9wdGlvbnMub2ZmQ2xhc3Nlcz10Lm9mZkNsYXNzZXMsdGhpcy5vZmZTdXJmYWNlLnNldENsYXNzZXModGhpcy5vcHRpb25zLm9mZkNsYXNzZXMpKSx0Lm9uQ2xhc3NlcyYmKHRoaXMub3B0aW9ucy5vbkNsYXNzZXM9dC5vbkNsYXNzZXMsdGhpcy5vblN1cmZhY2Uuc2V0Q2xhc3Nlcyh0aGlzLm9wdGlvbnMub25DbGFzc2VzKSksdm9pZCAwIT09dC5zaXplJiYodGhpcy5vcHRpb25zLnNpemU9dC5zaXplLHRoaXMub25TdXJmYWNlLnNldFNpemUodGhpcy5vcHRpb25zLnNpemUpLHRoaXMub2ZmU3VyZmFjZS5zZXRTaXplKHRoaXMub3B0aW9ucy5zaXplKSksdm9pZCAwIT09dC50b2dnbGVNb2RlJiYodGhpcy5vcHRpb25zLnRvZ2dsZU1vZGU9dC50b2dnbGVNb2RlKSx2b2lkIDAhPT10Lm91dFRyYW5zaXRpb24mJih0aGlzLm9wdGlvbnMub3V0VHJhbnNpdGlvbj10Lm91dFRyYW5zaXRpb24pLHZvaWQgMCE9PXQuaW5UcmFuc2l0aW9uJiYodGhpcy5vcHRpb25zLmluVHJhbnNpdGlvbj10LmluVHJhbnNpdGlvbiksdm9pZCAwIT09dC5jcm9zc2ZhZGUmJih0aGlzLm9wdGlvbnMuY3Jvc3NmYWRlPXQuY3Jvc3NmYWRlLHRoaXMuYXJiaXRlci5zZXRPcHRpb25zKHtvdmVybGFwOnRoaXMub3B0aW9ucy5jcm9zc2ZhZGV9KSl9LGUucHJvdG90eXBlLmdldFNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zLnNpemV9LGUucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFyYml0ZXIucmVuZGVyKCl9LGkuZXhwb3J0cz1lfSx7XCIuLi9jb3JlL0V2ZW50SGFuZGxlclwiOjcsXCIuLi9jb3JlL1N1cmZhY2VcIjoxNCxcIi4uL3ZpZXdzL1JlbmRlckNvbnRyb2xsZXJcIjoxMDZ9XSwxMTY6W2Z1bmN0aW9uKHQsaSl7aS5leHBvcnRzPXtOYXZpZ2F0aW9uQmFyOnQoXCIuL05hdmlnYXRpb25CYXJcIiksU2xpZGVyOnQoXCIuL1NsaWRlclwiKSxUYWJCYXI6dChcIi4vVGFiQmFyXCIpLFRvZ2dsZUJ1dHRvbjp0KFwiLi9Ub2dnbGVCdXR0b25cIil9fSx7XCIuL05hdmlnYXRpb25CYXJcIjoxMTIsXCIuL1NsaWRlclwiOjExMyxcIi4vVGFiQmFyXCI6MTE0LFwiLi9Ub2dnbGVCdXR0b25cIjoxMTV9XX0se30sWzIzXSkoMjMpfSk7XG47IGJyb3dzZXJpZnlfc2hpbV9fZGVmaW5lX19tb2R1bGVfX2V4cG9ydF9fKHR5cGVvZiBmYW1vdXMgIT0gXCJ1bmRlZmluZWRcIiA/IGZhbW91cyA6IHdpbmRvdy5mYW1vdXMpO1xuXG59KS5jYWxsKGdsb2JhbCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBmdW5jdGlvbiBkZWZpbmVFeHBvcnQoZXgpIHsgbW9kdWxlLmV4cG9ydHMgPSBleDsgfSk7XG5cbn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KSIsIid1c2Ugc3RyaWN0JztcbnZhciBjb250cm9sbGVybmFtZSA9ICdob21lJztcbnZhciBQcm9ncmVzc0JhciA9IHJlcXVpcmUoJ3Byb2dyZXNzYmFyLmpzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYXBwKSB7XG4gICAgLypqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXG5cbiAgICB2YXIgZGVwcyA9IFsnJHdpbmRvdycsICckZmFtb3VzJywgYXBwLm5hbWUgKyAnLnBob3RvcycsIGFwcC5uYW1lICsgJy5mYW1vdXNIZWxwZXInXTtcblxuICAgIGZ1bmN0aW9uIGNvbnRyb2xsZXIoJHdpbmRvdywgJGZhbW91cywgcGhvdG9zLCBmYW1vdXNIZWxwZXIpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgICAgdm0udmlld1NpemUgPSB7XG4gICAgICAgICAgICB3aWR0aDogJHdpbmRvdy5pbm5lcldpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiAkd2luZG93LmlubmVySGVpZ2h0XG4gICAgICAgIH07XG4gICAgICAgIHZtLmhlYWRlckhlaWdodCA9IDIwMDtcbiAgICAgICAgdm0udXNlck5hbWUgPSAnSm9obiBEb2UnO1xuXG4gICAgICAgIHZtLnBob3RvcyA9IHBob3Rvcy5nZW5lcmF0ZSgyICogdm0udmlld1NpemUud2lkdGggLyAzLCAyICogdm0udmlld1NpemUud2lkdGggLyAzLCAzMCwgMyk7XG4gICAgICAgIHZtLnBob3RvTWFpbiA9IHBob3Rvcy5nZW5lcmF0ZSh2bS52aWV3U2l6ZS53aWR0aCAqIDIsIHZtLmhlYWRlckhlaWdodCAqIDIpWzBdWzBdO1xuICAgICAgICB2bS5waG90b1Byb2ZpbGUgPSBwaG90b3MuZ2VuZXJhdGUoMTAwLCAxMDApWzBdWzBdO1xuXG4gICAgICAgIHZtLmdldFBob3RvU3R5bGUgPSBwaG90b3MuZ2V0U3R5bGU7XG5cbiAgICAgICAgdmFyIEV2ZW50SGFuZGxlciA9ICRmYW1vdXNbJ2ZhbW91cy9jb3JlL0V2ZW50SGFuZGxlciddO1xuICAgICAgICB2bS5ldmVudEhhbmRsZXIgPSBuZXcgRXZlbnRIYW5kbGVyKCk7XG5cbiAgICAgICAgdmFyIGdldFNjcm9sbFZpZXcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZtLnNjcm9sbHZpZXcgPSBmYW1vdXNIZWxwZXIuZ2V0UmVuZGVyTm9kZSh2bS5zY3JvbGx2aWV3LCAnI3Njcm9sbFZpZXcnKTtcbiAgICAgICAgICAgIHJldHVybiB2bS5zY3JvbGx2aWV3O1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBnZXRNYWluUGhvdG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZtLm1haW5QaG90byA9IGZhbW91c0hlbHBlci5nZXRSZW5kZXJOb2RlKHZtLm1haW5QaG90bywgJyNtYWluUGhvdG8nKTtcbiAgICAgICAgICAgIHJldHVybiB2bS5tYWluUGhvdG87XG4gICAgICAgIH07XG5cbiAgICAgICAgdm0uZ2V0T3ZlcnB1bGwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAtTWF0aC5taW4oMCwgZ2V0U2Nyb2xsVmlldygpLmdldEFic29sdXRlUG9zaXRpb24oKSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdm0uZ2V0VG9vbGJhclRyYW5zbGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHBvcyA9IGdldFNjcm9sbFZpZXcoKS5nZXRBYnNvbHV0ZVBvc2l0aW9uKCk7XG4gICAgICAgICAgICByZXR1cm4gcG9zID4gKHZtLmhlYWRlckhlaWdodCAtIDYwKSA/IHBvcyAtICh2bS5oZWFkZXJIZWlnaHQgLSA2MCkgOiAwO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBUaW1lciA9ICRmYW1vdXNbJ2ZhbW91cy91dGlsaXRpZXMvVGltZXInXTtcbiAgICAgICAgVGltZXIuZXZlcnkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgcG9zID0gdm0uZ2V0T3ZlcnB1bGwoKTtcbiAgICAgICAgICAgIGlmKGdldE1haW5QaG90bygpKSB7XG4gICAgICAgICAgICAgICAgdm0ubWFpblBob3RvLnNldFByb3BlcnRpZXMoe1xuICAgICAgICAgICAgICAgICAgICB3ZWJraXRGaWx0ZXI6IGdldEJsdXIocG9zKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGZpbGxDaXJjbGUoTWF0aC5taW4oMSwgcG9zIC8gMjUwKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSwgMSk7XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0Qmx1cihwb3MpIHtcbiAgICAgICAgICAgIHZhciBibHVyID0gcG9zID4gMTAwID8gTWF0aC5taW4oTWF0aC5yb3VuZCgocG9zIC0gMTAwKSAvIDE1KSwgMTApIDogMDtcbiAgICAgICAgICAgIHJldHVybiAnYmx1cignICsgYmx1ciArICdweCknO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGZpbGxDaXJjbGUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaWYodm0uY2lyY2xlKSB7XG4gICAgICAgICAgICAgICAgdm0uY2lyY2xlLnNldCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdm0uY2lyY2xlID0gbmV3IFByb2dyZXNzQmFyLkNpcmNsZSgkd2luZG93LmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaXJjbGVTdmdDb250YWluZXInKSwge1xuICAgICAgICAgICAgICAgIGNvbG9yOiAnIzM0OThEQicsXG4gICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IDYsXG4gICAgICAgICAgICAgICAgZmlsbDogJyNGRkZGRkYnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjb250cm9sbGVyLiRpbmplY3QgPSBkZXBzO1xuICAgIGFwcC5jb250cm9sbGVyKGFwcC5uYW1lICsgJy4nICsgY29udHJvbGxlcm5hbWUsIGNvbnRyb2xsZXIpO1xufTsiLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYXBwKSB7XG4gICAgLy8gaW5qZWN0OnN0YXJ0XG4gICAgcmVxdWlyZSgnLi9ob21lJykoYXBwKTtcbiAgICAvLyBpbmplY3Q6ZW5kXG59OyIsIid1c2Ugc3RyaWN0JztcbnJlcXVpcmUoJ2FuZ3VsYXItdWktcm91dGVyJyk7XG5cbnJlcXVpcmUoJ2ZhbW91cy1hbmd1bGFyJyk7XG5cbnZhciBtb2R1bGVuYW1lID0gJ2NvbW1vbic7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obmFtZXNwYWNlKSB7XG5cbiAgICB2YXIgZnVsbG5hbWUgPSBuYW1lc3BhY2UgKyAnLicgKyBtb2R1bGVuYW1lO1xuXG4gICAgdmFyIGFuZ3VsYXIgPSByZXF1aXJlKCdhbmd1bGFyJyk7XG4gICAgdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKGZ1bGxuYW1lLCBbJ3VpLnJvdXRlcicsICdmYW1vdXMuYW5ndWxhciddKTtcbiAgICAvLyBpbmplY3Q6Zm9sZGVycyBzdGFydFxuICAgIHJlcXVpcmUoJy4vY29udHJvbGxlcnMnKShhcHApO1xuICAgIHJlcXVpcmUoJy4vc2VydmljZXMnKShhcHApO1xuXG4gICAgLy8gaW5qZWN0OmZvbGRlcnMgZW5kXG4gICAgYXBwLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgJyR1cmxSb3V0ZXJQcm92aWRlcicsXG4gICAgICAgIGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcbiAgICAgICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy8nKTtcbiAgICAgICAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdob21lJywge1xuICAgICAgICAgICAgICAgIHVybDogJy8nLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiByZXF1aXJlKCcuL3ZpZXdzL2hvbWUuaHRtbCcpLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IGZ1bGxuYW1lICsgJy5ob21lJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgXSk7XG4gICAgcmV0dXJuIGFwcDtcbn07IiwiJ3VzZSBzdHJpY3QnO1xudmFyIHNlcnZpY2VuYW1lID0gJ2ZhbW91c0hlbHBlcic7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYXBwKSB7XG5cbiAgICB2YXIgZGVwZW5kZW5jaWVzID0gWyckZmFtb3VzJ107XG5cbiAgICBmdW5jdGlvbiBzZXJ2aWNlKCRmYW1vdXMpIHtcbiAgICAgICAgdmFyIGdldFJlbmRlck5vZGUgPSBmdW5jdGlvbihjYWNoZUVsLCBmaW5kU2VsZWN0b3IpIHtcbiAgICAgICAgICAgIGlmKCFjYWNoZUVsKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsID0gJGZhbW91cy5maW5kKGZpbmRTZWxlY3RvcilbMF07XG4gICAgICAgICAgICAgICAgaWYoZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVFbCA9IGVsLnJlbmRlck5vZGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlRWw7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGdldFJlbmRlck5vZGU6IGdldFJlbmRlck5vZGVcbiAgICAgICAgfTtcblxuICAgIH1cbiAgICBzZXJ2aWNlLiRpbmplY3QgPSBkZXBlbmRlbmNpZXM7XG4gICAgYXBwLmZhY3RvcnkoYXBwLm5hbWUgKyAnLicgKyBzZXJ2aWNlbmFtZSwgc2VydmljZSk7XG59OyIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihhcHApIHtcbiAgICAvLyBpbmplY3Q6c3RhcnRcbiAgICByZXF1aXJlKCcuL2ZhbW91c0hlbHBlcicpKGFwcCk7XG4gICAgcmVxdWlyZSgnLi9waG90b3MnKShhcHApO1xuICAgIC8vIGluamVjdDplbmRcbn07IiwiJ3VzZSBzdHJpY3QnO1xudmFyIHNlcnZpY2VuYW1lID0gJ3Bob3Rvcyc7XG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xudmFyIHJhbmRvbXN0cmluZyA9IHJlcXVpcmUoJ3JhbmRvbXN0cmluZycpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihhcHApIHtcblxuICAgIHZhciBkZXBlbmRlbmNpZXMgPSBbXTtcblxuICAgIGZ1bmN0aW9uIHNlcnZpY2UoKSB7XG4gICAgICAgIHZhciBnZW5lcmF0ZSA9IGZ1bmN0aW9uKHdpZHRoLCBoZWlnaHQsIG51bWJlciwgZ3JvdXBPZikge1xuICAgICAgICAgICAgbnVtYmVyID0gbnVtYmVyIHx8IDE7XG4gICAgICAgICAgICBncm91cE9mID0gZ3JvdXBPZiB8fCAxO1xuICAgICAgICAgICAgdmFyIHBob3RvcyA9IF8uY2hhaW4oXy5yYW5nZShudW1iZXIpKVxuICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdodHRwOi8vbG9yZW1waXhlbC5jb20vJyArIE1hdGgucm91bmQod2lkdGgpICsgJy8nICsgTWF0aC5yb3VuZChoZWlnaHQpICsgJy8/aT0nICsgcmFuZG9tc3RyaW5nLmdlbmVyYXRlKDcpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmdyb3VwQnkoZnVuY3Rpb24odmFsdWUsIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoaSAvIGdyb3VwT2YpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnZhbHVlKCk7XG5cbiAgICAgICAgICAgIHJldHVybiBwaG90b3M7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGdldFN0eWxlID0gZnVuY3Rpb24ocGhvdG9VcmwpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgJ2JhY2tncm91bmQtaW1hZ2UnOiAndXJsKFxcJycgKyBwaG90b1VybCArICdcXCcpJyxcbiAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1zaXplJzogJ2NvdmVyJyxcbiAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1yZXBlYXQnOiAnbm8tcmVwZWF0JyxcbiAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1wb3NpdGlvbic6ICdjZW50ZXInLFxuICAgICAgICAgICAgICAgICd3aWR0aCc6ICcxMDAlJyxcbiAgICAgICAgICAgICAgICAnaGVpZ2h0JzogJzEwMCUnXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBnZW5lcmF0ZTogZ2VuZXJhdGUsXG4gICAgICAgICAgICBnZXRTdHlsZTogZ2V0U3R5bGVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgc2VydmljZS4kaW5qZWN0ID0gZGVwZW5kZW5jaWVzO1xuICAgIGFwcC5mYWN0b3J5KGFwcC5uYW1lICsgJy4nICsgc2VydmljZW5hbWUsIHNlcnZpY2UpO1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9ICc8ZmEtdmlldz5cXG4nICtcbiAgICAnICAgIDwhLS0gU0NST0xMIFZJRVctLT5cXG4nICtcbiAgICAnICAgIDxmYS1zY3JvbGwtdmlldyBpZD1cInNjcm9sbFZpZXdcIiBmYS1vcHRpb25zPVwie2RpcmVjdGlvbjogMSwgZWRnZUdyaXA6MX1cIiBmYS1waXBlLWZyb209XCJ2bS5ldmVudEhhbmRsZXJcIj5cXG4nICtcbiAgICAnICAgICAgICA8IS0tIEhFQURFUiAtLT5cXG4nICtcbiAgICAnICAgICAgICA8ZmEtdmlldz5cXG4nICtcbiAgICAnICAgICAgICAgICAgPGZhLW1vZGlmaWVyIGZhLXNpemU9XCJbdW5kZWZpbmVkLCB2bS5oZWFkZXJIZWlnaHRdXCIgZmEtdHJhbnNsYXRlPVwiWzAsIHZtLmdldFRvb2xiYXJUcmFuc2xhdGUoKV1cIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxmYS1zdXJmYWNlPjwvZmEtc3VyZmFjZT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDwhLS0gTUFJTiBQSE9UTyAtLT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxmYS1tb2RpZmllciBmYS1hbGlnbj1cIlswLjUsMF1cIiBmYS1vcmlnaW49XCJbMC41LDBdXCIgZmEtc2l6ZT1cIlt2bS52aWV3U2l6ZS53aWR0aCt2bS5nZXRPdmVycHVsbCgpLCB2bS5oZWFkZXJIZWlnaHQrMTUrdm0uZ2V0T3ZlcnB1bGwoKV1cIiBmYS10cmFuc2xhdGU9XCJbMCwgLTE1LXZtLmdldE92ZXJwdWxsKCldXCIgZmEtb3BhY2l0eT1cIjFcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8ZmEtc3VyZmFjZSBjbGFzcz1cImZ1bGwtaGVpZ2h0XCIgZmEtei1pbmRleD1cIjJcIiBmYS1waXBlLXRvPVwidm0uZXZlbnRIYW5kbGVyXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJtYWluUGhvdG9cIiBjbGFzcz1cImZ1bGwtaGVpZ2h0XCIgbmctc3R5bGU9XCJ2bS5nZXRQaG90b1N0eWxlKHZtLnBob3RvTWFpbilcIj48L2Rpdj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8L2ZhLXN1cmZhY2U+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8L2ZhLW1vZGlmaWVyPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPCEtLSBQUk9GSUxFIFBJQ1RVUkUgQU5EIFRFWFQgIC0tPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPGZhLW1vZGlmaWVyIGZhLWFsaWduPVwiWzAuNSwwLjVdXCIgZmEtb3JpZ2luPVwiWzAuNSwwLjVdXCIgZmEtc2l6ZT1cIlsyMDAsMTEwXVwiIGZhLXRyYW5zbGF0ZT1cIlswLC0yMC12bS5nZXRPdmVycHVsbCgpLzJdXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPCEtLSBQUk9GSUxFIENJUkNMRSAtLT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8ZmEtbW9kaWZpZXIgZmEtc2l6ZT1cIls5MCw5MF1cIiBmYS1hbGlnbj1cIlswLjUsMF1cIiBmYS1vcmlnaW49XCJbMC41LDBdXCIgZmEtdHJhbnNsYXRlPVwiWzAsIC01XVwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICA8ZmEtc3VyZmFjZSBjbGFzcz1cImNpcmNsZSBmdWxsLWhlaWdodFwiIGZhLXotaW5kZXg9XCI0XCIgZmEtcGlwZS10bz1cInZtLmV2ZW50SGFuZGxlclwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD1cImNpcmNsZVN2Z0NvbnRhaW5lclwiPjwvZGl2PlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICA8L2ZhLXN1cmZhY2U+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPC9mYS1tb2RpZmllcj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8ZmEtbW9kaWZpZXIgZmEtc2l6ZT1cIls4MCw4MF1cIiBmYS1hbGlnbj1cIlswLjUsMF1cIiBmYS1vcmlnaW49XCJbMC41LDBdXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgIDxmYS1zdXJmYWNlIGNsYXNzPVwiZnVsbC1oZWlnaHRcIiBmYS16LWluZGV4PVwiNFwiIGZhLXBpcGUtdG89XCJ2bS5ldmVudEhhbmRsZXJcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaXJjbGUgZnVsbC1oZWlnaHRcIiBuZy1zdHlsZT1cInZtLmdldFBob3RvU3R5bGUodm0ucGhvdG9Qcm9maWxlKVwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgIDwvZmEtc3VyZmFjZT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8L2ZhLW1vZGlmaWVyPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDxmYS1tb2RpZmllciBmYS1zaXplPVwiW3VuZGVmaW5lZCwyMF1cIiBmYS1hbGlnbj1cIlswLjUsMV1cIiBmYS1vcmlnaW49XCJbMC41LDFdXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgIDxmYS1zdXJmYWNlIGNsYXNzPVwid2hpdGUgdGV4dC1jZW50ZXIgdGV4dC1zbWFsbCBmdWxsLWhlaWdodFwiIGZhLXotaW5kZXg9XCI0XCIgZmEtcGlwZS10bz1cInZtLmV2ZW50SGFuZGxlclwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj57e3ZtLnVzZXJOYW1lfX08L2Rpdj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgPC9mYS1zdXJmYWNlPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDwvZmEtbW9kaWZpZXI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8L2ZhLW1vZGlmaWVyPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPCEtLSBIRUFERVIgVE9PTEJBUiAtLT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxmYS1tb2RpZmllciBmYS1zaXplPVwiW3VuZGVmaW5lZCwgNDBdXCIgZmEtYWxpZ249XCJbMCwxXVwiIGZhLW9yaWdpbj1cIlswLDFdXCIgZmEtdHJhbnNsYXRlPVswLDAsMTBdPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDxmYS1tb2RpZmllciBmYS1vcGFjaXR5PVwiMC42XCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgIDxmYS1zdXJmYWNlIGZhLWJhY2tncm91bmQtY29sb3I9XCJcXCdibGFja1xcJ1wiPjwvZmEtc3VyZmFjZT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8L2ZhLW1vZGlmaWVyPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDxmYS1ncmlkLWxheW91dCBmYS1vcHRpb25zPVwie2RpbWVuc2lvbnM6IFszLDFdfVwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICA8ZmEtc3VyZmFjZT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWNlbnRlci00MFwiPlBob3RvPC9kaXY+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgIDwvZmEtc3VyZmFjZT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgPGZhLXN1cmZhY2U+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC1jZW50ZXItNDAgYm9yZGVyLWJvdHRvbVwiPkFsYnVtczwvZGl2PlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICA8L2ZhLXN1cmZhY2U+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgIDxmYS1zdXJmYWNlPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtY2VudGVyLTQwXCI+R3JvdXBzPC9kaXY+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgIDwvZmEtc3VyZmFjZT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8L2ZhLWdyaWQtbGF5b3V0PlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPC9mYS1tb2RpZmllcj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPC9mYS1tb2RpZmllcj5cXG4nICtcbiAgICAnICAgICAgICA8L2ZhLXZpZXc+XFxuJyArXG4gICAgJyAgICAgICAgPCEtLSBJTUFHRVMgR1JJRC0tPlxcbicgK1xuICAgICcgICAgICAgIDxmYS12aWV3IG5nLXJlcGVhdD1cInJvdyBpbiB2bS5waG90b3MgdHJhY2sgYnkgJGluZGV4XCIgZmEtc2l6ZT1cIlt1bmRlZmluZWQsIHZtLnZpZXdTaXplLndpZHRoLzNdXCIgZmEtaW5kZXg9XCIkaW5kZXhcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPGZhLW1vZGlmaWVyPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPGZhLWdyaWQtbGF5b3V0IGZhLW9wdGlvbnM9XCJ7ZGltZW5zaW9ucyA6WzMsMV19XCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPGZhLW1vZGlmaWVyIG5nLXJlcGVhdD1cInBob3RvIGluIHJvd1wiIGZhLXNpemU9XCJbdm0udmlld1NpemUud2lkdGgvMywgdm0udmlld1NpemUud2lkdGgvM11cIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgPGZhLXN1cmZhY2UgZmEtcGlwZS10bz1cInZtLmV2ZW50SGFuZGxlclwiIGZhLWJhY2tncm91bmQtY29sb3I9XCJcXCdibGFja1xcJ1wiIGNsYXNzPVwiZnVsbC1oZWlnaHRcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmdWxsLWhlaWdodCBwaG90b3t7JGluZGV4fX1cIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZnVsbC1oZWlnaHRcIiBuZy1zdHlsZT1cInZtLmdldFBob3RvU3R5bGUocGhvdG8pXCI+PC9kaXY+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgPC9mYS1zdXJmYWNlPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDwvZmEtbW9kaWZpZXI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8L2ZhLWdyaWQtbGF5b3V0PlxcbicgK1xuICAgICcgICAgICAgICAgICA8L2ZhLW1vZGlmaWVyPlxcbicgK1xuICAgICcgICAgICAgIDwvZmEtdmlldz5cXG4nICtcbiAgICAnICAgIDwvZmEtc2Nyb2xsLXZpZXc+XFxuJyArXG4gICAgJyAgICA8IS0tIEZPT1RFUiBCQVItLT5cXG4nICtcbiAgICAnICAgIDxmYS1tb2RpZmllciBmYS1zaXplPVwiW3VuZGVmaW5lZCwgNDBdXCIgZmEtYWxpZ249XCJbMCwxXVwiIGZhLW9yaWdpbj1cIlswLDFdXCI+XFxuJyArXG4gICAgJyAgICAgICAgPGZhLW1vZGlmaWVyIGZhLW9wYWNpdHk9XCIwLjZcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPGZhLXN1cmZhY2UgZmEtYmFja2dyb3VuZC1jb2xvcj1cIlxcJ2JsYWNrXFwnXCI+PC9mYS1zdXJmYWNlPlxcbicgK1xuICAgICcgICAgICAgIDwvZmEtbW9kaWZpZXI+XFxuJyArXG4gICAgJyAgICAgICAgPCEtLSBGT09URVIgQkFSIEJVVFRPTlMgLS0+XFxuJyArXG4gICAgJyAgICAgICAgPGZhLWdyaWQtbGF5b3V0IGZhLW9wdGlvbnM9XCJ7ZGltZW5zaW9uczogWzMsMV19XCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxmYS1zdXJmYWNlPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtY2VudGVyLTQwXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1waG90b1wiPjwvaT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDwvZGl2PlxcbicgK1xuICAgICcgICAgICAgICAgICA8L2ZhLXN1cmZhY2U+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxmYS1zdXJmYWNlPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtY2VudGVyLTUwXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1jYW1lcmEgZmEtMnhcIj48L2k+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8L2Rpdj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPC9mYS1zdXJmYWNlPlxcbicgK1xuICAgICcgICAgICAgICAgICA8ZmEtc3VyZmFjZT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWNlbnRlci00MFwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtdXNlclwiPjwvaT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDwvZGl2PlxcbicgK1xuICAgICcgICAgICAgICAgICA8L2ZhLXN1cmZhY2U+XFxuJyArXG4gICAgJyAgICAgICAgPC9mYS1ncmlkLWxheW91dD5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICA8L2ZhLW1vZGlmaWVyPlxcbicgK1xuICAgICc8L2ZhLXZpZXc+JzsiLCJcbi8qXG4gKiBjbGFzc0xpc3QuanM6IENyb3NzLWJyb3dzZXIgZnVsbCBlbGVtZW50LmNsYXNzTGlzdCBpbXBsZW1lbnRhdGlvbi5cbiAqIDIwMTEtMDYtMTVcbiAqXG4gKiBCeSBFbGkgR3JleSwgaHR0cDovL2VsaWdyZXkuY29tXG4gKiBQdWJsaWMgRG9tYWluLlxuICogTk8gV0FSUkFOVFkgRVhQUkVTU0VEIE9SIElNUExJRUQuIFVTRSBBVCBZT1VSIE9XTiBSSVNLLlxuICovXG5cbi8qZ2xvYmFsIHNlbGYsIGRvY3VtZW50LCBET01FeGNlcHRpb24gKi9cblxuLyohIEBzb3VyY2UgaHR0cDovL3B1cmwuZWxpZ3JleS5jb20vZ2l0aHViL2NsYXNzTGlzdC5qcy9ibG9iL21hc3Rlci9jbGFzc0xpc3QuanMqL1xuXG5pZiAodHlwZW9mIGRvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiICYmICEoXCJjbGFzc0xpc3RcIiBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKSkpIHtcblxuKGZ1bmN0aW9uICh2aWV3KSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG52YXJcbiAgICAgIGNsYXNzTGlzdFByb3AgPSBcImNsYXNzTGlzdFwiXG4gICAgLCBwcm90b1Byb3AgPSBcInByb3RvdHlwZVwiXG4gICAgLCBlbGVtQ3RyUHJvdG8gPSAodmlldy5IVE1MRWxlbWVudCB8fCB2aWV3LkVsZW1lbnQpW3Byb3RvUHJvcF1cbiAgICAsIG9iakN0ciA9IE9iamVjdFxuICAgICwgc3RyVHJpbSA9IFN0cmluZ1twcm90b1Byb3BdLnRyaW0gfHwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCBcIlwiKTtcbiAgICB9XG4gICAgLCBhcnJJbmRleE9mID0gQXJyYXlbcHJvdG9Qcm9wXS5pbmRleE9mIHx8IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgICBpID0gMFxuICAgICAgICAgICAgLCBsZW4gPSB0aGlzLmxlbmd0aFxuICAgICAgICA7XG4gICAgICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChpIGluIHRoaXMgJiYgdGhpc1tpXSA9PT0gaXRlbSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgLy8gVmVuZG9yczogcGxlYXNlIGFsbG93IGNvbnRlbnQgY29kZSB0byBpbnN0YW50aWF0ZSBET01FeGNlcHRpb25zXG4gICAgLCBET01FeCA9IGZ1bmN0aW9uICh0eXBlLCBtZXNzYWdlKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IHR5cGU7XG4gICAgICAgIHRoaXMuY29kZSA9IERPTUV4Y2VwdGlvblt0eXBlXTtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICB9XG4gICAgLCBjaGVja1Rva2VuQW5kR2V0SW5kZXggPSBmdW5jdGlvbiAoY2xhc3NMaXN0LCB0b2tlbikge1xuICAgICAgICBpZiAodG9rZW4gPT09IFwiXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBET01FeChcbiAgICAgICAgICAgICAgICAgIFwiU1lOVEFYX0VSUlwiXG4gICAgICAgICAgICAgICAgLCBcIkFuIGludmFsaWQgb3IgaWxsZWdhbCBzdHJpbmcgd2FzIHNwZWNpZmllZFwiXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmICgvXFxzLy50ZXN0KHRva2VuKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IERPTUV4KFxuICAgICAgICAgICAgICAgICAgXCJJTlZBTElEX0NIQVJBQ1RFUl9FUlJcIlxuICAgICAgICAgICAgICAgICwgXCJTdHJpbmcgY29udGFpbnMgYW4gaW52YWxpZCBjaGFyYWN0ZXJcIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJySW5kZXhPZi5jYWxsKGNsYXNzTGlzdCwgdG9rZW4pO1xuICAgIH1cbiAgICAsIENsYXNzTGlzdCA9IGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgICB0cmltbWVkQ2xhc3NlcyA9IHN0clRyaW0uY2FsbChlbGVtLmNsYXNzTmFtZSlcbiAgICAgICAgICAgICwgY2xhc3NlcyA9IHRyaW1tZWRDbGFzc2VzID8gdHJpbW1lZENsYXNzZXMuc3BsaXQoL1xccysvKSA6IFtdXG4gICAgICAgICAgICAsIGkgPSAwXG4gICAgICAgICAgICAsIGxlbiA9IGNsYXNzZXMubGVuZ3RoXG4gICAgICAgIDtcbiAgICAgICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgdGhpcy5wdXNoKGNsYXNzZXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3VwZGF0ZUNsYXNzTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVsZW0uY2xhc3NOYW1lID0gdGhpcy50b1N0cmluZygpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICAsIGNsYXNzTGlzdFByb3RvID0gQ2xhc3NMaXN0W3Byb3RvUHJvcF0gPSBbXVxuICAgICwgY2xhc3NMaXN0R2V0dGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IENsYXNzTGlzdCh0aGlzKTtcbiAgICB9XG47XG4vLyBNb3N0IERPTUV4Y2VwdGlvbiBpbXBsZW1lbnRhdGlvbnMgZG9uJ3QgYWxsb3cgY2FsbGluZyBET01FeGNlcHRpb24ncyB0b1N0cmluZygpXG4vLyBvbiBub24tRE9NRXhjZXB0aW9ucy4gRXJyb3IncyB0b1N0cmluZygpIGlzIHN1ZmZpY2llbnQgaGVyZS5cbkRPTUV4W3Byb3RvUHJvcF0gPSBFcnJvcltwcm90b1Byb3BdO1xuY2xhc3NMaXN0UHJvdG8uaXRlbSA9IGZ1bmN0aW9uIChpKSB7XG4gICAgcmV0dXJuIHRoaXNbaV0gfHwgbnVsbDtcbn07XG5jbGFzc0xpc3RQcm90by5jb250YWlucyA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgIHRva2VuICs9IFwiXCI7XG4gICAgcmV0dXJuIGNoZWNrVG9rZW5BbmRHZXRJbmRleCh0aGlzLCB0b2tlbikgIT09IC0xO1xufTtcbmNsYXNzTGlzdFByb3RvLmFkZCA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgIHRva2VuICs9IFwiXCI7XG4gICAgaWYgKGNoZWNrVG9rZW5BbmRHZXRJbmRleCh0aGlzLCB0b2tlbikgPT09IC0xKSB7XG4gICAgICAgIHRoaXMucHVzaCh0b2tlbik7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUNsYXNzTmFtZSgpO1xuICAgIH1cbn07XG5jbGFzc0xpc3RQcm90by5yZW1vdmUgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICB0b2tlbiArPSBcIlwiO1xuICAgIHZhciBpbmRleCA9IGNoZWNrVG9rZW5BbmRHZXRJbmRleCh0aGlzLCB0b2tlbik7XG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICB0aGlzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUNsYXNzTmFtZSgpO1xuICAgIH1cbn07XG5jbGFzc0xpc3RQcm90by50b2dnbGUgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICB0b2tlbiArPSBcIlwiO1xuICAgIGlmIChjaGVja1Rva2VuQW5kR2V0SW5kZXgodGhpcywgdG9rZW4pID09PSAtMSkge1xuICAgICAgICB0aGlzLmFkZCh0b2tlbik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5yZW1vdmUodG9rZW4pO1xuICAgIH1cbn07XG5jbGFzc0xpc3RQcm90by50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5qb2luKFwiIFwiKTtcbn07XG5cbmlmIChvYmpDdHIuZGVmaW5lUHJvcGVydHkpIHtcbiAgICB2YXIgY2xhc3NMaXN0UHJvcERlc2MgPSB7XG4gICAgICAgICAgZ2V0OiBjbGFzc0xpc3RHZXR0ZXJcbiAgICAgICAgLCBlbnVtZXJhYmxlOiB0cnVlXG4gICAgICAgICwgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfTtcbiAgICB0cnkge1xuICAgICAgICBvYmpDdHIuZGVmaW5lUHJvcGVydHkoZWxlbUN0clByb3RvLCBjbGFzc0xpc3RQcm9wLCBjbGFzc0xpc3RQcm9wRGVzYyk7XG4gICAgfSBjYXRjaCAoZXgpIHsgLy8gSUUgOCBkb2Vzbid0IHN1cHBvcnQgZW51bWVyYWJsZTp0cnVlXG4gICAgICAgIGlmIChleC5udW1iZXIgPT09IC0weDdGRjVFQzU0KSB7XG4gICAgICAgICAgICBjbGFzc0xpc3RQcm9wRGVzYy5lbnVtZXJhYmxlID0gZmFsc2U7XG4gICAgICAgICAgICBvYmpDdHIuZGVmaW5lUHJvcGVydHkoZWxlbUN0clByb3RvLCBjbGFzc0xpc3RQcm9wLCBjbGFzc0xpc3RQcm9wRGVzYyk7XG4gICAgICAgIH1cbiAgICB9XG59IGVsc2UgaWYgKG9iakN0cltwcm90b1Byb3BdLl9fZGVmaW5lR2V0dGVyX18pIHtcbiAgICBlbGVtQ3RyUHJvdG8uX19kZWZpbmVHZXR0ZXJfXyhjbGFzc0xpc3RQcm9wLCBjbGFzc0xpc3RHZXR0ZXIpO1xufVxuXG59KHNlbGYpKTtcblxufVxuIiwiaWYgKCFGdW5jdGlvbi5wcm90b3R5cGUuYmluZCkge1xuICAgIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKG9UaGlzKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcyAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAvLyBjbG9zZXN0IHRoaW5nIHBvc3NpYmxlIHRvIHRoZSBFQ01BU2NyaXB0IDUgaW50ZXJuYWwgSXNDYWxsYWJsZSBmdW5jdGlvblxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kIC0gd2hhdCBpcyB0cnlpbmcgdG8gYmUgYm91bmQgaXMgbm90IGNhbGxhYmxlXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGFBcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSxcbiAgICAgICAgZlRvQmluZCA9IHRoaXMsXG4gICAgICAgIGZOT1AgPSBmdW5jdGlvbiAoKSB7fSxcbiAgICAgICAgZkJvdW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGZUb0JpbmQuYXBwbHkodGhpcyBpbnN0YW5jZW9mIGZOT1AgJiYgb1RoaXNcbiAgICAgICAgICAgICAgICA/IHRoaXNcbiAgICAgICAgICAgICAgICA6IG9UaGlzLFxuICAgICAgICAgICAgICAgIGFBcmdzLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgZk5PUC5wcm90b3R5cGUgPSB0aGlzLnByb3RvdHlwZTtcbiAgICAgICAgZkJvdW5kLnByb3RvdHlwZSA9IG5ldyBmTk9QKCk7XG5cbiAgICAgICAgcmV0dXJuIGZCb3VuZDtcbiAgICB9O1xufVxuIiwicmVxdWlyZSgnLi9jbGFzc0xpc3QuanMnKTtcbnJlcXVpcmUoJy4vZnVuY3Rpb25Qcm90b3R5cGVCaW5kLmpzJyk7XG5yZXF1aXJlKCcuL3JlcXVlc3RBbmltYXRpb25GcmFtZS5qcycpOyIsIi8vIGFkZHMgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIGZ1bmN0aW9uYWxpdHlcbi8vIFNvdXJjZTogaHR0cDovL3N0cmQ2LmNvbS8yMDExLzA1L2JldHRlci13aW5kb3ctcmVxdWVzdGFuaW1hdGlvbmZyYW1lLXNoaW0vXG5cbndpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgKHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPVxuICB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG4gIHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgICAgfHxcbiAgd2luZG93Lm9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUgICAgICB8fFxuICB3aW5kb3cubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgICAgIHx8XG4gIGZ1bmN0aW9uKGNhbGxiYWNrLCBlbGVtZW50KSB7XG4gICAgcmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgY2FsbGJhY2soK25ldyBEYXRlKCkpO1xuICB9LCAxMDAwIC8gNjApO1xufSk7XG4iLCIoZnVuY3Rpb24gKGdsb2JhbCl7XG4vKipcbiAqIEBsaWNlbnNlXG4gKiBMby1EYXNoIDIuNC4xIChDdXN0b20gQnVpbGQpIDxodHRwOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gLW8gLi9kaXN0L2xvZGFzaC5qc2BcbiAqIENvcHlyaWdodCAyMDEyLTIwMTMgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuNS4yIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IDIwMDktMjAxMyBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICovXG47KGZ1bmN0aW9uKCkge1xuXG4gIC8qKiBVc2VkIGFzIGEgc2FmZSByZWZlcmVuY2UgZm9yIGB1bmRlZmluZWRgIGluIHByZSBFUzUgZW52aXJvbm1lbnRzICovXG4gIHZhciB1bmRlZmluZWQ7XG5cbiAgLyoqIFVzZWQgdG8gcG9vbCBhcnJheXMgYW5kIG9iamVjdHMgdXNlZCBpbnRlcm5hbGx5ICovXG4gIHZhciBhcnJheVBvb2wgPSBbXSxcbiAgICAgIG9iamVjdFBvb2wgPSBbXTtcblxuICAvKiogVXNlZCB0byBnZW5lcmF0ZSB1bmlxdWUgSURzICovXG4gIHZhciBpZENvdW50ZXIgPSAwO1xuXG4gIC8qKiBVc2VkIHRvIHByZWZpeCBrZXlzIHRvIGF2b2lkIGlzc3VlcyB3aXRoIGBfX3Byb3RvX19gIGFuZCBwcm9wZXJ0aWVzIG9uIGBPYmplY3QucHJvdG90eXBlYCAqL1xuICB2YXIga2V5UHJlZml4ID0gK25ldyBEYXRlICsgJyc7XG5cbiAgLyoqIFVzZWQgYXMgdGhlIHNpemUgd2hlbiBvcHRpbWl6YXRpb25zIGFyZSBlbmFibGVkIGZvciBsYXJnZSBhcnJheXMgKi9cbiAgdmFyIGxhcmdlQXJyYXlTaXplID0gNzU7XG5cbiAgLyoqIFVzZWQgYXMgdGhlIG1heCBzaXplIG9mIHRoZSBgYXJyYXlQb29sYCBhbmQgYG9iamVjdFBvb2xgICovXG4gIHZhciBtYXhQb29sU2l6ZSA9IDQwO1xuXG4gIC8qKiBVc2VkIHRvIGRldGVjdCBhbmQgdGVzdCB3aGl0ZXNwYWNlICovXG4gIHZhciB3aGl0ZXNwYWNlID0gKFxuICAgIC8vIHdoaXRlc3BhY2VcbiAgICAnIFxcdFxceDBCXFxmXFx4QTBcXHVmZWZmJyArXG5cbiAgICAvLyBsaW5lIHRlcm1pbmF0b3JzXG4gICAgJ1xcblxcclxcdTIwMjhcXHUyMDI5JyArXG5cbiAgICAvLyB1bmljb2RlIGNhdGVnb3J5IFwiWnNcIiBzcGFjZSBzZXBhcmF0b3JzXG4gICAgJ1xcdTE2ODBcXHUxODBlXFx1MjAwMFxcdTIwMDFcXHUyMDAyXFx1MjAwM1xcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMGFcXHUyMDJmXFx1MjA1ZlxcdTMwMDAnXG4gICk7XG5cbiAgLyoqIFVzZWQgdG8gbWF0Y2ggZW1wdHkgc3RyaW5nIGxpdGVyYWxzIGluIGNvbXBpbGVkIHRlbXBsYXRlIHNvdXJjZSAqL1xuICB2YXIgcmVFbXB0eVN0cmluZ0xlYWRpbmcgPSAvXFxiX19wIFxcKz0gJyc7L2csXG4gICAgICByZUVtcHR5U3RyaW5nTWlkZGxlID0gL1xcYihfX3AgXFwrPSkgJycgXFwrL2csXG4gICAgICByZUVtcHR5U3RyaW5nVHJhaWxpbmcgPSAvKF9fZVxcKC4qP1xcKXxcXGJfX3RcXCkpIFxcK1xcbicnOy9nO1xuXG4gIC8qKlxuICAgKiBVc2VkIHRvIG1hdGNoIEVTNiB0ZW1wbGF0ZSBkZWxpbWl0ZXJzXG4gICAqIGh0dHA6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLWxpdGVyYWxzLXN0cmluZy1saXRlcmFsc1xuICAgKi9cbiAgdmFyIHJlRXNUZW1wbGF0ZSA9IC9cXCRcXHsoW15cXFxcfV0qKD86XFxcXC5bXlxcXFx9XSopKilcXH0vZztcblxuICAvKiogVXNlZCB0byBtYXRjaCByZWdleHAgZmxhZ3MgZnJvbSB0aGVpciBjb2VyY2VkIHN0cmluZyB2YWx1ZXMgKi9cbiAgdmFyIHJlRmxhZ3MgPSAvXFx3KiQvO1xuXG4gIC8qKiBVc2VkIHRvIGRldGVjdGVkIG5hbWVkIGZ1bmN0aW9ucyAqL1xuICB2YXIgcmVGdW5jTmFtZSA9IC9eXFxzKmZ1bmN0aW9uWyBcXG5cXHJcXHRdK1xcdy87XG5cbiAgLyoqIFVzZWQgdG8gbWF0Y2ggXCJpbnRlcnBvbGF0ZVwiIHRlbXBsYXRlIGRlbGltaXRlcnMgKi9cbiAgdmFyIHJlSW50ZXJwb2xhdGUgPSAvPCU9KFtcXHNcXFNdKz8pJT4vZztcblxuICAvKiogVXNlZCB0byBtYXRjaCBsZWFkaW5nIHdoaXRlc3BhY2UgYW5kIHplcm9zIHRvIGJlIHJlbW92ZWQgKi9cbiAgdmFyIHJlTGVhZGluZ1NwYWNlc0FuZFplcm9zID0gUmVnRXhwKCdeWycgKyB3aGl0ZXNwYWNlICsgJ10qMCsoPz0uJCknKTtcblxuICAvKiogVXNlZCB0byBlbnN1cmUgY2FwdHVyaW5nIG9yZGVyIG9mIHRlbXBsYXRlIGRlbGltaXRlcnMgKi9cbiAgdmFyIHJlTm9NYXRjaCA9IC8oJF4pLztcblxuICAvKiogVXNlZCB0byBkZXRlY3QgZnVuY3Rpb25zIGNvbnRhaW5pbmcgYSBgdGhpc2AgcmVmZXJlbmNlICovXG4gIHZhciByZVRoaXMgPSAvXFxidGhpc1xcYi87XG5cbiAgLyoqIFVzZWQgdG8gbWF0Y2ggdW5lc2NhcGVkIGNoYXJhY3RlcnMgaW4gY29tcGlsZWQgc3RyaW5nIGxpdGVyYWxzICovXG4gIHZhciByZVVuZXNjYXBlZFN0cmluZyA9IC9bJ1xcblxcclxcdFxcdTIwMjhcXHUyMDI5XFxcXF0vZztcblxuICAvKiogVXNlZCB0byBhc3NpZ24gZGVmYXVsdCBgY29udGV4dGAgb2JqZWN0IHByb3BlcnRpZXMgKi9cbiAgdmFyIGNvbnRleHRQcm9wcyA9IFtcbiAgICAnQXJyYXknLCAnQm9vbGVhbicsICdEYXRlJywgJ0Z1bmN0aW9uJywgJ01hdGgnLCAnTnVtYmVyJywgJ09iamVjdCcsXG4gICAgJ1JlZ0V4cCcsICdTdHJpbmcnLCAnXycsICdhdHRhY2hFdmVudCcsICdjbGVhclRpbWVvdXQnLCAnaXNGaW5pdGUnLCAnaXNOYU4nLFxuICAgICdwYXJzZUludCcsICdzZXRUaW1lb3V0J1xuICBdO1xuXG4gIC8qKiBVc2VkIHRvIG1ha2UgdGVtcGxhdGUgc291cmNlVVJMcyBlYXNpZXIgdG8gaWRlbnRpZnkgKi9cbiAgdmFyIHRlbXBsYXRlQ291bnRlciA9IDA7XG5cbiAgLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCBzaG9ydGN1dHMgKi9cbiAgdmFyIGFyZ3NDbGFzcyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nLFxuICAgICAgYXJyYXlDbGFzcyA9ICdbb2JqZWN0IEFycmF5XScsXG4gICAgICBib29sQ2xhc3MgPSAnW29iamVjdCBCb29sZWFuXScsXG4gICAgICBkYXRlQ2xhc3MgPSAnW29iamVjdCBEYXRlXScsXG4gICAgICBmdW5jQ2xhc3MgPSAnW29iamVjdCBGdW5jdGlvbl0nLFxuICAgICAgbnVtYmVyQ2xhc3MgPSAnW29iamVjdCBOdW1iZXJdJyxcbiAgICAgIG9iamVjdENsYXNzID0gJ1tvYmplY3QgT2JqZWN0XScsXG4gICAgICByZWdleHBDbGFzcyA9ICdbb2JqZWN0IFJlZ0V4cF0nLFxuICAgICAgc3RyaW5nQ2xhc3MgPSAnW29iamVjdCBTdHJpbmddJztcblxuICAvKiogVXNlZCB0byBpZGVudGlmeSBvYmplY3QgY2xhc3NpZmljYXRpb25zIHRoYXQgYF8uY2xvbmVgIHN1cHBvcnRzICovXG4gIHZhciBjbG9uZWFibGVDbGFzc2VzID0ge307XG4gIGNsb25lYWJsZUNsYXNzZXNbZnVuY0NsYXNzXSA9IGZhbHNlO1xuICBjbG9uZWFibGVDbGFzc2VzW2FyZ3NDbGFzc10gPSBjbG9uZWFibGVDbGFzc2VzW2FycmF5Q2xhc3NdID1cbiAgY2xvbmVhYmxlQ2xhc3Nlc1tib29sQ2xhc3NdID0gY2xvbmVhYmxlQ2xhc3Nlc1tkYXRlQ2xhc3NdID1cbiAgY2xvbmVhYmxlQ2xhc3Nlc1tudW1iZXJDbGFzc10gPSBjbG9uZWFibGVDbGFzc2VzW29iamVjdENsYXNzXSA9XG4gIGNsb25lYWJsZUNsYXNzZXNbcmVnZXhwQ2xhc3NdID0gY2xvbmVhYmxlQ2xhc3Nlc1tzdHJpbmdDbGFzc10gPSB0cnVlO1xuXG4gIC8qKiBVc2VkIGFzIGFuIGludGVybmFsIGBfLmRlYm91bmNlYCBvcHRpb25zIG9iamVjdCAqL1xuICB2YXIgZGVib3VuY2VPcHRpb25zID0ge1xuICAgICdsZWFkaW5nJzogZmFsc2UsXG4gICAgJ21heFdhaXQnOiAwLFxuICAgICd0cmFpbGluZyc6IGZhbHNlXG4gIH07XG5cbiAgLyoqIFVzZWQgYXMgdGhlIHByb3BlcnR5IGRlc2NyaXB0b3IgZm9yIGBfX2JpbmREYXRhX19gICovXG4gIHZhciBkZXNjcmlwdG9yID0ge1xuICAgICdjb25maWd1cmFibGUnOiBmYWxzZSxcbiAgICAnZW51bWVyYWJsZSc6IGZhbHNlLFxuICAgICd2YWx1ZSc6IG51bGwsXG4gICAgJ3dyaXRhYmxlJzogZmFsc2VcbiAgfTtcblxuICAvKiogVXNlZCB0byBkZXRlcm1pbmUgaWYgdmFsdWVzIGFyZSBvZiB0aGUgbGFuZ3VhZ2UgdHlwZSBPYmplY3QgKi9cbiAgdmFyIG9iamVjdFR5cGVzID0ge1xuICAgICdib29sZWFuJzogZmFsc2UsXG4gICAgJ2Z1bmN0aW9uJzogdHJ1ZSxcbiAgICAnb2JqZWN0JzogdHJ1ZSxcbiAgICAnbnVtYmVyJzogZmFsc2UsXG4gICAgJ3N0cmluZyc6IGZhbHNlLFxuICAgICd1bmRlZmluZWQnOiBmYWxzZVxuICB9O1xuXG4gIC8qKiBVc2VkIHRvIGVzY2FwZSBjaGFyYWN0ZXJzIGZvciBpbmNsdXNpb24gaW4gY29tcGlsZWQgc3RyaW5nIGxpdGVyYWxzICovXG4gIHZhciBzdHJpbmdFc2NhcGVzID0ge1xuICAgICdcXFxcJzogJ1xcXFwnLFxuICAgIFwiJ1wiOiBcIidcIixcbiAgICAnXFxuJzogJ24nLFxuICAgICdcXHInOiAncicsXG4gICAgJ1xcdCc6ICd0JyxcbiAgICAnXFx1MjAyOCc6ICd1MjAyOCcsXG4gICAgJ1xcdTIwMjknOiAndTIwMjknXG4gIH07XG5cbiAgLyoqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QgKi9cbiAgdmFyIHJvb3QgPSAob2JqZWN0VHlwZXNbdHlwZW9mIHdpbmRvd10gJiYgd2luZG93KSB8fCB0aGlzO1xuXG4gIC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZXhwb3J0c2AgKi9cbiAgdmFyIGZyZWVFeHBvcnRzID0gb2JqZWN0VHlwZXNbdHlwZW9mIGV4cG9ydHNdICYmIGV4cG9ydHMgJiYgIWV4cG9ydHMubm9kZVR5cGUgJiYgZXhwb3J0cztcblxuICAvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYG1vZHVsZWAgKi9cbiAgdmFyIGZyZWVNb2R1bGUgPSBvYmplY3RUeXBlc1t0eXBlb2YgbW9kdWxlXSAmJiBtb2R1bGUgJiYgIW1vZHVsZS5ub2RlVHlwZSAmJiBtb2R1bGU7XG5cbiAgLyoqIERldGVjdCB0aGUgcG9wdWxhciBDb21tb25KUyBleHRlbnNpb24gYG1vZHVsZS5leHBvcnRzYCAqL1xuICB2YXIgbW9kdWxlRXhwb3J0cyA9IGZyZWVNb2R1bGUgJiYgZnJlZU1vZHVsZS5leHBvcnRzID09PSBmcmVlRXhwb3J0cyAmJiBmcmVlRXhwb3J0cztcblxuICAvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzIG9yIEJyb3dzZXJpZmllZCBjb2RlIGFuZCB1c2UgaXQgYXMgYHJvb3RgICovXG4gIHZhciBmcmVlR2xvYmFsID0gb2JqZWN0VHlwZXNbdHlwZW9mIGdsb2JhbF0gJiYgZ2xvYmFsO1xuICBpZiAoZnJlZUdsb2JhbCAmJiAoZnJlZUdsb2JhbC5nbG9iYWwgPT09IGZyZWVHbG9iYWwgfHwgZnJlZUdsb2JhbC53aW5kb3cgPT09IGZyZWVHbG9iYWwpKSB7XG4gICAgcm9vdCA9IGZyZWVHbG9iYWw7XG4gIH1cblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvKipcbiAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaW5kZXhPZmAgd2l0aG91dCBzdXBwb3J0IGZvciBiaW5hcnkgc2VhcmNoZXNcbiAgICogb3IgYGZyb21JbmRleGAgY29uc3RyYWludHMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzZWFyY2guXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNlYXJjaCBmb3IuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbZnJvbUluZGV4PTBdIFRoZSBpbmRleCB0byBzZWFyY2ggZnJvbS5cbiAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIG1hdGNoZWQgdmFsdWUgb3IgYC0xYC5cbiAgICovXG4gIGZ1bmN0aW9uIGJhc2VJbmRleE9mKGFycmF5LCB2YWx1ZSwgZnJvbUluZGV4KSB7XG4gICAgdmFyIGluZGV4ID0gKGZyb21JbmRleCB8fCAwKSAtIDEsXG4gICAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcblxuICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICBpZiAoYXJyYXlbaW5kZXhdID09PSB2YWx1ZSkge1xuICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAtMTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiBgXy5jb250YWluc2AgZm9yIGNhY2hlIG9iamVjdHMgdGhhdCBtaW1pY3MgdGhlIHJldHVyblxuICAgKiBzaWduYXR1cmUgb2YgYF8uaW5kZXhPZmAgYnkgcmV0dXJuaW5nIGAwYCBpZiB0aGUgdmFsdWUgaXMgZm91bmQsIGVsc2UgYC0xYC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtPYmplY3R9IGNhY2hlIFRoZSBjYWNoZSBvYmplY3QgdG8gaW5zcGVjdC5cbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VhcmNoIGZvci5cbiAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyBgMGAgaWYgYHZhbHVlYCBpcyBmb3VuZCwgZWxzZSBgLTFgLlxuICAgKi9cbiAgZnVuY3Rpb24gY2FjaGVJbmRleE9mKGNhY2hlLCB2YWx1ZSkge1xuICAgIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICAgIGNhY2hlID0gY2FjaGUuY2FjaGU7XG5cbiAgICBpZiAodHlwZSA9PSAnYm9vbGVhbicgfHwgdmFsdWUgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGNhY2hlW3ZhbHVlXSA/IDAgOiAtMTtcbiAgICB9XG4gICAgaWYgKHR5cGUgIT0gJ251bWJlcicgJiYgdHlwZSAhPSAnc3RyaW5nJykge1xuICAgICAgdHlwZSA9ICdvYmplY3QnO1xuICAgIH1cbiAgICB2YXIga2V5ID0gdHlwZSA9PSAnbnVtYmVyJyA/IHZhbHVlIDoga2V5UHJlZml4ICsgdmFsdWU7XG4gICAgY2FjaGUgPSAoY2FjaGUgPSBjYWNoZVt0eXBlXSkgJiYgY2FjaGVba2V5XTtcblxuICAgIHJldHVybiB0eXBlID09ICdvYmplY3QnXG4gICAgICA/IChjYWNoZSAmJiBiYXNlSW5kZXhPZihjYWNoZSwgdmFsdWUpID4gLTEgPyAwIDogLTEpXG4gICAgICA6IChjYWNoZSA/IDAgOiAtMSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhIGdpdmVuIHZhbHVlIHRvIHRoZSBjb3JyZXNwb25kaW5nIGNhY2hlIG9iamVjdC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gYWRkIHRvIHRoZSBjYWNoZS5cbiAgICovXG4gIGZ1bmN0aW9uIGNhY2hlUHVzaCh2YWx1ZSkge1xuICAgIHZhciBjYWNoZSA9IHRoaXMuY2FjaGUsXG4gICAgICAgIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cbiAgICBpZiAodHlwZSA9PSAnYm9vbGVhbicgfHwgdmFsdWUgPT0gbnVsbCkge1xuICAgICAgY2FjaGVbdmFsdWVdID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHR5cGUgIT0gJ251bWJlcicgJiYgdHlwZSAhPSAnc3RyaW5nJykge1xuICAgICAgICB0eXBlID0gJ29iamVjdCc7XG4gICAgICB9XG4gICAgICB2YXIga2V5ID0gdHlwZSA9PSAnbnVtYmVyJyA/IHZhbHVlIDoga2V5UHJlZml4ICsgdmFsdWUsXG4gICAgICAgICAgdHlwZUNhY2hlID0gY2FjaGVbdHlwZV0gfHwgKGNhY2hlW3R5cGVdID0ge30pO1xuXG4gICAgICBpZiAodHlwZSA9PSAnb2JqZWN0Jykge1xuICAgICAgICAodHlwZUNhY2hlW2tleV0gfHwgKHR5cGVDYWNoZVtrZXldID0gW10pKS5wdXNoKHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHR5cGVDYWNoZVtrZXldID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXNlZCBieSBgXy5tYXhgIGFuZCBgXy5taW5gIGFzIHRoZSBkZWZhdWx0IGNhbGxiYWNrIHdoZW4gYSBnaXZlblxuICAgKiBjb2xsZWN0aW9uIGlzIGEgc3RyaW5nIHZhbHVlLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgVGhlIGNoYXJhY3RlciB0byBpbnNwZWN0LlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBjb2RlIHVuaXQgb2YgZ2l2ZW4gY2hhcmFjdGVyLlxuICAgKi9cbiAgZnVuY3Rpb24gY2hhckF0Q2FsbGJhY2sodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUuY2hhckNvZGVBdCgwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VkIGJ5IGBzb3J0QnlgIHRvIGNvbXBhcmUgdHJhbnNmb3JtZWQgYGNvbGxlY3Rpb25gIGVsZW1lbnRzLCBzdGFibGUgc29ydGluZ1xuICAgKiB0aGVtIGluIGFzY2VuZGluZyBvcmRlci5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtPYmplY3R9IGEgVGhlIG9iamVjdCB0byBjb21wYXJlIHRvIGBiYC5cbiAgICogQHBhcmFtIHtPYmplY3R9IGIgVGhlIG9iamVjdCB0byBjb21wYXJlIHRvIGBhYC5cbiAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgc29ydCBvcmRlciBpbmRpY2F0b3Igb2YgYDFgIG9yIGAtMWAuXG4gICAqL1xuICBmdW5jdGlvbiBjb21wYXJlQXNjZW5kaW5nKGEsIGIpIHtcbiAgICB2YXIgYWMgPSBhLmNyaXRlcmlhLFxuICAgICAgICBiYyA9IGIuY3JpdGVyaWEsXG4gICAgICAgIGluZGV4ID0gLTEsXG4gICAgICAgIGxlbmd0aCA9IGFjLmxlbmd0aDtcblxuICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICB2YXIgdmFsdWUgPSBhY1tpbmRleF0sXG4gICAgICAgICAgb3RoZXIgPSBiY1tpbmRleF07XG5cbiAgICAgIGlmICh2YWx1ZSAhPT0gb3RoZXIpIHtcbiAgICAgICAgaWYgKHZhbHVlID4gb3RoZXIgfHwgdHlwZW9mIHZhbHVlID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlIDwgb3RoZXIgfHwgdHlwZW9mIG90aGVyID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vIEZpeGVzIGFuIGBBcnJheSNzb3J0YCBidWcgaW4gdGhlIEpTIGVuZ2luZSBlbWJlZGRlZCBpbiBBZG9iZSBhcHBsaWNhdGlvbnNcbiAgICAvLyB0aGF0IGNhdXNlcyBpdCwgdW5kZXIgY2VydGFpbiBjaXJjdW1zdGFuY2VzLCB0byByZXR1cm4gdGhlIHNhbWUgdmFsdWUgZm9yXG4gICAgLy8gYGFgIGFuZCBgYmAuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vamFzaGtlbmFzL3VuZGVyc2NvcmUvcHVsbC8xMjQ3XG4gICAgLy9cbiAgICAvLyBUaGlzIGFsc28gZW5zdXJlcyBhIHN0YWJsZSBzb3J0IGluIFY4IGFuZCBvdGhlciBlbmdpbmVzLlxuICAgIC8vIFNlZSBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD05MFxuICAgIHJldHVybiBhLmluZGV4IC0gYi5pbmRleDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgY2FjaGUgb2JqZWN0IHRvIG9wdGltaXplIGxpbmVhciBzZWFyY2hlcyBvZiBsYXJnZSBhcnJheXMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7QXJyYXl9IFthcnJheT1bXV0gVGhlIGFycmF5IHRvIHNlYXJjaC5cbiAgICogQHJldHVybnMge251bGx8T2JqZWN0fSBSZXR1cm5zIHRoZSBjYWNoZSBvYmplY3Qgb3IgYG51bGxgIGlmIGNhY2hpbmcgc2hvdWxkIG5vdCBiZSB1c2VkLlxuICAgKi9cbiAgZnVuY3Rpb24gY3JlYXRlQ2FjaGUoYXJyYXkpIHtcbiAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuICAgICAgICBmaXJzdCA9IGFycmF5WzBdLFxuICAgICAgICBtaWQgPSBhcnJheVsobGVuZ3RoIC8gMikgfCAwXSxcbiAgICAgICAgbGFzdCA9IGFycmF5W2xlbmd0aCAtIDFdO1xuXG4gICAgaWYgKGZpcnN0ICYmIHR5cGVvZiBmaXJzdCA9PSAnb2JqZWN0JyAmJlxuICAgICAgICBtaWQgJiYgdHlwZW9mIG1pZCA9PSAnb2JqZWN0JyAmJiBsYXN0ICYmIHR5cGVvZiBsYXN0ID09ICdvYmplY3QnKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciBjYWNoZSA9IGdldE9iamVjdCgpO1xuICAgIGNhY2hlWydmYWxzZSddID0gY2FjaGVbJ251bGwnXSA9IGNhY2hlWyd0cnVlJ10gPSBjYWNoZVsndW5kZWZpbmVkJ10gPSBmYWxzZTtcblxuICAgIHZhciByZXN1bHQgPSBnZXRPYmplY3QoKTtcbiAgICByZXN1bHQuYXJyYXkgPSBhcnJheTtcbiAgICByZXN1bHQuY2FjaGUgPSBjYWNoZTtcbiAgICByZXN1bHQucHVzaCA9IGNhY2hlUHVzaDtcblxuICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICByZXN1bHQucHVzaChhcnJheVtpbmRleF0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZWQgYnkgYHRlbXBsYXRlYCB0byBlc2NhcGUgY2hhcmFjdGVycyBmb3IgaW5jbHVzaW9uIGluIGNvbXBpbGVkXG4gICAqIHN0cmluZyBsaXRlcmFscy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1hdGNoIFRoZSBtYXRjaGVkIGNoYXJhY3RlciB0byBlc2NhcGUuXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGVzY2FwZWQgY2hhcmFjdGVyLlxuICAgKi9cbiAgZnVuY3Rpb24gZXNjYXBlU3RyaW5nQ2hhcihtYXRjaCkge1xuICAgIHJldHVybiAnXFxcXCcgKyBzdHJpbmdFc2NhcGVzW21hdGNoXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGFuIGFycmF5IGZyb20gdGhlIGFycmF5IHBvb2wgb3IgY3JlYXRlcyBhIG5ldyBvbmUgaWYgdGhlIHBvb2wgaXMgZW1wdHkuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm5zIHtBcnJheX0gVGhlIGFycmF5IGZyb20gdGhlIHBvb2wuXG4gICAqL1xuICBmdW5jdGlvbiBnZXRBcnJheSgpIHtcbiAgICByZXR1cm4gYXJyYXlQb29sLnBvcCgpIHx8IFtdO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYW4gb2JqZWN0IGZyb20gdGhlIG9iamVjdCBwb29sIG9yIGNyZWF0ZXMgYSBuZXcgb25lIGlmIHRoZSBwb29sIGlzIGVtcHR5LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgb2JqZWN0IGZyb20gdGhlIHBvb2wuXG4gICAqL1xuICBmdW5jdGlvbiBnZXRPYmplY3QoKSB7XG4gICAgcmV0dXJuIG9iamVjdFBvb2wucG9wKCkgfHwge1xuICAgICAgJ2FycmF5JzogbnVsbCxcbiAgICAgICdjYWNoZSc6IG51bGwsXG4gICAgICAnY3JpdGVyaWEnOiBudWxsLFxuICAgICAgJ2ZhbHNlJzogZmFsc2UsXG4gICAgICAnaW5kZXgnOiAwLFxuICAgICAgJ251bGwnOiBmYWxzZSxcbiAgICAgICdudW1iZXInOiBudWxsLFxuICAgICAgJ29iamVjdCc6IG51bGwsXG4gICAgICAncHVzaCc6IG51bGwsXG4gICAgICAnc3RyaW5nJzogbnVsbCxcbiAgICAgICd0cnVlJzogZmFsc2UsXG4gICAgICAndW5kZWZpbmVkJzogZmFsc2UsXG4gICAgICAndmFsdWUnOiBudWxsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWxlYXNlcyB0aGUgZ2l2ZW4gYXJyYXkgYmFjayB0byB0aGUgYXJyYXkgcG9vbC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtBcnJheX0gW2FycmF5XSBUaGUgYXJyYXkgdG8gcmVsZWFzZS5cbiAgICovXG4gIGZ1bmN0aW9uIHJlbGVhc2VBcnJheShhcnJheSkge1xuICAgIGFycmF5Lmxlbmd0aCA9IDA7XG4gICAgaWYgKGFycmF5UG9vbC5sZW5ndGggPCBtYXhQb29sU2l6ZSkge1xuICAgICAgYXJyYXlQb29sLnB1c2goYXJyYXkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWxlYXNlcyB0aGUgZ2l2ZW4gb2JqZWN0IGJhY2sgdG8gdGhlIG9iamVjdCBwb29sLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gW29iamVjdF0gVGhlIG9iamVjdCB0byByZWxlYXNlLlxuICAgKi9cbiAgZnVuY3Rpb24gcmVsZWFzZU9iamVjdChvYmplY3QpIHtcbiAgICB2YXIgY2FjaGUgPSBvYmplY3QuY2FjaGU7XG4gICAgaWYgKGNhY2hlKSB7XG4gICAgICByZWxlYXNlT2JqZWN0KGNhY2hlKTtcbiAgICB9XG4gICAgb2JqZWN0LmFycmF5ID0gb2JqZWN0LmNhY2hlID0gb2JqZWN0LmNyaXRlcmlhID0gb2JqZWN0Lm9iamVjdCA9IG9iamVjdC5udW1iZXIgPSBvYmplY3Quc3RyaW5nID0gb2JqZWN0LnZhbHVlID0gbnVsbDtcbiAgICBpZiAob2JqZWN0UG9vbC5sZW5ndGggPCBtYXhQb29sU2l6ZSkge1xuICAgICAgb2JqZWN0UG9vbC5wdXNoKG9iamVjdCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNsaWNlcyB0aGUgYGNvbGxlY3Rpb25gIGZyb20gdGhlIGBzdGFydGAgaW5kZXggdXAgdG8sIGJ1dCBub3QgaW5jbHVkaW5nLFxuICAgKiB0aGUgYGVuZGAgaW5kZXguXG4gICAqXG4gICAqIE5vdGU6IFRoaXMgZnVuY3Rpb24gaXMgdXNlZCBpbnN0ZWFkIG9mIGBBcnJheSNzbGljZWAgdG8gc3VwcG9ydCBub2RlIGxpc3RzXG4gICAqIGluIElFIDwgOSBhbmQgdG8gZW5zdXJlIGRlbnNlIGFycmF5cyBhcmUgcmV0dXJuZWQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBzbGljZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IFRoZSBzdGFydCBpbmRleC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBUaGUgZW5kIGluZGV4LlxuICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheS5cbiAgICovXG4gIGZ1bmN0aW9uIHNsaWNlKGFycmF5LCBzdGFydCwgZW5kKSB7XG4gICAgc3RhcnQgfHwgKHN0YXJ0ID0gMCk7XG4gICAgaWYgKHR5cGVvZiBlbmQgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGVuZCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcbiAgICB9XG4gICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgIGxlbmd0aCA9IGVuZCAtIHN0YXJ0IHx8IDAsXG4gICAgICAgIHJlc3VsdCA9IEFycmF5KGxlbmd0aCA8IDAgPyAwIDogbGVuZ3RoKTtcblxuICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICByZXN1bHRbaW5kZXhdID0gYXJyYXlbc3RhcnQgKyBpbmRleF07XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGBsb2Rhc2hgIGZ1bmN0aW9uIHVzaW5nIHRoZSBnaXZlbiBjb250ZXh0IG9iamVjdC5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyT2YgX1xuICAgKiBAY2F0ZWdvcnkgVXRpbGl0aWVzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbY29udGV4dD1yb290XSBUaGUgY29udGV4dCBvYmplY3QuXG4gICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgYGxvZGFzaGAgZnVuY3Rpb24uXG4gICAqL1xuICBmdW5jdGlvbiBydW5JbkNvbnRleHQoY29udGV4dCkge1xuICAgIC8vIEF2b2lkIGlzc3VlcyB3aXRoIHNvbWUgRVMzIGVudmlyb25tZW50cyB0aGF0IGF0dGVtcHQgdG8gdXNlIHZhbHVlcywgbmFtZWRcbiAgICAvLyBhZnRlciBidWlsdC1pbiBjb25zdHJ1Y3RvcnMgbGlrZSBgT2JqZWN0YCwgZm9yIHRoZSBjcmVhdGlvbiBvZiBsaXRlcmFscy5cbiAgICAvLyBFUzUgY2xlYXJzIHRoaXMgdXAgYnkgc3RhdGluZyB0aGF0IGxpdGVyYWxzIG11c3QgdXNlIGJ1aWx0LWluIGNvbnN0cnVjdG9ycy5cbiAgICAvLyBTZWUgaHR0cDovL2VzNS5naXRodWIuaW8vI3gxMS4xLjUuXG4gICAgY29udGV4dCA9IGNvbnRleHQgPyBfLmRlZmF1bHRzKHJvb3QuT2JqZWN0KCksIGNvbnRleHQsIF8ucGljayhyb290LCBjb250ZXh0UHJvcHMpKSA6IHJvb3Q7XG5cbiAgICAvKiogTmF0aXZlIGNvbnN0cnVjdG9yIHJlZmVyZW5jZXMgKi9cbiAgICB2YXIgQXJyYXkgPSBjb250ZXh0LkFycmF5LFxuICAgICAgICBCb29sZWFuID0gY29udGV4dC5Cb29sZWFuLFxuICAgICAgICBEYXRlID0gY29udGV4dC5EYXRlLFxuICAgICAgICBGdW5jdGlvbiA9IGNvbnRleHQuRnVuY3Rpb24sXG4gICAgICAgIE1hdGggPSBjb250ZXh0Lk1hdGgsXG4gICAgICAgIE51bWJlciA9IGNvbnRleHQuTnVtYmVyLFxuICAgICAgICBPYmplY3QgPSBjb250ZXh0Lk9iamVjdCxcbiAgICAgICAgUmVnRXhwID0gY29udGV4dC5SZWdFeHAsXG4gICAgICAgIFN0cmluZyA9IGNvbnRleHQuU3RyaW5nLFxuICAgICAgICBUeXBlRXJyb3IgPSBjb250ZXh0LlR5cGVFcnJvcjtcblxuICAgIC8qKlxuICAgICAqIFVzZWQgZm9yIGBBcnJheWAgbWV0aG9kIHJlZmVyZW5jZXMuXG4gICAgICpcbiAgICAgKiBOb3JtYWxseSBgQXJyYXkucHJvdG90eXBlYCB3b3VsZCBzdWZmaWNlLCBob3dldmVyLCB1c2luZyBhbiBhcnJheSBsaXRlcmFsXG4gICAgICogYXZvaWRzIGlzc3VlcyBpbiBOYXJ3aGFsLlxuICAgICAqL1xuICAgIHZhciBhcnJheVJlZiA9IFtdO1xuXG4gICAgLyoqIFVzZWQgZm9yIG5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcyAqL1xuICAgIHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbiAgICAvKiogVXNlZCB0byByZXN0b3JlIHRoZSBvcmlnaW5hbCBgX2AgcmVmZXJlbmNlIGluIGBub0NvbmZsaWN0YCAqL1xuICAgIHZhciBvbGREYXNoID0gY29udGV4dC5fO1xuXG4gICAgLyoqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgaW50ZXJuYWwgW1tDbGFzc11dIG9mIHZhbHVlcyAqL1xuICAgIHZhciB0b1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4gICAgLyoqIFVzZWQgdG8gZGV0ZWN0IGlmIGEgbWV0aG9kIGlzIG5hdGl2ZSAqL1xuICAgIHZhciByZU5hdGl2ZSA9IFJlZ0V4cCgnXicgK1xuICAgICAgU3RyaW5nKHRvU3RyaW5nKVxuICAgICAgICAucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csICdcXFxcJCYnKVxuICAgICAgICAucmVwbGFjZSgvdG9TdHJpbmd8IGZvciBbXlxcXV0rL2csICcuKj8nKSArICckJ1xuICAgICk7XG5cbiAgICAvKiogTmF0aXZlIG1ldGhvZCBzaG9ydGN1dHMgKi9cbiAgICB2YXIgY2VpbCA9IE1hdGguY2VpbCxcbiAgICAgICAgY2xlYXJUaW1lb3V0ID0gY29udGV4dC5jbGVhclRpbWVvdXQsXG4gICAgICAgIGZsb29yID0gTWF0aC5mbG9vcixcbiAgICAgICAgZm5Ub1N0cmluZyA9IEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZyxcbiAgICAgICAgZ2V0UHJvdG90eXBlT2YgPSBpc05hdGl2ZShnZXRQcm90b3R5cGVPZiA9IE9iamVjdC5nZXRQcm90b3R5cGVPZikgJiYgZ2V0UHJvdG90eXBlT2YsXG4gICAgICAgIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHksXG4gICAgICAgIHB1c2ggPSBhcnJheVJlZi5wdXNoLFxuICAgICAgICBzZXRUaW1lb3V0ID0gY29udGV4dC5zZXRUaW1lb3V0LFxuICAgICAgICBzcGxpY2UgPSBhcnJheVJlZi5zcGxpY2UsXG4gICAgICAgIHVuc2hpZnQgPSBhcnJheVJlZi51bnNoaWZ0O1xuXG4gICAgLyoqIFVzZWQgdG8gc2V0IG1ldGEgZGF0YSBvbiBmdW5jdGlvbnMgKi9cbiAgICB2YXIgZGVmaW5lUHJvcGVydHkgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAvLyBJRSA4IG9ubHkgYWNjZXB0cyBET00gZWxlbWVudHNcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBvID0ge30sXG4gICAgICAgICAgICBmdW5jID0gaXNOYXRpdmUoZnVuYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgJiYgZnVuYyxcbiAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmMobywgbywgbykgJiYgZnVuYztcbiAgICAgIH0gY2F0Y2goZSkgeyB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0oKSk7XG5cbiAgICAvKiBOYXRpdmUgbWV0aG9kIHNob3J0Y3V0cyBmb3IgbWV0aG9kcyB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcyAqL1xuICAgIHZhciBuYXRpdmVDcmVhdGUgPSBpc05hdGl2ZShuYXRpdmVDcmVhdGUgPSBPYmplY3QuY3JlYXRlKSAmJiBuYXRpdmVDcmVhdGUsXG4gICAgICAgIG5hdGl2ZUlzQXJyYXkgPSBpc05hdGl2ZShuYXRpdmVJc0FycmF5ID0gQXJyYXkuaXNBcnJheSkgJiYgbmF0aXZlSXNBcnJheSxcbiAgICAgICAgbmF0aXZlSXNGaW5pdGUgPSBjb250ZXh0LmlzRmluaXRlLFxuICAgICAgICBuYXRpdmVJc05hTiA9IGNvbnRleHQuaXNOYU4sXG4gICAgICAgIG5hdGl2ZUtleXMgPSBpc05hdGl2ZShuYXRpdmVLZXlzID0gT2JqZWN0LmtleXMpICYmIG5hdGl2ZUtleXMsXG4gICAgICAgIG5hdGl2ZU1heCA9IE1hdGgubWF4LFxuICAgICAgICBuYXRpdmVNaW4gPSBNYXRoLm1pbixcbiAgICAgICAgbmF0aXZlUGFyc2VJbnQgPSBjb250ZXh0LnBhcnNlSW50LFxuICAgICAgICBuYXRpdmVSYW5kb20gPSBNYXRoLnJhbmRvbTtcblxuICAgIC8qKiBVc2VkIHRvIGxvb2t1cCBhIGJ1aWx0LWluIGNvbnN0cnVjdG9yIGJ5IFtbQ2xhc3NdXSAqL1xuICAgIHZhciBjdG9yQnlDbGFzcyA9IHt9O1xuICAgIGN0b3JCeUNsYXNzW2FycmF5Q2xhc3NdID0gQXJyYXk7XG4gICAgY3RvckJ5Q2xhc3NbYm9vbENsYXNzXSA9IEJvb2xlYW47XG4gICAgY3RvckJ5Q2xhc3NbZGF0ZUNsYXNzXSA9IERhdGU7XG4gICAgY3RvckJ5Q2xhc3NbZnVuY0NsYXNzXSA9IEZ1bmN0aW9uO1xuICAgIGN0b3JCeUNsYXNzW29iamVjdENsYXNzXSA9IE9iamVjdDtcbiAgICBjdG9yQnlDbGFzc1tudW1iZXJDbGFzc10gPSBOdW1iZXI7XG4gICAgY3RvckJ5Q2xhc3NbcmVnZXhwQ2xhc3NdID0gUmVnRXhwO1xuICAgIGN0b3JCeUNsYXNzW3N0cmluZ0NsYXNzXSA9IFN0cmluZztcblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGBsb2Rhc2hgIG9iamVjdCB3aGljaCB3cmFwcyB0aGUgZ2l2ZW4gdmFsdWUgdG8gZW5hYmxlIGludHVpdGl2ZVxuICAgICAqIG1ldGhvZCBjaGFpbmluZy5cbiAgICAgKlxuICAgICAqIEluIGFkZGl0aW9uIHRvIExvLURhc2ggbWV0aG9kcywgd3JhcHBlcnMgYWxzbyBoYXZlIHRoZSBmb2xsb3dpbmcgYEFycmF5YCBtZXRob2RzOlxuICAgICAqIGBjb25jYXRgLCBgam9pbmAsIGBwb3BgLCBgcHVzaGAsIGByZXZlcnNlYCwgYHNoaWZ0YCwgYHNsaWNlYCwgYHNvcnRgLCBgc3BsaWNlYCxcbiAgICAgKiBhbmQgYHVuc2hpZnRgXG4gICAgICpcbiAgICAgKiBDaGFpbmluZyBpcyBzdXBwb3J0ZWQgaW4gY3VzdG9tIGJ1aWxkcyBhcyBsb25nIGFzIHRoZSBgdmFsdWVgIG1ldGhvZCBpc1xuICAgICAqIGltcGxpY2l0bHkgb3IgZXhwbGljaXRseSBpbmNsdWRlZCBpbiB0aGUgYnVpbGQuXG4gICAgICpcbiAgICAgKiBUaGUgY2hhaW5hYmxlIHdyYXBwZXIgZnVuY3Rpb25zIGFyZTpcbiAgICAgKiBgYWZ0ZXJgLCBgYXNzaWduYCwgYGJpbmRgLCBgYmluZEFsbGAsIGBiaW5kS2V5YCwgYGNoYWluYCwgYGNvbXBhY3RgLFxuICAgICAqIGBjb21wb3NlYCwgYGNvbmNhdGAsIGBjb3VudEJ5YCwgYGNyZWF0ZWAsIGBjcmVhdGVDYWxsYmFja2AsIGBjdXJyeWAsXG4gICAgICogYGRlYm91bmNlYCwgYGRlZmF1bHRzYCwgYGRlZmVyYCwgYGRlbGF5YCwgYGRpZmZlcmVuY2VgLCBgZmlsdGVyYCwgYGZsYXR0ZW5gLFxuICAgICAqIGBmb3JFYWNoYCwgYGZvckVhY2hSaWdodGAsIGBmb3JJbmAsIGBmb3JJblJpZ2h0YCwgYGZvck93bmAsIGBmb3JPd25SaWdodGAsXG4gICAgICogYGZ1bmN0aW9uc2AsIGBncm91cEJ5YCwgYGluZGV4QnlgLCBgaW5pdGlhbGAsIGBpbnRlcnNlY3Rpb25gLCBgaW52ZXJ0YCxcbiAgICAgKiBgaW52b2tlYCwgYGtleXNgLCBgbWFwYCwgYG1heGAsIGBtZW1vaXplYCwgYG1lcmdlYCwgYG1pbmAsIGBvYmplY3RgLCBgb21pdGAsXG4gICAgICogYG9uY2VgLCBgcGFpcnNgLCBgcGFydGlhbGAsIGBwYXJ0aWFsUmlnaHRgLCBgcGlja2AsIGBwbHVja2AsIGBwdWxsYCwgYHB1c2hgLFxuICAgICAqIGByYW5nZWAsIGByZWplY3RgLCBgcmVtb3ZlYCwgYHJlc3RgLCBgcmV2ZXJzZWAsIGBzaHVmZmxlYCwgYHNsaWNlYCwgYHNvcnRgLFxuICAgICAqIGBzb3J0QnlgLCBgc3BsaWNlYCwgYHRhcGAsIGB0aHJvdHRsZWAsIGB0aW1lc2AsIGB0b0FycmF5YCwgYHRyYW5zZm9ybWAsXG4gICAgICogYHVuaW9uYCwgYHVuaXFgLCBgdW5zaGlmdGAsIGB1bnppcGAsIGB2YWx1ZXNgLCBgd2hlcmVgLCBgd2l0aG91dGAsIGB3cmFwYCxcbiAgICAgKiBhbmQgYHppcGBcbiAgICAgKlxuICAgICAqIFRoZSBub24tY2hhaW5hYmxlIHdyYXBwZXIgZnVuY3Rpb25zIGFyZTpcbiAgICAgKiBgY2xvbmVgLCBgY2xvbmVEZWVwYCwgYGNvbnRhaW5zYCwgYGVzY2FwZWAsIGBldmVyeWAsIGBmaW5kYCwgYGZpbmRJbmRleGAsXG4gICAgICogYGZpbmRLZXlgLCBgZmluZExhc3RgLCBgZmluZExhc3RJbmRleGAsIGBmaW5kTGFzdEtleWAsIGBoYXNgLCBgaWRlbnRpdHlgLFxuICAgICAqIGBpbmRleE9mYCwgYGlzQXJndW1lbnRzYCwgYGlzQXJyYXlgLCBgaXNCb29sZWFuYCwgYGlzRGF0ZWAsIGBpc0VsZW1lbnRgLFxuICAgICAqIGBpc0VtcHR5YCwgYGlzRXF1YWxgLCBgaXNGaW5pdGVgLCBgaXNGdW5jdGlvbmAsIGBpc05hTmAsIGBpc051bGxgLCBgaXNOdW1iZXJgLFxuICAgICAqIGBpc09iamVjdGAsIGBpc1BsYWluT2JqZWN0YCwgYGlzUmVnRXhwYCwgYGlzU3RyaW5nYCwgYGlzVW5kZWZpbmVkYCwgYGpvaW5gLFxuICAgICAqIGBsYXN0SW5kZXhPZmAsIGBtaXhpbmAsIGBub0NvbmZsaWN0YCwgYHBhcnNlSW50YCwgYHBvcGAsIGByYW5kb21gLCBgcmVkdWNlYCxcbiAgICAgKiBgcmVkdWNlUmlnaHRgLCBgcmVzdWx0YCwgYHNoaWZ0YCwgYHNpemVgLCBgc29tZWAsIGBzb3J0ZWRJbmRleGAsIGBydW5JbkNvbnRleHRgLFxuICAgICAqIGB0ZW1wbGF0ZWAsIGB1bmVzY2FwZWAsIGB1bmlxdWVJZGAsIGFuZCBgdmFsdWVgXG4gICAgICpcbiAgICAgKiBUaGUgd3JhcHBlciBmdW5jdGlvbnMgYGZpcnN0YCBhbmQgYGxhc3RgIHJldHVybiB3cmFwcGVkIHZhbHVlcyB3aGVuIGBuYCBpc1xuICAgICAqIHByb3ZpZGVkLCBvdGhlcndpc2UgdGhleSByZXR1cm4gdW53cmFwcGVkIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEV4cGxpY2l0IGNoYWluaW5nIGNhbiBiZSBlbmFibGVkIGJ5IHVzaW5nIHRoZSBgXy5jaGFpbmAgbWV0aG9kLlxuICAgICAqXG4gICAgICogQG5hbWUgX1xuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBjYXRlZ29yeSBDaGFpbmluZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHdyYXAgaW4gYSBgbG9kYXNoYCBpbnN0YW5jZS5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGEgYGxvZGFzaGAgaW5zdGFuY2UuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB3cmFwcGVkID0gXyhbMSwgMiwgM10pO1xuICAgICAqXG4gICAgICogLy8gcmV0dXJucyBhbiB1bndyYXBwZWQgdmFsdWVcbiAgICAgKiB3cmFwcGVkLnJlZHVjZShmdW5jdGlvbihzdW0sIG51bSkge1xuICAgICAqICAgcmV0dXJuIHN1bSArIG51bTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiA2XG4gICAgICpcbiAgICAgKiAvLyByZXR1cm5zIGEgd3JhcHBlZCB2YWx1ZVxuICAgICAqIHZhciBzcXVhcmVzID0gd3JhcHBlZC5tYXAoZnVuY3Rpb24obnVtKSB7XG4gICAgICogICByZXR1cm4gbnVtICogbnVtO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogXy5pc0FycmF5KHNxdWFyZXMpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLmlzQXJyYXkoc3F1YXJlcy52YWx1ZSgpKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gbG9kYXNoKHZhbHVlKSB7XG4gICAgICAvLyBkb24ndCB3cmFwIGlmIGFscmVhZHkgd3JhcHBlZCwgZXZlbiBpZiB3cmFwcGVkIGJ5IGEgZGlmZmVyZW50IGBsb2Rhc2hgIGNvbnN0cnVjdG9yXG4gICAgICByZXR1cm4gKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JyAmJiAhaXNBcnJheSh2YWx1ZSkgJiYgaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgJ19fd3JhcHBlZF9fJykpXG4gICAgICAgPyB2YWx1ZVxuICAgICAgIDogbmV3IGxvZGFzaFdyYXBwZXIodmFsdWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgZmFzdCBwYXRoIGZvciBjcmVhdGluZyBgbG9kYXNoYCB3cmFwcGVyIG9iamVjdHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHdyYXAgaW4gYSBgbG9kYXNoYCBpbnN0YW5jZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNoYWluQWxsIEEgZmxhZyB0byBlbmFibGUgY2hhaW5pbmcgZm9yIGFsbCBtZXRob2RzXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBhIGBsb2Rhc2hgIGluc3RhbmNlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGxvZGFzaFdyYXBwZXIodmFsdWUsIGNoYWluQWxsKSB7XG4gICAgICB0aGlzLl9fY2hhaW5fXyA9ICEhY2hhaW5BbGw7XG4gICAgICB0aGlzLl9fd3JhcHBlZF9fID0gdmFsdWU7XG4gICAgfVxuICAgIC8vIGVuc3VyZSBgbmV3IGxvZGFzaFdyYXBwZXJgIGlzIGFuIGluc3RhbmNlIG9mIGBsb2Rhc2hgXG4gICAgbG9kYXNoV3JhcHBlci5wcm90b3R5cGUgPSBsb2Rhc2gucHJvdG90eXBlO1xuXG4gICAgLyoqXG4gICAgICogQW4gb2JqZWN0IHVzZWQgdG8gZmxhZyBlbnZpcm9ubWVudHMgZmVhdHVyZXMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAdHlwZSBPYmplY3RcbiAgICAgKi9cbiAgICB2YXIgc3VwcG9ydCA9IGxvZGFzaC5zdXBwb3J0ID0ge307XG5cbiAgICAvKipcbiAgICAgKiBEZXRlY3QgaWYgZnVuY3Rpb25zIGNhbiBiZSBkZWNvbXBpbGVkIGJ5IGBGdW5jdGlvbiN0b1N0cmluZ2BcbiAgICAgKiAoYWxsIGJ1dCBQUzMgYW5kIG9sZGVyIE9wZXJhIG1vYmlsZSBicm93c2VycyAmIGF2b2lkZWQgaW4gV2luZG93cyA4IGFwcHMpLlxuICAgICAqXG4gICAgICogQG1lbWJlck9mIF8uc3VwcG9ydFxuICAgICAqIEB0eXBlIGJvb2xlYW5cbiAgICAgKi9cbiAgICBzdXBwb3J0LmZ1bmNEZWNvbXAgPSAhaXNOYXRpdmUoY29udGV4dC5XaW5SVEVycm9yKSAmJiByZVRoaXMudGVzdChydW5JbkNvbnRleHQpO1xuXG4gICAgLyoqXG4gICAgICogRGV0ZWN0IGlmIGBGdW5jdGlvbiNuYW1lYCBpcyBzdXBwb3J0ZWQgKGFsbCBidXQgSUUpLlxuICAgICAqXG4gICAgICogQG1lbWJlck9mIF8uc3VwcG9ydFxuICAgICAqIEB0eXBlIGJvb2xlYW5cbiAgICAgKi9cbiAgICBzdXBwb3J0LmZ1bmNOYW1lcyA9IHR5cGVvZiBGdW5jdGlvbi5uYW1lID09ICdzdHJpbmcnO1xuXG4gICAgLyoqXG4gICAgICogQnkgZGVmYXVsdCwgdGhlIHRlbXBsYXRlIGRlbGltaXRlcnMgdXNlZCBieSBMby1EYXNoIGFyZSBzaW1pbGFyIHRvIHRob3NlIGluXG4gICAgICogZW1iZWRkZWQgUnVieSAoRVJCKS4gQ2hhbmdlIHRoZSBmb2xsb3dpbmcgdGVtcGxhdGUgc2V0dGluZ3MgdG8gdXNlIGFsdGVybmF0aXZlXG4gICAgICogZGVsaW1pdGVycy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEB0eXBlIE9iamVjdFxuICAgICAqL1xuICAgIGxvZGFzaC50ZW1wbGF0ZVNldHRpbmdzID0ge1xuXG4gICAgICAvKipcbiAgICAgICAqIFVzZWQgdG8gZGV0ZWN0IGBkYXRhYCBwcm9wZXJ0eSB2YWx1ZXMgdG8gYmUgSFRNTC1lc2NhcGVkLlxuICAgICAgICpcbiAgICAgICAqIEBtZW1iZXJPZiBfLnRlbXBsYXRlU2V0dGluZ3NcbiAgICAgICAqIEB0eXBlIFJlZ0V4cFxuICAgICAgICovXG4gICAgICAnZXNjYXBlJzogLzwlLShbXFxzXFxTXSs/KSU+L2csXG5cbiAgICAgIC8qKlxuICAgICAgICogVXNlZCB0byBkZXRlY3QgY29kZSB0byBiZSBldmFsdWF0ZWQuXG4gICAgICAgKlxuICAgICAgICogQG1lbWJlck9mIF8udGVtcGxhdGVTZXR0aW5nc1xuICAgICAgICogQHR5cGUgUmVnRXhwXG4gICAgICAgKi9cbiAgICAgICdldmFsdWF0ZSc6IC88JShbXFxzXFxTXSs/KSU+L2csXG5cbiAgICAgIC8qKlxuICAgICAgICogVXNlZCB0byBkZXRlY3QgYGRhdGFgIHByb3BlcnR5IHZhbHVlcyB0byBpbmplY3QuXG4gICAgICAgKlxuICAgICAgICogQG1lbWJlck9mIF8udGVtcGxhdGVTZXR0aW5nc1xuICAgICAgICogQHR5cGUgUmVnRXhwXG4gICAgICAgKi9cbiAgICAgICdpbnRlcnBvbGF0ZSc6IHJlSW50ZXJwb2xhdGUsXG5cbiAgICAgIC8qKlxuICAgICAgICogVXNlZCB0byByZWZlcmVuY2UgdGhlIGRhdGEgb2JqZWN0IGluIHRoZSB0ZW1wbGF0ZSB0ZXh0LlxuICAgICAgICpcbiAgICAgICAqIEBtZW1iZXJPZiBfLnRlbXBsYXRlU2V0dGluZ3NcbiAgICAgICAqIEB0eXBlIHN0cmluZ1xuICAgICAgICovXG4gICAgICAndmFyaWFibGUnOiAnJyxcblxuICAgICAgLyoqXG4gICAgICAgKiBVc2VkIHRvIGltcG9ydCB2YXJpYWJsZXMgaW50byB0aGUgY29tcGlsZWQgdGVtcGxhdGUuXG4gICAgICAgKlxuICAgICAgICogQG1lbWJlck9mIF8udGVtcGxhdGVTZXR0aW5nc1xuICAgICAgICogQHR5cGUgT2JqZWN0XG4gICAgICAgKi9cbiAgICAgICdpbXBvcnRzJzoge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHJlZmVyZW5jZSB0byB0aGUgYGxvZGFzaGAgZnVuY3Rpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXJPZiBfLnRlbXBsYXRlU2V0dGluZ3MuaW1wb3J0c1xuICAgICAgICAgKiBAdHlwZSBGdW5jdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgJ18nOiBsb2Rhc2hcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5iaW5kYCB0aGF0IGNyZWF0ZXMgdGhlIGJvdW5kIGZ1bmN0aW9uIGFuZFxuICAgICAqIHNldHMgaXRzIG1ldGEgZGF0YS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYmluZERhdGEgVGhlIGJpbmQgZGF0YSBhcnJheS5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBib3VuZCBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlQmluZChiaW5kRGF0YSkge1xuICAgICAgdmFyIGZ1bmMgPSBiaW5kRGF0YVswXSxcbiAgICAgICAgICBwYXJ0aWFsQXJncyA9IGJpbmREYXRhWzJdLFxuICAgICAgICAgIHRoaXNBcmcgPSBiaW5kRGF0YVs0XTtcblxuICAgICAgZnVuY3Rpb24gYm91bmQoKSB7XG4gICAgICAgIC8vIGBGdW5jdGlvbiNiaW5kYCBzcGVjXG4gICAgICAgIC8vIGh0dHA6Ly9lczUuZ2l0aHViLmlvLyN4MTUuMy40LjVcbiAgICAgICAgaWYgKHBhcnRpYWxBcmdzKSB7XG4gICAgICAgICAgLy8gYXZvaWQgYGFyZ3VtZW50c2Agb2JqZWN0IGRlb3B0aW1pemF0aW9ucyBieSB1c2luZyBgc2xpY2VgIGluc3RlYWRcbiAgICAgICAgICAvLyBvZiBgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGxgIGFuZCBub3QgYXNzaWduaW5nIGBhcmd1bWVudHNgIHRvIGFcbiAgICAgICAgICAvLyB2YXJpYWJsZSBhcyBhIHRlcm5hcnkgZXhwcmVzc2lvblxuICAgICAgICAgIHZhciBhcmdzID0gc2xpY2UocGFydGlhbEFyZ3MpO1xuICAgICAgICAgIHB1c2guYXBwbHkoYXJncywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBtaW1pYyB0aGUgY29uc3RydWN0b3IncyBgcmV0dXJuYCBiZWhhdmlvclxuICAgICAgICAvLyBodHRwOi8vZXM1LmdpdGh1Yi5pby8jeDEzLjIuMlxuICAgICAgICBpZiAodGhpcyBpbnN0YW5jZW9mIGJvdW5kKSB7XG4gICAgICAgICAgLy8gZW5zdXJlIGBuZXcgYm91bmRgIGlzIGFuIGluc3RhbmNlIG9mIGBmdW5jYFxuICAgICAgICAgIHZhciB0aGlzQmluZGluZyA9IGJhc2VDcmVhdGUoZnVuYy5wcm90b3R5cGUpLFxuICAgICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNCaW5kaW5nLCBhcmdzIHx8IGFyZ3VtZW50cyk7XG4gICAgICAgICAgcmV0dXJuIGlzT2JqZWN0KHJlc3VsdCkgPyByZXN1bHQgOiB0aGlzQmluZGluZztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzIHx8IGFyZ3VtZW50cyk7XG4gICAgICB9XG4gICAgICBzZXRCaW5kRGF0YShib3VuZCwgYmluZERhdGEpO1xuICAgICAgcmV0dXJuIGJvdW5kO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmNsb25lYCB3aXRob3V0IGFyZ3VtZW50IGp1Z2dsaW5nIG9yIHN1cHBvcnRcbiAgICAgKiBmb3IgYHRoaXNBcmdgIGJpbmRpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNsb25lLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzRGVlcD1mYWxzZV0gU3BlY2lmeSBhIGRlZXAgY2xvbmUuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNsb25pbmcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0E9W11dIFRyYWNrcyB0cmF2ZXJzZWQgc291cmNlIG9iamVjdHMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQj1bXV0gQXNzb2NpYXRlcyBjbG9uZXMgd2l0aCBzb3VyY2UgY291bnRlcnBhcnRzLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBjbG9uZWQgdmFsdWUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUNsb25lKHZhbHVlLCBpc0RlZXAsIGNhbGxiYWNrLCBzdGFja0EsIHN0YWNrQikge1xuICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBjYWxsYmFjayh2YWx1ZSk7XG4gICAgICAgIGlmICh0eXBlb2YgcmVzdWx0ICE9ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gaW5zcGVjdCBbW0NsYXNzXV1cbiAgICAgIHZhciBpc09iaiA9IGlzT2JqZWN0KHZhbHVlKTtcbiAgICAgIGlmIChpc09iaikge1xuICAgICAgICB2YXIgY2xhc3NOYW1lID0gdG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG4gICAgICAgIGlmICghY2xvbmVhYmxlQ2xhc3Nlc1tjbGFzc05hbWVdKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjdG9yID0gY3RvckJ5Q2xhc3NbY2xhc3NOYW1lXTtcbiAgICAgICAgc3dpdGNoIChjbGFzc05hbWUpIHtcbiAgICAgICAgICBjYXNlIGJvb2xDbGFzczpcbiAgICAgICAgICBjYXNlIGRhdGVDbGFzczpcbiAgICAgICAgICAgIHJldHVybiBuZXcgY3RvcigrdmFsdWUpO1xuXG4gICAgICAgICAgY2FzZSBudW1iZXJDbGFzczpcbiAgICAgICAgICBjYXNlIHN0cmluZ0NsYXNzOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBjdG9yKHZhbHVlKTtcblxuICAgICAgICAgIGNhc2UgcmVnZXhwQ2xhc3M6XG4gICAgICAgICAgICByZXN1bHQgPSBjdG9yKHZhbHVlLnNvdXJjZSwgcmVGbGFncy5leGVjKHZhbHVlKSk7XG4gICAgICAgICAgICByZXN1bHQubGFzdEluZGV4ID0gdmFsdWUubGFzdEluZGV4O1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgICAgdmFyIGlzQXJyID0gaXNBcnJheSh2YWx1ZSk7XG4gICAgICBpZiAoaXNEZWVwKSB7XG4gICAgICAgIC8vIGNoZWNrIGZvciBjaXJjdWxhciByZWZlcmVuY2VzIGFuZCByZXR1cm4gY29ycmVzcG9uZGluZyBjbG9uZVxuICAgICAgICB2YXIgaW5pdGVkU3RhY2sgPSAhc3RhY2tBO1xuICAgICAgICBzdGFja0EgfHwgKHN0YWNrQSA9IGdldEFycmF5KCkpO1xuICAgICAgICBzdGFja0IgfHwgKHN0YWNrQiA9IGdldEFycmF5KCkpO1xuXG4gICAgICAgIHZhciBsZW5ndGggPSBzdGFja0EubGVuZ3RoO1xuICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgICBpZiAoc3RhY2tBW2xlbmd0aF0gPT0gdmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBzdGFja0JbbGVuZ3RoXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0ID0gaXNBcnIgPyBjdG9yKHZhbHVlLmxlbmd0aCkgOiB7fTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICByZXN1bHQgPSBpc0FyciA/IHNsaWNlKHZhbHVlKSA6IGFzc2lnbih7fSwgdmFsdWUpO1xuICAgICAgfVxuICAgICAgLy8gYWRkIGFycmF5IHByb3BlcnRpZXMgYXNzaWduZWQgYnkgYFJlZ0V4cCNleGVjYFxuICAgICAgaWYgKGlzQXJyKSB7XG4gICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCAnaW5kZXgnKSkge1xuICAgICAgICAgIHJlc3VsdC5pbmRleCA9IHZhbHVlLmluZGV4O1xuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCAnaW5wdXQnKSkge1xuICAgICAgICAgIHJlc3VsdC5pbnB1dCA9IHZhbHVlLmlucHV0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBleGl0IGZvciBzaGFsbG93IGNsb25lXG4gICAgICBpZiAoIWlzRGVlcCkge1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgICAgLy8gYWRkIHRoZSBzb3VyY2UgdmFsdWUgdG8gdGhlIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzXG4gICAgICAvLyBhbmQgYXNzb2NpYXRlIGl0IHdpdGggaXRzIGNsb25lXG4gICAgICBzdGFja0EucHVzaCh2YWx1ZSk7XG4gICAgICBzdGFja0IucHVzaChyZXN1bHQpO1xuXG4gICAgICAvLyByZWN1cnNpdmVseSBwb3B1bGF0ZSBjbG9uZSAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpXG4gICAgICAoaXNBcnIgPyBmb3JFYWNoIDogZm9yT3duKSh2YWx1ZSwgZnVuY3Rpb24ob2JqVmFsdWUsIGtleSkge1xuICAgICAgICByZXN1bHRba2V5XSA9IGJhc2VDbG9uZShvYmpWYWx1ZSwgaXNEZWVwLCBjYWxsYmFjaywgc3RhY2tBLCBzdGFja0IpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChpbml0ZWRTdGFjaykge1xuICAgICAgICByZWxlYXNlQXJyYXkoc3RhY2tBKTtcbiAgICAgICAgcmVsZWFzZUFycmF5KHN0YWNrQik7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmNyZWF0ZWAgd2l0aG91dCBzdXBwb3J0IGZvciBhc3NpZ25pbmdcbiAgICAgKiBwcm9wZXJ0aWVzIHRvIHRoZSBjcmVhdGVkIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb3RvdHlwZSBUaGUgb2JqZWN0IHRvIGluaGVyaXQgZnJvbS5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgb2JqZWN0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VDcmVhdGUocHJvdG90eXBlLCBwcm9wZXJ0aWVzKSB7XG4gICAgICByZXR1cm4gaXNPYmplY3QocHJvdG90eXBlKSA/IG5hdGl2ZUNyZWF0ZShwcm90b3R5cGUpIDoge307XG4gICAgfVxuICAgIC8vIGZhbGxiYWNrIGZvciBicm93c2VycyB3aXRob3V0IGBPYmplY3QuY3JlYXRlYFxuICAgIGlmICghbmF0aXZlQ3JlYXRlKSB7XG4gICAgICBiYXNlQ3JlYXRlID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICBmdW5jdGlvbiBPYmplY3QoKSB7fVxuICAgICAgICByZXR1cm4gZnVuY3Rpb24ocHJvdG90eXBlKSB7XG4gICAgICAgICAgaWYgKGlzT2JqZWN0KHByb3RvdHlwZSkpIHtcbiAgICAgICAgICAgIE9iamVjdC5wcm90b3R5cGUgPSBwcm90b3R5cGU7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IE9iamVjdDtcbiAgICAgICAgICAgIE9iamVjdC5wcm90b3R5cGUgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcmVzdWx0IHx8IGNvbnRleHQuT2JqZWN0KCk7XG4gICAgICAgIH07XG4gICAgICB9KCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmNyZWF0ZUNhbGxiYWNrYCB3aXRob3V0IHN1cHBvcnQgZm9yIGNyZWF0aW5nXG4gICAgICogXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IFtmdW5jPWlkZW50aXR5XSBUaGUgdmFsdWUgdG8gY29udmVydCB0byBhIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiB0aGUgY3JlYXRlZCBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2FyZ0NvdW50XSBUaGUgbnVtYmVyIG9mIGFyZ3VtZW50cyB0aGUgY2FsbGJhY2sgYWNjZXB0cy5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgYSBjYWxsYmFjayBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlQ3JlYXRlQ2FsbGJhY2soZnVuYywgdGhpc0FyZywgYXJnQ291bnQpIHtcbiAgICAgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBpZGVudGl0eTtcbiAgICAgIH1cbiAgICAgIC8vIGV4aXQgZWFybHkgZm9yIG5vIGB0aGlzQXJnYCBvciBhbHJlYWR5IGJvdW5kIGJ5IGBGdW5jdGlvbiNiaW5kYFxuICAgICAgaWYgKHR5cGVvZiB0aGlzQXJnID09ICd1bmRlZmluZWQnIHx8ICEoJ3Byb3RvdHlwZScgaW4gZnVuYykpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmM7XG4gICAgICB9XG4gICAgICB2YXIgYmluZERhdGEgPSBmdW5jLl9fYmluZERhdGFfXztcbiAgICAgIGlmICh0eXBlb2YgYmluZERhdGEgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHN1cHBvcnQuZnVuY05hbWVzKSB7XG4gICAgICAgICAgYmluZERhdGEgPSAhZnVuYy5uYW1lO1xuICAgICAgICB9XG4gICAgICAgIGJpbmREYXRhID0gYmluZERhdGEgfHwgIXN1cHBvcnQuZnVuY0RlY29tcDtcbiAgICAgICAgaWYgKCFiaW5kRGF0YSkge1xuICAgICAgICAgIHZhciBzb3VyY2UgPSBmblRvU3RyaW5nLmNhbGwoZnVuYyk7XG4gICAgICAgICAgaWYgKCFzdXBwb3J0LmZ1bmNOYW1lcykge1xuICAgICAgICAgICAgYmluZERhdGEgPSAhcmVGdW5jTmFtZS50ZXN0KHNvdXJjZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghYmluZERhdGEpIHtcbiAgICAgICAgICAgIC8vIGNoZWNrcyBpZiBgZnVuY2AgcmVmZXJlbmNlcyB0aGUgYHRoaXNgIGtleXdvcmQgYW5kIHN0b3JlcyB0aGUgcmVzdWx0XG4gICAgICAgICAgICBiaW5kRGF0YSA9IHJlVGhpcy50ZXN0KHNvdXJjZSk7XG4gICAgICAgICAgICBzZXRCaW5kRGF0YShmdW5jLCBiaW5kRGF0YSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBleGl0IGVhcmx5IGlmIHRoZXJlIGFyZSBubyBgdGhpc2AgcmVmZXJlbmNlcyBvciBgZnVuY2AgaXMgYm91bmRcbiAgICAgIGlmIChiaW5kRGF0YSA9PT0gZmFsc2UgfHwgKGJpbmREYXRhICE9PSB0cnVlICYmIGJpbmREYXRhWzFdICYgMSkpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmM7XG4gICAgICB9XG4gICAgICBzd2l0Y2ggKGFyZ0NvdW50KSB7XG4gICAgICAgIGNhc2UgMTogcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCB2YWx1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIGNhc2UgMjogcmV0dXJuIGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgICByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIGEsIGIpO1xuICAgICAgICB9O1xuICAgICAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgICByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgICAgIH07XG4gICAgICAgIGNhc2UgNDogcmV0dXJuIGZ1bmN0aW9uKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgICByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJpbmQoZnVuYywgdGhpc0FyZyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYGNyZWF0ZVdyYXBwZXJgIHRoYXQgY3JlYXRlcyB0aGUgd3JhcHBlciBhbmRcbiAgICAgKiBzZXRzIGl0cyBtZXRhIGRhdGEuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGJpbmREYXRhIFRoZSBiaW5kIGRhdGEgYXJyYXkuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUNyZWF0ZVdyYXBwZXIoYmluZERhdGEpIHtcbiAgICAgIHZhciBmdW5jID0gYmluZERhdGFbMF0sXG4gICAgICAgICAgYml0bWFzayA9IGJpbmREYXRhWzFdLFxuICAgICAgICAgIHBhcnRpYWxBcmdzID0gYmluZERhdGFbMl0sXG4gICAgICAgICAgcGFydGlhbFJpZ2h0QXJncyA9IGJpbmREYXRhWzNdLFxuICAgICAgICAgIHRoaXNBcmcgPSBiaW5kRGF0YVs0XSxcbiAgICAgICAgICBhcml0eSA9IGJpbmREYXRhWzVdO1xuXG4gICAgICB2YXIgaXNCaW5kID0gYml0bWFzayAmIDEsXG4gICAgICAgICAgaXNCaW5kS2V5ID0gYml0bWFzayAmIDIsXG4gICAgICAgICAgaXNDdXJyeSA9IGJpdG1hc2sgJiA0LFxuICAgICAgICAgIGlzQ3VycnlCb3VuZCA9IGJpdG1hc2sgJiA4LFxuICAgICAgICAgIGtleSA9IGZ1bmM7XG5cbiAgICAgIGZ1bmN0aW9uIGJvdW5kKCkge1xuICAgICAgICB2YXIgdGhpc0JpbmRpbmcgPSBpc0JpbmQgPyB0aGlzQXJnIDogdGhpcztcbiAgICAgICAgaWYgKHBhcnRpYWxBcmdzKSB7XG4gICAgICAgICAgdmFyIGFyZ3MgPSBzbGljZShwYXJ0aWFsQXJncyk7XG4gICAgICAgICAgcHVzaC5hcHBseShhcmdzLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJ0aWFsUmlnaHRBcmdzIHx8IGlzQ3VycnkpIHtcbiAgICAgICAgICBhcmdzIHx8IChhcmdzID0gc2xpY2UoYXJndW1lbnRzKSk7XG4gICAgICAgICAgaWYgKHBhcnRpYWxSaWdodEFyZ3MpIHtcbiAgICAgICAgICAgIHB1c2guYXBwbHkoYXJncywgcGFydGlhbFJpZ2h0QXJncyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpc0N1cnJ5ICYmIGFyZ3MubGVuZ3RoIDwgYXJpdHkpIHtcbiAgICAgICAgICAgIGJpdG1hc2sgfD0gMTYgJiB+MzI7XG4gICAgICAgICAgICByZXR1cm4gYmFzZUNyZWF0ZVdyYXBwZXIoW2Z1bmMsIChpc0N1cnJ5Qm91bmQgPyBiaXRtYXNrIDogYml0bWFzayAmIH4zKSwgYXJncywgbnVsbCwgdGhpc0FyZywgYXJpdHldKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYXJncyB8fCAoYXJncyA9IGFyZ3VtZW50cyk7XG4gICAgICAgIGlmIChpc0JpbmRLZXkpIHtcbiAgICAgICAgICBmdW5jID0gdGhpc0JpbmRpbmdba2V5XTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcyBpbnN0YW5jZW9mIGJvdW5kKSB7XG4gICAgICAgICAgdGhpc0JpbmRpbmcgPSBiYXNlQ3JlYXRlKGZ1bmMucHJvdG90eXBlKTtcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQmluZGluZywgYXJncyk7XG4gICAgICAgICAgcmV0dXJuIGlzT2JqZWN0KHJlc3VsdCkgPyByZXN1bHQgOiB0aGlzQmluZGluZztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnVuYy5hcHBseSh0aGlzQmluZGluZywgYXJncyk7XG4gICAgICB9XG4gICAgICBzZXRCaW5kRGF0YShib3VuZCwgYmluZERhdGEpO1xuICAgICAgcmV0dXJuIGJvdW5kO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmRpZmZlcmVuY2VgIHRoYXQgYWNjZXB0cyBhIHNpbmdsZSBhcnJheVxuICAgICAqIG9mIHZhbHVlcyB0byBleGNsdWRlLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcHJvY2Vzcy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbdmFsdWVzXSBUaGUgYXJyYXkgb2YgdmFsdWVzIHRvIGV4Y2x1ZGUuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIGZpbHRlcmVkIHZhbHVlcy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlRGlmZmVyZW5jZShhcnJheSwgdmFsdWVzKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBpbmRleE9mID0gZ2V0SW5kZXhPZigpLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMCxcbiAgICAgICAgICBpc0xhcmdlID0gbGVuZ3RoID49IGxhcmdlQXJyYXlTaXplICYmIGluZGV4T2YgPT09IGJhc2VJbmRleE9mLFxuICAgICAgICAgIHJlc3VsdCA9IFtdO1xuXG4gICAgICBpZiAoaXNMYXJnZSkge1xuICAgICAgICB2YXIgY2FjaGUgPSBjcmVhdGVDYWNoZSh2YWx1ZXMpO1xuICAgICAgICBpZiAoY2FjaGUpIHtcbiAgICAgICAgICBpbmRleE9mID0gY2FjaGVJbmRleE9mO1xuICAgICAgICAgIHZhbHVlcyA9IGNhY2hlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlzTGFyZ2UgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaW5kZXhdO1xuICAgICAgICBpZiAoaW5kZXhPZih2YWx1ZXMsIHZhbHVlKSA8IDApIHtcbiAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChpc0xhcmdlKSB7XG4gICAgICAgIHJlbGVhc2VPYmplY3QodmFsdWVzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZmxhdHRlbmAgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFja1xuICAgICAqIHNob3J0aGFuZHMgb3IgYHRoaXNBcmdgIGJpbmRpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBmbGF0dGVuLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzU2hhbGxvdz1mYWxzZV0gQSBmbGFnIHRvIHJlc3RyaWN0IGZsYXR0ZW5pbmcgdG8gYSBzaW5nbGUgbGV2ZWwuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaXNTdHJpY3Q9ZmFsc2VdIEEgZmxhZyB0byByZXN0cmljdCBmbGF0dGVuaW5nIHRvIGFycmF5cyBhbmQgYGFyZ3VtZW50c2Agb2JqZWN0cy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2Zyb21JbmRleD0wXSBUaGUgaW5kZXggdG8gc3RhcnQgZnJvbS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgZmxhdHRlbmVkIGFycmF5LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VGbGF0dGVuKGFycmF5LCBpc1NoYWxsb3csIGlzU3RyaWN0LCBmcm9tSW5kZXgpIHtcbiAgICAgIHZhciBpbmRleCA9IChmcm9tSW5kZXggfHwgMCkgLSAxLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMCxcbiAgICAgICAgICByZXN1bHQgPSBbXTtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaW5kZXhdO1xuXG4gICAgICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcgJiYgdHlwZW9mIHZhbHVlLmxlbmd0aCA9PSAnbnVtYmVyJ1xuICAgICAgICAgICAgJiYgKGlzQXJyYXkodmFsdWUpIHx8IGlzQXJndW1lbnRzKHZhbHVlKSkpIHtcbiAgICAgICAgICAvLyByZWN1cnNpdmVseSBmbGF0dGVuIGFycmF5cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpXG4gICAgICAgICAgaWYgKCFpc1NoYWxsb3cpIHtcbiAgICAgICAgICAgIHZhbHVlID0gYmFzZUZsYXR0ZW4odmFsdWUsIGlzU2hhbGxvdywgaXNTdHJpY3QpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgdmFsSW5kZXggPSAtMSxcbiAgICAgICAgICAgICAgdmFsTGVuZ3RoID0gdmFsdWUubGVuZ3RoLFxuICAgICAgICAgICAgICByZXNJbmRleCA9IHJlc3VsdC5sZW5ndGg7XG5cbiAgICAgICAgICByZXN1bHQubGVuZ3RoICs9IHZhbExlbmd0aDtcbiAgICAgICAgICB3aGlsZSAoKyt2YWxJbmRleCA8IHZhbExlbmd0aCkge1xuICAgICAgICAgICAgcmVzdWx0W3Jlc0luZGV4KytdID0gdmFsdWVbdmFsSW5kZXhdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICghaXNTdHJpY3QpIHtcbiAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNFcXVhbGAsIHdpdGhvdXQgc3VwcG9ydCBmb3IgYHRoaXNBcmdgIGJpbmRpbmcsXG4gICAgICogdGhhdCBhbGxvd3MgcGFydGlhbCBcIl8ud2hlcmVcIiBzdHlsZSBjb21wYXJpc29ucy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSBhIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuICAgICAqIEBwYXJhbSB7Kn0gYiBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaW5nIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXNXaGVyZT1mYWxzZV0gQSBmbGFnIHRvIGluZGljYXRlIHBlcmZvcm1pbmcgcGFydGlhbCBjb21wYXJpc29ucy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tBPVtdXSBUcmFja3MgdHJhdmVyc2VkIGBhYCBvYmplY3RzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0I9W11dIFRyYWNrcyB0cmF2ZXJzZWQgYGJgIG9iamVjdHMuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlSXNFcXVhbChhLCBiLCBjYWxsYmFjaywgaXNXaGVyZSwgc3RhY2tBLCBzdGFja0IpIHtcbiAgICAgIC8vIHVzZWQgdG8gaW5kaWNhdGUgdGhhdCB3aGVuIGNvbXBhcmluZyBvYmplY3RzLCBgYWAgaGFzIGF0IGxlYXN0IHRoZSBwcm9wZXJ0aWVzIG9mIGBiYFxuICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBjYWxsYmFjayhhLCBiKTtcbiAgICAgICAgaWYgKHR5cGVvZiByZXN1bHQgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICByZXR1cm4gISFyZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIGV4aXQgZWFybHkgZm9yIGlkZW50aWNhbCB2YWx1ZXNcbiAgICAgIGlmIChhID09PSBiKSB7XG4gICAgICAgIC8vIHRyZWF0IGArMGAgdnMuIGAtMGAgYXMgbm90IGVxdWFsXG4gICAgICAgIHJldHVybiBhICE9PSAwIHx8ICgxIC8gYSA9PSAxIC8gYik7XG4gICAgICB9XG4gICAgICB2YXIgdHlwZSA9IHR5cGVvZiBhLFxuICAgICAgICAgIG90aGVyVHlwZSA9IHR5cGVvZiBiO1xuXG4gICAgICAvLyBleGl0IGVhcmx5IGZvciB1bmxpa2UgcHJpbWl0aXZlIHZhbHVlc1xuICAgICAgaWYgKGEgPT09IGEgJiZcbiAgICAgICAgICAhKGEgJiYgb2JqZWN0VHlwZXNbdHlwZV0pICYmXG4gICAgICAgICAgIShiICYmIG9iamVjdFR5cGVzW290aGVyVHlwZV0pKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIC8vIGV4aXQgZWFybHkgZm9yIGBudWxsYCBhbmQgYHVuZGVmaW5lZGAgYXZvaWRpbmcgRVMzJ3MgRnVuY3Rpb24jY2FsbCBiZWhhdmlvclxuICAgICAgLy8gaHR0cDovL2VzNS5naXRodWIuaW8vI3gxNS4zLjQuNFxuICAgICAgaWYgKGEgPT0gbnVsbCB8fCBiID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGEgPT09IGI7XG4gICAgICB9XG4gICAgICAvLyBjb21wYXJlIFtbQ2xhc3NdXSBuYW1lc1xuICAgICAgdmFyIGNsYXNzTmFtZSA9IHRvU3RyaW5nLmNhbGwoYSksXG4gICAgICAgICAgb3RoZXJDbGFzcyA9IHRvU3RyaW5nLmNhbGwoYik7XG5cbiAgICAgIGlmIChjbGFzc05hbWUgPT0gYXJnc0NsYXNzKSB7XG4gICAgICAgIGNsYXNzTmFtZSA9IG9iamVjdENsYXNzO1xuICAgICAgfVxuICAgICAgaWYgKG90aGVyQ2xhc3MgPT0gYXJnc0NsYXNzKSB7XG4gICAgICAgIG90aGVyQ2xhc3MgPSBvYmplY3RDbGFzcztcbiAgICAgIH1cbiAgICAgIGlmIChjbGFzc05hbWUgIT0gb3RoZXJDbGFzcykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBzd2l0Y2ggKGNsYXNzTmFtZSkge1xuICAgICAgICBjYXNlIGJvb2xDbGFzczpcbiAgICAgICAgY2FzZSBkYXRlQ2xhc3M6XG4gICAgICAgICAgLy8gY29lcmNlIGRhdGVzIGFuZCBib29sZWFucyB0byBudW1iZXJzLCBkYXRlcyB0byBtaWxsaXNlY29uZHMgYW5kIGJvb2xlYW5zXG4gICAgICAgICAgLy8gdG8gYDFgIG9yIGAwYCB0cmVhdGluZyBpbnZhbGlkIGRhdGVzIGNvZXJjZWQgdG8gYE5hTmAgYXMgbm90IGVxdWFsXG4gICAgICAgICAgcmV0dXJuICthID09ICtiO1xuXG4gICAgICAgIGNhc2UgbnVtYmVyQ2xhc3M6XG4gICAgICAgICAgLy8gdHJlYXQgYE5hTmAgdnMuIGBOYU5gIGFzIGVxdWFsXG4gICAgICAgICAgcmV0dXJuIChhICE9ICthKVxuICAgICAgICAgICAgPyBiICE9ICtiXG4gICAgICAgICAgICAvLyBidXQgdHJlYXQgYCswYCB2cy4gYC0wYCBhcyBub3QgZXF1YWxcbiAgICAgICAgICAgIDogKGEgPT0gMCA/ICgxIC8gYSA9PSAxIC8gYikgOiBhID09ICtiKTtcblxuICAgICAgICBjYXNlIHJlZ2V4cENsYXNzOlxuICAgICAgICBjYXNlIHN0cmluZ0NsYXNzOlxuICAgICAgICAgIC8vIGNvZXJjZSByZWdleGVzIHRvIHN0cmluZ3MgKGh0dHA6Ly9lczUuZ2l0aHViLmlvLyN4MTUuMTAuNi40KVxuICAgICAgICAgIC8vIHRyZWF0IHN0cmluZyBwcmltaXRpdmVzIGFuZCB0aGVpciBjb3JyZXNwb25kaW5nIG9iamVjdCBpbnN0YW5jZXMgYXMgZXF1YWxcbiAgICAgICAgICByZXR1cm4gYSA9PSBTdHJpbmcoYik7XG4gICAgICB9XG4gICAgICB2YXIgaXNBcnIgPSBjbGFzc05hbWUgPT0gYXJyYXlDbGFzcztcbiAgICAgIGlmICghaXNBcnIpIHtcbiAgICAgICAgLy8gdW53cmFwIGFueSBgbG9kYXNoYCB3cmFwcGVkIHZhbHVlc1xuICAgICAgICB2YXIgYVdyYXBwZWQgPSBoYXNPd25Qcm9wZXJ0eS5jYWxsKGEsICdfX3dyYXBwZWRfXycpLFxuICAgICAgICAgICAgYldyYXBwZWQgPSBoYXNPd25Qcm9wZXJ0eS5jYWxsKGIsICdfX3dyYXBwZWRfXycpO1xuXG4gICAgICAgIGlmIChhV3JhcHBlZCB8fCBiV3JhcHBlZCkge1xuICAgICAgICAgIHJldHVybiBiYXNlSXNFcXVhbChhV3JhcHBlZCA/IGEuX193cmFwcGVkX18gOiBhLCBiV3JhcHBlZCA/IGIuX193cmFwcGVkX18gOiBiLCBjYWxsYmFjaywgaXNXaGVyZSwgc3RhY2tBLCBzdGFja0IpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGV4aXQgZm9yIGZ1bmN0aW9ucyBhbmQgRE9NIG5vZGVzXG4gICAgICAgIGlmIChjbGFzc05hbWUgIT0gb2JqZWN0Q2xhc3MpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaW4gb2xkZXIgdmVyc2lvbnMgb2YgT3BlcmEsIGBhcmd1bWVudHNgIG9iamVjdHMgaGF2ZSBgQXJyYXlgIGNvbnN0cnVjdG9yc1xuICAgICAgICB2YXIgY3RvckEgPSBhLmNvbnN0cnVjdG9yLFxuICAgICAgICAgICAgY3RvckIgPSBiLmNvbnN0cnVjdG9yO1xuXG4gICAgICAgIC8vIG5vbiBgT2JqZWN0YCBvYmplY3QgaW5zdGFuY2VzIHdpdGggZGlmZmVyZW50IGNvbnN0cnVjdG9ycyBhcmUgbm90IGVxdWFsXG4gICAgICAgIGlmIChjdG9yQSAhPSBjdG9yQiAmJlxuICAgICAgICAgICAgICAhKGlzRnVuY3Rpb24oY3RvckEpICYmIGN0b3JBIGluc3RhbmNlb2YgY3RvckEgJiYgaXNGdW5jdGlvbihjdG9yQikgJiYgY3RvckIgaW5zdGFuY2VvZiBjdG9yQikgJiZcbiAgICAgICAgICAgICAgKCdjb25zdHJ1Y3RvcicgaW4gYSAmJiAnY29uc3RydWN0b3InIGluIGIpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIGFzc3VtZSBjeWNsaWMgc3RydWN0dXJlcyBhcmUgZXF1YWxcbiAgICAgIC8vIHRoZSBhbGdvcml0aG0gZm9yIGRldGVjdGluZyBjeWNsaWMgc3RydWN0dXJlcyBpcyBhZGFwdGVkIGZyb20gRVMgNS4xXG4gICAgICAvLyBzZWN0aW9uIDE1LjEyLjMsIGFic3RyYWN0IG9wZXJhdGlvbiBgSk9gIChodHRwOi8vZXM1LmdpdGh1Yi5pby8jeDE1LjEyLjMpXG4gICAgICB2YXIgaW5pdGVkU3RhY2sgPSAhc3RhY2tBO1xuICAgICAgc3RhY2tBIHx8IChzdGFja0EgPSBnZXRBcnJheSgpKTtcbiAgICAgIHN0YWNrQiB8fCAoc3RhY2tCID0gZ2V0QXJyYXkoKSk7XG5cbiAgICAgIHZhciBsZW5ndGggPSBzdGFja0EubGVuZ3RoO1xuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIGlmIChzdGFja0FbbGVuZ3RoXSA9PSBhKSB7XG4gICAgICAgICAgcmV0dXJuIHN0YWNrQltsZW5ndGhdID09IGI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHZhciBzaXplID0gMDtcbiAgICAgIHJlc3VsdCA9IHRydWU7XG5cbiAgICAgIC8vIGFkZCBgYWAgYW5kIGBiYCB0byB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHNcbiAgICAgIHN0YWNrQS5wdXNoKGEpO1xuICAgICAgc3RhY2tCLnB1c2goYik7XG5cbiAgICAgIC8vIHJlY3Vyc2l2ZWx5IGNvbXBhcmUgb2JqZWN0cyBhbmQgYXJyYXlzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cylcbiAgICAgIGlmIChpc0Fycikge1xuICAgICAgICAvLyBjb21wYXJlIGxlbmd0aHMgdG8gZGV0ZXJtaW5lIGlmIGEgZGVlcCBjb21wYXJpc29uIGlzIG5lY2Vzc2FyeVxuICAgICAgICBsZW5ndGggPSBhLmxlbmd0aDtcbiAgICAgICAgc2l6ZSA9IGIubGVuZ3RoO1xuICAgICAgICByZXN1bHQgPSBzaXplID09IGxlbmd0aDtcblxuICAgICAgICBpZiAocmVzdWx0IHx8IGlzV2hlcmUpIHtcbiAgICAgICAgICAvLyBkZWVwIGNvbXBhcmUgdGhlIGNvbnRlbnRzLCBpZ25vcmluZyBub24tbnVtZXJpYyBwcm9wZXJ0aWVzXG4gICAgICAgICAgd2hpbGUgKHNpemUtLSkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gbGVuZ3RoLFxuICAgICAgICAgICAgICAgIHZhbHVlID0gYltzaXplXTtcblxuICAgICAgICAgICAgaWYgKGlzV2hlcmUpIHtcbiAgICAgICAgICAgICAgd2hpbGUgKGluZGV4LS0pIHtcbiAgICAgICAgICAgICAgICBpZiAoKHJlc3VsdCA9IGJhc2VJc0VxdWFsKGFbaW5kZXhdLCB2YWx1ZSwgY2FsbGJhY2ssIGlzV2hlcmUsIHN0YWNrQSwgc3RhY2tCKSkpIHtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICghKHJlc3VsdCA9IGJhc2VJc0VxdWFsKGFbc2l6ZV0sIHZhbHVlLCBjYWxsYmFjaywgaXNXaGVyZSwgc3RhY2tBLCBzdGFja0IpKSkge1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICAvLyBkZWVwIGNvbXBhcmUgb2JqZWN0cyB1c2luZyBgZm9ySW5gLCBpbnN0ZWFkIG9mIGBmb3JPd25gLCB0byBhdm9pZCBgT2JqZWN0LmtleXNgXG4gICAgICAgIC8vIHdoaWNoLCBpbiB0aGlzIGNhc2UsIGlzIG1vcmUgY29zdGx5XG4gICAgICAgIGZvckluKGIsIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGIpIHtcbiAgICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChiLCBrZXkpKSB7XG4gICAgICAgICAgICAvLyBjb3VudCB0aGUgbnVtYmVyIG9mIHByb3BlcnRpZXMuXG4gICAgICAgICAgICBzaXplKys7XG4gICAgICAgICAgICAvLyBkZWVwIGNvbXBhcmUgZWFjaCBwcm9wZXJ0eSB2YWx1ZS5cbiAgICAgICAgICAgIHJldHVybiAocmVzdWx0ID0gaGFzT3duUHJvcGVydHkuY2FsbChhLCBrZXkpICYmIGJhc2VJc0VxdWFsKGFba2V5XSwgdmFsdWUsIGNhbGxiYWNrLCBpc1doZXJlLCBzdGFja0EsIHN0YWNrQikpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHJlc3VsdCAmJiAhaXNXaGVyZSkge1xuICAgICAgICAgIC8vIGVuc3VyZSBib3RoIG9iamVjdHMgaGF2ZSB0aGUgc2FtZSBudW1iZXIgb2YgcHJvcGVydGllc1xuICAgICAgICAgIGZvckluKGEsIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGEpIHtcbiAgICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGEsIGtleSkpIHtcbiAgICAgICAgICAgICAgLy8gYHNpemVgIHdpbGwgYmUgYC0xYCBpZiBgYWAgaGFzIG1vcmUgcHJvcGVydGllcyB0aGFuIGBiYFxuICAgICAgICAgICAgICByZXR1cm4gKHJlc3VsdCA9IC0tc2l6ZSA+IC0xKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc3RhY2tBLnBvcCgpO1xuICAgICAgc3RhY2tCLnBvcCgpO1xuXG4gICAgICBpZiAoaW5pdGVkU3RhY2spIHtcbiAgICAgICAgcmVsZWFzZUFycmF5KHN0YWNrQSk7XG4gICAgICAgIHJlbGVhc2VBcnJheShzdGFja0IpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5tZXJnZWAgd2l0aG91dCBhcmd1bWVudCBqdWdnbGluZyBvciBzdXBwb3J0XG4gICAgICogZm9yIGB0aGlzQXJnYCBiaW5kaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgc291cmNlIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgbWVyZ2luZyBwcm9wZXJ0aWVzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0E9W11dIFRyYWNrcyB0cmF2ZXJzZWQgc291cmNlIG9iamVjdHMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQj1bXV0gQXNzb2NpYXRlcyB2YWx1ZXMgd2l0aCBzb3VyY2UgY291bnRlcnBhcnRzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VNZXJnZShvYmplY3QsIHNvdXJjZSwgY2FsbGJhY2ssIHN0YWNrQSwgc3RhY2tCKSB7XG4gICAgICAoaXNBcnJheShzb3VyY2UpID8gZm9yRWFjaCA6IGZvck93bikoc291cmNlLCBmdW5jdGlvbihzb3VyY2UsIGtleSkge1xuICAgICAgICB2YXIgZm91bmQsXG4gICAgICAgICAgICBpc0FycixcbiAgICAgICAgICAgIHJlc3VsdCA9IHNvdXJjZSxcbiAgICAgICAgICAgIHZhbHVlID0gb2JqZWN0W2tleV07XG5cbiAgICAgICAgaWYgKHNvdXJjZSAmJiAoKGlzQXJyID0gaXNBcnJheShzb3VyY2UpKSB8fCBpc1BsYWluT2JqZWN0KHNvdXJjZSkpKSB7XG4gICAgICAgICAgLy8gYXZvaWQgbWVyZ2luZyBwcmV2aW91c2x5IG1lcmdlZCBjeWNsaWMgc291cmNlc1xuICAgICAgICAgIHZhciBzdGFja0xlbmd0aCA9IHN0YWNrQS5sZW5ndGg7XG4gICAgICAgICAgd2hpbGUgKHN0YWNrTGVuZ3RoLS0pIHtcbiAgICAgICAgICAgIGlmICgoZm91bmQgPSBzdGFja0Fbc3RhY2tMZW5ndGhdID09IHNvdXJjZSkpIHtcbiAgICAgICAgICAgICAgdmFsdWUgPSBzdGFja0Jbc3RhY2tMZW5ndGhdO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICAgICAgdmFyIGlzU2hhbGxvdztcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICByZXN1bHQgPSBjYWxsYmFjayh2YWx1ZSwgc291cmNlKTtcbiAgICAgICAgICAgICAgaWYgKChpc1NoYWxsb3cgPSB0eXBlb2YgcmVzdWx0ICE9ICd1bmRlZmluZWQnKSkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gcmVzdWx0O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWlzU2hhbGxvdykge1xuICAgICAgICAgICAgICB2YWx1ZSA9IGlzQXJyXG4gICAgICAgICAgICAgICAgPyAoaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFtdKVxuICAgICAgICAgICAgICAgIDogKGlzUGxhaW5PYmplY3QodmFsdWUpID8gdmFsdWUgOiB7fSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBhZGQgYHNvdXJjZWAgYW5kIGFzc29jaWF0ZWQgYHZhbHVlYCB0byB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHNcbiAgICAgICAgICAgIHN0YWNrQS5wdXNoKHNvdXJjZSk7XG4gICAgICAgICAgICBzdGFja0IucHVzaCh2YWx1ZSk7XG5cbiAgICAgICAgICAgIC8vIHJlY3Vyc2l2ZWx5IG1lcmdlIG9iamVjdHMgYW5kIGFycmF5cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpXG4gICAgICAgICAgICBpZiAoIWlzU2hhbGxvdykge1xuICAgICAgICAgICAgICBiYXNlTWVyZ2UodmFsdWUsIHNvdXJjZSwgY2FsbGJhY2ssIHN0YWNrQSwgc3RhY2tCKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBjYWxsYmFjayh2YWx1ZSwgc291cmNlKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzdWx0ID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHJlc3VsdCA9IHNvdXJjZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHR5cGVvZiByZXN1bHQgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHZhbHVlID0gcmVzdWx0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvYmplY3Rba2V5XSA9IHZhbHVlO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucmFuZG9tYCB3aXRob3V0IGFyZ3VtZW50IGp1Z2dsaW5nIG9yIHN1cHBvcnRcbiAgICAgKiBmb3IgcmV0dXJuaW5nIGZsb2F0aW5nLXBvaW50IG51bWJlcnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtaW4gVGhlIG1pbmltdW0gcG9zc2libGUgdmFsdWUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heCBUaGUgbWF4aW11bSBwb3NzaWJsZSB2YWx1ZS5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIGEgcmFuZG9tIG51bWJlci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlUmFuZG9tKG1pbiwgbWF4KSB7XG4gICAgICByZXR1cm4gbWluICsgZmxvb3IobmF0aXZlUmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnVuaXFgIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2sgc2hvcnRoYW5kc1xuICAgICAqIG9yIGB0aGlzQXJnYCBiaW5kaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcHJvY2Vzcy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc1NvcnRlZD1mYWxzZV0gQSBmbGFnIHRvIGluZGljYXRlIHRoYXQgYGFycmF5YCBpcyBzb3J0ZWQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSBUaGUgZnVuY3Rpb24gY2FsbGVkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgZHVwbGljYXRlLXZhbHVlLWZyZWUgYXJyYXkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZVVuaXEoYXJyYXksIGlzU29ydGVkLCBjYWxsYmFjaykge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgaW5kZXhPZiA9IGdldEluZGV4T2YoKSxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDAsXG4gICAgICAgICAgcmVzdWx0ID0gW107XG5cbiAgICAgIHZhciBpc0xhcmdlID0gIWlzU29ydGVkICYmIGxlbmd0aCA+PSBsYXJnZUFycmF5U2l6ZSAmJiBpbmRleE9mID09PSBiYXNlSW5kZXhPZixcbiAgICAgICAgICBzZWVuID0gKGNhbGxiYWNrIHx8IGlzTGFyZ2UpID8gZ2V0QXJyYXkoKSA6IHJlc3VsdDtcblxuICAgICAgaWYgKGlzTGFyZ2UpIHtcbiAgICAgICAgdmFyIGNhY2hlID0gY3JlYXRlQ2FjaGUoc2Vlbik7XG4gICAgICAgIGluZGV4T2YgPSBjYWNoZUluZGV4T2Y7XG4gICAgICAgIHNlZW4gPSBjYWNoZTtcbiAgICAgIH1cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGFycmF5W2luZGV4XSxcbiAgICAgICAgICAgIGNvbXB1dGVkID0gY2FsbGJhY2sgPyBjYWxsYmFjayh2YWx1ZSwgaW5kZXgsIGFycmF5KSA6IHZhbHVlO1xuXG4gICAgICAgIGlmIChpc1NvcnRlZFxuICAgICAgICAgICAgICA/ICFpbmRleCB8fCBzZWVuW3NlZW4ubGVuZ3RoIC0gMV0gIT09IGNvbXB1dGVkXG4gICAgICAgICAgICAgIDogaW5kZXhPZihzZWVuLCBjb21wdXRlZCkgPCAwXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICBpZiAoY2FsbGJhY2sgfHwgaXNMYXJnZSkge1xuICAgICAgICAgICAgc2Vlbi5wdXNoKGNvbXB1dGVkKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaXNMYXJnZSkge1xuICAgICAgICByZWxlYXNlQXJyYXkoc2Vlbi5hcnJheSk7XG4gICAgICAgIHJlbGVhc2VPYmplY3Qoc2Vlbik7XG4gICAgICB9IGVsc2UgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIHJlbGVhc2VBcnJheShzZWVuKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgYWdncmVnYXRlcyBhIGNvbGxlY3Rpb24sIGNyZWF0aW5nIGFuIG9iamVjdCBjb21wb3NlZFxuICAgICAqIG9mIGtleXMgZ2VuZXJhdGVkIGZyb20gdGhlIHJlc3VsdHMgb2YgcnVubmluZyBlYWNoIGVsZW1lbnQgb2YgdGhlIGNvbGxlY3Rpb25cbiAgICAgKiB0aHJvdWdoIGEgY2FsbGJhY2suIFRoZSBnaXZlbiBgc2V0dGVyYCBmdW5jdGlvbiBzZXRzIHRoZSBrZXlzIGFuZCB2YWx1ZXNcbiAgICAgKiBvZiB0aGUgY29tcG9zZWQgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzZXR0ZXIgVGhlIHNldHRlciBmdW5jdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBhZ2dyZWdhdG9yIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUFnZ3JlZ2F0b3Ioc2V0dGVyKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oY29sbGVjdGlvbiwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XG5cbiAgICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgICBsZW5ndGggPSBjb2xsZWN0aW9uID8gY29sbGVjdGlvbi5sZW5ndGggOiAwO1xuXG4gICAgICAgIGlmICh0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInKSB7XG4gICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGNvbGxlY3Rpb25baW5kZXhdO1xuICAgICAgICAgICAgc2V0dGVyKHJlc3VsdCwgdmFsdWUsIGNhbGxiYWNrKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbiksIGNvbGxlY3Rpb24pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmb3JPd24oY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGtleSwgY29sbGVjdGlvbikge1xuICAgICAgICAgICAgc2V0dGVyKHJlc3VsdCwgdmFsdWUsIGNhbGxiYWNrKHZhbHVlLCBrZXksIGNvbGxlY3Rpb24pLCBjb2xsZWN0aW9uKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBjYWxsZWQsIGVpdGhlciBjdXJyaWVzIG9yIGludm9rZXMgYGZ1bmNgXG4gICAgICogd2l0aCBhbiBvcHRpb25hbCBgdGhpc2AgYmluZGluZyBhbmQgcGFydGlhbGx5IGFwcGxpZWQgYXJndW1lbnRzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufHN0cmluZ30gZnVuYyBUaGUgZnVuY3Rpb24gb3IgbWV0aG9kIG5hbWUgdG8gcmVmZXJlbmNlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIG9mIG1ldGhvZCBmbGFncyB0byBjb21wb3NlLlxuICAgICAqICBUaGUgYml0bWFzayBtYXkgYmUgY29tcG9zZWQgb2YgdGhlIGZvbGxvd2luZyBmbGFnczpcbiAgICAgKiAgMSAtIGBfLmJpbmRgXG4gICAgICogIDIgLSBgXy5iaW5kS2V5YFxuICAgICAqICA0IC0gYF8uY3VycnlgXG4gICAgICogIDggLSBgXy5jdXJyeWAgKGJvdW5kKVxuICAgICAqICAxNiAtIGBfLnBhcnRpYWxgXG4gICAgICogIDMyIC0gYF8ucGFydGlhbFJpZ2h0YFxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtwYXJ0aWFsQXJnc10gQW4gYXJyYXkgb2YgYXJndW1lbnRzIHRvIHByZXBlbmQgdG8gdGhvc2VcbiAgICAgKiAgcHJvdmlkZWQgdG8gdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbcGFydGlhbFJpZ2h0QXJnc10gQW4gYXJyYXkgb2YgYXJndW1lbnRzIHRvIGFwcGVuZCB0byB0aG9zZVxuICAgICAqICBwcm92aWRlZCB0byB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgZnVuY2AuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFthcml0eV0gVGhlIGFyaXR5IG9mIGBmdW5jYC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVXcmFwcGVyKGZ1bmMsIGJpdG1hc2ssIHBhcnRpYWxBcmdzLCBwYXJ0aWFsUmlnaHRBcmdzLCB0aGlzQXJnLCBhcml0eSkge1xuICAgICAgdmFyIGlzQmluZCA9IGJpdG1hc2sgJiAxLFxuICAgICAgICAgIGlzQmluZEtleSA9IGJpdG1hc2sgJiAyLFxuICAgICAgICAgIGlzQ3VycnkgPSBiaXRtYXNrICYgNCxcbiAgICAgICAgICBpc0N1cnJ5Qm91bmQgPSBiaXRtYXNrICYgOCxcbiAgICAgICAgICBpc1BhcnRpYWwgPSBiaXRtYXNrICYgMTYsXG4gICAgICAgICAgaXNQYXJ0aWFsUmlnaHQgPSBiaXRtYXNrICYgMzI7XG5cbiAgICAgIGlmICghaXNCaW5kS2V5ICYmICFpc0Z1bmN0aW9uKGZ1bmMpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3I7XG4gICAgICB9XG4gICAgICBpZiAoaXNQYXJ0aWFsICYmICFwYXJ0aWFsQXJncy5sZW5ndGgpIHtcbiAgICAgICAgYml0bWFzayAmPSB+MTY7XG4gICAgICAgIGlzUGFydGlhbCA9IHBhcnRpYWxBcmdzID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoaXNQYXJ0aWFsUmlnaHQgJiYgIXBhcnRpYWxSaWdodEFyZ3MubGVuZ3RoKSB7XG4gICAgICAgIGJpdG1hc2sgJj0gfjMyO1xuICAgICAgICBpc1BhcnRpYWxSaWdodCA9IHBhcnRpYWxSaWdodEFyZ3MgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHZhciBiaW5kRGF0YSA9IGZ1bmMgJiYgZnVuYy5fX2JpbmREYXRhX187XG4gICAgICBpZiAoYmluZERhdGEgJiYgYmluZERhdGEgIT09IHRydWUpIHtcbiAgICAgICAgLy8gY2xvbmUgYGJpbmREYXRhYFxuICAgICAgICBiaW5kRGF0YSA9IHNsaWNlKGJpbmREYXRhKTtcbiAgICAgICAgaWYgKGJpbmREYXRhWzJdKSB7XG4gICAgICAgICAgYmluZERhdGFbMl0gPSBzbGljZShiaW5kRGF0YVsyXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJpbmREYXRhWzNdKSB7XG4gICAgICAgICAgYmluZERhdGFbM10gPSBzbGljZShiaW5kRGF0YVszXSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2V0IGB0aGlzQmluZGluZ2AgaXMgbm90IHByZXZpb3VzbHkgYm91bmRcbiAgICAgICAgaWYgKGlzQmluZCAmJiAhKGJpbmREYXRhWzFdICYgMSkpIHtcbiAgICAgICAgICBiaW5kRGF0YVs0XSA9IHRoaXNBcmc7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2V0IGlmIHByZXZpb3VzbHkgYm91bmQgYnV0IG5vdCBjdXJyZW50bHkgKHN1YnNlcXVlbnQgY3VycmllZCBmdW5jdGlvbnMpXG4gICAgICAgIGlmICghaXNCaW5kICYmIGJpbmREYXRhWzFdICYgMSkge1xuICAgICAgICAgIGJpdG1hc2sgfD0gODtcbiAgICAgICAgfVxuICAgICAgICAvLyBzZXQgY3VycmllZCBhcml0eSBpZiBub3QgeWV0IHNldFxuICAgICAgICBpZiAoaXNDdXJyeSAmJiAhKGJpbmREYXRhWzFdICYgNCkpIHtcbiAgICAgICAgICBiaW5kRGF0YVs1XSA9IGFyaXR5O1xuICAgICAgICB9XG4gICAgICAgIC8vIGFwcGVuZCBwYXJ0aWFsIGxlZnQgYXJndW1lbnRzXG4gICAgICAgIGlmIChpc1BhcnRpYWwpIHtcbiAgICAgICAgICBwdXNoLmFwcGx5KGJpbmREYXRhWzJdIHx8IChiaW5kRGF0YVsyXSA9IFtdKSwgcGFydGlhbEFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFwcGVuZCBwYXJ0aWFsIHJpZ2h0IGFyZ3VtZW50c1xuICAgICAgICBpZiAoaXNQYXJ0aWFsUmlnaHQpIHtcbiAgICAgICAgICB1bnNoaWZ0LmFwcGx5KGJpbmREYXRhWzNdIHx8IChiaW5kRGF0YVszXSA9IFtdKSwgcGFydGlhbFJpZ2h0QXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbWVyZ2UgZmxhZ3NcbiAgICAgICAgYmluZERhdGFbMV0gfD0gYml0bWFzaztcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVdyYXBwZXIuYXBwbHkobnVsbCwgYmluZERhdGEpO1xuICAgICAgfVxuICAgICAgLy8gZmFzdCBwYXRoIGZvciBgXy5iaW5kYFxuICAgICAgdmFyIGNyZWF0ZXIgPSAoYml0bWFzayA9PSAxIHx8IGJpdG1hc2sgPT09IDE3KSA/IGJhc2VCaW5kIDogYmFzZUNyZWF0ZVdyYXBwZXI7XG4gICAgICByZXR1cm4gY3JlYXRlcihbZnVuYywgYml0bWFzaywgcGFydGlhbEFyZ3MsIHBhcnRpYWxSaWdodEFyZ3MsIHRoaXNBcmcsIGFyaXR5XSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlZCBieSBgZXNjYXBlYCB0byBjb252ZXJ0IGNoYXJhY3RlcnMgdG8gSFRNTCBlbnRpdGllcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1hdGNoIFRoZSBtYXRjaGVkIGNoYXJhY3RlciB0byBlc2NhcGUuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgZXNjYXBlZCBjaGFyYWN0ZXIuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZXNjYXBlSHRtbENoYXIobWF0Y2gpIHtcbiAgICAgIHJldHVybiBodG1sRXNjYXBlc1ttYXRjaF07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgYXBwcm9wcmlhdGUgXCJpbmRleE9mXCIgZnVuY3Rpb24uIElmIHRoZSBgXy5pbmRleE9mYCBtZXRob2QgaXNcbiAgICAgKiBjdXN0b21pemVkLCB0aGlzIG1ldGhvZCByZXR1cm5zIHRoZSBjdXN0b20gbWV0aG9kLCBvdGhlcndpc2UgaXQgcmV0dXJuc1xuICAgICAqIHRoZSBgYmFzZUluZGV4T2ZgIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIFwiaW5kZXhPZlwiIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldEluZGV4T2YoKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gKHJlc3VsdCA9IGxvZGFzaC5pbmRleE9mKSA9PT0gaW5kZXhPZiA/IGJhc2VJbmRleE9mIDogcmVzdWx0O1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIG5hdGl2ZSBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGEgbmF0aXZlIGZ1bmN0aW9uLCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNOYXRpdmUodmFsdWUpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ2Z1bmN0aW9uJyAmJiByZU5hdGl2ZS50ZXN0KHZhbHVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIGB0aGlzYCBiaW5kaW5nIGRhdGEgb24gYSBnaXZlbiBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gc2V0IGRhdGEgb24uXG4gICAgICogQHBhcmFtIHtBcnJheX0gdmFsdWUgVGhlIGRhdGEgYXJyYXkgdG8gc2V0LlxuICAgICAqL1xuICAgIHZhciBzZXRCaW5kRGF0YSA9ICFkZWZpbmVQcm9wZXJ0eSA/IG5vb3AgOiBmdW5jdGlvbihmdW5jLCB2YWx1ZSkge1xuICAgICAgZGVzY3JpcHRvci52YWx1ZSA9IHZhbHVlO1xuICAgICAgZGVmaW5lUHJvcGVydHkoZnVuYywgJ19fYmluZERhdGFfXycsIGRlc2NyaXB0b3IpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBIGZhbGxiYWNrIGltcGxlbWVudGF0aW9uIG9mIGBpc1BsYWluT2JqZWN0YCB3aGljaCBjaGVja3MgaWYgYSBnaXZlbiB2YWx1ZVxuICAgICAqIGlzIGFuIG9iamVjdCBjcmVhdGVkIGJ5IHRoZSBgT2JqZWN0YCBjb25zdHJ1Y3RvciwgYXNzdW1pbmcgb2JqZWN0cyBjcmVhdGVkXG4gICAgICogYnkgdGhlIGBPYmplY3RgIGNvbnN0cnVjdG9yIGhhdmUgbm8gaW5oZXJpdGVkIGVudW1lcmFibGUgcHJvcGVydGllcyBhbmQgdGhhdFxuICAgICAqIHRoZXJlIGFyZSBubyBgT2JqZWN0LnByb3RvdHlwZWAgZXh0ZW5zaW9ucy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBwbGFpbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzaGltSXNQbGFpbk9iamVjdCh2YWx1ZSkge1xuICAgICAgdmFyIGN0b3IsXG4gICAgICAgICAgcmVzdWx0O1xuXG4gICAgICAvLyBhdm9pZCBub24gT2JqZWN0IG9iamVjdHMsIGBhcmd1bWVudHNgIG9iamVjdHMsIGFuZCBET00gZWxlbWVudHNcbiAgICAgIGlmICghKHZhbHVlICYmIHRvU3RyaW5nLmNhbGwodmFsdWUpID09IG9iamVjdENsYXNzKSB8fFxuICAgICAgICAgIChjdG9yID0gdmFsdWUuY29uc3RydWN0b3IsIGlzRnVuY3Rpb24oY3RvcikgJiYgIShjdG9yIGluc3RhbmNlb2YgY3RvcikpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIC8vIEluIG1vc3QgZW52aXJvbm1lbnRzIGFuIG9iamVjdCdzIG93biBwcm9wZXJ0aWVzIGFyZSBpdGVyYXRlZCBiZWZvcmVcbiAgICAgIC8vIGl0cyBpbmhlcml0ZWQgcHJvcGVydGllcy4gSWYgdGhlIGxhc3QgaXRlcmF0ZWQgcHJvcGVydHkgaXMgYW4gb2JqZWN0J3NcbiAgICAgIC8vIG93biBwcm9wZXJ0eSB0aGVuIHRoZXJlIGFyZSBubyBpbmhlcml0ZWQgZW51bWVyYWJsZSBwcm9wZXJ0aWVzLlxuICAgICAgZm9ySW4odmFsdWUsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgcmVzdWx0ID0ga2V5O1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gdHlwZW9mIHJlc3VsdCA9PSAndW5kZWZpbmVkJyB8fCBoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCByZXN1bHQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZWQgYnkgYHVuZXNjYXBlYCB0byBjb252ZXJ0IEhUTUwgZW50aXRpZXMgdG8gY2hhcmFjdGVycy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1hdGNoIFRoZSBtYXRjaGVkIGNoYXJhY3RlciB0byB1bmVzY2FwZS5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSB1bmVzY2FwZWQgY2hhcmFjdGVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHVuZXNjYXBlSHRtbENoYXIobWF0Y2gpIHtcbiAgICAgIHJldHVybiBodG1sVW5lc2NhcGVzW21hdGNoXTtcbiAgICB9XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFuIGBhcmd1bWVudHNgIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGFuIGBhcmd1bWVudHNgIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAoZnVuY3Rpb24oKSB7IHJldHVybiBfLmlzQXJndW1lbnRzKGFyZ3VtZW50cyk7IH0pKDEsIDIsIDMpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNBcmd1bWVudHMoWzEsIDIsIDNdKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzQXJndW1lbnRzKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmIHR5cGVvZiB2YWx1ZS5sZW5ndGggPT0gJ251bWJlcicgJiZcbiAgICAgICAgdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gYXJnc0NsYXNzIHx8IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFuIGFycmF5LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHR5cGUgRnVuY3Rpb25cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBpcyBhbiBhcnJheSwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAoZnVuY3Rpb24oKSB7IHJldHVybiBfLmlzQXJyYXkoYXJndW1lbnRzKTsgfSkoKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5pc0FycmF5KFsxLCAyLCAzXSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIHZhciBpc0FycmF5ID0gbmF0aXZlSXNBcnJheSB8fCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JyAmJiB0eXBlb2YgdmFsdWUubGVuZ3RoID09ICdudW1iZXInICYmXG4gICAgICAgIHRvU3RyaW5nLmNhbGwodmFsdWUpID09IGFycmF5Q2xhc3MgfHwgZmFsc2U7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEEgZmFsbGJhY2sgaW1wbGVtZW50YXRpb24gb2YgYE9iamVjdC5rZXlzYCB3aGljaCBwcm9kdWNlcyBhbiBhcnJheSBvZiB0aGVcbiAgICAgKiBnaXZlbiBvYmplY3QncyBvd24gZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYW4gYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gICAgICovXG4gICAgdmFyIHNoaW1LZXlzID0gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgICB2YXIgaW5kZXgsIGl0ZXJhYmxlID0gb2JqZWN0LCByZXN1bHQgPSBbXTtcbiAgICAgIGlmICghaXRlcmFibGUpIHJldHVybiByZXN1bHQ7XG4gICAgICBpZiAoIShvYmplY3RUeXBlc1t0eXBlb2Ygb2JqZWN0XSkpIHJldHVybiByZXN1bHQ7XG4gICAgICAgIGZvciAoaW5kZXggaW4gaXRlcmFibGUpIHtcbiAgICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChpdGVyYWJsZSwgaW5kZXgpKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChpbmRleCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgY29tcG9zZWQgb2YgdGhlIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIGFuIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGluc3BlY3QuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGFuIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmtleXMoeyAnb25lJzogMSwgJ3R3byc6IDIsICd0aHJlZSc6IDMgfSk7XG4gICAgICogLy8gPT4gWydvbmUnLCAndHdvJywgJ3RocmVlJ10gKHByb3BlcnR5IG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkIGFjcm9zcyBlbnZpcm9ubWVudHMpXG4gICAgICovXG4gICAgdmFyIGtleXMgPSAhbmF0aXZlS2V5cyA/IHNoaW1LZXlzIDogZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgICBpZiAoIWlzT2JqZWN0KG9iamVjdCkpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5hdGl2ZUtleXMob2JqZWN0KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVXNlZCB0byBjb252ZXJ0IGNoYXJhY3RlcnMgdG8gSFRNTCBlbnRpdGllczpcbiAgICAgKlxuICAgICAqIFRob3VnaCB0aGUgYD5gIGNoYXJhY3RlciBpcyBlc2NhcGVkIGZvciBzeW1tZXRyeSwgY2hhcmFjdGVycyBsaWtlIGA+YCBhbmQgYC9gXG4gICAgICogZG9uJ3QgcmVxdWlyZSBlc2NhcGluZyBpbiBIVE1MIGFuZCBoYXZlIG5vIHNwZWNpYWwgbWVhbmluZyB1bmxlc3MgdGhleSdyZSBwYXJ0XG4gICAgICogb2YgYSB0YWcgb3IgYW4gdW5xdW90ZWQgYXR0cmlidXRlIHZhbHVlLlxuICAgICAqIGh0dHA6Ly9tYXRoaWFzYnluZW5zLmJlL25vdGVzL2FtYmlndW91cy1hbXBlcnNhbmRzICh1bmRlciBcInNlbWktcmVsYXRlZCBmdW4gZmFjdFwiKVxuICAgICAqL1xuICAgIHZhciBodG1sRXNjYXBlcyA9IHtcbiAgICAgICcmJzogJyZhbXA7JyxcbiAgICAgICc8JzogJyZsdDsnLFxuICAgICAgJz4nOiAnJmd0OycsXG4gICAgICAnXCInOiAnJnF1b3Q7JyxcbiAgICAgIFwiJ1wiOiAnJiMzOTsnXG4gICAgfTtcblxuICAgIC8qKiBVc2VkIHRvIGNvbnZlcnQgSFRNTCBlbnRpdGllcyB0byBjaGFyYWN0ZXJzICovXG4gICAgdmFyIGh0bWxVbmVzY2FwZXMgPSBpbnZlcnQoaHRtbEVzY2FwZXMpO1xuXG4gICAgLyoqIFVzZWQgdG8gbWF0Y2ggSFRNTCBlbnRpdGllcyBhbmQgSFRNTCBjaGFyYWN0ZXJzICovXG4gICAgdmFyIHJlRXNjYXBlZEh0bWwgPSBSZWdFeHAoJygnICsga2V5cyhodG1sVW5lc2NhcGVzKS5qb2luKCd8JykgKyAnKScsICdnJyksXG4gICAgICAgIHJlVW5lc2NhcGVkSHRtbCA9IFJlZ0V4cCgnWycgKyBrZXlzKGh0bWxFc2NhcGVzKS5qb2luKCcnKSArICddJywgJ2cnKTtcblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogQXNzaWducyBvd24gZW51bWVyYWJsZSBwcm9wZXJ0aWVzIG9mIHNvdXJjZSBvYmplY3QocykgdG8gdGhlIGRlc3RpbmF0aW9uXG4gICAgICogb2JqZWN0LiBTdWJzZXF1ZW50IHNvdXJjZXMgd2lsbCBvdmVyd3JpdGUgcHJvcGVydHkgYXNzaWdubWVudHMgb2YgcHJldmlvdXNcbiAgICAgKiBzb3VyY2VzLiBJZiBhIGNhbGxiYWNrIGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgZXhlY3V0ZWQgdG8gcHJvZHVjZSB0aGVcbiAgICAgKiBhc3NpZ25lZCB2YWx1ZXMuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0d29cbiAgICAgKiBhcmd1bWVudHM7IChvYmplY3RWYWx1ZSwgc291cmNlVmFsdWUpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHR5cGUgRnVuY3Rpb25cbiAgICAgKiBAYWxpYXMgZXh0ZW5kXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAgICogQHBhcmFtIHsuLi5PYmplY3R9IFtzb3VyY2VdIFRoZSBzb3VyY2Ugb2JqZWN0cy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgYXNzaWduaW5nIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uYXNzaWduKHsgJ25hbWUnOiAnZnJlZCcgfSwgeyAnZW1wbG95ZXInOiAnc2xhdGUnIH0pO1xuICAgICAqIC8vID0+IHsgJ25hbWUnOiAnZnJlZCcsICdlbXBsb3llcic6ICdzbGF0ZScgfVxuICAgICAqXG4gICAgICogdmFyIGRlZmF1bHRzID0gXy5wYXJ0aWFsUmlnaHQoXy5hc3NpZ24sIGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgKiAgIHJldHVybiB0eXBlb2YgYSA9PSAndW5kZWZpbmVkJyA/IGIgOiBhO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ25hbWUnOiAnYmFybmV5JyB9O1xuICAgICAqIGRlZmF1bHRzKG9iamVjdCwgeyAnbmFtZSc6ICdmcmVkJywgJ2VtcGxveWVyJzogJ3NsYXRlJyB9KTtcbiAgICAgKiAvLyA9PiB7ICduYW1lJzogJ2Jhcm5leScsICdlbXBsb3llcic6ICdzbGF0ZScgfVxuICAgICAqL1xuICAgIHZhciBhc3NpZ24gPSBmdW5jdGlvbihvYmplY3QsIHNvdXJjZSwgZ3VhcmQpIHtcbiAgICAgIHZhciBpbmRleCwgaXRlcmFibGUgPSBvYmplY3QsIHJlc3VsdCA9IGl0ZXJhYmxlO1xuICAgICAgaWYgKCFpdGVyYWJsZSkgcmV0dXJuIHJlc3VsdDtcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxuICAgICAgICAgIGFyZ3NJbmRleCA9IDAsXG4gICAgICAgICAgYXJnc0xlbmd0aCA9IHR5cGVvZiBndWFyZCA9PSAnbnVtYmVyJyA/IDIgOiBhcmdzLmxlbmd0aDtcbiAgICAgIGlmIChhcmdzTGVuZ3RoID4gMyAmJiB0eXBlb2YgYXJnc1thcmdzTGVuZ3RoIC0gMl0gPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSBiYXNlQ3JlYXRlQ2FsbGJhY2soYXJnc1stLWFyZ3NMZW5ndGggLSAxXSwgYXJnc1thcmdzTGVuZ3RoLS1dLCAyKTtcbiAgICAgIH0gZWxzZSBpZiAoYXJnc0xlbmd0aCA+IDIgJiYgdHlwZW9mIGFyZ3NbYXJnc0xlbmd0aCAtIDFdID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBhcmdzWy0tYXJnc0xlbmd0aF07XG4gICAgICB9XG4gICAgICB3aGlsZSAoKythcmdzSW5kZXggPCBhcmdzTGVuZ3RoKSB7XG4gICAgICAgIGl0ZXJhYmxlID0gYXJnc1thcmdzSW5kZXhdO1xuICAgICAgICBpZiAoaXRlcmFibGUgJiYgb2JqZWN0VHlwZXNbdHlwZW9mIGl0ZXJhYmxlXSkge1xuICAgICAgICB2YXIgb3duSW5kZXggPSAtMSxcbiAgICAgICAgICAgIG93blByb3BzID0gb2JqZWN0VHlwZXNbdHlwZW9mIGl0ZXJhYmxlXSAmJiBrZXlzKGl0ZXJhYmxlKSxcbiAgICAgICAgICAgIGxlbmd0aCA9IG93blByb3BzID8gb3duUHJvcHMubGVuZ3RoIDogMDtcblxuICAgICAgICB3aGlsZSAoKytvd25JbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgIGluZGV4ID0gb3duUHJvcHNbb3duSW5kZXhdO1xuICAgICAgICAgIHJlc3VsdFtpbmRleF0gPSBjYWxsYmFjayA/IGNhbGxiYWNrKHJlc3VsdFtpbmRleF0sIGl0ZXJhYmxlW2luZGV4XSkgOiBpdGVyYWJsZVtpbmRleF07XG4gICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgY2xvbmUgb2YgYHZhbHVlYC4gSWYgYGlzRGVlcGAgaXMgYHRydWVgIG5lc3RlZCBvYmplY3RzIHdpbGwgYWxzb1xuICAgICAqIGJlIGNsb25lZCwgb3RoZXJ3aXNlIHRoZXkgd2lsbCBiZSBhc3NpZ25lZCBieSByZWZlcmVuY2UuIElmIGEgY2FsbGJhY2tcbiAgICAgKiBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIGV4ZWN1dGVkIHRvIHByb2R1Y2UgdGhlIGNsb25lZCB2YWx1ZXMuIElmIHRoZVxuICAgICAqIGNhbGxiYWNrIHJldHVybnMgYHVuZGVmaW5lZGAgY2xvbmluZyB3aWxsIGJlIGhhbmRsZWQgYnkgdGhlIG1ldGhvZCBpbnN0ZWFkLlxuICAgICAqIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCBvbmUgYXJndW1lbnQ7ICh2YWx1ZSkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNsb25lLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzRGVlcD1mYWxzZV0gU3BlY2lmeSBhIGRlZXAgY2xvbmUuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNsb25pbmcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBjbG9uZWQgdmFsdWUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xuICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgJ2FnZSc6IDQwIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogdmFyIHNoYWxsb3cgPSBfLmNsb25lKGNoYXJhY3RlcnMpO1xuICAgICAqIHNoYWxsb3dbMF0gPT09IGNoYXJhY3RlcnNbMF07XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogdmFyIGRlZXAgPSBfLmNsb25lKGNoYXJhY3RlcnMsIHRydWUpO1xuICAgICAqIGRlZXBbMF0gPT09IGNoYXJhY3RlcnNbMF07XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8ubWl4aW4oe1xuICAgICAqICAgJ2Nsb25lJzogXy5wYXJ0aWFsUmlnaHQoXy5jbG9uZSwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgKiAgICAgcmV0dXJuIF8uaXNFbGVtZW50KHZhbHVlKSA/IHZhbHVlLmNsb25lTm9kZShmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICogICB9KVxuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogdmFyIGNsb25lID0gXy5jbG9uZShkb2N1bWVudC5ib2R5KTtcbiAgICAgKiBjbG9uZS5jaGlsZE5vZGVzLmxlbmd0aDtcbiAgICAgKiAvLyA9PiAwXG4gICAgICovXG4gICAgZnVuY3Rpb24gY2xvbmUodmFsdWUsIGlzRGVlcCwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIC8vIGFsbG93cyB3b3JraW5nIHdpdGggXCJDb2xsZWN0aW9uc1wiIG1ldGhvZHMgd2l0aG91dCB1c2luZyB0aGVpciBgaW5kZXhgXG4gICAgICAvLyBhbmQgYGNvbGxlY3Rpb25gIGFyZ3VtZW50cyBmb3IgYGlzRGVlcGAgYW5kIGBjYWxsYmFja2BcbiAgICAgIGlmICh0eXBlb2YgaXNEZWVwICE9ICdib29sZWFuJyAmJiBpc0RlZXAgIT0gbnVsbCkge1xuICAgICAgICB0aGlzQXJnID0gY2FsbGJhY2s7XG4gICAgICAgIGNhbGxiYWNrID0gaXNEZWVwO1xuICAgICAgICBpc0RlZXAgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBiYXNlQ2xvbmUodmFsdWUsIGlzRGVlcCwgdHlwZW9mIGNhbGxiYWNrID09ICdmdW5jdGlvbicgJiYgYmFzZUNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAxKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGRlZXAgY2xvbmUgb2YgYHZhbHVlYC4gSWYgYSBjYWxsYmFjayBpcyBwcm92aWRlZCBpdCB3aWxsIGJlXG4gICAgICogZXhlY3V0ZWQgdG8gcHJvZHVjZSB0aGUgY2xvbmVkIHZhbHVlcy4gSWYgdGhlIGNhbGxiYWNrIHJldHVybnMgYHVuZGVmaW5lZGBcbiAgICAgKiBjbG9uaW5nIHdpbGwgYmUgaGFuZGxlZCBieSB0aGUgbWV0aG9kIGluc3RlYWQuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0b1xuICAgICAqIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIG9uZSBhcmd1bWVudDsgKHZhbHVlKS5cbiAgICAgKlxuICAgICAqIE5vdGU6IFRoaXMgbWV0aG9kIGlzIGxvb3NlbHkgYmFzZWQgb24gdGhlIHN0cnVjdHVyZWQgY2xvbmUgYWxnb3JpdGhtLiBGdW5jdGlvbnNcbiAgICAgKiBhbmQgRE9NIG5vZGVzIGFyZSAqKm5vdCoqIGNsb25lZC4gVGhlIGVudW1lcmFibGUgcHJvcGVydGllcyBvZiBgYXJndW1lbnRzYCBvYmplY3RzIGFuZFxuICAgICAqIG9iamVjdHMgY3JlYXRlZCBieSBjb25zdHJ1Y3RvcnMgb3RoZXIgdGhhbiBgT2JqZWN0YCBhcmUgY2xvbmVkIHRvIHBsYWluIGBPYmplY3RgIG9iamVjdHMuXG4gICAgICogU2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw1L2luZnJhc3RydWN0dXJlLmh0bWwjaW50ZXJuYWwtc3RydWN0dXJlZC1jbG9uaW5nLWFsZ29yaXRobS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gZGVlcCBjbG9uZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY2xvbmluZyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGRlZXAgY2xvbmVkIHZhbHVlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcbiAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sXG4gICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIHZhciBkZWVwID0gXy5jbG9uZURlZXAoY2hhcmFjdGVycyk7XG4gICAgICogZGVlcFswXSA9PT0gY2hhcmFjdGVyc1swXTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogdmFyIHZpZXcgPSB7XG4gICAgICogICAnbGFiZWwnOiAnZG9jcycsXG4gICAgICogICAnbm9kZSc6IGVsZW1lbnRcbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogdmFyIGNsb25lID0gXy5jbG9uZURlZXAodmlldywgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgKiAgIHJldHVybiBfLmlzRWxlbWVudCh2YWx1ZSkgPyB2YWx1ZS5jbG9uZU5vZGUodHJ1ZSkgOiB1bmRlZmluZWQ7XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBjbG9uZS5ub2RlID09IHZpZXcubm9kZTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNsb25lRGVlcCh2YWx1ZSwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIHJldHVybiBiYXNlQ2xvbmUodmFsdWUsIHRydWUsIHR5cGVvZiBjYWxsYmFjayA9PSAnZnVuY3Rpb24nICYmIGJhc2VDcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gb2JqZWN0IHRoYXQgaW5oZXJpdHMgZnJvbSB0aGUgZ2l2ZW4gYHByb3RvdHlwZWAgb2JqZWN0LiBJZiBhXG4gICAgICogYHByb3BlcnRpZXNgIG9iamVjdCBpcyBwcm92aWRlZCBpdHMgb3duIGVudW1lcmFibGUgcHJvcGVydGllcyBhcmUgYXNzaWduZWRcbiAgICAgKiB0byB0aGUgY3JlYXRlZCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwcm90b3R5cGUgVGhlIG9iamVjdCB0byBpbmhlcml0IGZyb20uXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzXSBUaGUgcHJvcGVydGllcyB0byBhc3NpZ24gdG8gdGhlIG9iamVjdC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgb2JqZWN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBTaGFwZSgpIHtcbiAgICAgKiAgIHRoaXMueCA9IDA7XG4gICAgICogICB0aGlzLnkgPSAwO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIENpcmNsZSgpIHtcbiAgICAgKiAgIFNoYXBlLmNhbGwodGhpcyk7XG4gICAgICogfVxuICAgICAqXG4gICAgICogQ2lyY2xlLnByb3RvdHlwZSA9IF8uY3JlYXRlKFNoYXBlLnByb3RvdHlwZSwgeyAnY29uc3RydWN0b3InOiBDaXJjbGUgfSk7XG4gICAgICpcbiAgICAgKiB2YXIgY2lyY2xlID0gbmV3IENpcmNsZTtcbiAgICAgKiBjaXJjbGUgaW5zdGFuY2VvZiBDaXJjbGU7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogY2lyY2xlIGluc3RhbmNlb2YgU2hhcGU7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNyZWF0ZShwcm90b3R5cGUsIHByb3BlcnRpZXMpIHtcbiAgICAgIHZhciByZXN1bHQgPSBiYXNlQ3JlYXRlKHByb3RvdHlwZSk7XG4gICAgICByZXR1cm4gcHJvcGVydGllcyA/IGFzc2lnbihyZXN1bHQsIHByb3BlcnRpZXMpIDogcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFzc2lnbnMgb3duIGVudW1lcmFibGUgcHJvcGVydGllcyBvZiBzb3VyY2Ugb2JqZWN0KHMpIHRvIHRoZSBkZXN0aW5hdGlvblxuICAgICAqIG9iamVjdCBmb3IgYWxsIGRlc3RpbmF0aW9uIHByb3BlcnRpZXMgdGhhdCByZXNvbHZlIHRvIGB1bmRlZmluZWRgLiBPbmNlIGFcbiAgICAgKiBwcm9wZXJ0eSBpcyBzZXQsIGFkZGl0aW9uYWwgZGVmYXVsdHMgb2YgdGhlIHNhbWUgcHJvcGVydHkgd2lsbCBiZSBpZ25vcmVkLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHR5cGUgRnVuY3Rpb25cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAgICAgKiBAcGFyYW0gey4uLk9iamVjdH0gW3NvdXJjZV0gVGhlIHNvdXJjZSBvYmplY3RzLlxuICAgICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBBbGxvd3Mgd29ya2luZyB3aXRoIGBfLnJlZHVjZWAgd2l0aG91dCB1c2luZyBpdHNcbiAgICAgKiAgYGtleWAgYW5kIGBvYmplY3RgIGFyZ3VtZW50cyBhcyBzb3VyY2VzLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ25hbWUnOiAnYmFybmV5JyB9O1xuICAgICAqIF8uZGVmYXVsdHMob2JqZWN0LCB7ICduYW1lJzogJ2ZyZWQnLCAnZW1wbG95ZXInOiAnc2xhdGUnIH0pO1xuICAgICAqIC8vID0+IHsgJ25hbWUnOiAnYmFybmV5JywgJ2VtcGxveWVyJzogJ3NsYXRlJyB9XG4gICAgICovXG4gICAgdmFyIGRlZmF1bHRzID0gZnVuY3Rpb24ob2JqZWN0LCBzb3VyY2UsIGd1YXJkKSB7XG4gICAgICB2YXIgaW5kZXgsIGl0ZXJhYmxlID0gb2JqZWN0LCByZXN1bHQgPSBpdGVyYWJsZTtcbiAgICAgIGlmICghaXRlcmFibGUpIHJldHVybiByZXN1bHQ7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cyxcbiAgICAgICAgICBhcmdzSW5kZXggPSAwLFxuICAgICAgICAgIGFyZ3NMZW5ndGggPSB0eXBlb2YgZ3VhcmQgPT0gJ251bWJlcicgPyAyIDogYXJncy5sZW5ndGg7XG4gICAgICB3aGlsZSAoKythcmdzSW5kZXggPCBhcmdzTGVuZ3RoKSB7XG4gICAgICAgIGl0ZXJhYmxlID0gYXJnc1thcmdzSW5kZXhdO1xuICAgICAgICBpZiAoaXRlcmFibGUgJiYgb2JqZWN0VHlwZXNbdHlwZW9mIGl0ZXJhYmxlXSkge1xuICAgICAgICB2YXIgb3duSW5kZXggPSAtMSxcbiAgICAgICAgICAgIG93blByb3BzID0gb2JqZWN0VHlwZXNbdHlwZW9mIGl0ZXJhYmxlXSAmJiBrZXlzKGl0ZXJhYmxlKSxcbiAgICAgICAgICAgIGxlbmd0aCA9IG93blByb3BzID8gb3duUHJvcHMubGVuZ3RoIDogMDtcblxuICAgICAgICB3aGlsZSAoKytvd25JbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgIGluZGV4ID0gb3duUHJvcHNbb3duSW5kZXhdO1xuICAgICAgICAgIGlmICh0eXBlb2YgcmVzdWx0W2luZGV4XSA9PSAndW5kZWZpbmVkJykgcmVzdWx0W2luZGV4XSA9IGl0ZXJhYmxlW2luZGV4XTtcbiAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZmluZEluZGV4YCBleGNlcHQgdGhhdCBpdCByZXR1cm5zIHRoZSBrZXkgb2YgdGhlXG4gICAgICogZmlyc3QgZWxlbWVudCB0aGF0IHBhc3NlcyB0aGUgY2FsbGJhY2sgY2hlY2ssIGluc3RlYWQgb2YgdGhlIGVsZW1lbnQgaXRzZWxmLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXG4gICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXG4gICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcbiAgICAgKiBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBzZWFyY2guXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyXG4gICAgICogIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWQgdG9cbiAgICAgKiAgY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfHVuZGVmaW5lZH0gUmV0dXJucyB0aGUga2V5IG9mIHRoZSBmb3VuZCBlbGVtZW50LCBlbHNlIGB1bmRlZmluZWRgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgY2hhcmFjdGVycyA9IHtcbiAgICAgKiAgICdiYXJuZXknOiB7ICAnYWdlJzogMzYsICdibG9ja2VkJzogZmFsc2UgfSxcbiAgICAgKiAgICdmcmVkJzogeyAgICAnYWdlJzogNDAsICdibG9ja2VkJzogdHJ1ZSB9LFxuICAgICAqICAgJ3BlYmJsZXMnOiB7ICdhZ2UnOiAxLCAgJ2Jsb2NrZWQnOiBmYWxzZSB9XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIF8uZmluZEtleShjaGFyYWN0ZXJzLCBmdW5jdGlvbihjaHIpIHtcbiAgICAgKiAgIHJldHVybiBjaHIuYWdlIDwgNDA7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gJ2Jhcm5leScgKHByb3BlcnR5IG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkIGFjcm9zcyBlbnZpcm9ubWVudHMpXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ud2hlcmVcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmZpbmRLZXkoY2hhcmFjdGVycywgeyAnYWdlJzogMSB9KTtcbiAgICAgKiAvLyA9PiAncGViYmxlcydcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZmluZEtleShjaGFyYWN0ZXJzLCAnYmxvY2tlZCcpO1xuICAgICAqIC8vID0+ICdmcmVkJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZpbmRLZXkob2JqZWN0LCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgdmFyIHJlc3VsdDtcbiAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcbiAgICAgIGZvck93bihvYmplY3QsIGZ1bmN0aW9uKHZhbHVlLCBrZXksIG9iamVjdCkge1xuICAgICAgICBpZiAoY2FsbGJhY2sodmFsdWUsIGtleSwgb2JqZWN0KSkge1xuICAgICAgICAgIHJlc3VsdCA9IGtleTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmZpbmRLZXlgIGV4Y2VwdCB0aGF0IGl0IGl0ZXJhdGVzIG92ZXIgZWxlbWVudHNcbiAgICAgKiBvZiBhIGBjb2xsZWN0aW9uYCBpbiB0aGUgb3Bwb3NpdGUgb3JkZXIuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcbiAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcbiAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxuICAgICAqIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHNlYXJjaC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZCBwZXJcbiAgICAgKiAgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZCB0b1xuICAgICAqICBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd8dW5kZWZpbmVkfSBSZXR1cm5zIHRoZSBrZXkgb2YgdGhlIGZvdW5kIGVsZW1lbnQsIGVsc2UgYHVuZGVmaW5lZGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBjaGFyYWN0ZXJzID0ge1xuICAgICAqICAgJ2Jhcm5leSc6IHsgICdhZ2UnOiAzNiwgJ2Jsb2NrZWQnOiB0cnVlIH0sXG4gICAgICogICAnZnJlZCc6IHsgICAgJ2FnZSc6IDQwLCAnYmxvY2tlZCc6IGZhbHNlIH0sXG4gICAgICogICAncGViYmxlcyc6IHsgJ2FnZSc6IDEsICAnYmxvY2tlZCc6IHRydWUgfVxuICAgICAqIH07XG4gICAgICpcbiAgICAgKiBfLmZpbmRMYXN0S2V5KGNoYXJhY3RlcnMsIGZ1bmN0aW9uKGNocikge1xuICAgICAqICAgcmV0dXJuIGNoci5hZ2UgPCA0MDtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiByZXR1cm5zIGBwZWJibGVzYCwgYXNzdW1pbmcgYF8uZmluZEtleWAgcmV0dXJucyBgYmFybmV5YFxuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLndoZXJlXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5maW5kTGFzdEtleShjaGFyYWN0ZXJzLCB7ICdhZ2UnOiA0MCB9KTtcbiAgICAgKiAvLyA9PiAnZnJlZCdcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZmluZExhc3RLZXkoY2hhcmFjdGVycywgJ2Jsb2NrZWQnKTtcbiAgICAgKiAvLyA9PiAncGViYmxlcydcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmaW5kTGFzdEtleShvYmplY3QsIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgcmVzdWx0O1xuICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xuICAgICAgZm9yT3duUmlnaHQob2JqZWN0LCBmdW5jdGlvbih2YWx1ZSwga2V5LCBvYmplY3QpIHtcbiAgICAgICAgaWYgKGNhbGxiYWNrKHZhbHVlLCBrZXksIG9iamVjdCkpIHtcbiAgICAgICAgICByZXN1bHQgPSBrZXk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBvd24gYW5kIGluaGVyaXRlZCBlbnVtZXJhYmxlIHByb3BlcnRpZXMgb2YgYW4gb2JqZWN0LFxuICAgICAqIGV4ZWN1dGluZyB0aGUgY2FsbGJhY2sgZm9yIGVhY2ggcHJvcGVydHkuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2BcbiAgICAgKiBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czsgKHZhbHVlLCBrZXksIG9iamVjdCkuIENhbGxiYWNrcyBtYXkgZXhpdFxuICAgICAqIGl0ZXJhdGlvbiBlYXJseSBieSBleHBsaWNpdGx5IHJldHVybmluZyBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHR5cGUgRnVuY3Rpb25cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gU2hhcGUoKSB7XG4gICAgICogICB0aGlzLnggPSAwO1xuICAgICAqICAgdGhpcy55ID0gMDtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBTaGFwZS5wcm90b3R5cGUubW92ZSA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICAgKiAgIHRoaXMueCArPSB4O1xuICAgICAqICAgdGhpcy55ICs9IHk7XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIF8uZm9ySW4obmV3IFNoYXBlLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICogICBjb25zb2xlLmxvZyhrZXkpO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IGxvZ3MgJ3gnLCAneScsIGFuZCAnbW92ZScgKHByb3BlcnR5IG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkIGFjcm9zcyBlbnZpcm9ubWVudHMpXG4gICAgICovXG4gICAgdmFyIGZvckluID0gZnVuY3Rpb24oY29sbGVjdGlvbiwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIHZhciBpbmRleCwgaXRlcmFibGUgPSBjb2xsZWN0aW9uLCByZXN1bHQgPSBpdGVyYWJsZTtcbiAgICAgIGlmICghaXRlcmFibGUpIHJldHVybiByZXN1bHQ7XG4gICAgICBpZiAoIW9iamVjdFR5cGVzW3R5cGVvZiBpdGVyYWJsZV0pIHJldHVybiByZXN1bHQ7XG4gICAgICBjYWxsYmFjayA9IGNhbGxiYWNrICYmIHR5cGVvZiB0aGlzQXJnID09ICd1bmRlZmluZWQnID8gY2FsbGJhY2sgOiBiYXNlQ3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xuICAgICAgICBmb3IgKGluZGV4IGluIGl0ZXJhYmxlKSB7XG4gICAgICAgICAgaWYgKGNhbGxiYWNrKGl0ZXJhYmxlW2luZGV4XSwgaW5kZXgsIGNvbGxlY3Rpb24pID09PSBmYWxzZSkgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmZvckluYCBleGNlcHQgdGhhdCBpdCBpdGVyYXRlcyBvdmVyIGVsZW1lbnRzXG4gICAgICogb2YgYSBgY29sbGVjdGlvbmAgaW4gdGhlIG9wcG9zaXRlIG9yZGVyLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIFNoYXBlKCkge1xuICAgICAqICAgdGhpcy54ID0gMDtcbiAgICAgKiAgIHRoaXMueSA9IDA7XG4gICAgICogfVxuICAgICAqXG4gICAgICogU2hhcGUucHJvdG90eXBlLm1vdmUgPSBmdW5jdGlvbih4LCB5KSB7XG4gICAgICogICB0aGlzLnggKz0geDtcbiAgICAgKiAgIHRoaXMueSArPSB5O1xuICAgICAqIH07XG4gICAgICpcbiAgICAgKiBfLmZvckluUmlnaHQobmV3IFNoYXBlLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICogICBjb25zb2xlLmxvZyhrZXkpO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IGxvZ3MgJ21vdmUnLCAneScsIGFuZCAneCcgYXNzdW1pbmcgYF8uZm9ySW4gYCBsb2dzICd4JywgJ3knLCBhbmQgJ21vdmUnXG4gICAgICovXG4gICAgZnVuY3Rpb24gZm9ySW5SaWdodChvYmplY3QsIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgcGFpcnMgPSBbXTtcblxuICAgICAgZm9ySW4ob2JqZWN0LCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgIHBhaXJzLnB1c2goa2V5LCB2YWx1ZSk7XG4gICAgICB9KTtcblxuICAgICAgdmFyIGxlbmd0aCA9IHBhaXJzLmxlbmd0aDtcbiAgICAgIGNhbGxiYWNrID0gYmFzZUNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcbiAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICBpZiAoY2FsbGJhY2socGFpcnNbbGVuZ3RoLS1dLCBwYWlyc1tsZW5ndGhdLCBvYmplY3QpID09PSBmYWxzZSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIG92ZXIgb3duIGVudW1lcmFibGUgcHJvcGVydGllcyBvZiBhbiBvYmplY3QsIGV4ZWN1dGluZyB0aGUgY2FsbGJhY2tcbiAgICAgKiBmb3IgZWFjaCBwcm9wZXJ0eS4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlXG4gICAgICogYXJndW1lbnRzOyAodmFsdWUsIGtleSwgb2JqZWN0KS4gQ2FsbGJhY2tzIG1heSBleGl0IGl0ZXJhdGlvbiBlYXJseSBieVxuICAgICAqIGV4cGxpY2l0bHkgcmV0dXJuaW5nIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAdHlwZSBGdW5jdGlvblxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmZvck93bih7ICcwJzogJ3plcm8nLCAnMSc6ICdvbmUnLCAnbGVuZ3RoJzogMiB9LCBmdW5jdGlvbihudW0sIGtleSkge1xuICAgICAqICAgY29uc29sZS5sb2coa2V5KTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBsb2dzICcwJywgJzEnLCBhbmQgJ2xlbmd0aCcgKHByb3BlcnR5IG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkIGFjcm9zcyBlbnZpcm9ubWVudHMpXG4gICAgICovXG4gICAgdmFyIGZvck93biA9IGZ1bmN0aW9uKGNvbGxlY3Rpb24sIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgaW5kZXgsIGl0ZXJhYmxlID0gY29sbGVjdGlvbiwgcmVzdWx0ID0gaXRlcmFibGU7XG4gICAgICBpZiAoIWl0ZXJhYmxlKSByZXR1cm4gcmVzdWx0O1xuICAgICAgaWYgKCFvYmplY3RUeXBlc1t0eXBlb2YgaXRlcmFibGVdKSByZXR1cm4gcmVzdWx0O1xuICAgICAgY2FsbGJhY2sgPSBjYWxsYmFjayAmJiB0eXBlb2YgdGhpc0FyZyA9PSAndW5kZWZpbmVkJyA/IGNhbGxiYWNrIDogYmFzZUNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcbiAgICAgICAgdmFyIG93bkluZGV4ID0gLTEsXG4gICAgICAgICAgICBvd25Qcm9wcyA9IG9iamVjdFR5cGVzW3R5cGVvZiBpdGVyYWJsZV0gJiYga2V5cyhpdGVyYWJsZSksXG4gICAgICAgICAgICBsZW5ndGggPSBvd25Qcm9wcyA/IG93blByb3BzLmxlbmd0aCA6IDA7XG5cbiAgICAgICAgd2hpbGUgKCsrb3duSW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICBpbmRleCA9IG93blByb3BzW293bkluZGV4XTtcbiAgICAgICAgICBpZiAoY2FsbGJhY2soaXRlcmFibGVbaW5kZXhdLCBpbmRleCwgY29sbGVjdGlvbikgPT09IGZhbHNlKSByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZm9yT3duYCBleGNlcHQgdGhhdCBpdCBpdGVyYXRlcyBvdmVyIGVsZW1lbnRzXG4gICAgICogb2YgYSBgY29sbGVjdGlvbmAgaW4gdGhlIG9wcG9zaXRlIG9yZGVyLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZm9yT3duUmlnaHQoeyAnMCc6ICd6ZXJvJywgJzEnOiAnb25lJywgJ2xlbmd0aCc6IDIgfSwgZnVuY3Rpb24obnVtLCBrZXkpIHtcbiAgICAgKiAgIGNvbnNvbGUubG9nKGtleSk7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gbG9ncyAnbGVuZ3RoJywgJzEnLCBhbmQgJzAnIGFzc3VtaW5nIGBfLmZvck93bmAgbG9ncyAnMCcsICcxJywgYW5kICdsZW5ndGgnXG4gICAgICovXG4gICAgZnVuY3Rpb24gZm9yT3duUmlnaHQob2JqZWN0LCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgdmFyIHByb3BzID0ga2V5cyhvYmplY3QpLFxuICAgICAgICAgIGxlbmd0aCA9IHByb3BzLmxlbmd0aDtcblxuICAgICAgY2FsbGJhY2sgPSBiYXNlQ3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIHZhciBrZXkgPSBwcm9wc1tsZW5ndGhdO1xuICAgICAgICBpZiAoY2FsbGJhY2sob2JqZWN0W2tleV0sIGtleSwgb2JqZWN0KSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc29ydGVkIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzIG9mIGFsbCBlbnVtZXJhYmxlIHByb3BlcnRpZXMsXG4gICAgICogb3duIGFuZCBpbmhlcml0ZWQsIG9mIGBvYmplY3RgIHRoYXQgaGF2ZSBmdW5jdGlvbiB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgbWV0aG9kc1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGluc3BlY3QuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGFuIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzIHRoYXQgaGF2ZSBmdW5jdGlvbiB2YWx1ZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZnVuY3Rpb25zKF8pO1xuICAgICAqIC8vID0+IFsnYWxsJywgJ2FueScsICdiaW5kJywgJ2JpbmRBbGwnLCAnY2xvbmUnLCAnY29tcGFjdCcsICdjb21wb3NlJywgLi4uXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZ1bmN0aW9ucyhvYmplY3QpIHtcbiAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgIGZvckluKG9iamVjdCwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICAgICAgICByZXN1bHQucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQuc29ydCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiB0aGUgc3BlY2lmaWVkIHByb3BlcnR5IG5hbWUgZXhpc3RzIGFzIGEgZGlyZWN0IHByb3BlcnR5IG9mIGBvYmplY3RgLFxuICAgICAqIGluc3RlYWQgb2YgYW4gaW5oZXJpdGVkIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYga2V5IGlzIGEgZGlyZWN0IHByb3BlcnR5LCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaGFzKHsgJ2EnOiAxLCAnYic6IDIsICdjJzogMyB9LCAnYicpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBoYXMob2JqZWN0LCBrZXkpIHtcbiAgICAgIHJldHVybiBvYmplY3QgPyBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSA6IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gb2JqZWN0IGNvbXBvc2VkIG9mIHRoZSBpbnZlcnRlZCBrZXlzIGFuZCB2YWx1ZXMgb2YgdGhlIGdpdmVuIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGludmVydC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjcmVhdGVkIGludmVydGVkIG9iamVjdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pbnZlcnQoeyAnZmlyc3QnOiAnZnJlZCcsICdzZWNvbmQnOiAnYmFybmV5JyB9KTtcbiAgICAgKiAvLyA9PiB7ICdmcmVkJzogJ2ZpcnN0JywgJ2Jhcm5leSc6ICdzZWNvbmQnIH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpbnZlcnQob2JqZWN0KSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBwcm9wcyA9IGtleXMob2JqZWN0KSxcbiAgICAgICAgICBsZW5ndGggPSBwcm9wcy5sZW5ndGgsXG4gICAgICAgICAgcmVzdWx0ID0ge307XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciBrZXkgPSBwcm9wc1tpbmRleF07XG4gICAgICAgIHJlc3VsdFtvYmplY3Rba2V5XV0gPSBrZXk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgYm9vbGVhbiB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGEgYm9vbGVhbiB2YWx1ZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzQm9vbGVhbihudWxsKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzQm9vbGVhbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlID09PSB0cnVlIHx8IHZhbHVlID09PSBmYWxzZSB8fFxuICAgICAgICB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcgJiYgdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gYm9vbENsYXNzIHx8IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgZGF0ZS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGEgZGF0ZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzRGF0ZShuZXcgRGF0ZSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzRGF0ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JyAmJiB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PSBkYXRlQ2xhc3MgfHwgZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBET00gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGEgRE9NIGVsZW1lbnQsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc0VsZW1lbnQoZG9jdW1lbnQuYm9keSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzRWxlbWVudCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlICYmIHZhbHVlLm5vZGVUeXBlID09PSAxIHx8IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGVtcHR5LiBBcnJheXMsIHN0cmluZ3MsIG9yIGBhcmd1bWVudHNgIG9iamVjdHMgd2l0aCBhXG4gICAgICogbGVuZ3RoIG9mIGAwYCBhbmQgb2JqZWN0cyB3aXRoIG5vIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMgYXJlIGNvbnNpZGVyZWRcbiAgICAgKiBcImVtcHR5XCIuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gdmFsdWUgVGhlIHZhbHVlIHRvIGluc3BlY3QuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGVtcHR5LCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNFbXB0eShbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLmlzRW1wdHkoe30pO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNFbXB0eSgnJyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzRW1wdHkodmFsdWUpIHtcbiAgICAgIHZhciByZXN1bHQgPSB0cnVlO1xuICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgICAgdmFyIGNsYXNzTmFtZSA9IHRvU3RyaW5nLmNhbGwodmFsdWUpLFxuICAgICAgICAgIGxlbmd0aCA9IHZhbHVlLmxlbmd0aDtcblxuICAgICAgaWYgKChjbGFzc05hbWUgPT0gYXJyYXlDbGFzcyB8fCBjbGFzc05hbWUgPT0gc3RyaW5nQ2xhc3MgfHwgY2xhc3NOYW1lID09IGFyZ3NDbGFzcyApIHx8XG4gICAgICAgICAgKGNsYXNzTmFtZSA9PSBvYmplY3RDbGFzcyAmJiB0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInICYmIGlzRnVuY3Rpb24odmFsdWUuc3BsaWNlKSkpIHtcbiAgICAgICAgcmV0dXJuICFsZW5ndGg7XG4gICAgICB9XG4gICAgICBmb3JPd24odmFsdWUsIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gKHJlc3VsdCA9IGZhbHNlKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBhIGRlZXAgY29tcGFyaXNvbiBiZXR3ZWVuIHR3byB2YWx1ZXMgdG8gZGV0ZXJtaW5lIGlmIHRoZXkgYXJlXG4gICAgICogZXF1aXZhbGVudCB0byBlYWNoIG90aGVyLiBJZiBhIGNhbGxiYWNrIGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgZXhlY3V0ZWRcbiAgICAgKiB0byBjb21wYXJlIHZhbHVlcy4gSWYgdGhlIGNhbGxiYWNrIHJldHVybnMgYHVuZGVmaW5lZGAgY29tcGFyaXNvbnMgd2lsbFxuICAgICAqIGJlIGhhbmRsZWQgYnkgdGhlIG1ldGhvZCBpbnN0ZWFkLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZFxuICAgICAqIGludm9rZWQgd2l0aCB0d28gYXJndW1lbnRzOyAoYSwgYikuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7Kn0gYSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cbiAgICAgKiBAcGFyYW0geyp9IGIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmluZyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ25hbWUnOiAnZnJlZCcgfTtcbiAgICAgKiB2YXIgY29weSA9IHsgJ25hbWUnOiAnZnJlZCcgfTtcbiAgICAgKlxuICAgICAqIG9iamVjdCA9PSBjb3B5O1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLmlzRXF1YWwob2JqZWN0LCBjb3B5KTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiB2YXIgd29yZHMgPSBbJ2hlbGxvJywgJ2dvb2RieWUnXTtcbiAgICAgKiB2YXIgb3RoZXJXb3JkcyA9IFsnaGknLCAnZ29vZGJ5ZSddO1xuICAgICAqXG4gICAgICogXy5pc0VxdWFsKHdvcmRzLCBvdGhlcldvcmRzLCBmdW5jdGlvbihhLCBiKSB7XG4gICAgICogICB2YXIgcmVHcmVldCA9IC9eKD86aGVsbG98aGkpJC9pLFxuICAgICAqICAgICAgIGFHcmVldCA9IF8uaXNTdHJpbmcoYSkgJiYgcmVHcmVldC50ZXN0KGEpLFxuICAgICAqICAgICAgIGJHcmVldCA9IF8uaXNTdHJpbmcoYikgJiYgcmVHcmVldC50ZXN0KGIpO1xuICAgICAqXG4gICAgICogICByZXR1cm4gKGFHcmVldCB8fCBiR3JlZXQpID8gKGFHcmVldCA9PSBiR3JlZXQpIDogdW5kZWZpbmVkO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0VxdWFsKGEsIGIsIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICByZXR1cm4gYmFzZUlzRXF1YWwoYSwgYiwgdHlwZW9mIGNhbGxiYWNrID09ICdmdW5jdGlvbicgJiYgYmFzZUNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAyKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMsIG9yIGNhbiBiZSBjb2VyY2VkIHRvLCBhIGZpbml0ZSBudW1iZXIuXG4gICAgICpcbiAgICAgKiBOb3RlOiBUaGlzIGlzIG5vdCB0aGUgc2FtZSBhcyBuYXRpdmUgYGlzRmluaXRlYCB3aGljaCB3aWxsIHJldHVybiB0cnVlIGZvclxuICAgICAqIGJvb2xlYW5zIGFuZCBlbXB0eSBzdHJpbmdzLiBTZWUgaHR0cDovL2VzNS5naXRodWIuaW8vI3gxNS4xLjIuNS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGZpbml0ZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzRmluaXRlKC0xMDEpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNGaW5pdGUoJzEwJyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc0Zpbml0ZSh0cnVlKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5pc0Zpbml0ZSgnJyk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uaXNGaW5pdGUoSW5maW5pdHkpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNGaW5pdGUodmFsdWUpIHtcbiAgICAgIHJldHVybiBuYXRpdmVJc0Zpbml0ZSh2YWx1ZSkgJiYgIW5hdGl2ZUlzTmFOKHBhcnNlRmxvYXQodmFsdWUpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaXMgYSBmdW5jdGlvbiwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzRnVuY3Rpb24oXyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ2Z1bmN0aW9uJztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGUgbGFuZ3VhZ2UgdHlwZSBvZiBPYmplY3QuXG4gICAgICogKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc09iamVjdCh7fSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNPYmplY3QoMSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAgICAgLy8gY2hlY2sgaWYgdGhlIHZhbHVlIGlzIHRoZSBFQ01BU2NyaXB0IGxhbmd1YWdlIHR5cGUgb2YgT2JqZWN0XG4gICAgICAvLyBodHRwOi8vZXM1LmdpdGh1Yi5pby8jeDhcbiAgICAgIC8vIGFuZCBhdm9pZCBhIFY4IGJ1Z1xuICAgICAgLy8gaHR0cDovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MjI5MVxuICAgICAgcmV0dXJuICEhKHZhbHVlICYmIG9iamVjdFR5cGVzW3R5cGVvZiB2YWx1ZV0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGBOYU5gLlxuICAgICAqXG4gICAgICogTm90ZTogVGhpcyBpcyBub3QgdGhlIHNhbWUgYXMgbmF0aXZlIGBpc05hTmAgd2hpY2ggd2lsbCByZXR1cm4gYHRydWVgIGZvclxuICAgICAqIGB1bmRlZmluZWRgIGFuZCBvdGhlciBub24tbnVtZXJpYyB2YWx1ZXMuIFNlZSBodHRwOi8vZXM1LmdpdGh1Yi5pby8jeDE1LjEuMi40LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaXMgYE5hTmAsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc05hTihOYU4pO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNOYU4obmV3IE51bWJlcihOYU4pKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBpc05hTih1bmRlZmluZWQpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNOYU4odW5kZWZpbmVkKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzTmFOKHZhbHVlKSB7XG4gICAgICAvLyBgTmFOYCBhcyBhIHByaW1pdGl2ZSBpcyB0aGUgb25seSB2YWx1ZSB0aGF0IGlzIG5vdCBlcXVhbCB0byBpdHNlbGZcbiAgICAgIC8vIChwZXJmb3JtIHRoZSBbW0NsYXNzXV0gY2hlY2sgZmlyc3QgdG8gYXZvaWQgZXJyb3JzIHdpdGggc29tZSBob3N0IG9iamVjdHMgaW4gSUUpXG4gICAgICByZXR1cm4gaXNOdW1iZXIodmFsdWUpICYmIHZhbHVlICE9ICt2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBgbnVsbGAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBpcyBgbnVsbGAsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc051bGwobnVsbCk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5pc051bGwodW5kZWZpbmVkKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzTnVsbCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlID09PSBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgbnVtYmVyLlxuICAgICAqXG4gICAgICogTm90ZTogYE5hTmAgaXMgY29uc2lkZXJlZCBhIG51bWJlci4gU2VlIGh0dHA6Ly9lczUuZ2l0aHViLmlvLyN4OC41LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaXMgYSBudW1iZXIsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc051bWJlcig4LjQgKiA1KTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNOdW1iZXIodmFsdWUpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgfHxcbiAgICAgICAgdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmIHRvU3RyaW5nLmNhbGwodmFsdWUpID09IG51bWJlckNsYXNzIHx8IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCBjcmVhdGVkIGJ5IHRoZSBgT2JqZWN0YCBjb25zdHJ1Y3Rvci5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBwbGFpbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gU2hhcGUoKSB7XG4gICAgICogICB0aGlzLnggPSAwO1xuICAgICAqICAgdGhpcy55ID0gMDtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBfLmlzUGxhaW5PYmplY3QobmV3IFNoYXBlKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5pc1BsYWluT2JqZWN0KFsxLCAyLCAzXSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uaXNQbGFpbk9iamVjdCh7ICd4JzogMCwgJ3knOiAwIH0pO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICB2YXIgaXNQbGFpbk9iamVjdCA9ICFnZXRQcm90b3R5cGVPZiA/IHNoaW1Jc1BsYWluT2JqZWN0IDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGlmICghKHZhbHVlICYmIHRvU3RyaW5nLmNhbGwodmFsdWUpID09IG9iamVjdENsYXNzKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICB2YXIgdmFsdWVPZiA9IHZhbHVlLnZhbHVlT2YsXG4gICAgICAgICAgb2JqUHJvdG8gPSBpc05hdGl2ZSh2YWx1ZU9mKSAmJiAob2JqUHJvdG8gPSBnZXRQcm90b3R5cGVPZih2YWx1ZU9mKSkgJiYgZ2V0UHJvdG90eXBlT2Yob2JqUHJvdG8pO1xuXG4gICAgICByZXR1cm4gb2JqUHJvdG9cbiAgICAgICAgPyAodmFsdWUgPT0gb2JqUHJvdG8gfHwgZ2V0UHJvdG90eXBlT2YodmFsdWUpID09IG9ialByb3RvKVxuICAgICAgICA6IHNoaW1Jc1BsYWluT2JqZWN0KHZhbHVlKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSByZWd1bGFyIGV4cHJlc3Npb24uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBpcyBhIHJlZ3VsYXIgZXhwcmVzc2lvbiwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzUmVnRXhwKC9mcmVkLyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzUmVnRXhwKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmIHRvU3RyaW5nLmNhbGwodmFsdWUpID09IHJlZ2V4cENsYXNzIHx8IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgc3RyaW5nLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaXMgYSBzdHJpbmcsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc1N0cmluZygnZnJlZCcpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc1N0cmluZyh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJyB8fFxuICAgICAgICB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcgJiYgdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3RyaW5nQ2xhc3MgfHwgZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYHVuZGVmaW5lZGAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBpcyBgdW5kZWZpbmVkYCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzVW5kZWZpbmVkKHZvaWQgMCk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzVW5kZWZpbmVkKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICd1bmRlZmluZWQnO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gb2JqZWN0IHdpdGggdGhlIHNhbWUga2V5cyBhcyBgb2JqZWN0YCBhbmQgdmFsdWVzIGdlbmVyYXRlZCBieVxuICAgICAqIHJ1bm5pbmcgZWFjaCBvd24gZW51bWVyYWJsZSBwcm9wZXJ0eSBvZiBgb2JqZWN0YCB0aHJvdWdoIHRoZSBjYWxsYmFjay5cbiAgICAgKiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzO1xuICAgICAqICh2YWx1ZSwga2V5LCBvYmplY3QpLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXG4gICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXG4gICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcbiAgICAgKiBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcbiAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggdmFsdWVzIG9mIHRoZSByZXN1bHRzIG9mIGVhY2ggYGNhbGxiYWNrYCBleGVjdXRpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ubWFwVmFsdWVzKHsgJ2EnOiAxLCAnYic6IDIsICdjJzogM30gLCBmdW5jdGlvbihudW0pIHsgcmV0dXJuIG51bSAqIDM7IH0pO1xuICAgICAqIC8vID0+IHsgJ2EnOiAzLCAnYic6IDYsICdjJzogOSB9XG4gICAgICpcbiAgICAgKiB2YXIgY2hhcmFjdGVycyA9IHtcbiAgICAgKiAgICdmcmVkJzogeyAnbmFtZSc6ICdmcmVkJywgJ2FnZSc6IDQwIH0sXG4gICAgICogICAncGViYmxlcyc6IHsgJ25hbWUnOiAncGViYmxlcycsICdhZ2UnOiAxIH1cbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5tYXBWYWx1ZXMoY2hhcmFjdGVycywgJ2FnZScpO1xuICAgICAqIC8vID0+IHsgJ2ZyZWQnOiA0MCwgJ3BlYmJsZXMnOiAxIH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtYXBWYWx1ZXMob2JqZWN0LCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xuXG4gICAgICBmb3JPd24ob2JqZWN0LCBmdW5jdGlvbih2YWx1ZSwga2V5LCBvYmplY3QpIHtcbiAgICAgICAgcmVzdWx0W2tleV0gPSBjYWxsYmFjayh2YWx1ZSwga2V5LCBvYmplY3QpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlY3Vyc2l2ZWx5IG1lcmdlcyBvd24gZW51bWVyYWJsZSBwcm9wZXJ0aWVzIG9mIHRoZSBzb3VyY2Ugb2JqZWN0KHMpLCB0aGF0XG4gICAgICogZG9uJ3QgcmVzb2x2ZSB0byBgdW5kZWZpbmVkYCBpbnRvIHRoZSBkZXN0aW5hdGlvbiBvYmplY3QuIFN1YnNlcXVlbnQgc291cmNlc1xuICAgICAqIHdpbGwgb3ZlcndyaXRlIHByb3BlcnR5IGFzc2lnbm1lbnRzIG9mIHByZXZpb3VzIHNvdXJjZXMuIElmIGEgY2FsbGJhY2sgaXNcbiAgICAgKiBwcm92aWRlZCBpdCB3aWxsIGJlIGV4ZWN1dGVkIHRvIHByb2R1Y2UgdGhlIG1lcmdlZCB2YWx1ZXMgb2YgdGhlIGRlc3RpbmF0aW9uXG4gICAgICogYW5kIHNvdXJjZSBwcm9wZXJ0aWVzLiBJZiB0aGUgY2FsbGJhY2sgcmV0dXJucyBgdW5kZWZpbmVkYCBtZXJnaW5nIHdpbGxcbiAgICAgKiBiZSBoYW5kbGVkIGJ5IHRoZSBtZXRob2QgaW5zdGVhZC4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmRcbiAgICAgKiBpbnZva2VkIHdpdGggdHdvIGFyZ3VtZW50czsgKG9iamVjdFZhbHVlLCBzb3VyY2VWYWx1ZSkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAgICAgKiBAcGFyYW0gey4uLk9iamVjdH0gW3NvdXJjZV0gVGhlIHNvdXJjZSBvYmplY3RzLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBtZXJnaW5nIHByb3BlcnRpZXMuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgbmFtZXMgPSB7XG4gICAgICogICAnY2hhcmFjdGVycyc6IFtcbiAgICAgKiAgICAgeyAnbmFtZSc6ICdiYXJuZXknIH0sXG4gICAgICogICAgIHsgJ25hbWUnOiAnZnJlZCcgfVxuICAgICAqICAgXVxuICAgICAqIH07XG4gICAgICpcbiAgICAgKiB2YXIgYWdlcyA9IHtcbiAgICAgKiAgICdjaGFyYWN0ZXJzJzogW1xuICAgICAqICAgICB7ICdhZ2UnOiAzNiB9LFxuICAgICAqICAgICB7ICdhZ2UnOiA0MCB9XG4gICAgICogICBdXG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIF8ubWVyZ2UobmFtZXMsIGFnZXMpO1xuICAgICAqIC8vID0+IHsgJ2NoYXJhY3RlcnMnOiBbeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYgfSwgeyAnbmFtZSc6ICdmcmVkJywgJ2FnZSc6IDQwIH1dIH1cbiAgICAgKlxuICAgICAqIHZhciBmb29kID0ge1xuICAgICAqICAgJ2ZydWl0cyc6IFsnYXBwbGUnXSxcbiAgICAgKiAgICd2ZWdldGFibGVzJzogWydiZWV0J11cbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogdmFyIG90aGVyRm9vZCA9IHtcbiAgICAgKiAgICdmcnVpdHMnOiBbJ2JhbmFuYSddLFxuICAgICAqICAgJ3ZlZ2V0YWJsZXMnOiBbJ2NhcnJvdCddXG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIF8ubWVyZ2UoZm9vZCwgb3RoZXJGb29kLCBmdW5jdGlvbihhLCBiKSB7XG4gICAgICogICByZXR1cm4gXy5pc0FycmF5KGEpID8gYS5jb25jYXQoYikgOiB1bmRlZmluZWQ7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4geyAnZnJ1aXRzJzogWydhcHBsZScsICdiYW5hbmEnXSwgJ3ZlZ2V0YWJsZXMnOiBbJ2JlZXQnLCAnY2Fycm90XSB9XG4gICAgICovXG4gICAgZnVuY3Rpb24gbWVyZ2Uob2JqZWN0KSB7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cyxcbiAgICAgICAgICBsZW5ndGggPSAyO1xuXG4gICAgICBpZiAoIWlzT2JqZWN0KG9iamVjdCkpIHtcbiAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgIH1cbiAgICAgIC8vIGFsbG93cyB3b3JraW5nIHdpdGggYF8ucmVkdWNlYCBhbmQgYF8ucmVkdWNlUmlnaHRgIHdpdGhvdXQgdXNpbmdcbiAgICAgIC8vIHRoZWlyIGBpbmRleGAgYW5kIGBjb2xsZWN0aW9uYCBhcmd1bWVudHNcbiAgICAgIGlmICh0eXBlb2YgYXJnc1syXSAhPSAnbnVtYmVyJykge1xuICAgICAgICBsZW5ndGggPSBhcmdzLmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIGlmIChsZW5ndGggPiAzICYmIHR5cGVvZiBhcmdzW2xlbmd0aCAtIDJdID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gYmFzZUNyZWF0ZUNhbGxiYWNrKGFyZ3NbLS1sZW5ndGggLSAxXSwgYXJnc1tsZW5ndGgtLV0sIDIpO1xuICAgICAgfSBlbHNlIGlmIChsZW5ndGggPiAyICYmIHR5cGVvZiBhcmdzW2xlbmd0aCAtIDFdID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBhcmdzWy0tbGVuZ3RoXTtcbiAgICAgIH1cbiAgICAgIHZhciBzb3VyY2VzID0gc2xpY2UoYXJndW1lbnRzLCAxLCBsZW5ndGgpLFxuICAgICAgICAgIGluZGV4ID0gLTEsXG4gICAgICAgICAgc3RhY2tBID0gZ2V0QXJyYXkoKSxcbiAgICAgICAgICBzdGFja0IgPSBnZXRBcnJheSgpO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICBiYXNlTWVyZ2Uob2JqZWN0LCBzb3VyY2VzW2luZGV4XSwgY2FsbGJhY2ssIHN0YWNrQSwgc3RhY2tCKTtcbiAgICAgIH1cbiAgICAgIHJlbGVhc2VBcnJheShzdGFja0EpO1xuICAgICAgcmVsZWFzZUFycmF5KHN0YWNrQik7XG4gICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzaGFsbG93IGNsb25lIG9mIGBvYmplY3RgIGV4Y2x1ZGluZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICogUHJvcGVydHkgbmFtZXMgbWF5IGJlIHNwZWNpZmllZCBhcyBpbmRpdmlkdWFsIGFyZ3VtZW50cyBvciBhcyBhcnJheXMgb2ZcbiAgICAgKiBwcm9wZXJ0eSBuYW1lcy4gSWYgYSBjYWxsYmFjayBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIGV4ZWN1dGVkIGZvciBlYWNoXG4gICAgICogcHJvcGVydHkgb2YgYG9iamVjdGAgb21pdHRpbmcgdGhlIHByb3BlcnRpZXMgdGhlIGNhbGxiYWNrIHJldHVybnMgdHJ1ZXlcbiAgICAgKiBmb3IuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM7XG4gICAgICogKHZhbHVlLCBrZXksIG9iamVjdCkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIHNvdXJjZSBvYmplY3QuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnwuLi5zdHJpbmd8c3RyaW5nW119IFtjYWxsYmFja10gVGhlIHByb3BlcnRpZXMgdG8gb21pdCBvciB0aGVcbiAgICAgKiAgZnVuY3Rpb24gY2FsbGVkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aG91dCB0aGUgb21pdHRlZCBwcm9wZXJ0aWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLm9taXQoeyAnbmFtZSc6ICdmcmVkJywgJ2FnZSc6IDQwIH0sICdhZ2UnKTtcbiAgICAgKiAvLyA9PiB7ICduYW1lJzogJ2ZyZWQnIH1cbiAgICAgKlxuICAgICAqIF8ub21pdCh7ICduYW1lJzogJ2ZyZWQnLCAnYWdlJzogNDAgfSwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgKiAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcic7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4geyAnbmFtZSc6ICdmcmVkJyB9XG4gICAgICovXG4gICAgZnVuY3Rpb24gb21pdChvYmplY3QsIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmFyIHByb3BzID0gW107XG4gICAgICAgIGZvckluKG9iamVjdCwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICAgIHByb3BzLnB1c2goa2V5KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHByb3BzID0gYmFzZURpZmZlcmVuY2UocHJvcHMsIGJhc2VGbGF0dGVuKGFyZ3VtZW50cywgdHJ1ZSwgZmFsc2UsIDEpKTtcblxuICAgICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICAgIGxlbmd0aCA9IHByb3BzLmxlbmd0aDtcblxuICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgIHZhciBrZXkgPSBwcm9wc1tpbmRleF07XG4gICAgICAgICAgcmVzdWx0W2tleV0gPSBvYmplY3Rba2V5XTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xuICAgICAgICBmb3JJbihvYmplY3QsIGZ1bmN0aW9uKHZhbHVlLCBrZXksIG9iamVjdCkge1xuICAgICAgICAgIGlmICghY2FsbGJhY2sodmFsdWUsIGtleSwgb2JqZWN0KSkge1xuICAgICAgICAgICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgdHdvIGRpbWVuc2lvbmFsIGFycmF5IG9mIGFuIG9iamVjdCdzIGtleS12YWx1ZSBwYWlycyxcbiAgICAgKiBpLmUuIGBbW2tleTEsIHZhbHVlMV0sIFtrZXkyLCB2YWx1ZTJdXWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpbnNwZWN0LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBuZXcgYXJyYXkgb2Yga2V5LXZhbHVlIHBhaXJzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnBhaXJzKHsgJ2Jhcm5leSc6IDM2LCAnZnJlZCc6IDQwIH0pO1xuICAgICAqIC8vID0+IFtbJ2Jhcm5leScsIDM2XSwgWydmcmVkJywgNDBdXSAocHJvcGVydHkgb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQgYWNyb3NzIGVudmlyb25tZW50cylcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwYWlycyhvYmplY3QpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIHByb3BzID0ga2V5cyhvYmplY3QpLFxuICAgICAgICAgIGxlbmd0aCA9IHByb3BzLmxlbmd0aCxcbiAgICAgICAgICByZXN1bHQgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIga2V5ID0gcHJvcHNbaW5kZXhdO1xuICAgICAgICByZXN1bHRbaW5kZXhdID0gW2tleSwgb2JqZWN0W2tleV1dO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc2hhbGxvdyBjbG9uZSBvZiBgb2JqZWN0YCBjb21wb3NlZCBvZiB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICogUHJvcGVydHkgbmFtZXMgbWF5IGJlIHNwZWNpZmllZCBhcyBpbmRpdmlkdWFsIGFyZ3VtZW50cyBvciBhcyBhcnJheXMgb2ZcbiAgICAgKiBwcm9wZXJ0eSBuYW1lcy4gSWYgYSBjYWxsYmFjayBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIGV4ZWN1dGVkIGZvciBlYWNoXG4gICAgICogcHJvcGVydHkgb2YgYG9iamVjdGAgcGlja2luZyB0aGUgcHJvcGVydGllcyB0aGUgY2FsbGJhY2sgcmV0dXJucyB0cnVleVxuICAgICAqIGZvci4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50cztcbiAgICAgKiAodmFsdWUsIGtleSwgb2JqZWN0KS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgc291cmNlIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufC4uLnN0cmluZ3xzdHJpbmdbXX0gW2NhbGxiYWNrXSBUaGUgZnVuY3Rpb24gY2FsbGVkIHBlclxuICAgICAqICBpdGVyYXRpb24gb3IgcHJvcGVydHkgbmFtZXMgdG8gcGljaywgc3BlY2lmaWVkIGFzIGluZGl2aWR1YWwgcHJvcGVydHlcbiAgICAgKiAgbmFtZXMgb3IgYXJyYXlzIG9mIHByb3BlcnR5IG5hbWVzLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYW4gb2JqZWN0IGNvbXBvc2VkIG9mIHRoZSBwaWNrZWQgcHJvcGVydGllcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5waWNrKHsgJ25hbWUnOiAnZnJlZCcsICdfdXNlcmlkJzogJ2ZyZWQxJyB9LCAnbmFtZScpO1xuICAgICAqIC8vID0+IHsgJ25hbWUnOiAnZnJlZCcgfVxuICAgICAqXG4gICAgICogXy5waWNrKHsgJ25hbWUnOiAnZnJlZCcsICdfdXNlcmlkJzogJ2ZyZWQxJyB9LCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICogICByZXR1cm4ga2V5LmNoYXJBdCgwKSAhPSAnXyc7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4geyAnbmFtZSc6ICdmcmVkJyB9XG4gICAgICovXG4gICAgZnVuY3Rpb24gcGljayhvYmplY3QsIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgICBwcm9wcyA9IGJhc2VGbGF0dGVuKGFyZ3VtZW50cywgdHJ1ZSwgZmFsc2UsIDEpLFxuICAgICAgICAgICAgbGVuZ3RoID0gaXNPYmplY3Qob2JqZWN0KSA/IHByb3BzLmxlbmd0aCA6IDA7XG5cbiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICB2YXIga2V5ID0gcHJvcHNbaW5kZXhdO1xuICAgICAgICAgIGlmIChrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgICByZXN1bHRba2V5XSA9IG9iamVjdFtrZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xuICAgICAgICBmb3JJbihvYmplY3QsIGZ1bmN0aW9uKHZhbHVlLCBrZXksIG9iamVjdCkge1xuICAgICAgICAgIGlmIChjYWxsYmFjayh2YWx1ZSwga2V5LCBvYmplY3QpKSB7XG4gICAgICAgICAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFuIGFsdGVybmF0aXZlIHRvIGBfLnJlZHVjZWAgdGhpcyBtZXRob2QgdHJhbnNmb3JtcyBgb2JqZWN0YCB0byBhIG5ld1xuICAgICAqIGBhY2N1bXVsYXRvcmAgb2JqZWN0IHdoaWNoIGlzIHRoZSByZXN1bHQgb2YgcnVubmluZyBlYWNoIG9mIGl0cyBvd25cbiAgICAgKiBlbnVtZXJhYmxlIHByb3BlcnRpZXMgdGhyb3VnaCBhIGNhbGxiYWNrLCB3aXRoIGVhY2ggY2FsbGJhY2sgZXhlY3V0aW9uXG4gICAgICogcG90ZW50aWFsbHkgbXV0YXRpbmcgdGhlIGBhY2N1bXVsYXRvcmAgb2JqZWN0LiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG9cbiAgICAgKiBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCBmb3VyIGFyZ3VtZW50czsgKGFjY3VtdWxhdG9yLCB2YWx1ZSwga2V5LCBvYmplY3QpLlxuICAgICAqIENhbGxiYWNrcyBtYXkgZXhpdCBpdGVyYXRpb24gZWFybHkgYnkgZXhwbGljaXRseSByZXR1cm5pbmcgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFthY2N1bXVsYXRvcl0gVGhlIGN1c3RvbSBhY2N1bXVsYXRvciB2YWx1ZS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgYWNjdW11bGF0ZWQgdmFsdWUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBzcXVhcmVzID0gXy50cmFuc2Zvcm0oWzEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwXSwgZnVuY3Rpb24ocmVzdWx0LCBudW0pIHtcbiAgICAgKiAgIG51bSAqPSBudW07XG4gICAgICogICBpZiAobnVtICUgMikge1xuICAgICAqICAgICByZXR1cm4gcmVzdWx0LnB1c2gobnVtKSA8IDM7XG4gICAgICogICB9XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gWzEsIDksIDI1XVxuICAgICAqXG4gICAgICogdmFyIG1hcHBlZCA9IF8udHJhbnNmb3JtKHsgJ2EnOiAxLCAnYic6IDIsICdjJzogMyB9LCBmdW5jdGlvbihyZXN1bHQsIG51bSwga2V5KSB7XG4gICAgICogICByZXN1bHRba2V5XSA9IG51bSAqIDM7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4geyAnYSc6IDMsICdiJzogNiwgJ2MnOiA5IH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0cmFuc2Zvcm0ob2JqZWN0LCBjYWxsYmFjaywgYWNjdW11bGF0b3IsIHRoaXNBcmcpIHtcbiAgICAgIHZhciBpc0FyciA9IGlzQXJyYXkob2JqZWN0KTtcbiAgICAgIGlmIChhY2N1bXVsYXRvciA9PSBudWxsKSB7XG4gICAgICAgIGlmIChpc0Fycikge1xuICAgICAgICAgIGFjY3VtdWxhdG9yID0gW107XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGN0b3IgPSBvYmplY3QgJiYgb2JqZWN0LmNvbnN0cnVjdG9yLFxuICAgICAgICAgICAgICBwcm90byA9IGN0b3IgJiYgY3Rvci5wcm90b3R5cGU7XG5cbiAgICAgICAgICBhY2N1bXVsYXRvciA9IGJhc2VDcmVhdGUocHJvdG8pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDQpO1xuICAgICAgICAoaXNBcnIgPyBmb3JFYWNoIDogZm9yT3duKShvYmplY3QsIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgb2JqZWN0KSB7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIG9iamVjdCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFjY3VtdWxhdG9yO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgY29tcG9zZWQgb2YgdGhlIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IHZhbHVlcyBvZiBgb2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGluc3BlY3QuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGFuIGFycmF5IG9mIHByb3BlcnR5IHZhbHVlcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy52YWx1ZXMoeyAnb25lJzogMSwgJ3R3byc6IDIsICd0aHJlZSc6IDMgfSk7XG4gICAgICogLy8gPT4gWzEsIDIsIDNdIChwcm9wZXJ0eSBvcmRlciBpcyBub3QgZ3VhcmFudGVlZCBhY3Jvc3MgZW52aXJvbm1lbnRzKVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHZhbHVlcyhvYmplY3QpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIHByb3BzID0ga2V5cyhvYmplY3QpLFxuICAgICAgICAgIGxlbmd0aCA9IHByb3BzLmxlbmd0aCxcbiAgICAgICAgICByZXN1bHQgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICByZXN1bHRbaW5kZXhdID0gb2JqZWN0W3Byb3BzW2luZGV4XV07XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiBlbGVtZW50cyBmcm9tIHRoZSBzcGVjaWZpZWQgaW5kZXhlcywgb3Iga2V5cywgb2YgdGhlXG4gICAgICogYGNvbGxlY3Rpb25gLiBJbmRleGVzIG1heSBiZSBzcGVjaWZpZWQgYXMgaW5kaXZpZHVhbCBhcmd1bWVudHMgb3IgYXMgYXJyYXlzXG4gICAgICogb2YgaW5kZXhlcy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHsuLi4obnVtYmVyfG51bWJlcltdfHN0cmluZ3xzdHJpbmdbXSl9IFtpbmRleF0gVGhlIGluZGV4ZXMgb2YgYGNvbGxlY3Rpb25gXG4gICAgICogICB0byByZXRyaWV2ZSwgc3BlY2lmaWVkIGFzIGluZGl2aWR1YWwgaW5kZXhlcyBvciBhcnJheXMgb2YgaW5kZXhlcy5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgYXJyYXkgb2YgZWxlbWVudHMgY29ycmVzcG9uZGluZyB0byB0aGVcbiAgICAgKiAgcHJvdmlkZWQgaW5kZXhlcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5hdChbJ2EnLCAnYicsICdjJywgJ2QnLCAnZSddLCBbMCwgMiwgNF0pO1xuICAgICAqIC8vID0+IFsnYScsICdjJywgJ2UnXVxuICAgICAqXG4gICAgICogXy5hdChbJ2ZyZWQnLCAnYmFybmV5JywgJ3BlYmJsZXMnXSwgMCwgMik7XG4gICAgICogLy8gPT4gWydmcmVkJywgJ3BlYmJsZXMnXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGF0KGNvbGxlY3Rpb24pIHtcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxuICAgICAgICAgIGluZGV4ID0gLTEsXG4gICAgICAgICAgcHJvcHMgPSBiYXNlRmxhdHRlbihhcmdzLCB0cnVlLCBmYWxzZSwgMSksXG4gICAgICAgICAgbGVuZ3RoID0gKGFyZ3NbMl0gJiYgYXJnc1syXVthcmdzWzFdXSA9PT0gY29sbGVjdGlvbikgPyAxIDogcHJvcHMubGVuZ3RoLFxuICAgICAgICAgIHJlc3VsdCA9IEFycmF5KGxlbmd0aCk7XG5cbiAgICAgIHdoaWxlKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0W2luZGV4XSA9IGNvbGxlY3Rpb25bcHJvcHNbaW5kZXhdXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGEgZ2l2ZW4gdmFsdWUgaXMgcHJlc2VudCBpbiBhIGNvbGxlY3Rpb24gdXNpbmcgc3RyaWN0IGVxdWFsaXR5XG4gICAgICogZm9yIGNvbXBhcmlzb25zLCBpLmUuIGA9PT1gLiBJZiBgZnJvbUluZGV4YCBpcyBuZWdhdGl2ZSwgaXQgaXMgdXNlZCBhcyB0aGVcbiAgICAgKiBvZmZzZXQgZnJvbSB0aGUgZW5kIG9mIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIGluY2x1ZGVcbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7Kn0gdGFyZ2V0IFRoZSB2YWx1ZSB0byBjaGVjayBmb3IuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtmcm9tSW5kZXg9MF0gVGhlIGluZGV4IHRvIHNlYXJjaCBmcm9tLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHRhcmdldGAgZWxlbWVudCBpcyBmb3VuZCwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmNvbnRhaW5zKFsxLCAyLCAzXSwgMSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogXy5jb250YWlucyhbMSwgMiwgM10sIDEsIDIpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLmNvbnRhaW5zKHsgJ25hbWUnOiAnZnJlZCcsICdhZ2UnOiA0MCB9LCAnZnJlZCcpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uY29udGFpbnMoJ3BlYmJsZXMnLCAnZWInKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29udGFpbnMoY29sbGVjdGlvbiwgdGFyZ2V0LCBmcm9tSW5kZXgpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGluZGV4T2YgPSBnZXRJbmRleE9mKCksXG4gICAgICAgICAgbGVuZ3RoID0gY29sbGVjdGlvbiA/IGNvbGxlY3Rpb24ubGVuZ3RoIDogMCxcbiAgICAgICAgICByZXN1bHQgPSBmYWxzZTtcblxuICAgICAgZnJvbUluZGV4ID0gKGZyb21JbmRleCA8IDAgPyBuYXRpdmVNYXgoMCwgbGVuZ3RoICsgZnJvbUluZGV4KSA6IGZyb21JbmRleCkgfHwgMDtcbiAgICAgIGlmIChpc0FycmF5KGNvbGxlY3Rpb24pKSB7XG4gICAgICAgIHJlc3VsdCA9IGluZGV4T2YoY29sbGVjdGlvbiwgdGFyZ2V0LCBmcm9tSW5kZXgpID4gLTE7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBsZW5ndGggPT0gJ251bWJlcicpIHtcbiAgICAgICAgcmVzdWx0ID0gKGlzU3RyaW5nKGNvbGxlY3Rpb24pID8gY29sbGVjdGlvbi5pbmRleE9mKHRhcmdldCwgZnJvbUluZGV4KSA6IGluZGV4T2YoY29sbGVjdGlvbiwgdGFyZ2V0LCBmcm9tSW5kZXgpKSA+IC0xO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yT3duKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgaWYgKCsraW5kZXggPj0gZnJvbUluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gIShyZXN1bHQgPSB2YWx1ZSA9PT0gdGFyZ2V0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIG9iamVjdCBjb21wb3NlZCBvZiBrZXlzIGdlbmVyYXRlZCBmcm9tIHRoZSByZXN1bHRzIG9mIHJ1bm5pbmdcbiAgICAgKiBlYWNoIGVsZW1lbnQgb2YgYGNvbGxlY3Rpb25gIHRocm91Z2ggdGhlIGNhbGxiYWNrLiBUaGUgY29ycmVzcG9uZGluZyB2YWx1ZVxuICAgICAqIG9mIGVhY2gga2V5IGlzIHRoZSBudW1iZXIgb2YgdGltZXMgdGhlIGtleSB3YXMgcmV0dXJuZWQgYnkgdGhlIGNhbGxiYWNrLlxuICAgICAqIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM7XG4gICAgICogKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXG4gICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXG4gICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcbiAgICAgKiBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXG4gICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXG4gICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY29tcG9zZWQgYWdncmVnYXRlIG9iamVjdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5jb3VudEJ5KFs0LjMsIDYuMSwgNi40XSwgZnVuY3Rpb24obnVtKSB7IHJldHVybiBNYXRoLmZsb29yKG51bSk7IH0pO1xuICAgICAqIC8vID0+IHsgJzQnOiAxLCAnNic6IDIgfVxuICAgICAqXG4gICAgICogXy5jb3VudEJ5KFs0LjMsIDYuMSwgNi40XSwgZnVuY3Rpb24obnVtKSB7IHJldHVybiB0aGlzLmZsb29yKG51bSk7IH0sIE1hdGgpO1xuICAgICAqIC8vID0+IHsgJzQnOiAxLCAnNic6IDIgfVxuICAgICAqXG4gICAgICogXy5jb3VudEJ5KFsnb25lJywgJ3R3bycsICd0aHJlZSddLCAnbGVuZ3RoJyk7XG4gICAgICogLy8gPT4geyAnMyc6IDIsICc1JzogMSB9XG4gICAgICovXG4gICAgdmFyIGNvdW50QnkgPSBjcmVhdGVBZ2dyZWdhdG9yKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkge1xuICAgICAgKGhhc093blByb3BlcnR5LmNhbGwocmVzdWx0LCBrZXkpID8gcmVzdWx0W2tleV0rKyA6IHJlc3VsdFtrZXldID0gMSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIGdpdmVuIGNhbGxiYWNrIHJldHVybnMgdHJ1ZXkgdmFsdWUgZm9yICoqYWxsKiogZWxlbWVudHMgb2ZcbiAgICAgKiBhIGNvbGxlY3Rpb24uIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZVxuICAgICAqIGFyZ3VtZW50czsgKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXG4gICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXG4gICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcbiAgICAgKiBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgYWxsXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxuICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbGwgZWxlbWVudHMgcGFzc2VkIHRoZSBjYWxsYmFjayBjaGVjayxcbiAgICAgKiAgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmV2ZXJ5KFt0cnVlLCAxLCBudWxsLCAneWVzJ10pO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcbiAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sXG4gICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZXZlcnkoY2hhcmFjdGVycywgJ2FnZScpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy53aGVyZVwiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZXZlcnkoY2hhcmFjdGVycywgeyAnYWdlJzogMzYgfSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBldmVyeShjb2xsZWN0aW9uLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgdmFyIHJlc3VsdCA9IHRydWU7XG4gICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XG5cbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGNvbGxlY3Rpb24gPyBjb2xsZWN0aW9uLmxlbmd0aCA6IDA7XG5cbiAgICAgIGlmICh0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInKSB7XG4gICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKCEocmVzdWx0ID0gISFjYWxsYmFjayhjb2xsZWN0aW9uW2luZGV4XSwgaW5kZXgsIGNvbGxlY3Rpb24pKSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3JPd24oY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuIChyZXN1bHQgPSAhIWNhbGxiYWNrKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBlbGVtZW50cyBvZiBhIGNvbGxlY3Rpb24sIHJldHVybmluZyBhbiBhcnJheSBvZiBhbGwgZWxlbWVudHNcbiAgICAgKiB0aGUgY2FsbGJhY2sgcmV0dXJucyB0cnVleSBmb3IuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kXG4gICAgICogaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czsgKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXG4gICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXG4gICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcbiAgICAgKiBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgc2VsZWN0XG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxuICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIG5ldyBhcnJheSBvZiBlbGVtZW50cyB0aGF0IHBhc3NlZCB0aGUgY2FsbGJhY2sgY2hlY2suXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBldmVucyA9IF8uZmlsdGVyKFsxLCAyLCAzLCA0LCA1LCA2XSwgZnVuY3Rpb24obnVtKSB7IHJldHVybiBudW0gJSAyID09IDA7IH0pO1xuICAgICAqIC8vID0+IFsyLCA0LCA2XVxuICAgICAqXG4gICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXG4gICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiwgJ2Jsb2NrZWQnOiBmYWxzZSB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAnYWdlJzogNDAsICdibG9ja2VkJzogdHJ1ZSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZmlsdGVyKGNoYXJhY3RlcnMsICdibG9ja2VkJyk7XG4gICAgICogLy8gPT4gW3sgJ25hbWUnOiAnZnJlZCcsICdhZ2UnOiA0MCwgJ2Jsb2NrZWQnOiB0cnVlIH1dXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ud2hlcmVcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmZpbHRlcihjaGFyYWN0ZXJzLCB7ICdhZ2UnOiAzNiB9KTtcbiAgICAgKiAvLyA9PiBbeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYsICdibG9ja2VkJzogZmFsc2UgfV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmaWx0ZXIoY29sbGVjdGlvbiwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcblxuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gY29sbGVjdGlvbiA/IGNvbGxlY3Rpb24ubGVuZ3RoIDogMDtcblxuICAgICAgaWYgKHR5cGVvZiBsZW5ndGggPT0gJ251bWJlcicpIHtcbiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICB2YXIgdmFsdWUgPSBjb2xsZWN0aW9uW2luZGV4XTtcbiAgICAgICAgICBpZiAoY2FsbGJhY2sodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSkge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yT3duKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgICAgIGlmIChjYWxsYmFjayh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBlbGVtZW50cyBvZiBhIGNvbGxlY3Rpb24sIHJldHVybmluZyB0aGUgZmlyc3QgZWxlbWVudCB0aGF0XG4gICAgICogdGhlIGNhbGxiYWNrIHJldHVybnMgdHJ1ZXkgZm9yLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZFxuICAgICAqIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM7ICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xuICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXG4gICAgICogZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIGRldGVjdCwgZmluZFdoZXJlXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxuICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBmb3VuZCBlbGVtZW50LCBlbHNlIGB1bmRlZmluZWRgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcbiAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgICdhZ2UnOiAzNiwgJ2Jsb2NrZWQnOiBmYWxzZSB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAgJ2FnZSc6IDQwLCAnYmxvY2tlZCc6IHRydWUgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAncGViYmxlcycsICdhZ2UnOiAxLCAgJ2Jsb2NrZWQnOiBmYWxzZSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8uZmluZChjaGFyYWN0ZXJzLCBmdW5jdGlvbihjaHIpIHtcbiAgICAgKiAgIHJldHVybiBjaHIuYWdlIDwgNDA7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4geyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYsICdibG9ja2VkJzogZmFsc2UgfVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLndoZXJlXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5maW5kKGNoYXJhY3RlcnMsIHsgJ2FnZSc6IDEgfSk7XG4gICAgICogLy8gPT4gIHsgJ25hbWUnOiAncGViYmxlcycsICdhZ2UnOiAxLCAnYmxvY2tlZCc6IGZhbHNlIH1cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZmluZChjaGFyYWN0ZXJzLCAnYmxvY2tlZCcpO1xuICAgICAqIC8vID0+IHsgJ25hbWUnOiAnZnJlZCcsICdhZ2UnOiA0MCwgJ2Jsb2NrZWQnOiB0cnVlIH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmaW5kKGNvbGxlY3Rpb24sIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XG5cbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGNvbGxlY3Rpb24gPyBjb2xsZWN0aW9uLmxlbmd0aCA6IDA7XG5cbiAgICAgIGlmICh0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInKSB7XG4gICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgdmFyIHZhbHVlID0gY29sbGVjdGlvbltpbmRleF07XG4gICAgICAgICAgaWYgKGNhbGxiYWNrKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIGZvck93bihjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgICBpZiAoY2FsbGJhY2sodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmZpbmRgIGV4Y2VwdCB0aGF0IGl0IGl0ZXJhdGVzIG92ZXIgZWxlbWVudHNcbiAgICAgKiBvZiBhIGBjb2xsZWN0aW9uYCBmcm9tIHJpZ2h0IHRvIGxlZnQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXG4gICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXG4gICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGZvdW5kIGVsZW1lbnQsIGVsc2UgYHVuZGVmaW5lZGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZmluZExhc3QoWzEsIDIsIDMsIDRdLCBmdW5jdGlvbihudW0pIHtcbiAgICAgKiAgIHJldHVybiBudW0gJSAyID09IDE7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gM1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZpbmRMYXN0KGNvbGxlY3Rpb24sIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgcmVzdWx0O1xuICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xuICAgICAgZm9yRWFjaFJpZ2h0KGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgICBpZiAoY2FsbGJhY2sodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSkge1xuICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIG92ZXIgZWxlbWVudHMgb2YgYSBjb2xsZWN0aW9uLCBleGVjdXRpbmcgdGhlIGNhbGxiYWNrIGZvciBlYWNoXG4gICAgICogZWxlbWVudC4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50cztcbiAgICAgKiAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuIENhbGxiYWNrcyBtYXkgZXhpdCBpdGVyYXRpb24gZWFybHkgYnlcbiAgICAgKiBleHBsaWNpdGx5IHJldHVybmluZyBgZmFsc2VgLlxuICAgICAqXG4gICAgICogTm90ZTogQXMgd2l0aCBvdGhlciBcIkNvbGxlY3Rpb25zXCIgbWV0aG9kcywgb2JqZWN0cyB3aXRoIGEgYGxlbmd0aGAgcHJvcGVydHlcbiAgICAgKiBhcmUgaXRlcmF0ZWQgbGlrZSBhcnJheXMuIFRvIGF2b2lkIHRoaXMgYmVoYXZpb3IgYF8uZm9ySW5gIG9yIGBfLmZvck93bmBcbiAgICAgKiBtYXkgYmUgdXNlZCBmb3Igb2JqZWN0IGl0ZXJhdGlvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBlYWNoXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl8T2JqZWN0fHN0cmluZ30gUmV0dXJucyBgY29sbGVjdGlvbmAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8oWzEsIDIsIDNdKS5mb3JFYWNoKGZ1bmN0aW9uKG51bSkgeyBjb25zb2xlLmxvZyhudW0pOyB9KS5qb2luKCcsJyk7XG4gICAgICogLy8gPT4gbG9ncyBlYWNoIG51bWJlciBhbmQgcmV0dXJucyAnMSwyLDMnXG4gICAgICpcbiAgICAgKiBfLmZvckVhY2goeyAnb25lJzogMSwgJ3R3byc6IDIsICd0aHJlZSc6IDMgfSwgZnVuY3Rpb24obnVtKSB7IGNvbnNvbGUubG9nKG51bSk7IH0pO1xuICAgICAqIC8vID0+IGxvZ3MgZWFjaCBudW1iZXIgYW5kIHJldHVybnMgdGhlIG9iamVjdCAocHJvcGVydHkgb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQgYWNyb3NzIGVudmlyb25tZW50cylcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmb3JFYWNoKGNvbGxlY3Rpb24sIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBjb2xsZWN0aW9uID8gY29sbGVjdGlvbi5sZW5ndGggOiAwO1xuXG4gICAgICBjYWxsYmFjayA9IGNhbGxiYWNrICYmIHR5cGVvZiB0aGlzQXJnID09ICd1bmRlZmluZWQnID8gY2FsbGJhY2sgOiBiYXNlQ3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xuICAgICAgaWYgKHR5cGVvZiBsZW5ndGggPT0gJ251bWJlcicpIHtcbiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICBpZiAoY2FsbGJhY2soY29sbGVjdGlvbltpbmRleF0sIGluZGV4LCBjb2xsZWN0aW9uKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yT3duKGNvbGxlY3Rpb24sIGNhbGxiYWNrKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb2xsZWN0aW9uO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZm9yRWFjaGAgZXhjZXB0IHRoYXQgaXQgaXRlcmF0ZXMgb3ZlciBlbGVtZW50c1xuICAgICAqIG9mIGEgYGNvbGxlY3Rpb25gIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBlYWNoUmlnaHRcbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheXxPYmplY3R8c3RyaW5nfSBSZXR1cm5zIGBjb2xsZWN0aW9uYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXyhbMSwgMiwgM10pLmZvckVhY2hSaWdodChmdW5jdGlvbihudW0pIHsgY29uc29sZS5sb2cobnVtKTsgfSkuam9pbignLCcpO1xuICAgICAqIC8vID0+IGxvZ3MgZWFjaCBudW1iZXIgZnJvbSByaWdodCB0byBsZWZ0IGFuZCByZXR1cm5zICczLDIsMSdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmb3JFYWNoUmlnaHQoY29sbGVjdGlvbiwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIHZhciBsZW5ndGggPSBjb2xsZWN0aW9uID8gY29sbGVjdGlvbi5sZW5ndGggOiAwO1xuICAgICAgY2FsbGJhY2sgPSBjYWxsYmFjayAmJiB0eXBlb2YgdGhpc0FyZyA9PSAndW5kZWZpbmVkJyA/IGNhbGxiYWNrIDogYmFzZUNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcbiAgICAgIGlmICh0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInKSB7XG4gICAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICAgIGlmIChjYWxsYmFjayhjb2xsZWN0aW9uW2xlbmd0aF0sIGxlbmd0aCwgY29sbGVjdGlvbikgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBwcm9wcyA9IGtleXMoY29sbGVjdGlvbik7XG4gICAgICAgIGxlbmd0aCA9IHByb3BzLmxlbmd0aDtcbiAgICAgICAgZm9yT3duKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgICBrZXkgPSBwcm9wcyA/IHByb3BzWy0tbGVuZ3RoXSA6IC0tbGVuZ3RoO1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjayhjb2xsZWN0aW9uW2tleV0sIGtleSwgY29sbGVjdGlvbik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNvbGxlY3Rpb247XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBvYmplY3QgY29tcG9zZWQgb2Yga2V5cyBnZW5lcmF0ZWQgZnJvbSB0aGUgcmVzdWx0cyBvZiBydW5uaW5nXG4gICAgICogZWFjaCBlbGVtZW50IG9mIGEgY29sbGVjdGlvbiB0aHJvdWdoIHRoZSBjYWxsYmFjay4gVGhlIGNvcnJlc3BvbmRpbmcgdmFsdWVcbiAgICAgKiBvZiBlYWNoIGtleSBpcyBhbiBhcnJheSBvZiB0aGUgZWxlbWVudHMgcmVzcG9uc2libGUgZm9yIGdlbmVyYXRpbmcgdGhlIGtleS5cbiAgICAgKiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzO1xuICAgICAqICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xuICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXG4gICAgICogZWxzZSBgZmFsc2VgXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXG4gICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXG4gICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY29tcG9zZWQgYWdncmVnYXRlIG9iamVjdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5ncm91cEJ5KFs0LjIsIDYuMSwgNi40XSwgZnVuY3Rpb24obnVtKSB7IHJldHVybiBNYXRoLmZsb29yKG51bSk7IH0pO1xuICAgICAqIC8vID0+IHsgJzQnOiBbNC4yXSwgJzYnOiBbNi4xLCA2LjRdIH1cbiAgICAgKlxuICAgICAqIF8uZ3JvdXBCeShbNC4yLCA2LjEsIDYuNF0sIGZ1bmN0aW9uKG51bSkgeyByZXR1cm4gdGhpcy5mbG9vcihudW0pOyB9LCBNYXRoKTtcbiAgICAgKiAvLyA9PiB7ICc0JzogWzQuMl0sICc2JzogWzYuMSwgNi40XSB9XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmdyb3VwQnkoWydvbmUnLCAndHdvJywgJ3RocmVlJ10sICdsZW5ndGgnKTtcbiAgICAgKiAvLyA9PiB7ICczJzogWydvbmUnLCAndHdvJ10sICc1JzogWyd0aHJlZSddIH1cbiAgICAgKi9cbiAgICB2YXIgZ3JvdXBCeSA9IGNyZWF0ZUFnZ3JlZ2F0b3IoZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwga2V5KSB7XG4gICAgICAoaGFzT3duUHJvcGVydHkuY2FsbChyZXN1bHQsIGtleSkgPyByZXN1bHRba2V5XSA6IHJlc3VsdFtrZXldID0gW10pLnB1c2godmFsdWUpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBvYmplY3QgY29tcG9zZWQgb2Yga2V5cyBnZW5lcmF0ZWQgZnJvbSB0aGUgcmVzdWx0cyBvZiBydW5uaW5nXG4gICAgICogZWFjaCBlbGVtZW50IG9mIHRoZSBjb2xsZWN0aW9uIHRocm91Z2ggdGhlIGdpdmVuIGNhbGxiYWNrLiBUaGUgY29ycmVzcG9uZGluZ1xuICAgICAqIHZhbHVlIG9mIGVhY2gga2V5IGlzIHRoZSBsYXN0IGVsZW1lbnQgcmVzcG9uc2libGUgZm9yIGdlbmVyYXRpbmcgdGhlIGtleS5cbiAgICAgKiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzO1xuICAgICAqICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xuICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXG4gICAgICogZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxuICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGNvbXBvc2VkIGFnZ3JlZ2F0ZSBvYmplY3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBrZXlzID0gW1xuICAgICAqICAgeyAnZGlyJzogJ2xlZnQnLCAnY29kZSc6IDk3IH0sXG4gICAgICogICB7ICdkaXInOiAncmlnaHQnLCAnY29kZSc6IDEwMCB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8uaW5kZXhCeShrZXlzLCAnZGlyJyk7XG4gICAgICogLy8gPT4geyAnbGVmdCc6IHsgJ2Rpcic6ICdsZWZ0JywgJ2NvZGUnOiA5NyB9LCAncmlnaHQnOiB7ICdkaXInOiAncmlnaHQnLCAnY29kZSc6IDEwMCB9IH1cbiAgICAgKlxuICAgICAqIF8uaW5kZXhCeShrZXlzLCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoa2V5LmNvZGUpOyB9KTtcbiAgICAgKiAvLyA9PiB7ICdhJzogeyAnZGlyJzogJ2xlZnQnLCAnY29kZSc6IDk3IH0sICdkJzogeyAnZGlyJzogJ3JpZ2h0JywgJ2NvZGUnOiAxMDAgfSB9XG4gICAgICpcbiAgICAgKiBfLmluZGV4QnkoY2hhcmFjdGVycywgZnVuY3Rpb24oa2V5KSB7IHRoaXMuZnJvbUNoYXJDb2RlKGtleS5jb2RlKTsgfSwgU3RyaW5nKTtcbiAgICAgKiAvLyA9PiB7ICdhJzogeyAnZGlyJzogJ2xlZnQnLCAnY29kZSc6IDk3IH0sICdkJzogeyAnZGlyJzogJ3JpZ2h0JywgJ2NvZGUnOiAxMDAgfSB9XG4gICAgICovXG4gICAgdmFyIGluZGV4QnkgPSBjcmVhdGVBZ2dyZWdhdG9yKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkge1xuICAgICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEludm9rZXMgdGhlIG1ldGhvZCBuYW1lZCBieSBgbWV0aG9kTmFtZWAgb24gZWFjaCBlbGVtZW50IGluIHRoZSBgY29sbGVjdGlvbmBcbiAgICAgKiByZXR1cm5pbmcgYW4gYXJyYXkgb2YgdGhlIHJlc3VsdHMgb2YgZWFjaCBpbnZva2VkIG1ldGhvZC4gQWRkaXRpb25hbCBhcmd1bWVudHNcbiAgICAgKiB3aWxsIGJlIHByb3ZpZGVkIHRvIGVhY2ggaW52b2tlZCBtZXRob2QuIElmIGBtZXRob2ROYW1lYCBpcyBhIGZ1bmN0aW9uIGl0XG4gICAgICogd2lsbCBiZSBpbnZva2VkIGZvciwgYW5kIGB0aGlzYCBib3VuZCB0bywgZWFjaCBlbGVtZW50IGluIHRoZSBgY29sbGVjdGlvbmAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258c3RyaW5nfSBtZXRob2ROYW1lIFRoZSBuYW1lIG9mIHRoZSBtZXRob2QgdG8gaW52b2tlIG9yXG4gICAgICogIHRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsuLi4qfSBbYXJnXSBBcmd1bWVudHMgdG8gaW52b2tlIHRoZSBtZXRob2Qgd2l0aC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgYXJyYXkgb2YgdGhlIHJlc3VsdHMgb2YgZWFjaCBpbnZva2VkIG1ldGhvZC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pbnZva2UoW1s1LCAxLCA3XSwgWzMsIDIsIDFdXSwgJ3NvcnQnKTtcbiAgICAgKiAvLyA9PiBbWzEsIDUsIDddLCBbMSwgMiwgM11dXG4gICAgICpcbiAgICAgKiBfLmludm9rZShbMTIzLCA0NTZdLCBTdHJpbmcucHJvdG90eXBlLnNwbGl0LCAnJyk7XG4gICAgICogLy8gPT4gW1snMScsICcyJywgJzMnXSwgWyc0JywgJzUnLCAnNiddXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGludm9rZShjb2xsZWN0aW9uLCBtZXRob2ROYW1lKSB7XG4gICAgICB2YXIgYXJncyA9IHNsaWNlKGFyZ3VtZW50cywgMiksXG4gICAgICAgICAgaW5kZXggPSAtMSxcbiAgICAgICAgICBpc0Z1bmMgPSB0eXBlb2YgbWV0aG9kTmFtZSA9PSAnZnVuY3Rpb24nLFxuICAgICAgICAgIGxlbmd0aCA9IGNvbGxlY3Rpb24gPyBjb2xsZWN0aW9uLmxlbmd0aCA6IDAsXG4gICAgICAgICAgcmVzdWx0ID0gQXJyYXkodHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJyA/IGxlbmd0aCA6IDApO1xuXG4gICAgICBmb3JFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJlc3VsdFsrK2luZGV4XSA9IChpc0Z1bmMgPyBtZXRob2ROYW1lIDogdmFsdWVbbWV0aG9kTmFtZV0pLmFwcGx5KHZhbHVlLCBhcmdzKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHZhbHVlcyBieSBydW5uaW5nIGVhY2ggZWxlbWVudCBpbiB0aGUgY29sbGVjdGlvblxuICAgICAqIHRocm91Z2ggdGhlIGNhbGxiYWNrLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGhcbiAgICAgKiB0aHJlZSBhcmd1bWVudHM7ICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xuICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXG4gICAgICogZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIGNvbGxlY3RcbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXG4gICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXG4gICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIHRoZSByZXN1bHRzIG9mIGVhY2ggYGNhbGxiYWNrYCBleGVjdXRpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ubWFwKFsxLCAyLCAzXSwgZnVuY3Rpb24obnVtKSB7IHJldHVybiBudW0gKiAzOyB9KTtcbiAgICAgKiAvLyA9PiBbMywgNiwgOV1cbiAgICAgKlxuICAgICAqIF8ubWFwKHsgJ29uZSc6IDEsICd0d28nOiAyLCAndGhyZWUnOiAzIH0sIGZ1bmN0aW9uKG51bSkgeyByZXR1cm4gbnVtICogMzsgfSk7XG4gICAgICogLy8gPT4gWzMsIDYsIDldIChwcm9wZXJ0eSBvcmRlciBpcyBub3QgZ3VhcmFudGVlZCBhY3Jvc3MgZW52aXJvbm1lbnRzKVxuICAgICAqXG4gICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXG4gICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAnYWdlJzogNDAgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLm1hcChjaGFyYWN0ZXJzLCAnbmFtZScpO1xuICAgICAqIC8vID0+IFsnYmFybmV5JywgJ2ZyZWQnXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1hcChjb2xsZWN0aW9uLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gY29sbGVjdGlvbiA/IGNvbGxlY3Rpb24ubGVuZ3RoIDogMDtcblxuICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xuICAgICAgaWYgKHR5cGVvZiBsZW5ndGggPT0gJ251bWJlcicpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IEFycmF5KGxlbmd0aCk7XG4gICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgcmVzdWx0W2luZGV4XSA9IGNhbGxiYWNrKGNvbGxlY3Rpb25baW5kZXhdLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCA9IFtdO1xuICAgICAgICBmb3JPd24oY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGtleSwgY29sbGVjdGlvbikge1xuICAgICAgICAgIHJlc3VsdFsrK2luZGV4XSA9IGNhbGxiYWNrKHZhbHVlLCBrZXksIGNvbGxlY3Rpb24pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBtYXhpbXVtIHZhbHVlIG9mIGEgY29sbGVjdGlvbi4gSWYgdGhlIGNvbGxlY3Rpb24gaXMgZW1wdHkgb3JcbiAgICAgKiBmYWxzZXkgYC1JbmZpbml0eWAgaXMgcmV0dXJuZWQuIElmIGEgY2FsbGJhY2sgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSBleGVjdXRlZFxuICAgICAqIGZvciBlYWNoIHZhbHVlIGluIHRoZSBjb2xsZWN0aW9uIHRvIGdlbmVyYXRlIHRoZSBjcml0ZXJpb24gYnkgd2hpY2ggdGhlIHZhbHVlXG4gICAgICogaXMgcmFua2VkLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWVcbiAgICAgKiBhcmd1bWVudHM7ICh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXG4gICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXG4gICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcbiAgICAgKiBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXG4gICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXG4gICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIG1heGltdW0gdmFsdWUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ubWF4KFs0LCAyLCA4LCA2XSk7XG4gICAgICogLy8gPT4gOFxuICAgICAqXG4gICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXG4gICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAnYWdlJzogNDAgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiBfLm1heChjaGFyYWN0ZXJzLCBmdW5jdGlvbihjaHIpIHsgcmV0dXJuIGNoci5hZ2U7IH0pO1xuICAgICAqIC8vID0+IHsgJ25hbWUnOiAnZnJlZCcsICdhZ2UnOiA0MCB9O1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5tYXgoY2hhcmFjdGVycywgJ2FnZScpO1xuICAgICAqIC8vID0+IHsgJ25hbWUnOiAnZnJlZCcsICdhZ2UnOiA0MCB9O1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1heChjb2xsZWN0aW9uLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgdmFyIGNvbXB1dGVkID0gLUluZmluaXR5LFxuICAgICAgICAgIHJlc3VsdCA9IGNvbXB1dGVkO1xuXG4gICAgICAvLyBhbGxvd3Mgd29ya2luZyB3aXRoIGZ1bmN0aW9ucyBsaWtlIGBfLm1hcGAgd2l0aG91dCB1c2luZ1xuICAgICAgLy8gdGhlaXIgYGluZGV4YCBhcmd1bWVudCBhcyBhIGNhbGxiYWNrXG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9ICdmdW5jdGlvbicgJiYgdGhpc0FyZyAmJiB0aGlzQXJnW2NhbGxiYWNrXSA9PT0gY29sbGVjdGlvbikge1xuICAgICAgICBjYWxsYmFjayA9IG51bGw7XG4gICAgICB9XG4gICAgICBpZiAoY2FsbGJhY2sgPT0gbnVsbCAmJiBpc0FycmF5KGNvbGxlY3Rpb24pKSB7XG4gICAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgICAgbGVuZ3RoID0gY29sbGVjdGlvbi5sZW5ndGg7XG5cbiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICB2YXIgdmFsdWUgPSBjb2xsZWN0aW9uW2luZGV4XTtcbiAgICAgICAgICBpZiAodmFsdWUgPiByZXN1bHQpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FsbGJhY2sgPSAoY2FsbGJhY2sgPT0gbnVsbCAmJiBpc1N0cmluZyhjb2xsZWN0aW9uKSlcbiAgICAgICAgICA/IGNoYXJBdENhbGxiYWNrXG4gICAgICAgICAgOiBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xuXG4gICAgICAgIGZvckVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgICAgdmFyIGN1cnJlbnQgPSBjYWxsYmFjayh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgICAgICAgIGlmIChjdXJyZW50ID4gY29tcHV0ZWQpIHtcbiAgICAgICAgICAgIGNvbXB1dGVkID0gY3VycmVudDtcbiAgICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGUgbWluaW11bSB2YWx1ZSBvZiBhIGNvbGxlY3Rpb24uIElmIHRoZSBjb2xsZWN0aW9uIGlzIGVtcHR5IG9yXG4gICAgICogZmFsc2V5IGBJbmZpbml0eWAgaXMgcmV0dXJuZWQuIElmIGEgY2FsbGJhY2sgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSBleGVjdXRlZFxuICAgICAqIGZvciBlYWNoIHZhbHVlIGluIHRoZSBjb2xsZWN0aW9uIHRvIGdlbmVyYXRlIHRoZSBjcml0ZXJpb24gYnkgd2hpY2ggdGhlIHZhbHVlXG4gICAgICogaXMgcmFua2VkLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWVcbiAgICAgKiBhcmd1bWVudHM7ICh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXG4gICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXG4gICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcbiAgICAgKiBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXG4gICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXG4gICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIG1pbmltdW0gdmFsdWUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ubWluKFs0LCAyLCA4LCA2XSk7XG4gICAgICogLy8gPT4gMlxuICAgICAqXG4gICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXG4gICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAnYWdlJzogNDAgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiBfLm1pbihjaGFyYWN0ZXJzLCBmdW5jdGlvbihjaHIpIHsgcmV0dXJuIGNoci5hZ2U7IH0pO1xuICAgICAqIC8vID0+IHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2IH07XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLm1pbihjaGFyYWN0ZXJzLCAnYWdlJyk7XG4gICAgICogLy8gPT4geyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYgfTtcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtaW4oY29sbGVjdGlvbiwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIHZhciBjb21wdXRlZCA9IEluZmluaXR5LFxuICAgICAgICAgIHJlc3VsdCA9IGNvbXB1dGVkO1xuXG4gICAgICAvLyBhbGxvd3Mgd29ya2luZyB3aXRoIGZ1bmN0aW9ucyBsaWtlIGBfLm1hcGAgd2l0aG91dCB1c2luZ1xuICAgICAgLy8gdGhlaXIgYGluZGV4YCBhcmd1bWVudCBhcyBhIGNhbGxiYWNrXG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9ICdmdW5jdGlvbicgJiYgdGhpc0FyZyAmJiB0aGlzQXJnW2NhbGxiYWNrXSA9PT0gY29sbGVjdGlvbikge1xuICAgICAgICBjYWxsYmFjayA9IG51bGw7XG4gICAgICB9XG4gICAgICBpZiAoY2FsbGJhY2sgPT0gbnVsbCAmJiBpc0FycmF5KGNvbGxlY3Rpb24pKSB7XG4gICAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgICAgbGVuZ3RoID0gY29sbGVjdGlvbi5sZW5ndGg7XG5cbiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICB2YXIgdmFsdWUgPSBjb2xsZWN0aW9uW2luZGV4XTtcbiAgICAgICAgICBpZiAodmFsdWUgPCByZXN1bHQpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FsbGJhY2sgPSAoY2FsbGJhY2sgPT0gbnVsbCAmJiBpc1N0cmluZyhjb2xsZWN0aW9uKSlcbiAgICAgICAgICA/IGNoYXJBdENhbGxiYWNrXG4gICAgICAgICAgOiBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xuXG4gICAgICAgIGZvckVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgICAgdmFyIGN1cnJlbnQgPSBjYWxsYmFjayh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgICAgICAgIGlmIChjdXJyZW50IDwgY29tcHV0ZWQpIHtcbiAgICAgICAgICAgIGNvbXB1dGVkID0gY3VycmVudDtcbiAgICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGUgdmFsdWUgb2YgYSBzcGVjaWZpZWQgcHJvcGVydHkgZnJvbSBhbGwgZWxlbWVudHMgaW4gdGhlIGNvbGxlY3Rpb24uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAdHlwZSBGdW5jdGlvblxuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byBwbHVjay5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgYXJyYXkgb2YgcHJvcGVydHkgdmFsdWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcbiAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sXG4gICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8ucGx1Y2soY2hhcmFjdGVycywgJ25hbWUnKTtcbiAgICAgKiAvLyA9PiBbJ2Jhcm5leScsICdmcmVkJ11cbiAgICAgKi9cbiAgICB2YXIgcGx1Y2sgPSBtYXA7XG5cbiAgICAvKipcbiAgICAgKiBSZWR1Y2VzIGEgY29sbGVjdGlvbiB0byBhIHZhbHVlIHdoaWNoIGlzIHRoZSBhY2N1bXVsYXRlZCByZXN1bHQgb2YgcnVubmluZ1xuICAgICAqIGVhY2ggZWxlbWVudCBpbiB0aGUgY29sbGVjdGlvbiB0aHJvdWdoIHRoZSBjYWxsYmFjaywgd2hlcmUgZWFjaCBzdWNjZXNzaXZlXG4gICAgICogY2FsbGJhY2sgZXhlY3V0aW9uIGNvbnN1bWVzIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIHByZXZpb3VzIGV4ZWN1dGlvbi4gSWZcbiAgICAgKiBgYWNjdW11bGF0b3JgIGlzIG5vdCBwcm92aWRlZCB0aGUgZmlyc3QgZWxlbWVudCBvZiB0aGUgY29sbGVjdGlvbiB3aWxsIGJlXG4gICAgICogdXNlZCBhcyB0aGUgaW5pdGlhbCBgYWNjdW11bGF0b3JgIHZhbHVlLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgXG4gICAgICogYW5kIGludm9rZWQgd2l0aCBmb3VyIGFyZ3VtZW50czsgKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBmb2xkbCwgaW5qZWN0XG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFthY2N1bXVsYXRvcl0gSW5pdGlhbCB2YWx1ZSBvZiB0aGUgYWNjdW11bGF0b3IuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGFjY3VtdWxhdGVkIHZhbHVlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgc3VtID0gXy5yZWR1Y2UoWzEsIDIsIDNdLCBmdW5jdGlvbihzdW0sIG51bSkge1xuICAgICAqICAgcmV0dXJuIHN1bSArIG51bTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiA2XG4gICAgICpcbiAgICAgKiB2YXIgbWFwcGVkID0gXy5yZWR1Y2UoeyAnYSc6IDEsICdiJzogMiwgJ2MnOiAzIH0sIGZ1bmN0aW9uKHJlc3VsdCwgbnVtLCBrZXkpIHtcbiAgICAgKiAgIHJlc3VsdFtrZXldID0gbnVtICogMztcbiAgICAgKiAgIHJldHVybiByZXN1bHQ7XG4gICAgICogfSwge30pO1xuICAgICAqIC8vID0+IHsgJ2EnOiAzLCAnYic6IDYsICdjJzogOSB9XG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVkdWNlKGNvbGxlY3Rpb24sIGNhbGxiYWNrLCBhY2N1bXVsYXRvciwgdGhpc0FyZykge1xuICAgICAgaWYgKCFjb2xsZWN0aW9uKSByZXR1cm4gYWNjdW11bGF0b3I7XG4gICAgICB2YXIgbm9hY2N1bSA9IGFyZ3VtZW50cy5sZW5ndGggPCAzO1xuICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDQpO1xuXG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBjb2xsZWN0aW9uLmxlbmd0aDtcblxuICAgICAgaWYgKHR5cGVvZiBsZW5ndGggPT0gJ251bWJlcicpIHtcbiAgICAgICAgaWYgKG5vYWNjdW0pIHtcbiAgICAgICAgICBhY2N1bXVsYXRvciA9IGNvbGxlY3Rpb25bKytpbmRleF07XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICBhY2N1bXVsYXRvciA9IGNhbGxiYWNrKGFjY3VtdWxhdG9yLCBjb2xsZWN0aW9uW2luZGV4XSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3JPd24oY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgICAgYWNjdW11bGF0b3IgPSBub2FjY3VtXG4gICAgICAgICAgICA/IChub2FjY3VtID0gZmFsc2UsIHZhbHVlKVxuICAgICAgICAgICAgOiBjYWxsYmFjayhhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhY2N1bXVsYXRvcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLnJlZHVjZWAgZXhjZXB0IHRoYXQgaXQgaXRlcmF0ZXMgb3ZlciBlbGVtZW50c1xuICAgICAqIG9mIGEgYGNvbGxlY3Rpb25gIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBmb2xkclxuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbYWNjdW11bGF0b3JdIEluaXRpYWwgdmFsdWUgb2YgdGhlIGFjY3VtdWxhdG9yLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGxpc3QgPSBbWzAsIDFdLCBbMiwgM10sIFs0LCA1XV07XG4gICAgICogdmFyIGZsYXQgPSBfLnJlZHVjZVJpZ2h0KGxpc3QsIGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIGEuY29uY2F0KGIpOyB9LCBbXSk7XG4gICAgICogLy8gPT4gWzQsIDUsIDIsIDMsIDAsIDFdXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVkdWNlUmlnaHQoY29sbGVjdGlvbiwgY2FsbGJhY2ssIGFjY3VtdWxhdG9yLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgbm9hY2N1bSA9IGFyZ3VtZW50cy5sZW5ndGggPCAzO1xuICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDQpO1xuICAgICAgZm9yRWFjaFJpZ2h0KGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgICBhY2N1bXVsYXRvciA9IG5vYWNjdW1cbiAgICAgICAgICA/IChub2FjY3VtID0gZmFsc2UsIHZhbHVlKVxuICAgICAgICAgIDogY2FsbGJhY2soYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBhY2N1bXVsYXRvcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgb3Bwb3NpdGUgb2YgYF8uZmlsdGVyYCB0aGlzIG1ldGhvZCByZXR1cm5zIHRoZSBlbGVtZW50cyBvZiBhXG4gICAgICogY29sbGVjdGlvbiB0aGF0IHRoZSBjYWxsYmFjayBkb2VzICoqbm90KiogcmV0dXJuIHRydWV5IGZvci5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xuICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXG4gICAgICogZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxuICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIG5ldyBhcnJheSBvZiBlbGVtZW50cyB0aGF0IGZhaWxlZCB0aGUgY2FsbGJhY2sgY2hlY2suXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvZGRzID0gXy5yZWplY3QoWzEsIDIsIDMsIDQsIDUsIDZdLCBmdW5jdGlvbihudW0pIHsgcmV0dXJuIG51bSAlIDIgPT0gMDsgfSk7XG4gICAgICogLy8gPT4gWzEsIDMsIDVdXG4gICAgICpcbiAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcbiAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2LCAnYmxvY2tlZCc6IGZhbHNlIH0sXG4gICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCwgJ2Jsb2NrZWQnOiB0cnVlIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5yZWplY3QoY2hhcmFjdGVycywgJ2Jsb2NrZWQnKTtcbiAgICAgKiAvLyA9PiBbeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYsICdibG9ja2VkJzogZmFsc2UgfV1cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy53aGVyZVwiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ucmVqZWN0KGNoYXJhY3RlcnMsIHsgJ2FnZSc6IDM2IH0pO1xuICAgICAqIC8vID0+IFt7ICduYW1lJzogJ2ZyZWQnLCAnYWdlJzogNDAsICdibG9ja2VkJzogdHJ1ZSB9XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlamVjdChjb2xsZWN0aW9uLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xuICAgICAgcmV0dXJuIGZpbHRlcihjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuICFjYWxsYmFjayh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGEgcmFuZG9tIGVsZW1lbnQgb3IgYG5gIHJhbmRvbSBlbGVtZW50cyBmcm9tIGEgY29sbGVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBzYW1wbGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtuXSBUaGUgbnVtYmVyIG9mIGVsZW1lbnRzIHRvIHNhbXBsZS5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gQWxsb3dzIHdvcmtpbmcgd2l0aCBmdW5jdGlvbnMgbGlrZSBgXy5tYXBgXG4gICAgICogIHdpdGhvdXQgdXNpbmcgdGhlaXIgYGluZGV4YCBhcmd1bWVudHMgYXMgYG5gLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgcmFuZG9tIHNhbXBsZShzKSBvZiBgY29sbGVjdGlvbmAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uc2FtcGxlKFsxLCAyLCAzLCA0XSk7XG4gICAgICogLy8gPT4gMlxuICAgICAqXG4gICAgICogXy5zYW1wbGUoWzEsIDIsIDMsIDRdLCAyKTtcbiAgICAgKiAvLyA9PiBbMywgMV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzYW1wbGUoY29sbGVjdGlvbiwgbiwgZ3VhcmQpIHtcbiAgICAgIGlmIChjb2xsZWN0aW9uICYmIHR5cGVvZiBjb2xsZWN0aW9uLmxlbmd0aCAhPSAnbnVtYmVyJykge1xuICAgICAgICBjb2xsZWN0aW9uID0gdmFsdWVzKGNvbGxlY3Rpb24pO1xuICAgICAgfVxuICAgICAgaWYgKG4gPT0gbnVsbCB8fCBndWFyZCkge1xuICAgICAgICByZXR1cm4gY29sbGVjdGlvbiA/IGNvbGxlY3Rpb25bYmFzZVJhbmRvbSgwLCBjb2xsZWN0aW9uLmxlbmd0aCAtIDEpXSA6IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIHZhciByZXN1bHQgPSBzaHVmZmxlKGNvbGxlY3Rpb24pO1xuICAgICAgcmVzdWx0Lmxlbmd0aCA9IG5hdGl2ZU1pbihuYXRpdmVNYXgoMCwgbiksIHJlc3VsdC5sZW5ndGgpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHNodWZmbGVkIHZhbHVlcywgdXNpbmcgYSB2ZXJzaW9uIG9mIHRoZSBGaXNoZXItWWF0ZXNcbiAgICAgKiBzaHVmZmxlLiBTZWUgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9GaXNoZXItWWF0ZXNfc2h1ZmZsZS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBzaHVmZmxlLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIG5ldyBzaHVmZmxlZCBjb2xsZWN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnNodWZmbGUoWzEsIDIsIDMsIDQsIDUsIDZdKTtcbiAgICAgKiAvLyA9PiBbNCwgMSwgNiwgMywgNSwgMl1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzaHVmZmxlKGNvbGxlY3Rpb24pIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGNvbGxlY3Rpb24gPyBjb2xsZWN0aW9uLmxlbmd0aCA6IDAsXG4gICAgICAgICAgcmVzdWx0ID0gQXJyYXkodHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJyA/IGxlbmd0aCA6IDApO1xuXG4gICAgICBmb3JFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHZhciByYW5kID0gYmFzZVJhbmRvbSgwLCArK2luZGV4KTtcbiAgICAgICAgcmVzdWx0W2luZGV4XSA9IHJlc3VsdFtyYW5kXTtcbiAgICAgICAgcmVzdWx0W3JhbmRdID0gdmFsdWU7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgc2l6ZSBvZiB0aGUgYGNvbGxlY3Rpb25gIGJ5IHJldHVybmluZyBgY29sbGVjdGlvbi5sZW5ndGhgIGZvciBhcnJheXNcbiAgICAgKiBhbmQgYXJyYXktbGlrZSBvYmplY3RzIG9yIHRoZSBudW1iZXIgb2Ygb3duIGVudW1lcmFibGUgcHJvcGVydGllcyBmb3Igb2JqZWN0cy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpbnNwZWN0LlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgYGNvbGxlY3Rpb24ubGVuZ3RoYCBvciBudW1iZXIgb2Ygb3duIGVudW1lcmFibGUgcHJvcGVydGllcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5zaXplKFsxLCAyXSk7XG4gICAgICogLy8gPT4gMlxuICAgICAqXG4gICAgICogXy5zaXplKHsgJ29uZSc6IDEsICd0d28nOiAyLCAndGhyZWUnOiAzIH0pO1xuICAgICAqIC8vID0+IDNcbiAgICAgKlxuICAgICAqIF8uc2l6ZSgncGViYmxlcycpO1xuICAgICAqIC8vID0+IDdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzaXplKGNvbGxlY3Rpb24pIHtcbiAgICAgIHZhciBsZW5ndGggPSBjb2xsZWN0aW9uID8gY29sbGVjdGlvbi5sZW5ndGggOiAwO1xuICAgICAgcmV0dXJuIHR5cGVvZiBsZW5ndGggPT0gJ251bWJlcicgPyBsZW5ndGggOiBrZXlzKGNvbGxlY3Rpb24pLmxlbmd0aDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIGNhbGxiYWNrIHJldHVybnMgYSB0cnVleSB2YWx1ZSBmb3IgKiphbnkqKiBlbGVtZW50IG9mIGFcbiAgICAgKiBjb2xsZWN0aW9uLiBUaGUgZnVuY3Rpb24gcmV0dXJucyBhcyBzb29uIGFzIGl0IGZpbmRzIGEgcGFzc2luZyB2YWx1ZSBhbmRcbiAgICAgKiBkb2VzIG5vdCBpdGVyYXRlIG92ZXIgdGhlIGVudGlyZSBjb2xsZWN0aW9uLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG9cbiAgICAgKiBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM7ICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xuICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXG4gICAgICogZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIGFueVxuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcbiAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW55IGVsZW1lbnQgcGFzc2VkIHRoZSBjYWxsYmFjayBjaGVjayxcbiAgICAgKiAgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnNvbWUoW251bGwsIDAsICd5ZXMnLCBmYWxzZV0sIEJvb2xlYW4pO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xuICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYsICdibG9ja2VkJzogZmFsc2UgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgJ2FnZSc6IDQwLCAnYmxvY2tlZCc6IHRydWUgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnNvbWUoY2hhcmFjdGVycywgJ2Jsb2NrZWQnKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ud2hlcmVcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnNvbWUoY2hhcmFjdGVycywgeyAnYWdlJzogMSB9KTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNvbWUoY29sbGVjdGlvbiwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIHZhciByZXN1bHQ7XG4gICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XG5cbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGNvbGxlY3Rpb24gPyBjb2xsZWN0aW9uLmxlbmd0aCA6IDA7XG5cbiAgICAgIGlmICh0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInKSB7XG4gICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKChyZXN1bHQgPSBjYWxsYmFjayhjb2xsZWN0aW9uW2luZGV4XSwgaW5kZXgsIGNvbGxlY3Rpb24pKSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3JPd24oY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuICEocmVzdWx0ID0gY2FsbGJhY2sodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuICEhcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgZWxlbWVudHMsIHNvcnRlZCBpbiBhc2NlbmRpbmcgb3JkZXIgYnkgdGhlIHJlc3VsdHMgb2ZcbiAgICAgKiBydW5uaW5nIGVhY2ggZWxlbWVudCBpbiBhIGNvbGxlY3Rpb24gdGhyb3VnaCB0aGUgY2FsbGJhY2suIFRoaXMgbWV0aG9kXG4gICAgICogcGVyZm9ybXMgYSBzdGFibGUgc29ydCwgdGhhdCBpcywgaXQgd2lsbCBwcmVzZXJ2ZSB0aGUgb3JpZ2luYWwgc29ydCBvcmRlclxuICAgICAqIG9mIGVxdWFsIGVsZW1lbnRzLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGhcbiAgICAgKiB0aHJlZSBhcmd1bWVudHM7ICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGFuIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjb2xsZWN0aW9uXG4gICAgICogd2lsbCBiZSBzb3J0ZWQgYnkgZWFjaCBwcm9wZXJ0eSB2YWx1ZS5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xuICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXG4gICAgICogZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0FycmF5fEZ1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxuICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIG5ldyBhcnJheSBvZiBzb3J0ZWQgZWxlbWVudHMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uc29ydEJ5KFsxLCAyLCAzXSwgZnVuY3Rpb24obnVtKSB7IHJldHVybiBNYXRoLnNpbihudW0pOyB9KTtcbiAgICAgKiAvLyA9PiBbMywgMSwgMl1cbiAgICAgKlxuICAgICAqIF8uc29ydEJ5KFsxLCAyLCAzXSwgZnVuY3Rpb24obnVtKSB7IHJldHVybiB0aGlzLnNpbihudW0pOyB9LCBNYXRoKTtcbiAgICAgKiAvLyA9PiBbMywgMSwgMl1cbiAgICAgKlxuICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xuICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAgJ2FnZSc6IDM2IH0sXG4gICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICAnYWdlJzogNDAgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgICdhZ2UnOiAyNiB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAgJ2FnZSc6IDMwIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5tYXAoXy5zb3J0QnkoY2hhcmFjdGVycywgJ2FnZScpLCBfLnZhbHVlcyk7XG4gICAgICogLy8gPT4gW1snYmFybmV5JywgMjZdLCBbJ2ZyZWQnLCAzMF0sIFsnYmFybmV5JywgMzZdLCBbJ2ZyZWQnLCA0MF1dXG4gICAgICpcbiAgICAgKiAvLyBzb3J0aW5nIGJ5IG11bHRpcGxlIHByb3BlcnRpZXNcbiAgICAgKiBfLm1hcChfLnNvcnRCeShjaGFyYWN0ZXJzLCBbJ25hbWUnLCAnYWdlJ10pLCBfLnZhbHVlcyk7XG4gICAgICogLy8gPSA+IFtbJ2Jhcm5leScsIDI2XSwgWydiYXJuZXknLCAzNl0sIFsnZnJlZCcsIDMwXSwgWydmcmVkJywgNDBdXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNvcnRCeShjb2xsZWN0aW9uLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgaXNBcnIgPSBpc0FycmF5KGNhbGxiYWNrKSxcbiAgICAgICAgICBsZW5ndGggPSBjb2xsZWN0aW9uID8gY29sbGVjdGlvbi5sZW5ndGggOiAwLFxuICAgICAgICAgIHJlc3VsdCA9IEFycmF5KHR5cGVvZiBsZW5ndGggPT0gJ251bWJlcicgPyBsZW5ndGggOiAwKTtcblxuICAgICAgaWYgKCFpc0Fycikge1xuICAgICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XG4gICAgICB9XG4gICAgICBmb3JFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgdmFyIG9iamVjdCA9IHJlc3VsdFsrK2luZGV4XSA9IGdldE9iamVjdCgpO1xuICAgICAgICBpZiAoaXNBcnIpIHtcbiAgICAgICAgICBvYmplY3QuY3JpdGVyaWEgPSBtYXAoY2FsbGJhY2ssIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgKG9iamVjdC5jcml0ZXJpYSA9IGdldEFycmF5KCkpWzBdID0gY2FsbGJhY2sodmFsdWUsIGtleSwgY29sbGVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgb2JqZWN0LmluZGV4ID0gaW5kZXg7XG4gICAgICAgIG9iamVjdC52YWx1ZSA9IHZhbHVlO1xuICAgICAgfSk7XG5cbiAgICAgIGxlbmd0aCA9IHJlc3VsdC5sZW5ndGg7XG4gICAgICByZXN1bHQuc29ydChjb21wYXJlQXNjZW5kaW5nKTtcbiAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICB2YXIgb2JqZWN0ID0gcmVzdWx0W2xlbmd0aF07XG4gICAgICAgIHJlc3VsdFtsZW5ndGhdID0gb2JqZWN0LnZhbHVlO1xuICAgICAgICBpZiAoIWlzQXJyKSB7XG4gICAgICAgICAgcmVsZWFzZUFycmF5KG9iamVjdC5jcml0ZXJpYSk7XG4gICAgICAgIH1cbiAgICAgICAgcmVsZWFzZU9iamVjdChvYmplY3QpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGUgYGNvbGxlY3Rpb25gIHRvIGFuIGFycmF5LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGNvbnZlcnQuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgY29udmVydGVkIGFycmF5LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAoZnVuY3Rpb24oKSB7IHJldHVybiBfLnRvQXJyYXkoYXJndW1lbnRzKS5zbGljZSgxKTsgfSkoMSwgMiwgMywgNCk7XG4gICAgICogLy8gPT4gWzIsIDMsIDRdXG4gICAgICovXG4gICAgZnVuY3Rpb24gdG9BcnJheShjb2xsZWN0aW9uKSB7XG4gICAgICBpZiAoY29sbGVjdGlvbiAmJiB0eXBlb2YgY29sbGVjdGlvbi5sZW5ndGggPT0gJ251bWJlcicpIHtcbiAgICAgICAgcmV0dXJuIHNsaWNlKGNvbGxlY3Rpb24pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlcyhjb2xsZWN0aW9uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBhIGRlZXAgY29tcGFyaXNvbiBvZiBlYWNoIGVsZW1lbnQgaW4gYSBgY29sbGVjdGlvbmAgdG8gdGhlIGdpdmVuXG4gICAgICogYHByb3BlcnRpZXNgIG9iamVjdCwgcmV0dXJuaW5nIGFuIGFycmF5IG9mIGFsbCBlbGVtZW50cyB0aGF0IGhhdmUgZXF1aXZhbGVudFxuICAgICAqIHByb3BlcnR5IHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEB0eXBlIEZ1bmN0aW9uXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcHMgVGhlIG9iamVjdCBvZiBwcm9wZXJ0eSB2YWx1ZXMgdG8gZmlsdGVyIGJ5LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIG5ldyBhcnJheSBvZiBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIGdpdmVuIHByb3BlcnRpZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xuICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYsICdwZXRzJzogWydob3BweSddIH0sXG4gICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCwgJ3BldHMnOiBbJ2JhYnkgcHVzcycsICdkaW5vJ10gfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiBfLndoZXJlKGNoYXJhY3RlcnMsIHsgJ2FnZSc6IDM2IH0pO1xuICAgICAqIC8vID0+IFt7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiwgJ3BldHMnOiBbJ2hvcHB5J10gfV1cbiAgICAgKlxuICAgICAqIF8ud2hlcmUoY2hhcmFjdGVycywgeyAncGV0cyc6IFsnZGlubyddIH0pO1xuICAgICAqIC8vID0+IFt7ICduYW1lJzogJ2ZyZWQnLCAnYWdlJzogNDAsICdwZXRzJzogWydiYWJ5IHB1c3MnLCAnZGlubyddIH1dXG4gICAgICovXG4gICAgdmFyIHdoZXJlID0gZmlsdGVyO1xuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IHdpdGggYWxsIGZhbHNleSB2YWx1ZXMgcmVtb3ZlZC4gVGhlIHZhbHVlcyBgZmFsc2VgLCBgbnVsbGAsXG4gICAgICogYDBgLCBgXCJcImAsIGB1bmRlZmluZWRgLCBhbmQgYE5hTmAgYXJlIGFsbCBmYWxzZXkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGNvbXBhY3QuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIGZpbHRlcmVkIHZhbHVlcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5jb21wYWN0KFswLCAxLCBmYWxzZSwgMiwgJycsIDNdKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgM11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjb21wYWN0KGFycmF5KSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDAsXG4gICAgICAgICAgcmVzdWx0ID0gW107XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGFycmF5W2luZGV4XTtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgZXhjbHVkaW5nIGFsbCB2YWx1ZXMgb2YgdGhlIHByb3ZpZGVkIGFycmF5cyB1c2luZyBzdHJpY3RcbiAgICAgKiBlcXVhbGl0eSBmb3IgY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHByb2Nlc3MuXG4gICAgICogQHBhcmFtIHsuLi5BcnJheX0gW3ZhbHVlc10gVGhlIGFycmF5cyBvZiB2YWx1ZXMgdG8gZXhjbHVkZS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgYXJyYXkgb2YgZmlsdGVyZWQgdmFsdWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmRpZmZlcmVuY2UoWzEsIDIsIDMsIDQsIDVdLCBbNSwgMiwgMTBdKTtcbiAgICAgKiAvLyA9PiBbMSwgMywgNF1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBkaWZmZXJlbmNlKGFycmF5KSB7XG4gICAgICByZXR1cm4gYmFzZURpZmZlcmVuY2UoYXJyYXksIGJhc2VGbGF0dGVuKGFyZ3VtZW50cywgdHJ1ZSwgdHJ1ZSwgMSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZmluZGAgZXhjZXB0IHRoYXQgaXQgcmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGZpcnN0XG4gICAgICogZWxlbWVudCB0aGF0IHBhc3NlcyB0aGUgY2FsbGJhY2sgY2hlY2ssIGluc3RlYWQgb2YgdGhlIGVsZW1lbnQgaXRzZWxmLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXG4gICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXG4gICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcbiAgICAgKiBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNlYXJjaC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxuICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBmb3VuZCBlbGVtZW50LCBlbHNlIGAtMWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xuICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAgJ2FnZSc6IDM2LCAnYmxvY2tlZCc6IGZhbHNlIH0sXG4gICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICAnYWdlJzogNDAsICdibG9ja2VkJzogdHJ1ZSB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdwZWJibGVzJywgJ2FnZSc6IDEsICAnYmxvY2tlZCc6IGZhbHNlIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogXy5maW5kSW5kZXgoY2hhcmFjdGVycywgZnVuY3Rpb24oY2hyKSB7XG4gICAgICogICByZXR1cm4gY2hyLmFnZSA8IDIwO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IDJcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy53aGVyZVwiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZmluZEluZGV4KGNoYXJhY3RlcnMsIHsgJ2FnZSc6IDM2IH0pO1xuICAgICAqIC8vID0+IDBcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZmluZEluZGV4KGNoYXJhY3RlcnMsICdibG9ja2VkJyk7XG4gICAgICogLy8gPT4gMVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZpbmRJbmRleChhcnJheSwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcblxuICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgaWYgKGNhbGxiYWNrKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkge1xuICAgICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uZmluZEluZGV4YCBleGNlcHQgdGhhdCBpdCBpdGVyYXRlcyBvdmVyIGVsZW1lbnRzXG4gICAgICogb2YgYSBgY29sbGVjdGlvbmAgZnJvbSByaWdodCB0byBsZWZ0LlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXG4gICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXG4gICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcbiAgICAgKiBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNlYXJjaC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxuICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBmb3VuZCBlbGVtZW50LCBlbHNlIGAtMWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xuICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAgJ2FnZSc6IDM2LCAnYmxvY2tlZCc6IHRydWUgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgICdhZ2UnOiA0MCwgJ2Jsb2NrZWQnOiBmYWxzZSB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdwZWJibGVzJywgJ2FnZSc6IDEsICAnYmxvY2tlZCc6IHRydWUgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiBfLmZpbmRMYXN0SW5kZXgoY2hhcmFjdGVycywgZnVuY3Rpb24oY2hyKSB7XG4gICAgICogICByZXR1cm4gY2hyLmFnZSA+IDMwO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IDFcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy53aGVyZVwiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZmluZExhc3RJbmRleChjaGFyYWN0ZXJzLCB7ICdhZ2UnOiAzNiB9KTtcbiAgICAgKiAvLyA9PiAwXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmZpbmRMYXN0SW5kZXgoY2hhcmFjdGVycywgJ2Jsb2NrZWQnKTtcbiAgICAgKiAvLyA9PiAyXG4gICAgICovXG4gICAgZnVuY3Rpb24gZmluZExhc3RJbmRleChhcnJheSwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG4gICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XG4gICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgaWYgKGNhbGxiYWNrKGFycmF5W2xlbmd0aF0sIGxlbmd0aCwgYXJyYXkpKSB7XG4gICAgICAgICAgcmV0dXJuIGxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGZpcnN0IGVsZW1lbnQgb3IgZmlyc3QgYG5gIGVsZW1lbnRzIG9mIGFuIGFycmF5LiBJZiBhIGNhbGxiYWNrXG4gICAgICogaXMgcHJvdmlkZWQgZWxlbWVudHMgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgYXJyYXkgYXJlIHJldHVybmVkIGFzIGxvbmdcbiAgICAgKiBhcyB0aGUgY2FsbGJhY2sgcmV0dXJucyB0cnVleS4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmRcbiAgICAgKiBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOyAodmFsdWUsIGluZGV4LCBhcnJheSkuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcbiAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcbiAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxuICAgICAqIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBoZWFkLCB0YWtlXG4gICAgICogQGNhdGVnb3J5IEFycmF5c1xuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxudW1iZXJ8c3RyaW5nfSBbY2FsbGJhY2tdIFRoZSBmdW5jdGlvbiBjYWxsZWRcbiAgICAgKiAgcGVyIGVsZW1lbnQgb3IgdGhlIG51bWJlciBvZiBlbGVtZW50cyB0byByZXR1cm4uIElmIGEgcHJvcGVydHkgbmFtZSBvclxuICAgICAqICBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiXG4gICAgICogIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGZpcnN0IGVsZW1lbnQocykgb2YgYGFycmF5YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5maXJzdChbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IDFcbiAgICAgKlxuICAgICAqIF8uZmlyc3QoWzEsIDIsIDNdLCAyKTtcbiAgICAgKiAvLyA9PiBbMSwgMl1cbiAgICAgKlxuICAgICAqIF8uZmlyc3QoWzEsIDIsIDNdLCBmdW5jdGlvbihudW0pIHtcbiAgICAgKiAgIHJldHVybiBudW0gPCAzO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IFsxLCAyXVxuICAgICAqXG4gICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXG4gICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICAnYmxvY2tlZCc6IHRydWUsICAnZW1wbG95ZXInOiAnc2xhdGUnIH0sXG4gICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICAnYmxvY2tlZCc6IGZhbHNlLCAnZW1wbG95ZXInOiAnc2xhdGUnIH0sXG4gICAgICogICB7ICduYW1lJzogJ3BlYmJsZXMnLCAnYmxvY2tlZCc6IHRydWUsICAnZW1wbG95ZXInOiAnbmEnIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5maXJzdChjaGFyYWN0ZXJzLCAnYmxvY2tlZCcpO1xuICAgICAqIC8vID0+IFt7ICduYW1lJzogJ2Jhcm5leScsICdibG9ja2VkJzogdHJ1ZSwgJ2VtcGxveWVyJzogJ3NsYXRlJyB9XVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLndoZXJlXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5wbHVjayhfLmZpcnN0KGNoYXJhY3RlcnMsIHsgJ2VtcGxveWVyJzogJ3NsYXRlJyB9KSwgJ25hbWUnKTtcbiAgICAgKiAvLyA9PiBbJ2Jhcm5leScsICdmcmVkJ11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmaXJzdChhcnJheSwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIHZhciBuID0gMCxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG5cbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT0gJ251bWJlcicgJiYgY2FsbGJhY2sgIT0gbnVsbCkge1xuICAgICAgICB2YXIgaW5kZXggPSAtMTtcbiAgICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xuICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCAmJiBjYWxsYmFjayhhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHtcbiAgICAgICAgICBuKys7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG4gPSBjYWxsYmFjaztcbiAgICAgICAgaWYgKG4gPT0gbnVsbCB8fCB0aGlzQXJnKSB7XG4gICAgICAgICAgcmV0dXJuIGFycmF5ID8gYXJyYXlbMF0gOiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBzbGljZShhcnJheSwgMCwgbmF0aXZlTWluKG5hdGl2ZU1heCgwLCBuKSwgbGVuZ3RoKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmxhdHRlbnMgYSBuZXN0ZWQgYXJyYXkgKHRoZSBuZXN0aW5nIGNhbiBiZSB0byBhbnkgZGVwdGgpLiBJZiBgaXNTaGFsbG93YFxuICAgICAqIGlzIHRydWV5LCB0aGUgYXJyYXkgd2lsbCBvbmx5IGJlIGZsYXR0ZW5lZCBhIHNpbmdsZSBsZXZlbC4gSWYgYSBjYWxsYmFja1xuICAgICAqIGlzIHByb3ZpZGVkIGVhY2ggZWxlbWVudCBvZiB0aGUgYXJyYXkgaXMgcGFzc2VkIHRocm91Z2ggdGhlIGNhbGxiYWNrIGJlZm9yZVxuICAgICAqIGZsYXR0ZW5pbmcuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZVxuICAgICAqIGFyZ3VtZW50czsgKHZhbHVlLCBpbmRleCwgYXJyYXkpLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXG4gICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXG4gICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcbiAgICAgKiBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGZsYXR0ZW4uXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaXNTaGFsbG93PWZhbHNlXSBBIGZsYWcgdG8gcmVzdHJpY3QgZmxhdHRlbmluZyB0byBhIHNpbmdsZSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxuICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIG5ldyBmbGF0dGVuZWQgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZmxhdHRlbihbMSwgWzJdLCBbMywgW1s0XV1dXSk7XG4gICAgICogLy8gPT4gWzEsIDIsIDMsIDRdO1xuICAgICAqXG4gICAgICogXy5mbGF0dGVuKFsxLCBbMl0sIFszLCBbWzRdXV1dLCB0cnVlKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgMywgW1s0XV1dO1xuICAgICAqXG4gICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXG4gICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzMCwgJ3BldHMnOiBbJ2hvcHB5J10gfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgJ2FnZSc6IDQwLCAncGV0cyc6IFsnYmFieSBwdXNzJywgJ2Rpbm8nXSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZmxhdHRlbihjaGFyYWN0ZXJzLCAncGV0cycpO1xuICAgICAqIC8vID0+IFsnaG9wcHknLCAnYmFieSBwdXNzJywgJ2Rpbm8nXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZsYXR0ZW4oYXJyYXksIGlzU2hhbGxvdywgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIC8vIGp1Z2dsZSBhcmd1bWVudHNcbiAgICAgIGlmICh0eXBlb2YgaXNTaGFsbG93ICE9ICdib29sZWFuJyAmJiBpc1NoYWxsb3cgIT0gbnVsbCkge1xuICAgICAgICB0aGlzQXJnID0gY2FsbGJhY2s7XG4gICAgICAgIGNhbGxiYWNrID0gKHR5cGVvZiBpc1NoYWxsb3cgIT0gJ2Z1bmN0aW9uJyAmJiB0aGlzQXJnICYmIHRoaXNBcmdbaXNTaGFsbG93XSA9PT0gYXJyYXkpID8gbnVsbCA6IGlzU2hhbGxvdztcbiAgICAgICAgaXNTaGFsbG93ID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoY2FsbGJhY2sgIT0gbnVsbCkge1xuICAgICAgICBhcnJheSA9IG1hcChhcnJheSwgY2FsbGJhY2ssIHRoaXNBcmcpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJhc2VGbGF0dGVuKGFycmF5LCBpc1NoYWxsb3cpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGluZGV4IGF0IHdoaWNoIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIGB2YWx1ZWAgaXMgZm91bmQgdXNpbmdcbiAgICAgKiBzdHJpY3QgZXF1YWxpdHkgZm9yIGNvbXBhcmlzb25zLCBpLmUuIGA9PT1gLiBJZiB0aGUgYXJyYXkgaXMgYWxyZWFkeSBzb3J0ZWRcbiAgICAgKiBwcm92aWRpbmcgYHRydWVgIGZvciBgZnJvbUluZGV4YCB3aWxsIHJ1biBhIGZhc3RlciBiaW5hcnkgc2VhcmNoLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5c1xuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzZWFyY2guXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VhcmNoIGZvci5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW58bnVtYmVyfSBbZnJvbUluZGV4PTBdIFRoZSBpbmRleCB0byBzZWFyY2ggZnJvbSBvciBgdHJ1ZWBcbiAgICAgKiAgdG8gcGVyZm9ybSBhIGJpbmFyeSBzZWFyY2ggb24gYSBzb3J0ZWQgYXJyYXkuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIG1hdGNoZWQgdmFsdWUgb3IgYC0xYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pbmRleE9mKFsxLCAyLCAzLCAxLCAyLCAzXSwgMik7XG4gICAgICogLy8gPT4gMVxuICAgICAqXG4gICAgICogXy5pbmRleE9mKFsxLCAyLCAzLCAxLCAyLCAzXSwgMiwgMyk7XG4gICAgICogLy8gPT4gNFxuICAgICAqXG4gICAgICogXy5pbmRleE9mKFsxLCAxLCAyLCAyLCAzLCAzXSwgMiwgdHJ1ZSk7XG4gICAgICogLy8gPT4gMlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGluZGV4T2YoYXJyYXksIHZhbHVlLCBmcm9tSW5kZXgpIHtcbiAgICAgIGlmICh0eXBlb2YgZnJvbUluZGV4ID09ICdudW1iZXInKSB7XG4gICAgICAgIHZhciBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG4gICAgICAgIGZyb21JbmRleCA9IChmcm9tSW5kZXggPCAwID8gbmF0aXZlTWF4KDAsIGxlbmd0aCArIGZyb21JbmRleCkgOiBmcm9tSW5kZXggfHwgMCk7XG4gICAgICB9IGVsc2UgaWYgKGZyb21JbmRleCkge1xuICAgICAgICB2YXIgaW5kZXggPSBzb3J0ZWRJbmRleChhcnJheSwgdmFsdWUpO1xuICAgICAgICByZXR1cm4gYXJyYXlbaW5kZXhdID09PSB2YWx1ZSA/IGluZGV4IDogLTE7XG4gICAgICB9XG4gICAgICByZXR1cm4gYmFzZUluZGV4T2YoYXJyYXksIHZhbHVlLCBmcm9tSW5kZXgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgYWxsIGJ1dCB0aGUgbGFzdCBlbGVtZW50IG9yIGxhc3QgYG5gIGVsZW1lbnRzIG9mIGFuIGFycmF5LiBJZiBhXG4gICAgICogY2FsbGJhY2sgaXMgcHJvdmlkZWQgZWxlbWVudHMgYXQgdGhlIGVuZCBvZiB0aGUgYXJyYXkgYXJlIGV4Y2x1ZGVkIGZyb21cbiAgICAgKiB0aGUgcmVzdWx0IGFzIGxvbmcgYXMgdGhlIGNhbGxiYWNrIHJldHVybnMgdHJ1ZXkuIFRoZSBjYWxsYmFjayBpcyBib3VuZFxuICAgICAqIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czsgKHZhbHVlLCBpbmRleCwgYXJyYXkpLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXG4gICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXG4gICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcbiAgICAgKiBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fG51bWJlcnxzdHJpbmd9IFtjYWxsYmFjaz0xXSBUaGUgZnVuY3Rpb24gY2FsbGVkXG4gICAgICogIHBlciBlbGVtZW50IG9yIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgdG8gZXhjbHVkZS4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yXG4gICAgICogIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWQgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCJcbiAgICAgKiAgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBzbGljZSBvZiBgYXJyYXlgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmluaXRpYWwoWzEsIDIsIDNdKTtcbiAgICAgKiAvLyA9PiBbMSwgMl1cbiAgICAgKlxuICAgICAqIF8uaW5pdGlhbChbMSwgMiwgM10sIDIpO1xuICAgICAqIC8vID0+IFsxXVxuICAgICAqXG4gICAgICogXy5pbml0aWFsKFsxLCAyLCAzXSwgZnVuY3Rpb24obnVtKSB7XG4gICAgICogICByZXR1cm4gbnVtID4gMTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBbMV1cbiAgICAgKlxuICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xuICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAgJ2Jsb2NrZWQnOiBmYWxzZSwgJ2VtcGxveWVyJzogJ3NsYXRlJyB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAgJ2Jsb2NrZWQnOiB0cnVlLCAgJ2VtcGxveWVyJzogJ3NsYXRlJyB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdwZWJibGVzJywgJ2Jsb2NrZWQnOiB0cnVlLCAgJ2VtcGxveWVyJzogJ25hJyB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uaW5pdGlhbChjaGFyYWN0ZXJzLCAnYmxvY2tlZCcpO1xuICAgICAqIC8vID0+IFt7ICduYW1lJzogJ2Jhcm5leScsICAnYmxvY2tlZCc6IGZhbHNlLCAnZW1wbG95ZXInOiAnc2xhdGUnIH1dXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ud2hlcmVcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnBsdWNrKF8uaW5pdGlhbChjaGFyYWN0ZXJzLCB7ICdlbXBsb3llcic6ICduYScgfSksICduYW1lJyk7XG4gICAgICogLy8gPT4gWydiYXJuZXknLCAnZnJlZCddXG4gICAgICovXG4gICAgZnVuY3Rpb24gaW5pdGlhbChhcnJheSwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIHZhciBuID0gMCxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG5cbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT0gJ251bWJlcicgJiYgY2FsbGJhY2sgIT0gbnVsbCkge1xuICAgICAgICB2YXIgaW5kZXggPSBsZW5ndGg7XG4gICAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcbiAgICAgICAgd2hpbGUgKGluZGV4LS0gJiYgY2FsbGJhY2soYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSB7XG4gICAgICAgICAgbisrO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuID0gKGNhbGxiYWNrID09IG51bGwgfHwgdGhpc0FyZykgPyAxIDogY2FsbGJhY2sgfHwgbjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzbGljZShhcnJheSwgMCwgbmF0aXZlTWluKG5hdGl2ZU1heCgwLCBsZW5ndGggLSBuKSwgbGVuZ3RoKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiB1bmlxdWUgdmFsdWVzIHByZXNlbnQgaW4gYWxsIHByb3ZpZGVkIGFycmF5cyB1c2luZ1xuICAgICAqIHN0cmljdCBlcXVhbGl0eSBmb3IgY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXG4gICAgICogQHBhcmFtIHsuLi5BcnJheX0gW2FycmF5XSBUaGUgYXJyYXlzIHRvIGluc3BlY3QuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGFuIGFycmF5IG9mIHNoYXJlZCB2YWx1ZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaW50ZXJzZWN0aW9uKFsxLCAyLCAzXSwgWzUsIDIsIDEsIDRdLCBbMiwgMV0pO1xuICAgICAqIC8vID0+IFsxLCAyXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGludGVyc2VjdGlvbigpIHtcbiAgICAgIHZhciBhcmdzID0gW10sXG4gICAgICAgICAgYXJnc0luZGV4ID0gLTEsXG4gICAgICAgICAgYXJnc0xlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGgsXG4gICAgICAgICAgY2FjaGVzID0gZ2V0QXJyYXkoKSxcbiAgICAgICAgICBpbmRleE9mID0gZ2V0SW5kZXhPZigpLFxuICAgICAgICAgIHRydXN0SW5kZXhPZiA9IGluZGV4T2YgPT09IGJhc2VJbmRleE9mLFxuICAgICAgICAgIHNlZW4gPSBnZXRBcnJheSgpO1xuXG4gICAgICB3aGlsZSAoKythcmdzSW5kZXggPCBhcmdzTGVuZ3RoKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGFyZ3VtZW50c1thcmdzSW5kZXhdO1xuICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkgfHwgaXNBcmd1bWVudHModmFsdWUpKSB7XG4gICAgICAgICAgYXJncy5wdXNoKHZhbHVlKTtcbiAgICAgICAgICBjYWNoZXMucHVzaCh0cnVzdEluZGV4T2YgJiYgdmFsdWUubGVuZ3RoID49IGxhcmdlQXJyYXlTaXplICYmXG4gICAgICAgICAgICBjcmVhdGVDYWNoZShhcmdzSW5kZXggPyBhcmdzW2FyZ3NJbmRleF0gOiBzZWVuKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHZhciBhcnJheSA9IGFyZ3NbMF0sXG4gICAgICAgICAgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDAsXG4gICAgICAgICAgcmVzdWx0ID0gW107XG5cbiAgICAgIG91dGVyOlxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIGNhY2hlID0gY2FjaGVzWzBdO1xuICAgICAgICB2YWx1ZSA9IGFycmF5W2luZGV4XTtcblxuICAgICAgICBpZiAoKGNhY2hlID8gY2FjaGVJbmRleE9mKGNhY2hlLCB2YWx1ZSkgOiBpbmRleE9mKHNlZW4sIHZhbHVlKSkgPCAwKSB7XG4gICAgICAgICAgYXJnc0luZGV4ID0gYXJnc0xlbmd0aDtcbiAgICAgICAgICAoY2FjaGUgfHwgc2VlbikucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgd2hpbGUgKC0tYXJnc0luZGV4KSB7XG4gICAgICAgICAgICBjYWNoZSA9IGNhY2hlc1thcmdzSW5kZXhdO1xuICAgICAgICAgICAgaWYgKChjYWNoZSA/IGNhY2hlSW5kZXhPZihjYWNoZSwgdmFsdWUpIDogaW5kZXhPZihhcmdzW2FyZ3NJbmRleF0sIHZhbHVlKSkgPCAwKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlIG91dGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHdoaWxlIChhcmdzTGVuZ3RoLS0pIHtcbiAgICAgICAgY2FjaGUgPSBjYWNoZXNbYXJnc0xlbmd0aF07XG4gICAgICAgIGlmIChjYWNoZSkge1xuICAgICAgICAgIHJlbGVhc2VPYmplY3QoY2FjaGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZWxlYXNlQXJyYXkoY2FjaGVzKTtcbiAgICAgIHJlbGVhc2VBcnJheShzZWVuKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgbGFzdCBlbGVtZW50IG9yIGxhc3QgYG5gIGVsZW1lbnRzIG9mIGFuIGFycmF5LiBJZiBhIGNhbGxiYWNrIGlzXG4gICAgICogcHJvdmlkZWQgZWxlbWVudHMgYXQgdGhlIGVuZCBvZiB0aGUgYXJyYXkgYXJlIHJldHVybmVkIGFzIGxvbmcgYXMgdGhlXG4gICAgICogY2FsbGJhY2sgcmV0dXJucyB0cnVleS4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZFxuICAgICAqIHdpdGggdGhyZWUgYXJndW1lbnRzOyAodmFsdWUsIGluZGV4LCBhcnJheSkuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcbiAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcbiAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxuICAgICAqIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheXNcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcXVlcnkuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8bnVtYmVyfHN0cmluZ30gW2NhbGxiYWNrXSBUaGUgZnVuY3Rpb24gY2FsbGVkXG4gICAgICogIHBlciBlbGVtZW50IG9yIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgdG8gcmV0dXJuLiBJZiBhIHByb3BlcnR5IG5hbWUgb3JcbiAgICAgKiAgb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZCB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIlxuICAgICAqICBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBsYXN0IGVsZW1lbnQocykgb2YgYGFycmF5YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5sYXN0KFsxLCAyLCAzXSk7XG4gICAgICogLy8gPT4gM1xuICAgICAqXG4gICAgICogXy5sYXN0KFsxLCAyLCAzXSwgMik7XG4gICAgICogLy8gPT4gWzIsIDNdXG4gICAgICpcbiAgICAgKiBfLmxhc3QoWzEsIDIsIDNdLCBmdW5jdGlvbihudW0pIHtcbiAgICAgKiAgIHJldHVybiBudW0gPiAxO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IFsyLCAzXVxuICAgICAqXG4gICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXG4gICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICAnYmxvY2tlZCc6IGZhbHNlLCAnZW1wbG95ZXInOiAnc2xhdGUnIH0sXG4gICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICAnYmxvY2tlZCc6IHRydWUsICAnZW1wbG95ZXInOiAnc2xhdGUnIH0sXG4gICAgICogICB7ICduYW1lJzogJ3BlYmJsZXMnLCAnYmxvY2tlZCc6IHRydWUsICAnZW1wbG95ZXInOiAnbmEnIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5wbHVjayhfLmxhc3QoY2hhcmFjdGVycywgJ2Jsb2NrZWQnKSwgJ25hbWUnKTtcbiAgICAgKiAvLyA9PiBbJ2ZyZWQnLCAncGViYmxlcyddXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ud2hlcmVcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmxhc3QoY2hhcmFjdGVycywgeyAnZW1wbG95ZXInOiAnbmEnIH0pO1xuICAgICAqIC8vID0+IFt7ICduYW1lJzogJ3BlYmJsZXMnLCAnYmxvY2tlZCc6IHRydWUsICdlbXBsb3llcic6ICduYScgfV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBsYXN0KGFycmF5LCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgdmFyIG4gPSAwLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcblxuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPSAnbnVtYmVyJyAmJiBjYWxsYmFjayAhPSBudWxsKSB7XG4gICAgICAgIHZhciBpbmRleCA9IGxlbmd0aDtcbiAgICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xuICAgICAgICB3aGlsZSAoaW5kZXgtLSAmJiBjYWxsYmFjayhhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHtcbiAgICAgICAgICBuKys7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG4gPSBjYWxsYmFjaztcbiAgICAgICAgaWYgKG4gPT0gbnVsbCB8fCB0aGlzQXJnKSB7XG4gICAgICAgICAgcmV0dXJuIGFycmF5ID8gYXJyYXlbbGVuZ3RoIC0gMV0gOiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBzbGljZShhcnJheSwgbmF0aXZlTWF4KDAsIGxlbmd0aCAtIG4pKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBpbmRleCBhdCB3aGljaCB0aGUgbGFzdCBvY2N1cnJlbmNlIG9mIGB2YWx1ZWAgaXMgZm91bmQgdXNpbmcgc3RyaWN0XG4gICAgICogZXF1YWxpdHkgZm9yIGNvbXBhcmlzb25zLCBpLmUuIGA9PT1gLiBJZiBgZnJvbUluZGV4YCBpcyBuZWdhdGl2ZSwgaXQgaXMgdXNlZFxuICAgICAqIGFzIHRoZSBvZmZzZXQgZnJvbSB0aGUgZW5kIG9mIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXG4gICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXG4gICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcbiAgICAgKiBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNlYXJjaC5cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZWFyY2ggZm9yLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbZnJvbUluZGV4PWFycmF5Lmxlbmd0aC0xXSBUaGUgaW5kZXggdG8gc2VhcmNoIGZyb20uXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIG1hdGNoZWQgdmFsdWUgb3IgYC0xYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5sYXN0SW5kZXhPZihbMSwgMiwgMywgMSwgMiwgM10sIDIpO1xuICAgICAqIC8vID0+IDRcbiAgICAgKlxuICAgICAqIF8ubGFzdEluZGV4T2YoWzEsIDIsIDMsIDEsIDIsIDNdLCAyLCAzKTtcbiAgICAgKiAvLyA9PiAxXG4gICAgICovXG4gICAgZnVuY3Rpb24gbGFzdEluZGV4T2YoYXJyYXksIHZhbHVlLCBmcm9tSW5kZXgpIHtcbiAgICAgIHZhciBpbmRleCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcbiAgICAgIGlmICh0eXBlb2YgZnJvbUluZGV4ID09ICdudW1iZXInKSB7XG4gICAgICAgIGluZGV4ID0gKGZyb21JbmRleCA8IDAgPyBuYXRpdmVNYXgoMCwgaW5kZXggKyBmcm9tSW5kZXgpIDogbmF0aXZlTWluKGZyb21JbmRleCwgaW5kZXggLSAxKSkgKyAxO1xuICAgICAgfVxuICAgICAgd2hpbGUgKGluZGV4LS0pIHtcbiAgICAgICAgaWYgKGFycmF5W2luZGV4XSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiAtMTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGFsbCBwcm92aWRlZCB2YWx1ZXMgZnJvbSB0aGUgZ2l2ZW4gYXJyYXkgdXNpbmcgc3RyaWN0IGVxdWFsaXR5IGZvclxuICAgICAqIGNvbXBhcmlzb25zLCBpLmUuIGA9PT1gLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5c1xuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBtb2RpZnkuXG4gICAgICogQHBhcmFtIHsuLi4qfSBbdmFsdWVdIFRoZSB2YWx1ZXMgdG8gcmVtb3ZlLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgYXJyYXlgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgYXJyYXkgPSBbMSwgMiwgMywgMSwgMiwgM107XG4gICAgICogXy5wdWxsKGFycmF5LCAyLCAzKTtcbiAgICAgKiBjb25zb2xlLmxvZyhhcnJheSk7XG4gICAgICogLy8gPT4gWzEsIDFdXG4gICAgICovXG4gICAgZnVuY3Rpb24gcHVsbChhcnJheSkge1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHMsXG4gICAgICAgICAgYXJnc0luZGV4ID0gMCxcbiAgICAgICAgICBhcmdzTGVuZ3RoID0gYXJncy5sZW5ndGgsXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuXG4gICAgICB3aGlsZSAoKythcmdzSW5kZXggPCBhcmdzTGVuZ3RoKSB7XG4gICAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgICAgdmFsdWUgPSBhcmdzW2FyZ3NJbmRleF07XG4gICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKGFycmF5W2luZGV4XSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgIHNwbGljZS5jYWxsKGFycmF5LCBpbmRleC0tLCAxKTtcbiAgICAgICAgICAgIGxlbmd0aC0tO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgbnVtYmVycyAocG9zaXRpdmUgYW5kL29yIG5lZ2F0aXZlKSBwcm9ncmVzc2luZyBmcm9tXG4gICAgICogYHN0YXJ0YCB1cCB0byBidXQgbm90IGluY2x1ZGluZyBgZW5kYC4gSWYgYHN0YXJ0YCBpcyBsZXNzIHRoYW4gYHN0b3BgIGFcbiAgICAgKiB6ZXJvLWxlbmd0aCByYW5nZSBpcyBjcmVhdGVkIHVubGVzcyBhIG5lZ2F0aXZlIGBzdGVwYCBpcyBzcGVjaWZpZWQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydD0wXSBUaGUgc3RhcnQgb2YgdGhlIHJhbmdlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgVGhlIGVuZCBvZiB0aGUgcmFuZ2UuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtzdGVwPTFdIFRoZSB2YWx1ZSB0byBpbmNyZW1lbnQgb3IgZGVjcmVtZW50IGJ5LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIG5ldyByYW5nZSBhcnJheS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5yYW5nZSg0KTtcbiAgICAgKiAvLyA9PiBbMCwgMSwgMiwgM11cbiAgICAgKlxuICAgICAqIF8ucmFuZ2UoMSwgNSk7XG4gICAgICogLy8gPT4gWzEsIDIsIDMsIDRdXG4gICAgICpcbiAgICAgKiBfLnJhbmdlKDAsIDIwLCA1KTtcbiAgICAgKiAvLyA9PiBbMCwgNSwgMTAsIDE1XVxuICAgICAqXG4gICAgICogXy5yYW5nZSgwLCAtNCwgLTEpO1xuICAgICAqIC8vID0+IFswLCAtMSwgLTIsIC0zXVxuICAgICAqXG4gICAgICogXy5yYW5nZSgxLCA0LCAwKTtcbiAgICAgKiAvLyA9PiBbMSwgMSwgMV1cbiAgICAgKlxuICAgICAqIF8ucmFuZ2UoMCk7XG4gICAgICogLy8gPT4gW11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiByYW5nZShzdGFydCwgZW5kLCBzdGVwKSB7XG4gICAgICBzdGFydCA9ICtzdGFydCB8fCAwO1xuICAgICAgc3RlcCA9IHR5cGVvZiBzdGVwID09ICdudW1iZXInID8gc3RlcCA6ICgrc3RlcCB8fCAxKTtcblxuICAgICAgaWYgKGVuZCA9PSBudWxsKSB7XG4gICAgICAgIGVuZCA9IHN0YXJ0O1xuICAgICAgICBzdGFydCA9IDA7XG4gICAgICB9XG4gICAgICAvLyB1c2UgYEFycmF5KGxlbmd0aClgIHNvIGVuZ2luZXMgbGlrZSBDaGFrcmEgYW5kIFY4IGF2b2lkIHNsb3dlciBtb2Rlc1xuICAgICAgLy8gaHR0cDovL3lvdXR1LmJlL1hBcUlwR1U4WlprI3Q9MTdtMjVzXG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBuYXRpdmVNYXgoMCwgY2VpbCgoZW5kIC0gc3RhcnQpIC8gKHN0ZXAgfHwgMSkpKSxcbiAgICAgICAgICByZXN1bHQgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICByZXN1bHRbaW5kZXhdID0gc3RhcnQ7XG4gICAgICAgIHN0YXJ0ICs9IHN0ZXA7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYWxsIGVsZW1lbnRzIGZyb20gYW4gYXJyYXkgdGhhdCB0aGUgY2FsbGJhY2sgcmV0dXJucyB0cnVleSBmb3JcbiAgICAgKiBhbmQgcmV0dXJucyBhbiBhcnJheSBvZiByZW1vdmVkIGVsZW1lbnRzLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgXG4gICAgICogYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM7ICh2YWx1ZSwgaW5kZXgsIGFycmF5KS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xuICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXG4gICAgICogZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5c1xuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBtb2RpZnkuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcbiAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgYXJyYXkgb2YgcmVtb3ZlZCBlbGVtZW50cy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGFycmF5ID0gWzEsIDIsIDMsIDQsIDUsIDZdO1xuICAgICAqIHZhciBldmVucyA9IF8ucmVtb3ZlKGFycmF5LCBmdW5jdGlvbihudW0pIHsgcmV0dXJuIG51bSAlIDIgPT0gMDsgfSk7XG4gICAgICpcbiAgICAgKiBjb25zb2xlLmxvZyhhcnJheSk7XG4gICAgICogLy8gPT4gWzEsIDMsIDVdXG4gICAgICpcbiAgICAgKiBjb25zb2xlLmxvZyhldmVucyk7XG4gICAgICogLy8gPT4gWzIsIDQsIDZdXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVtb3ZlKGFycmF5LCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwLFxuICAgICAgICAgIHJlc3VsdCA9IFtdO1xuXG4gICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIgdmFsdWUgPSBhcnJheVtpbmRleF07XG4gICAgICAgIGlmIChjYWxsYmFjayh2YWx1ZSwgaW5kZXgsIGFycmF5KSkge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgICAgICBzcGxpY2UuY2FsbChhcnJheSwgaW5kZXgtLSwgMSk7XG4gICAgICAgICAgbGVuZ3RoLS07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIG9wcG9zaXRlIG9mIGBfLmluaXRpYWxgIHRoaXMgbWV0aG9kIGdldHMgYWxsIGJ1dCB0aGUgZmlyc3QgZWxlbWVudCBvclxuICAgICAqIGZpcnN0IGBuYCBlbGVtZW50cyBvZiBhbiBhcnJheS4gSWYgYSBjYWxsYmFjayBmdW5jdGlvbiBpcyBwcm92aWRlZCBlbGVtZW50c1xuICAgICAqIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGFycmF5IGFyZSBleGNsdWRlZCBmcm9tIHRoZSByZXN1bHQgYXMgbG9uZyBhcyB0aGVcbiAgICAgKiBjYWxsYmFjayByZXR1cm5zIHRydWV5LiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkXG4gICAgICogd2l0aCB0aHJlZSBhcmd1bWVudHM7ICh2YWx1ZSwgaW5kZXgsIGFycmF5KS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xuICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXG4gICAgICogZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIGRyb3AsIHRhaWxcbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fG51bWJlcnxzdHJpbmd9IFtjYWxsYmFjaz0xXSBUaGUgZnVuY3Rpb24gY2FsbGVkXG4gICAgICogIHBlciBlbGVtZW50IG9yIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgdG8gZXhjbHVkZS4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yXG4gICAgICogIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWQgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCJcbiAgICAgKiAgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBzbGljZSBvZiBgYXJyYXlgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnJlc3QoWzEsIDIsIDNdKTtcbiAgICAgKiAvLyA9PiBbMiwgM11cbiAgICAgKlxuICAgICAqIF8ucmVzdChbMSwgMiwgM10sIDIpO1xuICAgICAqIC8vID0+IFszXVxuICAgICAqXG4gICAgICogXy5yZXN0KFsxLCAyLCAzXSwgZnVuY3Rpb24obnVtKSB7XG4gICAgICogICByZXR1cm4gbnVtIDwgMztcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBbM11cbiAgICAgKlxuICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xuICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAgJ2Jsb2NrZWQnOiB0cnVlLCAgJ2VtcGxveWVyJzogJ3NsYXRlJyB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAgJ2Jsb2NrZWQnOiBmYWxzZSwgICdlbXBsb3llcic6ICdzbGF0ZScgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAncGViYmxlcycsICdibG9ja2VkJzogdHJ1ZSwgJ2VtcGxveWVyJzogJ25hJyB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ucGx1Y2soXy5yZXN0KGNoYXJhY3RlcnMsICdibG9ja2VkJyksICduYW1lJyk7XG4gICAgICogLy8gPT4gWydmcmVkJywgJ3BlYmJsZXMnXVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLndoZXJlXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5yZXN0KGNoYXJhY3RlcnMsIHsgJ2VtcGxveWVyJzogJ3NsYXRlJyB9KTtcbiAgICAgKiAvLyA9PiBbeyAnbmFtZSc6ICdwZWJibGVzJywgJ2Jsb2NrZWQnOiB0cnVlLCAnZW1wbG95ZXInOiAnbmEnIH1dXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVzdChhcnJheSwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT0gJ251bWJlcicgJiYgY2FsbGJhY2sgIT0gbnVsbCkge1xuICAgICAgICB2YXIgbiA9IDAsXG4gICAgICAgICAgICBpbmRleCA9IC0xLFxuICAgICAgICAgICAgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuXG4gICAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcbiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGggJiYgY2FsbGJhY2soYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSB7XG4gICAgICAgICAgbisrO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuID0gKGNhbGxiYWNrID09IG51bGwgfHwgdGhpc0FyZykgPyAxIDogbmF0aXZlTWF4KDAsIGNhbGxiYWNrKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzbGljZShhcnJheSwgbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlcyBhIGJpbmFyeSBzZWFyY2ggdG8gZGV0ZXJtaW5lIHRoZSBzbWFsbGVzdCBpbmRleCBhdCB3aGljaCBhIHZhbHVlXG4gICAgICogc2hvdWxkIGJlIGluc2VydGVkIGludG8gYSBnaXZlbiBzb3J0ZWQgYXJyYXkgaW4gb3JkZXIgdG8gbWFpbnRhaW4gdGhlIHNvcnRcbiAgICAgKiBvcmRlciBvZiB0aGUgYXJyYXkuIElmIGEgY2FsbGJhY2sgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSBleGVjdXRlZCBmb3JcbiAgICAgKiBgdmFsdWVgIGFuZCBlYWNoIGVsZW1lbnQgb2YgYGFycmF5YCB0byBjb21wdXRlIHRoZWlyIHNvcnQgcmFua2luZy4gVGhlXG4gICAgICogY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggb25lIGFyZ3VtZW50OyAodmFsdWUpLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXG4gICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXG4gICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcbiAgICAgKiBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGluc3BlY3QuXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gZXZhbHVhdGUuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcbiAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBhdCB3aGljaCBgdmFsdWVgIHNob3VsZCBiZSBpbnNlcnRlZFxuICAgICAqICBpbnRvIGBhcnJheWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uc29ydGVkSW5kZXgoWzIwLCAzMCwgNTBdLCA0MCk7XG4gICAgICogLy8gPT4gMlxuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5zb3J0ZWRJbmRleChbeyAneCc6IDIwIH0sIHsgJ3gnOiAzMCB9LCB7ICd4JzogNTAgfV0sIHsgJ3gnOiA0MCB9LCAneCcpO1xuICAgICAqIC8vID0+IDJcbiAgICAgKlxuICAgICAqIHZhciBkaWN0ID0ge1xuICAgICAqICAgJ3dvcmRUb051bWJlcic6IHsgJ3R3ZW50eSc6IDIwLCAndGhpcnR5JzogMzAsICdmb3VydHknOiA0MCwgJ2ZpZnR5JzogNTAgfVxuICAgICAqIH07XG4gICAgICpcbiAgICAgKiBfLnNvcnRlZEluZGV4KFsndHdlbnR5JywgJ3RoaXJ0eScsICdmaWZ0eSddLCAnZm91cnR5JywgZnVuY3Rpb24od29yZCkge1xuICAgICAqICAgcmV0dXJuIGRpY3Qud29yZFRvTnVtYmVyW3dvcmRdO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IDJcbiAgICAgKlxuICAgICAqIF8uc29ydGVkSW5kZXgoWyd0d2VudHknLCAndGhpcnR5JywgJ2ZpZnR5J10sICdmb3VydHknLCBmdW5jdGlvbih3b3JkKSB7XG4gICAgICogICByZXR1cm4gdGhpcy53b3JkVG9OdW1iZXJbd29yZF07XG4gICAgICogfSwgZGljdCk7XG4gICAgICogLy8gPT4gMlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNvcnRlZEluZGV4KGFycmF5LCB2YWx1ZSwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIHZhciBsb3cgPSAwLFxuICAgICAgICAgIGhpZ2ggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IGxvdztcblxuICAgICAgLy8gZXhwbGljaXRseSByZWZlcmVuY2UgYGlkZW50aXR5YCBmb3IgYmV0dGVyIGlubGluaW5nIGluIEZpcmVmb3hcbiAgICAgIGNhbGxiYWNrID0gY2FsbGJhY2sgPyBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDEpIDogaWRlbnRpdHk7XG4gICAgICB2YWx1ZSA9IGNhbGxiYWNrKHZhbHVlKTtcblxuICAgICAgd2hpbGUgKGxvdyA8IGhpZ2gpIHtcbiAgICAgICAgdmFyIG1pZCA9IChsb3cgKyBoaWdoKSA+Pj4gMTtcbiAgICAgICAgKGNhbGxiYWNrKGFycmF5W21pZF0pIDwgdmFsdWUpXG4gICAgICAgICAgPyBsb3cgPSBtaWQgKyAxXG4gICAgICAgICAgOiBoaWdoID0gbWlkO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGxvdztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHVuaXF1ZSB2YWx1ZXMsIGluIG9yZGVyLCBvZiB0aGUgcHJvdmlkZWQgYXJyYXlzIHVzaW5nXG4gICAgICogc3RyaWN0IGVxdWFsaXR5IGZvciBjb21wYXJpc29ucywgaS5lLiBgPT09YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheXNcbiAgICAgKiBAcGFyYW0gey4uLkFycmF5fSBbYXJyYXldIFRoZSBhcnJheXMgdG8gaW5zcGVjdC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYW4gYXJyYXkgb2YgY29tYmluZWQgdmFsdWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnVuaW9uKFsxLCAyLCAzXSwgWzUsIDIsIDEsIDRdLCBbMiwgMV0pO1xuICAgICAqIC8vID0+IFsxLCAyLCAzLCA1LCA0XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHVuaW9uKCkge1xuICAgICAgcmV0dXJuIGJhc2VVbmlxKGJhc2VGbGF0dGVuKGFyZ3VtZW50cywgdHJ1ZSwgdHJ1ZSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBkdXBsaWNhdGUtdmFsdWUtZnJlZSB2ZXJzaW9uIG9mIGFuIGFycmF5IHVzaW5nIHN0cmljdCBlcXVhbGl0eVxuICAgICAqIGZvciBjb21wYXJpc29ucywgaS5lLiBgPT09YC4gSWYgdGhlIGFycmF5IGlzIHNvcnRlZCwgcHJvdmlkaW5nXG4gICAgICogYHRydWVgIGZvciBgaXNTb3J0ZWRgIHdpbGwgdXNlIGEgZmFzdGVyIGFsZ29yaXRobS4gSWYgYSBjYWxsYmFjayBpcyBwcm92aWRlZFxuICAgICAqIGVhY2ggZWxlbWVudCBvZiBgYXJyYXlgIGlzIHBhc3NlZCB0aHJvdWdoIHRoZSBjYWxsYmFjayBiZWZvcmUgdW5pcXVlbmVzc1xuICAgICAqIGlzIGNvbXB1dGVkLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWVcbiAgICAgKiBhcmd1bWVudHM7ICh2YWx1ZSwgaW5kZXgsIGFycmF5KS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xuICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXG4gICAgICogZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIHVuaXF1ZVxuICAgICAqIEBjYXRlZ29yeSBBcnJheXNcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcHJvY2Vzcy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc1NvcnRlZD1mYWxzZV0gQSBmbGFnIHRvIGluZGljYXRlIHRoYXQgYGFycmF5YCBpcyBzb3J0ZWQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcbiAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBkdXBsaWNhdGUtdmFsdWUtZnJlZSBhcnJheS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy51bmlxKFsxLCAyLCAxLCAzLCAxXSk7XG4gICAgICogLy8gPT4gWzEsIDIsIDNdXG4gICAgICpcbiAgICAgKiBfLnVuaXEoWzEsIDEsIDIsIDIsIDNdLCB0cnVlKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgM11cbiAgICAgKlxuICAgICAqIF8udW5pcShbJ0EnLCAnYicsICdDJywgJ2EnLCAnQicsICdjJ10sIGZ1bmN0aW9uKGxldHRlcikgeyByZXR1cm4gbGV0dGVyLnRvTG93ZXJDYXNlKCk7IH0pO1xuICAgICAqIC8vID0+IFsnQScsICdiJywgJ0MnXVxuICAgICAqXG4gICAgICogXy51bmlxKFsxLCAyLjUsIDMsIDEuNSwgMiwgMy41XSwgZnVuY3Rpb24obnVtKSB7IHJldHVybiB0aGlzLmZsb29yKG51bSk7IH0sIE1hdGgpO1xuICAgICAqIC8vID0+IFsxLCAyLjUsIDNdXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnVuaXEoW3sgJ3gnOiAxIH0sIHsgJ3gnOiAyIH0sIHsgJ3gnOiAxIH1dLCAneCcpO1xuICAgICAqIC8vID0+IFt7ICd4JzogMSB9LCB7ICd4JzogMiB9XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHVuaXEoYXJyYXksIGlzU29ydGVkLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgLy8ganVnZ2xlIGFyZ3VtZW50c1xuICAgICAgaWYgKHR5cGVvZiBpc1NvcnRlZCAhPSAnYm9vbGVhbicgJiYgaXNTb3J0ZWQgIT0gbnVsbCkge1xuICAgICAgICB0aGlzQXJnID0gY2FsbGJhY2s7XG4gICAgICAgIGNhbGxiYWNrID0gKHR5cGVvZiBpc1NvcnRlZCAhPSAnZnVuY3Rpb24nICYmIHRoaXNBcmcgJiYgdGhpc0FyZ1tpc1NvcnRlZF0gPT09IGFycmF5KSA/IG51bGwgOiBpc1NvcnRlZDtcbiAgICAgICAgaXNTb3J0ZWQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChjYWxsYmFjayAhPSBudWxsKSB7XG4gICAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBiYXNlVW5pcShhcnJheSwgaXNTb3J0ZWQsIGNhbGxiYWNrKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IGV4Y2x1ZGluZyBhbGwgcHJvdmlkZWQgdmFsdWVzIHVzaW5nIHN0cmljdCBlcXVhbGl0eSBmb3JcbiAgICAgKiBjb21wYXJpc29ucywgaS5lLiBgPT09YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheXNcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gZmlsdGVyLlxuICAgICAqIEBwYXJhbSB7Li4uKn0gW3ZhbHVlXSBUaGUgdmFsdWVzIHRvIGV4Y2x1ZGUuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIGZpbHRlcmVkIHZhbHVlcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy53aXRob3V0KFsxLCAyLCAxLCAwLCAzLCAxLCA0XSwgMCwgMSk7XG4gICAgICogLy8gPT4gWzIsIDMsIDRdXG4gICAgICovXG4gICAgZnVuY3Rpb24gd2l0aG91dChhcnJheSkge1xuICAgICAgcmV0dXJuIGJhc2VEaWZmZXJlbmNlKGFycmF5LCBzbGljZShhcmd1bWVudHMsIDEpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IHRoYXQgaXMgdGhlIHN5bW1ldHJpYyBkaWZmZXJlbmNlIG9mIHRoZSBwcm92aWRlZCBhcnJheXMuXG4gICAgICogU2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU3ltbWV0cmljX2RpZmZlcmVuY2UuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXG4gICAgICogQHBhcmFtIHsuLi5BcnJheX0gW2FycmF5XSBUaGUgYXJyYXlzIHRvIGluc3BlY3QuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGFuIGFycmF5IG9mIHZhbHVlcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy54b3IoWzEsIDIsIDNdLCBbNSwgMiwgMSwgNF0pO1xuICAgICAqIC8vID0+IFszLCA1LCA0XVxuICAgICAqXG4gICAgICogXy54b3IoWzEsIDIsIDVdLCBbMiwgMywgNV0sIFszLCA0LCA1XSk7XG4gICAgICogLy8gPT4gWzEsIDQsIDVdXG4gICAgICovXG4gICAgZnVuY3Rpb24geG9yKCkge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIGFycmF5ID0gYXJndW1lbnRzW2luZGV4XTtcbiAgICAgICAgaWYgKGlzQXJyYXkoYXJyYXkpIHx8IGlzQXJndW1lbnRzKGFycmF5KSkge1xuICAgICAgICAgIHZhciByZXN1bHQgPSByZXN1bHRcbiAgICAgICAgICAgID8gYmFzZVVuaXEoYmFzZURpZmZlcmVuY2UocmVzdWx0LCBhcnJheSkuY29uY2F0KGJhc2VEaWZmZXJlbmNlKGFycmF5LCByZXN1bHQpKSlcbiAgICAgICAgICAgIDogYXJyYXk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQgfHwgW107XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiBncm91cGVkIGVsZW1lbnRzLCB0aGUgZmlyc3Qgb2Ygd2hpY2ggY29udGFpbnMgdGhlIGZpcnN0XG4gICAgICogZWxlbWVudHMgb2YgdGhlIGdpdmVuIGFycmF5cywgdGhlIHNlY29uZCBvZiB3aGljaCBjb250YWlucyB0aGUgc2Vjb25kXG4gICAgICogZWxlbWVudHMgb2YgdGhlIGdpdmVuIGFycmF5cywgYW5kIHNvIG9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIHVuemlwXG4gICAgICogQGNhdGVnb3J5IEFycmF5c1xuICAgICAqIEBwYXJhbSB7Li4uQXJyYXl9IFthcnJheV0gQXJyYXlzIHRvIHByb2Nlc3MuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIGdyb3VwZWQgZWxlbWVudHMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uemlwKFsnZnJlZCcsICdiYXJuZXknXSwgWzMwLCA0MF0sIFt0cnVlLCBmYWxzZV0pO1xuICAgICAqIC8vID0+IFtbJ2ZyZWQnLCAzMCwgdHJ1ZV0sIFsnYmFybmV5JywgNDAsIGZhbHNlXV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB6aXAoKSB7XG4gICAgICB2YXIgYXJyYXkgPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50cyA6IGFyZ3VtZW50c1swXSxcbiAgICAgICAgICBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID8gbWF4KHBsdWNrKGFycmF5LCAnbGVuZ3RoJykpIDogMCxcbiAgICAgICAgICByZXN1bHQgPSBBcnJheShsZW5ndGggPCAwID8gMCA6IGxlbmd0aCk7XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHJlc3VsdFtpbmRleF0gPSBwbHVjayhhcnJheSwgaW5kZXgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIG9iamVjdCBjb21wb3NlZCBmcm9tIGFycmF5cyBvZiBga2V5c2AgYW5kIGB2YWx1ZXNgLiBQcm92aWRlXG4gICAgICogZWl0aGVyIGEgc2luZ2xlIHR3byBkaW1lbnNpb25hbCBhcnJheSwgaS5lLiBgW1trZXkxLCB2YWx1ZTFdLCBba2V5MiwgdmFsdWUyXV1gXG4gICAgICogb3IgdHdvIGFycmF5cywgb25lIG9mIGBrZXlzYCBhbmQgb25lIG9mIGNvcnJlc3BvbmRpbmcgYHZhbHVlc2AuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgb2JqZWN0XG4gICAgICogQGNhdGVnb3J5IEFycmF5c1xuICAgICAqIEBwYXJhbSB7QXJyYXl9IGtleXMgVGhlIGFycmF5IG9mIGtleXMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3ZhbHVlcz1bXV0gVGhlIGFycmF5IG9mIHZhbHVlcy5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGFuIG9iamVjdCBjb21wb3NlZCBvZiB0aGUgZ2l2ZW4ga2V5cyBhbmRcbiAgICAgKiAgY29ycmVzcG9uZGluZyB2YWx1ZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uemlwT2JqZWN0KFsnZnJlZCcsICdiYXJuZXknXSwgWzMwLCA0MF0pO1xuICAgICAqIC8vID0+IHsgJ2ZyZWQnOiAzMCwgJ2Jhcm5leSc6IDQwIH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB6aXBPYmplY3Qoa2V5cywgdmFsdWVzKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBrZXlzID8ga2V5cy5sZW5ndGggOiAwLFxuICAgICAgICAgIHJlc3VsdCA9IHt9O1xuXG4gICAgICBpZiAoIXZhbHVlcyAmJiBsZW5ndGggJiYgIWlzQXJyYXkoa2V5c1swXSkpIHtcbiAgICAgICAgdmFsdWVzID0gW107XG4gICAgICB9XG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIga2V5ID0ga2V5c1tpbmRleF07XG4gICAgICAgIGlmICh2YWx1ZXMpIHtcbiAgICAgICAgICByZXN1bHRba2V5XSA9IHZhbHVlc1tpbmRleF07XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5KSB7XG4gICAgICAgICAgcmVzdWx0W2tleVswXV0gPSBrZXlbMV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBleGVjdXRlcyBgZnVuY2AsIHdpdGggIHRoZSBgdGhpc2AgYmluZGluZyBhbmRcbiAgICAgKiBhcmd1bWVudHMgb2YgdGhlIGNyZWF0ZWQgZnVuY3Rpb24sIG9ubHkgYWZ0ZXIgYmVpbmcgY2FsbGVkIGBuYCB0aW1lcy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvbnNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgbnVtYmVyIG9mIHRpbWVzIHRoZSBmdW5jdGlvbiBtdXN0IGJlIGNhbGxlZCBiZWZvcmVcbiAgICAgKiAgYGZ1bmNgIGlzIGV4ZWN1dGVkLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHJlc3RyaWN0LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHJlc3RyaWN0ZWQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBzYXZlcyA9IFsncHJvZmlsZScsICdzZXR0aW5ncyddO1xuICAgICAqXG4gICAgICogdmFyIGRvbmUgPSBfLmFmdGVyKHNhdmVzLmxlbmd0aCwgZnVuY3Rpb24oKSB7XG4gICAgICogICBjb25zb2xlLmxvZygnRG9uZSBzYXZpbmchJyk7XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBfLmZvckVhY2goc2F2ZXMsIGZ1bmN0aW9uKHR5cGUpIHtcbiAgICAgKiAgIGFzeW5jU2F2ZSh7ICd0eXBlJzogdHlwZSwgJ2NvbXBsZXRlJzogZG9uZSB9KTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBsb2dzICdEb25lIHNhdmluZyEnLCBhZnRlciBhbGwgc2F2ZXMgaGF2ZSBjb21wbGV0ZWRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhZnRlcihuLCBmdW5jKSB7XG4gICAgICBpZiAoIWlzRnVuY3Rpb24oZnVuYykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKC0tbiA8IDEpIHtcbiAgICAgICAgICByZXR1cm4gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0LCB3aGVuIGNhbGxlZCwgaW52b2tlcyBgZnVuY2Agd2l0aCB0aGUgYHRoaXNgXG4gICAgICogYmluZGluZyBvZiBgdGhpc0FyZ2AgYW5kIHByZXBlbmRzIGFueSBhZGRpdGlvbmFsIGBiaW5kYCBhcmd1bWVudHMgdG8gdGhvc2VcbiAgICAgKiBwcm92aWRlZCB0byB0aGUgYm91bmQgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25zXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gYmluZC5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGZ1bmNgLlxuICAgICAqIEBwYXJhbSB7Li4uKn0gW2FyZ10gQXJndW1lbnRzIHRvIGJlIHBhcnRpYWxseSBhcHBsaWVkLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGJvdW5kIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgZnVuYyA9IGZ1bmN0aW9uKGdyZWV0aW5nKSB7XG4gICAgICogICByZXR1cm4gZ3JlZXRpbmcgKyAnICcgKyB0aGlzLm5hbWU7XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIGZ1bmMgPSBfLmJpbmQoZnVuYywgeyAnbmFtZSc6ICdmcmVkJyB9LCAnaGknKTtcbiAgICAgKiBmdW5jKCk7XG4gICAgICogLy8gPT4gJ2hpIGZyZWQnXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmluZChmdW5jLCB0aGlzQXJnKSB7XG4gICAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDJcbiAgICAgICAgPyBjcmVhdGVXcmFwcGVyKGZ1bmMsIDE3LCBzbGljZShhcmd1bWVudHMsIDIpLCBudWxsLCB0aGlzQXJnKVxuICAgICAgICA6IGNyZWF0ZVdyYXBwZXIoZnVuYywgMSwgbnVsbCwgbnVsbCwgdGhpc0FyZyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQmluZHMgbWV0aG9kcyBvZiBhbiBvYmplY3QgdG8gdGhlIG9iamVjdCBpdHNlbGYsIG92ZXJ3cml0aW5nIHRoZSBleGlzdGluZ1xuICAgICAqIG1ldGhvZC4gTWV0aG9kIG5hbWVzIG1heSBiZSBzcGVjaWZpZWQgYXMgaW5kaXZpZHVhbCBhcmd1bWVudHMgb3IgYXMgYXJyYXlzXG4gICAgICogb2YgbWV0aG9kIG5hbWVzLiBJZiBubyBtZXRob2QgbmFtZXMgYXJlIHByb3ZpZGVkIGFsbCB0aGUgZnVuY3Rpb24gcHJvcGVydGllc1xuICAgICAqIG9mIGBvYmplY3RgIHdpbGwgYmUgYm91bmQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25zXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGJpbmQgYW5kIGFzc2lnbiB0aGUgYm91bmQgbWV0aG9kcyB0by5cbiAgICAgKiBAcGFyYW0gey4uLnN0cmluZ30gW21ldGhvZE5hbWVdIFRoZSBvYmplY3QgbWV0aG9kIG5hbWVzIHRvXG4gICAgICogIGJpbmQsIHNwZWNpZmllZCBhcyBpbmRpdmlkdWFsIG1ldGhvZCBuYW1lcyBvciBhcnJheXMgb2YgbWV0aG9kIG5hbWVzLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciB2aWV3ID0ge1xuICAgICAqICAgJ2xhYmVsJzogJ2RvY3MnLFxuICAgICAqICAgJ29uQ2xpY2snOiBmdW5jdGlvbigpIHsgY29uc29sZS5sb2coJ2NsaWNrZWQgJyArIHRoaXMubGFiZWwpOyB9XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIF8uYmluZEFsbCh2aWV3KTtcbiAgICAgKiBqUXVlcnkoJyNkb2NzJykub24oJ2NsaWNrJywgdmlldy5vbkNsaWNrKTtcbiAgICAgKiAvLyA9PiBsb2dzICdjbGlja2VkIGRvY3MnLCB3aGVuIHRoZSBidXR0b24gaXMgY2xpY2tlZFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJpbmRBbGwob2JqZWN0KSB7XG4gICAgICB2YXIgZnVuY3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGJhc2VGbGF0dGVuKGFyZ3VtZW50cywgdHJ1ZSwgZmFsc2UsIDEpIDogZnVuY3Rpb25zKG9iamVjdCksXG4gICAgICAgICAgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBmdW5jcy5sZW5ndGg7XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciBrZXkgPSBmdW5jc1tpbmRleF07XG4gICAgICAgIG9iamVjdFtrZXldID0gY3JlYXRlV3JhcHBlcihvYmplY3Rba2V5XSwgMSwgbnVsbCwgbnVsbCwgb2JqZWN0KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQsIHdoZW4gY2FsbGVkLCBpbnZva2VzIHRoZSBtZXRob2QgYXQgYG9iamVjdFtrZXldYFxuICAgICAqIGFuZCBwcmVwZW5kcyBhbnkgYWRkaXRpb25hbCBgYmluZEtleWAgYXJndW1lbnRzIHRvIHRob3NlIHByb3ZpZGVkIHRvIHRoZSBib3VuZFxuICAgICAqIGZ1bmN0aW9uLiBUaGlzIG1ldGhvZCBkaWZmZXJzIGZyb20gYF8uYmluZGAgYnkgYWxsb3dpbmcgYm91bmQgZnVuY3Rpb25zIHRvXG4gICAgICogcmVmZXJlbmNlIG1ldGhvZHMgdGhhdCB3aWxsIGJlIHJlZGVmaW5lZCBvciBkb24ndCB5ZXQgZXhpc3QuXG4gICAgICogU2VlIGh0dHA6Ly9taWNoYXV4LmNhL2FydGljbGVzL2xhenktZnVuY3Rpb24tZGVmaW5pdGlvbi1wYXR0ZXJuLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uc1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0aGUgbWV0aG9kIGJlbG9uZ3MgdG8uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBtZXRob2QuXG4gICAgICogQHBhcmFtIHsuLi4qfSBbYXJnXSBBcmd1bWVudHMgdG8gYmUgcGFydGlhbGx5IGFwcGxpZWQuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYm91bmQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3QgPSB7XG4gICAgICogICAnbmFtZSc6ICdmcmVkJyxcbiAgICAgKiAgICdncmVldCc6IGZ1bmN0aW9uKGdyZWV0aW5nKSB7XG4gICAgICogICAgIHJldHVybiBncmVldGluZyArICcgJyArIHRoaXMubmFtZTtcbiAgICAgKiAgIH1cbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogdmFyIGZ1bmMgPSBfLmJpbmRLZXkob2JqZWN0LCAnZ3JlZXQnLCAnaGknKTtcbiAgICAgKiBmdW5jKCk7XG4gICAgICogLy8gPT4gJ2hpIGZyZWQnXG4gICAgICpcbiAgICAgKiBvYmplY3QuZ3JlZXQgPSBmdW5jdGlvbihncmVldGluZykge1xuICAgICAqICAgcmV0dXJuIGdyZWV0aW5nICsgJ3lhICcgKyB0aGlzLm5hbWUgKyAnISc7XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIGZ1bmMoKTtcbiAgICAgKiAvLyA9PiAnaGl5YSBmcmVkISdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiaW5kS2V5KG9iamVjdCwga2V5KSB7XG4gICAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDJcbiAgICAgICAgPyBjcmVhdGVXcmFwcGVyKGtleSwgMTksIHNsaWNlKGFyZ3VtZW50cywgMiksIG51bGwsIG9iamVjdClcbiAgICAgICAgOiBjcmVhdGVXcmFwcGVyKGtleSwgMywgbnVsbCwgbnVsbCwgb2JqZWN0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpcyB0aGUgY29tcG9zaXRpb24gb2YgdGhlIHByb3ZpZGVkIGZ1bmN0aW9ucyxcbiAgICAgKiB3aGVyZSBlYWNoIGZ1bmN0aW9uIGNvbnN1bWVzIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZ1bmN0aW9uIHRoYXQgZm9sbG93cy5cbiAgICAgKiBGb3IgZXhhbXBsZSwgY29tcG9zaW5nIHRoZSBmdW5jdGlvbnMgYGYoKWAsIGBnKClgLCBhbmQgYGgoKWAgcHJvZHVjZXMgYGYoZyhoKCkpKWAuXG4gICAgICogRWFjaCBmdW5jdGlvbiBpcyBleGVjdXRlZCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiB0aGUgY29tcG9zZWQgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25zXG4gICAgICogQHBhcmFtIHsuLi5GdW5jdGlvbn0gW2Z1bmNdIEZ1bmN0aW9ucyB0byBjb21wb3NlLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGNvbXBvc2VkIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgcmVhbE5hbWVNYXAgPSB7XG4gICAgICogICAncGViYmxlcyc6ICdwZW5lbG9wZSdcbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogdmFyIGZvcm1hdCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgKiAgIG5hbWUgPSByZWFsTmFtZU1hcFtuYW1lLnRvTG93ZXJDYXNlKCldIHx8IG5hbWU7XG4gICAgICogICByZXR1cm4gbmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG5hbWUuc2xpY2UoMSkudG9Mb3dlckNhc2UoKTtcbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogdmFyIGdyZWV0ID0gZnVuY3Rpb24oZm9ybWF0dGVkKSB7XG4gICAgICogICByZXR1cm4gJ0hpeWEgJyArIGZvcm1hdHRlZCArICchJztcbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogdmFyIHdlbGNvbWUgPSBfLmNvbXBvc2UoZ3JlZXQsIGZvcm1hdCk7XG4gICAgICogd2VsY29tZSgncGViYmxlcycpO1xuICAgICAqIC8vID0+ICdIaXlhIFBlbmVsb3BlISdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjb21wb3NlKCkge1xuICAgICAgdmFyIGZ1bmNzID0gYXJndW1lbnRzLFxuICAgICAgICAgIGxlbmd0aCA9IGZ1bmNzLmxlbmd0aDtcblxuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIGlmICghaXNGdW5jdGlvbihmdW5jc1tsZW5ndGhdKSkge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3I7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHMsXG4gICAgICAgICAgICBsZW5ndGggPSBmdW5jcy5sZW5ndGg7XG5cbiAgICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgICAgYXJncyA9IFtmdW5jc1tsZW5ndGhdLmFwcGx5KHRoaXMsIGFyZ3MpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJnc1swXTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHdoaWNoIGFjY2VwdHMgb25lIG9yIG1vcmUgYXJndW1lbnRzIG9mIGBmdW5jYCB0aGF0IHdoZW5cbiAgICAgKiBpbnZva2VkIGVpdGhlciBleGVjdXRlcyBgZnVuY2AgcmV0dXJuaW5nIGl0cyByZXN1bHQsIGlmIGFsbCBgZnVuY2AgYXJndW1lbnRzXG4gICAgICogaGF2ZSBiZWVuIHByb3ZpZGVkLCBvciByZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBhY2NlcHRzIG9uZSBvciBtb3JlIG9mIHRoZVxuICAgICAqIHJlbWFpbmluZyBgZnVuY2AgYXJndW1lbnRzLCBhbmQgc28gb24uIFRoZSBhcml0eSBvZiBgZnVuY2AgY2FuIGJlIHNwZWNpZmllZFxuICAgICAqIGlmIGBmdW5jLmxlbmd0aGAgaXMgbm90IHN1ZmZpY2llbnQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25zXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gY3VycnkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFthcml0eT1mdW5jLmxlbmd0aF0gVGhlIGFyaXR5IG9mIGBmdW5jYC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBjdXJyaWVkIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgY3VycmllZCA9IF8uY3VycnkoZnVuY3Rpb24oYSwgYiwgYykge1xuICAgICAqICAgY29uc29sZS5sb2coYSArIGIgKyBjKTtcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIGN1cnJpZWQoMSkoMikoMyk7XG4gICAgICogLy8gPT4gNlxuICAgICAqXG4gICAgICogY3VycmllZCgxLCAyKSgzKTtcbiAgICAgKiAvLyA9PiA2XG4gICAgICpcbiAgICAgKiBjdXJyaWVkKDEsIDIsIDMpO1xuICAgICAqIC8vID0+IDZcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjdXJyeShmdW5jLCBhcml0eSkge1xuICAgICAgYXJpdHkgPSB0eXBlb2YgYXJpdHkgPT0gJ251bWJlcicgPyBhcml0eSA6ICgrYXJpdHkgfHwgZnVuYy5sZW5ndGgpO1xuICAgICAgcmV0dXJuIGNyZWF0ZVdyYXBwZXIoZnVuYywgNCwgbnVsbCwgbnVsbCwgbnVsbCwgYXJpdHkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHdpbGwgZGVsYXkgdGhlIGV4ZWN1dGlvbiBvZiBgZnVuY2AgdW50aWwgYWZ0ZXJcbiAgICAgKiBgd2FpdGAgbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIGl0IHdhcyBpbnZva2VkLlxuICAgICAqIFByb3ZpZGUgYW4gb3B0aW9ucyBvYmplY3QgdG8gaW5kaWNhdGUgdGhhdCBgZnVuY2Agc2hvdWxkIGJlIGludm9rZWQgb25cbiAgICAgKiB0aGUgbGVhZGluZyBhbmQvb3IgdHJhaWxpbmcgZWRnZSBvZiB0aGUgYHdhaXRgIHRpbWVvdXQuIFN1YnNlcXVlbnQgY2FsbHNcbiAgICAgKiB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIHRoZSByZXN1bHQgb2YgdGhlIGxhc3QgYGZ1bmNgIGNhbGwuXG4gICAgICpcbiAgICAgKiBOb3RlOiBJZiBgbGVhZGluZ2AgYW5kIGB0cmFpbGluZ2Agb3B0aW9ucyBhcmUgYHRydWVgIGBmdW5jYCB3aWxsIGJlIGNhbGxlZFxuICAgICAqIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0IG9ubHkgaWYgdGhlIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gaXNcbiAgICAgKiBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25zXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVib3VuY2UuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHdhaXQgVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZGVsYXkuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBUaGUgb3B0aW9ucyBvYmplY3QuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPWZhbHNlXSBTcGVjaWZ5IGV4ZWN1dGlvbiBvbiB0aGUgbGVhZGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5tYXhXYWl0XSBUaGUgbWF4aW11bSB0aW1lIGBmdW5jYCBpcyBhbGxvd2VkIHRvIGJlIGRlbGF5ZWQgYmVmb3JlIGl0J3MgY2FsbGVkLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudHJhaWxpbmc9dHJ1ZV0gU3BlY2lmeSBleGVjdXRpb24gb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZGVib3VuY2VkIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAvLyBhdm9pZCBjb3N0bHkgY2FsY3VsYXRpb25zIHdoaWxlIHRoZSB3aW5kb3cgc2l6ZSBpcyBpbiBmbHV4XG4gICAgICogdmFyIGxhenlMYXlvdXQgPSBfLmRlYm91bmNlKGNhbGN1bGF0ZUxheW91dCwgMTUwKTtcbiAgICAgKiBqUXVlcnkod2luZG93KS5vbigncmVzaXplJywgbGF6eUxheW91dCk7XG4gICAgICpcbiAgICAgKiAvLyBleGVjdXRlIGBzZW5kTWFpbGAgd2hlbiB0aGUgY2xpY2sgZXZlbnQgaXMgZmlyZWQsIGRlYm91bmNpbmcgc3Vic2VxdWVudCBjYWxsc1xuICAgICAqIGpRdWVyeSgnI3Bvc3Rib3gnKS5vbignY2xpY2snLCBfLmRlYm91bmNlKHNlbmRNYWlsLCAzMDAsIHtcbiAgICAgKiAgICdsZWFkaW5nJzogdHJ1ZSxcbiAgICAgKiAgICd0cmFpbGluZyc6IGZhbHNlXG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiAvLyBlbnN1cmUgYGJhdGNoTG9nYCBpcyBleGVjdXRlZCBvbmNlIGFmdGVyIDEgc2Vjb25kIG9mIGRlYm91bmNlZCBjYWxsc1xuICAgICAqIHZhciBzb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UoJy9zdHJlYW0nKTtcbiAgICAgKiBzb3VyY2UuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIF8uZGVib3VuY2UoYmF0Y2hMb2csIDI1MCwge1xuICAgICAqICAgJ21heFdhaXQnOiAxMDAwXG4gICAgICogfSwgZmFsc2UpO1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBhcmdzLFxuICAgICAgICAgIG1heFRpbWVvdXRJZCxcbiAgICAgICAgICByZXN1bHQsXG4gICAgICAgICAgc3RhbXAsXG4gICAgICAgICAgdGhpc0FyZyxcbiAgICAgICAgICB0aW1lb3V0SWQsXG4gICAgICAgICAgdHJhaWxpbmdDYWxsLFxuICAgICAgICAgIGxhc3RDYWxsZWQgPSAwLFxuICAgICAgICAgIG1heFdhaXQgPSBmYWxzZSxcbiAgICAgICAgICB0cmFpbGluZyA9IHRydWU7XG5cbiAgICAgIGlmICghaXNGdW5jdGlvbihmdW5jKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yO1xuICAgICAgfVxuICAgICAgd2FpdCA9IG5hdGl2ZU1heCgwLCB3YWl0KSB8fCAwO1xuICAgICAgaWYgKG9wdGlvbnMgPT09IHRydWUpIHtcbiAgICAgICAgdmFyIGxlYWRpbmcgPSB0cnVlO1xuICAgICAgICB0cmFpbGluZyA9IGZhbHNlO1xuICAgICAgfSBlbHNlIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuICAgICAgICBsZWFkaW5nID0gb3B0aW9ucy5sZWFkaW5nO1xuICAgICAgICBtYXhXYWl0ID0gJ21heFdhaXQnIGluIG9wdGlvbnMgJiYgKG5hdGl2ZU1heCh3YWl0LCBvcHRpb25zLm1heFdhaXQpIHx8IDApO1xuICAgICAgICB0cmFpbGluZyA9ICd0cmFpbGluZycgaW4gb3B0aW9ucyA/IG9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcbiAgICAgIH1cbiAgICAgIHZhciBkZWxheWVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciByZW1haW5pbmcgPSB3YWl0IC0gKG5vdygpIC0gc3RhbXApO1xuICAgICAgICBpZiAocmVtYWluaW5nIDw9IDApIHtcbiAgICAgICAgICBpZiAobWF4VGltZW91dElkKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQobWF4VGltZW91dElkKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIGlzQ2FsbGVkID0gdHJhaWxpbmdDYWxsO1xuICAgICAgICAgIG1heFRpbWVvdXRJZCA9IHRpbWVvdXRJZCA9IHRyYWlsaW5nQ2FsbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBpZiAoaXNDYWxsZWQpIHtcbiAgICAgICAgICAgIGxhc3RDYWxsZWQgPSBub3coKTtcbiAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG4gICAgICAgICAgICBpZiAoIXRpbWVvdXRJZCAmJiAhbWF4VGltZW91dElkKSB7XG4gICAgICAgICAgICAgIGFyZ3MgPSB0aGlzQXJnID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGltZW91dElkID0gc2V0VGltZW91dChkZWxheWVkLCByZW1haW5pbmcpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB2YXIgbWF4RGVsYXllZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGltZW91dElkKSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgIH1cbiAgICAgICAgbWF4VGltZW91dElkID0gdGltZW91dElkID0gdHJhaWxpbmdDYWxsID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodHJhaWxpbmcgfHwgKG1heFdhaXQgIT09IHdhaXQpKSB7XG4gICAgICAgICAgbGFzdENhbGxlZCA9IG5vdygpO1xuICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG4gICAgICAgICAgaWYgKCF0aW1lb3V0SWQgJiYgIW1heFRpbWVvdXRJZCkge1xuICAgICAgICAgICAgYXJncyA9IHRoaXNBcmcgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICBzdGFtcCA9IG5vdygpO1xuICAgICAgICB0aGlzQXJnID0gdGhpcztcbiAgICAgICAgdHJhaWxpbmdDYWxsID0gdHJhaWxpbmcgJiYgKHRpbWVvdXRJZCB8fCAhbGVhZGluZyk7XG5cbiAgICAgICAgaWYgKG1heFdhaXQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgdmFyIGxlYWRpbmdDYWxsID0gbGVhZGluZyAmJiAhdGltZW91dElkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICghbWF4VGltZW91dElkICYmICFsZWFkaW5nKSB7XG4gICAgICAgICAgICBsYXN0Q2FsbGVkID0gc3RhbXA7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciByZW1haW5pbmcgPSBtYXhXYWl0IC0gKHN0YW1wIC0gbGFzdENhbGxlZCksXG4gICAgICAgICAgICAgIGlzQ2FsbGVkID0gcmVtYWluaW5nIDw9IDA7XG5cbiAgICAgICAgICBpZiAoaXNDYWxsZWQpIHtcbiAgICAgICAgICAgIGlmIChtYXhUaW1lb3V0SWQpIHtcbiAgICAgICAgICAgICAgbWF4VGltZW91dElkID0gY2xlYXJUaW1lb3V0KG1heFRpbWVvdXRJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsYXN0Q2FsbGVkID0gc3RhbXA7XG4gICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmICghbWF4VGltZW91dElkKSB7XG4gICAgICAgICAgICBtYXhUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KG1heERlbGF5ZWQsIHJlbWFpbmluZyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpc0NhbGxlZCAmJiB0aW1lb3V0SWQpIHtcbiAgICAgICAgICB0aW1lb3V0SWQgPSBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghdGltZW91dElkICYmIHdhaXQgIT09IG1heFdhaXQpIHtcbiAgICAgICAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGRlbGF5ZWQsIHdhaXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsZWFkaW5nQ2FsbCkge1xuICAgICAgICAgIGlzQ2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0NhbGxlZCAmJiAhdGltZW91dElkICYmICFtYXhUaW1lb3V0SWQpIHtcbiAgICAgICAgICBhcmdzID0gdGhpc0FyZyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVmZXJzIGV4ZWN1dGluZyB0aGUgYGZ1bmNgIGZ1bmN0aW9uIHVudGlsIHRoZSBjdXJyZW50IGNhbGwgc3RhY2sgaGFzIGNsZWFyZWQuXG4gICAgICogQWRkaXRpb25hbCBhcmd1bWVudHMgd2lsbCBiZSBwcm92aWRlZCB0byBgZnVuY2Agd2hlbiBpdCBpcyBpbnZva2VkLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uc1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlZmVyLlxuICAgICAqIEBwYXJhbSB7Li4uKn0gW2FyZ10gQXJndW1lbnRzIHRvIGludm9rZSB0aGUgZnVuY3Rpb24gd2l0aC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lciBpZC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5kZWZlcihmdW5jdGlvbih0ZXh0KSB7IGNvbnNvbGUubG9nKHRleHQpOyB9LCAnZGVmZXJyZWQnKTtcbiAgICAgKiAvLyBsb2dzICdkZWZlcnJlZCcgYWZ0ZXIgb25lIG9yIG1vcmUgbWlsbGlzZWNvbmRzXG4gICAgICovXG4gICAgZnVuY3Rpb24gZGVmZXIoZnVuYykge1xuICAgICAgaWYgKCFpc0Z1bmN0aW9uKGZ1bmMpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3I7XG4gICAgICB9XG4gICAgICB2YXIgYXJncyA9IHNsaWNlKGFyZ3VtZW50cywgMSk7XG4gICAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpIHsgZnVuYy5hcHBseSh1bmRlZmluZWQsIGFyZ3MpOyB9LCAxKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeGVjdXRlcyB0aGUgYGZ1bmNgIGZ1bmN0aW9uIGFmdGVyIGB3YWl0YCBtaWxsaXNlY29uZHMuIEFkZGl0aW9uYWwgYXJndW1lbnRzXG4gICAgICogd2lsbCBiZSBwcm92aWRlZCB0byBgZnVuY2Agd2hlbiBpdCBpcyBpbnZva2VkLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uc1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlbGF5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3YWl0IFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5IGV4ZWN1dGlvbi5cbiAgICAgKiBAcGFyYW0gey4uLip9IFthcmddIEFyZ3VtZW50cyB0byBpbnZva2UgdGhlIGZ1bmN0aW9uIHdpdGguXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXIgaWQuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZGVsYXkoZnVuY3Rpb24odGV4dCkgeyBjb25zb2xlLmxvZyh0ZXh0KTsgfSwgMTAwMCwgJ2xhdGVyJyk7XG4gICAgICogLy8gPT4gbG9ncyAnbGF0ZXInIGFmdGVyIG9uZSBzZWNvbmRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBkZWxheShmdW5jLCB3YWl0KSB7XG4gICAgICBpZiAoIWlzRnVuY3Rpb24oZnVuYykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcjtcbiAgICAgIH1cbiAgICAgIHZhciBhcmdzID0gc2xpY2UoYXJndW1lbnRzLCAyKTtcbiAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBmdW5jLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7IH0sIHdhaXQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IG1lbW9pemVzIHRoZSByZXN1bHQgb2YgYGZ1bmNgLiBJZiBgcmVzb2x2ZXJgIGlzXG4gICAgICogcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkIHRvIGRldGVybWluZSB0aGUgY2FjaGUga2V5IGZvciBzdG9yaW5nIHRoZSByZXN1bHRcbiAgICAgKiBiYXNlZCBvbiB0aGUgYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZSBtZW1vaXplZCBmdW5jdGlvbi4gQnkgZGVmYXVsdCwgdGhlXG4gICAgICogZmlyc3QgYXJndW1lbnQgcHJvdmlkZWQgdG8gdGhlIG1lbW9pemVkIGZ1bmN0aW9uIGlzIHVzZWQgYXMgdGhlIGNhY2hlIGtleS5cbiAgICAgKiBUaGUgYGZ1bmNgIGlzIGV4ZWN1dGVkIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIHRoZSBtZW1vaXplZCBmdW5jdGlvbi5cbiAgICAgKiBUaGUgcmVzdWx0IGNhY2hlIGlzIGV4cG9zZWQgYXMgdGhlIGBjYWNoZWAgcHJvcGVydHkgb24gdGhlIG1lbW9pemVkIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uc1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGhhdmUgaXRzIG91dHB1dCBtZW1vaXplZC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcmVzb2x2ZXJdIEEgZnVuY3Rpb24gdXNlZCB0byByZXNvbHZlIHRoZSBjYWNoZSBrZXkuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgbWVtb2l6aW5nIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgZmlib25hY2NpID0gXy5tZW1vaXplKGZ1bmN0aW9uKG4pIHtcbiAgICAgKiAgIHJldHVybiBuIDwgMiA/IG4gOiBmaWJvbmFjY2kobiAtIDEpICsgZmlib25hY2NpKG4gLSAyKTtcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIGZpYm9uYWNjaSg5KVxuICAgICAqIC8vID0+IDM0XG4gICAgICpcbiAgICAgKiB2YXIgZGF0YSA9IHtcbiAgICAgKiAgICdmcmVkJzogeyAnbmFtZSc6ICdmcmVkJywgJ2FnZSc6IDQwIH0sXG4gICAgICogICAncGViYmxlcyc6IHsgJ25hbWUnOiAncGViYmxlcycsICdhZ2UnOiAxIH1cbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogLy8gbW9kaWZ5aW5nIHRoZSByZXN1bHQgY2FjaGVcbiAgICAgKiB2YXIgZ2V0ID0gXy5tZW1vaXplKGZ1bmN0aW9uKG5hbWUpIHsgcmV0dXJuIGRhdGFbbmFtZV07IH0sIF8uaWRlbnRpdHkpO1xuICAgICAqIGdldCgncGViYmxlcycpO1xuICAgICAqIC8vID0+IHsgJ25hbWUnOiAncGViYmxlcycsICdhZ2UnOiAxIH1cbiAgICAgKlxuICAgICAqIGdldC5jYWNoZS5wZWJibGVzLm5hbWUgPSAncGVuZWxvcGUnO1xuICAgICAqIGdldCgncGViYmxlcycpO1xuICAgICAqIC8vID0+IHsgJ25hbWUnOiAncGVuZWxvcGUnLCAnYWdlJzogMSB9XG4gICAgICovXG4gICAgZnVuY3Rpb24gbWVtb2l6ZShmdW5jLCByZXNvbHZlcikge1xuICAgICAgaWYgKCFpc0Z1bmN0aW9uKGZ1bmMpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3I7XG4gICAgICB9XG4gICAgICB2YXIgbWVtb2l6ZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNhY2hlID0gbWVtb2l6ZWQuY2FjaGUsXG4gICAgICAgICAgICBrZXkgPSByZXNvbHZlciA/IHJlc29sdmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgOiBrZXlQcmVmaXggKyBhcmd1bWVudHNbMF07XG5cbiAgICAgICAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwoY2FjaGUsIGtleSlcbiAgICAgICAgICA/IGNhY2hlW2tleV1cbiAgICAgICAgICA6IChjYWNoZVtrZXldID0gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgICAgIH1cbiAgICAgIG1lbW9pemVkLmNhY2hlID0ge307XG4gICAgICByZXR1cm4gbWVtb2l6ZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaXMgcmVzdHJpY3RlZCB0byBleGVjdXRlIGBmdW5jYCBvbmNlLiBSZXBlYXQgY2FsbHMgdG9cbiAgICAgKiB0aGUgZnVuY3Rpb24gd2lsbCByZXR1cm4gdGhlIHZhbHVlIG9mIHRoZSBmaXJzdCBjYWxsLiBUaGUgYGZ1bmNgIGlzIGV4ZWN1dGVkXG4gICAgICogd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgdGhlIGNyZWF0ZWQgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25zXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gcmVzdHJpY3QuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgcmVzdHJpY3RlZCBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGluaXRpYWxpemUgPSBfLm9uY2UoY3JlYXRlQXBwbGljYXRpb24pO1xuICAgICAqIGluaXRpYWxpemUoKTtcbiAgICAgKiBpbml0aWFsaXplKCk7XG4gICAgICogLy8gYGluaXRpYWxpemVgIGV4ZWN1dGVzIGBjcmVhdGVBcHBsaWNhdGlvbmAgb25jZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG9uY2UoZnVuYykge1xuICAgICAgdmFyIHJhbixcbiAgICAgICAgICByZXN1bHQ7XG5cbiAgICAgIGlmICghaXNGdW5jdGlvbihmdW5jKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAocmFuKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICByYW4gPSB0cnVlO1xuICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICAgICAgLy8gY2xlYXIgdGhlIGBmdW5jYCB2YXJpYWJsZSBzbyB0aGUgZnVuY3Rpb24gbWF5IGJlIGdhcmJhZ2UgY29sbGVjdGVkXG4gICAgICAgIGZ1bmMgPSBudWxsO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBjYWxsZWQsIGludm9rZXMgYGZ1bmNgIHdpdGggYW55IGFkZGl0aW9uYWxcbiAgICAgKiBgcGFydGlhbGAgYXJndW1lbnRzIHByZXBlbmRlZCB0byB0aG9zZSBwcm92aWRlZCB0byB0aGUgbmV3IGZ1bmN0aW9uLiBUaGlzXG4gICAgICogbWV0aG9kIGlzIHNpbWlsYXIgdG8gYF8uYmluZGAgZXhjZXB0IGl0IGRvZXMgKipub3QqKiBhbHRlciB0aGUgYHRoaXNgIGJpbmRpbmcuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25zXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gcGFydGlhbGx5IGFwcGx5IGFyZ3VtZW50cyB0by5cbiAgICAgKiBAcGFyYW0gey4uLip9IFthcmddIEFyZ3VtZW50cyB0byBiZSBwYXJ0aWFsbHkgYXBwbGllZC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBwYXJ0aWFsbHkgYXBwbGllZCBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGdyZWV0ID0gZnVuY3Rpb24oZ3JlZXRpbmcsIG5hbWUpIHsgcmV0dXJuIGdyZWV0aW5nICsgJyAnICsgbmFtZTsgfTtcbiAgICAgKiB2YXIgaGkgPSBfLnBhcnRpYWwoZ3JlZXQsICdoaScpO1xuICAgICAqIGhpKCdmcmVkJyk7XG4gICAgICogLy8gPT4gJ2hpIGZyZWQnXG4gICAgICovXG4gICAgZnVuY3Rpb24gcGFydGlhbChmdW5jKSB7XG4gICAgICByZXR1cm4gY3JlYXRlV3JhcHBlcihmdW5jLCAxNiwgc2xpY2UoYXJndW1lbnRzLCAxKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5wYXJ0aWFsYCBleGNlcHQgdGhhdCBgcGFydGlhbGAgYXJndW1lbnRzIGFyZVxuICAgICAqIGFwcGVuZGVkIHRvIHRob3NlIHByb3ZpZGVkIHRvIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25zXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gcGFydGlhbGx5IGFwcGx5IGFyZ3VtZW50cyB0by5cbiAgICAgKiBAcGFyYW0gey4uLip9IFthcmddIEFyZ3VtZW50cyB0byBiZSBwYXJ0aWFsbHkgYXBwbGllZC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBwYXJ0aWFsbHkgYXBwbGllZCBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGRlZmF1bHRzRGVlcCA9IF8ucGFydGlhbFJpZ2h0KF8ubWVyZ2UsIF8uZGVmYXVsdHMpO1xuICAgICAqXG4gICAgICogdmFyIG9wdGlvbnMgPSB7XG4gICAgICogICAndmFyaWFibGUnOiAnZGF0YScsXG4gICAgICogICAnaW1wb3J0cyc6IHsgJ2pxJzogJCB9XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIGRlZmF1bHRzRGVlcChvcHRpb25zLCBfLnRlbXBsYXRlU2V0dGluZ3MpO1xuICAgICAqXG4gICAgICogb3B0aW9ucy52YXJpYWJsZVxuICAgICAqIC8vID0+ICdkYXRhJ1xuICAgICAqXG4gICAgICogb3B0aW9ucy5pbXBvcnRzXG4gICAgICogLy8gPT4geyAnXyc6IF8sICdqcSc6ICQgfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHBhcnRpYWxSaWdodChmdW5jKSB7XG4gICAgICByZXR1cm4gY3JlYXRlV3JhcHBlcihmdW5jLCAzMiwgbnVsbCwgc2xpY2UoYXJndW1lbnRzLCAxKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQsIHdoZW4gZXhlY3V0ZWQsIHdpbGwgb25seSBjYWxsIHRoZSBgZnVuY2AgZnVuY3Rpb25cbiAgICAgKiBhdCBtb3N0IG9uY2UgcGVyIGV2ZXJ5IGB3YWl0YCBtaWxsaXNlY29uZHMuIFByb3ZpZGUgYW4gb3B0aW9ucyBvYmplY3QgdG9cbiAgICAgKiBpbmRpY2F0ZSB0aGF0IGBmdW5jYCBzaG91bGQgYmUgaW52b2tlZCBvbiB0aGUgbGVhZGluZyBhbmQvb3IgdHJhaWxpbmcgZWRnZVxuICAgICAqIG9mIHRoZSBgd2FpdGAgdGltZW91dC4gU3Vic2VxdWVudCBjYWxscyB0byB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uIHdpbGxcbiAgICAgKiByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2AgY2FsbC5cbiAgICAgKlxuICAgICAqIE5vdGU6IElmIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYCBvcHRpb25zIGFyZSBgdHJ1ZWAgYGZ1bmNgIHdpbGwgYmUgY2FsbGVkXG4gICAgICogb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgdGhlIHRocm90dGxlZCBmdW5jdGlvbiBpc1xuICAgICAqIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvbnNcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byB0aHJvdHRsZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gd2FpdCBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byB0aHJvdHRsZSBleGVjdXRpb25zIHRvLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gVGhlIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz10cnVlXSBTcGVjaWZ5IGV4ZWN1dGlvbiBvbiB0aGUgbGVhZGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudHJhaWxpbmc9dHJ1ZV0gU3BlY2lmeSBleGVjdXRpb24gb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgdGhyb3R0bGVkIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAvLyBhdm9pZCBleGNlc3NpdmVseSB1cGRhdGluZyB0aGUgcG9zaXRpb24gd2hpbGUgc2Nyb2xsaW5nXG4gICAgICogdmFyIHRocm90dGxlZCA9IF8udGhyb3R0bGUodXBkYXRlUG9zaXRpb24sIDEwMCk7XG4gICAgICogalF1ZXJ5KHdpbmRvdykub24oJ3Njcm9sbCcsIHRocm90dGxlZCk7XG4gICAgICpcbiAgICAgKiAvLyBleGVjdXRlIGByZW5ld1Rva2VuYCB3aGVuIHRoZSBjbGljayBldmVudCBpcyBmaXJlZCwgYnV0IG5vdCBtb3JlIHRoYW4gb25jZSBldmVyeSA1IG1pbnV0ZXNcbiAgICAgKiBqUXVlcnkoJy5pbnRlcmFjdGl2ZScpLm9uKCdjbGljaycsIF8udGhyb3R0bGUocmVuZXdUb2tlbiwgMzAwMDAwLCB7XG4gICAgICogICAndHJhaWxpbmcnOiBmYWxzZVxuICAgICAqIH0pKTtcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0aHJvdHRsZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG4gICAgICB2YXIgbGVhZGluZyA9IHRydWUsXG4gICAgICAgICAgdHJhaWxpbmcgPSB0cnVlO1xuXG4gICAgICBpZiAoIWlzRnVuY3Rpb24oZnVuYykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcjtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zID09PSBmYWxzZSkge1xuICAgICAgICBsZWFkaW5nID0gZmFsc2U7XG4gICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgICAgIGxlYWRpbmcgPSAnbGVhZGluZycgaW4gb3B0aW9ucyA/IG9wdGlvbnMubGVhZGluZyA6IGxlYWRpbmc7XG4gICAgICAgIHRyYWlsaW5nID0gJ3RyYWlsaW5nJyBpbiBvcHRpb25zID8gb3B0aW9ucy50cmFpbGluZyA6IHRyYWlsaW5nO1xuICAgICAgfVxuICAgICAgZGVib3VuY2VPcHRpb25zLmxlYWRpbmcgPSBsZWFkaW5nO1xuICAgICAgZGVib3VuY2VPcHRpb25zLm1heFdhaXQgPSB3YWl0O1xuICAgICAgZGVib3VuY2VPcHRpb25zLnRyYWlsaW5nID0gdHJhaWxpbmc7XG5cbiAgICAgIHJldHVybiBkZWJvdW5jZShmdW5jLCB3YWl0LCBkZWJvdW5jZU9wdGlvbnMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHByb3ZpZGVzIGB2YWx1ZWAgdG8gdGhlIHdyYXBwZXIgZnVuY3Rpb24gYXMgaXRzXG4gICAgICogZmlyc3QgYXJndW1lbnQuIEFkZGl0aW9uYWwgYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZSBmdW5jdGlvbiBhcmUgYXBwZW5kZWRcbiAgICAgKiB0byB0aG9zZSBwcm92aWRlZCB0byB0aGUgd3JhcHBlciBmdW5jdGlvbi4gVGhlIHdyYXBwZXIgaXMgZXhlY3V0ZWQgd2l0aFxuICAgICAqIHRoZSBgdGhpc2AgYmluZGluZyBvZiB0aGUgY3JlYXRlZCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvbnNcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byB3cmFwLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHdyYXBwZXIgVGhlIHdyYXBwZXIgZnVuY3Rpb24uXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBwID0gXy53cmFwKF8uZXNjYXBlLCBmdW5jdGlvbihmdW5jLCB0ZXh0KSB7XG4gICAgICogICByZXR1cm4gJzxwPicgKyBmdW5jKHRleHQpICsgJzwvcD4nO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogcCgnRnJlZCwgV2lsbWEsICYgUGViYmxlcycpO1xuICAgICAqIC8vID0+ICc8cD5GcmVkLCBXaWxtYSwgJmFtcDsgUGViYmxlczwvcD4nXG4gICAgICovXG4gICAgZnVuY3Rpb24gd3JhcCh2YWx1ZSwgd3JhcHBlcikge1xuICAgICAgcmV0dXJuIGNyZWF0ZVdyYXBwZXIod3JhcHBlciwgMTYsIFt2YWx1ZV0pO1xuICAgIH1cblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBgdmFsdWVgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHJldHVybiBmcm9tIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3QgPSB7ICduYW1lJzogJ2ZyZWQnIH07XG4gICAgICogdmFyIGdldHRlciA9IF8uY29uc3RhbnQob2JqZWN0KTtcbiAgICAgKiBnZXR0ZXIoKSA9PT0gb2JqZWN0O1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjb25zdGFudCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFByb2R1Y2VzIGEgY2FsbGJhY2sgYm91bmQgdG8gYW4gb3B0aW9uYWwgYHRoaXNBcmdgLiBJZiBgZnVuY2AgaXMgYSBwcm9wZXJ0eVxuICAgICAqIG5hbWUgdGhlIGNyZWF0ZWQgY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIGZvciBhIGdpdmVuIGVsZW1lbnQuXG4gICAgICogSWYgYGZ1bmNgIGlzIGFuIG9iamVjdCB0aGUgY3JlYXRlZCBjYWxsYmFjayB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzXG4gICAgICogdGhhdCBjb250YWluIHRoZSBlcXVpdmFsZW50IG9iamVjdCBwcm9wZXJ0aWVzLCBvdGhlcndpc2UgaXQgd2lsbCByZXR1cm4gYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXRpZXNcbiAgICAgKiBAcGFyYW0geyp9IFtmdW5jPWlkZW50aXR5XSBUaGUgdmFsdWUgdG8gY29udmVydCB0byBhIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiB0aGUgY3JlYXRlZCBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2FyZ0NvdW50XSBUaGUgbnVtYmVyIG9mIGFyZ3VtZW50cyB0aGUgY2FsbGJhY2sgYWNjZXB0cy5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgYSBjYWxsYmFjayBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXG4gICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAnYWdlJzogNDAgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiAvLyB3cmFwIHRvIGNyZWF0ZSBjdXN0b20gY2FsbGJhY2sgc2hvcnRoYW5kc1xuICAgICAqIF8uY3JlYXRlQ2FsbGJhY2sgPSBfLndyYXAoXy5jcmVhdGVDYWxsYmFjaywgZnVuY3Rpb24oZnVuYywgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgKiAgIHZhciBtYXRjaCA9IC9eKC4rPylfXyhbZ2xddCkoLispJC8uZXhlYyhjYWxsYmFjayk7XG4gICAgICogICByZXR1cm4gIW1hdGNoID8gZnVuYyhjYWxsYmFjaywgdGhpc0FyZykgOiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgKiAgICAgcmV0dXJuIG1hdGNoWzJdID09ICdndCcgPyBvYmplY3RbbWF0Y2hbMV1dID4gbWF0Y2hbM10gOiBvYmplY3RbbWF0Y2hbMV1dIDwgbWF0Y2hbM107XG4gICAgICogICB9O1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogXy5maWx0ZXIoY2hhcmFjdGVycywgJ2FnZV9fZ3QzOCcpO1xuICAgICAqIC8vID0+IFt7ICduYW1lJzogJ2ZyZWQnLCAnYWdlJzogNDAgfV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVDYWxsYmFjayhmdW5jLCB0aGlzQXJnLCBhcmdDb3VudCkge1xuICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgZnVuYztcbiAgICAgIGlmIChmdW5jID09IG51bGwgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBiYXNlQ3JlYXRlQ2FsbGJhY2soZnVuYywgdGhpc0FyZywgYXJnQ291bnQpO1xuICAgICAgfVxuICAgICAgLy8gaGFuZGxlIFwiXy5wbHVja1wiIHN0eWxlIGNhbGxiYWNrIHNob3J0aGFuZHNcbiAgICAgIGlmICh0eXBlICE9ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiBwcm9wZXJ0eShmdW5jKTtcbiAgICAgIH1cbiAgICAgIHZhciBwcm9wcyA9IGtleXMoZnVuYyksXG4gICAgICAgICAga2V5ID0gcHJvcHNbMF0sXG4gICAgICAgICAgYSA9IGZ1bmNba2V5XTtcblxuICAgICAgLy8gaGFuZGxlIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrIHNob3J0aGFuZHNcbiAgICAgIGlmIChwcm9wcy5sZW5ndGggPT0gMSAmJiBhID09PSBhICYmICFpc09iamVjdChhKSkge1xuICAgICAgICAvLyBmYXN0IHBhdGggdGhlIGNvbW1vbiBjYXNlIG9mIHByb3ZpZGluZyBhbiBvYmplY3Qgd2l0aCBhIHNpbmdsZVxuICAgICAgICAvLyBwcm9wZXJ0eSBjb250YWluaW5nIGEgcHJpbWl0aXZlIHZhbHVlXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgICAgICB2YXIgYiA9IG9iamVjdFtrZXldO1xuICAgICAgICAgIHJldHVybiBhID09PSBiICYmIChhICE9PSAwIHx8ICgxIC8gYSA9PSAxIC8gYikpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAgICB2YXIgbGVuZ3RoID0gcHJvcHMubGVuZ3RoLFxuICAgICAgICAgICAgcmVzdWx0ID0gZmFsc2U7XG5cbiAgICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgICAgaWYgKCEocmVzdWx0ID0gYmFzZUlzRXF1YWwob2JqZWN0W3Byb3BzW2xlbmd0aF1dLCBmdW5jW3Byb3BzW2xlbmd0aF1dLCBudWxsLCB0cnVlKSkpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGUgY2hhcmFjdGVycyBgJmAsIGA8YCwgYD5gLCBgXCJgLCBhbmQgYCdgIGluIGBzdHJpbmdgIHRvIHRoZWlyXG4gICAgICogY29ycmVzcG9uZGluZyBIVE1MIGVudGl0aWVzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgVGhlIHN0cmluZyB0byBlc2NhcGUuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgZXNjYXBlZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZXNjYXBlKCdGcmVkLCBXaWxtYSwgJiBQZWJibGVzJyk7XG4gICAgICogLy8gPT4gJ0ZyZWQsIFdpbG1hLCAmYW1wOyBQZWJibGVzJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGVzY2FwZShzdHJpbmcpIHtcbiAgICAgIHJldHVybiBzdHJpbmcgPT0gbnVsbCA/ICcnIDogU3RyaW5nKHN0cmluZykucmVwbGFjZShyZVVuZXNjYXBlZEh0bWwsIGVzY2FwZUh0bWxDaGFyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBmaXJzdCBhcmd1bWVudCBwcm92aWRlZCB0byBpdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXRpZXNcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIEFueSB2YWx1ZS5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyBgdmFsdWVgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAnbmFtZSc6ICdmcmVkJyB9O1xuICAgICAqIF8uaWRlbnRpdHkob2JqZWN0KSA9PT0gb2JqZWN0O1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpZGVudGl0eSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgZnVuY3Rpb24gcHJvcGVydGllcyBvZiBhIHNvdXJjZSBvYmplY3QgdG8gdGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAgICAgKiBJZiBgb2JqZWN0YCBpcyBhIGZ1bmN0aW9uIG1ldGhvZHMgd2lsbCBiZSBhZGRlZCB0byBpdHMgcHJvdG90eXBlIGFzIHdlbGwuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0aWVzXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R9IFtvYmplY3Q9bG9kYXNoXSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBvYmplY3Qgb2YgZnVuY3Rpb25zIHRvIGFkZC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIFRoZSBvcHRpb25zIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNoYWluPXRydWVdIFNwZWNpZnkgd2hldGhlciB0aGUgZnVuY3Rpb25zIGFkZGVkIGFyZSBjaGFpbmFibGUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIGNhcGl0YWxpemUoc3RyaW5nKSB7XG4gICAgICogICByZXR1cm4gc3RyaW5nLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyaW5nLnNsaWNlKDEpLnRvTG93ZXJDYXNlKCk7XG4gICAgICogfVxuICAgICAqXG4gICAgICogXy5taXhpbih7ICdjYXBpdGFsaXplJzogY2FwaXRhbGl6ZSB9KTtcbiAgICAgKiBfLmNhcGl0YWxpemUoJ2ZyZWQnKTtcbiAgICAgKiAvLyA9PiAnRnJlZCdcbiAgICAgKlxuICAgICAqIF8oJ2ZyZWQnKS5jYXBpdGFsaXplKCkudmFsdWUoKTtcbiAgICAgKiAvLyA9PiAnRnJlZCdcbiAgICAgKlxuICAgICAqIF8ubWl4aW4oeyAnY2FwaXRhbGl6ZSc6IGNhcGl0YWxpemUgfSwgeyAnY2hhaW4nOiBmYWxzZSB9KTtcbiAgICAgKiBfKCdmcmVkJykuY2FwaXRhbGl6ZSgpO1xuICAgICAqIC8vID0+ICdGcmVkJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1peGluKG9iamVjdCwgc291cmNlLCBvcHRpb25zKSB7XG4gICAgICB2YXIgY2hhaW4gPSB0cnVlLFxuICAgICAgICAgIG1ldGhvZE5hbWVzID0gc291cmNlICYmIGZ1bmN0aW9ucyhzb3VyY2UpO1xuXG4gICAgICBpZiAoIXNvdXJjZSB8fCAoIW9wdGlvbnMgJiYgIW1ldGhvZE5hbWVzLmxlbmd0aCkpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgICAgIG9wdGlvbnMgPSBzb3VyY2U7XG4gICAgICAgIH1cbiAgICAgICAgY3RvciA9IGxvZGFzaFdyYXBwZXI7XG4gICAgICAgIHNvdXJjZSA9IG9iamVjdDtcbiAgICAgICAgb2JqZWN0ID0gbG9kYXNoO1xuICAgICAgICBtZXRob2ROYW1lcyA9IGZ1bmN0aW9ucyhzb3VyY2UpO1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMgPT09IGZhbHNlKSB7XG4gICAgICAgIGNoYWluID0gZmFsc2U7XG4gICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KG9wdGlvbnMpICYmICdjaGFpbicgaW4gb3B0aW9ucykge1xuICAgICAgICBjaGFpbiA9IG9wdGlvbnMuY2hhaW47XG4gICAgICB9XG4gICAgICB2YXIgY3RvciA9IG9iamVjdCxcbiAgICAgICAgICBpc0Z1bmMgPSBpc0Z1bmN0aW9uKGN0b3IpO1xuXG4gICAgICBmb3JFYWNoKG1ldGhvZE5hbWVzLCBmdW5jdGlvbihtZXRob2ROYW1lKSB7XG4gICAgICAgIHZhciBmdW5jID0gb2JqZWN0W21ldGhvZE5hbWVdID0gc291cmNlW21ldGhvZE5hbWVdO1xuICAgICAgICBpZiAoaXNGdW5jKSB7XG4gICAgICAgICAgY3Rvci5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBjaGFpbkFsbCA9IHRoaXMuX19jaGFpbl9fLFxuICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5fX3dyYXBwZWRfXyxcbiAgICAgICAgICAgICAgICBhcmdzID0gW3ZhbHVlXTtcblxuICAgICAgICAgICAgcHVzaC5hcHBseShhcmdzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGZ1bmMuYXBwbHkob2JqZWN0LCBhcmdzKTtcbiAgICAgICAgICAgIGlmIChjaGFpbiB8fCBjaGFpbkFsbCkge1xuICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IHJlc3VsdCAmJiBpc09iamVjdChyZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IGN0b3IocmVzdWx0KTtcbiAgICAgICAgICAgICAgcmVzdWx0Ll9fY2hhaW5fXyA9IGNoYWluQWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXZlcnRzIHRoZSAnXycgdmFyaWFibGUgdG8gaXRzIHByZXZpb3VzIHZhbHVlIGFuZCByZXR1cm5zIGEgcmVmZXJlbmNlIHRvXG4gICAgICogdGhlIGBsb2Rhc2hgIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgYGxvZGFzaGAgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBsb2Rhc2ggPSBfLm5vQ29uZmxpY3QoKTtcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBub0NvbmZsaWN0KCkge1xuICAgICAgY29udGV4dC5fID0gb2xkRGFzaDtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgbm8tb3BlcmF0aW9uIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAnbmFtZSc6ICdmcmVkJyB9O1xuICAgICAqIF8ubm9vcChvYmplY3QpID09PSB1bmRlZmluZWQ7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG5vb3AoKSB7XG4gICAgICAvLyBubyBvcGVyYXRpb24gcGVyZm9ybWVkXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0aGF0IGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgVW5peCBlcG9jaFxuICAgICAqICgxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgc3RhbXAgPSBfLm5vdygpO1xuICAgICAqIF8uZGVmZXIoZnVuY3Rpb24oKSB7IGNvbnNvbGUubG9nKF8ubm93KCkgLSBzdGFtcCk7IH0pO1xuICAgICAqIC8vID0+IGxvZ3MgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgaXQgdG9vayBmb3IgdGhlIGRlZmVycmVkIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZFxuICAgICAqL1xuICAgIHZhciBub3cgPSBpc05hdGl2ZShub3cgPSBEYXRlLm5vdykgJiYgbm93IHx8IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGUgZ2l2ZW4gdmFsdWUgaW50byBhbiBpbnRlZ2VyIG9mIHRoZSBzcGVjaWZpZWQgcmFkaXguXG4gICAgICogSWYgYHJhZGl4YCBpcyBgdW5kZWZpbmVkYCBvciBgMGAgYSBgcmFkaXhgIG9mIGAxMGAgaXMgdXNlZCB1bmxlc3MgdGhlXG4gICAgICogYHZhbHVlYCBpcyBhIGhleGFkZWNpbWFsLCBpbiB3aGljaCBjYXNlIGEgYHJhZGl4YCBvZiBgMTZgIGlzIHVzZWQuXG4gICAgICpcbiAgICAgKiBOb3RlOiBUaGlzIG1ldGhvZCBhdm9pZHMgZGlmZmVyZW5jZXMgaW4gbmF0aXZlIEVTMyBhbmQgRVM1IGBwYXJzZUludGBcbiAgICAgKiBpbXBsZW1lbnRhdGlvbnMuIFNlZSBodHRwOi8vZXM1LmdpdGh1Yi5pby8jRS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXRpZXNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgVGhlIHZhbHVlIHRvIHBhcnNlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbcmFkaXhdIFRoZSByYWRpeCB1c2VkIHRvIGludGVycHJldCB0aGUgdmFsdWUgdG8gcGFyc2UuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgbmV3IGludGVnZXIgdmFsdWUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ucGFyc2VJbnQoJzA4Jyk7XG4gICAgICogLy8gPT4gOFxuICAgICAqL1xuICAgIHZhciBwYXJzZUludCA9IG5hdGl2ZVBhcnNlSW50KHdoaXRlc3BhY2UgKyAnMDgnKSA9PSA4ID8gbmF0aXZlUGFyc2VJbnQgOiBmdW5jdGlvbih2YWx1ZSwgcmFkaXgpIHtcbiAgICAgIC8vIEZpcmVmb3ggPCAyMSBhbmQgT3BlcmEgPCAxNSBmb2xsb3cgdGhlIEVTMyBzcGVjaWZpZWQgaW1wbGVtZW50YXRpb24gb2YgYHBhcnNlSW50YFxuICAgICAgcmV0dXJuIG5hdGl2ZVBhcnNlSW50KGlzU3RyaW5nKHZhbHVlKSA/IHZhbHVlLnJlcGxhY2UocmVMZWFkaW5nU3BhY2VzQW5kWmVyb3MsICcnKSA6IHZhbHVlLCByYWRpeCB8fCAwKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIFwiXy5wbHVja1wiIHN0eWxlIGZ1bmN0aW9uLCB3aGljaCByZXR1cm5zIHRoZSBga2V5YCB2YWx1ZSBvZiBhXG4gICAgICogZ2l2ZW4gb2JqZWN0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IHRvIHJldHJpZXZlLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcbiAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgJ2FnZSc6IDQwIH0sXG4gICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIHZhciBnZXROYW1lID0gXy5wcm9wZXJ0eSgnbmFtZScpO1xuICAgICAqXG4gICAgICogXy5tYXAoY2hhcmFjdGVycywgZ2V0TmFtZSk7XG4gICAgICogLy8gPT4gWydiYXJuZXknLCAnZnJlZCddXG4gICAgICpcbiAgICAgKiBfLnNvcnRCeShjaGFyYWN0ZXJzLCBnZXROYW1lKTtcbiAgICAgKiAvLyA9PiBbeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYgfSwgeyAnbmFtZSc6ICdmcmVkJywgICAnYWdlJzogNDAgfV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwcm9wZXJ0eShrZXkpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIG9iamVjdFtrZXldO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcm9kdWNlcyBhIHJhbmRvbSBudW1iZXIgYmV0d2VlbiBgbWluYCBhbmQgYG1heGAgKGluY2x1c2l2ZSkuIElmIG9ubHkgb25lXG4gICAgICogYXJndW1lbnQgaXMgcHJvdmlkZWQgYSBudW1iZXIgYmV0d2VlbiBgMGAgYW5kIHRoZSBnaXZlbiBudW1iZXIgd2lsbCBiZVxuICAgICAqIHJldHVybmVkLiBJZiBgZmxvYXRpbmdgIGlzIHRydWV5IG9yIGVpdGhlciBgbWluYCBvciBgbWF4YCBhcmUgZmxvYXRzIGFcbiAgICAgKiBmbG9hdGluZy1wb2ludCBudW1iZXIgd2lsbCBiZSByZXR1cm5lZCBpbnN0ZWFkIG9mIGFuIGludGVnZXIuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0aWVzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFttaW49MF0gVGhlIG1pbmltdW0gcG9zc2libGUgdmFsdWUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFttYXg9MV0gVGhlIG1heGltdW0gcG9zc2libGUgdmFsdWUuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbZmxvYXRpbmc9ZmFsc2VdIFNwZWNpZnkgcmV0dXJuaW5nIGEgZmxvYXRpbmctcG9pbnQgbnVtYmVyLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgYSByYW5kb20gbnVtYmVyLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnJhbmRvbSgwLCA1KTtcbiAgICAgKiAvLyA9PiBhbiBpbnRlZ2VyIGJldHdlZW4gMCBhbmQgNVxuICAgICAqXG4gICAgICogXy5yYW5kb20oNSk7XG4gICAgICogLy8gPT4gYWxzbyBhbiBpbnRlZ2VyIGJldHdlZW4gMCBhbmQgNVxuICAgICAqXG4gICAgICogXy5yYW5kb20oNSwgdHJ1ZSk7XG4gICAgICogLy8gPT4gYSBmbG9hdGluZy1wb2ludCBudW1iZXIgYmV0d2VlbiAwIGFuZCA1XG4gICAgICpcbiAgICAgKiBfLnJhbmRvbSgxLjIsIDUuMik7XG4gICAgICogLy8gPT4gYSBmbG9hdGluZy1wb2ludCBudW1iZXIgYmV0d2VlbiAxLjIgYW5kIDUuMlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJhbmRvbShtaW4sIG1heCwgZmxvYXRpbmcpIHtcbiAgICAgIHZhciBub01pbiA9IG1pbiA9PSBudWxsLFxuICAgICAgICAgIG5vTWF4ID0gbWF4ID09IG51bGw7XG5cbiAgICAgIGlmIChmbG9hdGluZyA9PSBudWxsKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbWluID09ICdib29sZWFuJyAmJiBub01heCkge1xuICAgICAgICAgIGZsb2F0aW5nID0gbWluO1xuICAgICAgICAgIG1pbiA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIW5vTWF4ICYmIHR5cGVvZiBtYXggPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgZmxvYXRpbmcgPSBtYXg7XG4gICAgICAgICAgbm9NYXggPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobm9NaW4gJiYgbm9NYXgpIHtcbiAgICAgICAgbWF4ID0gMTtcbiAgICAgIH1cbiAgICAgIG1pbiA9ICttaW4gfHwgMDtcbiAgICAgIGlmIChub01heCkge1xuICAgICAgICBtYXggPSBtaW47XG4gICAgICAgIG1pbiA9IDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtYXggPSArbWF4IHx8IDA7XG4gICAgICB9XG4gICAgICBpZiAoZmxvYXRpbmcgfHwgbWluICUgMSB8fCBtYXggJSAxKSB7XG4gICAgICAgIHZhciByYW5kID0gbmF0aXZlUmFuZG9tKCk7XG4gICAgICAgIHJldHVybiBuYXRpdmVNaW4obWluICsgKHJhbmQgKiAobWF4IC0gbWluICsgcGFyc2VGbG9hdCgnMWUtJyArICgocmFuZCArJycpLmxlbmd0aCAtIDEpKSkpLCBtYXgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJhc2VSYW5kb20obWluLCBtYXgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlc29sdmVzIHRoZSB2YWx1ZSBvZiBwcm9wZXJ0eSBga2V5YCBvbiBgb2JqZWN0YC4gSWYgYGtleWAgaXMgYSBmdW5jdGlvblxuICAgICAqIGl0IHdpbGwgYmUgaW52b2tlZCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiBgb2JqZWN0YCBhbmQgaXRzIHJlc3VsdCByZXR1cm5lZCxcbiAgICAgKiBlbHNlIHRoZSBwcm9wZXJ0eSB2YWx1ZSBpcyByZXR1cm5lZC4gSWYgYG9iamVjdGAgaXMgZmFsc2V5IHRoZW4gYHVuZGVmaW5lZGBcbiAgICAgKiBpcyByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXRpZXNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byByZXNvbHZlLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSByZXNvbHZlZCB2YWx1ZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHtcbiAgICAgKiAgICdjaGVlc2UnOiAnY3J1bXBldHMnLFxuICAgICAqICAgJ3N0dWZmJzogZnVuY3Rpb24oKSB7XG4gICAgICogICAgIHJldHVybiAnbm9uc2Vuc2UnO1xuICAgICAqICAgfVxuICAgICAqIH07XG4gICAgICpcbiAgICAgKiBfLnJlc3VsdChvYmplY3QsICdjaGVlc2UnKTtcbiAgICAgKiAvLyA9PiAnY3J1bXBldHMnXG4gICAgICpcbiAgICAgKiBfLnJlc3VsdChvYmplY3QsICdzdHVmZicpO1xuICAgICAqIC8vID0+ICdub25zZW5zZSdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZXN1bHQob2JqZWN0LCBrZXkpIHtcbiAgICAgIGlmIChvYmplY3QpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gb2JqZWN0W2tleV07XG4gICAgICAgIHJldHVybiBpc0Z1bmN0aW9uKHZhbHVlKSA/IG9iamVjdFtrZXldKCkgOiB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIG1pY3JvLXRlbXBsYXRpbmcgbWV0aG9kIHRoYXQgaGFuZGxlcyBhcmJpdHJhcnkgZGVsaW1pdGVycywgcHJlc2VydmVzXG4gICAgICogd2hpdGVzcGFjZSwgYW5kIGNvcnJlY3RseSBlc2NhcGVzIHF1b3RlcyB3aXRoaW4gaW50ZXJwb2xhdGVkIGNvZGUuXG4gICAgICpcbiAgICAgKiBOb3RlOiBJbiB0aGUgZGV2ZWxvcG1lbnQgYnVpbGQsIGBfLnRlbXBsYXRlYCB1dGlsaXplcyBzb3VyY2VVUkxzIGZvciBlYXNpZXJcbiAgICAgKiBkZWJ1Z2dpbmcuIFNlZSBodHRwOi8vd3d3Lmh0bWw1cm9ja3MuY29tL2VuL3R1dG9yaWFscy9kZXZlbG9wZXJ0b29scy9zb3VyY2VtYXBzLyN0b2Mtc291cmNldXJsXG4gICAgICpcbiAgICAgKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiBwcmVjb21waWxpbmcgdGVtcGxhdGVzIHNlZTpcbiAgICAgKiBodHRwOi8vbG9kYXNoLmNvbS9jdXN0b20tYnVpbGRzXG4gICAgICpcbiAgICAgKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiBDaHJvbWUgZXh0ZW5zaW9uIHNhbmRib3hlcyBzZWU6XG4gICAgICogaHR0cDovL2RldmVsb3Blci5jaHJvbWUuY29tL3N0YWJsZS9leHRlbnNpb25zL3NhbmRib3hpbmdFdmFsLmh0bWxcbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXRpZXNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUaGUgdGVtcGxhdGUgdGV4dC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSBUaGUgZGF0YSBvYmplY3QgdXNlZCB0byBwb3B1bGF0ZSB0aGUgdGV4dC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIFRoZSBvcHRpb25zIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge1JlZ0V4cH0gW29wdGlvbnMuZXNjYXBlXSBUaGUgXCJlc2NhcGVcIiBkZWxpbWl0ZXIuXG4gICAgICogQHBhcmFtIHtSZWdFeHB9IFtvcHRpb25zLmV2YWx1YXRlXSBUaGUgXCJldmFsdWF0ZVwiIGRlbGltaXRlci5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMuaW1wb3J0c10gQW4gb2JqZWN0IHRvIGltcG9ydCBpbnRvIHRoZSB0ZW1wbGF0ZSBhcyBsb2NhbCB2YXJpYWJsZXMuXG4gICAgICogQHBhcmFtIHtSZWdFeHB9IFtvcHRpb25zLmludGVycG9sYXRlXSBUaGUgXCJpbnRlcnBvbGF0ZVwiIGRlbGltaXRlci5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3NvdXJjZVVSTF0gVGhlIHNvdXJjZVVSTCBvZiB0aGUgdGVtcGxhdGUncyBjb21waWxlZCBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFt2YXJpYWJsZV0gVGhlIGRhdGEgb2JqZWN0IHZhcmlhYmxlIG5hbWUuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufHN0cmluZ30gUmV0dXJucyBhIGNvbXBpbGVkIGZ1bmN0aW9uIHdoZW4gbm8gYGRhdGFgIG9iamVjdFxuICAgICAqICBpcyBnaXZlbiwgZWxzZSBpdCByZXR1cm5zIHRoZSBpbnRlcnBvbGF0ZWQgdGV4dC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIFwiaW50ZXJwb2xhdGVcIiBkZWxpbWl0ZXIgdG8gY3JlYXRlIGEgY29tcGlsZWQgdGVtcGxhdGVcbiAgICAgKiB2YXIgY29tcGlsZWQgPSBfLnRlbXBsYXRlKCdoZWxsbyA8JT0gbmFtZSAlPicpO1xuICAgICAqIGNvbXBpbGVkKHsgJ25hbWUnOiAnZnJlZCcgfSk7XG4gICAgICogLy8gPT4gJ2hlbGxvIGZyZWQnXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgXCJlc2NhcGVcIiBkZWxpbWl0ZXIgdG8gZXNjYXBlIEhUTUwgaW4gZGF0YSBwcm9wZXJ0eSB2YWx1ZXNcbiAgICAgKiBfLnRlbXBsYXRlKCc8Yj48JS0gdmFsdWUgJT48L2I+JywgeyAndmFsdWUnOiAnPHNjcmlwdD4nIH0pO1xuICAgICAqIC8vID0+ICc8Yj4mbHQ7c2NyaXB0Jmd0OzwvYj4nXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgXCJldmFsdWF0ZVwiIGRlbGltaXRlciB0byBnZW5lcmF0ZSBIVE1MXG4gICAgICogdmFyIGxpc3QgPSAnPCUgXy5mb3JFYWNoKHBlb3BsZSwgZnVuY3Rpb24obmFtZSkgeyAlPjxsaT48JS0gbmFtZSAlPjwvbGk+PCUgfSk7ICU+JztcbiAgICAgKiBfLnRlbXBsYXRlKGxpc3QsIHsgJ3Blb3BsZSc6IFsnZnJlZCcsICdiYXJuZXknXSB9KTtcbiAgICAgKiAvLyA9PiAnPGxpPmZyZWQ8L2xpPjxsaT5iYXJuZXk8L2xpPidcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBFUzYgZGVsaW1pdGVyIGFzIGFuIGFsdGVybmF0aXZlIHRvIHRoZSBkZWZhdWx0IFwiaW50ZXJwb2xhdGVcIiBkZWxpbWl0ZXJcbiAgICAgKiBfLnRlbXBsYXRlKCdoZWxsbyAkeyBuYW1lIH0nLCB7ICduYW1lJzogJ3BlYmJsZXMnIH0pO1xuICAgICAqIC8vID0+ICdoZWxsbyBwZWJibGVzJ1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGludGVybmFsIGBwcmludGAgZnVuY3Rpb24gaW4gXCJldmFsdWF0ZVwiIGRlbGltaXRlcnNcbiAgICAgKiBfLnRlbXBsYXRlKCc8JSBwcmludChcImhlbGxvIFwiICsgbmFtZSk7ICU+IScsIHsgJ25hbWUnOiAnYmFybmV5JyB9KTtcbiAgICAgKiAvLyA9PiAnaGVsbG8gYmFybmV5ISdcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIGEgY3VzdG9tIHRlbXBsYXRlIGRlbGltaXRlcnNcbiAgICAgKiBfLnRlbXBsYXRlU2V0dGluZ3MgPSB7XG4gICAgICogICAnaW50ZXJwb2xhdGUnOiAve3soW1xcc1xcU10rPyl9fS9nXG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIF8udGVtcGxhdGUoJ2hlbGxvIHt7IG5hbWUgfX0hJywgeyAnbmFtZSc6ICdtdXN0YWNoZScgfSk7XG4gICAgICogLy8gPT4gJ2hlbGxvIG11c3RhY2hlISdcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgaW1wb3J0c2Agb3B0aW9uIHRvIGltcG9ydCBqUXVlcnlcbiAgICAgKiB2YXIgbGlzdCA9ICc8JSBqcS5lYWNoKHBlb3BsZSwgZnVuY3Rpb24obmFtZSkgeyAlPjxsaT48JS0gbmFtZSAlPjwvbGk+PCUgfSk7ICU+JztcbiAgICAgKiBfLnRlbXBsYXRlKGxpc3QsIHsgJ3Blb3BsZSc6IFsnZnJlZCcsICdiYXJuZXknXSB9LCB7ICdpbXBvcnRzJzogeyAnanEnOiBqUXVlcnkgfSB9KTtcbiAgICAgKiAvLyA9PiAnPGxpPmZyZWQ8L2xpPjxsaT5iYXJuZXk8L2xpPidcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgc291cmNlVVJMYCBvcHRpb24gdG8gc3BlY2lmeSBhIGN1c3RvbSBzb3VyY2VVUkwgZm9yIHRoZSB0ZW1wbGF0ZVxuICAgICAqIHZhciBjb21waWxlZCA9IF8udGVtcGxhdGUoJ2hlbGxvIDwlPSBuYW1lICU+JywgbnVsbCwgeyAnc291cmNlVVJMJzogJy9iYXNpYy9ncmVldGluZy5qc3QnIH0pO1xuICAgICAqIGNvbXBpbGVkKGRhdGEpO1xuICAgICAqIC8vID0+IGZpbmQgdGhlIHNvdXJjZSBvZiBcImdyZWV0aW5nLmpzdFwiIHVuZGVyIHRoZSBTb3VyY2VzIHRhYiBvciBSZXNvdXJjZXMgcGFuZWwgb2YgdGhlIHdlYiBpbnNwZWN0b3JcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgdmFyaWFibGVgIG9wdGlvbiB0byBlbnN1cmUgYSB3aXRoLXN0YXRlbWVudCBpc24ndCB1c2VkIGluIHRoZSBjb21waWxlZCB0ZW1wbGF0ZVxuICAgICAqIHZhciBjb21waWxlZCA9IF8udGVtcGxhdGUoJ2hpIDwlPSBkYXRhLm5hbWUgJT4hJywgbnVsbCwgeyAndmFyaWFibGUnOiAnZGF0YScgfSk7XG4gICAgICogY29tcGlsZWQuc291cmNlO1xuICAgICAqIC8vID0+IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgKiAgIHZhciBfX3QsIF9fcCA9ICcnLCBfX2UgPSBfLmVzY2FwZTtcbiAgICAgKiAgIF9fcCArPSAnaGkgJyArICgoX190ID0gKCBkYXRhLm5hbWUgKSkgPT0gbnVsbCA/ICcnIDogX190KSArICchJztcbiAgICAgKiAgIHJldHVybiBfX3A7XG4gICAgICogfVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIGBzb3VyY2VgIHByb3BlcnR5IHRvIGlubGluZSBjb21waWxlZCB0ZW1wbGF0ZXMgZm9yIG1lYW5pbmdmdWxcbiAgICAgKiAvLyBsaW5lIG51bWJlcnMgaW4gZXJyb3IgbWVzc2FnZXMgYW5kIGEgc3RhY2sgdHJhY2VcbiAgICAgKiBmcy53cml0ZUZpbGVTeW5jKHBhdGguam9pbihjd2QsICdqc3QuanMnKSwgJ1xcXG4gICAgICogICB2YXIgSlNUID0ge1xcXG4gICAgICogICAgIFwibWFpblwiOiAnICsgXy50ZW1wbGF0ZShtYWluVGV4dCkuc291cmNlICsgJ1xcXG4gICAgICogICB9O1xcXG4gICAgICogJyk7XG4gICAgICovXG4gICAgZnVuY3Rpb24gdGVtcGxhdGUodGV4dCwgZGF0YSwgb3B0aW9ucykge1xuICAgICAgLy8gYmFzZWQgb24gSm9obiBSZXNpZydzIGB0bXBsYCBpbXBsZW1lbnRhdGlvblxuICAgICAgLy8gaHR0cDovL2Vqb2huLm9yZy9ibG9nL2phdmFzY3JpcHQtbWljcm8tdGVtcGxhdGluZy9cbiAgICAgIC8vIGFuZCBMYXVyYSBEb2t0b3JvdmEncyBkb1QuanNcbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9vbGFkby9kb1RcbiAgICAgIHZhciBzZXR0aW5ncyA9IGxvZGFzaC50ZW1wbGF0ZVNldHRpbmdzO1xuICAgICAgdGV4dCA9IFN0cmluZyh0ZXh0IHx8ICcnKTtcblxuICAgICAgLy8gYXZvaWQgbWlzc2luZyBkZXBlbmRlbmNpZXMgd2hlbiBgaXRlcmF0b3JUZW1wbGF0ZWAgaXMgbm90IGRlZmluZWRcbiAgICAgIG9wdGlvbnMgPSBkZWZhdWx0cyh7fSwgb3B0aW9ucywgc2V0dGluZ3MpO1xuXG4gICAgICB2YXIgaW1wb3J0cyA9IGRlZmF1bHRzKHt9LCBvcHRpb25zLmltcG9ydHMsIHNldHRpbmdzLmltcG9ydHMpLFxuICAgICAgICAgIGltcG9ydHNLZXlzID0ga2V5cyhpbXBvcnRzKSxcbiAgICAgICAgICBpbXBvcnRzVmFsdWVzID0gdmFsdWVzKGltcG9ydHMpO1xuXG4gICAgICB2YXIgaXNFdmFsdWF0aW5nLFxuICAgICAgICAgIGluZGV4ID0gMCxcbiAgICAgICAgICBpbnRlcnBvbGF0ZSA9IG9wdGlvbnMuaW50ZXJwb2xhdGUgfHwgcmVOb01hdGNoLFxuICAgICAgICAgIHNvdXJjZSA9IFwiX19wICs9ICdcIjtcblxuICAgICAgLy8gY29tcGlsZSB0aGUgcmVnZXhwIHRvIG1hdGNoIGVhY2ggZGVsaW1pdGVyXG4gICAgICB2YXIgcmVEZWxpbWl0ZXJzID0gUmVnRXhwKFxuICAgICAgICAob3B0aW9ucy5lc2NhcGUgfHwgcmVOb01hdGNoKS5zb3VyY2UgKyAnfCcgK1xuICAgICAgICBpbnRlcnBvbGF0ZS5zb3VyY2UgKyAnfCcgK1xuICAgICAgICAoaW50ZXJwb2xhdGUgPT09IHJlSW50ZXJwb2xhdGUgPyByZUVzVGVtcGxhdGUgOiByZU5vTWF0Y2gpLnNvdXJjZSArICd8JyArXG4gICAgICAgIChvcHRpb25zLmV2YWx1YXRlIHx8IHJlTm9NYXRjaCkuc291cmNlICsgJ3wkJ1xuICAgICAgLCAnZycpO1xuXG4gICAgICB0ZXh0LnJlcGxhY2UocmVEZWxpbWl0ZXJzLCBmdW5jdGlvbihtYXRjaCwgZXNjYXBlVmFsdWUsIGludGVycG9sYXRlVmFsdWUsIGVzVGVtcGxhdGVWYWx1ZSwgZXZhbHVhdGVWYWx1ZSwgb2Zmc2V0KSB7XG4gICAgICAgIGludGVycG9sYXRlVmFsdWUgfHwgKGludGVycG9sYXRlVmFsdWUgPSBlc1RlbXBsYXRlVmFsdWUpO1xuXG4gICAgICAgIC8vIGVzY2FwZSBjaGFyYWN0ZXJzIHRoYXQgY2Fubm90IGJlIGluY2x1ZGVkIGluIHN0cmluZyBsaXRlcmFsc1xuICAgICAgICBzb3VyY2UgKz0gdGV4dC5zbGljZShpbmRleCwgb2Zmc2V0KS5yZXBsYWNlKHJlVW5lc2NhcGVkU3RyaW5nLCBlc2NhcGVTdHJpbmdDaGFyKTtcblxuICAgICAgICAvLyByZXBsYWNlIGRlbGltaXRlcnMgd2l0aCBzbmlwcGV0c1xuICAgICAgICBpZiAoZXNjYXBlVmFsdWUpIHtcbiAgICAgICAgICBzb3VyY2UgKz0gXCInICtcXG5fX2UoXCIgKyBlc2NhcGVWYWx1ZSArIFwiKSArXFxuJ1wiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChldmFsdWF0ZVZhbHVlKSB7XG4gICAgICAgICAgaXNFdmFsdWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgICBzb3VyY2UgKz0gXCInO1xcblwiICsgZXZhbHVhdGVWYWx1ZSArIFwiO1xcbl9fcCArPSAnXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGludGVycG9sYXRlVmFsdWUpIHtcbiAgICAgICAgICBzb3VyY2UgKz0gXCInICtcXG4oKF9fdCA9IChcIiArIGludGVycG9sYXRlVmFsdWUgKyBcIikpID09IG51bGwgPyAnJyA6IF9fdCkgK1xcbidcIjtcbiAgICAgICAgfVxuICAgICAgICBpbmRleCA9IG9mZnNldCArIG1hdGNoLmxlbmd0aDtcblxuICAgICAgICAvLyB0aGUgSlMgZW5naW5lIGVtYmVkZGVkIGluIEFkb2JlIHByb2R1Y3RzIHJlcXVpcmVzIHJldHVybmluZyB0aGUgYG1hdGNoYFxuICAgICAgICAvLyBzdHJpbmcgaW4gb3JkZXIgdG8gcHJvZHVjZSB0aGUgY29ycmVjdCBgb2Zmc2V0YCB2YWx1ZVxuICAgICAgICByZXR1cm4gbWF0Y2g7XG4gICAgICB9KTtcblxuICAgICAgc291cmNlICs9IFwiJztcXG5cIjtcblxuICAgICAgLy8gaWYgYHZhcmlhYmxlYCBpcyBub3Qgc3BlY2lmaWVkLCB3cmFwIGEgd2l0aC1zdGF0ZW1lbnQgYXJvdW5kIHRoZSBnZW5lcmF0ZWRcbiAgICAgIC8vIGNvZGUgdG8gYWRkIHRoZSBkYXRhIG9iamVjdCB0byB0aGUgdG9wIG9mIHRoZSBzY29wZSBjaGFpblxuICAgICAgdmFyIHZhcmlhYmxlID0gb3B0aW9ucy52YXJpYWJsZSxcbiAgICAgICAgICBoYXNWYXJpYWJsZSA9IHZhcmlhYmxlO1xuXG4gICAgICBpZiAoIWhhc1ZhcmlhYmxlKSB7XG4gICAgICAgIHZhcmlhYmxlID0gJ29iaic7XG4gICAgICAgIHNvdXJjZSA9ICd3aXRoICgnICsgdmFyaWFibGUgKyAnKSB7XFxuJyArIHNvdXJjZSArICdcXG59XFxuJztcbiAgICAgIH1cbiAgICAgIC8vIGNsZWFudXAgY29kZSBieSBzdHJpcHBpbmcgZW1wdHkgc3RyaW5nc1xuICAgICAgc291cmNlID0gKGlzRXZhbHVhdGluZyA/IHNvdXJjZS5yZXBsYWNlKHJlRW1wdHlTdHJpbmdMZWFkaW5nLCAnJykgOiBzb3VyY2UpXG4gICAgICAgIC5yZXBsYWNlKHJlRW1wdHlTdHJpbmdNaWRkbGUsICckMScpXG4gICAgICAgIC5yZXBsYWNlKHJlRW1wdHlTdHJpbmdUcmFpbGluZywgJyQxOycpO1xuXG4gICAgICAvLyBmcmFtZSBjb2RlIGFzIHRoZSBmdW5jdGlvbiBib2R5XG4gICAgICBzb3VyY2UgPSAnZnVuY3Rpb24oJyArIHZhcmlhYmxlICsgJykge1xcbicgK1xuICAgICAgICAoaGFzVmFyaWFibGUgPyAnJyA6IHZhcmlhYmxlICsgJyB8fCAoJyArIHZhcmlhYmxlICsgJyA9IHt9KTtcXG4nKSArXG4gICAgICAgIFwidmFyIF9fdCwgX19wID0gJycsIF9fZSA9IF8uZXNjYXBlXCIgK1xuICAgICAgICAoaXNFdmFsdWF0aW5nXG4gICAgICAgICAgPyAnLCBfX2ogPSBBcnJheS5wcm90b3R5cGUuam9pbjtcXG4nICtcbiAgICAgICAgICAgIFwiZnVuY3Rpb24gcHJpbnQoKSB7IF9fcCArPSBfX2ouY2FsbChhcmd1bWVudHMsICcnKSB9XFxuXCJcbiAgICAgICAgICA6ICc7XFxuJ1xuICAgICAgICApICtcbiAgICAgICAgc291cmNlICtcbiAgICAgICAgJ3JldHVybiBfX3BcXG59JztcblxuICAgICAgLy8gVXNlIGEgc291cmNlVVJMIGZvciBlYXNpZXIgZGVidWdnaW5nLlxuICAgICAgLy8gaHR0cDovL3d3dy5odG1sNXJvY2tzLmNvbS9lbi90dXRvcmlhbHMvZGV2ZWxvcGVydG9vbHMvc291cmNlbWFwcy8jdG9jLXNvdXJjZXVybFxuICAgICAgdmFyIHNvdXJjZVVSTCA9ICdcXG4vKlxcbi8vIyBzb3VyY2VVUkw9JyArIChvcHRpb25zLnNvdXJjZVVSTCB8fCAnL2xvZGFzaC90ZW1wbGF0ZS9zb3VyY2VbJyArICh0ZW1wbGF0ZUNvdW50ZXIrKykgKyAnXScpICsgJ1xcbiovJztcblxuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IEZ1bmN0aW9uKGltcG9ydHNLZXlzLCAncmV0dXJuICcgKyBzb3VyY2UgKyBzb3VyY2VVUkwpLmFwcGx5KHVuZGVmaW5lZCwgaW1wb3J0c1ZhbHVlcyk7XG4gICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgZS5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9XG4gICAgICBpZiAoZGF0YSkge1xuICAgICAgICByZXR1cm4gcmVzdWx0KGRhdGEpO1xuICAgICAgfVxuICAgICAgLy8gcHJvdmlkZSB0aGUgY29tcGlsZWQgZnVuY3Rpb24ncyBzb3VyY2UgYnkgaXRzIGB0b1N0cmluZ2AgbWV0aG9kLCBpblxuICAgICAgLy8gc3VwcG9ydGVkIGVudmlyb25tZW50cywgb3IgdGhlIGBzb3VyY2VgIHByb3BlcnR5IGFzIGEgY29udmVuaWVuY2UgZm9yXG4gICAgICAvLyBpbmxpbmluZyBjb21waWxlZCB0ZW1wbGF0ZXMgZHVyaW5nIHRoZSBidWlsZCBwcm9jZXNzXG4gICAgICByZXN1bHQuc291cmNlID0gc291cmNlO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeGVjdXRlcyB0aGUgY2FsbGJhY2sgYG5gIHRpbWVzLCByZXR1cm5pbmcgYW4gYXJyYXkgb2YgdGhlIHJlc3VsdHNcbiAgICAgKiBvZiBlYWNoIGNhbGxiYWNrIGV4ZWN1dGlvbi4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZFxuICAgICAqIHdpdGggb25lIGFyZ3VtZW50OyAoaW5kZXgpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBudW1iZXIgb2YgdGltZXMgdG8gZXhlY3V0ZSB0aGUgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIGNhbGxlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhbiBhcnJheSBvZiB0aGUgcmVzdWx0cyBvZiBlYWNoIGBjYWxsYmFja2AgZXhlY3V0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgZGljZVJvbGxzID0gXy50aW1lcygzLCBfLnBhcnRpYWwoXy5yYW5kb20sIDEsIDYpKTtcbiAgICAgKiAvLyA9PiBbMywgNiwgNF1cbiAgICAgKlxuICAgICAqIF8udGltZXMoMywgZnVuY3Rpb24obikgeyBtYWdlLmNhc3RTcGVsbChuKTsgfSk7XG4gICAgICogLy8gPT4gY2FsbHMgYG1hZ2UuY2FzdFNwZWxsKG4pYCB0aHJlZSB0aW1lcywgcGFzc2luZyBgbmAgb2YgYDBgLCBgMWAsIGFuZCBgMmAgcmVzcGVjdGl2ZWx5XG4gICAgICpcbiAgICAgKiBfLnRpbWVzKDMsIGZ1bmN0aW9uKG4pIHsgdGhpcy5jYXN0KG4pOyB9LCBtYWdlKTtcbiAgICAgKiAvLyA9PiBhbHNvIGNhbGxzIGBtYWdlLmNhc3RTcGVsbChuKWAgdGhyZWUgdGltZXNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0aW1lcyhuLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgbiA9IChuID0gK24pID4gLTEgPyBuIDogMDtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIHJlc3VsdCA9IEFycmF5KG4pO1xuXG4gICAgICBjYWxsYmFjayA9IGJhc2VDcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMSk7XG4gICAgICB3aGlsZSAoKytpbmRleCA8IG4pIHtcbiAgICAgICAgcmVzdWx0W2luZGV4XSA9IGNhbGxiYWNrKGluZGV4KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGludmVyc2Ugb2YgYF8uZXNjYXBlYCB0aGlzIG1ldGhvZCBjb252ZXJ0cyB0aGUgSFRNTCBlbnRpdGllc1xuICAgICAqIGAmYW1wO2AsIGAmbHQ7YCwgYCZndDtgLCBgJnF1b3Q7YCwgYW5kIGAmIzM5O2AgaW4gYHN0cmluZ2AgdG8gdGhlaXJcbiAgICAgKiBjb3JyZXNwb25kaW5nIGNoYXJhY3RlcnMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0aWVzXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIHVuZXNjYXBlLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHVuZXNjYXBlZCBzdHJpbmcuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8udW5lc2NhcGUoJ0ZyZWQsIEJhcm5leSAmYW1wOyBQZWJibGVzJyk7XG4gICAgICogLy8gPT4gJ0ZyZWQsIEJhcm5leSAmIFBlYmJsZXMnXG4gICAgICovXG4gICAgZnVuY3Rpb24gdW5lc2NhcGUoc3RyaW5nKSB7XG4gICAgICByZXR1cm4gc3RyaW5nID09IG51bGwgPyAnJyA6IFN0cmluZyhzdHJpbmcpLnJlcGxhY2UocmVFc2NhcGVkSHRtbCwgdW5lc2NhcGVIdG1sQ2hhcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIGEgdW5pcXVlIElELiBJZiBgcHJlZml4YCBpcyBwcm92aWRlZCB0aGUgSUQgd2lsbCBiZSBhcHBlbmRlZCB0byBpdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXRpZXNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3ByZWZpeF0gVGhlIHZhbHVlIHRvIHByZWZpeCB0aGUgSUQgd2l0aC5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSB1bmlxdWUgSUQuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8udW5pcXVlSWQoJ2NvbnRhY3RfJyk7XG4gICAgICogLy8gPT4gJ2NvbnRhY3RfMTA0J1xuICAgICAqXG4gICAgICogXy51bmlxdWVJZCgpO1xuICAgICAqIC8vID0+ICcxMDUnXG4gICAgICovXG4gICAgZnVuY3Rpb24gdW5pcXVlSWQocHJlZml4KSB7XG4gICAgICB2YXIgaWQgPSArK2lkQ291bnRlcjtcbiAgICAgIHJldHVybiBTdHJpbmcocHJlZml4ID09IG51bGwgPyAnJyA6IHByZWZpeCkgKyBpZDtcbiAgICB9XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBgbG9kYXNoYCBvYmplY3QgdGhhdCB3cmFwcyB0aGUgZ2l2ZW4gdmFsdWUgd2l0aCBleHBsaWNpdFxuICAgICAqIG1ldGhvZCBjaGFpbmluZyBlbmFibGVkLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENoYWluaW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gd3JhcC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSB3cmFwcGVyIG9iamVjdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXG4gICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICAnYWdlJzogMzYgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgICdhZ2UnOiA0MCB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdwZWJibGVzJywgJ2FnZSc6IDEgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiB2YXIgeW91bmdlc3QgPSBfLmNoYWluKGNoYXJhY3RlcnMpXG4gICAgICogICAgIC5zb3J0QnkoJ2FnZScpXG4gICAgICogICAgIC5tYXAoZnVuY3Rpb24oY2hyKSB7IHJldHVybiBjaHIubmFtZSArICcgaXMgJyArIGNoci5hZ2U7IH0pXG4gICAgICogICAgIC5maXJzdCgpXG4gICAgICogICAgIC52YWx1ZSgpO1xuICAgICAqIC8vID0+ICdwZWJibGVzIGlzIDEnXG4gICAgICovXG4gICAgZnVuY3Rpb24gY2hhaW4odmFsdWUpIHtcbiAgICAgIHZhbHVlID0gbmV3IGxvZGFzaFdyYXBwZXIodmFsdWUpO1xuICAgICAgdmFsdWUuX19jaGFpbl9fID0gdHJ1ZTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbnZva2VzIGBpbnRlcmNlcHRvcmAgd2l0aCB0aGUgYHZhbHVlYCBhcyB0aGUgZmlyc3QgYXJndW1lbnQgYW5kIHRoZW5cbiAgICAgKiByZXR1cm5zIGB2YWx1ZWAuIFRoZSBwdXJwb3NlIG9mIHRoaXMgbWV0aG9kIGlzIHRvIFwidGFwIGludG9cIiBhIG1ldGhvZFxuICAgICAqIGNoYWluIGluIG9yZGVyIHRvIHBlcmZvcm0gb3BlcmF0aW9ucyBvbiBpbnRlcm1lZGlhdGUgcmVzdWx0cyB3aXRoaW5cbiAgICAgKiB0aGUgY2hhaW4uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ2hhaW5pbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm92aWRlIHRvIGBpbnRlcmNlcHRvcmAuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaW50ZXJjZXB0b3IgVGhlIGZ1bmN0aW9uIHRvIGludm9rZS5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyBgdmFsdWVgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfKFsxLCAyLCAzLCA0XSlcbiAgICAgKiAgLnRhcChmdW5jdGlvbihhcnJheSkgeyBhcnJheS5wb3AoKTsgfSlcbiAgICAgKiAgLnJldmVyc2UoKVxuICAgICAqICAudmFsdWUoKTtcbiAgICAgKiAvLyA9PiBbMywgMiwgMV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB0YXAodmFsdWUsIGludGVyY2VwdG9yKSB7XG4gICAgICBpbnRlcmNlcHRvcih2YWx1ZSk7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW5hYmxlcyBleHBsaWNpdCBtZXRob2QgY2hhaW5pbmcgb24gdGhlIHdyYXBwZXIgb2JqZWN0LlxuICAgICAqXG4gICAgICogQG5hbWUgY2hhaW5cbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDaGFpbmluZ1xuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSB3cmFwcGVyIG9iamVjdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXG4gICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAnYWdlJzogNDAgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiAvLyB3aXRob3V0IGV4cGxpY2l0IGNoYWluaW5nXG4gICAgICogXyhjaGFyYWN0ZXJzKS5maXJzdCgpO1xuICAgICAqIC8vID0+IHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2IH1cbiAgICAgKlxuICAgICAqIC8vIHdpdGggZXhwbGljaXQgY2hhaW5pbmdcbiAgICAgKiBfKGNoYXJhY3RlcnMpLmNoYWluKClcbiAgICAgKiAgIC5maXJzdCgpXG4gICAgICogICAucGljaygnYWdlJylcbiAgICAgKiAgIC52YWx1ZSgpO1xuICAgICAqIC8vID0+IHsgJ2FnZSc6IDM2IH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB3cmFwcGVyQ2hhaW4oKSB7XG4gICAgICB0aGlzLl9fY2hhaW5fXyA9IHRydWU7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcm9kdWNlcyB0aGUgYHRvU3RyaW5nYCByZXN1bHQgb2YgdGhlIHdyYXBwZWQgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAbmFtZSB0b1N0cmluZ1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENoYWluaW5nXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nIHJlc3VsdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXyhbMSwgMiwgM10pLnRvU3RyaW5nKCk7XG4gICAgICogLy8gPT4gJzEsMiwzJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHdyYXBwZXJUb1N0cmluZygpIHtcbiAgICAgIHJldHVybiBTdHJpbmcodGhpcy5fX3dyYXBwZWRfXyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXh0cmFjdHMgdGhlIHdyYXBwZWQgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAbmFtZSB2YWx1ZU9mXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgdmFsdWVcbiAgICAgKiBAY2F0ZWdvcnkgQ2hhaW5pbmdcbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgd3JhcHBlZCB2YWx1ZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXyhbMSwgMiwgM10pLnZhbHVlT2YoKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgM11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB3cmFwcGVyVmFsdWVPZigpIHtcbiAgICAgIHJldHVybiB0aGlzLl9fd3JhcHBlZF9fO1xuICAgIH1cblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLy8gYWRkIGZ1bmN0aW9ucyB0aGF0IHJldHVybiB3cmFwcGVkIHZhbHVlcyB3aGVuIGNoYWluaW5nXG4gICAgbG9kYXNoLmFmdGVyID0gYWZ0ZXI7XG4gICAgbG9kYXNoLmFzc2lnbiA9IGFzc2lnbjtcbiAgICBsb2Rhc2guYXQgPSBhdDtcbiAgICBsb2Rhc2guYmluZCA9IGJpbmQ7XG4gICAgbG9kYXNoLmJpbmRBbGwgPSBiaW5kQWxsO1xuICAgIGxvZGFzaC5iaW5kS2V5ID0gYmluZEtleTtcbiAgICBsb2Rhc2guY2hhaW4gPSBjaGFpbjtcbiAgICBsb2Rhc2guY29tcGFjdCA9IGNvbXBhY3Q7XG4gICAgbG9kYXNoLmNvbXBvc2UgPSBjb21wb3NlO1xuICAgIGxvZGFzaC5jb25zdGFudCA9IGNvbnN0YW50O1xuICAgIGxvZGFzaC5jb3VudEJ5ID0gY291bnRCeTtcbiAgICBsb2Rhc2guY3JlYXRlID0gY3JlYXRlO1xuICAgIGxvZGFzaC5jcmVhdGVDYWxsYmFjayA9IGNyZWF0ZUNhbGxiYWNrO1xuICAgIGxvZGFzaC5jdXJyeSA9IGN1cnJ5O1xuICAgIGxvZGFzaC5kZWJvdW5jZSA9IGRlYm91bmNlO1xuICAgIGxvZGFzaC5kZWZhdWx0cyA9IGRlZmF1bHRzO1xuICAgIGxvZGFzaC5kZWZlciA9IGRlZmVyO1xuICAgIGxvZGFzaC5kZWxheSA9IGRlbGF5O1xuICAgIGxvZGFzaC5kaWZmZXJlbmNlID0gZGlmZmVyZW5jZTtcbiAgICBsb2Rhc2guZmlsdGVyID0gZmlsdGVyO1xuICAgIGxvZGFzaC5mbGF0dGVuID0gZmxhdHRlbjtcbiAgICBsb2Rhc2guZm9yRWFjaCA9IGZvckVhY2g7XG4gICAgbG9kYXNoLmZvckVhY2hSaWdodCA9IGZvckVhY2hSaWdodDtcbiAgICBsb2Rhc2guZm9ySW4gPSBmb3JJbjtcbiAgICBsb2Rhc2guZm9ySW5SaWdodCA9IGZvckluUmlnaHQ7XG4gICAgbG9kYXNoLmZvck93biA9IGZvck93bjtcbiAgICBsb2Rhc2guZm9yT3duUmlnaHQgPSBmb3JPd25SaWdodDtcbiAgICBsb2Rhc2guZnVuY3Rpb25zID0gZnVuY3Rpb25zO1xuICAgIGxvZGFzaC5ncm91cEJ5ID0gZ3JvdXBCeTtcbiAgICBsb2Rhc2guaW5kZXhCeSA9IGluZGV4Qnk7XG4gICAgbG9kYXNoLmluaXRpYWwgPSBpbml0aWFsO1xuICAgIGxvZGFzaC5pbnRlcnNlY3Rpb24gPSBpbnRlcnNlY3Rpb247XG4gICAgbG9kYXNoLmludmVydCA9IGludmVydDtcbiAgICBsb2Rhc2guaW52b2tlID0gaW52b2tlO1xuICAgIGxvZGFzaC5rZXlzID0ga2V5cztcbiAgICBsb2Rhc2gubWFwID0gbWFwO1xuICAgIGxvZGFzaC5tYXBWYWx1ZXMgPSBtYXBWYWx1ZXM7XG4gICAgbG9kYXNoLm1heCA9IG1heDtcbiAgICBsb2Rhc2gubWVtb2l6ZSA9IG1lbW9pemU7XG4gICAgbG9kYXNoLm1lcmdlID0gbWVyZ2U7XG4gICAgbG9kYXNoLm1pbiA9IG1pbjtcbiAgICBsb2Rhc2gub21pdCA9IG9taXQ7XG4gICAgbG9kYXNoLm9uY2UgPSBvbmNlO1xuICAgIGxvZGFzaC5wYWlycyA9IHBhaXJzO1xuICAgIGxvZGFzaC5wYXJ0aWFsID0gcGFydGlhbDtcbiAgICBsb2Rhc2gucGFydGlhbFJpZ2h0ID0gcGFydGlhbFJpZ2h0O1xuICAgIGxvZGFzaC5waWNrID0gcGljaztcbiAgICBsb2Rhc2gucGx1Y2sgPSBwbHVjaztcbiAgICBsb2Rhc2gucHJvcGVydHkgPSBwcm9wZXJ0eTtcbiAgICBsb2Rhc2gucHVsbCA9IHB1bGw7XG4gICAgbG9kYXNoLnJhbmdlID0gcmFuZ2U7XG4gICAgbG9kYXNoLnJlamVjdCA9IHJlamVjdDtcbiAgICBsb2Rhc2gucmVtb3ZlID0gcmVtb3ZlO1xuICAgIGxvZGFzaC5yZXN0ID0gcmVzdDtcbiAgICBsb2Rhc2guc2h1ZmZsZSA9IHNodWZmbGU7XG4gICAgbG9kYXNoLnNvcnRCeSA9IHNvcnRCeTtcbiAgICBsb2Rhc2gudGFwID0gdGFwO1xuICAgIGxvZGFzaC50aHJvdHRsZSA9IHRocm90dGxlO1xuICAgIGxvZGFzaC50aW1lcyA9IHRpbWVzO1xuICAgIGxvZGFzaC50b0FycmF5ID0gdG9BcnJheTtcbiAgICBsb2Rhc2gudHJhbnNmb3JtID0gdHJhbnNmb3JtO1xuICAgIGxvZGFzaC51bmlvbiA9IHVuaW9uO1xuICAgIGxvZGFzaC51bmlxID0gdW5pcTtcbiAgICBsb2Rhc2gudmFsdWVzID0gdmFsdWVzO1xuICAgIGxvZGFzaC53aGVyZSA9IHdoZXJlO1xuICAgIGxvZGFzaC53aXRob3V0ID0gd2l0aG91dDtcbiAgICBsb2Rhc2gud3JhcCA9IHdyYXA7XG4gICAgbG9kYXNoLnhvciA9IHhvcjtcbiAgICBsb2Rhc2guemlwID0gemlwO1xuICAgIGxvZGFzaC56aXBPYmplY3QgPSB6aXBPYmplY3Q7XG5cbiAgICAvLyBhZGQgYWxpYXNlc1xuICAgIGxvZGFzaC5jb2xsZWN0ID0gbWFwO1xuICAgIGxvZGFzaC5kcm9wID0gcmVzdDtcbiAgICBsb2Rhc2guZWFjaCA9IGZvckVhY2g7XG4gICAgbG9kYXNoLmVhY2hSaWdodCA9IGZvckVhY2hSaWdodDtcbiAgICBsb2Rhc2guZXh0ZW5kID0gYXNzaWduO1xuICAgIGxvZGFzaC5tZXRob2RzID0gZnVuY3Rpb25zO1xuICAgIGxvZGFzaC5vYmplY3QgPSB6aXBPYmplY3Q7XG4gICAgbG9kYXNoLnNlbGVjdCA9IGZpbHRlcjtcbiAgICBsb2Rhc2gudGFpbCA9IHJlc3Q7XG4gICAgbG9kYXNoLnVuaXF1ZSA9IHVuaXE7XG4gICAgbG9kYXNoLnVuemlwID0gemlwO1xuXG4gICAgLy8gYWRkIGZ1bmN0aW9ucyB0byBgbG9kYXNoLnByb3RvdHlwZWBcbiAgICBtaXhpbihsb2Rhc2gpO1xuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvLyBhZGQgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIHVud3JhcHBlZCB2YWx1ZXMgd2hlbiBjaGFpbmluZ1xuICAgIGxvZGFzaC5jbG9uZSA9IGNsb25lO1xuICAgIGxvZGFzaC5jbG9uZURlZXAgPSBjbG9uZURlZXA7XG4gICAgbG9kYXNoLmNvbnRhaW5zID0gY29udGFpbnM7XG4gICAgbG9kYXNoLmVzY2FwZSA9IGVzY2FwZTtcbiAgICBsb2Rhc2guZXZlcnkgPSBldmVyeTtcbiAgICBsb2Rhc2guZmluZCA9IGZpbmQ7XG4gICAgbG9kYXNoLmZpbmRJbmRleCA9IGZpbmRJbmRleDtcbiAgICBsb2Rhc2guZmluZEtleSA9IGZpbmRLZXk7XG4gICAgbG9kYXNoLmZpbmRMYXN0ID0gZmluZExhc3Q7XG4gICAgbG9kYXNoLmZpbmRMYXN0SW5kZXggPSBmaW5kTGFzdEluZGV4O1xuICAgIGxvZGFzaC5maW5kTGFzdEtleSA9IGZpbmRMYXN0S2V5O1xuICAgIGxvZGFzaC5oYXMgPSBoYXM7XG4gICAgbG9kYXNoLmlkZW50aXR5ID0gaWRlbnRpdHk7XG4gICAgbG9kYXNoLmluZGV4T2YgPSBpbmRleE9mO1xuICAgIGxvZGFzaC5pc0FyZ3VtZW50cyA9IGlzQXJndW1lbnRzO1xuICAgIGxvZGFzaC5pc0FycmF5ID0gaXNBcnJheTtcbiAgICBsb2Rhc2guaXNCb29sZWFuID0gaXNCb29sZWFuO1xuICAgIGxvZGFzaC5pc0RhdGUgPSBpc0RhdGU7XG4gICAgbG9kYXNoLmlzRWxlbWVudCA9IGlzRWxlbWVudDtcbiAgICBsb2Rhc2guaXNFbXB0eSA9IGlzRW1wdHk7XG4gICAgbG9kYXNoLmlzRXF1YWwgPSBpc0VxdWFsO1xuICAgIGxvZGFzaC5pc0Zpbml0ZSA9IGlzRmluaXRlO1xuICAgIGxvZGFzaC5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtcbiAgICBsb2Rhc2guaXNOYU4gPSBpc05hTjtcbiAgICBsb2Rhc2guaXNOdWxsID0gaXNOdWxsO1xuICAgIGxvZGFzaC5pc051bWJlciA9IGlzTnVtYmVyO1xuICAgIGxvZGFzaC5pc09iamVjdCA9IGlzT2JqZWN0O1xuICAgIGxvZGFzaC5pc1BsYWluT2JqZWN0ID0gaXNQbGFpbk9iamVjdDtcbiAgICBsb2Rhc2guaXNSZWdFeHAgPSBpc1JlZ0V4cDtcbiAgICBsb2Rhc2guaXNTdHJpbmcgPSBpc1N0cmluZztcbiAgICBsb2Rhc2guaXNVbmRlZmluZWQgPSBpc1VuZGVmaW5lZDtcbiAgICBsb2Rhc2gubGFzdEluZGV4T2YgPSBsYXN0SW5kZXhPZjtcbiAgICBsb2Rhc2gubWl4aW4gPSBtaXhpbjtcbiAgICBsb2Rhc2gubm9Db25mbGljdCA9IG5vQ29uZmxpY3Q7XG4gICAgbG9kYXNoLm5vb3AgPSBub29wO1xuICAgIGxvZGFzaC5ub3cgPSBub3c7XG4gICAgbG9kYXNoLnBhcnNlSW50ID0gcGFyc2VJbnQ7XG4gICAgbG9kYXNoLnJhbmRvbSA9IHJhbmRvbTtcbiAgICBsb2Rhc2gucmVkdWNlID0gcmVkdWNlO1xuICAgIGxvZGFzaC5yZWR1Y2VSaWdodCA9IHJlZHVjZVJpZ2h0O1xuICAgIGxvZGFzaC5yZXN1bHQgPSByZXN1bHQ7XG4gICAgbG9kYXNoLnJ1bkluQ29udGV4dCA9IHJ1bkluQ29udGV4dDtcbiAgICBsb2Rhc2guc2l6ZSA9IHNpemU7XG4gICAgbG9kYXNoLnNvbWUgPSBzb21lO1xuICAgIGxvZGFzaC5zb3J0ZWRJbmRleCA9IHNvcnRlZEluZGV4O1xuICAgIGxvZGFzaC50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuICAgIGxvZGFzaC51bmVzY2FwZSA9IHVuZXNjYXBlO1xuICAgIGxvZGFzaC51bmlxdWVJZCA9IHVuaXF1ZUlkO1xuXG4gICAgLy8gYWRkIGFsaWFzZXNcbiAgICBsb2Rhc2guYWxsID0gZXZlcnk7XG4gICAgbG9kYXNoLmFueSA9IHNvbWU7XG4gICAgbG9kYXNoLmRldGVjdCA9IGZpbmQ7XG4gICAgbG9kYXNoLmZpbmRXaGVyZSA9IGZpbmQ7XG4gICAgbG9kYXNoLmZvbGRsID0gcmVkdWNlO1xuICAgIGxvZGFzaC5mb2xkciA9IHJlZHVjZVJpZ2h0O1xuICAgIGxvZGFzaC5pbmNsdWRlID0gY29udGFpbnM7XG4gICAgbG9kYXNoLmluamVjdCA9IHJlZHVjZTtcblxuICAgIG1peGluKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNvdXJjZSA9IHt9XG4gICAgICBmb3JPd24obG9kYXNoLCBmdW5jdGlvbihmdW5jLCBtZXRob2ROYW1lKSB7XG4gICAgICAgIGlmICghbG9kYXNoLnByb3RvdHlwZVttZXRob2ROYW1lXSkge1xuICAgICAgICAgIHNvdXJjZVttZXRob2ROYW1lXSA9IGZ1bmM7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHNvdXJjZTtcbiAgICB9KCksIGZhbHNlKTtcblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLy8gYWRkIGZ1bmN0aW9ucyBjYXBhYmxlIG9mIHJldHVybmluZyB3cmFwcGVkIGFuZCB1bndyYXBwZWQgdmFsdWVzIHdoZW4gY2hhaW5pbmdcbiAgICBsb2Rhc2guZmlyc3QgPSBmaXJzdDtcbiAgICBsb2Rhc2gubGFzdCA9IGxhc3Q7XG4gICAgbG9kYXNoLnNhbXBsZSA9IHNhbXBsZTtcblxuICAgIC8vIGFkZCBhbGlhc2VzXG4gICAgbG9kYXNoLnRha2UgPSBmaXJzdDtcbiAgICBsb2Rhc2guaGVhZCA9IGZpcnN0O1xuXG4gICAgZm9yT3duKGxvZGFzaCwgZnVuY3Rpb24oZnVuYywgbWV0aG9kTmFtZSkge1xuICAgICAgdmFyIGNhbGxiYWNrYWJsZSA9IG1ldGhvZE5hbWUgIT09ICdzYW1wbGUnO1xuICAgICAgaWYgKCFsb2Rhc2gucHJvdG90eXBlW21ldGhvZE5hbWVdKSB7XG4gICAgICAgIGxvZGFzaC5wcm90b3R5cGVbbWV0aG9kTmFtZV09IGZ1bmN0aW9uKG4sIGd1YXJkKSB7XG4gICAgICAgICAgdmFyIGNoYWluQWxsID0gdGhpcy5fX2NoYWluX18sXG4gICAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmModGhpcy5fX3dyYXBwZWRfXywgbiwgZ3VhcmQpO1xuXG4gICAgICAgICAgcmV0dXJuICFjaGFpbkFsbCAmJiAobiA9PSBudWxsIHx8IChndWFyZCAmJiAhKGNhbGxiYWNrYWJsZSAmJiB0eXBlb2YgbiA9PSAnZnVuY3Rpb24nKSkpXG4gICAgICAgICAgICA/IHJlc3VsdFxuICAgICAgICAgICAgOiBuZXcgbG9kYXNoV3JhcHBlcihyZXN1bHQsIGNoYWluQWxsKTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogVGhlIHNlbWFudGljIHZlcnNpb24gbnVtYmVyLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHR5cGUgc3RyaW5nXG4gICAgICovXG4gICAgbG9kYXNoLlZFUlNJT04gPSAnMi40LjEnO1xuXG4gICAgLy8gYWRkIFwiQ2hhaW5pbmdcIiBmdW5jdGlvbnMgdG8gdGhlIHdyYXBwZXJcbiAgICBsb2Rhc2gucHJvdG90eXBlLmNoYWluID0gd3JhcHBlckNoYWluO1xuICAgIGxvZGFzaC5wcm90b3R5cGUudG9TdHJpbmcgPSB3cmFwcGVyVG9TdHJpbmc7XG4gICAgbG9kYXNoLnByb3RvdHlwZS52YWx1ZSA9IHdyYXBwZXJWYWx1ZU9mO1xuICAgIGxvZGFzaC5wcm90b3R5cGUudmFsdWVPZiA9IHdyYXBwZXJWYWx1ZU9mO1xuXG4gICAgLy8gYWRkIGBBcnJheWAgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIHVud3JhcHBlZCB2YWx1ZXNcbiAgICBmb3JFYWNoKFsnam9pbicsICdwb3AnLCAnc2hpZnQnXSwgZnVuY3Rpb24obWV0aG9kTmFtZSkge1xuICAgICAgdmFyIGZ1bmMgPSBhcnJheVJlZlttZXRob2ROYW1lXTtcbiAgICAgIGxvZGFzaC5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNoYWluQWxsID0gdGhpcy5fX2NoYWluX18sXG4gICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXMuX193cmFwcGVkX18sIGFyZ3VtZW50cyk7XG5cbiAgICAgICAgcmV0dXJuIGNoYWluQWxsXG4gICAgICAgICAgPyBuZXcgbG9kYXNoV3JhcHBlcihyZXN1bHQsIGNoYWluQWxsKVxuICAgICAgICAgIDogcmVzdWx0O1xuICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8vIGFkZCBgQXJyYXlgIGZ1bmN0aW9ucyB0aGF0IHJldHVybiB0aGUgZXhpc3Rpbmcgd3JhcHBlZCB2YWx1ZVxuICAgIGZvckVhY2goWydwdXNoJywgJ3JldmVyc2UnLCAnc29ydCcsICd1bnNoaWZ0J10sIGZ1bmN0aW9uKG1ldGhvZE5hbWUpIHtcbiAgICAgIHZhciBmdW5jID0gYXJyYXlSZWZbbWV0aG9kTmFtZV07XG4gICAgICBsb2Rhc2gucHJvdG90eXBlW21ldGhvZE5hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGZ1bmMuYXBwbHkodGhpcy5fX3dyYXBwZWRfXywgYXJndW1lbnRzKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgLy8gYWRkIGBBcnJheWAgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIG5ldyB3cmFwcGVkIHZhbHVlc1xuICAgIGZvckVhY2goWydjb25jYXQnLCAnc2xpY2UnLCAnc3BsaWNlJ10sIGZ1bmN0aW9uKG1ldGhvZE5hbWUpIHtcbiAgICAgIHZhciBmdW5jID0gYXJyYXlSZWZbbWV0aG9kTmFtZV07XG4gICAgICBsb2Rhc2gucHJvdG90eXBlW21ldGhvZE5hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBuZXcgbG9kYXNoV3JhcHBlcihmdW5jLmFwcGx5KHRoaXMuX193cmFwcGVkX18sIGFyZ3VtZW50cyksIHRoaXMuX19jaGFpbl9fKTtcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICByZXR1cm4gbG9kYXNoO1xuICB9XG5cbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgLy8gZXhwb3NlIExvLURhc2hcbiAgdmFyIF8gPSBydW5JbkNvbnRleHQoKTtcblxuICAvLyBzb21lIEFNRCBidWlsZCBvcHRpbWl6ZXJzIGxpa2Ugci5qcyBjaGVjayBmb3IgY29uZGl0aW9uIHBhdHRlcm5zIGxpa2UgdGhlIGZvbGxvd2luZzpcbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PSAnb2JqZWN0JyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgLy8gRXhwb3NlIExvLURhc2ggdG8gdGhlIGdsb2JhbCBvYmplY3QgZXZlbiB3aGVuIGFuIEFNRCBsb2FkZXIgaXMgcHJlc2VudCBpblxuICAgIC8vIGNhc2UgTG8tRGFzaCBpcyBsb2FkZWQgd2l0aCBhIFJlcXVpcmVKUyBzaGltIGNvbmZpZy5cbiAgICAvLyBTZWUgaHR0cDovL3JlcXVpcmVqcy5vcmcvZG9jcy9hcGkuaHRtbCNjb25maWctc2hpbVxuICAgIHJvb3QuXyA9IF87XG5cbiAgICAvLyBkZWZpbmUgYXMgYW4gYW5vbnltb3VzIG1vZHVsZSBzbywgdGhyb3VnaCBwYXRoIG1hcHBpbmcsIGl0IGNhbiBiZVxuICAgIC8vIHJlZmVyZW5jZWQgYXMgdGhlIFwidW5kZXJzY29yZVwiIG1vZHVsZVxuICAgIGRlZmluZShmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBfO1xuICAgIH0pO1xuICB9XG4gIC8vIGNoZWNrIGZvciBgZXhwb3J0c2AgYWZ0ZXIgYGRlZmluZWAgaW4gY2FzZSBhIGJ1aWxkIG9wdGltaXplciBhZGRzIGFuIGBleHBvcnRzYCBvYmplY3RcbiAgZWxzZSBpZiAoZnJlZUV4cG9ydHMgJiYgZnJlZU1vZHVsZSkge1xuICAgIC8vIGluIE5vZGUuanMgb3IgUmluZ29KU1xuICAgIGlmIChtb2R1bGVFeHBvcnRzKSB7XG4gICAgICAoZnJlZU1vZHVsZS5leHBvcnRzID0gXykuXyA9IF87XG4gICAgfVxuICAgIC8vIGluIE5hcndoYWwgb3IgUmhpbm8gLXJlcXVpcmVcbiAgICBlbHNlIHtcbiAgICAgIGZyZWVFeHBvcnRzLl8gPSBfO1xuICAgIH1cbiAgfVxuICBlbHNlIHtcbiAgICAvLyBpbiBhIGJyb3dzZXIgb3IgUmhpbm9cbiAgICByb290Ll8gPSBfO1xuICB9XG59LmNhbGwodGhpcykpO1xuXG59KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB7fSkiLCIvKiEgc2hpZnR5IC0gdjEuMi4yIC0gMjAxNC0xMC0wOSAtIGh0dHA6Ly9qZXJlbXlja2Fobi5naXRodWIuaW8vc2hpZnR5ICovXG47KGZ1bmN0aW9uIChyb290KSB7XG5cbi8qIVxuICogU2hpZnR5IENvcmVcbiAqIEJ5IEplcmVteSBLYWhuIC0gamVyZW15Y2thaG5AZ21haWwuY29tXG4gKi9cblxuLy8gVWdsaWZ5SlMgZGVmaW5lIGhhY2suICBVc2VkIGZvciB1bml0IHRlc3RpbmcuICBDb250ZW50cyBvZiB0aGlzIGlmIGFyZVxuLy8gY29tcGlsZWQgYXdheS5cbmlmICh0eXBlb2YgU0hJRlRZX0RFQlVHX05PVyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgU0hJRlRZX0RFQlVHX05PVyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gK25ldyBEYXRlKCk7XG4gIH07XG59XG5cbnZhciBUd2VlbmFibGUgPSAoZnVuY3Rpb24gKCkge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICAvLyBBbGlhc2VzIHRoYXQgZ2V0IGRlZmluZWQgbGF0ZXIgaW4gdGhpcyBmdW5jdGlvblxuICB2YXIgZm9ybXVsYTtcblxuICAvLyBDT05TVEFOVFNcbiAgdmFyIERFRkFVTFRfU0NIRURVTEVfRlVOQ1RJT047XG4gIHZhciBERUZBVUxUX0VBU0lORyA9ICdsaW5lYXInO1xuICB2YXIgREVGQVVMVF9EVVJBVElPTiA9IDUwMDtcbiAgdmFyIFVQREFURV9USU1FID0gMTAwMCAvIDYwO1xuXG4gIHZhciBfbm93ID0gRGF0ZS5ub3dcbiAgICAgICA/IERhdGUubm93XG4gICAgICAgOiBmdW5jdGlvbiAoKSB7cmV0dXJuICtuZXcgRGF0ZSgpO307XG5cbiAgdmFyIG5vdyA9IFNISUZUWV9ERUJVR19OT1dcbiAgICAgICA/IFNISUZUWV9ERUJVR19OT1dcbiAgICAgICA6IF9ub3c7XG5cbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgLy8gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCkgc2hpbSBieSBQYXVsIElyaXNoIChtb2RpZmllZCBmb3IgU2hpZnR5KVxuICAgIC8vIGh0dHA6Ly9wYXVsaXJpc2guY29tLzIwMTEvcmVxdWVzdGFuaW1hdGlvbmZyYW1lLWZvci1zbWFydC1hbmltYXRpbmcvXG4gICAgREVGQVVMVF9TQ0hFRFVMRV9GVU5DVElPTiA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWVcbiAgICAgICB8fCB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lXG4gICAgICAgfHwgd2luZG93Lm9SZXF1ZXN0QW5pbWF0aW9uRnJhbWVcbiAgICAgICB8fCB3aW5kb3cubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcbiAgICAgICB8fCAod2luZG93Lm1vekNhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZVxuICAgICAgICYmIHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUpXG4gICAgICAgfHwgc2V0VGltZW91dDtcbiAgfSBlbHNlIHtcbiAgICBERUZBVUxUX1NDSEVEVUxFX0ZVTkNUSU9OID0gc2V0VGltZW91dDtcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vb3AgKCkge1xuICAgIC8vIE5PT1AhXG4gIH1cblxuICAvKiFcbiAgICogSGFuZHkgc2hvcnRjdXQgZm9yIGRvaW5nIGEgZm9yLWluIGxvb3AuIFRoaXMgaXMgbm90IGEgXCJub3JtYWxcIiBlYWNoXG4gICAqIGZ1bmN0aW9uLCBpdCBpcyBvcHRpbWl6ZWQgZm9yIFNoaWZ0eS4gIFRoZSBpdGVyYXRvciBmdW5jdGlvbiBvbmx5IHJlY2VpdmVzXG4gICAqIHRoZSBwcm9wZXJ0eSBuYW1lLCBub3QgdGhlIHZhbHVlLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb24oc3RyaW5nKX0gZm5cbiAgICovXG4gIGZ1bmN0aW9uIGVhY2ggKG9iaiwgZm4pIHtcbiAgICB2YXIga2V5O1xuICAgIGZvciAoa2V5IGluIG9iaikge1xuICAgICAgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgICBmbihrZXkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qIVxuICAgKiBQZXJmb3JtIGEgc2hhbGxvdyBjb3B5IG9mIE9iamVjdCBwcm9wZXJ0aWVzLlxuICAgKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0T2JqZWN0IFRoZSBvYmplY3QgdG8gY29weSBpbnRvXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzcmNPYmplY3QgVGhlIG9iamVjdCB0byBjb3B5IGZyb21cbiAgICogQHJldHVybiB7T2JqZWN0fSBBIHJlZmVyZW5jZSB0byB0aGUgYXVnbWVudGVkIGB0YXJnZXRPYmpgIE9iamVjdFxuICAgKi9cbiAgZnVuY3Rpb24gc2hhbGxvd0NvcHkgKHRhcmdldE9iaiwgc3JjT2JqKSB7XG4gICAgZWFjaChzcmNPYmosIGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgICB0YXJnZXRPYmpbcHJvcF0gPSBzcmNPYmpbcHJvcF07XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGFyZ2V0T2JqO1xuICB9XG5cbiAgLyohXG4gICAqIENvcGllcyBlYWNoIHByb3BlcnR5IGZyb20gc3JjIG9udG8gdGFyZ2V0LCBidXQgb25seSBpZiB0aGUgcHJvcGVydHkgdG9cbiAgICogY29weSB0byB0YXJnZXQgaXMgdW5kZWZpbmVkLlxuICAgKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0IE1pc3NpbmcgcHJvcGVydGllcyBpbiB0aGlzIE9iamVjdCBhcmUgZmlsbGVkIGluXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzcmNcbiAgICovXG4gIGZ1bmN0aW9uIGRlZmF1bHRzICh0YXJnZXQsIHNyYykge1xuICAgIGVhY2goc3JjLCBmdW5jdGlvbiAocHJvcCkge1xuICAgICAgaWYgKHR5cGVvZiB0YXJnZXRbcHJvcF0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRhcmdldFtwcm9wXSA9IHNyY1twcm9wXTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qIVxuICAgKiBDYWxjdWxhdGVzIHRoZSBpbnRlcnBvbGF0ZWQgdHdlZW4gdmFsdWVzIG9mIGFuIE9iamVjdCBmb3IgYSBnaXZlblxuICAgKiB0aW1lc3RhbXAuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBmb3JQb3NpdGlvbiBUaGUgcG9zaXRpb24gdG8gY29tcHV0ZSB0aGUgc3RhdGUgZm9yLlxuICAgKiBAcGFyYW0ge09iamVjdH0gY3VycmVudFN0YXRlIEN1cnJlbnQgc3RhdGUgcHJvcGVydGllcy5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9yaWdpbmFsU3RhdGU6IFRoZSBvcmlnaW5hbCBzdGF0ZSBwcm9wZXJ0aWVzIHRoZSBPYmplY3QgaXNcbiAgICogdHdlZW5pbmcgZnJvbS5cbiAgICogQHBhcmFtIHtPYmplY3R9IHRhcmdldFN0YXRlOiBUaGUgZGVzdGluYXRpb24gc3RhdGUgcHJvcGVydGllcyB0aGUgT2JqZWN0XG4gICAqIGlzIHR3ZWVuaW5nIHRvLlxuICAgKiBAcGFyYW0ge251bWJlcn0gZHVyYXRpb246IFRoZSBsZW5ndGggb2YgdGhlIHR3ZWVuIGluIG1pbGxpc2Vjb25kcy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWVzdGFtcDogVGhlIFVOSVggZXBvY2ggdGltZSBhdCB3aGljaCB0aGUgdHdlZW4gYmVnYW4uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBlYXNpbmc6IFRoaXMgT2JqZWN0J3Mga2V5cyBtdXN0IGNvcnJlc3BvbmQgdG8gdGhlIGtleXMgaW5cbiAgICogdGFyZ2V0U3RhdGUuXG4gICAqL1xuICBmdW5jdGlvbiB0d2VlblByb3BzIChmb3JQb3NpdGlvbiwgY3VycmVudFN0YXRlLCBvcmlnaW5hbFN0YXRlLCB0YXJnZXRTdGF0ZSxcbiAgICBkdXJhdGlvbiwgdGltZXN0YW1wLCBlYXNpbmcpIHtcbiAgICB2YXIgbm9ybWFsaXplZFBvc2l0aW9uID0gKGZvclBvc2l0aW9uIC0gdGltZXN0YW1wKSAvIGR1cmF0aW9uO1xuXG4gICAgdmFyIHByb3A7XG4gICAgZm9yIChwcm9wIGluIGN1cnJlbnRTdGF0ZSkge1xuICAgICAgaWYgKGN1cnJlbnRTdGF0ZS5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgICBjdXJyZW50U3RhdGVbcHJvcF0gPSB0d2VlblByb3Aob3JpZ2luYWxTdGF0ZVtwcm9wXSxcbiAgICAgICAgICB0YXJnZXRTdGF0ZVtwcm9wXSwgZm9ybXVsYVtlYXNpbmdbcHJvcF1dLCBub3JtYWxpemVkUG9zaXRpb24pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjdXJyZW50U3RhdGU7XG4gIH1cblxuICAvKiFcbiAgICogVHdlZW5zIGEgc2luZ2xlIHByb3BlcnR5LlxuICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnQgVGhlIHZhbHVlIHRoYXQgdGhlIHR3ZWVuIHN0YXJ0ZWQgZnJvbS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBUaGUgdmFsdWUgdGhhdCB0aGUgdHdlZW4gc2hvdWxkIGVuZCBhdC5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZWFzaW5nRnVuYyBUaGUgZWFzaW5nIGN1cnZlIHRvIGFwcGx5IHRvIHRoZSB0d2Vlbi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHBvc2l0aW9uIFRoZSBub3JtYWxpemVkIHBvc2l0aW9uIChiZXR3ZWVuIDAuMCBhbmQgMS4wKSB0b1xuICAgKiBjYWxjdWxhdGUgdGhlIG1pZHBvaW50IG9mICdzdGFydCcgYW5kICdlbmQnIGFnYWluc3QuXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGhlIHR3ZWVuZWQgdmFsdWUuXG4gICAqL1xuICBmdW5jdGlvbiB0d2VlblByb3AgKHN0YXJ0LCBlbmQsIGVhc2luZ0Z1bmMsIHBvc2l0aW9uKSB7XG4gICAgcmV0dXJuIHN0YXJ0ICsgKGVuZCAtIHN0YXJ0KSAqIGVhc2luZ0Z1bmMocG9zaXRpb24pO1xuICB9XG5cbiAgLyohXG4gICAqIEFwcGxpZXMgYSBmaWx0ZXIgdG8gVHdlZW5hYmxlIGluc3RhbmNlLlxuICAgKiBAcGFyYW0ge1R3ZWVuYWJsZX0gdHdlZW5hYmxlIFRoZSBgVHdlZW5hYmxlYCBpbnN0YW5jZSB0byBjYWxsIHRoZSBmaWx0ZXJcbiAgICogdXBvbi5cbiAgICogQHBhcmFtIHtTdHJpbmd9IGZpbHRlck5hbWUgVGhlIG5hbWUgb2YgdGhlIGZpbHRlciB0byBhcHBseS5cbiAgICovXG4gIGZ1bmN0aW9uIGFwcGx5RmlsdGVyICh0d2VlbmFibGUsIGZpbHRlck5hbWUpIHtcbiAgICB2YXIgZmlsdGVycyA9IFR3ZWVuYWJsZS5wcm90b3R5cGUuZmlsdGVyO1xuICAgIHZhciBhcmdzID0gdHdlZW5hYmxlLl9maWx0ZXJBcmdzO1xuXG4gICAgZWFjaChmaWx0ZXJzLCBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgaWYgKHR5cGVvZiBmaWx0ZXJzW25hbWVdW2ZpbHRlck5hbWVdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBmaWx0ZXJzW25hbWVdW2ZpbHRlck5hbWVdLmFwcGx5KHR3ZWVuYWJsZSwgYXJncyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICB2YXIgdGltZW91dEhhbmRsZXJfZW5kVGltZTtcbiAgdmFyIHRpbWVvdXRIYW5kbGVyX2N1cnJlbnRUaW1lO1xuICB2YXIgdGltZW91dEhhbmRsZXJfaXNFbmRlZDtcbiAgLyohXG4gICAqIEhhbmRsZXMgdGhlIHVwZGF0ZSBsb2dpYyBmb3Igb25lIHN0ZXAgb2YgYSB0d2Vlbi5cbiAgICogQHBhcmFtIHtUd2VlbmFibGV9IHR3ZWVuYWJsZVxuICAgKiBAcGFyYW0ge251bWJlcn0gdGltZXN0YW1wXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvblxuICAgKiBAcGFyYW0ge09iamVjdH0gY3VycmVudFN0YXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcmlnaW5hbFN0YXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRTdGF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gZWFzaW5nXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHN0ZXBcbiAgICogQHBhcmFtIHtGdW5jdGlvbihGdW5jdGlvbixudW1iZXIpfX0gc2NoZWR1bGVcbiAgICovXG4gIGZ1bmN0aW9uIHRpbWVvdXRIYW5kbGVyICh0d2VlbmFibGUsIHRpbWVzdGFtcCwgZHVyYXRpb24sIGN1cnJlbnRTdGF0ZSxcbiAgICBvcmlnaW5hbFN0YXRlLCB0YXJnZXRTdGF0ZSwgZWFzaW5nLCBzdGVwLCBzY2hlZHVsZSkge1xuICAgIHRpbWVvdXRIYW5kbGVyX2VuZFRpbWUgPSB0aW1lc3RhbXAgKyBkdXJhdGlvbjtcbiAgICB0aW1lb3V0SGFuZGxlcl9jdXJyZW50VGltZSA9IE1hdGgubWluKG5vdygpLCB0aW1lb3V0SGFuZGxlcl9lbmRUaW1lKTtcbiAgICB0aW1lb3V0SGFuZGxlcl9pc0VuZGVkID0gdGltZW91dEhhbmRsZXJfY3VycmVudFRpbWUgPj0gdGltZW91dEhhbmRsZXJfZW5kVGltZTtcblxuICAgIGlmICh0d2VlbmFibGUuaXNQbGF5aW5nKCkgJiYgIXRpbWVvdXRIYW5kbGVyX2lzRW5kZWQpIHtcbiAgICAgIHNjaGVkdWxlKHR3ZWVuYWJsZS5fdGltZW91dEhhbmRsZXIsIFVQREFURV9USU1FKTtcblxuICAgICAgYXBwbHlGaWx0ZXIodHdlZW5hYmxlLCAnYmVmb3JlVHdlZW4nKTtcbiAgICAgIHR3ZWVuUHJvcHModGltZW91dEhhbmRsZXJfY3VycmVudFRpbWUsIGN1cnJlbnRTdGF0ZSwgb3JpZ2luYWxTdGF0ZSxcbiAgICAgICAgdGFyZ2V0U3RhdGUsIGR1cmF0aW9uLCB0aW1lc3RhbXAsIGVhc2luZyk7XG4gICAgICBhcHBseUZpbHRlcih0d2VlbmFibGUsICdhZnRlclR3ZWVuJyk7XG5cbiAgICAgIHN0ZXAoY3VycmVudFN0YXRlKTtcbiAgICB9IGVsc2UgaWYgKHRpbWVvdXRIYW5kbGVyX2lzRW5kZWQpIHtcbiAgICAgIHN0ZXAodGFyZ2V0U3RhdGUpO1xuICAgICAgdHdlZW5hYmxlLnN0b3AodHJ1ZSk7XG4gICAgfVxuICB9XG5cblxuICAvKiFcbiAgICogQ3JlYXRlcyBhIHVzYWJsZSBlYXNpbmcgT2JqZWN0IGZyb20gZWl0aGVyIGEgc3RyaW5nIG9yIGFub3RoZXIgZWFzaW5nXG4gICAqIE9iamVjdC4gIElmIGBlYXNpbmdgIGlzIGFuIE9iamVjdCwgdGhlbiB0aGlzIGZ1bmN0aW9uIGNsb25lcyBpdCBhbmQgZmlsbHNcbiAgICogaW4gdGhlIG1pc3NpbmcgcHJvcGVydGllcyB3aXRoIFwibGluZWFyXCIuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBmcm9tVHdlZW5QYXJhbXNcbiAgICogQHBhcmFtIHtPYmplY3R8c3RyaW5nfSBlYXNpbmdcbiAgICovXG4gIGZ1bmN0aW9uIGNvbXBvc2VFYXNpbmdPYmplY3QgKGZyb21Ud2VlblBhcmFtcywgZWFzaW5nKSB7XG4gICAgdmFyIGNvbXBvc2VkRWFzaW5nID0ge307XG5cbiAgICBpZiAodHlwZW9mIGVhc2luZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGVhY2goZnJvbVR3ZWVuUGFyYW1zLCBmdW5jdGlvbiAocHJvcCkge1xuICAgICAgICBjb21wb3NlZEVhc2luZ1twcm9wXSA9IGVhc2luZztcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBlYWNoKGZyb21Ud2VlblBhcmFtcywgZnVuY3Rpb24gKHByb3ApIHtcbiAgICAgICAgaWYgKCFjb21wb3NlZEVhc2luZ1twcm9wXSkge1xuICAgICAgICAgIGNvbXBvc2VkRWFzaW5nW3Byb3BdID0gZWFzaW5nW3Byb3BdIHx8IERFRkFVTFRfRUFTSU5HO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29tcG9zZWRFYXNpbmc7XG4gIH1cblxuICAvKipcbiAgICogVHdlZW5hYmxlIGNvbnN0cnVjdG9yLlxuICAgKiBAcGFyYW0ge09iamVjdD19IG9wdF9pbml0aWFsU3RhdGUgVGhlIHZhbHVlcyB0aGF0IHRoZSBpbml0aWFsIHR3ZWVuIHNob3VsZCBzdGFydCBhdCBpZiBhIFwiZnJvbVwiIG9iamVjdCBpcyBub3QgcHJvdmlkZWQgdG8gVHdlZW5hYmxlI3R3ZWVuLlxuICAgKiBAcGFyYW0ge09iamVjdD19IG9wdF9jb25maWcgU2VlIFR3ZWVuYWJsZS5wcm90b3R5cGUuc2V0Q29uZmlnKClcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqL1xuICBmdW5jdGlvbiBUd2VlbmFibGUgKG9wdF9pbml0aWFsU3RhdGUsIG9wdF9jb25maWcpIHtcbiAgICB0aGlzLl9jdXJyZW50U3RhdGUgPSBvcHRfaW5pdGlhbFN0YXRlIHx8IHt9O1xuICAgIHRoaXMuX2NvbmZpZ3VyZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9zY2hlZHVsZUZ1bmN0aW9uID0gREVGQVVMVF9TQ0hFRFVMRV9GVU5DVElPTjtcblxuICAgIC8vIFRvIHByZXZlbnQgdW5uZWNlc3NhcnkgY2FsbHMgdG8gc2V0Q29uZmlnIGRvIG5vdCBzZXQgZGVmYXVsdCBjb25maWd1cmF0aW9uIGhlcmUuXG4gICAgLy8gT25seSBzZXQgZGVmYXVsdCBjb25maWd1cmF0aW9uIGltbWVkaWF0ZWx5IGJlZm9yZSB0d2VlbmluZyBpZiBub25lIGhhcyBiZWVuIHNldC5cbiAgICBpZiAodHlwZW9mIG9wdF9jb25maWcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLnNldENvbmZpZyhvcHRfY29uZmlnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ29uZmlndXJlIGFuZCBzdGFydCBhIHR3ZWVuLlxuICAgKiBAcGFyYW0ge09iamVjdD19IG9wdF9jb25maWcgU2VlIFR3ZWVuYWJsZS5wcm90b3R5cGUuc2V0Q29uZmlnKClcbiAgICogQHJldHVybiB7VHdlZW5hYmxlfVxuICAgKi9cbiAgVHdlZW5hYmxlLnByb3RvdHlwZS50d2VlbiA9IGZ1bmN0aW9uIChvcHRfY29uZmlnKSB7XG4gICAgaWYgKHRoaXMuX2lzVHdlZW5pbmcpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8vIE9ubHkgc2V0IGRlZmF1bHQgY29uZmlnIGlmIG5vIGNvbmZpZ3VyYXRpb24gaGFzIGJlZW4gc2V0IHByZXZpb3VzbHkgYW5kIG5vbmUgaXMgcHJvdmlkZWQgbm93LlxuICAgIGlmIChvcHRfY29uZmlnICE9PSB1bmRlZmluZWQgfHwgIXRoaXMuX2NvbmZpZ3VyZWQpIHtcbiAgICAgIHRoaXMuc2V0Q29uZmlnKG9wdF9jb25maWcpO1xuICAgIH1cblxuICAgIHRoaXMuX3N0YXJ0KHRoaXMuZ2V0KCkpO1xuICAgIHJldHVybiB0aGlzLnJlc3VtZSgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB0d2VlbiBjb25maWd1cmF0aW9uLiBgY29uZmlnYCBtYXkgaGF2ZSB0aGUgZm9sbG93aW5nIG9wdGlvbnM6XG4gICAqXG4gICAqIC0gX19mcm9tX18gKF9PYmplY3Q9Xyk6IFN0YXJ0aW5nIHBvc2l0aW9uLiAgSWYgb21pdHRlZCwgdGhlIGN1cnJlbnQgc3RhdGUgaXMgdXNlZC5cbiAgICogLSBfX3RvX18gKF9PYmplY3Q9Xyk6IEVuZGluZyBwb3NpdGlvbi5cbiAgICogLSBfX2R1cmF0aW9uX18gKF9udW1iZXI9Xyk6IEhvdyBtYW55IG1pbGxpc2Vjb25kcyB0byBhbmltYXRlIGZvci5cbiAgICogLSBfX3N0YXJ0X18gKF9GdW5jdGlvbihPYmplY3QpPV8pOiBGdW5jdGlvbiB0byBleGVjdXRlIHdoZW4gdGhlIHR3ZWVuIGJlZ2lucy4gIFJlY2VpdmVzIHRoZSBzdGF0ZSBvZiB0aGUgdHdlZW4gYXMgdGhlIG9ubHkgcGFyYW1ldGVyLlxuICAgKiAtIF9fc3RlcF9fIChfRnVuY3Rpb24oT2JqZWN0KT1fKTogRnVuY3Rpb24gdG8gZXhlY3V0ZSBvbiBldmVyeSB0aWNrLiAgUmVjZWl2ZXMgdGhlIHN0YXRlIG9mIHRoZSB0d2VlbiBhcyB0aGUgb25seSBwYXJhbWV0ZXIuICBUaGlzIGZ1bmN0aW9uIGlzIG5vdCBjYWxsZWQgb24gdGhlIGZpbmFsIHN0ZXAgb2YgdGhlIGFuaW1hdGlvbiwgYnV0IGBmaW5pc2hgIGlzLlxuICAgKiAtIF9fZmluaXNoX18gKF9GdW5jdGlvbihPYmplY3QpPV8pOiBGdW5jdGlvbiB0byBleGVjdXRlIHVwb24gdHdlZW4gY29tcGxldGlvbi4gIFJlY2VpdmVzIHRoZSBzdGF0ZSBvZiB0aGUgdHdlZW4gYXMgdGhlIG9ubHkgcGFyYW1ldGVyLlxuICAgKiAtIF9fZWFzaW5nX18gKF9PYmplY3R8c3RyaW5nPV8pOiBFYXNpbmcgY3VydmUgbmFtZShzKSB0byB1c2UgZm9yIHRoZSB0d2Vlbi5cbiAgICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZ1xuICAgKiBAcmV0dXJuIHtUd2VlbmFibGV9XG4gICAqL1xuICBUd2VlbmFibGUucHJvdG90eXBlLnNldENvbmZpZyA9IGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICBjb25maWcgPSBjb25maWcgfHwge307XG4gICAgdGhpcy5fY29uZmlndXJlZCA9IHRydWU7XG5cbiAgICAvLyBJbml0IHRoZSBpbnRlcm5hbCBzdGF0ZVxuICAgIHRoaXMuX3BhdXNlZEF0VGltZSA9IG51bGw7XG4gICAgdGhpcy5fc3RhcnQgPSBjb25maWcuc3RhcnQgfHwgbm9vcDtcbiAgICB0aGlzLl9zdGVwID0gY29uZmlnLnN0ZXAgfHwgbm9vcDtcbiAgICB0aGlzLl9maW5pc2ggPSBjb25maWcuZmluaXNoIHx8IG5vb3A7XG4gICAgdGhpcy5fZHVyYXRpb24gPSBjb25maWcuZHVyYXRpb24gfHwgREVGQVVMVF9EVVJBVElPTjtcbiAgICB0aGlzLl9jdXJyZW50U3RhdGUgPSBjb25maWcuZnJvbSB8fCB0aGlzLmdldCgpO1xuICAgIHRoaXMuX29yaWdpbmFsU3RhdGUgPSB0aGlzLmdldCgpO1xuICAgIHRoaXMuX3RhcmdldFN0YXRlID0gY29uZmlnLnRvIHx8IHRoaXMuZ2V0KCk7XG4gICAgdGhpcy5fdGltZXN0YW1wID0gbm93KCk7XG5cbiAgICAvLyBBbGlhc2VzIHVzZWQgYmVsb3dcbiAgICB2YXIgY3VycmVudFN0YXRlID0gdGhpcy5fY3VycmVudFN0YXRlO1xuICAgIHZhciB0YXJnZXRTdGF0ZSA9IHRoaXMuX3RhcmdldFN0YXRlO1xuXG4gICAgLy8gRW5zdXJlIHRoYXQgdGhlcmUgaXMgYWx3YXlzIHNvbWV0aGluZyB0byB0d2VlbiB0by5cbiAgICBkZWZhdWx0cyh0YXJnZXRTdGF0ZSwgY3VycmVudFN0YXRlKTtcblxuICAgIHRoaXMuX2Vhc2luZyA9IGNvbXBvc2VFYXNpbmdPYmplY3QoXG4gICAgICBjdXJyZW50U3RhdGUsIGNvbmZpZy5lYXNpbmcgfHwgREVGQVVMVF9FQVNJTkcpO1xuXG4gICAgdGhpcy5fZmlsdGVyQXJncyA9XG4gICAgICBbY3VycmVudFN0YXRlLCB0aGlzLl9vcmlnaW5hbFN0YXRlLCB0YXJnZXRTdGF0ZSwgdGhpcy5fZWFzaW5nXTtcblxuICAgIGFwcGx5RmlsdGVyKHRoaXMsICd0d2VlbkNyZWF0ZWQnKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogR2V0cyB0aGUgY3VycmVudCBzdGF0ZS5cbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgVHdlZW5hYmxlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHNoYWxsb3dDb3B5KHt9LCB0aGlzLl9jdXJyZW50U3RhdGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBjdXJyZW50IHN0YXRlLlxuICAgKiBAcGFyYW0ge09iamVjdH0gc3RhdGVcbiAgICovXG4gIFR3ZWVuYWJsZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgdGhpcy5fY3VycmVudFN0YXRlID0gc3RhdGU7XG4gIH07XG5cbiAgLyoqXG4gICAqIFBhdXNlcyBhIHR3ZWVuLiAgUGF1c2VkIHR3ZWVucyBjYW4gYmUgcmVzdW1lZCBmcm9tIHRoZSBwb2ludCBhdCB3aGljaCB0aGV5IHdlcmUgcGF1c2VkLiAgVGhpcyBpcyBkaWZmZXJlbnQgdGhhbiBbYHN0b3AoKWBdKCNzdG9wKSwgYXMgdGhhdCBtZXRob2QgY2F1c2VzIGEgdHdlZW4gdG8gc3RhcnQgb3ZlciB3aGVuIGl0IGlzIHJlc3VtZWQuXG4gICAqIEByZXR1cm4ge1R3ZWVuYWJsZX1cbiAgICovXG4gIFR3ZWVuYWJsZS5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fcGF1c2VkQXRUaW1lID0gbm93KCk7XG4gICAgdGhpcy5faXNQYXVzZWQgPSB0cnVlO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXN1bWVzIGEgcGF1c2VkIHR3ZWVuLlxuICAgKiBAcmV0dXJuIHtUd2VlbmFibGV9XG4gICAqL1xuICBUd2VlbmFibGUucHJvdG90eXBlLnJlc3VtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5faXNQYXVzZWQpIHtcbiAgICAgIHRoaXMuX3RpbWVzdGFtcCArPSBub3coKSAtIHRoaXMuX3BhdXNlZEF0VGltZTtcbiAgICB9XG5cbiAgICB0aGlzLl9pc1BhdXNlZCA9IGZhbHNlO1xuICAgIHRoaXMuX2lzVHdlZW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMuX3RpbWVvdXRIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGltZW91dEhhbmRsZXIoc2VsZiwgc2VsZi5fdGltZXN0YW1wLCBzZWxmLl9kdXJhdGlvbiwgc2VsZi5fY3VycmVudFN0YXRlLFxuICAgICAgICBzZWxmLl9vcmlnaW5hbFN0YXRlLCBzZWxmLl90YXJnZXRTdGF0ZSwgc2VsZi5fZWFzaW5nLCBzZWxmLl9zdGVwLFxuICAgICAgICBzZWxmLl9zY2hlZHVsZUZ1bmN0aW9uKTtcbiAgICB9O1xuXG4gICAgdGhpcy5fdGltZW91dEhhbmRsZXIoKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTdG9wcyBhbmQgY2FuY2VscyBhIHR3ZWVuLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBnb3RvRW5kIElmIGZhbHNlIG9yIG9taXR0ZWQsIHRoZSB0d2VlbiBqdXN0IHN0b3BzIGF0IGl0cyBjdXJyZW50IHN0YXRlLCBhbmQgdGhlIFwiZmluaXNoXCIgaGFuZGxlciBpcyBub3QgaW52b2tlZC4gIElmIHRydWUsIHRoZSB0d2VlbmVkIG9iamVjdCdzIHZhbHVlcyBhcmUgaW5zdGFudGx5IHNldCB0byB0aGUgdGFyZ2V0IHZhbHVlcywgYW5kIFwiZmluaXNoXCIgaXMgaW52b2tlZC5cbiAgICogQHJldHVybiB7VHdlZW5hYmxlfVxuICAgKi9cbiAgVHdlZW5hYmxlLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gKGdvdG9FbmQpIHtcbiAgICB0aGlzLl9pc1R3ZWVuaW5nID0gZmFsc2U7XG4gICAgdGhpcy5faXNQYXVzZWQgPSBmYWxzZTtcbiAgICB0aGlzLl90aW1lb3V0SGFuZGxlciA9IG5vb3A7XG5cbiAgICBpZiAoZ290b0VuZCkge1xuICAgICAgc2hhbGxvd0NvcHkodGhpcy5fY3VycmVudFN0YXRlLCB0aGlzLl90YXJnZXRTdGF0ZSk7XG4gICAgICBhcHBseUZpbHRlcih0aGlzLCAnYWZ0ZXJUd2VlbkVuZCcpO1xuICAgICAgdGhpcy5fZmluaXNoLmNhbGwodGhpcywgdGhpcy5fY3VycmVudFN0YXRlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCBhIHR3ZWVuIGlzIHJ1bm5pbmcuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBUd2VlbmFibGUucHJvdG90eXBlLmlzUGxheWluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5faXNUd2VlbmluZyAmJiAhdGhpcy5faXNQYXVzZWQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHMgYSBjdXN0b20gc2NoZWR1bGUgZnVuY3Rpb24uXG4gICAqXG4gICAqIElmIGEgY3VzdG9tIGZ1bmN0aW9uIGlzIG5vdCBzZXQgdGhlIGRlZmF1bHQgb25lIGlzIHVzZWQgW2ByZXF1ZXN0QW5pbWF0aW9uRnJhbWVgXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSkgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgW2BzZXRUaW1lb3V0YF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dpbmRvdy5zZXRUaW1lb3V0KSkuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb24oRnVuY3Rpb24sbnVtYmVyKX0gc2NoZWR1bGVGdW5jdGlvbiBUaGUgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHRvIHNjaGVkdWxlIHRoZSBuZXh0IGZyYW1lIHRvIGJlIHJlbmRlcmVkXG4gICAqL1xuICBUd2VlbmFibGUucHJvdG90eXBlLnNldFNjaGVkdWxlRnVuY3Rpb24gPSBmdW5jdGlvbiAoc2NoZWR1bGVGdW5jdGlvbikge1xuICAgIHRoaXMuX3NjaGVkdWxlRnVuY3Rpb24gPSBzY2hlZHVsZUZ1bmN0aW9uO1xuICB9O1xuXG4gIC8qKlxuICAgKiBgZGVsZXRlYHMgYWxsIFwib3duXCIgcHJvcGVydGllcy4gIENhbGwgdGhpcyB3aGVuIHRoZSBgVHdlZW5hYmxlYCBpbnN0YW5jZSBpcyBubyBsb25nZXIgbmVlZGVkIHRvIGZyZWUgbWVtb3J5LlxuICAgKi9cbiAgVHdlZW5hYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBwcm9wO1xuICAgIGZvciAocHJvcCBpbiB0aGlzKSB7XG4gICAgICBpZiAodGhpcy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgICBkZWxldGUgdGhpc1twcm9wXTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyohXG4gICAqIEZpbHRlcnMgYXJlIHVzZWQgZm9yIHRyYW5zZm9ybWluZyB0aGUgcHJvcGVydGllcyBvZiBhIHR3ZWVuIGF0IHZhcmlvdXNcbiAgICogcG9pbnRzIGluIGEgVHdlZW5hYmxlJ3MgbGlmZSBjeWNsZS4gIFNlZSB0aGUgUkVBRE1FIGZvciBtb3JlIGluZm8gb24gdGhpcy5cbiAgICovXG4gIFR3ZWVuYWJsZS5wcm90b3R5cGUuZmlsdGVyID0ge307XG5cbiAgLyohXG4gICAqIFRoaXMgb2JqZWN0IGNvbnRhaW5zIGFsbCBvZiB0aGUgdHdlZW5zIGF2YWlsYWJsZSB0byBTaGlmdHkuICBJdCBpcyBleHRlbmRpYmxlIC0gc2ltcGx5IGF0dGFjaCBwcm9wZXJ0aWVzIHRvIHRoZSBUd2VlbmFibGUucHJvdG90eXBlLmZvcm11bGEgT2JqZWN0IGZvbGxvd2luZyB0aGUgc2FtZSBmb3JtYXQgYXQgbGluZWFyLlxuICAgKlxuICAgKiBgcG9zYCBzaG91bGQgYmUgYSBub3JtYWxpemVkIGBudW1iZXJgIChiZXR3ZWVuIDAgYW5kIDEpLlxuICAgKi9cbiAgVHdlZW5hYmxlLnByb3RvdHlwZS5mb3JtdWxhID0ge1xuICAgIGxpbmVhcjogZnVuY3Rpb24gKHBvcykge1xuICAgICAgcmV0dXJuIHBvcztcbiAgICB9XG4gIH07XG5cbiAgZm9ybXVsYSA9IFR3ZWVuYWJsZS5wcm90b3R5cGUuZm9ybXVsYTtcblxuICBzaGFsbG93Q29weShUd2VlbmFibGUsIHtcbiAgICAnbm93Jzogbm93XG4gICAgLCdlYWNoJzogZWFjaFxuICAgICwndHdlZW5Qcm9wcyc6IHR3ZWVuUHJvcHNcbiAgICAsJ3R3ZWVuUHJvcCc6IHR3ZWVuUHJvcFxuICAgICwnYXBwbHlGaWx0ZXInOiBhcHBseUZpbHRlclxuICAgICwnc2hhbGxvd0NvcHknOiBzaGFsbG93Q29weVxuICAgICwnZGVmYXVsdHMnOiBkZWZhdWx0c1xuICAgICwnY29tcG9zZUVhc2luZ09iamVjdCc6IGNvbXBvc2VFYXNpbmdPYmplY3RcbiAgfSk7XG5cbiAgLy8gYHJvb3RgIGlzIHByb3ZpZGVkIGluIHRoZSBpbnRyby9vdXRybyBmaWxlcy5cblxuICAvLyBBIGhvb2sgdXNlZCBmb3IgdW5pdCB0ZXN0aW5nLlxuICBpZiAodHlwZW9mIFNISUZUWV9ERUJVR19OT1cgPT09ICdmdW5jdGlvbicpIHtcbiAgICByb290LnRpbWVvdXRIYW5kbGVyID0gdGltZW91dEhhbmRsZXI7XG4gIH1cblxuICAvLyBCb290c3RyYXAgVHdlZW5hYmxlIGFwcHJvcHJpYXRlbHkgZm9yIHRoZSBlbnZpcm9ubWVudC5cbiAgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuICAgIC8vIENvbW1vbkpTXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBUd2VlbmFibGU7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgLy8gQU1EXG4gICAgZGVmaW5lKGZ1bmN0aW9uICgpIHtyZXR1cm4gVHdlZW5hYmxlO30pO1xuICB9IGVsc2UgaWYgKHR5cGVvZiByb290LlR3ZWVuYWJsZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyBCcm93c2VyOiBNYWtlIGBUd2VlbmFibGVgIGdsb2JhbGx5IGFjY2Vzc2libGUuXG4gICAgcm9vdC5Ud2VlbmFibGUgPSBUd2VlbmFibGU7XG4gIH1cblxuICByZXR1cm4gVHdlZW5hYmxlO1xuXG59ICgpKTtcblxuLyohXG4gKiBBbGwgZXF1YXRpb25zIGFyZSBhZGFwdGVkIGZyb20gVGhvbWFzIEZ1Y2hzJyBbU2NyaXB0eTJdKGh0dHBzOi8vZ2l0aHViLmNvbS9tYWRyb2JieS9zY3JpcHR5Mi9ibG9iL21hc3Rlci9zcmMvZWZmZWN0cy90cmFuc2l0aW9ucy9wZW5uZXIuanMpLlxuICpcbiAqIEJhc2VkIG9uIEVhc2luZyBFcXVhdGlvbnMgKGMpIDIwMDMgW1JvYmVydCBQZW5uZXJdKGh0dHA6Ly93d3cucm9iZXJ0cGVubmVyLmNvbS8pLCBhbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHdvcmsgaXMgW3N1YmplY3QgdG8gdGVybXNdKGh0dHA6Ly93d3cucm9iZXJ0cGVubmVyLmNvbS9lYXNpbmdfdGVybXNfb2ZfdXNlLmh0bWwpLlxuICovXG5cbi8qIVxuICogIFRFUk1TIE9GIFVTRSAtIEVBU0lORyBFUVVBVElPTlNcbiAqICBPcGVuIHNvdXJjZSB1bmRlciB0aGUgQlNEIExpY2Vuc2UuXG4gKiAgRWFzaW5nIEVxdWF0aW9ucyAoYykgMjAwMyBSb2JlcnQgUGVubmVyLCBhbGwgcmlnaHRzIHJlc2VydmVkLlxuICovXG5cbjsoZnVuY3Rpb24gKCkge1xuXG4gIFR3ZWVuYWJsZS5zaGFsbG93Q29weShUd2VlbmFibGUucHJvdG90eXBlLmZvcm11bGEsIHtcbiAgICBlYXNlSW5RdWFkOiBmdW5jdGlvbiAocG9zKSB7XG4gICAgICByZXR1cm4gTWF0aC5wb3cocG9zLCAyKTtcbiAgICB9LFxuXG4gICAgZWFzZU91dFF1YWQ6IGZ1bmN0aW9uIChwb3MpIHtcbiAgICAgIHJldHVybiAtKE1hdGgucG93KChwb3MgLSAxKSwgMikgLSAxKTtcbiAgICB9LFxuXG4gICAgZWFzZUluT3V0UXVhZDogZnVuY3Rpb24gKHBvcykge1xuICAgICAgaWYgKChwb3MgLz0gMC41KSA8IDEpIHtyZXR1cm4gMC41ICogTWF0aC5wb3cocG9zLDIpO31cbiAgICAgIHJldHVybiAtMC41ICogKChwb3MgLT0gMikgKiBwb3MgLSAyKTtcbiAgICB9LFxuXG4gICAgZWFzZUluQ3ViaWM6IGZ1bmN0aW9uIChwb3MpIHtcbiAgICAgIHJldHVybiBNYXRoLnBvdyhwb3MsIDMpO1xuICAgIH0sXG5cbiAgICBlYXNlT3V0Q3ViaWM6IGZ1bmN0aW9uIChwb3MpIHtcbiAgICAgIHJldHVybiAoTWF0aC5wb3coKHBvcyAtIDEpLCAzKSArIDEpO1xuICAgIH0sXG5cbiAgICBlYXNlSW5PdXRDdWJpYzogZnVuY3Rpb24gKHBvcykge1xuICAgICAgaWYgKChwb3MgLz0gMC41KSA8IDEpIHtyZXR1cm4gMC41ICogTWF0aC5wb3cocG9zLDMpO31cbiAgICAgIHJldHVybiAwLjUgKiAoTWF0aC5wb3coKHBvcyAtIDIpLDMpICsgMik7XG4gICAgfSxcblxuICAgIGVhc2VJblF1YXJ0OiBmdW5jdGlvbiAocG9zKSB7XG4gICAgICByZXR1cm4gTWF0aC5wb3cocG9zLCA0KTtcbiAgICB9LFxuXG4gICAgZWFzZU91dFF1YXJ0OiBmdW5jdGlvbiAocG9zKSB7XG4gICAgICByZXR1cm4gLShNYXRoLnBvdygocG9zIC0gMSksIDQpIC0gMSk7XG4gICAgfSxcblxuICAgIGVhc2VJbk91dFF1YXJ0OiBmdW5jdGlvbiAocG9zKSB7XG4gICAgICBpZiAoKHBvcyAvPSAwLjUpIDwgMSkge3JldHVybiAwLjUgKiBNYXRoLnBvdyhwb3MsNCk7fVxuICAgICAgcmV0dXJuIC0wLjUgKiAoKHBvcyAtPSAyKSAqIE1hdGgucG93KHBvcywzKSAtIDIpO1xuICAgIH0sXG5cbiAgICBlYXNlSW5RdWludDogZnVuY3Rpb24gKHBvcykge1xuICAgICAgcmV0dXJuIE1hdGgucG93KHBvcywgNSk7XG4gICAgfSxcblxuICAgIGVhc2VPdXRRdWludDogZnVuY3Rpb24gKHBvcykge1xuICAgICAgcmV0dXJuIChNYXRoLnBvdygocG9zIC0gMSksIDUpICsgMSk7XG4gICAgfSxcblxuICAgIGVhc2VJbk91dFF1aW50OiBmdW5jdGlvbiAocG9zKSB7XG4gICAgICBpZiAoKHBvcyAvPSAwLjUpIDwgMSkge3JldHVybiAwLjUgKiBNYXRoLnBvdyhwb3MsNSk7fVxuICAgICAgcmV0dXJuIDAuNSAqIChNYXRoLnBvdygocG9zIC0gMiksNSkgKyAyKTtcbiAgICB9LFxuXG4gICAgZWFzZUluU2luZTogZnVuY3Rpb24gKHBvcykge1xuICAgICAgcmV0dXJuIC1NYXRoLmNvcyhwb3MgKiAoTWF0aC5QSSAvIDIpKSArIDE7XG4gICAgfSxcblxuICAgIGVhc2VPdXRTaW5lOiBmdW5jdGlvbiAocG9zKSB7XG4gICAgICByZXR1cm4gTWF0aC5zaW4ocG9zICogKE1hdGguUEkgLyAyKSk7XG4gICAgfSxcblxuICAgIGVhc2VJbk91dFNpbmU6IGZ1bmN0aW9uIChwb3MpIHtcbiAgICAgIHJldHVybiAoLTAuNSAqIChNYXRoLmNvcyhNYXRoLlBJICogcG9zKSAtIDEpKTtcbiAgICB9LFxuXG4gICAgZWFzZUluRXhwbzogZnVuY3Rpb24gKHBvcykge1xuICAgICAgcmV0dXJuIChwb3MgPT09IDApID8gMCA6IE1hdGgucG93KDIsIDEwICogKHBvcyAtIDEpKTtcbiAgICB9LFxuXG4gICAgZWFzZU91dEV4cG86IGZ1bmN0aW9uIChwb3MpIHtcbiAgICAgIHJldHVybiAocG9zID09PSAxKSA/IDEgOiAtTWF0aC5wb3coMiwgLTEwICogcG9zKSArIDE7XG4gICAgfSxcblxuICAgIGVhc2VJbk91dEV4cG86IGZ1bmN0aW9uIChwb3MpIHtcbiAgICAgIGlmIChwb3MgPT09IDApIHtyZXR1cm4gMDt9XG4gICAgICBpZiAocG9zID09PSAxKSB7cmV0dXJuIDE7fVxuICAgICAgaWYgKChwb3MgLz0gMC41KSA8IDEpIHtyZXR1cm4gMC41ICogTWF0aC5wb3coMiwxMCAqIChwb3MgLSAxKSk7fVxuICAgICAgcmV0dXJuIDAuNSAqICgtTWF0aC5wb3coMiwgLTEwICogLS1wb3MpICsgMik7XG4gICAgfSxcblxuICAgIGVhc2VJbkNpcmM6IGZ1bmN0aW9uIChwb3MpIHtcbiAgICAgIHJldHVybiAtKE1hdGguc3FydCgxIC0gKHBvcyAqIHBvcykpIC0gMSk7XG4gICAgfSxcblxuICAgIGVhc2VPdXRDaXJjOiBmdW5jdGlvbiAocG9zKSB7XG4gICAgICByZXR1cm4gTWF0aC5zcXJ0KDEgLSBNYXRoLnBvdygocG9zIC0gMSksIDIpKTtcbiAgICB9LFxuXG4gICAgZWFzZUluT3V0Q2lyYzogZnVuY3Rpb24gKHBvcykge1xuICAgICAgaWYgKChwb3MgLz0gMC41KSA8IDEpIHtyZXR1cm4gLTAuNSAqIChNYXRoLnNxcnQoMSAtIHBvcyAqIHBvcykgLSAxKTt9XG4gICAgICByZXR1cm4gMC41ICogKE1hdGguc3FydCgxIC0gKHBvcyAtPSAyKSAqIHBvcykgKyAxKTtcbiAgICB9LFxuXG4gICAgZWFzZU91dEJvdW5jZTogZnVuY3Rpb24gKHBvcykge1xuICAgICAgaWYgKChwb3MpIDwgKDEgLyAyLjc1KSkge1xuICAgICAgICByZXR1cm4gKDcuNTYyNSAqIHBvcyAqIHBvcyk7XG4gICAgICB9IGVsc2UgaWYgKHBvcyA8ICgyIC8gMi43NSkpIHtcbiAgICAgICAgcmV0dXJuICg3LjU2MjUgKiAocG9zIC09ICgxLjUgLyAyLjc1KSkgKiBwb3MgKyAwLjc1KTtcbiAgICAgIH0gZWxzZSBpZiAocG9zIDwgKDIuNSAvIDIuNzUpKSB7XG4gICAgICAgIHJldHVybiAoNy41NjI1ICogKHBvcyAtPSAoMi4yNSAvIDIuNzUpKSAqIHBvcyArIDAuOTM3NSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gKDcuNTYyNSAqIChwb3MgLT0gKDIuNjI1IC8gMi43NSkpICogcG9zICsgMC45ODQzNzUpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBlYXNlSW5CYWNrOiBmdW5jdGlvbiAocG9zKSB7XG4gICAgICB2YXIgcyA9IDEuNzAxNTg7XG4gICAgICByZXR1cm4gKHBvcykgKiBwb3MgKiAoKHMgKyAxKSAqIHBvcyAtIHMpO1xuICAgIH0sXG5cbiAgICBlYXNlT3V0QmFjazogZnVuY3Rpb24gKHBvcykge1xuICAgICAgdmFyIHMgPSAxLjcwMTU4O1xuICAgICAgcmV0dXJuIChwb3MgPSBwb3MgLSAxKSAqIHBvcyAqICgocyArIDEpICogcG9zICsgcykgKyAxO1xuICAgIH0sXG5cbiAgICBlYXNlSW5PdXRCYWNrOiBmdW5jdGlvbiAocG9zKSB7XG4gICAgICB2YXIgcyA9IDEuNzAxNTg7XG4gICAgICBpZiAoKHBvcyAvPSAwLjUpIDwgMSkge3JldHVybiAwLjUgKiAocG9zICogcG9zICogKCgocyAqPSAoMS41MjUpKSArIDEpICogcG9zIC0gcykpO31cbiAgICAgIHJldHVybiAwLjUgKiAoKHBvcyAtPSAyKSAqIHBvcyAqICgoKHMgKj0gKDEuNTI1KSkgKyAxKSAqIHBvcyArIHMpICsgMik7XG4gICAgfSxcblxuICAgIGVsYXN0aWM6IGZ1bmN0aW9uIChwb3MpIHtcbiAgICAgIHJldHVybiAtMSAqIE1hdGgucG93KDQsLTggKiBwb3MpICogTWF0aC5zaW4oKHBvcyAqIDYgLSAxKSAqICgyICogTWF0aC5QSSkgLyAyKSArIDE7XG4gICAgfSxcblxuICAgIHN3aW5nRnJvbVRvOiBmdW5jdGlvbiAocG9zKSB7XG4gICAgICB2YXIgcyA9IDEuNzAxNTg7XG4gICAgICByZXR1cm4gKChwb3MgLz0gMC41KSA8IDEpID8gMC41ICogKHBvcyAqIHBvcyAqICgoKHMgKj0gKDEuNTI1KSkgKyAxKSAqIHBvcyAtIHMpKSA6XG4gICAgICAgICAgMC41ICogKChwb3MgLT0gMikgKiBwb3MgKiAoKChzICo9ICgxLjUyNSkpICsgMSkgKiBwb3MgKyBzKSArIDIpO1xuICAgIH0sXG5cbiAgICBzd2luZ0Zyb206IGZ1bmN0aW9uIChwb3MpIHtcbiAgICAgIHZhciBzID0gMS43MDE1ODtcbiAgICAgIHJldHVybiBwb3MgKiBwb3MgKiAoKHMgKyAxKSAqIHBvcyAtIHMpO1xuICAgIH0sXG5cbiAgICBzd2luZ1RvOiBmdW5jdGlvbiAocG9zKSB7XG4gICAgICB2YXIgcyA9IDEuNzAxNTg7XG4gICAgICByZXR1cm4gKHBvcyAtPSAxKSAqIHBvcyAqICgocyArIDEpICogcG9zICsgcykgKyAxO1xuICAgIH0sXG5cbiAgICBib3VuY2U6IGZ1bmN0aW9uIChwb3MpIHtcbiAgICAgIGlmIChwb3MgPCAoMSAvIDIuNzUpKSB7XG4gICAgICAgIHJldHVybiAoNy41NjI1ICogcG9zICogcG9zKTtcbiAgICAgIH0gZWxzZSBpZiAocG9zIDwgKDIgLyAyLjc1KSkge1xuICAgICAgICByZXR1cm4gKDcuNTYyNSAqIChwb3MgLT0gKDEuNSAvIDIuNzUpKSAqIHBvcyArIDAuNzUpO1xuICAgICAgfSBlbHNlIGlmIChwb3MgPCAoMi41IC8gMi43NSkpIHtcbiAgICAgICAgcmV0dXJuICg3LjU2MjUgKiAocG9zIC09ICgyLjI1IC8gMi43NSkpICogcG9zICsgMC45Mzc1KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAoNy41NjI1ICogKHBvcyAtPSAoMi42MjUgLyAyLjc1KSkgKiBwb3MgKyAwLjk4NDM3NSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGJvdW5jZVBhc3Q6IGZ1bmN0aW9uIChwb3MpIHtcbiAgICAgIGlmIChwb3MgPCAoMSAvIDIuNzUpKSB7XG4gICAgICAgIHJldHVybiAoNy41NjI1ICogcG9zICogcG9zKTtcbiAgICAgIH0gZWxzZSBpZiAocG9zIDwgKDIgLyAyLjc1KSkge1xuICAgICAgICByZXR1cm4gMiAtICg3LjU2MjUgKiAocG9zIC09ICgxLjUgLyAyLjc1KSkgKiBwb3MgKyAwLjc1KTtcbiAgICAgIH0gZWxzZSBpZiAocG9zIDwgKDIuNSAvIDIuNzUpKSB7XG4gICAgICAgIHJldHVybiAyIC0gKDcuNTYyNSAqIChwb3MgLT0gKDIuMjUgLyAyLjc1KSkgKiBwb3MgKyAwLjkzNzUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIDIgLSAoNy41NjI1ICogKHBvcyAtPSAoMi42MjUgLyAyLjc1KSkgKiBwb3MgKyAwLjk4NDM3NSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGVhc2VGcm9tVG86IGZ1bmN0aW9uIChwb3MpIHtcbiAgICAgIGlmICgocG9zIC89IDAuNSkgPCAxKSB7cmV0dXJuIDAuNSAqIE1hdGgucG93KHBvcyw0KTt9XG4gICAgICByZXR1cm4gLTAuNSAqICgocG9zIC09IDIpICogTWF0aC5wb3cocG9zLDMpIC0gMik7XG4gICAgfSxcblxuICAgIGVhc2VGcm9tOiBmdW5jdGlvbiAocG9zKSB7XG4gICAgICByZXR1cm4gTWF0aC5wb3cocG9zLDQpO1xuICAgIH0sXG5cbiAgICBlYXNlVG86IGZ1bmN0aW9uIChwb3MpIHtcbiAgICAgIHJldHVybiBNYXRoLnBvdyhwb3MsMC4yNSk7XG4gICAgfVxuICB9KTtcblxufSgpKTtcblxuLyohXG4gKiBUaGUgQmV6aWVyIG1hZ2ljIGluIHRoaXMgZmlsZSBpcyBhZGFwdGVkL2NvcGllZCBhbG1vc3Qgd2hvbGVzYWxlIGZyb21cbiAqIFtTY3JpcHR5Ml0oaHR0cHM6Ly9naXRodWIuY29tL21hZHJvYmJ5L3NjcmlwdHkyL2Jsb2IvbWFzdGVyL3NyYy9lZmZlY3RzL3RyYW5zaXRpb25zL2N1YmljLWJlemllci5qcyksXG4gKiB3aGljaCB3YXMgYWRhcHRlZCBmcm9tIEFwcGxlIGNvZGUgKHdoaWNoIHByb2JhYmx5IGNhbWUgZnJvbVxuICogW2hlcmVdKGh0dHA6Ly9vcGVuc291cmNlLmFwcGxlLmNvbS9zb3VyY2UvV2ViQ29yZS9XZWJDb3JlLTk1NS42Ni9wbGF0Zm9ybS9ncmFwaGljcy9Vbml0QmV6aWVyLmgpKS5cbiAqIFNwZWNpYWwgdGhhbmtzIHRvIEFwcGxlIGFuZCBUaG9tYXMgRnVjaHMgZm9yIG11Y2ggb2YgdGhpcyBjb2RlLlxuICovXG5cbi8qIVxuICogIENvcHlyaWdodCAoYykgMjAwNiBBcHBsZSBDb21wdXRlciwgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqICBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbiAqICBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIG1ldDpcbiAqXG4gKiAgMS4gUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuICogIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4gKlxuICogIDIuIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSxcbiAqICB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZSBkb2N1bWVudGF0aW9uXG4gKiAgYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uXG4gKlxuICogIDMuIE5laXRoZXIgdGhlIG5hbWUgb2YgdGhlIGNvcHlyaWdodCBob2xkZXIocykgbm9yIHRoZSBuYW1lcyBvZiBhbnlcbiAqICBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbVxuICogIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG4gKlxuICogIFRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlNcbiAqICBcIkFTIElTXCIgQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sXG4gKiAgVEhFIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFXG4gKiAgQVJFIERJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgT1dORVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRVxuICogIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVNcbiAqICAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7XG4gKiAgTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OXG4gKiAgQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlRcbiAqICAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJU1xuICogIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuICovXG47KGZ1bmN0aW9uICgpIHtcbiAgLy8gcG9ydCBvZiB3ZWJraXQgY3ViaWMgYmV6aWVyIGhhbmRsaW5nIGJ5IGh0dHA6Ly93d3cubmV0emdlc3RhLmRlL2Rldi9cbiAgZnVuY3Rpb24gY3ViaWNCZXppZXJBdFRpbWUodCxwMXgscDF5LHAyeCxwMnksZHVyYXRpb24pIHtcbiAgICB2YXIgYXggPSAwLGJ4ID0gMCxjeCA9IDAsYXkgPSAwLGJ5ID0gMCxjeSA9IDA7XG4gICAgZnVuY3Rpb24gc2FtcGxlQ3VydmVYKHQpIHtyZXR1cm4gKChheCAqIHQgKyBieCkgKiB0ICsgY3gpICogdDt9XG4gICAgZnVuY3Rpb24gc2FtcGxlQ3VydmVZKHQpIHtyZXR1cm4gKChheSAqIHQgKyBieSkgKiB0ICsgY3kpICogdDt9XG4gICAgZnVuY3Rpb24gc2FtcGxlQ3VydmVEZXJpdmF0aXZlWCh0KSB7cmV0dXJuICgzLjAgKiBheCAqIHQgKyAyLjAgKiBieCkgKiB0ICsgY3g7fVxuICAgIGZ1bmN0aW9uIHNvbHZlRXBzaWxvbihkdXJhdGlvbikge3JldHVybiAxLjAgLyAoMjAwLjAgKiBkdXJhdGlvbik7fVxuICAgIGZ1bmN0aW9uIHNvbHZlKHgsZXBzaWxvbikge3JldHVybiBzYW1wbGVDdXJ2ZVkoc29sdmVDdXJ2ZVgoeCxlcHNpbG9uKSk7fVxuICAgIGZ1bmN0aW9uIGZhYnMobikge2lmIChuID49IDApIHtyZXR1cm4gbjt9ZWxzZSB7cmV0dXJuIDAgLSBuO319XG4gICAgZnVuY3Rpb24gc29sdmVDdXJ2ZVgoeCxlcHNpbG9uKSB7XG4gICAgICB2YXIgdDAsdDEsdDIseDIsZDIsaTtcbiAgICAgIGZvciAodDIgPSB4LCBpID0gMDsgaSA8IDg7IGkrKykge3gyID0gc2FtcGxlQ3VydmVYKHQyKSAtIHg7IGlmIChmYWJzKHgyKSA8IGVwc2lsb24pIHtyZXR1cm4gdDI7fSBkMiA9IHNhbXBsZUN1cnZlRGVyaXZhdGl2ZVgodDIpOyBpZiAoZmFicyhkMikgPCAxZS02KSB7YnJlYWs7fSB0MiA9IHQyIC0geDIgLyBkMjt9XG4gICAgICB0MCA9IDAuMDsgdDEgPSAxLjA7IHQyID0geDsgaWYgKHQyIDwgdDApIHtyZXR1cm4gdDA7fSBpZiAodDIgPiB0MSkge3JldHVybiB0MTt9XG4gICAgICB3aGlsZSAodDAgPCB0MSkge3gyID0gc2FtcGxlQ3VydmVYKHQyKTsgaWYgKGZhYnMoeDIgLSB4KSA8IGVwc2lsb24pIHtyZXR1cm4gdDI7fSBpZiAoeCA+IHgyKSB7dDAgPSB0Mjt9ZWxzZSB7dDEgPSB0Mjt9IHQyID0gKHQxIC0gdDApICogMC41ICsgdDA7fVxuICAgICAgcmV0dXJuIHQyOyAvLyBGYWlsdXJlLlxuICAgIH1cbiAgICBjeCA9IDMuMCAqIHAxeDsgYnggPSAzLjAgKiAocDJ4IC0gcDF4KSAtIGN4OyBheCA9IDEuMCAtIGN4IC0gYng7IGN5ID0gMy4wICogcDF5OyBieSA9IDMuMCAqIChwMnkgLSBwMXkpIC0gY3k7IGF5ID0gMS4wIC0gY3kgLSBieTtcbiAgICByZXR1cm4gc29sdmUodCwgc29sdmVFcHNpbG9uKGR1cmF0aW9uKSk7XG4gIH1cbiAgLyohXG4gICAqICBnZXRDdWJpY0JlemllclRyYW5zaXRpb24oeDEsIHkxLCB4MiwgeTIpIC0+IEZ1bmN0aW9uXG4gICAqXG4gICAqICBHZW5lcmF0ZXMgYSB0cmFuc2l0aW9uIGVhc2luZyBmdW5jdGlvbiB0aGF0IGlzIGNvbXBhdGlibGVcbiAgICogIHdpdGggV2ViS2l0J3MgQ1NTIHRyYW5zaXRpb25zIGAtd2Via2l0LXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uYFxuICAgKiAgQ1NTIHByb3BlcnR5LlxuICAgKlxuICAgKiAgVGhlIFczQyBoYXMgbW9yZSBpbmZvcm1hdGlvbiBhYm91dFxuICAgKiAgPGEgaHJlZj1cImh0dHA6Ly93d3cudzMub3JnL1RSL2NzczMtdHJhbnNpdGlvbnMvI3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uX3RhZ1wiPlxuICAgKiAgQ1NTMyB0cmFuc2l0aW9uIHRpbWluZyBmdW5jdGlvbnM8L2E+LlxuICAgKlxuICAgKiAgQHBhcmFtIHtudW1iZXJ9IHgxXG4gICAqICBAcGFyYW0ge251bWJlcn0geTFcbiAgICogIEBwYXJhbSB7bnVtYmVyfSB4MlxuICAgKiAgQHBhcmFtIHtudW1iZXJ9IHkyXG4gICAqICBAcmV0dXJuIHtmdW5jdGlvbn1cbiAgICovXG4gIGZ1bmN0aW9uIGdldEN1YmljQmV6aWVyVHJhbnNpdGlvbiAoeDEsIHkxLCB4MiwgeTIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHBvcykge1xuICAgICAgcmV0dXJuIGN1YmljQmV6aWVyQXRUaW1lKHBvcyx4MSx5MSx4Mix5MiwxKTtcbiAgICB9O1xuICB9XG4gIC8vIEVuZCBwb3J0ZWQgY29kZVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgQmV6aWVyIGVhc2luZyBmdW5jdGlvbiBhbmQgYXR0YWNoZXMgaXQgdG8gYFR3ZWVuYWJsZS5wcm90b3R5cGUuZm9ybXVsYWAuICBUaGlzIGZ1bmN0aW9uIGdpdmVzIHlvdSB0b3RhbCBjb250cm9sIG92ZXIgdGhlIGVhc2luZyBjdXJ2ZS4gIE1hdHRoZXcgTGVpbidzIFtDZWFzZXJdKGh0dHA6Ly9tYXR0aGV3bGVpbi5jb20vY2Vhc2VyLykgaXMgYSB1c2VmdWwgdG9vbCBmb3IgdmlzdWFsaXppbmcgdGhlIGN1cnZlcyB5b3UgY2FuIG1ha2Ugd2l0aCB0aGlzIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgZWFzaW5nIGN1cnZlLiAgT3ZlcndyaXRlcyB0aGUgb2xkIGVhc2luZyBmdW5jdGlvbiBvbiBUd2VlbmFibGUucHJvdG90eXBlLmZvcm11bGEgaWYgaXQgZXhpc3RzLlxuICAgKiBAcGFyYW0ge251bWJlcn0geDFcbiAgICogQHBhcmFtIHtudW1iZXJ9IHkxXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4MlxuICAgKiBAcGFyYW0ge251bWJlcn0geTJcbiAgICogQHJldHVybiB7ZnVuY3Rpb259IFRoZSBlYXNpbmcgZnVuY3Rpb24gdGhhdCB3YXMgYXR0YWNoZWQgdG8gVHdlZW5hYmxlLnByb3RvdHlwZS5mb3JtdWxhLlxuICAgKi9cbiAgVHdlZW5hYmxlLnNldEJlemllckZ1bmN0aW9uID0gZnVuY3Rpb24gKG5hbWUsIHgxLCB5MSwgeDIsIHkyKSB7XG4gICAgdmFyIGN1YmljQmV6aWVyVHJhbnNpdGlvbiA9IGdldEN1YmljQmV6aWVyVHJhbnNpdGlvbih4MSwgeTEsIHgyLCB5Mik7XG4gICAgY3ViaWNCZXppZXJUcmFuc2l0aW9uLngxID0geDE7XG4gICAgY3ViaWNCZXppZXJUcmFuc2l0aW9uLnkxID0geTE7XG4gICAgY3ViaWNCZXppZXJUcmFuc2l0aW9uLngyID0geDI7XG4gICAgY3ViaWNCZXppZXJUcmFuc2l0aW9uLnkyID0geTI7XG5cbiAgICByZXR1cm4gVHdlZW5hYmxlLnByb3RvdHlwZS5mb3JtdWxhW25hbWVdID0gY3ViaWNCZXppZXJUcmFuc2l0aW9uO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIGBkZWxldGVgcyBhbiBlYXNpbmcgZnVuY3Rpb24gZnJvbSBgVHdlZW5hYmxlLnByb3RvdHlwZS5mb3JtdWxhYC4gIEJlIGNhcmVmdWwgd2l0aCB0aGlzIG1ldGhvZCwgYXMgaXQgYGRlbGV0ZWBzIHdoYXRldmVyIGVhc2luZyBmb3JtdWxhIG1hdGNoZXMgYG5hbWVgICh3aGljaCBtZWFucyB5b3UgY2FuIGRlbGV0ZSBkZWZhdWx0IFNoaWZ0eSBlYXNpbmcgZnVuY3Rpb25zKS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGVhc2luZyBmdW5jdGlvbiB0byBkZWxldGUuXG4gICAqIEByZXR1cm4ge2Z1bmN0aW9ufVxuICAgKi9cbiAgVHdlZW5hYmxlLnVuc2V0QmV6aWVyRnVuY3Rpb24gPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIGRlbGV0ZSBUd2VlbmFibGUucHJvdG90eXBlLmZvcm11bGFbbmFtZV07XG4gIH07XG5cbn0pKCk7XG5cbjsoZnVuY3Rpb24gKCkge1xuXG4gIGZ1bmN0aW9uIGdldEludGVycG9sYXRlZFZhbHVlcyAoXG4gICAgZnJvbSwgY3VycmVudCwgdGFyZ2V0U3RhdGUsIHBvc2l0aW9uLCBlYXNpbmcpIHtcbiAgICByZXR1cm4gVHdlZW5hYmxlLnR3ZWVuUHJvcHMoXG4gICAgICBwb3NpdGlvbiwgY3VycmVudCwgZnJvbSwgdGFyZ2V0U3RhdGUsIDEsIDAsIGVhc2luZyk7XG4gIH1cblxuICAvLyBGYWtlIGEgVHdlZW5hYmxlIGFuZCBwYXRjaCBzb21lIGludGVybmFscy4gIFRoaXMgYXBwcm9hY2ggYWxsb3dzIHVzIHRvXG4gIC8vIHNraXAgdW5lY2Nlc3NhcnkgcHJvY2Vzc2luZyBhbmQgb2JqZWN0IHJlY3JlYXRpb24sIGN1dHRpbmcgZG93biBvbiBnYXJiYWdlXG4gIC8vIGNvbGxlY3Rpb24gcGF1c2VzLlxuICB2YXIgbW9ja1R3ZWVuYWJsZSA9IG5ldyBUd2VlbmFibGUoKTtcbiAgbW9ja1R3ZWVuYWJsZS5fZmlsdGVyQXJncyA9IFtdO1xuXG4gIC8qKlxuICAgKiBDb21wdXRlIHRoZSBtaWRwb2ludCBvZiB0d28gT2JqZWN0cy4gIFRoaXMgbWV0aG9kIGVmZmVjdGl2ZWx5IGNhbGN1bGF0ZXMgYSBzcGVjaWZpYyBmcmFtZSBvZiBhbmltYXRpb24gdGhhdCBbVHdlZW5hYmxlI3R3ZWVuXShzaGlmdHkuY29yZS5qcy5odG1sI3R3ZWVuKSBkb2VzIG1hbnkgdGltZXMgb3ZlciB0aGUgY291cnNlIG9mIGEgdHdlZW4uXG4gICAqXG4gICAqIEV4YW1wbGU6XG4gICAqXG4gICAqIGBgYFxuICAgKiAgdmFyIGludGVycG9sYXRlZFZhbHVlcyA9IFR3ZWVuYWJsZS5pbnRlcnBvbGF0ZSh7XG4gICAqICAgIHdpZHRoOiAnMTAwcHgnLFxuICAgKiAgICBvcGFjaXR5OiAwLFxuICAgKiAgICBjb2xvcjogJyNmZmYnXG4gICAqICB9LCB7XG4gICAqICAgIHdpZHRoOiAnMjAwcHgnLFxuICAgKiAgICBvcGFjaXR5OiAxLFxuICAgKiAgICBjb2xvcjogJyMwMDAnXG4gICAqICB9LCAwLjUpO1xuICAgKlxuICAgKiAgY29uc29sZS5sb2coaW50ZXJwb2xhdGVkVmFsdWVzKTtcbiAgICogIC8vIHtvcGFjaXR5OiAwLjUsIHdpZHRoOiBcIjE1MHB4XCIsIGNvbG9yOiBcInJnYigxMjcsMTI3LDEyNylcIn1cbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBmcm9tIFRoZSBzdGFydGluZyB2YWx1ZXMgdG8gdHdlZW4gZnJvbS5cbiAgICogQHBhcmFtIHtPYmplY3R9IHRhcmdldFN0YXRlIFRoZSBlbmRpbmcgdmFsdWVzIHRvIHR3ZWVuIHRvLlxuICAgKiBAcGFyYW0ge251bWJlcn0gcG9zaXRpb24gVGhlIG5vcm1hbGl6ZWQgcG9zaXRpb24gdmFsdWUgKGJldHdlZW4gMC4wIGFuZCAxLjApIHRvIGludGVycG9sYXRlIHRoZSB2YWx1ZXMgYmV0d2VlbiBgZnJvbWAgYW5kIGB0b2AgZm9yLiAgYGZyb21gIHJlcHJlc2VudHMgMCBhbmQgYHRvYCByZXByZXNlbnRzIGAxYC5cbiAgICogQHBhcmFtIHtzdHJpbmd8T2JqZWN0fSBlYXNpbmcgVGhlIGVhc2luZyBjdXJ2ZShzKSB0byBjYWxjdWxhdGUgdGhlIG1pZHBvaW50IGFnYWluc3QuICBZb3UgY2FuIHJlZmVyZW5jZSBhbnkgZWFzaW5nIGZ1bmN0aW9uIGF0dGFjaGVkIHRvIGBUd2VlbmFibGUucHJvdG90eXBlLmZvcm11bGFgLiAgSWYgb21pdHRlZCwgdGhpcyBkZWZhdWx0cyB0byBcImxpbmVhclwiLlxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICBUd2VlbmFibGUuaW50ZXJwb2xhdGUgPSBmdW5jdGlvbiAoZnJvbSwgdGFyZ2V0U3RhdGUsIHBvc2l0aW9uLCBlYXNpbmcpIHtcbiAgICB2YXIgY3VycmVudCA9IFR3ZWVuYWJsZS5zaGFsbG93Q29weSh7fSwgZnJvbSk7XG4gICAgdmFyIGVhc2luZ09iamVjdCA9IFR3ZWVuYWJsZS5jb21wb3NlRWFzaW5nT2JqZWN0KFxuICAgICAgZnJvbSwgZWFzaW5nIHx8ICdsaW5lYXInKTtcblxuICAgIG1vY2tUd2VlbmFibGUuc2V0KHt9KTtcblxuICAgIC8vIEFsaWFzIGFuZCByZXVzZSB0aGUgX2ZpbHRlckFyZ3MgYXJyYXkgaW5zdGVhZCBvZiByZWNyZWF0aW5nIGl0LlxuICAgIHZhciBmaWx0ZXJBcmdzID0gbW9ja1R3ZWVuYWJsZS5fZmlsdGVyQXJncztcbiAgICBmaWx0ZXJBcmdzLmxlbmd0aCA9IDA7XG4gICAgZmlsdGVyQXJnc1swXSA9IGN1cnJlbnQ7XG4gICAgZmlsdGVyQXJnc1sxXSA9IGZyb207XG4gICAgZmlsdGVyQXJnc1syXSA9IHRhcmdldFN0YXRlO1xuICAgIGZpbHRlckFyZ3NbM10gPSBlYXNpbmdPYmplY3Q7XG5cbiAgICAvLyBBbnkgZGVmaW5lZCB2YWx1ZSB0cmFuc2Zvcm1hdGlvbiBtdXN0IGJlIGFwcGxpZWRcbiAgICBUd2VlbmFibGUuYXBwbHlGaWx0ZXIobW9ja1R3ZWVuYWJsZSwgJ3R3ZWVuQ3JlYXRlZCcpO1xuICAgIFR3ZWVuYWJsZS5hcHBseUZpbHRlcihtb2NrVHdlZW5hYmxlLCAnYmVmb3JlVHdlZW4nKTtcblxuICAgIHZhciBpbnRlcnBvbGF0ZWRWYWx1ZXMgPSBnZXRJbnRlcnBvbGF0ZWRWYWx1ZXMoXG4gICAgICBmcm9tLCBjdXJyZW50LCB0YXJnZXRTdGF0ZSwgcG9zaXRpb24sIGVhc2luZ09iamVjdCk7XG5cbiAgICAvLyBUcmFuc2Zvcm0gdmFsdWVzIGJhY2sgaW50byB0aGVpciBvcmlnaW5hbCBmb3JtYXRcbiAgICBUd2VlbmFibGUuYXBwbHlGaWx0ZXIobW9ja1R3ZWVuYWJsZSwgJ2FmdGVyVHdlZW4nKTtcblxuICAgIHJldHVybiBpbnRlcnBvbGF0ZWRWYWx1ZXM7XG4gIH07XG5cbn0oKSk7XG5cbi8qKlxuICogQWRkcyBzdHJpbmcgaW50ZXJwb2xhdGlvbiBzdXBwb3J0IHRvIFNoaWZ0eS5cbiAqXG4gKiBUaGUgVG9rZW4gZXh0ZW5zaW9uIGFsbG93cyBTaGlmdHkgdG8gdHdlZW4gbnVtYmVycyBpbnNpZGUgb2Ygc3RyaW5ncy4gIEFtb25nIG90aGVyIHRoaW5ncywgdGhpcyBhbGxvd3MgeW91IHRvIGFuaW1hdGUgQ1NTIHByb3BlcnRpZXMuICBGb3IgZXhhbXBsZSwgeW91IGNhbiBkbyB0aGlzOlxuICpcbiAqIGBgYFxuICogdmFyIHR3ZWVuYWJsZSA9IG5ldyBUd2VlbmFibGUoKTtcbiAqIHR3ZWVuYWJsZS50d2Vlbih7XG4gKiAgIGZyb206IHsgdHJhbnNmb3JtOiAndHJhbnNsYXRlWCg0NXB4KSd9LFxuICogICB0bzogeyB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKDkweHApJ31cbiAqIH0pO1xuICogYGBgXG4gKlxuICogYHRyYW5zbGF0ZVgoNDUpYCB3aWxsIGJlIHR3ZWVuZWQgdG8gYHRyYW5zbGF0ZVgoOTApYC4gIFRvIGRlbW9uc3RyYXRlOlxuICpcbiAqIGBgYFxuICogdmFyIHR3ZWVuYWJsZSA9IG5ldyBUd2VlbmFibGUoKTtcbiAqIHR3ZWVuYWJsZS50d2Vlbih7XG4gKiAgIGZyb206IHsgdHJhbnNmb3JtOiAndHJhbnNsYXRlWCg0NXB4KSd9LFxuICogICB0bzogeyB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKDkwcHgpJ30sXG4gKiAgIHN0ZXA6IGZ1bmN0aW9uIChzdGF0ZSkge1xuICogICAgIGNvbnNvbGUubG9nKHN0YXRlLnRyYW5zZm9ybSk7XG4gKiAgIH1cbiAqIH0pO1xuICogYGBgXG4gKlxuICogVGhlIGFib3ZlIHNuaXBwZXQgd2lsbCBsb2cgc29tZXRoaW5nIGxpa2UgdGhpcyBpbiB0aGUgY29uc29sZTpcbiAqXG4gKiBgYGBcbiAqIHRyYW5zbGF0ZVgoNjAuM3B4KVxuICogLi4uXG4gKiB0cmFuc2xhdGVYKDc2LjA1cHgpXG4gKiAuLi5cbiAqIHRyYW5zbGF0ZVgoOTBweClcbiAqIGBgYFxuICpcbiAqIEFub3RoZXIgdXNlIGZvciB0aGlzIGlzIGFuaW1hdGluZyBjb2xvcnM6XG4gKlxuICogYGBgXG4gKiB2YXIgdHdlZW5hYmxlID0gbmV3IFR3ZWVuYWJsZSgpO1xuICogdHdlZW5hYmxlLnR3ZWVuKHtcbiAqICAgZnJvbTogeyBjb2xvcjogJ3JnYigwLDI1NSwwKSd9LFxuICogICB0bzogeyBjb2xvcjogJ3JnYigyNTUsMCwyNTUpJ30sXG4gKiAgIHN0ZXA6IGZ1bmN0aW9uIChzdGF0ZSkge1xuICogICAgIGNvbnNvbGUubG9nKHN0YXRlLmNvbG9yKTtcbiAqICAgfVxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBUaGUgYWJvdmUgc25pcHBldCB3aWxsIGxvZyBzb21ldGhpbmcgbGlrZSB0aGlzOlxuICpcbiAqIGBgYFxuICogcmdiKDg0LDE3MCw4NClcbiAqIC4uLlxuICogcmdiKDE3MCw4NCwxNzApXG4gKiAuLi5cbiAqIHJnYigyNTUsMCwyNTUpXG4gKiBgYGBcbiAqXG4gKiBUaGlzIGV4dGVuc2lvbiBhbHNvIHN1cHBvcnRzIGhleGFkZWNpbWFsIGNvbG9ycywgaW4gYm90aCBsb25nIChgI2ZmMDBmZmApIGFuZCBzaG9ydCAoYCNmMGZgKSBmb3Jtcy4gIEJlIGF3YXJlIHRoYXQgaGV4YWRlY2ltYWwgaW5wdXQgdmFsdWVzIHdpbGwgYmUgY29udmVydGVkIGludG8gdGhlIGVxdWl2YWxlbnQgUkdCIG91dHB1dCB2YWx1ZXMuICBUaGlzIGlzIGRvbmUgdG8gb3B0aW1pemUgZm9yIHBlcmZvcm1hbmNlLlxuICpcbiAqIGBgYFxuICogdmFyIHR3ZWVuYWJsZSA9IG5ldyBUd2VlbmFibGUoKTtcbiAqIHR3ZWVuYWJsZS50d2Vlbih7XG4gKiAgIGZyb206IHsgY29sb3I6ICcjMGYwJ30sXG4gKiAgIHRvOiB7IGNvbG9yOiAnI2YwZid9LFxuICogICBzdGVwOiBmdW5jdGlvbiAoc3RhdGUpIHtcbiAqICAgICBjb25zb2xlLmxvZyhzdGF0ZS5jb2xvcik7XG4gKiAgIH1cbiAqIH0pO1xuICogYGBgXG4gKlxuICogVGhpcyBzbmlwcGV0IHdpbGwgZ2VuZXJhdGUgdGhlIHNhbWUgb3V0cHV0IGFzIHRoZSBvbmUgYmVmb3JlIGl0IGJlY2F1c2UgZXF1aXZhbGVudCB2YWx1ZXMgd2VyZSBzdXBwbGllZCAoanVzdCBpbiBoZXhhZGVjaW1hbCBmb3JtIHJhdGhlciB0aGFuIFJHQik6XG4gKlxuICogYGBgXG4gKiByZ2IoODQsMTcwLDg0KVxuICogLi4uXG4gKiByZ2IoMTcwLDg0LDE3MClcbiAqIC4uLlxuICogcmdiKDI1NSwwLDI1NSlcbiAqIGBgYFxuICpcbiAqICMjIEVhc2luZyBzdXBwb3J0XG4gKlxuICogRWFzaW5nIHdvcmtzIHNvbWV3aGF0IGRpZmZlcmVudGx5IGluIHRoZSBUb2tlbiBleHRlbnNpb24uICBUaGlzIGlzIGJlY2F1c2Ugc29tZSBDU1MgcHJvcGVydGllcyBoYXZlIG11bHRpcGxlIHZhbHVlcyBpbiB0aGVtLCBhbmQgeW91IG1pZ2h0IG5lZWQgdG8gdHdlZW4gZWFjaCB2YWx1ZSBhbG9uZyBpdHMgb3duIGVhc2luZyBjdXJ2ZS4gIEEgYmFzaWMgZXhhbXBsZTpcbiAqXG4gKiBgYGBcbiAqIHZhciB0d2VlbmFibGUgPSBuZXcgVHdlZW5hYmxlKCk7XG4gKiB0d2VlbmFibGUudHdlZW4oe1xuICogICBmcm9tOiB7IHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoMHB4KSB0cmFuc2xhdGVZKDBweCknfSxcbiAqICAgdG86IHsgdHJhbnNmb3JtOiAgICd0cmFuc2xhdGVYKDEwMHB4KSB0cmFuc2xhdGVZKDEwMHB4KSd9LFxuICogICBlYXNpbmc6IHsgdHJhbnNmb3JtOiAnZWFzZUluUXVhZCcgfSxcbiAqICAgc3RlcDogZnVuY3Rpb24gKHN0YXRlKSB7XG4gKiAgICAgY29uc29sZS5sb2coc3RhdGUudHJhbnNmb3JtKTtcbiAqICAgfVxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBUaGUgYWJvdmUgc25pcHBldCBjcmVhdGUgdmFsdWVzIGxpa2UgdGhpczpcbiAqXG4gKiBgYGBcbiAqIHRyYW5zbGF0ZVgoMTEuNTYwMDAwMDAwMDAwMDAycHgpIHRyYW5zbGF0ZVkoMTEuNTYwMDAwMDAwMDAwMDAycHgpXG4gKiAuLi5cbiAqIHRyYW5zbGF0ZVgoNDYuMjQwMDAwMDAwMDAwMDFweCkgdHJhbnNsYXRlWSg0Ni4yNDAwMDAwMDAwMDAwMXB4KVxuICogLi4uXG4gKiB0cmFuc2xhdGVYKDEwMHB4KSB0cmFuc2xhdGVZKDEwMHB4KVxuICogYGBgXG4gKlxuICogSW4gdGhpcyBjYXNlLCB0aGUgdmFsdWVzIGZvciBgdHJhbnNsYXRlWGAgYW5kIGB0cmFuc2xhdGVZYCBhcmUgYWx3YXlzIHRoZSBzYW1lIGZvciBlYWNoIHN0ZXAgb2YgdGhlIHR3ZWVuLCBiZWNhdXNlIHRoZXkgaGF2ZSB0aGUgc2FtZSBzdGFydCBhbmQgZW5kIHBvaW50cyBhbmQgYm90aCB1c2UgdGhlIHNhbWUgZWFzaW5nIGN1cnZlLiAgV2UgY2FuIGFsc28gdHdlZW4gYHRyYW5zbGF0ZVhgIGFuZCBgdHJhbnNsYXRlWWAgYWxvbmcgaW5kZXBlbmRlbnQgY3VydmVzOlxuICpcbiAqIGBgYFxuICogdmFyIHR3ZWVuYWJsZSA9IG5ldyBUd2VlbmFibGUoKTtcbiAqIHR3ZWVuYWJsZS50d2Vlbih7XG4gKiAgIGZyb206IHsgdHJhbnNmb3JtOiAndHJhbnNsYXRlWCgwcHgpIHRyYW5zbGF0ZVkoMHB4KSd9LFxuICogICB0bzogeyB0cmFuc2Zvcm06ICAgJ3RyYW5zbGF0ZVgoMTAwcHgpIHRyYW5zbGF0ZVkoMTAwcHgpJ30sXG4gKiAgIGVhc2luZzogeyB0cmFuc2Zvcm06ICdlYXNlSW5RdWFkIGJvdW5jZScgfSxcbiAqICAgc3RlcDogZnVuY3Rpb24gKHN0YXRlKSB7XG4gKiAgICAgY29uc29sZS5sb2coc3RhdGUudHJhbnNmb3JtKTtcbiAqICAgfVxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBUaGUgYWJvdmUgc25pcHBldCBjcmVhdGUgdmFsdWVzIGxpa2UgdGhpczpcbiAqXG4gKiBgYGBcbiAqIHRyYW5zbGF0ZVgoMTAuODlweCkgdHJhbnNsYXRlWSg4Mi4zNTU2MjVweClcbiAqIC4uLlxuICogdHJhbnNsYXRlWCg0NC44OTAwMDAwMDAwMDAwMXB4KSB0cmFuc2xhdGVZKDg2LjczMDYyNTAwMDAwMDAycHgpXG4gKiAuLi5cbiAqIHRyYW5zbGF0ZVgoMTAwcHgpIHRyYW5zbGF0ZVkoMTAwcHgpXG4gKiBgYGBcbiAqXG4gKiBgdHJhbnNsYXRlWGAgYW5kIGB0cmFuc2xhdGVZYCBhcmUgbm90IGluIHN5bmMgYW55bW9yZSwgYmVjYXVzZSBgZWFzZUluUXVhZGAgd2FzIHNwZWNpZmllZCBmb3IgYHRyYW5zbGF0ZVhgIGFuZCBgYm91bmNlYCBmb3IgYHRyYW5zbGF0ZVlgLiAgTWl4aW5nIGFuZCBtYXRjaGluZyBlYXNpbmcgY3VydmVzIGNhbiBtYWtlIGZvciBzb21lIGludGVyZXN0aW5nIG1vdGlvbiBpbiB5b3VyIGFuaW1hdGlvbnMuXG4gKlxuICogVGhlIG9yZGVyIG9mIHRoZSBzcGFjZS1zZXBhcmF0ZWQgZWFzaW5nIGN1cnZlcyBjb3JyZXNwb25kIHRoZSB0b2tlbiB2YWx1ZXMgdGhleSBhcHBseSB0by4gIElmIHRoZXJlIGFyZSBtb3JlIHRva2VuIHZhbHVlcyB0aGFuIGVhc2luZyBjdXJ2ZXMgbGlzdGVkLCB0aGUgbGFzdCBlYXNpbmcgY3VydmUgbGlzdGVkIGlzIHVzZWQuXG4gKi9cbmZ1bmN0aW9uIHRva2VuICgpIHtcbiAgLy8gRnVuY3Rpb25hbGl0eSBmb3IgdGhpcyBleHRlbnNpb24gcnVucyBpbXBsaWNpdGx5IGlmIGl0IGlzIGxvYWRlZC5cbn0gLyohKi9cblxuLy8gdG9rZW4gZnVuY3Rpb24gaXMgZGVmaW5lZCBhYm92ZSBvbmx5IHNvIHRoYXQgZG94LWZvdW5kYXRpb24gc2VlcyBpdCBhc1xuLy8gZG9jdW1lbnRhdGlvbiBhbmQgcmVuZGVycyBpdC4gIEl0IGlzIG5ldmVyIHVzZWQsIGFuZCBpcyBvcHRpbWl6ZWQgYXdheSBhdFxuLy8gYnVpbGQgdGltZS5cblxuOyhmdW5jdGlvbiAoVHdlZW5hYmxlKSB7XG5cbiAgLyohXG4gICAqIEB0eXBlZGVmIHt7XG4gICAqICAgZm9ybWF0U3RyaW5nOiBzdHJpbmdcbiAgICogICBjaHVua05hbWVzOiBBcnJheS48c3RyaW5nPlxuICAgKiB9fVxuICAgKi9cbiAgdmFyIGZvcm1hdE1hbmlmZXN0O1xuXG4gIC8vIENPTlNUQU5UU1xuXG4gIHZhciBSX05VTUJFUl9DT01QT05FTlQgPSAvKFxcZHxcXC18XFwuKS87XG4gIHZhciBSX0ZPUk1BVF9DSFVOS1MgPSAvKFteXFwtMC05XFwuXSspL2c7XG4gIHZhciBSX1VORk9STUFUVEVEX1ZBTFVFUyA9IC9bMC05LlxcLV0rL2c7XG4gIHZhciBSX1JHQiA9IG5ldyBSZWdFeHAoXG4gICAgJ3JnYlxcXFwoJyArIFJfVU5GT1JNQVRURURfVkFMVUVTLnNvdXJjZSArXG4gICAgKC8sXFxzKi8uc291cmNlKSArIFJfVU5GT1JNQVRURURfVkFMVUVTLnNvdXJjZSArXG4gICAgKC8sXFxzKi8uc291cmNlKSArIFJfVU5GT1JNQVRURURfVkFMVUVTLnNvdXJjZSArICdcXFxcKScsICdnJyk7XG4gIHZhciBSX1JHQl9QUkVGSVggPSAvXi4qXFwoLztcbiAgdmFyIFJfSEVYID0gLyMoWzAtOV18W2EtZl0pezMsNn0vZ2k7XG4gIHZhciBWQUxVRV9QTEFDRUhPTERFUiA9ICdWQUwnO1xuXG4gIC8vIEhFTFBFUlNcblxuICB2YXIgZ2V0Rm9ybWF0Q2h1bmtzRnJvbV9hY2N1bXVsYXRvciA9IFtdO1xuICAvKiFcbiAgICogQHBhcmFtIHtBcnJheS5udW1iZXJ9IHJhd1ZhbHVlc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJlZml4XG4gICAqXG4gICAqIEByZXR1cm4ge0FycmF5LjxzdHJpbmc+fVxuICAgKi9cbiAgZnVuY3Rpb24gZ2V0Rm9ybWF0Q2h1bmtzRnJvbSAocmF3VmFsdWVzLCBwcmVmaXgpIHtcbiAgICBnZXRGb3JtYXRDaHVua3NGcm9tX2FjY3VtdWxhdG9yLmxlbmd0aCA9IDA7XG5cbiAgICB2YXIgcmF3VmFsdWVzTGVuZ3RoID0gcmF3VmFsdWVzLmxlbmd0aDtcbiAgICB2YXIgaTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCByYXdWYWx1ZXNMZW5ndGg7IGkrKykge1xuICAgICAgZ2V0Rm9ybWF0Q2h1bmtzRnJvbV9hY2N1bXVsYXRvci5wdXNoKCdfJyArIHByZWZpeCArICdfJyArIGkpO1xuICAgIH1cblxuICAgIHJldHVybiBnZXRGb3JtYXRDaHVua3NGcm9tX2FjY3VtdWxhdG9yO1xuICB9XG5cbiAgLyohXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmb3JtYXR0ZWRTdHJpbmdcbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgZnVuY3Rpb24gZ2V0Rm9ybWF0U3RyaW5nRnJvbSAoZm9ybWF0dGVkU3RyaW5nKSB7XG4gICAgdmFyIGNodW5rcyA9IGZvcm1hdHRlZFN0cmluZy5tYXRjaChSX0ZPUk1BVF9DSFVOS1MpO1xuXG4gICAgaWYgKCFjaHVua3MpIHtcbiAgICAgIC8vIGNodW5rcyB3aWxsIGJlIG51bGwgaWYgdGhlcmUgd2VyZSBubyB0b2tlbnMgdG8gcGFyc2UgaW5cbiAgICAgIC8vIGZvcm1hdHRlZFN0cmluZyAoZm9yIGV4YW1wbGUsIGlmIGZvcm1hdHRlZFN0cmluZyBpcyAnMicpLiAgQ29lcmNlXG4gICAgICAvLyBjaHVua3MgdG8gYmUgdXNlZnVsIGhlcmUuXG4gICAgICBjaHVua3MgPSBbJycsICcnXTtcblxuICAgICAgLy8gSWYgdGhlcmUgaXMgb25seSBvbmUgY2h1bmssIGFzc3VtZSB0aGF0IHRoZSBzdHJpbmcgaXMgYSBudW1iZXJcbiAgICAgIC8vIGZvbGxvd2VkIGJ5IGEgdG9rZW4uLi5cbiAgICAgIC8vIE5PVEU6IFRoaXMgbWF5IGJlIGFuIHVud2lzZSBhc3N1bXB0aW9uLlxuICAgIH0gZWxzZSBpZiAoY2h1bmtzLmxlbmd0aCA9PT0gMSB8fFxuICAgICAgICAvLyAuLi5vciBpZiB0aGUgc3RyaW5nIHN0YXJ0cyB3aXRoIGEgbnVtYmVyIGNvbXBvbmVudCAoXCIuXCIsIFwiLVwiLCBvciBhXG4gICAgICAgIC8vIGRpZ2l0KS4uLlxuICAgICAgICBmb3JtYXR0ZWRTdHJpbmdbMF0ubWF0Y2goUl9OVU1CRVJfQ09NUE9ORU5UKSkge1xuICAgICAgLy8gLi4ucHJlcGVuZCBhbiBlbXB0eSBzdHJpbmcgaGVyZSB0byBtYWtlIHN1cmUgdGhhdCB0aGUgZm9ybWF0dGVkIG51bWJlclxuICAgICAgLy8gaXMgcHJvcGVybHkgcmVwbGFjZWQgYnkgVkFMVUVfUExBQ0VIT0xERVJcbiAgICAgIGNodW5rcy51bnNoaWZ0KCcnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2h1bmtzLmpvaW4oVkFMVUVfUExBQ0VIT0xERVIpO1xuICB9XG5cbiAgLyohXG4gICAqIENvbnZlcnQgYWxsIGhleCBjb2xvciB2YWx1ZXMgd2l0aGluIGEgc3RyaW5nIHRvIGFuIHJnYiBzdHJpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzdGF0ZU9iamVjdFxuICAgKlxuICAgKiBAcmV0dXJuIHtPYmplY3R9IFRoZSBtb2RpZmllZCBvYmpcbiAgICovXG4gIGZ1bmN0aW9uIHNhbml0aXplT2JqZWN0Rm9ySGV4UHJvcHMgKHN0YXRlT2JqZWN0KSB7XG4gICAgVHdlZW5hYmxlLmVhY2goc3RhdGVPYmplY3QsIGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgICB2YXIgY3VycmVudFByb3AgPSBzdGF0ZU9iamVjdFtwcm9wXTtcblxuICAgICAgaWYgKHR5cGVvZiBjdXJyZW50UHJvcCA9PT0gJ3N0cmluZycgJiYgY3VycmVudFByb3AubWF0Y2goUl9IRVgpKSB7XG4gICAgICAgIHN0YXRlT2JqZWN0W3Byb3BdID0gc2FuaXRpemVIZXhDaHVua3NUb1JHQihjdXJyZW50UHJvcCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKiFcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0clxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBmdW5jdGlvbiAgc2FuaXRpemVIZXhDaHVua3NUb1JHQiAoc3RyKSB7XG4gICAgcmV0dXJuIGZpbHRlclN0cmluZ0NodW5rcyhSX0hFWCwgc3RyLCBjb252ZXJ0SGV4VG9SR0IpO1xuICB9XG5cbiAgLyohXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBoZXhTdHJpbmdcbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgZnVuY3Rpb24gY29udmVydEhleFRvUkdCIChoZXhTdHJpbmcpIHtcbiAgICB2YXIgcmdiQXJyID0gaGV4VG9SR0JBcnJheShoZXhTdHJpbmcpO1xuICAgIHJldHVybiAncmdiKCcgKyByZ2JBcnJbMF0gKyAnLCcgKyByZ2JBcnJbMV0gKyAnLCcgKyByZ2JBcnJbMl0gKyAnKSc7XG4gIH1cblxuICB2YXIgaGV4VG9SR0JBcnJheV9yZXR1cm5BcnJheSA9IFtdO1xuICAvKiFcbiAgICogQ29udmVydCBhIGhleGFkZWNpbWFsIHN0cmluZyB0byBhbiBhcnJheSB3aXRoIHRocmVlIGl0ZW1zLCBvbmUgZWFjaCBmb3JcbiAgICogdGhlIHJlZCwgYmx1ZSwgYW5kIGdyZWVuIGRlY2ltYWwgdmFsdWVzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaGV4IEEgaGV4YWRlY2ltYWwgc3RyaW5nLlxuICAgKlxuICAgKiBAcmV0dXJucyB7QXJyYXkuPG51bWJlcj59IFRoZSBjb252ZXJ0ZWQgQXJyYXkgb2YgUkdCIHZhbHVlcyBpZiBgaGV4YCBpcyBhXG4gICAqIHZhbGlkIHN0cmluZywgb3IgYW4gQXJyYXkgb2YgdGhyZWUgMCdzLlxuICAgKi9cbiAgZnVuY3Rpb24gaGV4VG9SR0JBcnJheSAoaGV4KSB7XG5cbiAgICBoZXggPSBoZXgucmVwbGFjZSgvIy8sICcnKTtcblxuICAgIC8vIElmIHRoZSBzdHJpbmcgaXMgYSBzaG9ydGhhbmQgdGhyZWUgZGlnaXQgaGV4IG5vdGF0aW9uLCBub3JtYWxpemUgaXQgdG9cbiAgICAvLyB0aGUgc3RhbmRhcmQgc2l4IGRpZ2l0IG5vdGF0aW9uXG4gICAgaWYgKGhleC5sZW5ndGggPT09IDMpIHtcbiAgICAgIGhleCA9IGhleC5zcGxpdCgnJyk7XG4gICAgICBoZXggPSBoZXhbMF0gKyBoZXhbMF0gKyBoZXhbMV0gKyBoZXhbMV0gKyBoZXhbMl0gKyBoZXhbMl07XG4gICAgfVxuXG4gICAgaGV4VG9SR0JBcnJheV9yZXR1cm5BcnJheVswXSA9IGhleFRvRGVjKGhleC5zdWJzdHIoMCwgMikpO1xuICAgIGhleFRvUkdCQXJyYXlfcmV0dXJuQXJyYXlbMV0gPSBoZXhUb0RlYyhoZXguc3Vic3RyKDIsIDIpKTtcbiAgICBoZXhUb1JHQkFycmF5X3JldHVybkFycmF5WzJdID0gaGV4VG9EZWMoaGV4LnN1YnN0cig0LCAyKSk7XG5cbiAgICByZXR1cm4gaGV4VG9SR0JBcnJheV9yZXR1cm5BcnJheTtcbiAgfVxuXG4gIC8qIVxuICAgKiBDb252ZXJ0IGEgYmFzZS0xNiBudW1iZXIgdG8gYmFzZS0xMC5cbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ8U3RyaW5nfSBoZXggVGhlIHZhbHVlIHRvIGNvbnZlcnRcbiAgICpcbiAgICogQHJldHVybnMge051bWJlcn0gVGhlIGJhc2UtMTAgZXF1aXZhbGVudCBvZiBgaGV4YC5cbiAgICovXG4gIGZ1bmN0aW9uIGhleFRvRGVjIChoZXgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQoaGV4LCAxNik7XG4gIH1cblxuICAvKiFcbiAgICogUnVucyBhIGZpbHRlciBvcGVyYXRpb24gb24gYWxsIGNodW5rcyBvZiBhIHN0cmluZyB0aGF0IG1hdGNoIGEgUmVnRXhwXG4gICAqXG4gICAqIEBwYXJhbSB7UmVnRXhwfSBwYXR0ZXJuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bmZpbHRlcmVkU3RyaW5nXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oc3RyaW5nKX0gZmlsdGVyXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIGZ1bmN0aW9uIGZpbHRlclN0cmluZ0NodW5rcyAocGF0dGVybiwgdW5maWx0ZXJlZFN0cmluZywgZmlsdGVyKSB7XG4gICAgdmFyIHBhdHRlbk1hdGNoZXMgPSB1bmZpbHRlcmVkU3RyaW5nLm1hdGNoKHBhdHRlcm4pO1xuICAgIHZhciBmaWx0ZXJlZFN0cmluZyA9IHVuZmlsdGVyZWRTdHJpbmcucmVwbGFjZShwYXR0ZXJuLCBWQUxVRV9QTEFDRUhPTERFUik7XG5cbiAgICBpZiAocGF0dGVuTWF0Y2hlcykge1xuICAgICAgdmFyIHBhdHRlbk1hdGNoZXNMZW5ndGggPSBwYXR0ZW5NYXRjaGVzLmxlbmd0aDtcbiAgICAgIHZhciBjdXJyZW50Q2h1bms7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0dGVuTWF0Y2hlc0xlbmd0aDsgaSsrKSB7XG4gICAgICAgIGN1cnJlbnRDaHVuayA9IHBhdHRlbk1hdGNoZXMuc2hpZnQoKTtcbiAgICAgICAgZmlsdGVyZWRTdHJpbmcgPSBmaWx0ZXJlZFN0cmluZy5yZXBsYWNlKFxuICAgICAgICAgIFZBTFVFX1BMQUNFSE9MREVSLCBmaWx0ZXIoY3VycmVudENodW5rKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZpbHRlcmVkU3RyaW5nO1xuICB9XG5cbiAgLyohXG4gICAqIENoZWNrIGZvciBmbG9hdGluZyBwb2ludCB2YWx1ZXMgd2l0aGluIHJnYiBzdHJpbmdzIGFuZCByb3VuZHMgdGhlbS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZvcm1hdHRlZFN0cmluZ1xuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBmdW5jdGlvbiBzYW5pdGl6ZVJHQkNodW5rcyAoZm9ybWF0dGVkU3RyaW5nKSB7XG4gICAgcmV0dXJuIGZpbHRlclN0cmluZ0NodW5rcyhSX1JHQiwgZm9ybWF0dGVkU3RyaW5nLCBzYW5pdGl6ZVJHQkNodW5rKTtcbiAgfVxuXG4gIC8qIVxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmdiQ2h1bmtcbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgZnVuY3Rpb24gc2FuaXRpemVSR0JDaHVuayAocmdiQ2h1bmspIHtcbiAgICB2YXIgbnVtYmVycyA9IHJnYkNodW5rLm1hdGNoKFJfVU5GT1JNQVRURURfVkFMVUVTKTtcbiAgICB2YXIgbnVtYmVyc0xlbmd0aCA9IG51bWJlcnMubGVuZ3RoO1xuICAgIHZhciBzYW5pdGl6ZWRTdHJpbmcgPSByZ2JDaHVuay5tYXRjaChSX1JHQl9QUkVGSVgpWzBdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1iZXJzTGVuZ3RoOyBpKyspIHtcbiAgICAgIHNhbml0aXplZFN0cmluZyArPSBwYXJzZUludChudW1iZXJzW2ldLCAxMCkgKyAnLCc7XG4gICAgfVxuXG4gICAgc2FuaXRpemVkU3RyaW5nID0gc2FuaXRpemVkU3RyaW5nLnNsaWNlKDAsIC0xKSArICcpJztcblxuICAgIHJldHVybiBzYW5pdGl6ZWRTdHJpbmc7XG4gIH1cblxuICAvKiFcbiAgICogQHBhcmFtIHtPYmplY3R9IHN0YXRlT2JqZWN0XG4gICAqXG4gICAqIEByZXR1cm4ge09iamVjdH0gQW4gT2JqZWN0IG9mIGZvcm1hdE1hbmlmZXN0cyB0aGF0IGNvcnJlc3BvbmQgdG9cbiAgICogdGhlIHN0cmluZyBwcm9wZXJ0aWVzIG9mIHN0YXRlT2JqZWN0XG4gICAqL1xuICBmdW5jdGlvbiBnZXRGb3JtYXRNYW5pZmVzdHMgKHN0YXRlT2JqZWN0KSB7XG4gICAgdmFyIG1hbmlmZXN0QWNjdW11bGF0b3IgPSB7fTtcblxuICAgIFR3ZWVuYWJsZS5lYWNoKHN0YXRlT2JqZWN0LCBmdW5jdGlvbiAocHJvcCkge1xuICAgICAgdmFyIGN1cnJlbnRQcm9wID0gc3RhdGVPYmplY3RbcHJvcF07XG5cbiAgICAgIGlmICh0eXBlb2YgY3VycmVudFByb3AgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHZhciByYXdWYWx1ZXMgPSBnZXRWYWx1ZXNGcm9tKGN1cnJlbnRQcm9wKTtcblxuICAgICAgICBtYW5pZmVzdEFjY3VtdWxhdG9yW3Byb3BdID0ge1xuICAgICAgICAgICdmb3JtYXRTdHJpbmcnOiBnZXRGb3JtYXRTdHJpbmdGcm9tKGN1cnJlbnRQcm9wKVxuICAgICAgICAgICwnY2h1bmtOYW1lcyc6IGdldEZvcm1hdENodW5rc0Zyb20ocmF3VmFsdWVzLCBwcm9wKVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIG1hbmlmZXN0QWNjdW11bGF0b3I7XG4gIH1cblxuICAvKiFcbiAgICogQHBhcmFtIHtPYmplY3R9IHN0YXRlT2JqZWN0XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBmb3JtYXRNYW5pZmVzdHNcbiAgICovXG4gIGZ1bmN0aW9uIGV4cGFuZEZvcm1hdHRlZFByb3BlcnRpZXMgKHN0YXRlT2JqZWN0LCBmb3JtYXRNYW5pZmVzdHMpIHtcbiAgICBUd2VlbmFibGUuZWFjaChmb3JtYXRNYW5pZmVzdHMsIGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgICB2YXIgY3VycmVudFByb3AgPSBzdGF0ZU9iamVjdFtwcm9wXTtcbiAgICAgIHZhciByYXdWYWx1ZXMgPSBnZXRWYWx1ZXNGcm9tKGN1cnJlbnRQcm9wKTtcbiAgICAgIHZhciByYXdWYWx1ZXNMZW5ndGggPSByYXdWYWx1ZXMubGVuZ3RoO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhd1ZhbHVlc0xlbmd0aDsgaSsrKSB7XG4gICAgICAgIHN0YXRlT2JqZWN0W2Zvcm1hdE1hbmlmZXN0c1twcm9wXS5jaHVua05hbWVzW2ldXSA9ICtyYXdWYWx1ZXNbaV07XG4gICAgICB9XG5cbiAgICAgIGRlbGV0ZSBzdGF0ZU9iamVjdFtwcm9wXTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qIVxuICAgKiBAcGFyYW0ge09iamVjdH0gc3RhdGVPYmplY3RcbiAgICogQHBhcmFtIHtPYmplY3R9IGZvcm1hdE1hbmlmZXN0c1xuICAgKi9cbiAgZnVuY3Rpb24gY29sbGFwc2VGb3JtYXR0ZWRQcm9wZXJ0aWVzIChzdGF0ZU9iamVjdCwgZm9ybWF0TWFuaWZlc3RzKSB7XG4gICAgVHdlZW5hYmxlLmVhY2goZm9ybWF0TWFuaWZlc3RzLCBmdW5jdGlvbiAocHJvcCkge1xuICAgICAgdmFyIGN1cnJlbnRQcm9wID0gc3RhdGVPYmplY3RbcHJvcF07XG4gICAgICB2YXIgZm9ybWF0Q2h1bmtzID0gZXh0cmFjdFByb3BlcnR5Q2h1bmtzKFxuICAgICAgICBzdGF0ZU9iamVjdCwgZm9ybWF0TWFuaWZlc3RzW3Byb3BdLmNodW5rTmFtZXMpO1xuICAgICAgdmFyIHZhbHVlc0xpc3QgPSBnZXRWYWx1ZXNMaXN0KFxuICAgICAgICBmb3JtYXRDaHVua3MsIGZvcm1hdE1hbmlmZXN0c1twcm9wXS5jaHVua05hbWVzKTtcbiAgICAgIGN1cnJlbnRQcm9wID0gZ2V0Rm9ybWF0dGVkVmFsdWVzKFxuICAgICAgICBmb3JtYXRNYW5pZmVzdHNbcHJvcF0uZm9ybWF0U3RyaW5nLCB2YWx1ZXNMaXN0KTtcbiAgICAgIHN0YXRlT2JqZWN0W3Byb3BdID0gc2FuaXRpemVSR0JDaHVua3MoY3VycmVudFByb3ApO1xuICAgIH0pO1xuICB9XG5cbiAgLyohXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzdGF0ZU9iamVjdFxuICAgKiBAcGFyYW0ge0FycmF5LjxzdHJpbmc+fSBjaHVua05hbWVzXG4gICAqXG4gICAqIEByZXR1cm4ge09iamVjdH0gVGhlIGV4dHJhY3RlZCB2YWx1ZSBjaHVua3MuXG4gICAqL1xuICBmdW5jdGlvbiBleHRyYWN0UHJvcGVydHlDaHVua3MgKHN0YXRlT2JqZWN0LCBjaHVua05hbWVzKSB7XG4gICAgdmFyIGV4dHJhY3RlZFZhbHVlcyA9IHt9O1xuICAgIHZhciBjdXJyZW50Q2h1bmtOYW1lLCBjaHVua05hbWVzTGVuZ3RoID0gY2h1bmtOYW1lcy5sZW5ndGg7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNodW5rTmFtZXNMZW5ndGg7IGkrKykge1xuICAgICAgY3VycmVudENodW5rTmFtZSA9IGNodW5rTmFtZXNbaV07XG4gICAgICBleHRyYWN0ZWRWYWx1ZXNbY3VycmVudENodW5rTmFtZV0gPSBzdGF0ZU9iamVjdFtjdXJyZW50Q2h1bmtOYW1lXTtcbiAgICAgIGRlbGV0ZSBzdGF0ZU9iamVjdFtjdXJyZW50Q2h1bmtOYW1lXTtcbiAgICB9XG5cbiAgICByZXR1cm4gZXh0cmFjdGVkVmFsdWVzO1xuICB9XG5cbiAgdmFyIGdldFZhbHVlc0xpc3RfYWNjdW11bGF0b3IgPSBbXTtcbiAgLyohXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzdGF0ZU9iamVjdFxuICAgKiBAcGFyYW0ge0FycmF5LjxzdHJpbmc+fSBjaHVua05hbWVzXG4gICAqXG4gICAqIEByZXR1cm4ge0FycmF5LjxudW1iZXI+fVxuICAgKi9cbiAgZnVuY3Rpb24gZ2V0VmFsdWVzTGlzdCAoc3RhdGVPYmplY3QsIGNodW5rTmFtZXMpIHtcbiAgICBnZXRWYWx1ZXNMaXN0X2FjY3VtdWxhdG9yLmxlbmd0aCA9IDA7XG4gICAgdmFyIGNodW5rTmFtZXNMZW5ndGggPSBjaHVua05hbWVzLmxlbmd0aDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2h1bmtOYW1lc0xlbmd0aDsgaSsrKSB7XG4gICAgICBnZXRWYWx1ZXNMaXN0X2FjY3VtdWxhdG9yLnB1c2goc3RhdGVPYmplY3RbY2h1bmtOYW1lc1tpXV0pO1xuICAgIH1cblxuICAgIHJldHVybiBnZXRWYWx1ZXNMaXN0X2FjY3VtdWxhdG9yO1xuICB9XG5cbiAgLyohXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmb3JtYXRTdHJpbmdcbiAgICogQHBhcmFtIHtBcnJheS48bnVtYmVyPn0gcmF3VmFsdWVzXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIGZ1bmN0aW9uIGdldEZvcm1hdHRlZFZhbHVlcyAoZm9ybWF0U3RyaW5nLCByYXdWYWx1ZXMpIHtcbiAgICB2YXIgZm9ybWF0dGVkVmFsdWVTdHJpbmcgPSBmb3JtYXRTdHJpbmc7XG4gICAgdmFyIHJhd1ZhbHVlc0xlbmd0aCA9IHJhd1ZhbHVlcy5sZW5ndGg7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhd1ZhbHVlc0xlbmd0aDsgaSsrKSB7XG4gICAgICBmb3JtYXR0ZWRWYWx1ZVN0cmluZyA9IGZvcm1hdHRlZFZhbHVlU3RyaW5nLnJlcGxhY2UoXG4gICAgICAgIFZBTFVFX1BMQUNFSE9MREVSLCArcmF3VmFsdWVzW2ldLnRvRml4ZWQoNCkpO1xuICAgIH1cblxuICAgIHJldHVybiBmb3JtYXR0ZWRWYWx1ZVN0cmluZztcbiAgfVxuXG4gIC8qIVxuICAgKiBOb3RlOiBJdCdzIHRoZSBkdXR5IG9mIHRoZSBjYWxsZXIgdG8gY29udmVydCB0aGUgQXJyYXkgZWxlbWVudHMgb2YgdGhlXG4gICAqIHJldHVybiB2YWx1ZSBpbnRvIG51bWJlcnMuICBUaGlzIGlzIGEgcGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZm9ybWF0dGVkU3RyaW5nXG4gICAqXG4gICAqIEByZXR1cm4ge0FycmF5LjxzdHJpbmc+fG51bGx9XG4gICAqL1xuICBmdW5jdGlvbiBnZXRWYWx1ZXNGcm9tIChmb3JtYXR0ZWRTdHJpbmcpIHtcbiAgICByZXR1cm4gZm9ybWF0dGVkU3RyaW5nLm1hdGNoKFJfVU5GT1JNQVRURURfVkFMVUVTKTtcbiAgfVxuXG4gIC8qIVxuICAgKiBAcGFyYW0ge09iamVjdH0gZWFzaW5nT2JqZWN0XG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0b2tlbkRhdGFcbiAgICovXG4gIGZ1bmN0aW9uIGV4cGFuZEVhc2luZ09iamVjdCAoZWFzaW5nT2JqZWN0LCB0b2tlbkRhdGEpIHtcbiAgICBUd2VlbmFibGUuZWFjaCh0b2tlbkRhdGEsIGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgICB2YXIgY3VycmVudFByb3AgPSB0b2tlbkRhdGFbcHJvcF07XG4gICAgICB2YXIgY2h1bmtOYW1lcyA9IGN1cnJlbnRQcm9wLmNodW5rTmFtZXM7XG4gICAgICB2YXIgY2h1bmtMZW5ndGggPSBjaHVua05hbWVzLmxlbmd0aDtcbiAgICAgIHZhciBlYXNpbmdDaHVua3MgPSBlYXNpbmdPYmplY3RbcHJvcF0uc3BsaXQoJyAnKTtcbiAgICAgIHZhciBsYXN0RWFzaW5nQ2h1bmsgPSBlYXNpbmdDaHVua3NbZWFzaW5nQ2h1bmtzLmxlbmd0aCAtIDFdO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNodW5rTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZWFzaW5nT2JqZWN0W2NodW5rTmFtZXNbaV1dID0gZWFzaW5nQ2h1bmtzW2ldIHx8IGxhc3RFYXNpbmdDaHVuaztcbiAgICAgIH1cblxuICAgICAgZGVsZXRlIGVhc2luZ09iamVjdFtwcm9wXTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qIVxuICAgKiBAcGFyYW0ge09iamVjdH0gZWFzaW5nT2JqZWN0XG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0b2tlbkRhdGFcbiAgICovXG4gIGZ1bmN0aW9uIGNvbGxhcHNlRWFzaW5nT2JqZWN0IChlYXNpbmdPYmplY3QsIHRva2VuRGF0YSkge1xuICAgIFR3ZWVuYWJsZS5lYWNoKHRva2VuRGF0YSwgZnVuY3Rpb24gKHByb3ApIHtcbiAgICAgIHZhciBjdXJyZW50UHJvcCA9IHRva2VuRGF0YVtwcm9wXTtcbiAgICAgIHZhciBjaHVua05hbWVzID0gY3VycmVudFByb3AuY2h1bmtOYW1lcztcbiAgICAgIHZhciBjaHVua0xlbmd0aCA9IGNodW5rTmFtZXMubGVuZ3RoO1xuICAgICAgdmFyIGNvbXBvc2VkRWFzaW5nU3RyaW5nID0gJyc7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2h1bmtMZW5ndGg7IGkrKykge1xuICAgICAgICBjb21wb3NlZEVhc2luZ1N0cmluZyArPSAnICcgKyBlYXNpbmdPYmplY3RbY2h1bmtOYW1lc1tpXV07XG4gICAgICAgIGRlbGV0ZSBlYXNpbmdPYmplY3RbY2h1bmtOYW1lc1tpXV07XG4gICAgICB9XG5cbiAgICAgIGVhc2luZ09iamVjdFtwcm9wXSA9IGNvbXBvc2VkRWFzaW5nU3RyaW5nLnN1YnN0cigxKTtcbiAgICB9KTtcbiAgfVxuXG4gIFR3ZWVuYWJsZS5wcm90b3R5cGUuZmlsdGVyLnRva2VuID0ge1xuICAgICd0d2VlbkNyZWF0ZWQnOiBmdW5jdGlvbiAoY3VycmVudFN0YXRlLCBmcm9tU3RhdGUsIHRvU3RhdGUsIGVhc2luZ09iamVjdCkge1xuICAgICAgc2FuaXRpemVPYmplY3RGb3JIZXhQcm9wcyhjdXJyZW50U3RhdGUpO1xuICAgICAgc2FuaXRpemVPYmplY3RGb3JIZXhQcm9wcyhmcm9tU3RhdGUpO1xuICAgICAgc2FuaXRpemVPYmplY3RGb3JIZXhQcm9wcyh0b1N0YXRlKTtcbiAgICAgIHRoaXMuX3Rva2VuRGF0YSA9IGdldEZvcm1hdE1hbmlmZXN0cyhjdXJyZW50U3RhdGUpO1xuICAgIH0sXG5cbiAgICAnYmVmb3JlVHdlZW4nOiBmdW5jdGlvbiAoY3VycmVudFN0YXRlLCBmcm9tU3RhdGUsIHRvU3RhdGUsIGVhc2luZ09iamVjdCkge1xuICAgICAgZXhwYW5kRWFzaW5nT2JqZWN0KGVhc2luZ09iamVjdCwgdGhpcy5fdG9rZW5EYXRhKTtcbiAgICAgIGV4cGFuZEZvcm1hdHRlZFByb3BlcnRpZXMoY3VycmVudFN0YXRlLCB0aGlzLl90b2tlbkRhdGEpO1xuICAgICAgZXhwYW5kRm9ybWF0dGVkUHJvcGVydGllcyhmcm9tU3RhdGUsIHRoaXMuX3Rva2VuRGF0YSk7XG4gICAgICBleHBhbmRGb3JtYXR0ZWRQcm9wZXJ0aWVzKHRvU3RhdGUsIHRoaXMuX3Rva2VuRGF0YSk7XG4gICAgfSxcblxuICAgICdhZnRlclR3ZWVuJzogZnVuY3Rpb24gKGN1cnJlbnRTdGF0ZSwgZnJvbVN0YXRlLCB0b1N0YXRlLCBlYXNpbmdPYmplY3QpIHtcbiAgICAgIGNvbGxhcHNlRm9ybWF0dGVkUHJvcGVydGllcyhjdXJyZW50U3RhdGUsIHRoaXMuX3Rva2VuRGF0YSk7XG4gICAgICBjb2xsYXBzZUZvcm1hdHRlZFByb3BlcnRpZXMoZnJvbVN0YXRlLCB0aGlzLl90b2tlbkRhdGEpO1xuICAgICAgY29sbGFwc2VGb3JtYXR0ZWRQcm9wZXJ0aWVzKHRvU3RhdGUsIHRoaXMuX3Rva2VuRGF0YSk7XG4gICAgICBjb2xsYXBzZUVhc2luZ09iamVjdChlYXNpbmdPYmplY3QsIHRoaXMuX3Rva2VuRGF0YSk7XG4gICAgfVxuICB9O1xuXG59IChUd2VlbmFibGUpKTtcblxufSh0aGlzKSk7XG4iLCIvLyBCcm93c2VyaWZ5IHdpbGwgdHJhbnNmb3JtIHRoZSBtb2R1bGUgY29tcGF0aWJsZSBmb3IgYnJvd3NlclxudmFyIFR3ZWVuYWJsZSA9IHJlcXVpcmUoJ3NoaWZ0eScpO1xuXG52YXIgRUFTSU5HX0FMSUFTRVMgPSB7XG4gICAgZWFzZUluOiAnZWFzZUluQ3ViaWMnLFxuICAgIGVhc2VPdXQ6ICdlYXNlT3V0Q3ViaWMnLFxuICAgIGVhc2VJbk91dDogJ2Vhc2VJbk91dEN1YmljJ1xufTtcblxuLy8gQmFzZSBvYmplY3QgZm9yIGRpZmZlcmVudCBwcm9ncmVzcyBiYXIgc2hhcGVzXG52YXIgUHJvZ3Jlc3MgPSBmdW5jdGlvbihjb250YWluZXIsIG9wdHMpIHtcbiAgICAvLyBQcmV2ZW50IGNhbGxpbmcgY29uc3RydWN0b3Igd2l0aG91dCBwYXJhbWV0ZXJzIHNvIGluaGVyaXRhbmNlXG4gICAgLy8gd29ya3MgY29ycmVjdGx5XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHJldHVybjtcblxuICAgIHZhciBzdmdWaWV3ID0gdGhpcy5fY3JlYXRlU3ZnVmlldyhvcHRzKTtcblxuICAgIHZhciBlbGVtZW50O1xuICAgIGlmIChpc1N0cmluZyhjb250YWluZXIpKSB7XG4gICAgICAgIGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lcik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbWVudCA9IGNvbnRhaW5lcjtcbiAgICB9XG4gICAgZWxlbWVudC5hcHBlbmRDaGlsZChzdmdWaWV3LnN2Zyk7XG5cbiAgICB2YXIgbmV3T3B0cyA9IGV4dGVuZCh7XG4gICAgICAgIGF0dGFjaG1lbnQ6IHRoaXNcbiAgICB9LCBvcHRzKTtcbiAgICB0aGlzLl9wYXRoID0gbmV3IFBhdGgoc3ZnVmlldy5wYXRoLCBuZXdPcHRzKTtcblxuICAgIC8vIEV4cG9zZSBwdWJsaWMgYXR0cmlidXRlc1xuICAgIHRoaXMucGF0aCA9IHN2Z1ZpZXcucGF0aDtcbiAgICB0aGlzLnRyYWlsID0gc3ZnVmlldy50cmFpbDtcbn07XG5cblByb2dyZXNzLnByb3RvdHlwZS5hbmltYXRlID0gZnVuY3Rpb24gYW5pbWF0ZShwcm9ncmVzcywgb3B0cywgY2IpIHtcbiAgICB0aGlzLl9wYXRoLmFuaW1hdGUocHJvZ3Jlc3MsIG9wdHMsIGNiKTtcbn07XG5cblByb2dyZXNzLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gc3RvcCgpIHtcbiAgICB0aGlzLl9wYXRoLnN0b3AoKTtcbn07XG5cblByb2dyZXNzLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiBzZXQocHJvZ3Jlc3MpIHtcbiAgICB0aGlzLl9wYXRoLnNldChwcm9ncmVzcyk7XG59O1xuXG5Qcm9ncmVzcy5wcm90b3R5cGUuX2NyZWF0ZVN2Z1ZpZXcgPSBmdW5jdGlvbiBfY3JlYXRlU3ZnVmlldyhvcHRzKSB7XG4gICAgb3B0cyA9IGV4dGVuZCh7XG4gICAgICAgIGNvbG9yOiBcIiM1NTVcIixcbiAgICAgICAgc3Ryb2tlV2lkdGg6IDEuMCxcbiAgICAgICAgdHJhaWxDb2xvcjogbnVsbCxcbiAgICAgICAgZmlsbDogbnVsbFxuICAgIH0sIG9wdHMpO1xuXG4gICAgdmFyIHN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwic3ZnXCIpO1xuICAgIHRoaXMuX2luaXRpYWxpemVTdmcoc3ZnLCBvcHRzKTtcblxuICAgIHZhciB0cmFpbFBhdGggPSBudWxsO1xuICAgIGlmIChvcHRzLnRyYWlsQ29sb3IpIHtcbiAgICAgICAgdmFyIHRyYWlsT3B0cyA9IGV4dGVuZCh7fSwgb3B0cyk7XG4gICAgICAgIHRyYWlsT3B0cy5jb2xvciA9IG9wdHMudHJhaWxDb2xvcjtcblxuICAgICAgICAvLyBXaGVuIHRyYWlsIHBhdGggaXMgc2V0LCBmaWxsIG11c3QgYmUgc2V0IGZvciBpdCBpbnN0ZWFkIG9mIHRoZVxuICAgICAgICAvLyBhY3R1YWwgcGF0aCB0byBwcmV2ZW50IHRyYWlsIHN0cm9rZSBmcm9tIGNsaXBwaW5nXG4gICAgICAgIG9wdHMuZmlsbCA9IG51bGw7XG4gICAgICAgIHRyYWlsUGF0aCA9IHRoaXMuX2NyZWF0ZVBhdGgodHJhaWxPcHRzKTtcbiAgICAgICAgc3ZnLmFwcGVuZENoaWxkKHRyYWlsUGF0aCk7XG4gICAgfVxuXG4gICAgdmFyIHBhdGggPSB0aGlzLl9jcmVhdGVQYXRoKG9wdHMpO1xuICAgIHN2Zy5hcHBlbmRDaGlsZChwYXRoKTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHN2Zzogc3ZnLFxuICAgICAgICBwYXRoOiBwYXRoLFxuICAgICAgICB0cmFpbDogdHJhaWxQYXRoXG4gICAgfTtcbn07XG5cblByb2dyZXNzLnByb3RvdHlwZS5faW5pdGlhbGl6ZVN2ZyA9IGZ1bmN0aW9uIF9pbml0aWFsaXplU3ZnKHN2Zywgb3B0cykge1xuICAgIHN2Zy5zZXRBdHRyaWJ1dGUoXCJ2aWV3Qm94XCIsIFwiMCAwIDEwMCAxMDBcIik7XG59O1xuXG5Qcm9ncmVzcy5wcm90b3R5cGUuX2NyZWF0ZVBhdGggPSBmdW5jdGlvbiBfY3JlYXRlUGF0aChvcHRzKSB7XG4gICAgdmFyIHBhdGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInBhdGhcIik7XG4gICAgcGF0aC5zZXRBdHRyaWJ1dGUoXCJkXCIsIHRoaXMuX3BhdGhTdHJpbmcob3B0cykpO1xuICAgIHBhdGguc2V0QXR0cmlidXRlKFwic3Ryb2tlXCIsIG9wdHMuY29sb3IpO1xuICAgIHBhdGguc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIG9wdHMuc3Ryb2tlV2lkdGgpO1xuXG4gICAgaWYgKG9wdHMuZmlsbCkge1xuICAgICAgICBwYXRoLnNldEF0dHJpYnV0ZShcImZpbGxcIiwgb3B0cy5maWxsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBwYXRoLnNldEF0dHJpYnV0ZShcImZpbGwtb3BhY2l0eVwiLCBcIjBcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhdGg7XG59O1xuXG5Qcm9ncmVzcy5wcm90b3R5cGUuX3BhdGhTdHJpbmcgPSBmdW5jdGlvbiBfcGF0aFN0cmluZyhvcHRzKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiT3ZlcnJpZGUgdGhpcyBmdW5jdGlvbiBmb3IgZWFjaCBwcm9ncmVzcyBiYXJcIik7XG59O1xuXG4vLyBQcm9ncmVzcyBiYXIgc2hhcGVzXG5cbnZhciBMaW5lID0gZnVuY3Rpb24oY29udGFpbmVyLCBvcHRpb25zKSB7XG4gICAgUHJvZ3Jlc3MuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG5cbkxpbmUucHJvdG90eXBlID0gbmV3IFByb2dyZXNzKCk7XG5MaW5lLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IExpbmU7XG5cbkxpbmUucHJvdG90eXBlLl9pbml0aWFsaXplU3ZnID0gZnVuY3Rpb24gX2luaXRpYWxpemVTdmcoc3ZnLCBvcHRzKSB7XG4gICAgc3ZnLnNldEF0dHJpYnV0ZShcInZpZXdCb3hcIiwgXCIwIDAgMTAwIFwiICsgb3B0cy5zdHJva2VXaWR0aCk7XG4gICAgc3ZnLnNldEF0dHJpYnV0ZShcInByZXNlcnZlQXNwZWN0UmF0aW9cIiwgXCJub25lXCIpO1xufTtcblxuTGluZS5wcm90b3R5cGUuX3BhdGhTdHJpbmcgPSBmdW5jdGlvbiBfcGF0aFN0cmluZyhvcHRzKSB7XG4gICAgdmFyIHBhdGhTdHJpbmcgPSBcIk0gMCx7Y30gTCAxMDAse2N9XCI7XG4gICAgdmFyIGNlbnRlciA9IG9wdHMuc3Ryb2tlV2lkdGggLyAyO1xuICAgIHBhdGhTdHJpbmcgPSBwYXRoU3RyaW5nLnJlcGxhY2UoL1xce2NcXH0vZywgY2VudGVyKTtcbiAgICByZXR1cm4gcGF0aFN0cmluZztcbn07XG5cbnZhciBDaXJjbGUgPSBmdW5jdGlvbihjb250YWluZXIsIG9wdGlvbnMpIHtcbiAgICBQcm9ncmVzcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcblxuQ2lyY2xlLnByb3RvdHlwZSA9IG5ldyBQcm9ncmVzcygpO1xuQ2lyY2xlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENpcmNsZTtcblxuQ2lyY2xlLnByb3RvdHlwZS5fcGF0aFN0cmluZyA9IGZ1bmN0aW9uIF9wYXRoU3RyaW5nKG9wdHMpIHtcbiAgICAvLyBVc2UgdHdvIGFyY3MgdG8gZm9ybSBhIGNpcmNsZVxuICAgIC8vIFNlZSB0aGlzIGFuc3dlciBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMDQ3NzMzNC8xNDQ2MDkyXG4gICAgdmFyIHBhdGhTdHJpbmcgPSBcIk0gNTAsNTAgbSAwLC17cn0gYSB7cn0se3J9IDAgMSAxIDAse3IqMn0gYSB7cn0se3J9IDAgMSAxIDAsLXtyKjJ9XCI7XG4gICAgdmFyIHIgPSA1MCAtIG9wdHMuc3Ryb2tlV2lkdGggLyAyO1xuICAgIHBhdGhTdHJpbmcgPSBwYXRoU3RyaW5nLnJlcGxhY2UoL1xce3JcXH0vZywgcik7XG4gICAgcGF0aFN0cmluZyA9IHBhdGhTdHJpbmcucmVwbGFjZSgvXFx7clxcKjJcXH0vZywgciAqIDIpO1xuICAgIHJldHVybiBwYXRoU3RyaW5nO1xufTtcblxudmFyIFNxdWFyZSA9IGZ1bmN0aW9uKGNvbnRhaW5lciwgb3B0aW9ucykge1xuICAgIFByb2dyZXNzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xuXG5TcXVhcmUucHJvdG90eXBlID0gbmV3IFByb2dyZXNzKCk7XG5TcXVhcmUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU3F1YXJlO1xuXG5TcXVhcmUucHJvdG90eXBlLl9wYXRoU3RyaW5nID0gZnVuY3Rpb24gX3BhdGhTdHJpbmcob3B0cykge1xuICAgIHZhciBwYXRoU3RyaW5nID0gXCJNIDAse3MvMn0gTCB7d30se3MvMn0gTCB7d30se3d9IEwge3MvMn0se3d9IEwge3MvMn0se3N9XCI7XG4gICAgdmFyIHcgPSAxMDAgLSBvcHRzLnN0cm9rZVdpZHRoIC8gMjtcbiAgICBwYXRoU3RyaW5nID0gcGF0aFN0cmluZy5yZXBsYWNlKC9cXHt3XFx9L2csIHcpO1xuICAgIHBhdGhTdHJpbmcgPSBwYXRoU3RyaW5nLnJlcGxhY2UoL1xce3NcXH0vZywgb3B0cy5zdHJva2VXaWR0aCk7XG4gICAgcGF0aFN0cmluZyA9IHBhdGhTdHJpbmcucmVwbGFjZSgvXFx7c1xcLzJcXH0vZywgb3B0cy5zdHJva2VXaWR0aCAvIDIpO1xuICAgIHJldHVybiBwYXRoU3RyaW5nO1xufTtcblxuLy8gTG93ZXIgbGV2ZWwgQVBJIHRvIGFuaW1hdGUgYW55IGtpbmQgb2Ygc3ZnIHBhdGhcblxudmFyIFBhdGggPSBmdW5jdGlvbihwYXRoLCBvcHRzKSB7XG4gICAgb3B0cyA9IGV4dGVuZCh7XG4gICAgICAgIGR1cmF0aW9uOiA4MDAsXG4gICAgICAgIGVhc2luZzogXCJsaW5lYXJcIixcbiAgICAgICAgZnJvbToge30sXG4gICAgICAgIHRvOiB7fSxcbiAgICAgICAgc3RlcDogbm9vcFxuICAgIH0sIG9wdHMpO1xuXG4gICAgdGhpcy5fcGF0aCA9IHBhdGg7XG4gICAgdGhpcy5fb3B0cyA9IG9wdHM7XG4gICAgdGhpcy5fdHdlZW5hYmxlID0gbnVsbDtcblxuICAgIC8vIFNldCB1cCB0aGUgc3RhcnRpbmcgcG9zaXRpb25zXG4gICAgdmFyIGxlbmd0aCA9IHRoaXMuX3BhdGguZ2V0VG90YWxMZW5ndGgoKTtcbiAgICB0aGlzLl9wYXRoLnN0eWxlLnN0cm9rZURhc2hhcnJheSA9IGxlbmd0aCArICcgJyArIGxlbmd0aDtcbiAgICB0aGlzLl9wYXRoLnN0eWxlLnN0cm9rZURhc2hvZmZzZXQgPSBsZW5ndGg7XG59O1xuXG5QYXRoLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiBzZXQocHJvZ3Jlc3MpIHtcbiAgICB0aGlzLnN0b3AoKTtcblxuICAgIHZhciBsZW5ndGggPSB0aGlzLl9wYXRoLmdldFRvdGFsTGVuZ3RoKCk7XG4gICAgdGhpcy5fcGF0aC5zdHlsZS5zdHJva2VEYXNob2Zmc2V0ID0gbGVuZ3RoIC0gcHJvZ3Jlc3MgKiBsZW5ndGg7XG59O1xuXG5QYXRoLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gc3RvcCgpIHtcbiAgICB0aGlzLl9zdG9wVHdlZW4oKTtcblxuICAgIHZhciBjb21wdXRlZFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5fcGF0aCwgbnVsbCk7XG4gICAgdmFyIG9mZnNldCA9IGNvbXB1dGVkU3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnc3Ryb2tlLWRhc2hvZmZzZXQnKTtcbiAgICB0aGlzLl9wYXRoLnN0eWxlLnN0cm9rZURhc2hvZmZzZXQgPSBvZmZzZXQ7XG59O1xuXG4vLyBNZXRob2QgaW50cm9kdWNlZCBoZXJlOlxuLy8gaHR0cDovL2pha2VhcmNoaWJhbGQuY29tLzIwMTMvYW5pbWF0ZWQtbGluZS1kcmF3aW5nLXN2Zy9cblBhdGgucHJvdG90eXBlLmFuaW1hdGUgPSBmdW5jdGlvbiBhbmltYXRlKHByb2dyZXNzLCBvcHRzLCBjYikge1xuICAgIGlmIChpc0Z1bmN0aW9uKG9wdHMpKSB7XG4gICAgICAgIGNiID0gb3B0cztcbiAgICAgICAgb3B0cyA9IHt9O1xuICAgIH1cblxuICAgIC8vIENvcHkgZGVmYXVsdCBvcHRzIHRvIG5ldyBvYmplY3Qgc28gZGVmYXVsdHMgYXJlIG5vdCBtb2RpZmllZFxuICAgIHZhciBkZWZhdWx0T3B0cyA9IGV4dGVuZCh7fSwgdGhpcy5fb3B0cyk7XG4gICAgb3B0cyA9IGV4dGVuZChkZWZhdWx0T3B0cywgb3B0cyk7XG5cbiAgICB0aGlzLnN0b3AoKTtcblxuICAgIC8vIFRyaWdnZXIgYSBsYXlvdXQgc28gc3R5bGVzIGFyZSBjYWxjdWxhdGVkICYgdGhlIGJyb3dzZXJcbiAgICAvLyBwaWNrcyB1cCB0aGUgc3RhcnRpbmcgcG9zaXRpb24gYmVmb3JlIGFuaW1hdGluZ1xuICAgIHRoaXMuX3BhdGguZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICB2YXIgY29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuX3BhdGgsIG51bGwpO1xuICAgIHZhciBvZmZzZXQgPSBjb21wdXRlZFN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ3N0cm9rZS1kYXNob2Zmc2V0Jyk7XG4gICAgLy8gUmVtb3ZlICdweCcgc3VmZml4XG4gICAgb2Zmc2V0ID0gcGFyc2VGbG9hdChvZmZzZXQsIDEwKTtcblxuICAgIHZhciBsZW5ndGggPSB0aGlzLl9wYXRoLmdldFRvdGFsTGVuZ3RoKCk7XG4gICAgdmFyIG5ld09mZnNldCA9IGxlbmd0aCAtIHByb2dyZXNzICogbGVuZ3RoO1xuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgdGhpcy5fdHdlZW5hYmxlID0gbmV3IFR3ZWVuYWJsZSgpO1xuICAgIHRoaXMuX3R3ZWVuYWJsZS50d2Vlbih7XG4gICAgICAgIGZyb206IGV4dGVuZCh7IG9mZnNldDogb2Zmc2V0IH0sIG9wdHMuZnJvbSksXG4gICAgICAgIHRvOiBleHRlbmQoeyBvZmZzZXQ6IG5ld09mZnNldCB9LCBvcHRzLnRvKSxcbiAgICAgICAgZHVyYXRpb246IG9wdHMuZHVyYXRpb24sXG4gICAgICAgIGVhc2luZzogdGhpcy5fZWFzaW5nKG9wdHMuZWFzaW5nKSxcbiAgICAgICAgc3RlcDogZnVuY3Rpb24oc3RhdGUpIHtcbiAgICAgICAgICAgIHNlbGYuX3BhdGguc3R5bGUuc3Ryb2tlRGFzaG9mZnNldCA9IHN0YXRlLm9mZnNldDtcbiAgICAgICAgICAgIG9wdHMuc3RlcChzdGF0ZSwgb3B0cy5hdHRhY2htZW50KTtcbiAgICAgICAgfSxcbiAgICAgICAgZmluaXNoOiBmdW5jdGlvbihzdGF0ZSkge1xuICAgICAgICAgICAgLy8gc3RlcCBmdW5jdGlvbiBpcyBub3QgY2FsbGVkIG9uIHRoZSBsYXN0IHN0ZXAgb2YgYW5pbWF0aW9uXG4gICAgICAgICAgICBzZWxmLl9wYXRoLnN0eWxlLnN0cm9rZURhc2hvZmZzZXQgPSBzdGF0ZS5vZmZzZXQ7XG4gICAgICAgICAgICBvcHRzLnN0ZXAoc3RhdGUsIG9wdHMuYXR0YWNobWVudCk7XG5cbiAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGNiKSkge1xuICAgICAgICAgICAgICAgIGNiKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cblBhdGgucHJvdG90eXBlLl9zdG9wVHdlZW4gPSBmdW5jdGlvbiBfc3RvcFR3ZWVuKCkge1xuICAgIGlmICh0aGlzLl90d2VlbmFibGUgIT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5fdHdlZW5hYmxlLnN0b3AoKTtcbiAgICAgICAgdGhpcy5fdHdlZW5hYmxlLmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy5fdHdlZW5hYmxlID0gbnVsbDtcbiAgICB9XG59O1xuXG5QYXRoLnByb3RvdHlwZS5fZWFzaW5nID0gZnVuY3Rpb24gX2Vhc2luZyhlYXNpbmcpIHtcbiAgICBpZiAoRUFTSU5HX0FMSUFTRVMuaGFzT3duUHJvcGVydHkoZWFzaW5nKSkge1xuICAgICAgICByZXR1cm4gRUFTSU5HX0FMSUFTRVNbZWFzaW5nXTtcbiAgICB9XG5cbiAgICByZXR1cm4gZWFzaW5nO1xufTtcblxuLy8gVXRpbGl0eSBmdW5jdGlvbnNcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbi8vIENvcHkgYWxsIGF0dHJpYnV0ZXMgZnJvbSBzb3VyY2Ugb2JqZWN0IHRvIGRlc3RpbmF0aW9uIG9iamVjdC5cbi8vIGRlc3RpbmF0aW9uIG9iamVjdCBpcyBtdXRhdGVkLlxuZnVuY3Rpb24gZXh0ZW5kKGRlc3RpbmF0aW9uLCBzb3VyY2UpIHtcbiAgICBkZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uIHx8IHt9O1xuICAgIHNvdXJjZSA9IHNvdXJjZSB8fCB7fTtcblxuICAgIGZvciAodmFyIGF0dHJOYW1lIGluIHNvdXJjZSkge1xuICAgICAgICBpZiAoc291cmNlLmhhc093blByb3BlcnR5KGF0dHJOYW1lKSkge1xuICAgICAgICAgICAgZGVzdGluYXRpb25bYXR0ck5hbWVdID0gc291cmNlW2F0dHJOYW1lXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBkZXN0aW5hdGlvbjtcbn1cblxuZnVuY3Rpb24gaXNTdHJpbmcob2JqKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvYmogPT09ICdzdHJpbmcnIHx8IG9iaiBpbnN0YW5jZW9mIFN0cmluZztcbn1cblxuZnVuY3Rpb24gaXNGdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJmdW5jdGlvblwiO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBMaW5lOiBMaW5lLFxuICAgIENpcmNsZTogQ2lyY2xlLFxuICAgIFNxdWFyZTogU3F1YXJlLFxuICAgIFBhdGg6IFBhdGhcbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuL2xpYi9yYW5kb21zdHJpbmdcIik7IiwidmFyIGNoYXJzID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWtsbW5vcHFyc3R1dnd4eXonO1xuXG5leHBvcnRzLmdlbmVyYXRlID0gZnVuY3Rpb24obGVuZ3RoKSB7XG4gIGxlbmd0aCA9IGxlbmd0aCA/IGxlbmd0aCA6IDMyO1xuICBcbiAgdmFyIHN0cmluZyA9ICcnO1xuICBcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHZhciByYW5kb21OdW1iZXIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFycy5sZW5ndGgpO1xuICAgIHN0cmluZyArPSBjaGFycy5zdWJzdHJpbmcocmFuZG9tTnVtYmVyLCByYW5kb21OdW1iZXIgKyAxKTtcbiAgfVxuICBcbiAgcmV0dXJuIHN0cmluZztcbn0iXX0=
